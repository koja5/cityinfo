{"version":3,"file":"360.js","mappings":"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","sources":["./src/app/components/dashboard/pages/users/uploads/uploads.component.ts","./src/app/components/dashboard/pages/users/uploads/uploads.component.html","./src/app/components/dashboard/routing-module/dashboard-routing.ts","./src/app/components/dashboard/routing-module/dashboard.module.ts","./src/app/services/login-guard/logged-guard-superadmin.service.ts","./src/app/services/login-guard/logged-guard-user.service.ts","./node_modules/ngx-image-compress/fesm2015/ngx-image-compress.mjs","./node_modules/ngx-image-cropper/fesm2015/ngx-image-cropper.mjs"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-uploads',\r\n  templateUrl: './uploads.component.html',\r\n  styleUrls: ['./uploads.component.scss']\r\n})\r\nexport class UploadsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>uploads works!</p>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LoggedGuardSuperadminService } from 'src/app/services/login-guard/logged-guard-superadmin.service';\r\nimport { LoggedGuardUserService } from 'src/app/services/login-guard/logged-guard-user.service';\r\nimport { DashboardComponent } from '../dashboard.component';\r\nimport { UploadsComponent } from '../pages/users/uploads/uploads.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: 'superadmin',\r\n    pathMatch: 'full',\r\n  },\r\n  {\r\n    path: 'uploads',\r\n    component: UploadsComponent,\r\n  },\r\n  {\r\n    path: 'superadmin',\r\n    canActivate: [LoggedGuardSuperadminService],\r\n    loadChildren: () =>\r\n      import(\r\n        '../pages/superadmin/routing-module/superadmin.module'\r\n      ).then((m) => m.SuperadminModule),\r\n  },\r\n  {\r\n    path: 'user',\r\n    canActivate: [LoggedGuardUserService],\r\n    loadChildren: () =>\r\n      import(\r\n        '../pages/users/routing-module/users.module'\r\n      ).then((m) => m.UsersModule),\r\n  },\r\n  {\r\n    path: 'settings',\r\n    loadChildren: () =>\r\n      import(\r\n        '../pages/profile-settings/routing-module/profile-settings.module'\r\n      ).then((m) => m.ProfileSettingsdModule),\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DashboardRouting {}\r\n","import { NgModule } from '@angular/core';\r\nimport { DashboardComponent } from '../dashboard.component';\r\nimport { DashboardRouting } from './dashboard-routing';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NavigationComponent } from '../navigation/navigation.component';\r\nimport { DynamicModule } from '../../dynamic-component/dynamic-module/dynamic/dynamic.module';\r\nimport { DropDownButtonModule } from '@syncfusion/ej2-angular-splitbuttons';\r\nimport { ImageCropperModule } from 'ngx-image-cropper';\r\nimport { NgxImageCompressService } from 'ngx-image-compress';\r\n\r\n@NgModule({\r\n  declarations: [DashboardComponent, NavigationComponent],\r\n  imports: [\r\n    CommonModule,\r\n    DashboardRouting,\r\n    DynamicModule,\r\n    DropDownButtonModule,\r\n    ImageCropperModule,\r\n  ],\r\n  providers: [NgxImageCompressService],\r\n})\r\nexport class DashboardModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UserType } from 'src/app/enums/user-type';\r\nimport { HelpService } from '../help.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LoggedGuardSuperadminService {\r\n  constructor(private router: Router, public helpService: HelpService) {}\r\n\r\n  canActivate() {\r\n    if (this.helpService.getUserType() == UserType.superadmin) {\r\n      return true;\r\n    } else {\r\n      this.router.navigate(['/dashboard/user']);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UserType } from 'src/app/enums/user-type';\r\nimport { HelpService } from '../help.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LoggedGuardUserService {\r\n\r\n  constructor(private router: Router, public helpService: HelpService) {}\r\n\r\n  canActivate() {\r\n    if (this.helpService.getUserType() == UserType.user) {\r\n      return true;\r\n    } else {\r\n      this.router.navigate(['/dashboard/superadmin']);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import * as i0 from '@angular/core';\nimport { Injectable } from '@angular/core';\nimport { __awaiter } from 'tslib';\n\n/**\n * EXIF tag standard reference\n *\n * Tag Name: Orientation\n * Tag ID: 0x0112\n * Writable: int16u\n * Group: IFD0\n * Values:\n 1 = Horizontal (normal)\n 2 = Mirror horizontal\n 3 = Rotate 180\n 4 = Mirror vertical\n 5 = Mirror horizontal and rotate 270 CW\n 6 = Rotate 90 CW\n 7 = Mirror horizontal and rotate 90 CW\n 8 = Rotate 270 CW\n */\nvar DOC_ORIENTATION;\n(function (DOC_ORIENTATION) {\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Up\"] = 1] = \"Up\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Down\"] = 3] = \"Down\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Right\"] = 6] = \"Right\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Left\"] = 8] = \"Left\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"UpMirrored\"] = 2] = \"UpMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"DownMirrored\"] = 4] = \"DownMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"LeftMirrored\"] = 5] = \"LeftMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"RightMirrored\"] = 7] = \"RightMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Default\"] = 0] = \"Default\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"NotJpeg\"] = -1] = \"NotJpeg\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"NotDefined\"] = -2] = \"NotDefined\";\n})(DOC_ORIENTATION || (DOC_ORIENTATION = {}));\n\nvar _a;\nclass ImageCompress {\n}\n_a = ImageCompress;\nImageCompress.getOrientation = (file) => new Promise((resolve, reject) => {\n    try {\n        const reader = new FileReader();\n        reader.onload = () => {\n            const view = new DataView(reader.result);\n            if (!view.byteLength) {\n                return resolve(DOC_ORIENTATION.NotDefined);\n            }\n            if (view.getUint16(0, false) !== 0xffd8) {\n                return resolve(DOC_ORIENTATION.NotDefined);\n            }\n            const length = view.byteLength;\n            let offset = 2;\n            while (offset < length) {\n                const marker = view.getUint16(offset, false);\n                offset += 2;\n                if (marker === 0xffe1) {\n                    if (view.getUint32((offset += 2), false) !== 0x45786966) {\n                        return resolve(DOC_ORIENTATION.NotJpeg);\n                    }\n                    const little = view.getUint16((offset += 6), false) === 0x4949;\n                    offset += view.getUint32(offset + 4, little);\n                    const tags = view.getUint16(offset, little);\n                    offset += 2;\n                    for (let i = 0; i < tags; i++) {\n                        if (view.getUint16(offset + i * 12, little) === 0x0112) {\n                            return resolve(view.getUint16(offset + i * 12 + 8, little));\n                        }\n                    }\n                }\n                else if ((marker & 0xff00) !== 0xff00) {\n                    break;\n                }\n                else {\n                    offset += view.getUint16(offset, false);\n                }\n            }\n            return resolve(DOC_ORIENTATION.NotJpeg);\n        };\n        reader.readAsArrayBuffer(file);\n    }\n    catch (e) {\n        return reject(DOC_ORIENTATION.Default);\n    }\n});\nImageCompress.uploadFile = (render, multiple = true, rejectOnCancel = false) => new Promise(function (resolve, reject) {\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    const isIOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);\n    Promise.resolve(isSafari || isIOS)\n        .then(onlyNative => {\n        if (onlyNative) {\n            return ImageCompress.generateUploadInputNative(window.document, multiple, rejectOnCancel);\n        }\n        else {\n            return ImageCompress.generateUploadInputRenderer(render, multiple, rejectOnCancel);\n        }\n    })\n        .then((filesList) => {\n        const files = filesList ? Array.from(filesList) : [];\n        const orientationPromises = files.map(file => ImageCompress.getOrientation(file));\n        const readerPromises = files.map(file => ImageCompress.fileToDataURL(file));\n        let orientationsResult = [];\n        Promise.all(orientationPromises)\n            .then((orientations) => {\n            orientationsResult = orientations;\n            return Promise.all(readerPromises);\n        })\n            .then(readerResult => {\n            const resultArray = readerResult.map((parsedFile, index) => ({\n                image: parsedFile.dataUrl,\n                orientation: orientationsResult[index],\n                fileName: parsedFile.fileName,\n            }));\n            if (multiple) {\n                resolve(resultArray);\n            }\n            else {\n                resolve(resultArray[0]);\n            }\n        });\n    })\n        .catch(err => reject(err));\n});\nImageCompress.fileToDataURL = (file) => {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            //myReader.onloadend = (progressEvent: ProgressEvent<FileReader>)\n            resolve({ dataUrl: e.target.result, fileName: file.name });\n        };\n        try {\n            reader.readAsDataURL(file);\n        }\n        catch (e) {\n            reject(`ngx-image-compress - probably no file have been selected: ${e}`);\n        }\n    });\n};\nImageCompress.generateUploadInputRenderer = (render, multiple = true, rejectOnCancel = false) => {\n    let lock = false;\n    return new Promise((resolve, reject) => {\n        const inputElement = render.createElement('input');\n        render.setStyle(inputElement, 'display', 'none');\n        render.setProperty(inputElement, 'type', 'file');\n        render.setProperty(inputElement, 'accept', 'image/*');\n        if (multiple) {\n            render.setProperty(inputElement, 'multiple', 'true');\n        }\n        render.listen(inputElement, 'click', ($event) => {\n            $event.target.value = '';\n        });\n        render.listen(inputElement, 'change', $event => {\n            lock = true;\n            const files = $event.target.files;\n            resolve(files);\n        });\n        if (rejectOnCancel) {\n            window.addEventListener('focus', () => {\n                setTimeout(() => {\n                    if (!lock) {\n                        reject(new Error('file upload on blur - no file selected'));\n                    }\n                }, 300);\n            }, { once: true });\n        }\n        inputElement.click();\n    });\n};\nImageCompress.generateUploadInputNative = (documentNativeApi, multiple = true, rejectOnCancel = false) => {\n    let lock = false;\n    return new Promise((resolve, reject) => {\n        const inputElement = documentNativeApi.createElement('input');\n        inputElement.id = 'upload-input' + new Date();\n        inputElement.style.display = 'none';\n        inputElement.setAttribute('type', 'file');\n        inputElement.setAttribute('accept', 'image/*');\n        if (multiple) {\n            inputElement.setAttribute('multiple', 'true');\n        }\n        documentNativeApi.body.appendChild(inputElement);\n        inputElement.addEventListener('change', () => {\n            lock = true;\n            resolve(inputElement.files);\n            documentNativeApi.body.removeChild(documentNativeApi.getElementById(inputElement.id));\n        }, { once: true });\n        if (rejectOnCancel) {\n            window.addEventListener('focus', () => {\n                setTimeout(() => {\n                    if (!lock && documentNativeApi.getElementById(inputElement.id)) {\n                        reject(new Error('file upload on blur - no file selected'));\n                        documentNativeApi.body.removeChild(documentNativeApi.getElementById(inputElement.id));\n                    }\n                }, 300);\n            }, { once: true });\n        }\n        // open file select box\n        inputElement.click();\n    });\n};\nImageCompress.compress = (imageDataUrlSource, orientation, render, ratio = 50, quality = 50, maxwidth = 0, maxheight = 0) => new Promise(function (resolve, reject) {\n    quality = quality / 100;\n    ratio = ratio / 100;\n    const sourceImage = new Image();\n    // important for safari: we need to wait for onload event\n    sourceImage.onload = () => {\n        const canvas = render.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n            return reject(`No canvas context available`);\n        }\n        let w = sourceImage.naturalWidth;\n        let h = sourceImage.naturalHeight;\n        if (!CSS.supports('image-orientation', 'from-image')) {\n            if (orientation === DOC_ORIENTATION.Right || orientation === DOC_ORIENTATION.Left) {\n                const t = w;\n                w = h;\n                h = t;\n            }\n        }\n        const xratio = maxwidth ? maxwidth / w : 1;\n        const yratio = maxheight ? maxheight / h : 1;\n        ratio = Math.min(ratio, xratio, yratio);\n        canvas.width = w * ratio;\n        canvas.height = h * ratio;\n        const TO_RADIANS = Math.PI / 180;\n        if (CSS.supports('image-orientation', 'from-image') || orientation === DOC_ORIENTATION.Up) {\n            ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n        }\n        else if (orientation === DOC_ORIENTATION.Right) {\n            ctx.save();\n            ctx.rotate(90 * TO_RADIANS);\n            ctx.translate(0, -canvas.width);\n            ctx.drawImage(sourceImage, 0, 0, canvas.height, canvas.width);\n            ctx.restore();\n        }\n        else if (orientation === DOC_ORIENTATION.Left) {\n            ctx.save();\n            ctx.rotate(-90 * TO_RADIANS);\n            ctx.translate(-canvas.width, 0);\n            ctx.drawImage(sourceImage, 0, 0, canvas.height, canvas.width);\n            ctx.restore();\n        }\n        else if (orientation === DOC_ORIENTATION.Down) {\n            ctx.save();\n            ctx.rotate(180 * TO_RADIANS);\n            ctx.translate(-canvas.width, -canvas.height);\n            ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n            ctx.restore();\n        }\n        else {\n            // no orientation value found - same as default UP\n            ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n        }\n        const mime = imageDataUrlSource.substr(5, imageDataUrlSource.split(';')[0].length - 5);\n        // TODO test on mime\n        const result = canvas.toDataURL(mime, quality);\n        resolve(result);\n    };\n    sourceImage.onerror = e => reject(e);\n    sourceImage.src = imageDataUrlSource;\n});\nImageCompress.byteCount = (imgString) => encodeURI(imgString).split(/%..|./).length - 1;\nImageCompress.getImageMaxSize = (maxSizeMb, debugMode, render, rejectOnCancel = false) => __awaiter(void 0, void 0, void 0, function* () {\n    const MAX_TRIES = 10;\n    const bytesToMB = (bytes) => (bytes / 1024 / 1024).toFixed(2);\n    if (debugMode) {\n        console.debug('NgxImageCompress - Opening upload window');\n    }\n    const myFile = (yield ImageCompress.uploadFile(render, false, rejectOnCancel));\n    let compressedFile;\n    for (let i = 0; i < MAX_TRIES; i++) {\n        const previousSize = ImageCompress.byteCount(myFile.image);\n        compressedFile = yield ImageCompress.compress(myFile.image, myFile.orientation, render, 50, 100);\n        const newSize = ImageCompress.byteCount(compressedFile);\n        console.debug('NgxImageCompress -', 'Compression from', bytesToMB(previousSize), 'MB to', bytesToMB(newSize), 'MB');\n        if (newSize >= previousSize) {\n            if (i === 0) {\n                if (debugMode) {\n                    console.debug('NgxImageCompress -', \"File can't be reduced at all - returning the original\", bytesToMB(previousSize), 'MB large');\n                }\n                throw Object.assign(Object.assign({}, myFile), { image: compressedFile });\n            }\n            else {\n                if (debugMode) {\n                    console.debug('NgxImageCompress -', \"File can't be reduced more - returning the best we can, which is \", bytesToMB(previousSize), 'MB large');\n                }\n                throw Object.assign(Object.assign({}, myFile), { image: compressedFile });\n            }\n        }\n        else {\n            if (newSize < maxSizeMb * 1024 * 1024) {\n                if (debugMode) {\n                    console.debug('NgxImageCompress -', 'Here your file', bytesToMB(newSize), 'MB large');\n                }\n                return Object.assign(Object.assign({}, myFile), { image: compressedFile });\n            }\n            else if (i === 9) {\n                if (debugMode) {\n                    console.debug('NgxImageCompress -', \"File can't reach the desired size after\", MAX_TRIES, 'tries. Returning file ', bytesToMB(previousSize), 'MB large');\n                }\n                throw Object.assign(Object.assign({}, myFile), { image: compressedFile });\n            }\n        }\n        if (debugMode) {\n            console.debug('NgxImageCompress -', 'Reached', bytesToMB(newSize), 'MB large. Trying another time after', i + 1, 'times');\n        }\n        myFile.image = compressedFile;\n    }\n    if (debugMode) {\n        console.debug('NgxImageCompress - Unexpected error');\n    }\n    throw {};\n});\n\nclass NgxImageCompressService {\n    constructor(rendererFactory) {\n        this.DOC_ORIENTATION = DOC_ORIENTATION;\n        this.render = rendererFactory.createRenderer(null, null);\n    }\n    /**\n     * helper to evaluate the compression rate\n     * @param imgString the image in base64 string format\n     */\n    byteCount(image) {\n        return ImageCompress.byteCount(image);\n    }\n    /**\n     * Get the correct Orientation value from image tags\n     */\n    getOrientation(file) {\n        return ImageCompress.getOrientation(file);\n    }\n    /**\n     * return a promise with the new image data and image orientation\n     * Nothing happen if no file have been selected\n     */\n    uploadFile() {\n        return ImageCompress.uploadFile(this.render, false);\n    }\n    /**\n     * return a promise with an array of image data and image orientation\n     * Nothing happen if no files have been selected\n     */\n    uploadMultipleFiles() {\n        return ImageCompress.uploadFile(this.render, true);\n    }\n    /**\n     * return a promise with the new image data and image orientation\n     * the promise will reject if no file have been selected\n     */\n    uploadFileOrReject() {\n        return ImageCompress.uploadFile(this.render, false, true);\n    }\n    /**\n     * return a promise with an array of image data and image orientation\n     * the promise will reject if no files have been selected\n     */\n    uploadMultipleFilesOrReject() {\n        return ImageCompress.uploadFile(this.render, true, true);\n    }\n    /**\n   * perform a compression from the given DataUrl (string), provided by the uploadFile, or uploadMultipleFiles method\n   *\n   *\n   | Parameter   | Type   | Description                                                                       |\n   | ----------- | ------ | --------------------------------------------------------------------------------- |\n   | image       | string | DataUrl (string) representing the image                                           |\n   | orientation | number | EXIF Orientation value using the DOC_ORIENTATION enum value                       |\n   | ratio       | number | Maximum scale factor as a percentage (optional, default: 50) <sup>[1](#fn1)</sup> |\n   | quality     | number | JPEG quality factor as a percentage (optional, default: 50) <sup>[2](#fn2)</sup>  |\n   | maxwidth    | number | Maximum width in pixels if you need to resize (optional, default: 0 - no resize)  |\n   | maxheight   | number | Maximum height in pixels if you need to resize (optional, default: 0 - no resize) |\n   */\n    compressFile(image, orientation, ratio = 50, quality = 50, maxWidth = 0, maxHeight = 0) {\n        return ImageCompress.compress(image, orientation, this.render, ratio, quality, maxWidth, maxHeight);\n    }\n    /**\n     * Most simple function to use here.\n     * Perform an upload and return an image dataUrl (string format) with a maximum size, given in *MegaBytes*\n     * If the size can't be reached, the best that can be reached will be returned in promise *rejection*\n     * Put debugMode to true if you have some trouble to print some help using console.debug\n     */\n    uploadAndGetImageWithMaxSize(maxSizeMb = 1, debugMode = false, rejectOnCancel = false) {\n        return ImageCompress.getImageMaxSize(maxSizeMb, debugMode, this.render, rejectOnCancel)\n            .then(uploadResponse => uploadResponse.image)\n            .catch(e => {\n            throw e.image;\n        });\n    }\n    /**\n     * Same as before, but return more informations (file name...)\n     */\n    uploadAndGetImageWithMaxSizeAndMetas(maxSizeMb = 1, debugMode = false, rejectOnCancel = false) {\n        return ImageCompress.getImageMaxSize(maxSizeMb, debugMode, this.render, rejectOnCancel);\n    }\n}\nNgxImageCompressService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.2\", ngImport: i0, type: NgxImageCompressService, deps: [{ token: i0.RendererFactory2 }], target: i0.ɵɵFactoryTarget.Injectable });\nNgxImageCompressService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.1.2\", ngImport: i0, type: NgxImageCompressService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.2\", ngImport: i0, type: NgxImageCompressService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }]; } });\n\n/*\n * Public API Surface of ngx-image-compress\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DOC_ORIENTATION, NgxImageCompressService };\n","import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, isDevMode, Component, ChangeDetectionStrategy, ViewChild, Input, HostBinding, Output, HostListener, NgModule } from '@angular/core';\nimport { __awaiter } from 'tslib';\nimport * as i4 from '@angular/platform-browser';\nimport * as i5 from '@angular/common';\nimport { CommonModule } from '@angular/common';\n\nclass CropperSettings {\n    constructor() {\n        // From options\n        this.format = 'png';\n        this.maintainAspectRatio = true;\n        this.transform = {};\n        this.aspectRatio = 1;\n        this.resetCropOnAspectRatioChange = true;\n        this.resizeToWidth = 0;\n        this.resizeToHeight = 0;\n        this.cropperMinWidth = 0;\n        this.cropperMinHeight = 0;\n        this.cropperMaxHeight = 0;\n        this.cropperMaxWidth = 0;\n        this.cropperStaticWidth = 0;\n        this.cropperStaticHeight = 0;\n        this.canvasRotation = 0;\n        this.initialStepSize = 3;\n        this.roundCropper = false;\n        this.onlyScaleDown = false;\n        this.imageQuality = 92;\n        this.autoCrop = true;\n        this.backgroundColor = null;\n        this.containWithinAspectRatio = false;\n        this.hideResizeSquares = false;\n        this.alignImage = 'center';\n        // Internal\n        this.cropperScaledMinWidth = 20;\n        this.cropperScaledMinHeight = 20;\n        this.cropperScaledMaxWidth = 20;\n        this.cropperScaledMaxHeight = 20;\n        this.stepSize = this.initialStepSize;\n    }\n    setOptions(options) {\n        Object.keys(options)\n            .filter((k) => k in this)\n            .forEach((k) => this[k] = options[k]);\n        this.validateOptions();\n    }\n    setOptionsFromChanges(changes) {\n        Object.keys(changes)\n            .filter((k) => k in this)\n            .forEach((k) => this[k] = changes[k].currentValue);\n        this.validateOptions();\n    }\n    validateOptions() {\n        if (this.maintainAspectRatio && !this.aspectRatio) {\n            throw new Error('`aspectRatio` should > 0 when `maintainAspectRatio` is enabled');\n        }\n    }\n}\n\nvar MoveTypes;\n(function (MoveTypes) {\n    MoveTypes[\"Drag\"] = \"drag\";\n    MoveTypes[\"Move\"] = \"move\";\n    MoveTypes[\"Resize\"] = \"resize\";\n    MoveTypes[\"Pinch\"] = \"pinch\";\n})(MoveTypes || (MoveTypes = {}));\n\nfunction getPositionForKey(key) {\n    switch (key) {\n        case 'ArrowUp':\n            return 'top';\n        case 'ArrowRight':\n            return 'right';\n        case 'ArrowDown':\n            return 'bottom';\n        case 'ArrowLeft':\n        default:\n            return 'left';\n    }\n}\nfunction getInvertedPositionForKey(key) {\n    switch (key) {\n        case 'ArrowUp':\n            return 'bottom';\n        case 'ArrowRight':\n            return 'left';\n        case 'ArrowDown':\n            return 'top';\n        case 'ArrowLeft':\n        default:\n            return 'right';\n    }\n}\nfunction getEventForKey(key, stepSize) {\n    switch (key) {\n        case 'ArrowUp':\n            return { clientX: 0, clientY: stepSize * -1 };\n        case 'ArrowRight':\n            return { clientX: stepSize, clientY: 0 };\n        case 'ArrowDown':\n            return { clientX: 0, clientY: stepSize };\n        case 'ArrowLeft':\n        default:\n            return { clientX: stepSize * -1, clientY: 0 };\n    }\n}\n\n/*\n * Hermite resize - fast image resize/resample using Hermite filter.\n * https://github.com/viliusle/Hermite-resize\n */\nfunction resizeCanvas(canvas, width, height) {\n    const width_source = canvas.width;\n    const height_source = canvas.height;\n    width = Math.round(width);\n    height = Math.round(height);\n    const ratio_w = width_source / width;\n    const ratio_h = height_source / height;\n    const ratio_w_half = Math.ceil(ratio_w / 2);\n    const ratio_h_half = Math.ceil(ratio_h / 2);\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n        const img = ctx.getImageData(0, 0, width_source, height_source);\n        const img2 = ctx.createImageData(width, height);\n        const data = img.data;\n        const data2 = img2.data;\n        for (let j = 0; j < height; j++) {\n            for (let i = 0; i < width; i++) {\n                const x2 = (i + j * width) * 4;\n                const center_y = j * ratio_h;\n                let weight = 0;\n                let weights = 0;\n                let weights_alpha = 0;\n                let gx_r = 0;\n                let gx_g = 0;\n                let gx_b = 0;\n                let gx_a = 0;\n                const xx_start = Math.floor(i * ratio_w);\n                const yy_start = Math.floor(j * ratio_h);\n                let xx_stop = Math.ceil((i + 1) * ratio_w);\n                let yy_stop = Math.ceil((j + 1) * ratio_h);\n                xx_stop = Math.min(xx_stop, width_source);\n                yy_stop = Math.min(yy_stop, height_source);\n                for (let yy = yy_start; yy < yy_stop; yy++) {\n                    const dy = Math.abs(center_y - yy) / ratio_h_half;\n                    const center_x = i * ratio_w;\n                    const w0 = dy * dy; //pre-calc part of w\n                    for (let xx = xx_start; xx < xx_stop; xx++) {\n                        const dx = Math.abs(center_x - xx) / ratio_w_half;\n                        const w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            //pixel too far\n                            continue;\n                        }\n                        //hermite filter\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        const pos_x = 4 * (xx + yy * width_source);\n                        //alpha\n                        gx_a += weight * data[pos_x + 3];\n                        weights_alpha += weight;\n                        //colors\n                        if (data[pos_x + 3] < 255)\n                            weight = weight * data[pos_x + 3] / 250;\n                        gx_r += weight * data[pos_x];\n                        gx_g += weight * data[pos_x + 1];\n                        gx_b += weight * data[pos_x + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        canvas.width = width;\n        canvas.height = height;\n        //draw\n        ctx.putImageData(img2, 0, 0);\n    }\n}\n\nfunction percentage(percent, totalValue) {\n    return (percent / 100) * totalValue;\n}\n\nclass CropService {\n    crop(sourceImage, loadedImage, cropper, settings) {\n        const imagePosition = this.getImagePosition(sourceImage, loadedImage, cropper, settings);\n        const width = imagePosition.x2 - imagePosition.x1;\n        const height = imagePosition.y2 - imagePosition.y1;\n        const cropCanvas = document.createElement('canvas');\n        cropCanvas.width = width;\n        cropCanvas.height = height;\n        const ctx = cropCanvas.getContext('2d');\n        if (!ctx) {\n            return null;\n        }\n        if (settings.backgroundColor != null) {\n            ctx.fillStyle = settings.backgroundColor;\n            ctx.fillRect(0, 0, width, height);\n        }\n        const scaleX = (settings.transform.scale || 1) * (settings.transform.flipH ? -1 : 1);\n        const scaleY = (settings.transform.scale || 1) * (settings.transform.flipV ? -1 : 1);\n        const { translateH, translateV } = this.getCanvasTranslate(sourceImage, loadedImage, settings);\n        const transformedImage = loadedImage.transformed;\n        ctx.setTransform(scaleX, 0, 0, scaleY, transformedImage.size.width / 2 + translateH, transformedImage.size.height / 2 + translateV);\n        ctx.translate(-imagePosition.x1 / scaleX, -imagePosition.y1 / scaleY);\n        ctx.rotate((settings.transform.rotate || 0) * Math.PI / 180);\n        ctx.drawImage(transformedImage.image, -transformedImage.size.width / 2, -transformedImage.size.height / 2);\n        const output = {\n            width, height,\n            imagePosition,\n            cropperPosition: Object.assign({}, cropper)\n        };\n        if (settings.containWithinAspectRatio) {\n            output.offsetImagePosition = this.getOffsetImagePosition(sourceImage, loadedImage, cropper, settings);\n        }\n        const resizeRatio = this.getResizeRatio(width, height, settings);\n        if (resizeRatio !== 1) {\n            output.width = Math.round(width * resizeRatio);\n            output.height = settings.maintainAspectRatio\n                ? Math.round(output.width / settings.aspectRatio)\n                : Math.round(height * resizeRatio);\n            resizeCanvas(cropCanvas, output.width, output.height);\n        }\n        output.base64 = cropCanvas.toDataURL('image/' + settings.format, this.getQuality(settings));\n        return output;\n    }\n    getCanvasTranslate(sourceImage, loadedImage, settings) {\n        if (settings.transform.translateUnit === 'px') {\n            const ratio = this.getRatio(sourceImage, loadedImage);\n            return {\n                translateH: (settings.transform.translateH || 0) * ratio,\n                translateV: (settings.transform.translateV || 0) * ratio\n            };\n        }\n        else {\n            return {\n                translateH: settings.transform.translateH ? percentage(settings.transform.translateH, loadedImage.transformed.size.width) : 0,\n                translateV: settings.transform.translateV ? percentage(settings.transform.translateV, loadedImage.transformed.size.height) : 0\n            };\n        }\n    }\n    getRatio(sourceImage, loadedImage) {\n        const sourceImageElement = sourceImage.nativeElement;\n        return loadedImage.transformed.size.width / sourceImageElement.offsetWidth;\n    }\n    getImagePosition(sourceImage, loadedImage, cropper, settings) {\n        const ratio = this.getRatio(sourceImage, loadedImage);\n        const out = {\n            x1: Math.round(cropper.x1 * ratio),\n            y1: Math.round(cropper.y1 * ratio),\n            x2: Math.round(cropper.x2 * ratio),\n            y2: Math.round(cropper.y2 * ratio)\n        };\n        if (!settings.containWithinAspectRatio) {\n            out.x1 = Math.max(out.x1, 0);\n            out.y1 = Math.max(out.y1, 0);\n            out.x2 = Math.min(out.x2, loadedImage.transformed.size.width);\n            out.y2 = Math.min(out.y2, loadedImage.transformed.size.height);\n        }\n        return out;\n    }\n    getOffsetImagePosition(sourceImage, loadedImage, cropper, settings) {\n        const canvasRotation = settings.canvasRotation + loadedImage.exifTransform.rotate;\n        const sourceImageElement = sourceImage.nativeElement;\n        const ratio = loadedImage.transformed.size.width / sourceImageElement.offsetWidth;\n        let offsetX;\n        let offsetY;\n        if (canvasRotation % 2) {\n            offsetX = (loadedImage.transformed.size.width - loadedImage.original.size.height) / 2;\n            offsetY = (loadedImage.transformed.size.height - loadedImage.original.size.width) / 2;\n        }\n        else {\n            offsetX = (loadedImage.transformed.size.width - loadedImage.original.size.width) / 2;\n            offsetY = (loadedImage.transformed.size.height - loadedImage.original.size.height) / 2;\n        }\n        const out = {\n            x1: Math.round(cropper.x1 * ratio) - offsetX,\n            y1: Math.round(cropper.y1 * ratio) - offsetY,\n            x2: Math.round(cropper.x2 * ratio) - offsetX,\n            y2: Math.round(cropper.y2 * ratio) - offsetY\n        };\n        if (!settings.containWithinAspectRatio) {\n            out.x1 = Math.max(out.x1, 0);\n            out.y1 = Math.max(out.y1, 0);\n            out.x2 = Math.min(out.x2, loadedImage.transformed.size.width);\n            out.y2 = Math.min(out.y2, loadedImage.transformed.size.height);\n        }\n        return out;\n    }\n    getResizeRatio(width, height, settings) {\n        const ratioWidth = settings.resizeToWidth / width;\n        const ratioHeight = settings.resizeToHeight / height;\n        const ratios = new Array();\n        if (settings.resizeToWidth > 0) {\n            ratios.push(ratioWidth);\n        }\n        if (settings.resizeToHeight > 0) {\n            ratios.push(ratioHeight);\n        }\n        const result = ratios.length === 0 ? 1 : Math.min(...ratios);\n        if (result > 1 && !settings.onlyScaleDown) {\n            return result;\n        }\n        return Math.min(result, 1);\n    }\n    getQuality(settings) {\n        return Math.min(1, Math.max(0, settings.imageQuality / 100));\n    }\n}\nCropService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nCropService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass CropperPositionService {\n    resetCropperPosition(sourceImage, cropperPosition, settings) {\n        if (!(sourceImage === null || sourceImage === void 0 ? void 0 : sourceImage.nativeElement)) {\n            return;\n        }\n        const sourceImageElement = sourceImage.nativeElement;\n        if (settings.cropperStaticHeight && settings.cropperStaticWidth) {\n            cropperPosition.x1 = 0;\n            cropperPosition.x2 = sourceImageElement.offsetWidth > settings.cropperStaticWidth ?\n                settings.cropperStaticWidth : sourceImageElement.offsetWidth;\n            cropperPosition.y1 = 0;\n            cropperPosition.y2 = sourceImageElement.offsetHeight > settings.cropperStaticHeight ?\n                settings.cropperStaticHeight : sourceImageElement.offsetHeight;\n        }\n        else {\n            const cropperWidth = Math.min(settings.cropperScaledMaxWidth, sourceImageElement.offsetWidth);\n            const cropperHeight = Math.min(settings.cropperScaledMaxHeight, sourceImageElement.offsetHeight);\n            if (!settings.maintainAspectRatio) {\n                cropperPosition.x1 = 0;\n                cropperPosition.x2 = cropperWidth;\n                cropperPosition.y1 = 0;\n                cropperPosition.y2 = cropperHeight;\n            }\n            else if (sourceImageElement.offsetWidth / settings.aspectRatio < sourceImageElement.offsetHeight) {\n                cropperPosition.x1 = 0;\n                cropperPosition.x2 = cropperWidth;\n                const cropperHeightWithAspectRatio = cropperWidth / settings.aspectRatio;\n                cropperPosition.y1 = (sourceImageElement.offsetHeight - cropperHeightWithAspectRatio) / 2;\n                cropperPosition.y2 = cropperPosition.y1 + cropperHeightWithAspectRatio;\n            }\n            else {\n                cropperPosition.y1 = 0;\n                cropperPosition.y2 = cropperHeight;\n                const cropperWidthWithAspectRatio = cropperHeight * settings.aspectRatio;\n                cropperPosition.x1 = (sourceImageElement.offsetWidth - cropperWidthWithAspectRatio) / 2;\n                cropperPosition.x2 = cropperPosition.x1 + cropperWidthWithAspectRatio;\n            }\n        }\n    }\n    move(event, moveStart, cropperPosition) {\n        const diffX = this.getClientX(event) - moveStart.clientX;\n        const diffY = this.getClientY(event) - moveStart.clientY;\n        cropperPosition.x1 = moveStart.x1 + diffX;\n        cropperPosition.y1 = moveStart.y1 + diffY;\n        cropperPosition.x2 = moveStart.x2 + diffX;\n        cropperPosition.y2 = moveStart.y2 + diffY;\n    }\n    resize(event, moveStart, cropperPosition, maxSize, settings) {\n        const moveX = this.getClientX(event) - moveStart.clientX;\n        const moveY = this.getClientY(event) - moveStart.clientY;\n        switch (moveStart.position) {\n            case 'left':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                break;\n            case 'topleft':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'top':\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'topright':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'right':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                break;\n            case 'bottomright':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'bottom':\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'bottomleft':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'center':\n                const scale = event.scale;\n                const newWidth = Math.min(Math.max(settings.cropperScaledMinWidth, (Math.abs(moveStart.x2 - moveStart.x1)) * scale), settings.cropperScaledMaxWidth);\n                const newHeight = Math.min(Math.max(settings.cropperScaledMinHeight, (Math.abs(moveStart.y2 - moveStart.y1)) * scale), settings.cropperScaledMaxHeight);\n                cropperPosition.x1 = moveStart.clientX - newWidth / 2;\n                cropperPosition.x2 = moveStart.clientX + newWidth / 2;\n                cropperPosition.y1 = moveStart.clientY - newHeight / 2;\n                cropperPosition.y2 = moveStart.clientY + newHeight / 2;\n                if (cropperPosition.x1 < 0) {\n                    cropperPosition.x2 -= cropperPosition.x1;\n                    cropperPosition.x1 = 0;\n                }\n                else if (cropperPosition.x2 > maxSize.width) {\n                    cropperPosition.x1 -= (cropperPosition.x2 - maxSize.width);\n                    cropperPosition.x2 = maxSize.width;\n                }\n                if (cropperPosition.y1 < 0) {\n                    cropperPosition.y2 -= cropperPosition.y1;\n                    cropperPosition.y1 = 0;\n                }\n                else if (cropperPosition.y2 > maxSize.height) {\n                    cropperPosition.y1 -= (cropperPosition.y2 - maxSize.height);\n                    cropperPosition.y2 = maxSize.height;\n                }\n                break;\n        }\n        if (settings.maintainAspectRatio) {\n            this.checkAspectRatio(moveStart.position, cropperPosition, maxSize, settings);\n        }\n    }\n    checkAspectRatio(position, cropperPosition, maxSize, settings) {\n        let overflowX = 0;\n        let overflowY = 0;\n        switch (position) {\n            case 'top':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : (overflowX / settings.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x1 += (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'topright':\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x1 += (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'center':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                const overflowX1 = Math.max(0 - cropperPosition.x1, 0);\n                const overflowX2 = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                const overflowY1 = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                const overflowY2 = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX1 > 0 || overflowX2 > 0 || overflowY1 > 0 || overflowY2 > 0) {\n                    cropperPosition.x1 += (overflowY1 * settings.aspectRatio) > overflowX1 ? (overflowY1 * settings.aspectRatio) : overflowX1;\n                    cropperPosition.x2 -= (overflowY2 * settings.aspectRatio) > overflowX2 ? (overflowY2 * settings.aspectRatio) : overflowX2;\n                    cropperPosition.y1 += (overflowY2 * settings.aspectRatio) > overflowX2 ? overflowY2 : overflowX2 / settings.aspectRatio;\n                    cropperPosition.y2 -= (overflowY1 * settings.aspectRatio) > overflowX1 ? overflowY1 : overflowX1 / settings.aspectRatio;\n                }\n                break;\n        }\n    }\n    getClientX(event) {\n        var _a;\n        return ((_a = event.touches) === null || _a === void 0 ? void 0 : _a[0].clientX) || event.clientX || 0;\n    }\n    getClientY(event) {\n        var _a;\n        return ((_a = event.touches) === null || _a === void 0 ? void 0 : _a[0].clientY) || event.clientY || 0;\n    }\n}\nCropperPositionService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropperPositionService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nCropperPositionService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropperPositionService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: CropperPositionService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\n// Black 2x1 JPEG, with the following meta information set:\n// - EXIF Orientation: 6 (Rotated 90° CCW)\n// Source: https://github.com/blueimp/JavaScript-Load-Image\nconst testAutoOrientationImageURL = 'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n    'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n    'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n    'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\n    'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\n    'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\nfunction supportsAutomaticRotation() {\n    return new Promise((resolve) => {\n        const img = new Image();\n        img.onload = () => {\n            // Check if browser supports automatic image orientation:\n            const supported = img.width === 1 && img.height === 2;\n            resolve(supported);\n        };\n        img.src = testAutoOrientationImageURL;\n    });\n}\nfunction getTransformationsFromExifData(exifRotationOrBase64Image) {\n    if (typeof exifRotationOrBase64Image === 'string') {\n        exifRotationOrBase64Image = getExifRotation(exifRotationOrBase64Image);\n    }\n    switch (exifRotationOrBase64Image) {\n        case 2:\n            return { rotate: 0, flip: true };\n        case 3:\n            return { rotate: 2, flip: false };\n        case 4:\n            return { rotate: 2, flip: true };\n        case 5:\n            return { rotate: 1, flip: true };\n        case 6:\n            return { rotate: 1, flip: false };\n        case 7:\n            return { rotate: 3, flip: true };\n        case 8:\n            return { rotate: 3, flip: false };\n        default:\n            return { rotate: 0, flip: false };\n    }\n}\nfunction getExifRotation(imageBase64) {\n    const view = new DataView(base64ToArrayBuffer(imageBase64));\n    if (view.getUint16(0, false) !== 0xFFD8) {\n        return -2;\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n        if (view.getUint16(offset + 2, false) <= 8)\n            return -1;\n        const marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker == 0xFFE1) {\n            if (view.getUint32(offset += 2, false) !== 0x45786966) {\n                return -1;\n            }\n            const little = view.getUint16(offset += 6, false) == 0x4949;\n            offset += view.getUint32(offset + 4, little);\n            const tags = view.getUint16(offset, little);\n            offset += 2;\n            for (let i = 0; i < tags; i++) {\n                if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                    return view.getUint16(offset + (i * 12) + 8, little);\n                }\n            }\n        }\n        else if ((marker & 0xFF00) !== 0xFF00) {\n            break;\n        }\n        else {\n            offset += view.getUint16(offset, false);\n        }\n    }\n    return -1;\n}\nfunction base64ToArrayBuffer(imageBase64) {\n    imageBase64 = imageBase64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n    const binaryString = atob(imageBase64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n\nclass LoadImageService {\n    constructor() {\n        this.autoRotateSupported = supportsAutomaticRotation();\n    }\n    loadImageFile(file, cropperSettings) {\n        return new Promise((resolve, reject) => {\n            const fileReader = new FileReader();\n            fileReader.onload = (event) => {\n                this.loadImage(event.target.result, file.type, cropperSettings)\n                    .then(resolve)\n                    .catch(reject);\n            };\n            fileReader.readAsDataURL(file);\n        });\n    }\n    loadImage(imageBase64, imageType, cropperSettings) {\n        if (!this.isValidImageType(imageType)) {\n            return Promise.reject(new Error('Invalid image type'));\n        }\n        return this.loadBase64Image(imageBase64, cropperSettings);\n    }\n    isValidImageType(type) {\n        return /image\\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(type);\n    }\n    loadImageFromURL(url, cropperSettings) {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onerror = () => reject;\n            img.onload = () => {\n                const canvas = document.createElement('canvas');\n                const context = canvas.getContext('2d');\n                canvas.width = img.width;\n                canvas.height = img.height;\n                context === null || context === void 0 ? void 0 : context.drawImage(img, 0, 0);\n                this.loadBase64Image(canvas.toDataURL(), cropperSettings).then(resolve);\n            };\n            img.crossOrigin = 'anonymous';\n            img.src = url;\n        });\n    }\n    loadBase64Image(imageBase64, cropperSettings) {\n        return new Promise((resolve, reject) => {\n            const originalImage = new Image();\n            originalImage.onload = () => resolve({\n                originalImage,\n                originalBase64: imageBase64\n            });\n            originalImage.onerror = reject;\n            originalImage.src = imageBase64;\n        }).then((res) => this.transformImageBase64(res, cropperSettings));\n    }\n    transformImageBase64(res, cropperSettings) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const autoRotate = yield this.autoRotateSupported;\n            const exifTransform = yield getTransformationsFromExifData(autoRotate ? -1 : res.originalBase64);\n            if (!res.originalImage || !res.originalImage.complete) {\n                return Promise.reject(new Error('No image loaded'));\n            }\n            const loadedImage = {\n                original: {\n                    base64: res.originalBase64,\n                    image: res.originalImage,\n                    size: {\n                        width: res.originalImage.naturalWidth,\n                        height: res.originalImage.naturalHeight\n                    }\n                },\n                exifTransform\n            };\n            return this.transformLoadedImage(loadedImage, cropperSettings);\n        });\n    }\n    transformLoadedImage(loadedImage, cropperSettings) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const canvasRotation = cropperSettings.canvasRotation + loadedImage.exifTransform.rotate;\n            const originalSize = {\n                width: loadedImage.original.image.naturalWidth,\n                height: loadedImage.original.image.naturalHeight\n            };\n            if (canvasRotation === 0 && !loadedImage.exifTransform.flip && !cropperSettings.containWithinAspectRatio) {\n                return {\n                    original: {\n                        base64: loadedImage.original.base64,\n                        image: loadedImage.original.image,\n                        size: Object.assign({}, originalSize)\n                    },\n                    transformed: {\n                        base64: loadedImage.original.base64,\n                        image: loadedImage.original.image,\n                        size: Object.assign({}, originalSize)\n                    },\n                    exifTransform: loadedImage.exifTransform\n                };\n            }\n            const transformedSize = this.getTransformedSize(originalSize, loadedImage.exifTransform, cropperSettings);\n            const canvas = document.createElement('canvas');\n            canvas.width = transformedSize.width;\n            canvas.height = transformedSize.height;\n            const ctx = canvas.getContext('2d');\n            ctx === null || ctx === void 0 ? void 0 : ctx.setTransform(loadedImage.exifTransform.flip ? -1 : 1, 0, 0, 1, canvas.width / 2, canvas.height / 2);\n            ctx === null || ctx === void 0 ? void 0 : ctx.rotate(Math.PI * (canvasRotation / 2));\n            ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(loadedImage.original.image, -originalSize.width / 2, -originalSize.height / 2);\n            const transformedBase64 = canvas.toDataURL();\n            const transformedImage = yield this.loadImageFromBase64(transformedBase64);\n            return {\n                original: {\n                    base64: loadedImage.original.base64,\n                    image: loadedImage.original.image,\n                    size: Object.assign({}, originalSize)\n                },\n                transformed: {\n                    base64: transformedBase64,\n                    image: transformedImage,\n                    size: {\n                        width: transformedImage.width,\n                        height: transformedImage.height\n                    }\n                },\n                exifTransform: loadedImage.exifTransform\n            };\n        });\n    }\n    loadImageFromBase64(imageBase64) {\n        return new Promise(((resolve, reject) => {\n            const image = new Image();\n            image.onload = () => resolve(image);\n            image.onerror = reject;\n            image.src = imageBase64;\n        }));\n    }\n    getTransformedSize(originalSize, exifTransform, cropperSettings) {\n        const canvasRotation = cropperSettings.canvasRotation + exifTransform.rotate;\n        if (cropperSettings.containWithinAspectRatio) {\n            if (canvasRotation % 2) {\n                const minWidthToContain = originalSize.width * cropperSettings.aspectRatio;\n                const minHeightToContain = originalSize.height / cropperSettings.aspectRatio;\n                return {\n                    width: Math.max(originalSize.height, minWidthToContain),\n                    height: Math.max(originalSize.width, minHeightToContain)\n                };\n            }\n            else {\n                const minWidthToContain = originalSize.height * cropperSettings.aspectRatio;\n                const minHeightToContain = originalSize.width / cropperSettings.aspectRatio;\n                return {\n                    width: Math.max(originalSize.width, minWidthToContain),\n                    height: Math.max(originalSize.height, minHeightToContain)\n                };\n            }\n        }\n        if (canvasRotation % 2) {\n            return {\n                height: originalSize.width,\n                width: originalSize.height\n            };\n        }\n        return {\n            width: originalSize.width,\n            height: originalSize.height\n        };\n    }\n}\nLoadImageService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: LoadImageService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nLoadImageService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: LoadImageService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: LoadImageService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass ImageCropperComponent {\n    constructor(cropService, cropperPositionService, loadImageService, sanitizer, cd) {\n        this.cropService = cropService;\n        this.cropperPositionService = cropperPositionService;\n        this.loadImageService = loadImageService;\n        this.sanitizer = sanitizer;\n        this.cd = cd;\n        this.Hammer = (window === null || window === void 0 ? void 0 : window['Hammer']) || null;\n        this.settings = new CropperSettings();\n        this.setImageMaxSizeRetries = 0;\n        this.resizedWhileHidden = false;\n        this.marginLeft = '0px';\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.moveTypes = MoveTypes;\n        this.imageVisible = false;\n        this.format = this.settings.format;\n        this.transform = {};\n        this.maintainAspectRatio = this.settings.maintainAspectRatio;\n        this.aspectRatio = this.settings.aspectRatio;\n        this.resetCropOnAspectRatioChange = this.settings.resetCropOnAspectRatioChange;\n        this.resizeToWidth = this.settings.resizeToWidth;\n        this.resizeToHeight = this.settings.resizeToHeight;\n        this.cropperMinWidth = this.settings.cropperMinWidth;\n        this.cropperMinHeight = this.settings.cropperMinHeight;\n        this.cropperMaxHeight = this.settings.cropperMaxHeight;\n        this.cropperMaxWidth = this.settings.cropperMaxWidth;\n        this.cropperStaticWidth = this.settings.cropperStaticWidth;\n        this.cropperStaticHeight = this.settings.cropperStaticHeight;\n        this.canvasRotation = this.settings.canvasRotation;\n        this.initialStepSize = this.settings.initialStepSize;\n        this.roundCropper = this.settings.roundCropper;\n        this.onlyScaleDown = this.settings.onlyScaleDown;\n        this.imageQuality = this.settings.imageQuality;\n        this.autoCrop = this.settings.autoCrop;\n        this.backgroundColor = this.settings.backgroundColor;\n        this.containWithinAspectRatio = this.settings.containWithinAspectRatio;\n        this.hideResizeSquares = this.settings.hideResizeSquares;\n        this.allowMoveImage = false;\n        this.cropper = {\n            x1: -100,\n            y1: -100,\n            x2: 10000,\n            y2: 10000\n        };\n        this.alignImage = this.settings.alignImage;\n        this.disabled = false;\n        this.hidden = false;\n        this.imageCropped = new EventEmitter();\n        this.startCropImage = new EventEmitter();\n        this.imageLoaded = new EventEmitter();\n        this.cropperReady = new EventEmitter();\n        this.loadImageFailed = new EventEmitter();\n        this.transformChange = new EventEmitter();\n        this.reset();\n    }\n    ngOnChanges(changes) {\n        var _a;\n        this.onChangesUpdateSettings(changes);\n        this.onChangesInputImage(changes);\n        if (((_a = this.loadedImage) === null || _a === void 0 ? void 0 : _a.original.image.complete) && (changes['containWithinAspectRatio'] || changes['canvasRotation'])) {\n            this.loadImageService\n                .transformLoadedImage(this.loadedImage, this.settings)\n                .then((res) => this.setLoadedImage(res))\n                .catch((err) => this.loadImageError(err));\n        }\n        if (changes['cropper'] || changes['maintainAspectRatio'] || changes['aspectRatio']) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n            if (this.maintainAspectRatio &&\n                (this.resetCropOnAspectRatioChange || !this.aspectRatioIsCorrect()) &&\n                (changes['maintainAspectRatio'] || changes['aspectRatio'])) {\n                this.resetCropperPosition();\n            }\n            else if (changes['cropper']) {\n                this.checkCropperPosition(false);\n                this.doAutoCrop();\n            }\n            this.cd.markForCheck();\n        }\n        if (changes['transform']) {\n            this.transform = this.transform || {};\n            this.setCssTransform();\n            this.doAutoCrop();\n            this.cd.markForCheck();\n        }\n        if (changes['hidden'] && this.resizedWhileHidden && !this.hidden) {\n            setTimeout(() => {\n                this.onResize();\n                this.resizedWhileHidden = false;\n            });\n        }\n    }\n    onChangesUpdateSettings(changes) {\n        this.settings.setOptionsFromChanges(changes);\n        if (this.settings.cropperStaticHeight && this.settings.cropperStaticWidth) {\n            this.settings.setOptions({\n                hideResizeSquares: true,\n                cropperMinWidth: this.settings.cropperStaticWidth,\n                cropperMinHeight: this.settings.cropperStaticHeight,\n                cropperMaxHeight: this.settings.cropperStaticHeight,\n                cropperMaxWidth: this.settings.cropperStaticWidth,\n                maintainAspectRatio: false\n            });\n        }\n    }\n    onChangesInputImage(changes) {\n        if (changes['imageChangedEvent'] || changes['imageURL'] || changes['imageBase64'] || changes['imageFile']) {\n            this.reset();\n        }\n        if (changes['imageChangedEvent'] && this.isValidImageChangedEvent()) {\n            this.loadImageFile(this.imageChangedEvent.target.files[0]);\n        }\n        if (changes['imageURL'] && this.imageURL) {\n            this.loadImageFromURL(this.imageURL);\n        }\n        if (changes['imageBase64'] && this.imageBase64) {\n            this.loadBase64Image(this.imageBase64);\n        }\n        if (changes['imageFile'] && this.imageFile) {\n            this.loadImageFile(this.imageFile);\n        }\n    }\n    isValidImageChangedEvent() {\n        var _a, _b, _c;\n        return ((_c = (_b = (_a = this.imageChangedEvent) === null || _a === void 0 ? void 0 : _a.target) === null || _b === void 0 ? void 0 : _b.files) === null || _c === void 0 ? void 0 : _c.length) > 0;\n    }\n    setCssTransform() {\n        var _a;\n        const translateUnit = ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.translateUnit) || '%';\n        this.safeTransformStyle = this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH || 0}${translateUnit}, ${this.transform.translateV || 0}${translateUnit})` +\n            ' scaleX(' + (this.transform.scale || 1) * (this.transform.flipH ? -1 : 1) + ')' +\n            ' scaleY(' + (this.transform.scale || 1) * (this.transform.flipV ? -1 : 1) + ')' +\n            ' rotate(' + (this.transform.rotate || 0) + 'deg)');\n    }\n    ngOnInit() {\n        this.settings.stepSize = this.initialStepSize;\n        this.activatePinchGesture();\n    }\n    reset() {\n        this.imageVisible = false;\n        this.loadedImage = undefined;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n    loadImageFile(file) {\n        this.loadImageService\n            .loadImageFile(file, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    loadBase64Image(imageBase64) {\n        this.loadImageService\n            .loadBase64Image(imageBase64, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    loadImageFromURL(url) {\n        this.loadImageService\n            .loadImageFromURL(url, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    setLoadedImage(loadedImage) {\n        this.loadedImage = loadedImage;\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(loadedImage.transformed.base64);\n        this.cd.markForCheck();\n    }\n    loadImageError(error) {\n        console.error(error);\n        this.loadImageFailed.emit();\n    }\n    imageLoadedInView() {\n        if (this.loadedImage != null) {\n            this.imageLoaded.emit(this.loadedImage);\n            this.setImageMaxSizeRetries = 0;\n            setTimeout(() => this.checkImageMaxSizeRecursively());\n        }\n    }\n    checkImageMaxSizeRecursively() {\n        if (this.setImageMaxSizeRetries > 40) {\n            this.loadImageFailed.emit();\n        }\n        else if (this.sourceImageLoaded()) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n            this.resetCropperPosition();\n            this.cropperReady.emit(Object.assign({}, this.maxSize));\n            this.cd.markForCheck();\n        }\n        else {\n            this.setImageMaxSizeRetries++;\n            setTimeout(() => this.checkImageMaxSizeRecursively(), 50);\n        }\n    }\n    sourceImageLoaded() {\n        var _a, _b;\n        return ((_b = (_a = this.sourceImage) === null || _a === void 0 ? void 0 : _a.nativeElement) === null || _b === void 0 ? void 0 : _b.offsetWidth) > 0;\n    }\n    onResize() {\n        if (!this.loadedImage) {\n            return;\n        }\n        if (this.hidden) {\n            this.resizedWhileHidden = true;\n        }\n        else {\n            this.resizeCropperPosition();\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n        }\n    }\n    activatePinchGesture() {\n        if (this.Hammer) {\n            const hammer = new this.Hammer(this.wrapper.nativeElement);\n            hammer.get('pinch').set({ enable: true });\n            hammer.on('pinchmove', this.onPinch.bind(this));\n            hammer.on('pinchend', this.pinchStop.bind(this));\n            hammer.on('pinchstart', this.startPinch.bind(this));\n        }\n        else if (isDevMode()) {\n            console.warn('[NgxImageCropper] Could not find HammerJS - Pinch Gesture won\\'t work');\n        }\n    }\n    resizeCropperPosition() {\n        const sourceImageElement = this.sourceImage.nativeElement;\n        if (this.maxSize.width !== sourceImageElement.offsetWidth || this.maxSize.height !== sourceImageElement.offsetHeight) {\n            this.cropper.x1 = this.cropper.x1 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.x2 = this.cropper.x2 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.y1 = this.cropper.y1 * sourceImageElement.offsetHeight / this.maxSize.height;\n            this.cropper.y2 = this.cropper.y2 * sourceImageElement.offsetHeight / this.maxSize.height;\n        }\n    }\n    resetCropperPosition() {\n        this.cropperPositionService.resetCropperPosition(this.sourceImage, this.cropper, this.settings);\n        this.doAutoCrop();\n        this.imageVisible = true;\n    }\n    keyboardAccess(event) {\n        this.changeKeyboardStepSize(event);\n        this.keyboardMoveCropper(event);\n    }\n    changeKeyboardStepSize(event) {\n        const key = +event.key;\n        if (key >= 1 && key <= 9) {\n            this.settings.stepSize = key;\n        }\n    }\n    keyboardMoveCropper(event) {\n        const keyboardWhiteList = ['ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft'];\n        if (!(keyboardWhiteList.includes(event.key))) {\n            return;\n        }\n        const moveType = event.shiftKey ? MoveTypes.Resize : MoveTypes.Move;\n        const position = event.altKey ? getInvertedPositionForKey(event.key) : getPositionForKey(event.key);\n        const moveEvent = getEventForKey(event.key, this.settings.stepSize);\n        event.preventDefault();\n        event.stopPropagation();\n        this.startMove({ clientX: 0, clientY: 0 }, moveType, position);\n        this.moveImg(moveEvent);\n        this.moveStop();\n    }\n    startMove(event, moveType, position = null) {\n        var _a, _b;\n        if (this.disabled\n            || ((_a = this.moveStart) === null || _a === void 0 ? void 0 : _a.active) && ((_b = this.moveStart) === null || _b === void 0 ? void 0 : _b.type) === MoveTypes.Pinch\n            || moveType === MoveTypes.Drag && !this.allowMoveImage) {\n            return;\n        }\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        this.moveStart = Object.assign({ active: true, type: moveType, position, transform: Object.assign({}, this.transform), clientX: this.cropperPositionService.getClientX(event), clientY: this.cropperPositionService.getClientY(event) }, this.cropper);\n    }\n    startPinch(event) {\n        if (!this.safeImgDataUrl) {\n            return;\n        }\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        this.moveStart = Object.assign({ active: true, type: MoveTypes.Pinch, position: 'center', clientX: this.cropper.x1 + (this.cropper.x2 - this.cropper.x1) / 2, clientY: this.cropper.y1 + (this.cropper.y2 - this.cropper.y1) / 2 }, this.cropper);\n    }\n    moveImg(event) {\n        var _a, _b;\n        if (this.moveStart.active) {\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            if (this.moveStart.type === MoveTypes.Move) {\n                this.cropperPositionService.move(event, this.moveStart, this.cropper);\n                this.checkCropperPosition(true);\n            }\n            else if (this.moveStart.type === MoveTypes.Resize) {\n                if (!this.cropperStaticWidth && !this.cropperStaticHeight) {\n                    this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\n                }\n                this.checkCropperPosition(false);\n            }\n            else if (this.moveStart.type === MoveTypes.Drag) {\n                const diffX = this.cropperPositionService.getClientX(event) - this.moveStart.clientX;\n                const diffY = this.cropperPositionService.getClientY(event) - this.moveStart.clientY;\n                this.transform = Object.assign(Object.assign({}, this.transform), { translateH: (((_a = this.moveStart.transform) === null || _a === void 0 ? void 0 : _a.translateH) || 0) + diffX, translateV: (((_b = this.moveStart.transform) === null || _b === void 0 ? void 0 : _b.translateV) || 0) + diffY });\n                this.setCssTransform();\n            }\n            this.cd.detectChanges();\n        }\n    }\n    onPinch(event) {\n        if (this.moveStart.active) {\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            if (this.moveStart.type === MoveTypes.Pinch) {\n                this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\n                this.checkCropperPosition(false);\n            }\n            this.cd.detectChanges();\n        }\n    }\n    setMaxSize() {\n        if (this.sourceImage) {\n            const sourceImageElement = this.sourceImage.nativeElement;\n            this.maxSize.width = sourceImageElement.offsetWidth;\n            this.maxSize.height = sourceImageElement.offsetHeight;\n            this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n        }\n    }\n    setCropperScaledMinSize() {\n        var _a, _b;\n        if ((_b = (_a = this.loadedImage) === null || _a === void 0 ? void 0 : _a.transformed) === null || _b === void 0 ? void 0 : _b.image) {\n            this.setCropperScaledMinWidth();\n            this.setCropperScaledMinHeight();\n        }\n        else {\n            this.settings.cropperScaledMinWidth = 20;\n            this.settings.cropperScaledMinHeight = 20;\n        }\n    }\n    setCropperScaledMinWidth() {\n        this.settings.cropperScaledMinWidth = this.cropperMinWidth > 0\n            ? Math.max(20, this.cropperMinWidth / this.loadedImage.transformed.image.width * this.maxSize.width)\n            : 20;\n    }\n    setCropperScaledMinHeight() {\n        if (this.maintainAspectRatio) {\n            this.settings.cropperScaledMinHeight = Math.max(20, this.settings.cropperScaledMinWidth / this.aspectRatio);\n        }\n        else if (this.cropperMinHeight > 0) {\n            this.settings.cropperScaledMinHeight = Math.max(20, this.cropperMinHeight / this.loadedImage.transformed.image.height * this.maxSize.height);\n        }\n        else {\n            this.settings.cropperScaledMinHeight = 20;\n        }\n    }\n    setCropperScaledMaxSize() {\n        var _a, _b;\n        if ((_b = (_a = this.loadedImage) === null || _a === void 0 ? void 0 : _a.transformed) === null || _b === void 0 ? void 0 : _b.image) {\n            const ratio = this.loadedImage.transformed.size.width / this.maxSize.width;\n            this.settings.cropperScaledMaxWidth = this.cropperMaxWidth > 20 ? this.cropperMaxWidth / ratio : this.maxSize.width;\n            this.settings.cropperScaledMaxHeight = this.cropperMaxHeight > 20 ? this.cropperMaxHeight / ratio : this.maxSize.height;\n            if (this.maintainAspectRatio) {\n                if (this.settings.cropperScaledMaxWidth > this.settings.cropperScaledMaxHeight * this.aspectRatio) {\n                    this.settings.cropperScaledMaxWidth = this.settings.cropperScaledMaxHeight * this.aspectRatio;\n                }\n                else if (this.settings.cropperScaledMaxWidth < this.settings.cropperScaledMaxHeight * this.aspectRatio) {\n                    this.settings.cropperScaledMaxHeight = this.settings.cropperScaledMaxWidth / this.aspectRatio;\n                }\n            }\n        }\n        else {\n            this.settings.cropperScaledMaxWidth = this.maxSize.width;\n            this.settings.cropperScaledMaxHeight = this.maxSize.height;\n        }\n    }\n    checkCropperPosition(maintainSize = false) {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n    moveStop() {\n        var _a;\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            if (((_a = this.moveStart) === null || _a === void 0 ? void 0 : _a.type) === MoveTypes.Drag) {\n                this.transformChange.emit(this.transform);\n            }\n            else {\n                this.doAutoCrop();\n            }\n        }\n    }\n    pinchStop() {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.doAutoCrop();\n        }\n    }\n    doAutoCrop() {\n        if (this.autoCrop) {\n            this.crop();\n        }\n    }\n    crop() {\n        var _a, _b;\n        if (((_b = (_a = this.loadedImage) === null || _a === void 0 ? void 0 : _a.transformed) === null || _b === void 0 ? void 0 : _b.image) != null) {\n            this.startCropImage.emit();\n            const output = this.cropService.crop(this.sourceImage, this.loadedImage, this.cropper, this.settings);\n            if (output != null) {\n                this.imageCropped.emit(output);\n            }\n            return output;\n        }\n        return null;\n    }\n    aspectRatioIsCorrect() {\n        const currentCropAspectRatio = (this.cropper.x2 - this.cropper.x1) / (this.cropper.y2 - this.cropper.y1);\n        return currentCropAspectRatio === this.aspectRatio;\n    }\n}\nImageCropperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperComponent, deps: [{ token: CropService }, { token: CropperPositionService }, { token: LoadImageService }, { token: i4.DomSanitizer }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\nImageCropperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.11\", type: ImageCropperComponent, selector: \"image-cropper\", inputs: { imageChangedEvent: \"imageChangedEvent\", imageURL: \"imageURL\", imageBase64: \"imageBase64\", imageFile: \"imageFile\", imageAltText: \"imageAltText\", format: \"format\", transform: \"transform\", maintainAspectRatio: \"maintainAspectRatio\", aspectRatio: \"aspectRatio\", resetCropOnAspectRatioChange: \"resetCropOnAspectRatioChange\", resizeToWidth: \"resizeToWidth\", resizeToHeight: \"resizeToHeight\", cropperMinWidth: \"cropperMinWidth\", cropperMinHeight: \"cropperMinHeight\", cropperMaxHeight: \"cropperMaxHeight\", cropperMaxWidth: \"cropperMaxWidth\", cropperStaticWidth: \"cropperStaticWidth\", cropperStaticHeight: \"cropperStaticHeight\", canvasRotation: \"canvasRotation\", initialStepSize: \"initialStepSize\", roundCropper: \"roundCropper\", onlyScaleDown: \"onlyScaleDown\", imageQuality: \"imageQuality\", autoCrop: \"autoCrop\", backgroundColor: \"backgroundColor\", containWithinAspectRatio: \"containWithinAspectRatio\", hideResizeSquares: \"hideResizeSquares\", allowMoveImage: \"allowMoveImage\", cropper: \"cropper\", alignImage: \"alignImage\", disabled: \"disabled\", hidden: \"hidden\" }, outputs: { imageCropped: \"imageCropped\", startCropImage: \"startCropImage\", imageLoaded: \"imageLoaded\", cropperReady: \"cropperReady\", loadImageFailed: \"loadImageFailed\", transformChange: \"transformChange\" }, host: { listeners: { \"window:resize\": \"onResize()\", \"document:mousemove\": \"moveImg($event)\", \"document:touchmove\": \"moveImg($event)\", \"document:mouseup\": \"moveStop()\", \"document:touchend\": \"moveStop()\" }, properties: { \"style.text-align\": \"this.alignImage\", \"class.disabled\": \"this.disabled\", \"class.ngx-ix-hidden\": \"this.hidden\" } }, viewQueries: [{ propertyName: \"wrapper\", first: true, predicate: [\"wrapper\"], descendants: true, static: true }, { propertyName: \"sourceImage\", first: true, predicate: [\"sourceImage\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  [style.background]=\\\"imageVisible && backgroundColor\\\"\\n  #wrapper\\n>\\n  <img\\n    #sourceImage\\n    class=\\\"ngx-ic-source-image\\\"\\n    *ngIf=\\\"safeImgDataUrl\\\"\\n    [src]=\\\"safeImgDataUrl\\\"\\n    [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n    [style.transform]=\\\"safeTransformStyle\\\"\\n    [class.ngx-ic-draggable]=\\\"!disabled && allowMoveImage\\\"\\n    [attr.alt]=\\\"imageAltText\\\"\\n    (load)=\\\"imageLoadedInView()\\\"\\n    (mousedown)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (touchstart)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (error)=\\\"loadImageError($event)\\\"\\n  >\\n  <div\\n    class=\\\"ngx-ic-overlay\\\"\\n    [style.width.px]=\\\"maxSize.width\\\"\\n    [style.height.px]=\\\"maxSize.height\\\"\\n    [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n  ></div>\\n  <div class=\\\"ngx-ic-cropper\\\"\\n       *ngIf=\\\"imageVisible\\\"\\n       [class.ngx-ic-round]=\\\"roundCropper\\\"\\n       [style.top.px]=\\\"cropper.y1\\\"\\n       [style.left.px]=\\\"cropper.x1\\\"\\n       [style.width.px]=\\\"cropper.x2 - cropper.x1\\\"\\n       [style.height.px]=\\\"cropper.y2 - cropper.y1\\\"\\n       [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n       [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n       (keydown)=\\\"keyboardAccess($event)\\\"\\n       tabindex=\\\"0\\\"\\n  >\\n    <div\\n      (mousedown)=\\\"startMove($event, moveTypes.Move)\\\"\\n      (touchstart)=\\\"startMove($event, moveTypes.Move)\\\"\\n      class=\\\"ngx-ic-move\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!hideResizeSquares\\\">\\n            <span class=\\\"ngx-ic-resize ngx-ic-topleft\\\"\\n                  (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\"\\n                  (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-top\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-topright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-right\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottom\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomleft\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-left\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-top\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'top')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'top')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-right\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'right')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'right')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-bottom\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-left\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'left')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'left')\\\">\\n            </span>\\n    </ng-container>\\n  </div>\\n</div>\\n\", styles: [\":host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}:host>div{width:100%;position:relative}:host>div img.ngx-ic-source-image{max-width:100%;max-height:100%;transform-origin:center}:host>div img.ngx-ic-source-image.ngx-ic-draggable{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}:host .ngx-ic-overlay{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}:host .ngx-ic-cropper{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){:host .ngx-ic-cropper{outline-width:100vh}}:host .ngx-ic-cropper:after{position:absolute;content:\\\"\\\";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}:host .ngx-ic-cropper .ngx-ic-move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .ngx-ic-cropper:focus .ngx-ic-move{border-color:#1e90ff;border-width:2px}:host .ngx-ic-cropper .ngx-ic-resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize .ngx-ic-square{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topright{top:-12px;right:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar{position:absolute;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper.ngx-ic-round{outline-color:transparent}:host .ngx-ic-cropper.ngx-ic-round:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){:host .ngx-ic-cropper.ngx-ic-round:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}:host .ngx-ic-cropper.ngx-ic-round .ngx-ic-move{border-radius:100%}:host.disabled .ngx-ic-cropper .ngx-ic-resize,:host.disabled .ngx-ic-cropper .ngx-ic-resize-bar,:host.disabled .ngx-ic-cropper .ngx-ic-move{display:none}:host.ngx-ix-hidden{display:none}\\n\"], directives: [{ type: i5.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'image-cropper', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div\\n  [style.background]=\\\"imageVisible && backgroundColor\\\"\\n  #wrapper\\n>\\n  <img\\n    #sourceImage\\n    class=\\\"ngx-ic-source-image\\\"\\n    *ngIf=\\\"safeImgDataUrl\\\"\\n    [src]=\\\"safeImgDataUrl\\\"\\n    [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n    [style.transform]=\\\"safeTransformStyle\\\"\\n    [class.ngx-ic-draggable]=\\\"!disabled && allowMoveImage\\\"\\n    [attr.alt]=\\\"imageAltText\\\"\\n    (load)=\\\"imageLoadedInView()\\\"\\n    (mousedown)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (touchstart)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (error)=\\\"loadImageError($event)\\\"\\n  >\\n  <div\\n    class=\\\"ngx-ic-overlay\\\"\\n    [style.width.px]=\\\"maxSize.width\\\"\\n    [style.height.px]=\\\"maxSize.height\\\"\\n    [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n  ></div>\\n  <div class=\\\"ngx-ic-cropper\\\"\\n       *ngIf=\\\"imageVisible\\\"\\n       [class.ngx-ic-round]=\\\"roundCropper\\\"\\n       [style.top.px]=\\\"cropper.y1\\\"\\n       [style.left.px]=\\\"cropper.x1\\\"\\n       [style.width.px]=\\\"cropper.x2 - cropper.x1\\\"\\n       [style.height.px]=\\\"cropper.y2 - cropper.y1\\\"\\n       [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n       [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n       (keydown)=\\\"keyboardAccess($event)\\\"\\n       tabindex=\\\"0\\\"\\n  >\\n    <div\\n      (mousedown)=\\\"startMove($event, moveTypes.Move)\\\"\\n      (touchstart)=\\\"startMove($event, moveTypes.Move)\\\"\\n      class=\\\"ngx-ic-move\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!hideResizeSquares\\\">\\n            <span class=\\\"ngx-ic-resize ngx-ic-topleft\\\"\\n                  (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\"\\n                  (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-top\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-topright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-right\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottom\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomleft\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-left\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-top\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'top')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'top')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-right\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'right')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'right')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-bottom\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-left\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'left')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'left')\\\">\\n            </span>\\n    </ng-container>\\n  </div>\\n</div>\\n\", styles: [\":host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}:host>div{width:100%;position:relative}:host>div img.ngx-ic-source-image{max-width:100%;max-height:100%;transform-origin:center}:host>div img.ngx-ic-source-image.ngx-ic-draggable{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}:host .ngx-ic-overlay{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}:host .ngx-ic-cropper{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){:host .ngx-ic-cropper{outline-width:100vh}}:host .ngx-ic-cropper:after{position:absolute;content:\\\"\\\";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}:host .ngx-ic-cropper .ngx-ic-move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .ngx-ic-cropper:focus .ngx-ic-move{border-color:#1e90ff;border-width:2px}:host .ngx-ic-cropper .ngx-ic-resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize .ngx-ic-square{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topright{top:-12px;right:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar{position:absolute;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper.ngx-ic-round{outline-color:transparent}:host .ngx-ic-cropper.ngx-ic-round:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){:host .ngx-ic-cropper.ngx-ic-round:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}:host .ngx-ic-cropper.ngx-ic-round .ngx-ic-move{border-radius:100%}:host.disabled .ngx-ic-cropper .ngx-ic-resize,:host.disabled .ngx-ic-cropper .ngx-ic-resize-bar,:host.disabled .ngx-ic-cropper .ngx-ic-move{display:none}:host.ngx-ix-hidden{display:none}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: CropService }, { type: CropperPositionService }, { type: LoadImageService }, { type: i4.DomSanitizer }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { wrapper: [{\n                type: ViewChild,\n                args: ['wrapper', { static: true }]\n            }], sourceImage: [{\n                type: ViewChild,\n                args: ['sourceImage', { static: false }]\n            }], imageChangedEvent: [{\n                type: Input\n            }], imageURL: [{\n                type: Input\n            }], imageBase64: [{\n                type: Input\n            }], imageFile: [{\n                type: Input\n            }], imageAltText: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], transform: [{\n                type: Input\n            }], maintainAspectRatio: [{\n                type: Input\n            }], aspectRatio: [{\n                type: Input\n            }], resetCropOnAspectRatioChange: [{\n                type: Input\n            }], resizeToWidth: [{\n                type: Input\n            }], resizeToHeight: [{\n                type: Input\n            }], cropperMinWidth: [{\n                type: Input\n            }], cropperMinHeight: [{\n                type: Input\n            }], cropperMaxHeight: [{\n                type: Input\n            }], cropperMaxWidth: [{\n                type: Input\n            }], cropperStaticWidth: [{\n                type: Input\n            }], cropperStaticHeight: [{\n                type: Input\n            }], canvasRotation: [{\n                type: Input\n            }], initialStepSize: [{\n                type: Input\n            }], roundCropper: [{\n                type: Input\n            }], onlyScaleDown: [{\n                type: Input\n            }], imageQuality: [{\n                type: Input\n            }], autoCrop: [{\n                type: Input\n            }], backgroundColor: [{\n                type: Input\n            }], containWithinAspectRatio: [{\n                type: Input\n            }], hideResizeSquares: [{\n                type: Input\n            }], allowMoveImage: [{\n                type: Input\n            }], cropper: [{\n                type: Input\n            }], alignImage: [{\n                type: HostBinding,\n                args: ['style.text-align']\n            }, {\n                type: Input\n            }], disabled: [{\n                type: HostBinding,\n                args: ['class.disabled']\n            }, {\n                type: Input\n            }], hidden: [{\n                type: HostBinding,\n                args: ['class.ngx-ix-hidden']\n            }, {\n                type: Input\n            }], imageCropped: [{\n                type: Output\n            }], startCropImage: [{\n                type: Output\n            }], imageLoaded: [{\n                type: Output\n            }], cropperReady: [{\n                type: Output\n            }], loadImageFailed: [{\n                type: Output\n            }], transformChange: [{\n                type: Output\n            }], onResize: [{\n                type: HostListener,\n                args: ['window:resize']\n            }], moveImg: [{\n                type: HostListener,\n                args: ['document:mousemove', ['$event']]\n            }, {\n                type: HostListener,\n                args: ['document:touchmove', ['$event']]\n            }], moveStop: [{\n                type: HostListener,\n                args: ['document:mouseup']\n            }, {\n                type: HostListener,\n                args: ['document:touchend']\n            }] } });\n\nclass ImageCropperModule {\n}\nImageCropperModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nImageCropperModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, declarations: [ImageCropperComponent], imports: [CommonModule], exports: [ImageCropperComponent] });\nImageCropperModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, imports: [[\n            CommonModule\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.11\", ngImport: i0, type: ImageCropperModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule\n                    ],\n                    declarations: [\n                        ImageCropperComponent,\n                    ],\n                    exports: [\n                        ImageCropperComponent\n                    ]\n                }]\n        }] });\n\nfunction base64ToFile(base64Image) {\n    const split = base64Image.split(',');\n    const type = split[0].replace('data:', '').replace(';base64', '');\n    const byteString = atob(split[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type });\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CropService, CropperSettings, ImageCropperComponent, ImageCropperModule, LoadImageService, base64ToFile, resizeCanvas };\n"],"names":["i0","Injectable","__awaiter","DOC_ORIENTATION","_a","ImageCompress","getOrientation","file","Promise","resolve","reject","reader","FileReader","onload","view","DataView","result","byteLength","NotDefined","getUint16","length","offset","marker","getUint32","NotJpeg","little","tags","i","readAsArrayBuffer","e","Default","uploadFile","render","multiple","rejectOnCancel","isSafari","test","navigator","userAgent","isIOS","then","onlyNative","generateUploadInputNative","window","document","generateUploadInputRenderer","filesList","files","Array","from","orientationPromises","map","readerPromises","fileToDataURL","orientationsResult","all","orientations","readerResult","resultArray","parsedFile","index","image","dataUrl","orientation","fileName","catch","err","target","name","readAsDataURL","lock","inputElement","createElement","setStyle","setProperty","listen","$event","value","addEventListener","setTimeout","Error","once","click","documentNativeApi","id","Date","style","display","setAttribute","body","appendChild","removeChild","getElementById","compress","imageDataUrlSource","ratio","quality","maxwidth","maxheight","sourceImage","Image","canvas","ctx","getContext","w","naturalWidth","h","naturalHeight","CSS","supports","Right","Left","t","xratio","yratio","Math","min","width","height","TO_RADIANS","PI","Up","drawImage","save","rotate","translate","restore","Down","mime","substr","split","toDataURL","onerror","src","byteCount","imgString","encodeURI","getImageMaxSize","maxSizeMb","debugMode","MAX_TRIES","bytesToMB","bytes","toFixed","console","debug","myFile","compressedFile","previousSize","newSize","Object","assign","NgxImageCompressService","constructor","rendererFactory","createRenderer","uploadMultipleFiles","uploadFileOrReject","uploadMultipleFilesOrReject","compressFile","maxWidth","maxHeight","uploadAndGetImageWithMaxSize","uploadResponse","uploadAndGetImageWithMaxSizeAndMetas","ɵfac","NgxImageCompressService_Factory","ɵɵinject","RendererFactory2","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","ngDevMode","ɵsetClassMetadata","type","args","EventEmitter","isDevMode","Component","ChangeDetectionStrategy","ViewChild","Input","HostBinding","Output","HostListener","NgModule","i4","i5","CommonModule","_c0","_c1","ImageCropperComponent_img_2_Template","rf","_r5","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ImageCropperComponent_img_2_Template_img_load_0_listener","ɵɵrestoreView","ctx_r4","ɵɵnextContext","ɵɵresetView","imageLoadedInView","ImageCropperComponent_img_2_Template_img_mousedown_0_listener","ctx_r6","startMove","moveTypes","Drag","ImageCropperComponent_img_2_Template_img_touchstart_0_listener","ctx_r7","ImageCropperComponent_img_2_Template_img_error_0_listener","ctx_r8","loadImageError","ɵɵelementEnd","ctx_r1","ɵɵstyleProp","imageVisible","safeTransformStyle","ɵɵclassProp","disabled","allowMoveImage","ɵɵproperty","safeImgDataUrl","ɵɵsanitizeUrl","ɵɵattribute","imageAltText","ImageCropperComponent_div_4_ng_container_2_Template","_r11","ɵɵelementContainerStart","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_1_listener","ctx_r10","Resize","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_1_listener","ctx_r12","ɵɵelement","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_5_listener","ctx_r13","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_5_listener","ctx_r14","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_9_listener","ctx_r15","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_9_listener","ctx_r16","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_13_listener","ctx_r17","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_13_listener","ctx_r18","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_17_listener","ctx_r19","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_17_listener","ctx_r20","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_18_listener","ctx_r21","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_18_listener","ctx_r22","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_19_listener","ctx_r23","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_19_listener","ctx_r24","ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_20_listener","ctx_r25","ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_20_listener","ctx_r26","ɵɵelementContainerEnd","ImageCropperComponent_div_4_Template","_r28","ImageCropperComponent_div_4_Template_div_keydown_0_listener","ctx_r27","keyboardAccess","ImageCropperComponent_div_4_Template_div_mousedown_1_listener","ctx_r29","Move","ImageCropperComponent_div_4_Template_div_touchstart_1_listener","ctx_r30","ɵɵtemplate","ctx_r2","cropper","y1","x1","x2","y2","alignImage","marginLeft","roundCropper","ɵɵadvance","hideResizeSquares","CropperSettings","format","maintainAspectRatio","transform","aspectRatio","resetCropOnAspectRatioChange","resizeToWidth","resizeToHeight","cropperMinWidth","cropperMinHeight","cropperMaxHeight","cropperMaxWidth","cropperStaticWidth","cropperStaticHeight","canvasRotation","initialStepSize","onlyScaleDown","imageQuality","autoCrop","backgroundColor","containWithinAspectRatio","cropperScaledMinWidth","cropperScaledMinHeight","cropperScaledMaxWidth","cropperScaledMaxHeight","stepSize","setOptions","options","keys","filter","k","forEach","validateOptions","setOptionsFromChanges","changes","currentValue","MoveTypes","getPositionForKey","key","getInvertedPositionForKey","getEventForKey","clientX","clientY","resizeCanvas","width_source","height_source","round","ratio_w","ratio_h","ratio_w_half","ceil","ratio_h_half","img","getImageData","img2","createImageData","data","data2","j","center_y","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","xx_start","floor","yy_start","xx_stop","yy_stop","yy","dy","abs","center_x","w0","xx","dx","sqrt","pos_x","putImageData","percentage","percent","totalValue","CropService","crop","loadedImage","settings","imagePosition","getImagePosition","cropCanvas","fillStyle","fillRect","scaleX","scale","flipH","scaleY","flipV","translateH","translateV","getCanvasTranslate","transformedImage","transformed","setTransform","size","output","cropperPosition","offsetImagePosition","getOffsetImagePosition","resizeRatio","getResizeRatio","base64","getQuality","translateUnit","getRatio","sourceImageElement","nativeElement","offsetWidth","out","max","exifTransform","offsetX","offsetY","original","ratioWidth","ratioHeight","ratios","push","CropService_Factory","CropperPositionService","resetCropperPosition","offsetHeight","cropperWidth","cropperHeight","cropperHeightWithAspectRatio","cropperWidthWithAspectRatio","move","event","moveStart","diffX","getClientX","diffY","getClientY","resize","maxSize","moveX","moveY","position","newWidth","newHeight","checkAspectRatio","overflowX","overflowY","overflowX1","overflowX2","overflowY1","overflowY2","touches","CropperPositionService_Factory","testAutoOrientationImageURL","supportsAutomaticRotation","supported","getTransformationsFromExifData","exifRotationOrBase64Image","getExifRotation","flip","imageBase64","base64ToArrayBuffer","replace","binaryString","atob","len","Uint8Array","charCodeAt","buffer","LoadImageService","autoRotateSupported","loadImageFile","cropperSettings","fileReader","loadImage","imageType","isValidImageType","loadBase64Image","loadImageFromURL","url","context","crossOrigin","originalImage","originalBase64","res","transformImageBase64","autoRotate","complete","transformLoadedImage","originalSize","transformedSize","getTransformedSize","transformedBase64","loadImageFromBase64","minWidthToContain","minHeightToContain","LoadImageService_Factory","ImageCropperComponent","cropService","cropperPositionService","loadImageService","sanitizer","cd","Hammer","setImageMaxSizeRetries","resizedWhileHidden","hidden","imageCropped","startCropImage","imageLoaded","cropperReady","loadImageFailed","transformChange","reset","ngOnChanges","onChangesUpdateSettings","onChangesInputImage","setLoadedImage","setMaxSize","setCropperScaledMinSize","setCropperScaledMaxSize","aspectRatioIsCorrect","checkCropperPosition","doAutoCrop","markForCheck","setCssTransform","onResize","isValidImageChangedEvent","imageChangedEvent","imageURL","imageFile","_b","_c","bypassSecurityTrustStyle","ngOnInit","activatePinchGesture","undefined","active","bypassSecurityTrustResourceUrl","error","emit","checkImageMaxSizeRecursively","sourceImageLoaded","resizeCropperPosition","hammer","wrapper","get","set","enable","on","onPinch","bind","pinchStop","startPinch","warn","changeKeyboardStepSize","keyboardMoveCropper","keyboardWhiteList","includes","moveType","shiftKey","altKey","moveEvent","preventDefault","stopPropagation","moveImg","moveStop","Pinch","detectChanges","setCropperScaledMinWidth","setCropperScaledMinHeight","maintainSize","currentCropAspectRatio","ImageCropperComponent_Factory","ɵɵdirectiveInject","DomSanitizer","ChangeDetectorRef","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","ImageCropperComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","hostVars","hostBindings","ImageCropperComponent_HostBindings","ImageCropperComponent_resize_HostBindingHandler","ɵɵresolveWindow","ImageCropperComponent_mousemove_HostBindingHandler","ɵɵresolveDocument","ImageCropperComponent_touchmove_HostBindingHandler","ImageCropperComponent_mouseup_HostBindingHandler","ImageCropperComponent_touchend_HostBindingHandler","inputs","outputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","ImageCropperComponent_Template","dependencies","NgIf","styles","changeDetection","selector","OnPush","static","ImageCropperModule","ImageCropperModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","declarations","exports","base64ToFile","base64Image","byteString","ab","ArrayBuffer","ia","Blob"],"sourceRoot":"webpack:///","x_google_ignoreList":[6,7]}
"use strict";(self.webpackChunkCityInfo=self.webpackChunkCityInfo||[]).push([[543],{1543:(H,p,i)=>{i.r(p),i.d(p,{UsersModule:()=>F});var r=i(6895),g=i(4968),e=i(8274),f=i(674);let _=(()=>{class n{constructor(){this.path="/grids/user",this.file="paid-ads.json"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-paid-ads"]],decls:1,vars:2,consts:[[3,"path","file"]],template:function(t,s){1&t&&e._UZ(0,"app-dynamic-grid",0),2&t&&e.Q6J("path",s.path)("file",s.file)},directives:[f.d],styles:[""]}),n})();var x=i(7628);class C{}class u{}var m=i(1646),v=i(7996),A=i(5453),M=i(9052),U=i(5013),T=i(3242),h=i(4841),l=i(4779),c=i(4006);const y=["dialog"];function Z(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"app-ad-card",9),e.NdJ("clickEmitter",function(o){return e.CHM(t),e.oxw().clickEmitter(o)}),e.qZA()()}if(2&n){const t=d.$implicit;e.xp6(1),e.Q6J("data",t)("edit",!0)}}function w(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).editAd()}),e._uU(2,"Edit Ad"),e.qZA()()}}const b=function(){return{upload:"Upload cover image and save ads"}};function J(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",10)(2,"label",11),e._uU(3,"Name of company"),e.qZA(),e.TgZ(4,"ejs-textbox",12),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().data.name=o}),e.qZA()(),e.TgZ(5,"div",10)(6,"label",11),e._uU(7,"Address"),e.qZA(),e.TgZ(8,"ejs-textbox",13),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().data.address=o}),e.qZA()(),e.TgZ(9,"div",14)(10,"div",15)(11,"label",11),e._uU(12,"Phone"),e.qZA(),e.TgZ(13,"ejs-textbox",16),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().data.phone=o}),e.qZA()(),e.TgZ(14,"div",15)(15,"label",11),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"ejs-textbox",17),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().data.email=o}),e.qZA()()(),e.TgZ(18,"div",10)(19,"label",11),e._uU(20,"Description"),e.qZA(),e.TgZ(21,"ejs-textbox",18),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().data.description=o}),e.qZA()(),e.TgZ(22,"div",10)(23,"label",11),e._uU(24,"Upload Cover image"),e.qZA(),e.TgZ(25,"ejs-uploader",19,20),e.NdJ("uploading",function(o){return e.CHM(t),e.oxw().onUploadBegin(o)})("change",function(o){return e.CHM(t),e.oxw().changesFile(o)})("removing",function(o){return e.CHM(t),e.oxw().clearingFile(o)})("clearing",function(o){return e.CHM(t),e.oxw().clearingFile(o)}),e.qZA()(),e.YNc(27,w,3,0,"div",21),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("id",t.data.name)("ngModel",t.data.name),e.xp6(4),e.Q6J("id",t.data.address)("ngModel",t.data.address),e.xp6(5),e.Q6J("id",t.data.phone)("ngModel",t.data.phone),e.xp6(4),e.Q6J("id",t.data.email)("ngModel",t.data.email),e.xp6(4),e.Q6J("id",t.data.description)("ngModel",t.data.description),e.xp6(4),e.Q6J("asyncSettings",t.asyncSettings)("autoUpload",!1)("buttons",e.DdM(14,b)),e.xp6(2),e.Q6J("ngIf",t.editButton)}}const j=[{path:"",redirectTo:"my-ads",pathMatch:"full"},{path:"my-ads",component:(()=>{class n{constructor(t,s,o,a){this.configurationService=t,this.helpService=s,this.toastr=o,this.service=a,this.data=new u,this.config=new C,this.path="upload-config",this.file="upload-cover-image.json",this.listOfAds=[],this.editButton=!1,this.dialogPosition={X:"center",Y:"center"}}ngOnInit(){this.intializeData(),this.initializeConfig()}onBeforeOpen(t){t.maxHeight=null}executeAction(){}intializeData(){this.service.callGetMethod("api/getMyAds","").subscribe(t=>{this.listOfAds=t})}initializeConfig(){this.configurationService.getConfiguration(this.path,this.file).subscribe(t=>{this.config=t,this.initializeSettings()})}initializeSettings(){this.asyncSettings={saveUrl:this.config.saveUrl,removeUrl:this.config.removeUrl}}onUploadBegin(t){this.data.id_user=this.helpService.getUserId(),this.editButton=!1;let s=(0,x.QI)(t.fileData.name.substring(0,t.fileData.name.lastIndexOf(".")));t.customFormData=[{fileName:s},{additionalData:this.data?JSON.stringify(this.data):""}],console.log(t),setTimeout(()=>{200==t.currentRequest?.status?(this.toastr.showSuccessCustom("You successfuly created new ads draft!"),window.location.reload()):this.toastr.showErrorCustom("Not successfuly created new ads draft!")},500)}changesFile(t){this.editButton=!1}clearingFile(t){this.editButton=!0}createNewAdDraft(){this.dialog.show(),this.data=new u,this.editButton=!1}clickEmitter(t){console.log(t),this.data=t.data,t.operation===m.H.edit?(this.editButton=!0,this.dialog.show()):t.operation===m.H.delete&&this.service.callPostMethod("api/deleteMyAds",this.data).subscribe(s=>{s?(this.dialog.hide(),this.toastr.showSuccessCustom("You successfuly delete ads draft!")):(this.dialog.hide(),this.toastr.showErrorCustom("Not successfuly delete ads draft!"))})}editAd(){this.service.callPostMethod("api/updateMyAds",this.data).subscribe(t=>{t?(this.dialog.hide(),this.toastr.showSuccessCustom("You successfuly update ads draft!")):(this.dialog.hide(),this.toastr.showErrorCustom("Not successfuly update ads draft!"))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.e),e.Y36(A.s),e.Y36(M.l),e.Y36(U.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-ads"]],viewQuery:function(t,s){if(1&t&&e.Gf(y,5),2&t){let o;e.iGM(o=e.CRH())&&(s.dialog=o.first)}},decls:10,vars:4,consts:[[1,"container","mt-4"],[1,"text-right","mb-4"],[1,"btn","solid","login",2,"font-size","15px",3,"click"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],["id","dialog","showCloseIcon","true","showOnInit","true","width","300px",3,"visible","isModal","position","beforeOpen"],["dialog",""],["content",""],[1,"col-md-4"],[3,"data","edit","clickEmitter"],[1,"col-md-12"],[1,"custom-label"],["cssClass","e-outline","name","name",3,"id","ngModel","ngModelChange"],["cssClass","e-outline","name","address",3,"id","ngModel","ngModelChange"],[1,"col-md-12","row","m-0","p-0"],[1,"col-md-6"],["cssClass","e-outline","name","phone",3,"id","ngModel","ngModelChange"],["cssClass","e-outline","name","email",3,"id","ngModel","ngModelChange"],["multiline","true","cssClass","e-outline","name","description",3,"id","ngModel","ngModelChange"],[3,"asyncSettings","autoUpload","buttons","uploading","change","removing","clearing"],["defaultupload",""],["class","col-md-12 text-right mt-4",4,"ngIf"],[1,"col-md-12","text-right","mt-4"],[1,"btn",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return s.createNewAdDraft()}),e._uU(3,"Create Ad draft"),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,Z,2,2,"div",4),e.qZA(),e.TgZ(6,"ejs-dialog",5,6),e.NdJ("beforeOpen",function(a){return s.onBeforeOpen(a)}),e.YNc(8,J,28,15,"ng-template",null,7,e.W1O),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",s.listOfAds),e.xp6(1),e.Q6J("visible",!1)("isModal",!0)("position",s.dialogPosition))},directives:[r.sg,T.v,h.au,l.PL,c.JJ,c.On,l.FH,r.O5],styles:[".file-drop-area[_ngcontent-%COMP%]{position:relative;text-align:center;align-items:center;width:450px;max-width:100%;padding:25px;border:1px dashed #56a6f1;border-radius:3px;transition:.2s;margin-left:15px;margin-right:15px}.file-drop-area.is-active[_ngcontent-%COMP%]{background-color:#ffffff0d}.fake-btn[_ngcontent-%COMP%]{flex-shrink:0;background-color:#d8dde3;border:1px solid #d8dde3;border-radius:3px;padding:8px 15px;margin-right:10px;font-size:12px;text-transform:uppercase}.file-msg[_ngcontent-%COMP%]{font-size:small;font-weight:300;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.file-input[_ngcontent-%COMP%]:focus{outline:none}"]}),n})()},{path:"paid-ads",component:_}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(j)],g.Bz]}),n})();var N=i(680),S=i(6196);let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[],imports:[[r.ez,O,c.u5,l.vS,l.Mw,N.w,S.p,h.Su]]}),n})()}}]);
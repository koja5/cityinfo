"use strict";(self.webpackChunkCityInfo=self.webpackChunkCityInfo||[]).push([[179],{6256:(An,hs,rt)=>{rt.d(hs,{Hw:()=>Ld,Ps:()=>fa});var i=rt(8274),u=rt(6895),Ue=rt(9646),$e=(rt(7579),rt(5698));let at;try{at=typeof Intl<"u"&&Intl.v8BreakIterator}catch{at=!1}let Oe=(()=>{class it{constructor(F){this._platformId=F,this.isBrowser=this._platformId?(0,u.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!at)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return it.\u0275fac=function(F){return new(F||it)(i.LFG(i.Lbi))},it.\u0275prov=(0,i.Yz7)({factory:function(){return new it((0,i.LFG)(i.Lbi))},token:it,providedIn:"root"}),it})();rt(9751);var lt=rt(727);class Xe extends lt.w0{constructor(Qe,F){super()}schedule(Qe,F=0){return this}}const B={setInterval(it,Qe,...F){const{delegate:H}=B;return H?.setInterval?H.setInterval(it,Qe,...F):setInterval(it,Qe,...F)},clearInterval(it){const{delegate:Qe}=B;return(Qe?.clearInterval||clearInterval)(it)},delegate:void 0};var de=rt(8737);const Fe={now:()=>(Fe.delegate||Date).now(),delegate:void 0};class xt{constructor(Qe,F=xt.now){this.schedulerActionCtor=Qe,this.now=F}schedule(Qe,F=0,H){return new this.schedulerActionCtor(this,Qe).schedule(H,F)}}xt.now=Fe.now,new class $t extends xt{constructor(Qe,F=xt.now){super(Qe,F),this.actions=[],this._active=!1}flush(Qe){const{actions:F}=this;if(this._active)return void F.push(Qe);let H;this._active=!0;do{if(H=Qe.execute(Qe.state,Qe.delay))break}while(Qe=F.shift());if(this._active=!1,H){for(;Qe=F.shift();)Qe.unsubscribe();throw H}}}(class Be extends Xe{constructor(Qe,F){super(Qe,F),this.scheduler=Qe,this.work=F,this.pending=!1}schedule(Qe,F=0){var H;if(this.closed)return this;this.state=Qe;const U=this.id,pe=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(pe,U,F)),this.pending=!0,this.delay=F,this.id=null!==(H=this.id)&&void 0!==H?H:this.requestAsyncId(pe,this.id,F),this}requestAsyncId(Qe,F,H=0){return B.setInterval(Qe.flush.bind(Qe,this),H)}recycleAsyncId(Qe,F,H=0){if(null!=H&&this.delay===H&&!1===this.pending)return F;null!=F&&B.clearInterval(F)}execute(Qe,F){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const H=this._execute(Qe,F);if(H)return H;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Qe,F){let U,H=!1;try{this.work(Qe)}catch(pe){H=!0,U=pe||new Error("Scheduled action threw falsy error")}if(H)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:Qe,scheduler:F}=this,{actions:H}=F;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(H,this),null!=Qe&&(this.id=this.recycleAsyncId(F,Qe,null)),this.delay=null,super.unsubscribe()}}}),rt(4482),rt(5403),typeof Element<"u"&&Element;const bn="cdk-high-contrast-black-on-white",pn="cdk-high-contrast-white-on-black",ms="cdk-high-contrast-active";let dn=(()=>{class it{constructor(F,H){this._platform=F,this._document=H}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const F=this._document.createElement("div");F.style.backgroundColor="rgb(1,2,3)",F.style.position="absolute",this._document.body.appendChild(F);const H=this._document.defaultView||window,U=H&&H.getComputedStyle?H.getComputedStyle(F):null,pe=(U&&U.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(F),pe){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const F=this._document.body.classList;F.remove(ms),F.remove(bn),F.remove(pn);const H=this.getHighContrastMode();1===H?(F.add(ms),F.add(bn)):2===H&&(F.add(ms),F.add(pn))}}}return it.\u0275fac=function(F){return new(F||it)(i.LFG(Oe),i.LFG(u.K0))},it.\u0275prov=(0,i.Yz7)({factory:function(){return new it((0,i.LFG)(Oe),(0,i.LFG)(u.K0))},token:it,providedIn:"root"}),it})(),hn=(()=>{class it{}return it.\u0275fac=function(F){return new(F||it)},it.\u0275mod=i.oAB({type:it}),it.\u0275inj=i.cJS({}),it})();const cn=new i.GfV("11.2.13"),Gs=new i.GfV("11.2.13"),dr=new i.OlP("mat-sanity-checks",{providedIn:"root",factory:function an(){return!0}});let vi,jr=(()=>{class it{constructor(F,H,U){this._hasDoneGlobalChecks=!1,this._document=U,F._applyBodyHighContrastModeCssClasses(),this._sanityChecks=H,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const F=this._document.defaultView||window;return"object"==typeof F&&F?F:null}_checksAreEnabled(){return(0,i.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const F=this._getWindow();return F&&(F.__karma__||F.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const H=this._document.createElement("div");H.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(H);const U=getComputedStyle(H);U&&"none"!==U.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(H)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Gs.full!==cn.full&&console.warn("The Angular Material version ("+Gs.full+") does not match the Angular CDK version ("+cn.full+").\nPlease ensure the versions of these two packages exactly match.")}}return it.\u0275fac=function(F){return new(F||it)(i.LFG(dn),i.LFG(dr,8),i.LFG(u.K0))},it.\u0275mod=i.oAB({type:it}),it.\u0275inj=i.cJS({imports:[hn,hn]}),it})();function Po(it,Qe){return class extends it{constructor(...F){super(...F),this.defaultColor=Qe,this.color=Qe}get color(){return this._color}set color(F){const H=F||this.defaultColor;H!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),H&&this._elementRef.nativeElement.classList.add(`mat-${H}`),this._color=H)}}}try{vi=typeof Intl<"u"}catch{vi=!1}var St=rt(2843),ri=rt(4128),Pi=rt(8505),Hi=rt(4004),Ms=rt(262),xs=rt(8746),Os=rt(3099),br=rt(529),Wr=rt(1481);const Ao=["*"];function On(it){return Error(`Unable to find icon with the name "${it}"`)}function Zo(it){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${it}".`)}function Wo(it){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${it}".`)}class Vo{constructor(Qe,F,H){this.url=Qe,this.svgText=F,this.options=H}}let Ol=(()=>{class it{constructor(F,H,U,pe){this._httpClient=F,this._sanitizer=H,this._errorHandler=pe,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=U}addSvgIcon(F,H,U){return this.addSvgIconInNamespace("",F,H,U)}addSvgIconLiteral(F,H,U){return this.addSvgIconLiteralInNamespace("",F,H,U)}addSvgIconInNamespace(F,H,U,pe){return this._addSvgIconConfig(F,H,new Vo(U,null,pe))}addSvgIconResolver(F){return this._resolvers.push(F),this}addSvgIconLiteralInNamespace(F,H,U,pe){const Me=this._sanitizer.sanitize(i.q3G.HTML,U);if(!Me)throw Wo(U);return this._addSvgIconConfig(F,H,new Vo("",Me,pe))}addSvgIconSet(F,H){return this.addSvgIconSetInNamespace("",F,H)}addSvgIconSetLiteral(F,H){return this.addSvgIconSetLiteralInNamespace("",F,H)}addSvgIconSetInNamespace(F,H,U){return this._addSvgIconSetConfig(F,new Vo(H,null,U))}addSvgIconSetLiteralInNamespace(F,H,U){const pe=this._sanitizer.sanitize(i.q3G.HTML,H);if(!pe)throw Wo(H);return this._addSvgIconSetConfig(F,new Vo("",pe,U))}registerFontClassAlias(F,H=F){return this._fontCssClassesByAlias.set(F,H),this}classNameForFontAlias(F){return this._fontCssClassesByAlias.get(F)||F}setDefaultFontSetClass(F){return this._defaultFontSetClass=F,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(F){const H=this._sanitizer.sanitize(i.q3G.RESOURCE_URL,F);if(!H)throw Zo(F);const U=this._cachedIconsByUrl.get(H);return U?(0,Ue.of)(va(U)):this._loadSvgIconFromConfig(new Vo(F,null)).pipe((0,Pi.b)(pe=>this._cachedIconsByUrl.set(H,pe)),(0,Hi.U)(pe=>va(pe)))}getNamedSvgIcon(F,H=""){const U=Ma(H,F);let pe=this._svgIconConfigs.get(U);if(pe)return this._getSvgFromConfig(pe);if(pe=this._getIconConfigFromResolvers(H,F),pe)return this._svgIconConfigs.set(U,pe),this._getSvgFromConfig(pe);const Me=this._iconSetConfigs.get(H);return Me?this._getSvgFromIconSetConfigs(F,Me):(0,St._)(On(U))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(F){return F.svgText?(0,Ue.of)(va(this._svgElementFromConfig(F))):this._loadSvgIconFromConfig(F).pipe((0,Hi.U)(H=>va(H)))}_getSvgFromIconSetConfigs(F,H){const U=this._extractIconWithNameFromAnySet(F,H);if(U)return(0,Ue.of)(U);const pe=H.filter(Me=>!Me.svgText).map(Me=>this._loadSvgIconSetFromConfig(Me).pipe((0,Ms.K)(yt=>{const yi=`Loading icon set URL: ${this._sanitizer.sanitize(i.q3G.RESOURCE_URL,Me.url)} failed: ${yt.message}`;return this._errorHandler.handleError(new Error(yi)),(0,Ue.of)(null)})));return(0,ri.D)(pe).pipe((0,Hi.U)(()=>{const Me=this._extractIconWithNameFromAnySet(F,H);if(!Me)throw On(F);return Me}))}_extractIconWithNameFromAnySet(F,H){for(let U=H.length-1;U>=0;U--){const pe=H[U];if(pe.svgText&&pe.svgText.indexOf(F)>-1){const Me=this._svgElementFromConfig(pe),yt=this._extractSvgIconFromSet(Me,F,pe.options);if(yt)return yt}}return null}_loadSvgIconFromConfig(F){return this._fetchIcon(F).pipe((0,Pi.b)(H=>F.svgText=H),(0,Hi.U)(()=>this._svgElementFromConfig(F)))}_loadSvgIconSetFromConfig(F){return F.svgText?(0,Ue.of)(null):this._fetchIcon(F).pipe((0,Pi.b)(H=>F.svgText=H))}_extractSvgIconFromSet(F,H,U){const pe=F.querySelector(`[id="${H}"]`);if(!pe)return null;const Me=pe.cloneNode(!0);if(Me.removeAttribute("id"),"svg"===Me.nodeName.toLowerCase())return this._setSvgAttributes(Me,U);if("symbol"===Me.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Me),U);const yt=this._svgElementFromString("<svg></svg>");return yt.appendChild(Me),this._setSvgAttributes(yt,U)}_svgElementFromString(F){const H=this._document.createElement("DIV");H.innerHTML=F;const U=H.querySelector("svg");if(!U)throw Error("<svg> tag not found");return U}_toSvgElement(F){const H=this._svgElementFromString("<svg></svg>"),U=F.attributes;for(let pe=0;pe<U.length;pe++){const{name:Me,value:yt}=U[pe];"id"!==Me&&H.setAttribute(Me,yt)}for(let pe=0;pe<F.childNodes.length;pe++)F.childNodes[pe].nodeType===this._document.ELEMENT_NODE&&H.appendChild(F.childNodes[pe].cloneNode(!0));return H}_setSvgAttributes(F,H){return F.setAttribute("fit",""),F.setAttribute("height","100%"),F.setAttribute("width","100%"),F.setAttribute("preserveAspectRatio","xMidYMid meet"),F.setAttribute("focusable","false"),H&&H.viewBox&&F.setAttribute("viewBox",H.viewBox),F}_fetchIcon(F){var H;const{url:U,options:pe}=F,Me=null!==(H=pe?.withCredentials)&&void 0!==H&&H;if(!this._httpClient)throw function mo(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==U)throw Error(`Cannot fetch icon from URL "${U}".`);const yt=this._sanitizer.sanitize(i.q3G.RESOURCE_URL,U);if(!yt)throw Zo(U);const ei=this._inProgressUrlFetches.get(yt);if(ei)return ei;const yi=this._httpClient.get(yt,{responseType:"text",withCredentials:Me}).pipe((0,xs.x)(()=>this._inProgressUrlFetches.delete(yt)),(0,Os.B)());return this._inProgressUrlFetches.set(yt,yi),yi}_addSvgIconConfig(F,H,U){return this._svgIconConfigs.set(Ma(F,H),U),this}_addSvgIconSetConfig(F,H){const U=this._iconSetConfigs.get(F);return U?U.push(H):this._iconSetConfigs.set(F,[H]),this}_svgElementFromConfig(F){if(!F.svgElement){const H=this._svgElementFromString(F.svgText);this._setSvgAttributes(H,F.options),F.svgElement=H}return F.svgElement}_getIconConfigFromResolvers(F,H){for(let U=0;U<this._resolvers.length;U++){const pe=this._resolvers[U](H,F);if(pe)return El(pe)?new Vo(pe.url,null,pe.options):new Vo(pe,null)}}}return it.\u0275fac=function(F){return new(F||it)(i.LFG(br.eN,8),i.LFG(Wr.H7),i.LFG(u.K0,8),i.LFG(i.qLn))},it.\u0275prov=(0,i.Yz7)({factory:function(){return new it((0,i.LFG)(br.eN,8),(0,i.LFG)(Wr.H7),(0,i.LFG)(u.K0,8),(0,i.LFG)(i.qLn))},token:it,providedIn:"root"}),it})();function va(it){return it.cloneNode(!0)}function Ma(it,Qe){return it+":"+Qe}function El(it){return!(!it.url||!it.options)}class ka{constructor(Qe){this._elementRef=Qe}}const $l=Po(ka),ba=new i.OlP("mat-icon-location",{providedIn:"root",factory:function Sc(){const it=(0,i.f3M)(u.K0),Qe=it?it.location:null;return{getPathname:()=>Qe?Qe.pathname+Qe.search:""}}}),ta=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ec=ta.map(it=>`[${it}]`).join(", "),Xa=/^url\(['"]?#(.*?)['"]?\)$/;let Ld=(()=>{class it extends $l{constructor(F,H,U,pe,Me){super(F),this._iconRegistry=H,this._location=pe,this._errorHandler=Me,this._inline=!1,this._currentIconFetch=lt.w0.EMPTY,U||F.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(F){this._inline=function Li(it){return null!=it&&"false"!=`${it}`}(F)}get svgIcon(){return this._svgIcon}set svgIcon(F){F!==this._svgIcon&&(F?this._updateSvgIcon(F):this._svgIcon&&this._clearSvgElement(),this._svgIcon=F)}get fontSet(){return this._fontSet}set fontSet(F){const H=this._cleanupFontValue(F);H!==this._fontSet&&(this._fontSet=H,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(F){const H=this._cleanupFontValue(F);H!==this._fontIcon&&(this._fontIcon=H,this._updateFontIconClasses())}_splitIconName(F){if(!F)return["",""];const H=F.split(":");switch(H.length){case 1:return["",H[0]];case 2:return H;default:throw Error(`Invalid icon name: "${F}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const F=this._elementsWithExternalReferences;if(F&&F.size){const H=this._location.getPathname();H!==this._previousPath&&(this._previousPath=H,this._prependPathToReferences(H))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(F){this._clearSvgElement();const H=F.querySelectorAll("style");for(let pe=0;pe<H.length;pe++)H[pe].textContent+=" ";const U=this._location.getPathname();this._previousPath=U,this._cacheChildrenWithExternalReferences(F),this._prependPathToReferences(U),this._elementRef.nativeElement.appendChild(F)}_clearSvgElement(){const F=this._elementRef.nativeElement;let H=F.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();H--;){const U=F.childNodes[H];(1!==U.nodeType||"svg"===U.nodeName.toLowerCase())&&F.removeChild(U)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const F=this._elementRef.nativeElement,H=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();H!=this._previousFontSetClass&&(this._previousFontSetClass&&F.classList.remove(this._previousFontSetClass),H&&F.classList.add(H),this._previousFontSetClass=H),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&F.classList.remove(this._previousFontIconClass),this.fontIcon&&F.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(F){return"string"==typeof F?F.trim().split(" ")[0]:F}_prependPathToReferences(F){const H=this._elementsWithExternalReferences;H&&H.forEach((U,pe)=>{U.forEach(Me=>{pe.setAttribute(Me.name,`url('${F}#${Me.value}')`)})})}_cacheChildrenWithExternalReferences(F){const H=F.querySelectorAll(Ec),U=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let pe=0;pe<H.length;pe++)ta.forEach(Me=>{const yt=H[pe],ei=yt.getAttribute(Me),yi=ei?ei.match(Xa):null;if(yi){let ss=U.get(yt);ss||(ss=[],U.set(yt,ss)),ss.push({name:Me,value:yi[1]})}})}_updateSvgIcon(F){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),F){const[H,U]=this._splitIconName(F);H&&(this._svgNamespace=H),U&&(this._svgName=U),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(U,H).pipe((0,$e.q)(1)).subscribe(pe=>this._setSvgElement(pe),pe=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${H}:${U}! ${pe.message}`))})}}}return it.\u0275fac=function(F){return new(F||it)(i.Y36(i.SBq),i.Y36(Ol),i.$8M("aria-hidden"),i.Y36(ba),i.Y36(i.qLn))},it.\u0275cmp=i.Xpm({type:it,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(F,H){2&F&&(i.uIk("data-mat-icon-type",H._usingFontIcon()?"font":"svg")("data-mat-icon-name",H._svgName||H.fontIcon)("data-mat-icon-namespace",H._svgNamespace||H.fontSet),i.ekj("mat-icon-inline",H.inline)("mat-icon-no-color","primary"!==H.color&&"accent"!==H.color&&"warn"!==H.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[i.qOj],ngContentSelectors:Ao,decls:1,vars:0,template:function(F,H){1&F&&(i.F$t(),i.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),it})(),fa=(()=>{class it{}return it.\u0275fac=function(F){return new(F||it)},it.\u0275mod=i.oAB({type:it}),it.\u0275inj=i.cJS({imports:[jr,jr]}),it})()},3544:(An,hs,rt)=>{rt.d(hs,{R:()=>u});var i=rt(8274);let u=(()=>{class Ue{constructor(){}ngOnInit(){}}return Ue.\u0275fac=function($e){return new($e||Ue)},Ue.\u0275cmp=i.Xpm({type:Ue,selectors:[["app-loader"]],decls:8,vars:0,consts:[[1,"outer"],[1,"middle"],[1,"inner"],["width","240","height","240","viewBox","0 0 240 240",1,"pl"],["cx","120","cy","120","r","105","fill","none","stroke","#000","stroke-width","20","stroke-dasharray","0 660","stroke-dashoffset","-330","stroke-linecap","round",1,"pl__ring","pl__ring--a"],["cx","120","cy","120","r","35","fill","none","stroke","#000","stroke-width","20","stroke-dasharray","0 220","stroke-dashoffset","-110","stroke-linecap","round",1,"pl__ring","pl__ring--b"],["cx","85","cy","120","r","70","fill","none","stroke","#000","stroke-width","20","stroke-dasharray","0 440","stroke-linecap","round",1,"pl__ring","pl__ring--c"],["cx","155","cy","120","r","70","fill","none","stroke","#000","stroke-width","20","stroke-dasharray","0 440","stroke-linecap","round",1,"pl__ring","pl__ring--d"]],template:function($e,Li){1&$e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i.O4$(),i.TgZ(3,"svg",3),i._UZ(4,"circle",4)(5,"circle",5)(6,"circle",6)(7,"circle",7),i.qZA()()()())},styles:["*[_ngcontent-%COMP%]{border:0;box-sizing:border-box;margin:0;padding:0}[_ngcontent-%COMP%]:root{font-size:calc(16px + 8 * (100vw - 320px) / 960)}.pl[_ngcontent-%COMP%]{width:6em;height:6em}.pl__ring[_ngcontent-%COMP%]{animation:ringA 2s linear infinite}.pl__ring--a[_ngcontent-%COMP%]{stroke:#f42f25}.pl__ring--b[_ngcontent-%COMP%]{animation-name:ringB;stroke:#f49725}.pl__ring--c[_ngcontent-%COMP%]{animation-name:ringC;stroke:#255ff4}.pl__ring--d[_ngcontent-%COMP%]{animation-name:ringD;stroke:#f42582}@media (prefers-color-scheme: dark){body[_ngcontent-%COMP%]{background:#17181c}}@keyframes ringA{0%,4%{stroke-dasharray:0 660;stroke-width:20;stroke-dashoffset:-330}12%{stroke-dasharray:60 600;stroke-width:30;stroke-dashoffset:-335}32%{stroke-dasharray:60 600;stroke-width:30;stroke-dashoffset:-595}40%,54%{stroke-dasharray:0 660;stroke-width:20;stroke-dashoffset:-660}62%{stroke-dasharray:60 600;stroke-width:30;stroke-dashoffset:-665}82%{stroke-dasharray:60 600;stroke-width:30;stroke-dashoffset:-925}90%,to{stroke-dasharray:0 660;stroke-width:20;stroke-dashoffset:-990}}@keyframes ringB{0%,12%{stroke-dasharray:0 220;stroke-width:20;stroke-dashoffset:-110}20%{stroke-dasharray:20 200;stroke-width:30;stroke-dashoffset:-115}40%{stroke-dasharray:20 200;stroke-width:30;stroke-dashoffset:-195}48%,62%{stroke-dasharray:0 220;stroke-width:20;stroke-dashoffset:-220}70%{stroke-dasharray:20 200;stroke-width:30;stroke-dashoffset:-225}90%{stroke-dasharray:20 200;stroke-width:30;stroke-dashoffset:-305}98%,to{stroke-dasharray:0 220;stroke-width:20;stroke-dashoffset:-330}}@keyframes ringC{0%{stroke-dasharray:0 440;stroke-width:20;stroke-dashoffset:0}8%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-5}28%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-175}36%,58%{stroke-dasharray:0 440;stroke-width:20;stroke-dashoffset:-220}66%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-225}86%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-395}94%,to{stroke-dasharray:0 440;stroke-width:20;stroke-dashoffset:-440}}@keyframes ringD{0%,8%{stroke-dasharray:0 440;stroke-width:20;stroke-dashoffset:0}16%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-5}36%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-175}44%,50%{stroke-dasharray:0 440;stroke-width:20;stroke-dashoffset:-220}58%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-225}78%{stroke-dasharray:40 400;stroke-width:30;stroke-dashoffset:-395}86%,to{stroke-dasharray:0 440;stroke-width:20;stroke-dashoffset:-440}}"]}),Ue})()},7725:(An,hs,rt)=>{rt.d(hs,{l:()=>Zt});var i=rt(8274),u=rt(4383),Ue=rt(5452);let Zt=(()=>{class $e{constructor(Lt,ut){this.toastr=Lt,this.helpService=ut}ngOnInit(){}showSuccessCustom(Lt,ut){this.toastr.success(Lt,ut,{timeOut:7e3,positionClass:"toast-bottom-right"})}showInfoCustom(Lt,ut){this.toastr.info(Lt,ut,{timeOut:7e3,positionClass:"toast-bottom-right"})}showErrorCustom(Lt,ut){this.toastr.error(Lt,ut,{timeOut:7e3,positionClass:"toast-bottom-right"})}showWarningCustom(Lt,ut){this.toastr.warning(Lt,ut,{timeOut:7e3,positionClass:"toast-bottom-right"})}showSuccess(){this.toastr.success("The action was successfully executed","",{timeOut:7e3,positionClass:"toast-bottom-right"})}showInfo(){this.toastr.info("The action was successfully executed","",{timeOut:7e3,positionClass:"toast-bottom-right"})}showError(){this.toastr.error("The action was not executed successfully","",{timeOut:7e3,positionClass:"toast-bottom-right"})}showWarning(){this.toastr.warning(this.helpService.getLanguage().toastrWarningExecutedActionTitle,this.helpService.getLanguage().toastrWarningExecutedActionText,{timeOut:7e3,positionClass:"toast-bottom-right"})}}return $e.\u0275fac=function(Lt){return new(Lt||$e)(i.Y36(u._W),i.Y36(Ue.s))},$e.\u0275cmp=i.Xpm({type:$e,selectors:[["app-toastr"]],decls:2,vars:0,template:function(Lt,ut){1&Lt&&(i.TgZ(0,"p"),i._uU(1,"toastr works!"),i.qZA())}}),$e})()},8743:(An,hs,rt)=>{rt.d(hs,{O:()=>Oe});var i=rt(8274),u=rt(5452),Ue=rt(6209),Zt=rt(7725),$e=rt(7685);const Li=["ejDialog"];function Lt(ft,jt){if(1&ft){const Nt=i.EpF();i.TgZ(0,"button",3),i.NdJ("click",function(){const Rt=i.CHM(Nt).$implicit,z=i.oxw(2);return i.KtG(z.clickAction(Rt.action))}),i._uU(1),i.qZA()}if(2&ft){const Nt=jt.$implicit,Di=i.oxw(2);i.xp6(1),i.hij(" ",Di.language[Nt.title]?Di.language[Nt.title]:Nt.title," ")}}function ut(ft,jt){if(1&ft&&(i.TgZ(0,"div"),i.YNc(1,Lt,2,1,"button",2),i.qZA()),2&ft){const Nt=i.oxw();i.Tol(Nt.config.actionButtons.class),i.xp6(1),i.Q6J("ngForOf",Nt.config.actionButtons.simpleButtons)}}function Si(ft,jt){if(1&ft){const Nt=i.EpF();i.TgZ(0,"div")(1,"button",4),i.NdJ("select",function(bt){i.CHM(Nt);const Rt=i.oxw();return i.KtG(Rt.clickAction(bt))}),i.qZA()()}if(2&ft){const Nt=i.oxw();i.Tol(Nt.config.actionButtons.class),i.xp6(1),i.s9C("content",Nt.config.actionButtons.dropDownButtons.content),i.Q6J("items",Nt.itemsModelDropDown)}}function We(ft,jt){if(1&ft){const Nt=i.EpF();i.TgZ(0,"div")(1,"ejs-splitbutton",5),i.NdJ("select",function(bt){i.CHM(Nt);const Rt=i.oxw();return i.KtG(Rt.clickAction(bt))}),i.qZA()()}if(2&ft){const Nt=i.oxw();i.Tol(Nt.config.actionButtons.class),i.xp6(1),i.s9C("content",Nt.config.actionButtons.splitButtons.content),i.Q6J("items",Nt.itemsModelSplit)}}function gt(ft,jt){1&ft&&(i.TgZ(0,"div",9),i._UZ(1,"app-loader"),i.qZA())}function E(ft,jt){if(1&ft){const Nt=i.EpF();i.TgZ(0,"app-dynamic-forms",10,11),i.NdJ("submit",function(bt){i.CHM(Nt);const Rt=i.oxw(2);return i.KtG(Rt.submitEmitter(bt))}),i.qZA()}if(2&ft){const Nt=i.oxw(2);i.Q6J("config",Nt.config)("data",Nt.data)("path",Nt.path)("file",Nt.file)("hideActionButtons",!0)}}function at(ft,jt){if(1&ft){const Nt=i.EpF();i.TgZ(0,"app-dialog-modal",6),i.NdJ("closeEventEmitter",function(){i.CHM(Nt);const bt=i.oxw();return i.KtG(bt.closeModal())}),i.YNc(1,gt,2,0,"div",7),i.YNc(2,E,2,5,"app-dynamic-forms",8),i.qZA()}if(2&ft){const Nt=i.oxw();i.Q6J("show",Nt.modal),i.xp6(1),i.Q6J("ngIf",Nt.loader),i.xp6(1),i.Q6J("ngIf",!Nt.loader&&Nt.config.config&&Nt.config.config.length>0&&Nt.checkComponentType())}}let Oe=(()=>{class ft{constructor(Nt,Di,bt,Rt){this.helpService=Nt,this.apiService=Di,this.toastr=bt,this.router=Rt,this.refreshFormData=new i.vpe,this.modal=!1,this.loader=!1}ngOnInit(){this.language=this.helpService.getLanguage(),this.initialize()}initialize(){this.config.actionButtons.dropDownButtons&&(this.itemsModelDropDown=this.config.actionButtons.dropDownButtons.items),this.config.actionButtons.splitButtons&&(this.itemsModelSplit=this.config.actionButtons.splitButtons.items)}clickAction(Nt){switch(Nt.item.properties.id){case"edit":this.modal=!0;break;case"delete":this.ejDialog.show()}}checkComponentType(){switch(this.componentType){case"form":case"scheduler":return!0;default:return!1}}submitEmitter(Nt){this.loader=!0,console.log(this.data),this.callServerMethod(this.data&&this.data.length?this.config.editSettingsRequest.edit:this.config.editSettingsRequest.add,Nt)}callServerMethod(Nt,Di){this.apiService.callServerMethod(Nt,Di,this.router).subscribe(bt=>{bt?(this.toastr.showSuccess(),this.apiService.callApi(this.config,this.router).subscribe(Rt=>{this.setResponseData(Rt)})):(this.toastr.showError(),this.loader=!1,this.modal=!1)})}setResponseData(Nt){this.loader=!1,this.modal=!1,"GET"===this.config.request.type&&(this.data=Nt,this.refreshFormData.emit(this.data))}closeModal(){this.modal=!1}checkRights(){return this.helpService.checkRights(this.config.actionButtons.rights)}}return ft.\u0275fac=function(Nt){return new(Nt||ft)(i.Y36(u.s),i.Y36(Ue.f),i.Y36(Zt.l),i.Y36($e.gz))},ft.\u0275cmp=i.Xpm({type:ft,selectors:[["app-dynamic-action-button"]],viewQuery:function(Nt,Di){if(1&Nt&&i.Gf(Li,5),2&Nt){let bt;i.iGM(bt=i.CRH())&&(Di.ejDialog=bt.first)}},inputs:{data:"data",config:"config",componentType:"componentType",path:"path",file:"file"},outputs:{refreshFormData:"refreshFormData"},decls:4,vars:4,consts:[[3,"class",4,"ngIf"],[3,"show","closeEventEmitter",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["ejs-dropdownbutton","",3,"content","items","select"],[3,"content","items","select"],[3,"show","closeEventEmitter"],["style","height: 60vh",4,"ngIf"],[3,"config","data","path","file","hideActionButtons","submit",4,"ngIf"],[2,"height","60vh"],[3,"config","data","path","file","hideActionButtons","submit"],["form","dynamicForm"]],template:function(Nt,Di){1&Nt&&(i.YNc(0,ut,2,4,"div",0),i.YNc(1,Si,2,5,"div",0),i.YNc(2,We,2,5,"div",0),i.YNc(3,at,3,3,"app-dialog-modal",1)),2&Nt&&(i.Q6J("ngIf",Di.config.actionButtons.simpleButtons&&Di.config.actionButtons.simpleButtons.length>0&&Di.checkRights()),i.xp6(1),i.Q6J("ngIf",Di.config.actionButtons.dropDownButtons&&Di.itemsModelDropDown.length>0&&Di.checkRights()),i.xp6(1),i.Q6J("ngIf",Di.config.actionButtons.splitButtons&&Di.itemsModelSplit.length>0&&Di.checkRights()),i.xp6(1),i.Q6J("ngIf",Di.modal))}}),ft})()},9039:(An,hs,rt)=>{rt.d(hs,{b:()=>Xt});var i=rt(8274),u=(()=>{return(Kt=u||(u={})).label="label",Kt.textbox="textbox",Kt.radio="radio",Kt.combobox="combobox",Kt.button="button",u;var Kt})(),Ue=rt(4006),Zt=rt(4937),$e=rt(6209),Li=rt(7685),Lt=rt(2684),ut=rt(6895);class Si{}var We=rt(5452),gt=rt(5299),E=rt(6256);let at=(()=>{class Kt{constructor(){}ngOnInit(){}}return Kt.\u0275fac=function(Tt){return new(Tt||Kt)},Kt.\u0275cmp=i.Xpm({type:Kt,selectors:[["app-dynamic-icon"]],inputs:{icon:"icon"},decls:2,vars:1,consts:[[1,"mat-icon","material-icons","mat-icon-no-color","mr-1"]],template:function(Tt,qt){1&Tt&&(i.TgZ(0,"mat-icon",0),i._uU(1),i.qZA()),2&Tt&&(i.xp6(1),i.hij(" ",qt.icon,"\n"))},dependencies:[E.Hw]}),Kt})();const Oe=function(Kt){return[Kt]};function ft(Kt,ni){if(1&Kt&&(i.TgZ(0,"div",2)(1,"button",3),i._uU(2),i.qZA()()),2&Kt){const Tt=i.oxw();i.Q6J("ngClass",i.VKq(5,Oe,Tt.config.positionClass)),i.xp6(1),i.Tol(Tt.config.class),i.Q6J("disabled",Tt.config.disabled),i.xp6(1),i.hij(" ",Tt.config.title," ")}}function jt(Kt,ni){if(1&Kt&&i._UZ(0,"app-dynamic-icon",6),2&Kt){const Tt=i.oxw(2);i.Q6J("icon",Tt.icon)}}function Nt(Kt,ni){if(1&Kt){const Tt=i.EpF();i.TgZ(0,"div")(1,"button",4),i.NdJ("click",function(){i.CHM(Tt);const Ci=i.oxw();return i.KtG(Ci.clickButton())}),i.YNc(2,jt,1,1,"app-dynamic-icon",5),i._uU(3),i.qZA()()}if(2&Kt){const Tt=i.oxw();i.xp6(1),i.Gre("e-btn ",Tt.class,""),i.xp6(1),i.Q6J("ngIf",Tt.icon),i.xp6(1),i.hij(" ",Tt.language[Tt.title]?Tt.language[Tt.title]:Tt.title," ")}}let Di=(()=>{class Kt{constructor(Tt){this.helpService=Tt,this.clickEmitter=new i.vpe,this.config=new Si,this.group=new Ue.cw({})}ngOnInit(){this.language=this.helpService.getLanguage()}clickButton(){this.clickEmitter.emit()}checkRights(){return this.helpService.checkRights(this.config.rights)}}return Kt.\u0275fac=function(Tt){return new(Tt||Kt)(i.Y36(We.s))},Kt.\u0275cmp=i.Xpm({type:Kt,selectors:[["app-button"]],inputs:{class:"class",title:"title",icon:"icon"},outputs:{clickEmitter:"clickEmitter"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],["ejs-button","","type","submit",3,"disabled"],[3,"click"],[3,"icon",4,"ngIf"],[3,"icon"]],template:function(Tt,qt){1&Tt&&(i.YNc(0,ft,3,7,"div",0),i.YNc(1,Nt,4,5,"div",1)),2&Tt&&(i.Q6J("ngIf",qt.config&&qt.checkRights()),i.xp6(1),i.Q6J("ngIf",qt.title||qt.icon))},dependencies:[ut.mk,ut.O5,gt.r0,at]}),Kt})();var bt=rt(7176);const Rt=["default"];function z(Kt,ni){if(1&Kt&&(i.TgZ(0,"label",6),i._uU(1),i.qZA()),2&Kt){const Tt=i.oxw(2);i.xp6(1),i.Oqu(Tt.config.title)}}const J=function(Kt){return[Kt]};function ve(Kt,ni){if(1&Kt&&(i.TgZ(0,"div",2),i.YNc(1,z,2,1,"label",3),i._UZ(2,"ejs-textbox",4,5),i.qZA()),2&Kt){const Tt=i.oxw();i.Q6J("ngClass",i.VKq(11,J,Tt.config.width))("formGroup",Tt.group),i.xp6(1),i.Q6J("ngIf",Tt.config.title),i.xp6(1),i.s9C("cssClass",Tt.config.class),i.Q6J("id",Tt.config.name)("type",Tt.config.type)("placeholder",Tt.config.placeholder?Tt.config.placeholder:"")("formControlName",Tt.config.name)("readonly",Tt.config.readonly)("disabled",Tt.config.disabled)("multiline",Tt.config.multiline)}}function Ne(Kt,ni){if(1&Kt&&(i.TgZ(0,"label",6),i._uU(1),i.qZA()),2&Kt){const Tt=i.oxw(2);i.xp6(1),i.Oqu(Tt.config.title)}}function ce(Kt,ni){if(1&Kt&&i._UZ(0,"input",11),2&Kt){const Tt=i.oxw(2);i.Gre("",Tt.config.class," e-field e-input e-control e-textbox e-lib e-input "),i.s9C("name",Tt.config.name),i.s9C("type",Tt.config.type)}}function be(Kt,ni){if(1&Kt&&i._UZ(0,"textarea",12),2&Kt){const Tt=i.oxw(2);i.Gre("",Tt.config.class," e-field e-input e-control e-textbox e-lib e-input  border-none"),i.s9C("name",Tt.config.name)}}function Se(Kt,ni){if(1&Kt&&(i.TgZ(0,"div",7),i.YNc(1,Ne,2,1,"label",3),i.TgZ(2,"div",8),i.YNc(3,ce,1,5,"input",9),i.YNc(4,be,1,4,"textarea",10),i.qZA()()),2&Kt){const Tt=i.oxw();i.Q6J("ngClass",i.VKq(5,J,Tt.config.width))("formGroup",Tt.group),i.xp6(1),i.Q6J("ngIf",Tt.config.title),i.xp6(2),i.Q6J("ngIf",!Tt.config.multiline),i.xp6(1),i.Q6J("ngIf",Tt.config.multiline)}}let ue=(()=>{class Kt{constructor(Tt){this.helpService=Tt,this.config=new Si,this.group=new Ue.cw({})}ngOnInit(){this.language=this.helpService.getLanguage(),this.initializeRows()}initializeRows(){this.config.rows&&setTimeout(()=>{this.textareaObj.addAttributes({rows:this.config.rows?this.config.rows:"2"})},50)}}return Kt.\u0275fac=function(Tt){return new(Tt||Kt)(i.Y36(We.s))},Kt.\u0275cmp=i.Xpm({type:Kt,selectors:[["app-text-box"]],viewQuery:function(Tt,qt){if(1&Tt&&i.Gf(Rt,5),2&Tt){let Ci;i.iGM(Ci=i.CRH())&&(qt.textareaObj=Ci.first)}},decls:2,vars:2,consts:[["class","form-group",3,"ngClass","formGroup",4,"ngIf"],[3,"ngClass","formGroup",4,"ngIf"],[1,"form-group",3,"ngClass","formGroup"],["class","custom-label",4,"ngIf"],[3,"cssClass","id","type","placeholder","formControlName","readonly","disabled","multiline"],["default",""],[1,"custom-label"],[3,"ngClass","formGroup"],[1,"e-input-group","e-control-wrapper","e-outline"],["value","",3,"class","name","type",4,"ngIf"],["value","",3,"class","name",4,"ngIf"],["value","",3,"name","type"],["value","",3,"name"]],template:function(Tt,qt){1&Tt&&(i.YNc(0,ve,4,13,"div",0),i.YNc(1,Se,5,7,"div",1)),2&Tt&&(i.Q6J("ngIf",void 0===qt.config.schedule),i.xp6(1),i.Q6J("ngIf",qt.config.schedule))},dependencies:[ut.mk,ut.O5,Ue.JJ,Ue.JL,Ue.sg,Ue.u,bt.PL]}),Kt})();function _e(Kt,ni){if(1&Kt&&(i.TgZ(0,"label",3),i._uU(1),i.qZA()),2&Kt){const Tt=i.oxw();i.xp6(1),i.Oqu(Tt.config.title)}}function lt(Kt,ni){if(1&Kt&&(i.TgZ(0,"p",4),i._uU(1),i.qZA()),2&Kt){const Tt=i.oxw();i.xp6(1),i.hij(" ",Tt.config.text," ")}}const Xe=function(Kt){return[Kt]},de={textbox:ue,password:ue,label:(()=>{class Kt{constructor(Tt){this.helpService=Tt,this.config=new Si,this.group=new Ue.cw({})}ngOnInit(){this.language=this.helpService.getLanguage()}}return Kt.\u0275fac=function(Tt){return new(Tt||Kt)(i.Y36(We.s))},Kt.\u0275cmp=i.Xpm({type:Kt,selectors:[["app-label"]],decls:3,vars:6,consts:[[1,"form-group",3,"ngClass","formGroup"],["class","custom-label",4,"ngIf"],["class","label-text",4,"ngIf"],[1,"custom-label"],[1,"label-text"]],template:function(Tt,qt){1&Tt&&(i.TgZ(0,"div",0),i.YNc(1,_e,2,1,"label",1),i.YNc(2,lt,2,1,"p",2),i.qZA()),2&Tt&&(i.Q6J("ngClass",i.VKq(4,Xe,qt.config.width))("formGroup",qt.group),i.xp6(1),i.Q6J("ngIf",qt.config.title),i.xp6(1),i.Q6J("ngIf",qt.config.text))},dependencies:[ut.mk,ut.O5,Ue.JL,Ue.sg],styles:[".border-top[_ngcontent-%COMP%]{border-top:1px solid lightgray}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid lightgray}.label-text[_ngcontent-%COMP%]{color:#a7b1bc}"]}),Kt})(),button:Di};let Be=(()=>{class Kt{constructor(Tt,qt){this.resolver=Tt,this.container=qt}ngOnChanges(){this.component&&(this.component.instance.config=this.config,this.component.instance.group=this.group)}ngOnInit(){if(!de[this.config.type]){const qt=Object.keys(de).join(", ");throw new Error(`Trying to use an unsupported type (${this.config.type}).\n        Supported types: ${qt}`)}const Tt=this.resolver.resolveComponentFactory(de[this.config.type]);this.component=this.container.createComponent(Tt),this.component.instance.config=this.config,this.component.instance.group=this.group}}return Kt.\u0275fac=function(Tt){return new(Tt||Kt)(i.Y36(i._Vd),i.Y36(i.s_b))},Kt.\u0275dir=i.lG2({type:Kt,selectors:[["","dynamicField",""]],inputs:{config:"config",group:"group",data:"data"},features:[i.TTD]}),Kt})();var Fe=rt(3544),xt=rt(8743);function $t(Kt,ni){1&Kt&&(i.TgZ(0,"div",2),i._UZ(1,"app-loader"),i.qZA())}function ji(Kt,ni){if(1&Kt){const Tt=i.EpF();i.TgZ(0,"app-dynamic-action-button",5),i.NdJ("refreshFormData",function(Ci){i.CHM(Tt);const gs=i.oxw(3);return i.KtG(gs.refreshFormData(Ci))}),i.qZA()}if(2&Kt){const Tt=i.oxw(3);i.Q6J("config",Tt.config)("data",Tt.data)("path",Tt.path)("file",Tt.file)("componentType","form")}}function is(Kt,ni){if(1&Kt&&(i.TgZ(0,"strong",14),i._uU(1),i.qZA()),2&Kt){const Tt=i.oxw(4);i.xp6(1),i.Oqu(Tt.config.additionalInfo.title)}}function zi(Kt,ni){if(1&Kt&&(i.TgZ(0,"p",15),i._uU(1),i.qZA()),2&Kt){const Tt=i.oxw(4);i.xp6(1),i.hij(" ",Tt.config.additionalInfo.text," ")}}function ui(Kt,ni){if(1&Kt&&i.GkF(0,16),2&Kt){const Tt=ni.$implicit,qt=i.oxw(4);i.Q6J("config",Tt)("group",qt.form)}}function Ut(Kt,ni){if(1&Kt){const Tt=i.EpF();i.TgZ(0,"div")(1,"div",6)(2,"div",7)(3,"div",8)(4,"p"),i.YNc(5,is,2,1,"strong",9),i.qZA(),i.YNc(6,zi,2,1,"p",10),i.qZA(),i.TgZ(7,"div",11)(8,"form",12),i.NdJ("submit",function(Ci){i.CHM(Tt);const gs=i.oxw(3);return i.KtG(gs.handleSubmit(Ci))}),i.YNc(9,ui,1,2,"ng-container",13),i.qZA()()()()()}if(2&Kt){const Tt=i.oxw(3);i.Tol(Tt.hideActionButtons?"":Tt.config.class),i.xp6(5),i.Q6J("ngIf",Tt.config.additionalInfo.title),i.xp6(1),i.Q6J("ngIf",Tt.config.additionalInfo.text),i.xp6(2),i.Q6J("formGroup",Tt.form),i.xp6(1),i.Q6J("ngForOf",Tt.config.config)}}function oi(Kt,ni){if(1&Kt&&i.GkF(0,16),2&Kt){const Tt=ni.$implicit,qt=i.oxw(4);i.Q6J("config",Tt)("group",qt.form)}}function us(Kt,ni){if(1&Kt){const Tt=i.EpF();i.TgZ(0,"div")(1,"form",12),i.NdJ("submit",function(Ci){i.CHM(Tt);const gs=i.oxw(3);return i.KtG(gs.handleSubmit(Ci))}),i.YNc(2,oi,1,2,"ng-container",13),i.qZA()()}if(2&Kt){const Tt=i.oxw(3);i.Tol(Tt.hideActionButtons?"":Tt.config.class),i.xp6(1),i.Q6J("formGroup",Tt.form),i.xp6(1),i.Q6J("ngForOf",Tt.config.config)}}function Us(Kt,ni){if(1&Kt&&(i.TgZ(0,"div"),i.YNc(1,ji,1,5,"app-dynamic-action-button",3),i.YNc(2,Ut,10,7,"div",4),i.YNc(3,us,3,5,"div",4),i.qZA()),2&Kt){const Tt=i.oxw(2);i.xp6(1),i.Q6J("ngIf",Tt.config.actionButtons&&!Tt.hideActionButtons),i.xp6(1),i.Q6J("ngIf",Tt.config&&Tt.config.additionalInfo),i.xp6(1),i.Q6J("ngIf",Tt.config&&void 0===Tt.config.additionalInfo)}}function $i(Kt,ni){if(1&Kt&&(i.TgZ(0,"div"),i.YNc(1,$t,2,0,"div",1),i.YNc(2,Us,4,3,"div",0),i.qZA()),2&Kt){const Tt=i.oxw();i.xp6(1),i.Q6J("ngIf",Tt.loader),i.xp6(1),i.Q6J("ngIf",!Tt.loader)}}function et(Kt,ni){1&Kt&&i._UZ(0,"app-dynamic-forms",18),2&Kt&&i.Q6J("config",ni.$implicit)}function zt(Kt,ni){if(1&Kt&&(i.TgZ(0,"div"),i.YNc(1,et,1,1,"app-dynamic-forms",17),i.qZA()),2&Kt){const Tt=i.oxw();i.xp6(1),i.Q6J("ngForOf",Tt.config.childrens)}}let Xt=(()=>{class Kt{constructor(Tt,qt,Ci,gs,Jt){this.fb=Tt,this.configurationService=qt,this.apiService=Ci,this.router=gs,this.messageService=Jt,this.submit=new i.vpe,this.loader=!0,this.modalShow=!1}get controls(){return this.config.config.filter(({type:Tt})=>"button"!==Tt)}get changes(){return this.form.valueChanges}get valid(){return this.form.valid}get value(){return this.form.value}ngOnInit(){this.path&&this.file&&!this.data?this.initializeConfig():this.data&&this.hideActionButtons?this.getConfigurationFile():(this.form=this.createGroup(),this.loader=!1,this.partOfGrid||(this.disableEdit&&this.setDisableEdit(),this.config.request&&!this.data?this.getData(this.config):this.setValueToForm(this.config.config,this.data)))}initializeConfig(){this.configurationService.getConfiguration(this.path,this.file).subscribe(Tt=>{this.config=Tt,this.disableEdit&&this.setDisableEdit(),this.config.actionButtons&&this.setDisableEdit(),this.form=this.createGroup(),this.config.request&&!this.data&&this.getData(this.config)})}getConfigurationFile(){this.configurationService.getConfiguration(this.path,this.file).subscribe(Tt=>{this.config=Tt,this.form=this.createGroup(),this.setValueToForm(this.config.config,this.data)})}getData(Tt){this.apiService.callApi(Tt,this.router).subscribe(qt=>{this.data=qt,this.setValueToForm(this.config.config,qt)})}setDisableEdit(){if(this.config.config)for(let Tt=0;Tt<this.config.config.length;Tt++)this.config.config[Tt].readonly=!0,"button"===this.config.config[Tt].type&&"submit"===this.config.config[Tt].field?this.config.config.splice(Tt,1):"radio"===this.config.config[Tt].type&&(this.config.config[Tt].disabled=!0)}callApiPost(Tt,qt){this.apiService.callPostMethod(Tt,qt).subscribe(Ci=>{this.data=Ci,this.setValueToForm(this.config.config,Ci)})}callApiGet(Tt,qt){this.apiService.callGetMethod(Tt,qt).subscribe(Ci=>{this.data=Ci,this.setValueToForm(this.config.config,Ci)})}ngOnChanges(){if(this.form){const Tt=Object.keys(this.form.controls),qt=this.controls.map(Ci=>Ci.name);Tt.filter(Ci=>!qt.includes(Ci)).forEach(Ci=>this.form.removeControl(Ci)),qt.filter(Ci=>!Tt.includes(Ci)).forEach(Ci=>{const gs=this.config.config.find(Jt=>Jt.name===Ci);this.form.addControl(Ci,this.createControl(gs))})}}createGroup(){const Tt=this.fb.group({});return this.controls.forEach(qt=>Tt.addControl(qt.name,this.createControl(qt))),Tt}createControl(Tt){const{disabled:qt,validation:Ci,value:gs}=Tt;return this.fb.control({disabled:qt,value:gs},Ci)}handleSubmit(Tt){Tt.preventDefault(),Tt.stopPropagation(),this.submit.emit(this.value),"personalize.json"===this.file&&this.messageService.sendOrientation(this.value.orientation)}setDisabled(Tt,qt){this.form.controls[Tt]?this.form.controls[Tt][qt?"disable":"enable"]():this.config.config=this.config.config.map(Ci=>(Ci.name===Tt&&(Ci.disabled=qt),Ci))}setValueToForm(Tt,qt){if(qt&&qt.length>0)for(let Ci=0;Ci<qt.length;Ci++)for(let gs=0;gs<Tt.length;gs++)Tt[gs].type!==u.label&&this.setValue(Tt[gs].name,qt[Ci][Tt[gs].name],Tt[gs].type);else for(let Ci=0;Ci<Tt.length;Ci++)Tt[Ci].type!==u.label&&qt&&this.setValue(Tt[Ci].name,qt[Tt[Ci].name],Tt[Ci].type);this.loader=!1}setValue(Tt,qt,Ci){Tt&&this.form.controls[Tt]&&this.form.controls[Tt].setValue("switch"===Ci||"checkbox"===Ci?this.convertBooleanValue(qt):qt,{emitEvent:!0})}convertBooleanValue(Tt){return 1===Tt}refreshFormData(Tt){this.data=Tt,this.setValueToForm(this.config.config,Tt)}}return Kt.\u0275fac=function(Tt){return new(Tt||Kt)(i.Y36(Ue.qu),i.Y36(Zt.e),i.Y36($e.f),i.Y36(Li.gz),i.Y36(Lt.e))},Kt.\u0275cmp=i.Xpm({type:Kt,selectors:[["app-dynamic-forms"]],inputs:{config:"config",additionalInfo:"additionalInfo",path:"path",file:"file",hideActionButtons:"hideActionButtons",disableEdit:"disableEdit",partOfGrid:"partOfGrid",data:"data"},outputs:{submit:"submit"},exportAs:["dynamicForm"],features:[i.TTD],decls:2,vars:2,consts:[[4,"ngIf"],["style","height: 70vh",4,"ngIf"],[2,"height","70vh"],[3,"config","data","path","file","componentType","refreshFormData",4,"ngIf"],[3,"class",4,"ngIf"],[3,"config","data","path","file","componentType","refreshFormData"],[1,"card","card-form"],[1,"row","no-gutters"],[1,"col-lg-4","card-body"],["class","headings-color",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"col-lg-8","card-form__body","card-body"],[3,"formGroup","submit"],["dynamicField","",3,"config","group",4,"ngFor","ngForOf"],[1,"headings-color"],[1,"text-muted"],["dynamicField","",3,"config","group"],[3,"config",4,"ngFor","ngForOf"],[3,"config"]],template:function(Tt,qt){1&Tt&&(i.YNc(0,$i,3,2,"div",0),i.YNc(1,zt,2,1,"div",0)),2&Tt&&(i.Q6J("ngIf",qt.config&&!qt.config.childrens),i.xp6(1),i.Q6J("ngIf",qt.config.childrens))},dependencies:[ut.sg,ut.O5,Ue._Y,Ue.JL,Ue.sg,Be,Fe.R,Kt,xt.O]}),Kt})()},4523:(An,hs,rt)=>{rt.d(hs,{w:()=>aa});var i=rt(6895),u=rt(9039),Ue=rt(8743),Zt=rt(4006),$e=rt(7176),Li=rt(5299),Lt=rt(6256),ut=rt(8274);let Si=(()=>{class ae{}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275mod=ut.oAB({type:ae}),ae.\u0275inj=ut.cJS({imports:[i.ez,Zt.u5,Zt.UX,$e.oc,Li.hJ,Li.qm,Li.cc,Li.ow,Lt.Ps]}),ae})();var We=rt(3356),gt=rt(7725),E=rt(7628);function Oe(ae){return function(o){!function at(ae,o){o.forEach(function(l){Object.getOwnPropertyNames(l.prototype).forEach(function(d){(!ae.prototype.hasOwnProperty(d)||l.isFormBase)&&(ae.prototype[d]=l.prototype[d])})})}(o,ae)}}function ft(ae,o,l){var d={};if(ae&&ae.length){for(var y=0,C=ae;y<C.length;y++){var L=C[y];!0===l?(o.propCollection[L]=new ut.vpe(!1),o[L]=o.propCollection[L]):d[L]=new ut.vpe(!1)}!0!==l&&o.setProperties(d,!0)}}function jt(ae,o,l){var d=Object.keys(ae.registeredTemplate);if(d.length)for(var y=o&&o.filter(function(Hs){return!/\./g.test(Hs)}),C=0,L=y&&y||d;C<L.length;C++){var q=L[C];if(l&&l.length)for(var X=0;X<l.length;X++)for(var he=0;he<ae.registeredTemplate.template.length;he++)ae.registeredTemplate.template[he].rootNodes[0]===l[X]&&(Ve=ae.registeredTemplate[q])[he].destroy();else if(ae.registeredTemplate[q])for(var nt=0,It=ae.registeredTemplate[q];nt<It.length;nt++){var Ve;if(!(Ve=It[nt]).destroyed){if(Ve._view){var vt=Ve._view.renderer.parentNode(Ve.rootNodes[0]);if(!(0,E.le)(vt))for(he=0;he<Ve.rootNodes.length;he++)vt.appendChild(Ve.rootNodes[he])}Ve.destroy()}}delete ae.registeredTemplate[q]}for(var mi=function(Hs){Hs.instance&&Hs.instance.clearTemplate(o&&o.filter(function(Js){return!!new RegExp(Hs.name).test(Js)}))},Ni=0,Ki=ae.tagObjects;Ni<Ki.length;Ni++)mi(Ki[Ni])}function Nt(ae,o,l){for(var d=ae.replace(/\[/g,".").replace(/\]/g,"").split("."),y=l||{},C=0;C<d.length;C++){var L=d[C];C+1===d.length?y[L]=void 0===o?{}:o:void 0===y[L]&&(y[L]={}),y=y[L]}return y}var Di=/Ref$/,bt=function(){function ae(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return ae.prototype.ngOnInit=function(){this.registeredTemplate={};for(var o=0,l=this.tags;o<l.length;o++){var d=l[o],y=(0,E.NA)("child"+d.substring(0,1).toUpperCase()+d.substring(1),this);y&&this.tagObjects.push({instance:y,name:d})}for(var C=Object.keys(this),L=0;L<C.length;L++){var q=(0,E.NA)(C[L],this);"object"==typeof q&&q&&q.elementRef&&((0,E.NA)(-1!==C[L].indexOf("Ref")?C[L]:C[L]+"Ref",this)||(0,E.sO)(-1!==C[L].indexOf("Ref")?C[L]:C[L]+"Ref",q,this),(0,E.NA)("viewContainerRef",this)&&!(0,E.NA)("_viewContainerRef",q.elementRef.nativeElement)&&!(0,E.NA)("propName",q.elementRef.nativeElement)&&((0,E.sO)("_viewContainerRef",(0,E.NA)("viewContainerRef",this),q.elementRef.nativeElement),(0,E.sO)("propName",C[L].replace("Ref",""),q.elementRef.nativeElement)))}for(var X=0,he=C=(C=Object.keys(this)).filter(function(mi){return/Ref$/i.test(mi)});X<he.length;X++){var Ve=he[X].replace("Ref","");(0,E.sO)(Ve.replace("_","."),(0,E.NA)(Ve,this),this.propCollection)}var nt=Object.keys(this);if(this.directivePropList){for(var It=0;It<this.directivePropList.length;It++){var vt=this.directivePropList[It];-1!==nt.indexOf(vt)&&(0,E.NA)(vt,this)&&(0,E.sO)(vt,(0,E.NA)(vt,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},ae.prototype.registerEvents=function(o){ft(o,this,!0)},ae.prototype.ngOnChanges=function(o){for(var l=0,d=Object.keys(o);l<d.length;l++){var y=d[l];this.propCollection[y]=o[y].currentValue}this.isUpdated=!1,this.hasChanges=!0},ae.prototype.clearTemplate=function(o){jt(this,o)},ae.prototype.getProperties=function(){for(var o=0,l=this.tagObjects;o<l.length;o++){var d=l[o];this.propCollection[d.name]=d.instance.getProperties()}return this.propCollection},ae.prototype.isChanged=function(){var o=this.hasChanges;if(!(0,E.le)(this.propCollection[this.property]))for(var d=Object.keys(this.propCollection[this.property][0]),y=0;y<d.length;y++)if(!(0,E.le)(this.propCollection[d[y]])){var C=(0,E.NA)(d[y],this),L=this.propCollection[this.property][0][d[y]];!(0,E.le)(C)&&this.propCollection[d[y]]!==C&&L!==C&&((0,E.sO)(d[y],C,this.propCollection[this.property][0]),(0,E.sO)(d[y],C,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var q=0,X=this.tagObjects;q<X.length;q++)o=o||X[q].instance.hasChanges;return o||this.hasChanges},ae.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var o=Object.keys(this),l=0,d=o=o.filter(function(L){return Di.test(L)});l<d.length;l++){var C=d[l].replace("Ref","");(0,E.sO)(C.replace("_","."),(0,E.NA)(C,this),this.propCollection)}},ae.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},ae.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},ae.prototype.ngOnDestroy=function(){this.directivePropList=[]},ae}(),Rt=function(){function ae(o){this.list=[],this.hasChanges=!1,this.propertyName=o}return ae.prototype.ngOnInit=function(){this.isInitChanges=!0},ae.prototype.ngAfterContentInit=function(){var o=this,l=0;this.list=this.children.map(function(d){return d.dirIndex=l++,d.property=o.propertyName,d}),this.hasChanges=!0},ae.prototype.getProperties=function(){for(var o=[],l=0,d=this.list;l<d.length;l++)o.push(d[l].getProperties());return o},ae.prototype.isChanged=function(){var o=this,l=!1,d=0,y=!1,C=this.children.map(function(He){return He});if(this.list.length===this.children.length)for(var L=0;L<this.list.length;L++)this.list[L].propCollection.dataSource&&this.list[L].dataSource&&this.list[L].propCollection.dataSource!==this.list[L].dataSource&&(this.list[L].propCollection.dataSource=this.list[L].dataSource,this.list[L].hasChanges=!0),this.list[L].hasChanges!==C[L].hasChanges&&(y=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!y)||null,this.hasNewChildren&&(this.list=this.children.map(function(He){return He.dirIndex=d++,He.property=o.propertyName,He}));for(var q=0,X=this.list;q<X.length;q++)l=l||X[q].hasChanges;return!!this.list.length&&l},ae.prototype.clearTemplate=function(o){for(var l=this,d=0,y=this.list;d<y.length;d++)y[d].clearTemplate(o&&o.map(function(L){return new RegExp(l.propertyName).test(L)?L.replace(l.propertyName+".",""):L}))},ae.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var o=0;o<this.list.length;o++)(0,E.NA)("childColumns",this.list[o])&&"columns"===(0,E.NA)("property",this.list[o])&&(0,E.sO)("columns",(0,E.NA)("childColumns",this.list[o]).getProperties(),this.list[o].propCollection),this.list[o].isUpdated=!0},ae.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},ae.prototype.ngOnDestroy=function(){this.list=[]},ae}(),J=function(){function ae(){this.isProtectedOnChange=!0,this.isFormInit=!0}return ae.prototype.saveChanges=function(o,l,d){if(!this.isProtectedOnChange){this.oldProperties[o]=d,this.changedProperties[o]=l,this.finalUpdate();var y=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(y)}}},ae.prototype.ngOnInit=function(o){var l=o||this;l.registeredTemplate={},l.ngBoundedEvents={},l.isAngular=!0,l.isFormInit=!0,o&&(this.tags=o.tags),l.tags=this.tags||[],l.complexTemplate=this.complexTemplate||[],l.tagObjects=[],l.ngAttr=this.getAngularAttr(l.element),l.createElement=function(mi,Ni){var Ki=l.srenderer?l.srenderer.createElement(mi):(0,E.az)(mi);return typeof Ni>"u"||(Ki.innerHTML=Ni.innerHTML?Ni.innerHTML:"",void 0!==Ni.className&&(Ki.className=Ni.className),void 0!==Ni.id&&(Ki.id=Ni.id),void 0!==Ni.styles&&Ki.setAttribute("style",Ni.styles),void 0!==l.ngAttr&&Ki.setAttribute(l.ngAttr,""),void 0!==Ni.attrs&&(0,E.Y4)(Ki,Ni.attrs)),Ki};for(var d=0,y=l.tags;d<y.length;d++){var C=y[d],L={instance:(0,E.NA)("child"+C.substring(0,1).toUpperCase()+C.substring(1),l),name:C};l.tagObjects.push(L)}for(var q=Object.keys(l),X=0;X<q.length;X++){var he=(0,E.NA)(q[X],l);"object"==typeof he&&he&&he.elementRef&&("object"==typeof he&&he&&he.elementRef&&-1!==q[X].indexOf("_")&&-1===q[X].indexOf("Ref")&&(0,E.sO)(q[X]+"Ref",he,l),l.viewContainerRef&&!(0,E.NA)("_viewContainerRef",he.elementRef.nativeElement)&&!(0,E.NA)("propName",he.elementRef.nativeElement)&&((0,E.sO)("_viewContainerRef",l.viewContainerRef,he.elementRef.nativeElement),(0,E.sO)("propName",q[X].replace("Ref",""),he.elementRef.nativeElement)))}for(var He=0,Ve=q=(q=Object.keys(l)).filter(function(mi){return/Ref$/i.test(mi)&&/\_/i.test(mi)});He<Ve.length;He++){var It=Ve[He].replace("Ref",""),vt={};(0,E.sO)(It.replace("_","."),(0,E.NA)(It,l),vt),l.setProperties(vt,!0)}},ae.prototype.getAngularAttr=function(o){for(var y,l=o.attributes,d=l.length,C=0;C<d;C++)/_ngcontent/g.test(l[C].name)&&(y=l[C].name);return y},ae.prototype.ngAfterViewInit=function(o){var l=o||this;/ejs-tab|ejs-accordion/g.test(l.ngEle.nativeElement.outerHTML)&&(l.ngEle.nativeElement.style.visibility="hidden");for(var y=Object.keys(l),C=0,L=y=y.filter(function(he){return/Ref$/i.test(he)});C<L.length;C++){var X=L[C].replace("Ref","");(0,E.sO)(X.replace("_","."),(0,E.NA)(X+"Ref",l),l)}setTimeout(function(){(typeof window<"u"&&l.element||l.getModuleName().includes("btn"))&&(l.appendTo(l.element),l.ngEle.nativeElement.style.visibility="")})},ae.prototype.ngOnDestroy=function(o){var l=o||this;setTimeout(function(){typeof window<"u"&&l.element.classList.contains("e-control")&&(l.destroy(),l.clearTemplate(null),l.ngBoundedEvents={},l.tagObjects={},l.ngEle=null)})},ae.prototype.clearTemplate=function(o,l){jt(this,o,l)},ae.prototype.ngAfterContentChecked=function(o){for(var l=o||this,d=0,y=l.tagObjects;d<y.length;d++){var C=y[d];if(!(0,E.o8)(C.instance)&&(C.instance.isInitChanges||C.instance.hasChanges||C.instance.hasNewChildren))if(C.instance.isInitChanges){var L={},q=void 0;(X=(0,E.NA)("instance.list",C))&&X.length&&(q=X[0].directivePropList);var he=!0;if(l.getModuleName&&"gantt"===l.getModuleName()&&(he=!1),q&&he&&-1===q.indexOf(C.instance.propertyName))for(var He=Object.keys(C.instance.list[0].propCollection),Ve=0;Ve<C.instance.list.length;Ve++){C.instance.list[Ve].propCollection[C.instance.propertyName]=[];for(var nt={},It=0;It<He.length;It++)nt[vt=He[It]]=C.instance.list[Ve].propCollection[vt];for(var mi=0;mi<C.instance.list[Ve].tags.length;mi++){var Ni=C.instance.list[Ve].tags[mi],Ki=(0,E.NA)("child"+Ni.substring(0,1).toUpperCase()+Ni.substring(1),C.instance.list[Ve]);if(Ki){var Ts=C.instance.list[Ve]["child"+Ni.substring(0,1).toUpperCase()+Ni.substring(1)];if(Ts)for(var Hs=0;Hs<Ts.list.length;Hs++){var Js=Ts.list[0].tags[0];if(Js){var Fn=(0,E.NA)("child"+Js.substring(0,1).toUpperCase()+Js.substring(1),Ts.list[Hs]);Fn&&Ts.list[Hs].tagObjects.push({instance:Fn,name:Js})}}C.instance.list[Ve].tagObjects.push({instance:Ki,name:Ni})}}C.instance.list[Ve].propCollection[C.instance.propertyName].push(nt)}L[C.name]=C.instance.getProperties(),l.setProperties(L,C.instance.isInitChanges)}else{(l[C.name].length!==C.instance.list.length||/diagram|tab/.test(l.getModuleName()))&&(l[C.name]=C.instance.list);for(var Hn=0,Fr=C.instance.list;Hn<Fr.length;Hn++){var X,lo=C.instance.list.indexOf(X=Fr[Hn]),kr=(0,E.NA)(C.name,l)[lo],Mo=Object.keys(kr);if(Mo=Mo.filter(function(Ba){return/Ref$/i.test(Ba)}),kr.properties&&0!==Object.keys(kr.properties).length)for(var ul=0,Ra=Mo;ul<Ra.length;ul++){var vt;vt=(vt=Ra[ul]).replace(/Ref/,""),kr.properties[vt]=kr.properties[vt]?kr.properties[vt]:kr.propCollection[vt]}!(0,E.o8)(kr)&&!(0,E.o8)(kr.setProperties)&&(/diagram|DashboardLayout/.test(l.getModuleName())?kr.setProperties(X.getProperties(),!0):kr.setProperties(X.getProperties())),X.isUpdated=!0}}}},ae.prototype.registerEvents=function(o){ft(o,this)},ae.prototype.twoWaySetter=function(o,l){var d=(0,E.NA)(l,this.properties);d!==o&&(this.saveChanges(l,o,d),(0,E.sO)(l,(0,E.le)(o)?null:o,this.properties),(0,E.NA)(l+"Change",this).emit(o))},ae.prototype.addTwoWay=function(o){for(var l=this,d=function(X){(0,E.NA)(X,y),Object.defineProperty(y,X,{get:function(){return(0,E.NA)(X,l.properties)},set:function(he){return l.twoWaySetter(he,X)}}),(0,E.sO)(X+"Change",new ut.vpe,y)},y=this,C=0,L=o;C<L.length;C++)d(L[C])},ae.prototype.addEventListener=function(o,l){var d=(0,E.NA)(o,this);(0,E.o8)(d)||(this.ngBoundedEvents[o]||(this.ngBoundedEvents[o]=new Map),this.ngBoundedEvents[o].set(l,d.subscribe(l)))},ae.prototype.removeEventListener=function(o,l){var d=(0,E.NA)(o,this);(0,E.o8)(d)||this.ngBoundedEvents[o].get(l).unsubscribe()},ae.prototype.trigger=function(o,l,d){var y=(0,E.NA)(o,this),C=this.isProtectedOnChange;this.isProtectedOnChange=!1,l&&(l.name=o),(0,E.o8)(y)||y.next(l);var L=(0,E.NA)("local"+o.charAt(0).toUpperCase()+o.slice(1),this);(0,E.o8)(L)||L.call(this,l),this.isProtectedOnChange=C,d&&(this.preventChange=this.isPreventChange,d.call(this,l)),this.isPreventChange=!1},ae}(),Ne=(function(){function ae(){}ae.prototype.propagateChange=function(o){},ae.prototype.propagateTouch=function(){},ae.prototype.localChange=function(o){var l=void 0===o.checked?o.value:o.checked;this.objCheck=(0,E.Kn)(l),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(l),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==l&&(this.propagateChange(l),this.angularValue=l)):l!==this.angularValue&&void 0!==this.propagateChange&&void 0!==l&&(this.propagateChange(l),this.angularValue=l)},ae.prototype.registerOnChange=function(o){this.propagateChange=o},ae.prototype.registerOnTouched=function(o){this.propagateTouch=o},ae.prototype.twoWaySetter=function(o,l){var d=this.oldValue||(0,E.NA)(l,this.properties),y=this.inputElement||this.element;y&&d===o&&this.value===o&&(void 0===y.value||""===y.value)||(this.saveChanges(l,o,d),(0,E.sO)(l,(0,E.le)(o)?null:o,this.properties),(0,E.NA)(l+"Change",this).emit(o))},ae.prototype.ngAfterViewInit=function(o){var l=o||this;if(typeof window<"u"){l.appendTo(l.element);var d=l.inputElement||l.element;d.addEventListener("focus",l.ngOnFocus.bind(l)),d.addEventListener("blur",l.ngOnBlur.bind(l))}this.isFormInit=!1},ae.prototype.setDisabledState=function(o){this.enabled=!o,this.disabled=o},ae.prototype.writeValue=function(o){void 0===this.checked?this.value=o:this.ngEle&&(this.checked="boolean"==typeof o?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?o===this.value:o:o===this.value),this.angularValue=o,this.isUpdated=!0,this.preventChange=!this.isFormInit},ae.prototype.ngOnFocus=function(o){!0!==this.skipFromEvent&&this.focus.emit(o)},ae.prototype.ngOnBlur=function(o){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(o)},ae.isFormBase=!0}(),(0,E.aR)());function be(ae){return function(o,l){var d={set:Se(l),get:ue(l,ae),enumerable:!0,configurable:!0};Object.defineProperty(o,l,d)}}function Se(ae){return function(o){void 0!==o&&((0,E.sO)(ae+"Ref",o,this),"string"!=typeof o?(o.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,o.elementRef.nativeElement.propName=ae):this.saveChanges&&(this.saveChanges(ae,o,void 0),this.dataBind()))}}function ue(ae,o){return function(){return(0,E.NA)(ae+"Ref",this)||o}}(0,E.Wr)({compile:function ce(ae,o){if("string"==typeof ae)return Ne(ae,o);var l=ae.elementRef.nativeElement._viewContainerRef,d=ae.elementRef.nativeElement.propName;return function(y,C,L){var X=l||C.viewContainerRef,he=X.createEmbeddedView(ae,{$implicit:y});he.markForCheck();var He=C&&C.registeredTemplate?C.registeredTemplate:(0,E.NA)("currentInstance.registeredTemplate",X);return typeof He[L=L&&C.registeredTemplate?L:d]>"u"&&(He[L]=[]),He[L].push(he),he.rootNodes}}});var _e=rt(5774);const lt=["footerTemplate"],Xe=["header"],B=["content"],de=["*"];let Be=["buttonModel","isFlat","type"],Fe=["click"],xt=(()=>{class ae extends bt{constructor(l){super(),this.viewContainerRef=l,Nt("currentInstance",this,this.viewContainerRef),this.registerEvents(Fe),this.directivePropList=Be}}return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.s_b))},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-dialogbutton"]],inputs:{buttonModel:"buttonModel",isFlat:"isFlat",type:"type"},outputs:{click:"click"},features:[ut.qOj]}),ae})(),$t=(()=>{class ae extends Rt{constructor(){super("buttons")}}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-buttons"]],contentQueries:function(l,d,y){if(1&l&&ut.Suo(y,xt,4),2&l){let C;ut.iGM(C=ut.CRH())&&(d.children=C)}},features:[ut.qOj]}),ae})();var ji=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C},is=function(ae,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ae,o)};const ui=["beforeClose","beforeOpen","beforeSanitizeHtml","close","created","destroyed","drag","dragStart","dragStop","open","overlayClick","resizeStart","resizeStop","resizing","visibleChange"],Ut=["visible"];let oi=(()=>{let ae=class extends _e.Vq{constructor(l,d,y,C){super(),this.ngEle=l,this.srenderer=d,this.viewContainerRef=y,this.injector=C,this.tags=["buttons"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(ui),this.addTwoWay.call(this,Ut),Nt("currentInstance",this,this.viewContainerRef),this.containerContext=new J}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childButtons,this.containerContext.ngAfterContentChecked(this)}};return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.SBq),ut.Y36(ut.Qsj),ut.Y36(ut.s_b),ut.Y36(ut.zs3))},ae.\u0275cmp=ut.Xpm({type:ae,selectors:[["ejs-dialog"]],contentQueries:function(l,d,y){if(1&l&&(ut.Suo(y,lt,5),ut.Suo(y,Xe,5),ut.Suo(y,B,5),ut.Suo(y,$t,5)),2&l){let C;ut.iGM(C=ut.CRH())&&(d.footerTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.header=C.first),ut.iGM(C=ut.CRH())&&(d.content=C.first),ut.iGM(C=ut.CRH())&&(d.childButtons=C.first)}},inputs:{allowDragging:"allowDragging",animationSettings:"animationSettings",buttons:"buttons",closeOnEscape:"closeOnEscape",content:"content",cssClass:"cssClass",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableResize:"enableResize",enableRtl:"enableRtl",footerTemplate:"footerTemplate",header:"header",height:"height",isModal:"isModal",locale:"locale",minHeight:"minHeight",position:"position",resizeHandles:"resizeHandles",showCloseIcon:"showCloseIcon",target:"target",visible:"visible",width:"width",zIndex:"zIndex"},outputs:{beforeClose:"beforeClose",beforeOpen:"beforeOpen",beforeSanitizeHtml:"beforeSanitizeHtml",close:"close",created:"created",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",open:"open",overlayClick:"overlayClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",visibleChange:"visibleChange"},features:[ut.qOj],ngContentSelectors:de,decls:1,vars:0,template:function(l,d){1&l&&(ut.F$t(),ut.Hsn(0))},encapsulation:2,changeDetection:0}),ji([be(),is("design:type",Object)],ae.prototype,"footerTemplate",void 0),ji([be(),is("design:type",Object)],ae.prototype,"header",void 0),ji([be(),is("design:type",Object)],ae.prototype,"content",void 0),ae=ji([Oe([J]),is("design:paramtypes",[ut.SBq,ut.Qsj,ut.s_b,ut.zs3])],ae),ae})(),us=(()=>{class ae{}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275mod=ut.oAB({type:ae}),ae.\u0275inj=ut.cJS({imports:[i.ez]}),ae})(),Us=(()=>{class ae{}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275mod=ut.oAB({type:ae}),ae.\u0275inj=ut.cJS({imports:[i.ez,us,us]}),ae})();var $i=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C},et=function(ae,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ae,o)};const Xt=["afterClose","afterOpen","beforeClose","beforeCollision","beforeOpen","beforeRender","created","destroyed"],Kt=[""];let ni=(()=>{let ae=class extends _e.u{constructor(l,d,y,C){super(),this.ngEle=l,this.srenderer=d,this.viewContainerRef=y,this.injector=C,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Xt),this.addTwoWay.call(this,Kt),Nt("currentInstance",this,this.viewContainerRef),this.containerContext=new J}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.SBq),ut.Y36(ut.Qsj),ut.Y36(ut.s_b),ut.Y36(ut.zs3))},ae.\u0275cmp=ut.Xpm({type:ae,selectors:[["ejs-tooltip"]],contentQueries:function(l,d,y){if(1&l&&ut.Suo(y,B,5),2&l){let C;ut.iGM(C=ut.CRH())&&(d.content=C.first)}},inputs:{animation:"animation",closeDelay:"closeDelay",container:"container",content:"content",cssClass:"cssClass",enableHtmlParse:"enableHtmlParse",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",isSticky:"isSticky",locale:"locale",mouseTrail:"mouseTrail",offsetX:"offsetX",offsetY:"offsetY",openDelay:"openDelay",opensOn:"opensOn",position:"position",showTipPointer:"showTipPointer",target:"target",tipPointerPosition:"tipPointerPosition",width:"width",windowCollision:"windowCollision"},outputs:{afterClose:"afterClose",afterOpen:"afterOpen",beforeClose:"beforeClose",beforeCollision:"beforeCollision",beforeOpen:"beforeOpen",beforeRender:"beforeRender",created:"created",destroyed:"destroyed"},features:[ut.qOj],ngContentSelectors:de,decls:1,vars:0,template:function(l,d){1&l&&(ut.F$t(),ut.Hsn(0))},encapsulation:2,changeDetection:0}),ae})();$i([be(),et("design:type",Object)],ni.prototype,"content",void 0),ni=$i([Oe([J]),et("design:paramtypes",[ut.SBq,ut.Qsj,ut.s_b,ut.zs3])],ni);const Ci=["ejDialog"];function gs(ae,o){1&ae&&ut.Hsn(0)}const Jt=["*"];let Wt=(()=>{class ae{constructor(){this.closeEventEmitter=new ut.vpe}ngOnInit(){this.returnWidth(),setTimeout(()=>{this.ejDialog.show()},50)}onResize(l){this.returnWidth()}closeModal(){this.closeEventEmitter.emit()}returnWidth(){return window.innerWidth>992?"35%":"100%"}}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275cmp=ut.Xpm({type:ae,selectors:[["app-dialog-modal"]],viewQuery:function(l,d){if(1&l&&ut.Gf(Ci,5),2&l){let y;ut.iGM(y=ut.CRH())&&(d.ejDialog=y.first)}},inputs:{show:"show",width:"width"},outputs:{closeEventEmitter:"closeEventEmitter"},ngContentSelectors:Jt,decls:4,vars:2,consts:[["id","dialog","isModal","true","showCloseIcon","true",3,"width","visible","close"],["ejDialog",""],["content",""]],template:function(l,d){1&l&&(ut.F$t(),ut.TgZ(0,"ejs-dialog",0,1),ut.NdJ("close",function(){return d.closeModal()}),ut.YNc(2,gs,1,0,"ng-template",null,2,ut.W1O),ut.qZA()),2&l&&ut.Q6J("width",d.width?d.width:d.returnWidth())("visible",!1)},dependencies:[oi]}),ae})();var At=rt(4954);function Oi(ae){return function(o){!function li(ae,o){o.forEach(function(l){Object.getOwnPropertyNames(l.prototype).forEach(function(d){(!ae.prototype.hasOwnProperty(d)||l.isFormBase)&&(ae.prototype[d]=l.prototype[d])})})}(o,ae)}}function Gt(ae,o,l){var d={};if(ae&&ae.length){for(var y=0,C=ae;y<C.length;y++){var L=C[y];!0===l?(o.propCollection[L]=new ut.vpe(!1),o[L]=o.propCollection[L]):d[L]=new ut.vpe(!1)}!0!==l&&o.setProperties(d,!0)}}function Dt(ae,o,l){var d=Object.keys(ae.registeredTemplate);if(d.length)for(var y=o&&o.filter(function(Hs){return!/\./g.test(Hs)}),C=0,L=y&&y||d;C<L.length;C++){var q=L[C];if(l&&l.length)for(var X=0;X<l.length;X++)for(var he=0;he<ae.registeredTemplate.template.length;he++)ae.registeredTemplate.template[he].rootNodes[0]===l[X]&&(Ve=ae.registeredTemplate[q])[he].destroy();else if(ae.registeredTemplate[q])for(var nt=0,It=ae.registeredTemplate[q];nt<It.length;nt++){var Ve;if(!(Ve=It[nt]).destroyed){if(Ve._view){var vt=Ve._view.renderer.parentNode(Ve.rootNodes[0]);if(!(0,E.le)(vt))for(he=0;he<Ve.rootNodes.length;he++)vt.appendChild(Ve.rootNodes[he])}Ve.destroy()}}delete ae.registeredTemplate[q]}for(var mi=function(Hs){Hs.instance&&Hs.instance.clearTemplate(o&&o.filter(function(Js){return!!new RegExp(Hs.name).test(Js)}))},Ni=0,Ki=ae.tagObjects;Ni<Ki.length;Ni++)mi(Ki[Ni])}function Pt(ae,o,l){for(var d=ae.replace(/\[/g,".").replace(/\]/g,"").split("."),y=l||{},C=0;C<d.length;C++){var L=d[C];C+1===d.length?y[L]=void 0===o?{}:o:void 0===y[L]&&(y[L]={}),y=y[L]}return y}var di=/Ref$/,ot=function(){function ae(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return ae.prototype.ngOnInit=function(){this.registeredTemplate={};for(var o=0,l=this.tags;o<l.length;o++){var d=l[o],y=(0,E.NA)("child"+d.substring(0,1).toUpperCase()+d.substring(1),this);y&&this.tagObjects.push({instance:y,name:d})}for(var C=Object.keys(this),L=0;L<C.length;L++){var q=(0,E.NA)(C[L],this);"object"==typeof q&&q&&q.elementRef&&((0,E.NA)(-1!==C[L].indexOf("Ref")?C[L]:C[L]+"Ref",this)||(0,E.sO)(-1!==C[L].indexOf("Ref")?C[L]:C[L]+"Ref",q,this),(0,E.NA)("viewContainerRef",this)&&!(0,E.NA)("_viewContainerRef",q.elementRef.nativeElement)&&!(0,E.NA)("propName",q.elementRef.nativeElement)&&((0,E.sO)("_viewContainerRef",(0,E.NA)("viewContainerRef",this),q.elementRef.nativeElement),(0,E.sO)("propName",C[L].replace("Ref",""),q.elementRef.nativeElement)))}for(var X=0,he=C=(C=Object.keys(this)).filter(function(mi){return/Ref$/i.test(mi)});X<he.length;X++){var Ve=he[X].replace("Ref","");(0,E.sO)(Ve.replace("_","."),(0,E.NA)(Ve,this),this.propCollection)}var nt=Object.keys(this);if(this.directivePropList){for(var It=0;It<this.directivePropList.length;It++){var vt=this.directivePropList[It];-1!==nt.indexOf(vt)&&(0,E.NA)(vt,this)&&(0,E.sO)(vt,(0,E.NA)(vt,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},ae.prototype.registerEvents=function(o){Gt(o,this,!0)},ae.prototype.ngOnChanges=function(o){for(var l=0,d=Object.keys(o);l<d.length;l++){var y=d[l];this.propCollection[y]=o[y].currentValue}this.isUpdated=!1,this.hasChanges=!0},ae.prototype.clearTemplate=function(o){Dt(this,o)},ae.prototype.getProperties=function(){for(var o=0,l=this.tagObjects;o<l.length;o++){var d=l[o];this.propCollection[d.name]=d.instance.getProperties()}return this.propCollection},ae.prototype.isChanged=function(){var o=this.hasChanges;if(!(0,E.le)(this.propCollection[this.property]))for(var d=Object.keys(this.propCollection[this.property][0]),y=0;y<d.length;y++)if(!(0,E.le)(this.propCollection[d[y]])){var C=(0,E.NA)(d[y],this),L=this.propCollection[this.property][0][d[y]];!(0,E.le)(C)&&this.propCollection[d[y]]!==C&&L!==C&&((0,E.sO)(d[y],C,this.propCollection[this.property][0]),(0,E.sO)(d[y],C,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var q=0,X=this.tagObjects;q<X.length;q++)o=o||X[q].instance.hasChanges;return o||this.hasChanges},ae.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var o=Object.keys(this),l=0,d=o=o.filter(function(L){return di.test(L)});l<d.length;l++){var C=d[l].replace("Ref","");(0,E.sO)(C.replace("_","."),(0,E.NA)(C,this),this.propCollection)}},ae.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},ae.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},ae.prototype.ngOnDestroy=function(){this.directivePropList=[]},ae}(),hi=function(){function ae(o){this.list=[],this.hasChanges=!1,this.propertyName=o}return ae.prototype.ngOnInit=function(){this.isInitChanges=!0},ae.prototype.ngAfterContentInit=function(){var o=this,l=0;this.list=this.children.map(function(d){return d.dirIndex=l++,d.property=o.propertyName,d}),this.hasChanges=!0},ae.prototype.getProperties=function(){for(var o=[],l=0,d=this.list;l<d.length;l++)o.push(d[l].getProperties());return o},ae.prototype.isChanged=function(){var o=this,l=!1,d=0,y=!1,C=this.children.map(function(He){return He});if(this.list.length===this.children.length)for(var L=0;L<this.list.length;L++)this.list[L].propCollection.dataSource&&this.list[L].dataSource&&this.list[L].propCollection.dataSource!==this.list[L].dataSource&&(this.list[L].propCollection.dataSource=this.list[L].dataSource,this.list[L].hasChanges=!0),this.list[L].hasChanges!==C[L].hasChanges&&(y=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!y)||null,this.hasNewChildren&&(this.list=this.children.map(function(He){return He.dirIndex=d++,He.property=o.propertyName,He}));for(var q=0,X=this.list;q<X.length;q++)l=l||X[q].hasChanges;return!!this.list.length&&l},ae.prototype.clearTemplate=function(o){for(var l=this,d=0,y=this.list;d<y.length;d++)y[d].clearTemplate(o&&o.map(function(L){return new RegExp(l.propertyName).test(L)?L.replace(l.propertyName+".",""):L}))},ae.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var o=0;o<this.list.length;o++)(0,E.NA)("childColumns",this.list[o])&&"columns"===(0,E.NA)("property",this.list[o])&&(0,E.sO)("columns",(0,E.NA)("childColumns",this.list[o]).getProperties(),this.list[o].propCollection),this.list[o].isUpdated=!0},ae.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},ae.prototype.ngOnDestroy=function(){this.list=[]},ae}(),Ui=function(){function ae(){this.isProtectedOnChange=!0,this.isFormInit=!0}return ae.prototype.saveChanges=function(o,l,d){if(!this.isProtectedOnChange){this.oldProperties[o]=d,this.changedProperties[o]=l,this.finalUpdate();var y=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(y)}}},ae.prototype.ngOnInit=function(o){var l=o||this;l.registeredTemplate={},l.ngBoundedEvents={},l.isAngular=!0,l.isFormInit=!0,o&&(this.tags=o.tags),l.tags=this.tags||[],l.complexTemplate=this.complexTemplate||[],l.tagObjects=[],l.ngAttr=this.getAngularAttr(l.element),l.createElement=function(mi,Ni){var Ki=l.srenderer?l.srenderer.createElement(mi):(0,E.az)(mi);return typeof Ni>"u"||(Ki.innerHTML=Ni.innerHTML?Ni.innerHTML:"",void 0!==Ni.className&&(Ki.className=Ni.className),void 0!==Ni.id&&(Ki.id=Ni.id),void 0!==Ni.styles&&Ki.setAttribute("style",Ni.styles),void 0!==l.ngAttr&&Ki.setAttribute(l.ngAttr,""),void 0!==Ni.attrs&&(0,E.Y4)(Ki,Ni.attrs)),Ki};for(var d=0,y=l.tags;d<y.length;d++){var C=y[d],L={instance:(0,E.NA)("child"+C.substring(0,1).toUpperCase()+C.substring(1),l),name:C};l.tagObjects.push(L)}for(var q=Object.keys(l),X=0;X<q.length;X++){var he=(0,E.NA)(q[X],l);"object"==typeof he&&he&&he.elementRef&&("object"==typeof he&&he&&he.elementRef&&-1!==q[X].indexOf("_")&&-1===q[X].indexOf("Ref")&&(0,E.sO)(q[X]+"Ref",he,l),l.viewContainerRef&&!(0,E.NA)("_viewContainerRef",he.elementRef.nativeElement)&&!(0,E.NA)("propName",he.elementRef.nativeElement)&&((0,E.sO)("_viewContainerRef",l.viewContainerRef,he.elementRef.nativeElement),(0,E.sO)("propName",q[X].replace("Ref",""),he.elementRef.nativeElement)))}for(var He=0,Ve=q=(q=Object.keys(l)).filter(function(mi){return/Ref$/i.test(mi)&&/\_/i.test(mi)});He<Ve.length;He++){var It=Ve[He].replace("Ref",""),vt={};(0,E.sO)(It.replace("_","."),(0,E.NA)(It,l),vt),l.setProperties(vt,!0)}},ae.prototype.getAngularAttr=function(o){for(var y,l=o.attributes,d=l.length,C=0;C<d;C++)/_ngcontent/g.test(l[C].name)&&(y=l[C].name);return y},ae.prototype.ngAfterViewInit=function(o){var l=o||this;/ejs-tab|ejs-accordion/g.test(l.ngEle.nativeElement.outerHTML)&&(l.ngEle.nativeElement.style.visibility="hidden");for(var y=Object.keys(l),C=0,L=y=y.filter(function(he){return/Ref$/i.test(he)});C<L.length;C++){var X=L[C].replace("Ref","");(0,E.sO)(X.replace("_","."),(0,E.NA)(X+"Ref",l),l)}setTimeout(function(){(typeof window<"u"&&l.element||l.getModuleName().includes("btn"))&&(l.appendTo(l.element),l.ngEle.nativeElement.style.visibility="")})},ae.prototype.ngOnDestroy=function(o){var l=o||this;setTimeout(function(){typeof window<"u"&&l.element.classList.contains("e-control")&&(l.destroy(),l.clearTemplate(null),l.ngBoundedEvents={},l.tagObjects={},l.ngEle=null)})},ae.prototype.clearTemplate=function(o,l){Dt(this,o,l)},ae.prototype.ngAfterContentChecked=function(o){for(var l=o||this,d=0,y=l.tagObjects;d<y.length;d++){var C=y[d];if(!(0,E.o8)(C.instance)&&(C.instance.isInitChanges||C.instance.hasChanges||C.instance.hasNewChildren))if(C.instance.isInitChanges){var L={},q=void 0;(X=(0,E.NA)("instance.list",C))&&X.length&&(q=X[0].directivePropList);var he=!0;if(l.getModuleName&&"gantt"===l.getModuleName()&&(he=!1),q&&he&&-1===q.indexOf(C.instance.propertyName))for(var He=Object.keys(C.instance.list[0].propCollection),Ve=0;Ve<C.instance.list.length;Ve++){C.instance.list[Ve].propCollection[C.instance.propertyName]=[];for(var nt={},It=0;It<He.length;It++)nt[vt=He[It]]=C.instance.list[Ve].propCollection[vt];for(var mi=0;mi<C.instance.list[Ve].tags.length;mi++){var Ni=C.instance.list[Ve].tags[mi],Ki=(0,E.NA)("child"+Ni.substring(0,1).toUpperCase()+Ni.substring(1),C.instance.list[Ve]);if(Ki){var Ts=C.instance.list[Ve]["child"+Ni.substring(0,1).toUpperCase()+Ni.substring(1)];if(Ts)for(var Hs=0;Hs<Ts.list.length;Hs++){var Js=Ts.list[0].tags[0];if(Js){var Fn=(0,E.NA)("child"+Js.substring(0,1).toUpperCase()+Js.substring(1),Ts.list[Hs]);Fn&&Ts.list[Hs].tagObjects.push({instance:Fn,name:Js})}}C.instance.list[Ve].tagObjects.push({instance:Ki,name:Ni})}}C.instance.list[Ve].propCollection[C.instance.propertyName].push(nt)}L[C.name]=C.instance.getProperties(),l.setProperties(L,C.instance.isInitChanges)}else{(l[C.name].length!==C.instance.list.length||/diagram|tab/.test(l.getModuleName()))&&(l[C.name]=C.instance.list);for(var Hn=0,Fr=C.instance.list;Hn<Fr.length;Hn++){var X,lo=C.instance.list.indexOf(X=Fr[Hn]),kr=(0,E.NA)(C.name,l)[lo],Mo=Object.keys(kr);if(Mo=Mo.filter(function(Ba){return/Ref$/i.test(Ba)}),kr.properties&&0!==Object.keys(kr.properties).length)for(var ul=0,Ra=Mo;ul<Ra.length;ul++){var vt;vt=(vt=Ra[ul]).replace(/Ref/,""),kr.properties[vt]=kr.properties[vt]?kr.properties[vt]:kr.propCollection[vt]}!(0,E.o8)(kr)&&!(0,E.o8)(kr.setProperties)&&(/diagram|DashboardLayout/.test(l.getModuleName())?kr.setProperties(X.getProperties(),!0):kr.setProperties(X.getProperties())),X.isUpdated=!0}}}},ae.prototype.registerEvents=function(o){Gt(o,this)},ae.prototype.twoWaySetter=function(o,l){var d=(0,E.NA)(l,this.properties);d!==o&&(this.saveChanges(l,o,d),(0,E.sO)(l,(0,E.le)(o)?null:o,this.properties),(0,E.NA)(l+"Change",this).emit(o))},ae.prototype.addTwoWay=function(o){for(var l=this,d=function(X){(0,E.NA)(X,y),Object.defineProperty(y,X,{get:function(){return(0,E.NA)(X,l.properties)},set:function(he){return l.twoWaySetter(he,X)}}),(0,E.sO)(X+"Change",new ut.vpe,y)},y=this,C=0,L=o;C<L.length;C++)d(L[C])},ae.prototype.addEventListener=function(o,l){var d=(0,E.NA)(o,this);(0,E.o8)(d)||(this.ngBoundedEvents[o]||(this.ngBoundedEvents[o]=new Map),this.ngBoundedEvents[o].set(l,d.subscribe(l)))},ae.prototype.removeEventListener=function(o,l){var d=(0,E.NA)(o,this);(0,E.o8)(d)||this.ngBoundedEvents[o].get(l).unsubscribe()},ae.prototype.trigger=function(o,l,d){var y=(0,E.NA)(o,this),C=this.isProtectedOnChange;this.isProtectedOnChange=!1,l&&(l.name=o),(0,E.o8)(y)||y.next(l);var L=(0,E.NA)("local"+o.charAt(0).toUpperCase()+o.slice(1),this);(0,E.o8)(L)||L.call(this,l),this.isProtectedOnChange=C,d&&(this.preventChange=this.isPreventChange,d.call(this,l)),this.isPreventChange=!1},ae}(),bs=(function(){function ae(){}ae.prototype.propagateChange=function(o){},ae.prototype.propagateTouch=function(){},ae.prototype.localChange=function(o){var l=void 0===o.checked?o.value:o.checked;this.objCheck=(0,E.Kn)(l),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(l),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==l&&(this.propagateChange(l),this.angularValue=l)):l!==this.angularValue&&void 0!==this.propagateChange&&void 0!==l&&(this.propagateChange(l),this.angularValue=l)},ae.prototype.registerOnChange=function(o){this.propagateChange=o},ae.prototype.registerOnTouched=function(o){this.propagateTouch=o},ae.prototype.twoWaySetter=function(o,l){var d=this.oldValue||(0,E.NA)(l,this.properties),y=this.inputElement||this.element;y&&d===o&&this.value===o&&(void 0===y.value||""===y.value)||(this.saveChanges(l,o,d),(0,E.sO)(l,(0,E.le)(o)?null:o,this.properties),(0,E.NA)(l+"Change",this).emit(o))},ae.prototype.ngAfterViewInit=function(o){var l=o||this;if(typeof window<"u"){l.appendTo(l.element);var d=l.inputElement||l.element;d.addEventListener("focus",l.ngOnFocus.bind(l)),d.addEventListener("blur",l.ngOnBlur.bind(l))}this.isFormInit=!1},ae.prototype.setDisabledState=function(o){this.enabled=!o,this.disabled=o},ae.prototype.writeValue=function(o){void 0===this.checked?this.value=o:this.ngEle&&(this.checked="boolean"==typeof o?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?o===this.value:o:o===this.value),this.angularValue=o,this.isUpdated=!0,this.preventChange=!this.isFormInit},ae.prototype.ngOnFocus=function(o){!0!==this.skipFromEvent&&this.focus.emit(o)},ae.prototype.ngOnBlur=function(o){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(o)},ae.isFormBase=!0}(),(0,E.aR)());function wt(ae){return function(o,l){var d={set:Ot(l),get:Ai(l,ae),enumerable:!0,configurable:!0};Object.defineProperty(o,l,d)}}function Ot(ae){return function(o){void 0!==o&&((0,E.sO)(ae+"Ref",o,this),"string"!=typeof o?(o.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,o.elementRef.nativeElement.propName=ae):this.saveChanges&&(this.saveChanges(ae,o,void 0),this.dataBind()))}}function Ai(ae,o){return function(){return(0,E.NA)(ae+"Ref",this)||o}}(0,E.Wr)({compile:function kt(ae,o){if("string"==typeof ae)return bs(ae,o);var l=ae.elementRef.nativeElement._viewContainerRef,d=ae.elementRef.nativeElement.propName;return function(y,C,L){var X=l||C.viewContainerRef,he=X.createEmbeddedView(ae,{$implicit:y});he.markForCheck();var He=C&&C.registeredTemplate?C.registeredTemplate:(0,E.NA)("currentInstance.registeredTemplate",X);return typeof He[L=L&&C.registeredTemplate?L:d]>"u"&&(He[L]=[]),He[L].push(he),he.rootNodes}}});var bi=rt(9528),Ti=rt(7140),ns=rt(4028),ls=rt(2162),ws=rt(3155),Ds=rt(8608),on=rt(7520);rt(461);const Kn="cellClick",js="select",Xi="actionBegin",Ls="actionComplete",cr="actionFailure",Rs="navigating",gi="renderCell",je="eventClick",Re="eventRendered",ci="popupOpen",pi="popupClose",ms="inlineClick",Ln="data-ready",Rr="events-loaded",rs="content-ready",cn="virtual-scroll",ln="scroll-ui-update",qn="ui-update",$n="document-click",gr="cell-mouse-down",Cn=864e5,wr=6e4;function ro(ae,o){let l=0;const d=(0,E.az)("div",{className:o}).cloneNode();return d.style.visibility="hidden",d.style.position="absolute",ae.appendChild(d),l=d.getBoundingClientRect().height,(0,E.Od)(d),l}function Jr(ae,o){const l=new Date(ae.getTime());return o=(o-l.getDay()-7)%7,new Date(l.setDate(l.getDate()+o))}function Nr(ae,o){const l=Jr(ae,o),d=new Date(l.getFullYear(),l.getMonth(),l.getDate()+6);return new Date(d.getTime())}function Vr(ae){return new Date(ae.getFullYear(),ae.getMonth(),1)}function Zn(ae){return new Date(ae.getFullYear(),ae.getMonth()+1,0)}function _r(ae){const o=new Date(ae.getFullYear(),0,1).valueOf(),d=(new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()).valueOf()-o+Cn)/Cn;return Math.ceil(d/7)}function Hr(ae,o){const l=ae.getTimezoneOffset(),d=new Date(ae.getTime()+o),y=d.getTimezoneOffset()-l;return ae.setTime(d.getTime()+y*wr),ae}function Bi(ae){return new Date(ae.getFullYear(),ae.getMonth(),ae.getDate())}function Vn(ae){const o=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),0,0,0).getTimezoneOffset(),d=ae.getTimezoneOffset()-o;return ae.getTime()-new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),0,0,0).getTime()-60*d*1e3}function os(ae,o){return ae=new Date(""+ae),new Date(ae.setDate(ae.getDate()+o))}function Io(ae,o){const l=(ae=new Date(""+ae)).getDate();return ae.setDate(1),ae.setMonth(ae.getMonth()+o),ae.setDate(Math.min(l,function zn(ae){return Zn(ae).getDate()}(ae))),ae}function sr(ae,o,l){const d=new Date(ae.getTime());d.setHours(o.getHours()),d.setMinutes(o.getMinutes()),d.setSeconds(o.getSeconds());let y=new Date(ae.getTime());return 0===l.getHours()?y=os(y,1):(y.setHours(l.getHours()),y.setMinutes(l.getMinutes()),y.setSeconds(l.getSeconds())),{startHour:d,endHour:y}}function Er(ae,o){const l=Bi(new Date(ae)),d=Bi(new Date(o));return Math.round((d.getTime()-l.getTime())/Cn)}function to(ae){return-1!==ae.indexOf("Date")?new Date(parseInt(ae.match(/\d+/g).toString(),10)):-1!==ae.indexOf("T")?new Date(ae):new Date(ae.replace(/-/g,"/"))}let Eo=null;function Vs(){if(null!==Eo)return Eo;const ae=(0,E.az)("div");let o=0;ae.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(ae);const l=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return o=ae.offsetWidth-ae.clientWidth-l|0,document.body.removeChild(ae),Eo=o}function Ro(ae,o,l,d,y){for(let C=0,L=ae.length;C<L;C++)if(ae[C][o]===l){if(!d)return C;{const q=y.slice(-2)[0].field;if((d[q]instanceof Array?d[q]:[d[q]]).join(",").includes(ae[C][y.slice(-1)[0].groupIDField]))return C}}return-1}function bo(ae){const o=getComputedStyle(ae);return ae.offsetHeight+(parseInt(o.marginTop,10)||0)+(parseInt(o.marginBottom,10)||0)}function yr(ae){const o=[].slice.call(ae.children);for(const l of o)l.classList.contains("blazor-template")||ae.removeChild(l)}function Fo(ae){const o=new Date(ae.getFullYear(),0,1),l=new Date(ae.getFullYear(),6,1);return ae.getTimezoneOffset()<Math.max(o.getTimezoneOffset(),l.getTimezoneOffset())}function oo(ae){const o=ae.getFullYear(),l=ae.getMonth(),d=ae.getDate(),y=ae.getHours(),C=ae.getMinutes(),L=ae.getSeconds(),q=ae.getMilliseconds();return Date.UTC(o,l,d,y,C,L,q)}function Bs(ae,o){if("multiple"===o)ae=ae.split(" ").map(l=>l.charAt(0).toLocaleUpperCase()+l.substring(1)).join(" ");else if("single"===o){if(ae[0]>="0"&&ae[0]<="9"){const l=ae.match(/[a-zA-Z]/);ae=(0,E.le)(l)?ae:ae.slice(0,l.index)+ae[l.index].toLocaleUpperCase()+ae.slice(l.index+1)}ae=ae[0].toLocaleUpperCase()+ae.slice(1)}return ae}const uo="e-schedule",$s="e-rtl",mn="e-device",tr="e-multi-drag",vr="e-icons",Qr="e-enable",zs="e-disable",ur="e-table-container",qs="e-all-day-cells",Pn="e-all-day-row",ks="e-content-table",xi="e-work-cells",v="e-work-hours",M="e-popup-open",$="e-date-header-wrap",fe="e-date-header-container",Ce="e-header-cells",Vi="e-other-month",sn="e-current-day",ts="e-current-date",wn="e-current-panel",Sn="e-previous-panel",Ws="e-next-panel",I="e-translate",Ee="e-event-table",Bt="e-resource-group-cells",Ii="e-resource-text",Yi="e-resource-column-wrap",Ss="e-resource-column-table",Ps="e-child-node",un="e-parent-node",Xs="e-resource-expand",Jn="e-resource-collapse",Ar="e-resource-tree-icon",En="e-resource-cells",Ie="e-time-cells-wrap",Le="e-time-slots",_s="e-current-timeline",en="e-hide-childs",po="e-scroll-container",jo="e-timeline-wrapper",nr="e-appointment-wrapper",Rn="e-schedule-resource-toolbar-container",Do="e-schedule-toolbar",qo="e-schedule-resource-toolbar",zr="e-selected-cell",Mr="e-week-number-wrapper",ko="e-week-number",Go="e-wrapper-container",$o="e-appointment-container",Mn="e-appointment",Ge="e-block-appointment",p="e-block-indicator",w="e-appointment-border",k="e-appointment-details",N="e-subject-wrap",R="e-resource-name",K="e-time",G="e-table-wrap",ye="e-outer-table",ee="e-content-wrap",te="e-virtual-track",ie="e-agenda-cells",Ke="e-active-appointment-agenda",ii="e-day-date-header",Ri="e-date-column",qi="e-navigate",Mi="e-date-header",es="e-day-border",dr="e-date-time",ne="e-indicator",Ye="e-left-icon",Ct="e-right-icon",_t="e-event-action",Ht="e-new-event",Wn="e-event-resize",gn="e-left-handler",Un="e-right-handler",fo="e-recurrence-icon",hl="e-recurrence-edit-icon",No="e-header-row",el="e-all-day-appointment-wrapper",wo="e-all-day-appointment",Sl="e-appointment-hide",lr="e-row-count-wrapper",vn="e-all-day-appointment-section",vl="e-appointment-expand",Oo="e-appointment-collapse",tl="e-more-indicator",qr="e-cell-popup",Ho="e-event-popup",Tn="e-popup-header",er="e-header-icon-wrapper",Kr="e-popup-footer",il="e-date-time-details",sl="e-event-details",Bl="e-event-create",Xr="e-event-edit",nl="e-event-delete",To="e-text-ellipsis",Bo="e-more-popup-wrapper",xo="e-more-event-popup",g="e-more-event-date-header",D="e-header-day",O="e-header-date",_="e-more-event-close",Q="e-more-event-content",me="e-more-appointment-wrapper",Je="e-quick-dialog-occurrence-event",St="e-quick-dialog-series-event",ri="e-quick-dialog-following-events",Pi="e-following-events-dialog",Hi="e-quick-dialog-delete",Ms="e-quick-dialog-cancel",xs="e-quick-alertok",Os="e-quick-alertcancel",br="e-quick-alertfollowing",Wr="e-quick-dialog-alert-btn",Ao="e-schedule-dialog",mo="e-schedule-form",Wo="e-all-day",Vo="e-time-zone",va="e-repeat",El="e-subject",ka="e-location",ta="e-start",ca="e-end",Xa="e-description",it="e-time-zone-row",Qe="e-start-time-zone",F="e-end-time-zone",U="e-save-icon",pe="e-event-cancel",Me="e-event-save",ei="e-title-text",yi="e-icon-disable",ss="e-edit",rn="e-edit-icon",Dr="e-delete",jn="e-delete-icon",So="e-close",ia="e-close-icon",sa="e-schedule-error",ql="e-animate",Zl="e-hidden",Oh="e-disable-dates",eh="e-quick-popup-wrapper",Lh="e-resource-menu",gl="e-icon-menu",au="e-resource-level-title",Yu="e-resource-tree-popup-overlay",Fh="e-resource-tree-popup",ng="e-resource",rg="e-resource-icon",og="e-resource-details",hu="e-date-time-icon",th="e-virtual-scroll",sd="e-icon-disable",Ko="e-auto-height",Ll="e-ignore-whitespace",Fl="e-read-only",Vl="e-inline-subject",Ph="e-inline-appointment",lg="e-scroll-hidden",Ha="e-all-day-scroll",ih="e-all-day-auto";class Fd{constructor(o){this.parent=o,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}addEventListener(){this.parent.on($n,this.closeHeaderPopup,this)}removeEventListener(){this.parent.off($n,this.closeHeaderPopup)}closeHeaderPopup(o){const l=(0,E.oq)(o.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),d=(0,E.oq)(o.event.target,".e-hor-nav,.e-toolbar-pop"),y=this.parent.element.querySelector("."+ee);if(this.parent.isAdaptive)if((0,E.le)(d)||!d.classList.contains("e-toolbar-pop")&&!d.classList.contains("e-hor-nav")||d.classList.contains("e-hor-nav")&&this.element.querySelector(".e-toolbar-pop").classList.contains(M)){(0,E.IV)([y],lg);const C=this.element.querySelector(".e-toolbar-pop");if(!(0,E.le)(C)){const L=C.ej2_instances[0];L&&((0,E.le)(d)||!d.classList.contains("e-hor-nav")||!C.classList.contains(M))&&L.hide()}}else(0,E.cn)([y],lg);!(0,E.le)(l)||this.hideHeaderPopup()}hideHeaderPopup(){this.headerPopup&&this.headerPopup.hide()}renderHeader(){this.element=(0,E.az)("div",{className:"e-schedule-toolbar-container"});const o=(0,E.az)("div",{className:Do});this.element.appendChild(o),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()}renderToolbar(){const o=this.getItems();this.parent.trigger(Xi,{requestType:"toolbarItemRendering",items:o},l=>{this.toolbarObj=new bi.o8({items:l.items,overflowMode:"Popup",clicked:this.toolbarClickHandler.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.toolbarObj.appendTo(this.parent.element.querySelector("."+Do));const d=this.toolbarObj.element.querySelector(".e-prev");d&&d.firstElementChild.setAttribute("title",this.l10n.getConstant("previous"));const y=this.toolbarObj.element.querySelector(".e-next");y&&y.firstElementChild.setAttribute("title",this.l10n.getConstant("next")),this.updateAddIcon(),this.updateActiveView(),this.parent.trigger(Ls,{requestType:"toolBarItemRendered",items:this.toolbarObj.items})})}updateItems(){if(this.toolbarObj){const o=this.getItems();this.parent.trigger(Xi,{requestType:"toolbarItemRendering",items:o},l=>{this.toolbarObj.items=l.items,this.toolbarObj.dataBind(),this.parent.trigger(Ls,{requestType:"toolBarItemRendered",items:this.toolbarObj.items})})}}getPopUpRelativeElement(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")}setDayOfWeek(o){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=o,this.headerCalendar.dataBind())}setCalendarDate(o){this.headerCalendar&&(this.headerCalendar.value=o,this.headerCalendar.dataBind())}setCalendarMinMaxDate(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())}getCalendarView(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"}setCalendarView(){if(this.headerCalendar){const o=this.getCalendarView();this.headerCalendar.depth=o,this.headerCalendar.start=o,this.headerCalendar.refresh()}}updateActiveView(){const o=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));(0,E.IV)(o,["e-active-view"]),o.length>0&&o[this.parent.viewIndex]&&(0,E.cn)([o[this.parent.viewIndex]],["e-active-view"])}updateDateRange(o){const l=this.toolbarObj.element.querySelector(".e-date-range");l&&(l.setAttribute("aria-label",o),l.querySelector(".e-tbar-btn-text").innerHTML=o,this.refresh())}refresh(){this.toolbarObj&&this.toolbarObj.refreshOverflow()}updateAddIcon(){const o=this.toolbarObj.element.querySelector(".e-add");o&&(this.parent.eventSettings.allowAdding?(0,E.IV)([o],Zl):(0,E.cn)([o],Zl))}getDateRangeText(){return Bs(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}getItems(){const o=[];if(o.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{"aria-label":"previous period",role:"navigation"}}),o.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{"aria-label":"next period",role:"navigation"}}),o.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive","aria-label":"title",role:"navigation"}}),this.parent.isAdaptive||this.parent.enableAdaptiveUI?(o.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),o.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(o.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&o.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1)for(const l of this.parent.views)o.push(this.getItemObject(l));return o}getItemObject(o){let l,d,y,C;"string"==typeof o?(l=o.toLowerCase(),d=null):(l=o.option.toLowerCase(),d=o.displayName);const L=this.parent.isAdaptive||this.parent.enableAdaptiveUI;switch(l){case"day":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-day",text:d||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-week",text:d||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-workweek",text:d||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-month",text:d||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"year":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-year",text:d||this.l10n.getConstant("year"),cssClass:"e-views e-year"};break;case"agenda":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-agenda",text:d||this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-month-agenda",text:d||this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-timeline-day",text:d||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-timeline-week",text:d||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-timeline-workweek",text:d||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-timeline-month",text:d||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":C="Vertical"===o.orientation?"vertical":"horizontal",y={align:"Right",showAlwaysInPopup:L,prefixIcon:"e-icon-timeline-year-"+C,text:d||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"}}return y}renderHeaderPopup(){const o=(0,E.az)("div",{className:"e-header-popup"}),l=(0,E.az)("div",{className:"e-header-calendar"});o.appendChild(l),this.element.appendChild(o),this.headerPopup=new _e.GI(o,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl});const d=this.getCalendarView(),y="Month"===this.parent.currentView&&!(0,E.le)(this.parent.activeViewOptions.displayDate)&&!this.hasSelectedDate();this.headerCalendar=new Ti.f({value:y?this.parent.activeViewOptions.displayDate:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:d,start:d,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.setCalendarTimezone(),this.headerCalendar.appendTo(l),this.headerPopup.hide()}calendarChange(o){if(o.value.getTime()!==this.parent.selectedDate.getTime()){const l=Bi(new Date(o.value));this.parent.changeDate(l)}this.headerPopup.hide()}setCalendarTimezone(){this.headerCalendar&&(this.headerCalendar.timezone=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName())}calculateViewIndex(o){const l=(0,E.oq)(o.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(l)}toolbarClickHandler(o){if(!o.item)return;let d,y,C;switch(o.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains(M)?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-week":this.parent.changeView("Week",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-work-week":this.parent.changeView("WorkWeek",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-month":this.parent.changeView("Month",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-year":this.parent.changeView("Year",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-agenda":this.parent.changeView("Agenda",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-timeline-day":this.parent.changeView("TimelineDay",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-timeline-year":this.parent.changeView("TimelineYear",o.originalEvent,void 0,this.calculateViewIndex(o));break;case"e-today":C=Bi(this.parent.getCurrentTime()),("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView||!this.parent.isSelectedDate(C)||"Month"===this.parent.currentView&&this.parent.activeViewOptions.displayDate&&!this.hasSelectedDate()&&Bi(this.parent.activeViewOptions.displayDate)!==C||"Month"===this.parent.currentView&&this.parent.activeViewOptions.numberOfWeeks>0&&!this.hasSelectedDate()&&Bi(Vr(this.parent.selectedDate))!==C)&&this.parent.changeDate(C,o.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),o.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),o.originalEvent);break;case"e-add":if(y=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime(),this.parent.activeCellsData&&!y)d=this.parent.activeCellsData;else{const he=this.parent.activeViewOptions.timeScale.interval*wr/this.parent.activeViewOptions.timeScale.slotCount,He=new Date(this.parent.selectedDate.getTime()),Ve=this.parent.getCurrentTime();He.setHours(Ve.getHours(),Math.round(He.getMinutes()/he)*he,0);const nt=new Date(new Date(He.getTime()).setMilliseconds(He.getMilliseconds()+he));d={startTime:He,endTime:nt,isAllDay:!1}}this.parent.eventWindow.openEditor((0,E.l7)(d,{cancel:!1,event:o.originalEvent}),"Add")}if((0,E.le)(this.toolbarObj))return;const L=this.toolbarObj.element.querySelector(".e-toolbar-pop");L&&"Input"!==o.item.type&&L.ej2_instances[0].hide({name:"SlideUp",duration:100})}hasSelectedDate(){const o=Bi(this.parent.selectedDate).getTime();return o>=this.parent.activeView.getStartDate().getTime()&&o<=this.parent.activeView.getEndDate().getTime()}getHeaderElement(){return this.toolbarObj.element}updateHeaderItems(o){const l=this.toolbarObj.element.querySelector(".e-prev"),d=this.toolbarObj.element.querySelector(".e-next"),y=this.toolbarObj.element.querySelector(".e-date-range");l&&("add"===o?(0,E.cn)([l],Zl):(0,E.IV)([l],Zl)),d&&("add"===o?(0,E.cn)([d],Zl):(0,E.IV)([d],Zl)),y&&("add"===o?(0,E.cn)([y],To):(0,E.IV)([y],To))}previousNextIconHandler(){const o="Agenda"===this.parent.currentView?[this.parent.getCurrentViewDates()[0]]:this.parent.getCurrentViewDates(),l=this.toolbarObj.element.querySelector(".e-prev"),d=this.toolbarObj.element.querySelector(".e-next");let y=new Date(o[0].getTime()),C=new Date(o[o.length-1].getTime());if(("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView)&&(y=Jr(Bi(this.parent.selectedDate),this.parent.firstDayOfWeek),C=os(y,7*this.parent.activeViewOptions.interval)),"Month"===this.parent.currentView){const L=!(0,E.le)(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0;y=L?this.parent.activeView.getStartDate():Vr(this.parent.selectedDate),C=L?this.parent.activeView.getEndDate():Zn(Io(y,this.parent.activeViewOptions.interval-1))}(0,E.le)(l)||this.toolbarObj.enableItems(l,y>this.parent.minDate),(0,E.le)(d)||this.toolbarObj.enableItems(d,C<this.parent.maxDate),this.setCalendarMinMaxDate()}getModuleName(){return"headerbar"}destroy(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),(0,E.Od)(this.element),this.toolbarObj=null),this.element=null,this.parent=null,this.l10n=null}}class Pd{constructor(o){this.parent=o,this.addEventListener()}getModuleName(){return"scroll"}setWidth(){this.parent.element.style.width=(0,E.Ac)(this.parent.width)}setHeight(){this.parent.element.style.height=(0,E.Ac)(this.parent.height)}addEventListener(){this.parent.on(rs,this.setDimensions,this),this.parent.on(qn,this.onPropertyChanged,this)}removeEventListener(){this.parent.off(rs,this.setDimensions),this.parent.off(qn,this.onPropertyChanged)}setDimensions(){this.setWidth(),this.setHeight();const o={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(ln,o)}onPropertyChanged(){this.setDimensions()}destroy(){this.removeEventListener()}}class nd{constructor(o){this.parent=o,this.element=this.parent.element.querySelector("."+ur),this.touchObj=new E.Xh(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),E.bi.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}scrollHandler(o){if(!("Agenda"===this.parent.currentView||this.parent.uiStateValues.action||o.originalEvent&&(o.originalEvent.target.classList.contains(Mn)||(0,E.oq)(o.originalEvent.target,"."+Mn)))){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains(I)&&this.onTransitionEnd(),"Left"===o.scrollDirection||"Right"===o.scrollDirection){const l={requestType:"dateNavigate",cancel:!1,event:o.originalEvent};if(this.parent.trigger(Xi,l),l.cancel)return;const d=this.element.querySelector("."+ee);if(d&&d.scrollWidth>d.clientWidth)return;this.isScrollTriggered=!0,o.originalEvent.preventDefault(),o.originalEvent.stopPropagation()}if(o.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel(Ws,"next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.nextPanel.element));const l=this.parent.enableRtl?o.distanceX:-o.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+l)+"px)"}else if(o.scrollDirection===this.touchRightDirection){let l=0;this.previousPanel||(this.renderPanel(Sn,"previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.previousPanel.element),l=this.previousPanel.element.offsetWidth);const d=this.parent.enableRtl?l-o.distanceX:-l+o.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+d)+"px)"}}}swipeHandler(o){if(!this.isScrollTriggered||this.parent.uiStateValues.action)return;this.isScrollTriggered=!1;const l="Left"===o.swipeDirection?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if("Left"===o.swipeDirection&&l<this.parent.maxDate||"Right"===o.swipeDirection&&l>=this.parent.minDate){const d=Date.now()-this.timeStampStart,y=o.distanceX*(E.AR.isDevice?6:1.66);y>d||o.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(o.swipeDirection),y>d&&o.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=y/d/10+"s"),this.confirmSwipe(o.swipeDirection)):this.cancelSwipe(),this.parent.trigger(Ls,{requestType:"dateNavigate",cancel:!1,event:o.originalEvent})}else this.cancelSwipe();this.timeStampStart=null}tapHoldHandler(o){const l=(0,E.oq)(o.originalEvent.target,"."+Mn);(0,E.le)(l)||!this.parent.isAdaptive||this.parent.quickPopup.tapHoldEventPopup(o.originalEvent)}renderPanel(o,l){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(l)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(o)}swapPanels(o){if(o===this.touchLeftDirection){const l=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=l}else{const l=this.previousPanel;this.previousPanel=this.currentPanel,this.currentPanel=l}}confirmSwipe(o){this.parent.trigger(Rs,{action:"date",cancel:!1,previousDate:o===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate},y=>{if(y.cancel)this.swapPanels(o),this.cancelSwipe();else{let C;this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),C=this.parent.enableRtl?o===this.touchLeftDirection?this.previousPanel?this.previousPanel.element.offsetLeft:this.currentPanel.element.offsetWidth:0:o===this.touchLeftDirection?-this.currentPanel.element.offsetLeft:0,(0,E.cn)([this.element],I),this.element.style.transform="translatex("+C+"px)",this.parent.headerModule&&this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.renderTemplates(),this.parent.crudModule.refreshDataManager()}})}cancelSwipe(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.generateColumnLevels(),(0,E.cn)([this.element],I),this.element.style.transform="translatex("+(this.parent.enableRtl?this.previousPanel?this.previousPanel.element.offsetWidth:0:-this.currentPanel.element.offsetLeft)+"px)"}onTransitionEnd(){(0,E.IV)([this.element],I),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&((0,E.Od)(this.previousPanel.element),this.previousPanel=null,(0,E.IV)([this.currentPanel.element],Sn),(0,E.cn)([this.currentPanel.element],wn)),this.nextPanel&&((0,E.Od)(this.nextPanel.element),this.nextPanel=null,(0,E.IV)([this.currentPanel.element],Ws),(0,E.cn)([this.currentPanel.element],wn)),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""}getTranslateX(o){const l=window.getComputedStyle(o);return new WebKitCSSMatrix(l.webkitTransform).m41}setDimensions(o){o.style.width=this.parent.element.clientWidth+"px"}resetValues(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",yr(this.element),(0,E.IV)([this.element],I)}destroy(){this.touchObj&&(this.touchObj.destroy(),this.touchObj=null),E.bi.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()}}class Jp{constructor(o){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",ctrlShiftUpArrow:"ctrl+shift+uparrow",ctrlShiftDownArrow:"ctrl+shift+downarrow",ctrlShiftLeftArrow:"ctrl+shift+leftarrow",ctrlShiftRightArrow:"ctrl+shift+rightarrow"},this.parent=o,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new E.nv(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}keyActionHandler(o){switch(o.action){case"downArrow":case"shiftDownArrow":this.processDown(o,o.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(o,o.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(o,o.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(o,o.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),o),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),o),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(o);break;case"enter":this.processEnter(o);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(o,o.shiftKey);break;case"delete":this.processDelete(o);break;case"ctrlShiftUpArrow":case"ctrlShiftDownArrow":case"ctrlShiftLeftArrow":case"ctrlShiftRightArrow":this.processCtrlShiftNavigationArrows(o);break;case"escape":this.processEscape(o);break;case"fTwelve":this.parent.allowInline&&this.parent.inlineModule&&(o.preventDefault(),this.processFTwelve(o))}}processFTwelve(o){const l=o.target;if(l.classList.contains(xi)||l.classList.contains(qs)){this.parent.activeCellsData=this.getSelectedElements(l);const d=(0,E.l7)(this.parent.activeCellsData,{cancel:!1,event:o});this.parent.notify(ms,{element:d.element,groupIndex:d.groupIndex,type:"Cell"})}l.classList.contains(Mn)&&l.click()}addEventListener(){this.parent.on(gr,this.onCellMouseDown,this)}removeEventListener(){this.parent.off(gr,this.onCellMouseDown)}onCellMouseDown(o){if(!o.event.shiftKey&&(this.initialTarget=this.getClosestCell(o.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(o.event.target.classList.contains(xi)&&3!==o.event.which&&(this.parent.removeSelectedClass(),E.bi.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),E.bi.add(this.parent.getContentTable(),"mouseup",this.onMoveUp,this)),o.event.target.classList.contains(qs)&&3!==o.event.which))){this.parent.removeSelectedClass();const l=this.parent.getAllDayRow();E.bi.add(l,"mousemove",this.onMouseSelection,this),E.bi.add(l,"mouseup",this.onMoveUp,this)}}onMouseSelection(o){const l=[].slice.call(this.parent.element.querySelectorAll("."+Mn));(0,E.cn)(l,"e-allow-select");const d=this.parent.boundaryValidation(o.pageY,o.pageX);if(d.bottom||d.top||d.left||d.right){const C=this.parent.element.querySelector("."+ee),q=C.offsetWidth<=C.scrollWidth&&C.scrollLeft>=0&&C.scrollLeft+C.offsetWidth<=C.scrollWidth;C.offsetHeight<=C.scrollHeight&&C.scrollTop>=0&&C.scrollTop+C.offsetHeight<=C.scrollHeight&&(d.top||d.bottom)&&(C.scrollTop+=d.top?-o.target.offsetHeight:o.target.offsetHeight),q&&(d.left||d.right)&&(C.scrollLeft+=d.left?-o.target.offsetWidth:o.target.offsetWidth)}const y=this.getClosestCell(o);y&&this.selectCells(!0,y)}getClosestCell(o){return(0,E.oq)(o.target,"."+xi+",."+qs)}onMoveUp(o){const l=[].slice.call(this.parent.element.querySelectorAll("."+Mn));if((0,E.IV)(l,"e-allow-select"),o.target.classList.contains(xi)&&(E.bi.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),E.bi.remove(this.parent.getContentTable(),"mouseup",this.onMoveUp)),o.target.classList.contains(qs)){const X=this.parent.getAllDayRow();E.bi.remove(X,"mousemove",this.onMouseSelection),E.bi.remove(X,"mouseup",this.onMoveUp)}if(this.isPreventAction(o))return;const y=(0,E.oq)(o.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if("TimelineYear"===this.parent.currentView&&y.classList.contains(Vi))return;this.parent.activeCellsData=this.getSelectedElements(y);const C={};this.parent.eventWindow&&this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,C);const L=this.parent.getSelectedElements();this.parent.trigger(js,{data:C,element:this.parent.activeCellsData.element,event:o,requestType:"cellSelect",showQuickPopup:!1},X=>{if((X.showQuickPopup||this.parent.quickInfoOnSelectionEnd)&&L.length>1){const He=(0,E.l7)(this.parent.activeCellsData,{cancel:!1,event:o,name:"cellClick"});this.parent.notify(Kn,He)}})}processEnter(o){if(this.parent.activeViewOptions.readonly&&!o.target.classList.contains(Mn)||this.isPreventAction(o)||"TimelineYear"===this.parent.currentView&&o.target.classList.contains(Vi))return;const l=o.target;if((0,E.oq)(l,"."+eh))l.classList.contains(sl)||l.classList.contains(Bl)||l.classList.contains(Xr)||l.classList.contains(nl)||l.classList.contains(So)?(l.click(),o.preventDefault()):l.classList.contains(El)&&(this.parent.element.querySelector("."+Bl).click(),o.preventDefault());else if(l.classList.contains(En)&&l.classList.contains(un)){const d=l.querySelector("."+Ar);d&&d.click()}else if(l.classList.contains(xi)||l.classList.contains(qs)){this.parent.activeCellsData=this.getSelectedElements(l);const d=(0,E.l7)(this.parent.activeCellsData,{cancel:!1,event:o});this.parent.allowInline?this.parent.notify(ms,{element:d.element,groupIndex:d.groupIndex,type:"Cell"}):"Year"===this.parent.currentView?l.click():this.parent.notify(Kn,d)}else if(l.classList.contains(Vl)&&this.parent.inlineModule)this.parent.inlineModule.inlineCrudActions(l);else{if(!(l.classList.contains(Mn)||l.classList.contains(_)||l.classList.contains(vn)||l.classList.contains(tl)))return l.classList.contains(O)?(this.parent.setProperties({selectedDate:this.parent.getDateFromElement(l)},!0),this.parent.changeView(this.parent.getNavigateView(),o),void this.processEscape(o)):void 0;l.click()}}getSelectedElements(o){let l;if(this.selectedCells.length>1&&o.classList.contains(zr)){const d=this.parent.getCellDetails(this.selectedCells[0]),y=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);d.endTime=y.endTime,d.element=o,l=d}else l=this.parent.getCellDetails(o);return l}getCells(o,l,d){const y=this.parent.getContentTable(),C="TimelineYear"===this.parent.currentView;let q=[].slice.call(y.querySelectorAll(C&&!o?"."+xi+":not(."+Vi+")":"td")),X=y.rows.length,he=y.rows[0].cells.length;if(l&&l.classList.contains(qs)){const vt=this.parent.getAllDayRow();q=[].slice.call(vt.cells),X=1,he=vt.cells.length}let He=q.indexOf(l),Ve=q.indexOf(d);const nt=[];if(o){for(let vt=0;vt<he;vt++)for(let mi=0;mi<X;mi++){const Ni=q[he*mi+vt];C&&Ni.classList.contains(Vi)||nt.push(Ni)}He=nt.indexOf(l),Ve=nt.indexOf(d)}if(He>Ve){const vt=He;He=Ve,Ve=vt}return(o?nt:q).slice(He,Ve+1)}focusFirstCell(){if("Agenda"===this.parent.currentView){const o=this.parent.getContentTable().querySelector("."+ie);return o.setAttribute("tabindex","0"),void o.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()&&"TimelineYear"!==this.parent.currentView){const o=this.parent.element.querySelector("."+ks+" tr:not(."+Zl+") ."+xi+":not(."+Bt+")");this.selectCells(!1,o)}else if(this.parent.currentView.indexOf("Year")>-1){let o="."+xi+":not(."+Vi+"):not(."+Bt+")";o+="TimelineYear"===this.parent.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+this.parent.activeView.startDate().getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(o))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])}isInverseTableSelect(){return this.parent.activeView.isInverseTableSelect}selectCells(o,l){this.parent.removeSelectedClass();let d=l instanceof Array?l.slice(-1)[0]:l;if(o){let y;const C=["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"],L={element:l,requestType:"mousemove",allowMultipleRow:!0};this.parent.inlineModule.removeInlineAppointmentElement(),this.parent.trigger(js,L,q=>{if(!q.allowMultipleRow||!this.parent.allowMultiRowSelection){const He="TimelineYear"===this.parent.currentView;He&&"Horizontal"===this.parent.activeViewOptions.orientation||"Month"===this.parent.currentView?d=He&&this.parent.activeViewOptions.group.resources.length>0?this.initialTarget:this.initialTarget.parentElement.children[d.cellIndex]:C.indexOf(this.parent.currentView)>-1&&(d=d.parentElement.children[this.initialTarget.cellIndex])}let he=this.getCells(this.isInverseTableSelect(),this.initialTarget,d);if(this.parent.activeViewOptions.group.resources.length>0){y=this.initialTarget.getAttribute("data-group-index");const He=[];for(const Ve of he)Ve.getAttribute("data-group-index")===y&&He.push(Ve);he=He}if(this.parent.allowMultiCellSelection||(he=[this.initialTarget]),this.selectedCells=he,he.length>2&&!d.classList.contains(qs)){let He=this.getAllDayCells(he);if(this.parent.activeViewOptions.group.resources.length>0){const Ve=[];for(const nt of He)nt.getAttribute("data-group-index")===y&&Ve.push(nt);He=Ve}he=he.concat(He)}d.getAttribute("data-group-index")!==y&&this.parent.activeViewOptions.group.resources.length>0&&(d=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(he,d)})}else this.initialTarget=d,this.selectedCells=[d],this.parent.addSelectedClass([d],d)}selectAppointment(o,l){const d=this.getAppointmentElements();if(d.length<0)return;let y;if(this.parent.eventBase.removeSelectedAppointmentClass(),l.classList.contains(Mn)){const C=d.indexOf(l);y=d[o?C-1:C+1]}else y=o?d[d.length-1]:d[0];y&&(this.parent.eventBase.addSelectedAppointments([y]),y.focus(),(0,E.cn)([y],Ke))}selectAppointmentElementFromWorkCell(o,l){if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),l.classList.contains(xi)||l.classList.contains(qs)){const d=this.getUniqueAppointmentElements(),y=[],C=this.parent.getDateFromElement(l).getTime();if(this.parent.eventsProcessed.filter(q=>o?q[this.parent.eventFields.startTime].getTime()<=C:q[this.parent.eventFields.startTime].getTime()>=C).filter(q=>{d.filter(X=>{JSON.stringify(q.Guid)===JSON.stringify(X.getAttribute("data-guid"))&&y.push(X)})}),y.length>0){const X=this.getAppointmentElementsByGuid((o?y[y.length-1]:y[0]).getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(X),X[X.length-1].focus()}}}getAllDayCells(o){const l=this.parent.getAllDayRow();if(!l)return[];const d=o[0],y=o[o.length-1],C=this.parent.getCellDetails(d);return this.parent.getCellDetails(y).endTime.getTime()-C.startTime.getTime()>=Cn?[].slice.call(l.cells).slice(d.cellIndex,y.cellIndex+1):[]}getAppointmentElements(){return[].slice.call(this.parent.element.querySelectorAll("."+Mn))}getAppointmentElementsByGuid(o){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+o+'"]'))}getUniqueAppointmentElements(){const o=this.getAppointmentElements(),l=[];return o.map(d=>d.getAttribute("data-guid")).filter((d,y,C)=>{C.indexOf(d)===y&&l.push(o[y])}),l}getWorkCellFromAppointmentElement(o){const l=this.parent.eventBase.getEventByGuid(o.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([l])}processViewNavigation(o){const l=parseInt(o.key,10)-1;l<this.parent.views.length&&(this.parent.changeView(this.parent.viewCollections[l].option,o,void 0,l),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus())}cancelUpDownAction(o){return!!(o&&"Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0||o&&this.initialTarget.classList.contains(Vi)||this.parent.activeView.isTimelineView()&&!o||"MonthAgenda"===this.parent.currentView)}processUp(o,l){const d="TimelineYear"===this.parent.currentView;if(l&&this.cancelUpDownAction(d))return;let y=o.target;const C=this.parent.getSelectedElements(),L=this.parent.eventBase.getSelectedAppointments(),q=this.parent.element.querySelector("."+Bo),X=this.getQuickPopupElement();if(C.length>0&&!o.target.classList.contains(xi)&&(y=C[C.length-1]),L.length>0&&!q.classList.contains(M)&&!X.classList.contains(M)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(y=this.getWorkCellFromAppointmentElement(L[L.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),y)if(y.classList.contains(xi)&&!this.parent.element.querySelector("."+M)){const he=this.parent.getTableRows(),He=he.indexOf(y.parentElement);let Ve;if(d&&l&&0===this.parent.activeViewOptions.group.resources.length&&(Ve=this.isInverseTableSelect()?this.getVerticalUpDownCell(he,y,He,!0):this.getHorizontalUpDownCell(he,y,He,!0)),(He>0||Ve)&&He<he.length){if(Ve=Ve||he[He-1].cells[y.cellIndex],"Year"===this.parent.currentView&&Ve.classList.contains(Vi)){if(!(this.parent.activeView.getStartDate().getTime()<+Ve.getAttribute("data-date")))return;Ve=this.getYearUpDownCell(he,He-1,y.cellIndex,!0)}this.selectCells(l,Ve)}}else("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&this.selectAppointment(!0,y)}processDown(o,l){const d="TimelineYear"===this.parent.currentView;if(l&&this.cancelUpDownAction(d))return;let y=o.target;const C=this.parent.getSelectedElements(),L=this.parent.eventBase.getSelectedAppointments(),q=this.parent.element.querySelector("."+Bo),X=this.getQuickPopupElement();C.length>0&&!o.target.classList.contains(xi)&&(y=C[C.length-1]),L.length>0&&!q.classList.contains(M)&&!X.classList.contains(M)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(y=this.getWorkCellFromAppointmentElement(L[L.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());const he=this.parent.getTableRows();if(y)if(y.classList.contains(xi)&&!this.parent.element.querySelector("."+M)){const He=he.indexOf(y.parentElement);let Ve;if(d&&l&&0===this.parent.activeViewOptions.group.resources.length&&(Ve=this.isInverseTableSelect()?this.getVerticalUpDownCell(he,y,He,!1):this.getHorizontalUpDownCell(he,y,He,!1)),He>=0&&(He<he.length-1||Ve)){if(Ve=Ve||he[He+1].cells[y.cellIndex],"Year"===this.parent.currentView&&Ve.classList.contains(Vi)){if(!(this.parent.activeView.getEndDate().getTime()>+Ve.getAttribute("data-date")))return;Ve=this.getYearUpDownCell(he,He+1,y.cellIndex,!1)}this.selectCells(l,Ve)}}else("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&this.selectAppointment(!1,y)}getYearUpDownCell(o,l,d,y){for(;o[l]&&o[l].cells[d].classList.contains(Vi);)l+=y?-1:1;return o[l].cells[d]}getHorizontalUpDownCell(o,l,d,y){const C=o[d+(y?-1:1)];let L=C?C.cells[l.cellIndex]:l;if(L.classList.contains(Vi)){const q=C.querySelector("."+xi+":not(."+Vi+")"),X=new Date(+q.getAttribute("data-date")),he='[data-date="'+new Date(X.getFullYear(),X.getMonth()+1,0).getTime()+'"]';L=L.cellIndex<q.cellIndex?q:C.querySelector(he)}return L}getVerticalUpDownCell(o,l,d,y){let L=y&&d>0||!y&&d<o.length-1?o[d+(y?-1:1)].cells[l.cellIndex]:void 0;if(!L||L.classList.contains(Vi)){if(o[d].cells[l.cellIndex-(y?1:-1)]){const X=+l.getAttribute("data-date")-(y?Cn:-Cn);return this.parent.getContentTable().querySelector("."+xi+'[data-date="'+X+'"]')}L=l}return L}processLeftRight(o){const l="Year"===this.parent.currentView?o.closest("tbody"):this.parent.getContentTable(),d=o.parentNode.sectionRowIndex;return{element:l,rowIndex:d,columnIndex:o.cellIndex,maxIndex:l.rows[d].cells.length}}getQuickPopupElement(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector("."+eh)}isCancelLeftRightAction(o,l,d){const y="MonthAgenda"===this.parent.currentView||d&&this.initialTarget.classList.contains(Vi);if("Agenda"===this.parent.currentView||l&&y||this.isPreventAction(o)&&l)return!0;const C=this.parent.element.querySelector("."+Bo),L=this.getQuickPopupElement();return!(!C.classList.contains(M)&&!L.classList.contains(M))}processRight(o,l){const d="TimelineYear"===this.parent.currentView;if(this.isCancelLeftRightAction(o,l,d))return;const y=this.parent.getSelectedElements();let C;const L=this.parent.eventBase.getSelectedAppointments();let q=o.target;if(y.length>0&&!q.classList.contains(xi)&&!q.classList.contains(qs)&&(q=y[y.length-1]),!(L.length>0)||(q=this.getWorkCellFromAppointmentElement(L[L.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),q))if(q.classList.contains(xi)&&o.target.classList.contains(xi)){const X=this.processLeftRight(q),he=new Date(+q.getAttribute("data-date")),He="Year"===this.parent.currentView&&he.getTime()===Zn(he).getTime();if(X.columnIndex>=0&&X.columnIndex<X.maxIndex-1&&!He)C=this.calculateNextPrevDate(q,X.element.rows[X.rowIndex].cells[q.cellIndex+1],"right"),d&&l&&C.classList.contains(Vi)&&(C=this.getTimelineYearTargetCell(X,q,!0)),(0,E.le)(C)||this.selectCells(l,C);else if(X.columnIndex===X.maxIndex-1||He)if(!this.isInverseTableSelect()&&X.rowIndex<X.element.rows.length-1&&!He)C=this.calculateNextPrevDate(q,X.element.rows[X.rowIndex+1].cells[0],"right"),C=d&&l&&C.classList.contains(Vi)?this.getHorizontalLeftRightCell(X,q,!0):C,(0,E.le)(C)||this.selectCells(l,C);else if(!l){if(He&&he.getTime()!==this.parent.activeView.getEndDate().getTime())return void this.selectCells(l,this.parent.element.querySelector(":not(."+Vi+')[data-date="'+(he.getTime()+Cn)+'"]'));const Ve=this.isInverseTableSelect()?X.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),o);const nt=this.parent.getContentTable(),It=He?nt.rows[Ve].querySelector("."+xi+":not(."+Vi+")"):nt.rows[Ve].cells[0];this.selectCells(!1,It)}}else if(q.classList.contains(qs)){const X=q.cellIndex,he=this.parent.getAllDayRow(),He=he.cells.length;if(X>=0&&X<He-1)this.selectCells(l,he.cells[X+1]);else if(X===He-1&&!l){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),o);const Ve=this.parent.getAllDayRow();this.selectCells(!1,Ve.cells[0])}}}processLeft(o,l){const d="TimelineYear"===this.parent.currentView;if(this.isCancelLeftRightAction(o,l,d))return;let y=o.target;const C=this.parent.getSelectedElements();let L;C.length>0&&!y.classList.contains(xi)&&!y.classList.contains(qs)&&(y=C[C.length-1]);const q=this.parent.eventBase.getSelectedAppointments();if(!(q.length>0)||(y=this.getWorkCellFromAppointmentElement(q[q.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),y))if(o.target.classList.contains(xi)&&y.classList.contains(xi)){const X=this.processLeftRight(y),he=new Date(+y.getAttribute("data-date")),He="Year"===this.parent.currentView&&he.getTime()===Vr(he).getTime();if(X.columnIndex>0&&X.columnIndex<X.maxIndex&&!He)L=this.calculateNextPrevDate(y,X.element.rows[X.rowIndex].cells[y.cellIndex-1],"left"),d&&l&&L.classList.contains(Vi)&&(L=this.getTimelineYearTargetCell(X,y,!1)),(0,E.le)(L)||this.selectCells(l,L);else if(0===X.columnIndex||He)if(!this.isInverseTableSelect()&&X.rowIndex>0)L=this.calculateNextPrevDate(y,X.element.rows[X.rowIndex-1].cells[X.maxIndex-1],"left"),L=d&&l&&L.classList.contains(Vi)?this.getHorizontalLeftRightCell(X,y,!1):L,(0,E.le)(L)||this.selectCells(l,L);else if(!l){if(He&&he.getTime()!==this.parent.activeView.getStartDate().getTime())return void this.selectCells(l,this.parent.element.querySelector('[data-date="'+(he.getTime()-Cn)+'"]'));this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),o);const Ve=this.parent.getContentTable(),nt=this.isInverseTableSelect()?X.rowIndex:Ve.rows.length-1;let It=Ve.rows[nt].cells[X.maxIndex-1];if(He){const vt=this.parent.element.querySelectorAll("."+ks+" tbody");It=vt.item(vt.length-1).querySelector(":not(."+Vi+')[data-date="'+this.parent.activeView.getEndDate().getTime()+'"]')}this.selectCells(!1,It)}}else if(y.classList.contains(qs)){const X=y.cellIndex,he=this.parent.getAllDayRow(),He=he.cells.length;if(X>0&&X<He)this.selectCells(l,he.cells[X-1]);else if(0===X&&!l){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),o);const Ve=this.parent.getAllDayRow();this.selectCells(!1,Ve.cells[He-1])}}}getTimelineYearTargetCell(o,l,d){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(l,d):this.getHorizontalLeftRightCell(o,l,d)}getHorizontalLeftRightCell(o,l,d){const y=o.element.rows[l.parentNode.sectionRowIndex+(d?1:-1)];if(y){const C=d?"."+xi+":not(."+Vi+")":'[data-date="'+(+l.getAttribute("data-date")-Cn)+'"]';return y.querySelector(C)}return l}getVerticalLeftRightCell(o,l){const d=new Date(+o.getAttribute("data-date")),y=new Date(d.getFullYear(),d.getMonth()+(l?1:-1),1),C=this.parent.getContentTable(),L=C.querySelector('[data-date="'+y.getTime()+'"]');return L.parentNode.sectionRowIndex>o.parentNode.sectionRowIndex?L:C.querySelector('[data-date="'+new Date(y.getFullYear(),y.getMonth()+1,0).getTime()+'"]')}calculateNextPrevDate(o,l,d){const y=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&o&&l&&l.getAttribute("data-group-index")!==y){const C=this.parent.getDateFromElement(o),L="right"===d?new Date(C.setDate(C.getDate()+1)):new Date(C.setDate(C.getDate()-1));l=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+L.getTime().toString()+'"][data-group-index="'+y+'"]'))[0]}return l}getFocusableElements(o){return[].slice.call(o.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))}processTabOnPopup(o,l){let d=this.getFocusableElements(l);d=d.filter(L=>{const q=this.parent.element.querySelector("."+Kr);return q&&q.offsetParent?!(L.classList.contains(ss)||L.classList.contains(Dr)):!(L.classList.contains(Xr)||L.classList.contains(nl))});const y=d[0],C=d[d.length-1];!(0,E.le)(C)&&document.activeElement===C&&!o.shiftKey&&(o.preventDefault(),y.focus()),!(0,E.le)(y)&&document.activeElement===y&&o.shiftKey&&(o.preventDefault(),C.focus())}processTab(o,l){let d=o.target;if(d.classList.contains(Vl)&&this.parent.inlineModule&&(d=d.closest(".e-appointment"),this.parent.inlineModule.inlineCrudActions(o.target)),"TimelineYear"===this.parent.currentView&&d.classList.contains(Vi))return void(d.classList.contains(zr)&&this.parent.removeSelectedClass());const y=(0,E.oq)(d,"."+eh+",."+Bo);if(y&&y.classList.contains(M))return y.classList.contains(Bo)&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(o,y);if(d.classList.contains(uo))return void this.parent.eventBase.removeSelectedAppointmentClass();if(d.classList.contains(En)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){const L=parseInt(d.getAttribute("data-group-index"),10),X=[].slice.call(this.parent.element.querySelectorAll(`.${Mn}[data-group-index="${l?L-1:L}"]`));if(X.length>0){this.parent.eventBase.removeSelectedAppointmentClass();const he=l?X.slice(-1)[0]:X[0];this.parent.eventBase.addSelectedAppointments([he]),he.focus(),o.preventDefault()}else if(L+1===this.parent.resourceBase.lastResourceLevel.length)this.parent.element.focus(),o.preventDefault();else if(this.parent.virtualScrollModule){const he=this.parent.element.querySelector("."+te),He=Math.round(he.offsetHeight/this.parent.resourceBase.expandedResources.length);this.parent.element.querySelector(".e-content-wrap").scrollTop=(l?L-1:L+1)*He,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(L);return}if(d.classList.contains(Mn)){let L=[].slice.call(this.parent.element.querySelectorAll("."+Mn));const q="TimelineYear"===this.parent.currentView;if((this.parent.activeView.isTimelineView()&&!q||q&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){const He=parseInt(d.getAttribute("data-group-index"),10);L=[].slice.call(this.parent.element.querySelectorAll(`.${Mn}[data-group-index="${He}"]`));const nt=this.parent.element.querySelector(`.${En}[data-group-index="${l?He:He+1}"]`);if(nt&&(l&&d.getAttribute("data-guid")===L[0].getAttribute("data-guid")||!l&&d.getAttribute("data-guid")===L.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?nt.focus({preventScroll:!0}):nt.focus(),this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(0,E.le)(this.parent.virtualScrollModule)&&this.setScrollPosition(He),void o.preventDefault()}const he=this.parent.eventBase.getSelectedAppointments();if(he.length>0&&(d=he[he.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!l&&d.getAttribute("data-guid")===L[L.length-1].getAttribute("data-guid")||l&&d.getAttribute("data-guid")===L[0].getAttribute("data-guid"))return;return void(("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&(this.selectAppointment(l,d),o.preventDefault()))}const C=this.parent.getSelectedElements();if(C.length>0&&!d.classList.contains(Mn))return d=C[C.length-1],this.selectAppointmentElementFromWorkCell(l,d),void o.preventDefault();d&&!d.classList.contains(En)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(d,l)}processDelete(o){let l=document.activeElement;if("MonthAgenda"===this.parent.currentView){const d=this.parent.eventBase.getSelectedEvents().element;l=d&&(0,E.le)(d.length)?d:d[0]}if(l&&l.classList.contains(Mn)){if((0,E.cn)([l],w),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||l.classList.contains(Fl)||!this.parent.eventSettings.allowDeleting)return;this.parent.quickPopup.deleteClick(o)}}processCtrlShiftNavigationArrows(o){if(this.parent.activeViewOptions.group.resources.length>0&&document.activeElement.classList.contains(Mn)){const l=parseInt(document.activeElement.getAttribute("data-group-index"),10);let d="ctrlShiftLeftArrow"===o.action||"ctrlShiftUpArrow"===o.action?l-1:l+1;d=d<0?0:d>this.parent.resourceBase.lastResourceLevel.length?this.parent.resourceBase.lastResourceLevel.length:d;let y=[];for(;0===y.length&&d>=0&&d<=this.parent.resourceBase.lastResourceLevel.length;)y=[].slice.call(this.parent.element.querySelectorAll(`.${Mn}[data-group-index="${d}"]`)),d="ctrlShiftLeftArrow"===o.action||"ctrlShiftUpArrow"===o.action?d-1:d+1;const C=y[0];C&&(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.eventBase.addSelectedAppointments([C]),C.focus())}else if(this.parent.activeViewOptions.group.resources.length>0&&!document.activeElement.classList.contains(Mn)){const y=[].slice.call(this.parent.element.querySelectorAll(`.${Mn}[data-group-index="${this.parent.resourceBase.renderedResources[0].groupIndex}"]`));if(y.length>0){this.parent.eventBase.removeSelectedAppointmentClass();const C=y[0];this.parent.eventBase.addSelectedAppointments([C]),C.focus(),o.preventDefault()}}}processEscape(o){this.parent.quickPopup.onClosePopup(o),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()}isPreventAction(o){const l=(0,E.oq)(o.target,"."+Bt);return!(!this.parent.activeView.isTimelineView()||(0,E.le)(l))}processTabOnResourceCells(o,l){const d=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),y=d.indexOf(o),C=l?d[y-1]:d[y+1];if(C&&C.classList.contains(En)){const L=parseInt(C.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){const q=this.parent.element.querySelector("."+Yi);[].slice.call(this.parent.element.querySelectorAll("."+En)).forEach(he=>{he.getBoundingClientRect().top<q.getBoundingClientRect().top&&he.setAttribute("tabindex","-1")})}else this.setScrollPosition(L)}}setScrollPosition(o){const l=this.parent.element.querySelector(`.${xi}[data-group-index="${o}"]`);l&&(this.parent.element.querySelector("."+ee).scrollTop=l.offsetTop)}getModuleName(){return"keyboard"}destroy(){this.removeEventListener(),this.keyboardModule.destroy()}}class cu{constructor(o,l){this.initDataManager(o,l)}initDataManager(o,l){this.dataManager=o instanceof ns.hm?o:new ns.hm(o),this.query=l instanceof ns.AE?l:new ns.AE}generateQuery(o,l){const d=this.query.clone();return o&&d.addParams("StartDate",o.toISOString()),l&&d.addParams("EndDate",l.toISOString()),d}getData(o){return this.dataManager.executeQuery(o)}destroy(){this.dataManager=null,this.query=null}}class rd{firstDateOfMonth(o){return new Date(o.getFullYear(),o.getMonth())}lastDateOfMonth(o){return new Date(o.getFullYear(),o.getMonth()+1,0)}isMonthStart(o){return 1===o.getDate()}getLeapYearDaysCount(){return 366}getYearDaysCount(o,l){return(o.getFullYear()+l)%4==0?366:365}getDate(o){return o.getDate()}getMonth(o){return o.getMonth()+1}getFullYear(o){return o.getFullYear()}getYearLastDate(o,l){return new Date(o.getFullYear()+l,0,0)}getMonthDaysCount(o){return this.lastDateOfMonth(o).getDate()}getMonthStartDate(o){return new Date(o.getFullYear(),o.getMonth(),1,o.getHours(),o.getMinutes())}getMonthEndDate(o){return o.setDate(1),new Date(o.setMonth(o.getMonth()+1))}getExpectedDays(o,l){return l}setDate(o,l){o.setDate(l)}setValidDate(o,l,d,y,C){(0,E.le)(C)?o.setMonth(o.getMonth()+l,d):o.setMonth((C?y:o.getMonth())+l)}setMonth(o,l,d){o.setFullYear(o.getFullYear()),o.setMonth(l-1),o.setDate(d)}addYears(o,l){o.setFullYear(o.getFullYear()+l)}isSameMonth(o,l){return o.getMonth()===l.getMonth()}checkMonth(o,l){return-1===l.indexOf(o.getMonth()+1)}compareMonth(o,l){return o.getMonth()>l.getMonth()}isSameYear(o,l){return o.getFullYear()===l.getFullYear()}isLastMonth(o){return 11===o.getMonth()}isLeapYear(o,l){return(o+l)%4==0}}class mh{firstDateOfMonth(o){const l=this.getHijriDate(o);return E.hv.toGregorian(l.year,l.month,1)}lastDateOfMonth(o){const l=this.getHijriDate(o),d=this.getDaysInMonth(l.month,l.year),y=E.hv.toGregorian(l.year,l.month,d);let C=new Date(y.getTime());C=new Date(C.setDate(C.getDate()+1));let L=this.getHijriDate(C);return l.month===L.month?C:(L=this.getHijriDate(y),l.month===L.month?y:new Date(y.setDate(y.getDate()-1)))}isMonthStart(o){return 1===this.getHijriDate(o).date}getLeapYearDaysCount(){return 355}getYearDaysCount(o,l){const d=this.getHijriDate(o);return this.isLeapYear(d.year,l)?355:354}getDate(o){return this.getHijriDate(o).date}getMonth(o){return this.getHijriDate(o).month}getFullYear(o){return this.getHijriDate(o).year}getYearLastDate(o,l){const d=this.getHijriDate(o);return E.hv.toGregorian(d.year+l,1,0)}getMonthDaysCount(o){const l=this.lastDateOfMonth(o);return this.getHijriDate(l).date}getMonthStartDate(o){const l=this.firstDateOfMonth(o);return new Date(l.getFullYear(),l.getMonth(),l.getDate(),o.getHours(),o.getMinutes())}getMonthEndDate(o){const l=this.lastDateOfMonth(o);return l.setDate(l.getDate()+1),new Date(l.setMonth(l.getMonth()))}getExpectedDays(o,l){const d=this.getHijriDate(o),y=[];for(let C=0;C<l.length;C++){const L=E.hv.toGregorian(d.year,d.month,l[C]);y.push(L.getDate())}return y}setDate(o,l){const d=this.getHijriDate(o),y=E.hv.toGregorian(d.year,d.month,l);this.updateDateObj(o,y)}setValidDate(o,l,d,y,C){const L=(0,E.le)(C)?o:this.firstDateOfMonth(C),q=this.getHijriDate(L),X=E.hv.toGregorian(q.year,q.month+l,d);this.updateDateObj(o,X)}setMonth(o,l,d){const y=this.getHijriDate(o),C=E.hv.toGregorian(y.year,l,d);this.updateDateObj(o,C)}addYears(o,l,d){const y=this.getHijriDate(o),C=E.hv.toGregorian(y.year+l,d,1);this.updateDateObj(o,C)}isSameMonth(o,l){const d=this.getHijriDate(o),y=this.getHijriDate(l);return d.month===y.month}checkMonth(o,l){const d=this.getHijriDate(o);return-1===l.indexOf(d.month)}compareMonth(o,l){const d=this.getHijriDate(o),y=this.getHijriDate(l);return d.month>y.month}isSameYear(o,l){const d=this.getHijriDate(o),y=this.getHijriDate(l);return d.year===y.year}isLastMonth(o){return 12===this.getHijriDate(o).month}updateDateObj(o,l){o.setFullYear(l.getFullYear(),l.getMonth(),l.getDate())}isLeapYear(o,l){return(14+11*(o+l))%30<11}getDaysInMonth(o,l){let d=0;return d=29+(o+1)%2,11===o&&this.isLeapYear(l,0)&&d++,d}getHijriDate(o){return E.hv.getHijriDate(o)}}class $u{constructor(){this.timezoneData=[],this.timezoneData=this.getTimezoneData()}offset(o,l){const d=o.getTimezoneOffset();try{const y=new Date(o.toLocaleString("en-US",{timeZone:l}));return isNaN(y.getTime())?0:(o.getTime()-y.getTime())/6e4+d}catch{return 0}}convert(o,l,d){"string"==typeof l&&(l=this.offset(o,l)),"string"==typeof d&&(d=this.offset(o,d));const y=o.getTimezoneOffset(),C=(o=new Date(o.getTime()+6e4*(l-d))).getTimezoneOffset();return new Date(o.getTime()+6e4*(C-y))}add(o,l){return this.convert(o,o.getTimezoneOffset(),l)}remove(o,l){return this.convert(o,l,o.getTimezoneOffset())}removeLocalOffset(o){return new Date(o.getTime()-6e4*o.getTimezoneOffset())}getLocalTimezoneName(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}getTimezoneData(){return sh}}const sh=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}];function od(ae,o,l){let d="";if(ae.monthDay.length)d+=ae.monthDay[0];else if(ae.day){const y=ae.setPosition-1;d+=l.getConstant(fu[y>-1?y:fu.length-1])+" "+Bs((0,E.NA)(_h[ae.day[0]],o),"single")}return d}function Zu(ae,o,l,d,y=dg,C=null,L="Gregorian",q=null,X=null){const he=_l(o);let He;ar=Vd(L);const Ve=[],nt=new Date(ae.getTime());Ac=[];const It=(0,E.le)(l)?[]:l.split(","),vt=new $u;if(It.forEach(mi=>{let Ni=Qp(mi);q&&X&&(Ni=vt.convert(new Date(Ni.getTime()),q,X)),Ac.push(new Date(Ni.getTime()).setHours(0,0,0,0))}),he.recExceptionCount=(0,E.le)(he.count)?0:Ac.length,Vh=C&&C>ae&&!he.count?new Date(new Date(C.getTime()).setHours(0,0,0)):null,!he.until&&Vh&&(He=new Date(Vh.getTime()),He.setDate(Vh.getDate()+y*he.interval),he.until=He),he.until&&ae>he.until)return Ve;switch(pu=y,function af(ae){for(;ja[0]!==ae;)np(ja)}(xl[d]),he.freq){case"DAILY":!function Xp(ae,o,l,d){const y=new Date(ae.getTime()),C=d.interval,L=Qh(ae,d);let q;const X=d.day;for(;Sa(y,o)&&(q=!0,q=Bh(y,d),!(q&&(X.indexOf(xl[y.getDay()])>-1||0===X.length)&&(Ku(l,y.getTime()),L&&l.length+d.recExceptionCount>=L)));)y.setDate(y.getDate()+C)}(nt,he.until,Ve,he);break;case"WEEKLY":!function Tm(ae,o,l,d){let y=new Date(ae.getTime());d.day.length||d.day.push(xl[ae.getDay()]);const C=d.interval,L=d.day,q=Qh(ae,d);let he,X=!0,He=[];if(L.length>1)for(((0,E.le)(d.wkst)||""===d.wkst)&&(d.wkst=ja[0]),he=xl.indexOf(d.wkst);Sa(y,o);){let Ve=xl.indexOf(xl[y.getDay()])-he;Ve=-1===Ve?6:Ve;const nt=os(y,-Ve);let It=os(nt,6),vt=new Date(y.getTime());for(It=Bi(It),vt=Bi(vt);It>=vt&&(L.indexOf(xl[y.getDay()])>-1&&He.push([y.getTime()]),!(q&&l.length+d.recExceptionCount>=q));)y.setDate(y.getDate()+1),vt=new Date(y.getTime()),vt=Bi(vt);if(y.setDate(y.getDate()-1),q&&l.length+d.recExceptionCount>=q)break;y.setDate(y.getDate()+1+7*(C-1)),za(He,X,ae,o,l,d),He=[]}else{for(y=Rl(ae,d.day);Sa(y,o)&&(X=Bh(y,d),X&&L.indexOf(xl[y.getDay()])>-1&&Ku(l,y.getTime()),!(q&&l.length+d.recExceptionCount>=q));)y.setDate(y.getDate()+7*C);za(He,X,ae,o,l,d),He=[]}}(nt,he.until,Ve,he);break;case"MONTHLY":ld(nt,he.until,Ve,he);break;case"YEARLY":!function Ca(ae,o,l,d){switch(function ag(ae){return ae.yearDay.length?"YEARDAY":ae.weekNo.length?"WEEKNO":"MONTH"}(d)){case"MONTH":ld(ae,o,l,d);break;case"WEEKNO":!function Ju(ae,o,l,d){let C,y=ar.getYearLastDate(ae,0);const L=Qh(ae,d);let q,X,he;const He=d.weekNo;let Ve,nt,It,vt=[];const mi=d.day;for(;Sa(y,o);){X=ja.indexOf(xl[y.getDay()]),he=6-X+1;for(let Ni=0;Ni<He.length;Ni++)for(Ve=He[Ni],Ve=Ve>0?Ve:53+Ve+1,nt=1===Ve?he:he+7*(Ve-1),It=1===Ve?he-7:he+7*(Ve-2);It<nt;)C=new Date(y.getTime()+Cn*It),(0===mi.length||mi.indexOf(xl[C.getDay()])>-1)&&((0,E.le)(d.setPosition)?Bd(q,ae,o,l,d,C.getTime()):vt.push([C.getTime()])),It++;if((0,E.le)(d.setPosition)||Xh(vt,q,ae,o,l,d),L&&l.length+d.recExceptionCount>=L)return;y=ar.getYearLastDate(C,d.interval),vt=[]}}(ae,o,l,d);break;case"YEARDAY":!function du(ae,o,l,d){let C,y=ar.getYearLastDate(ae,0);const L=Qh(ae,d);let q,he,X=[];const He=d.day;for(;Sa(y,o);){for(let Ve=0;Ve<d.yearDay.length;Ve++)he=d.yearDay[Ve],C=new Date(y.getTime()),he!==ar.getLeapYearDaysCount()&&he!==-ar.getLeapYearDaysCount()||ar.isLeapYear(ar.getFullYear(C),1)?(C.setDate(C.getDate()+(he<0?ar.getYearDaysCount(C,1)+1+he:he)),(0===He.length||He.indexOf(xl[C.getDay()])>-1)&&(null==d.setPosition?Bd(q,ae,o,l,d,C.getTime()):X.push([C.getTime()]))):C.setDate(C.getDate()+1);if((0,E.le)(d.setPosition)||Xh(X,q,ae,o,l,d),L&&l.length+d.recExceptionCount>=L)return;y=ar.getYearLastDate(C,d.interval),X=[]}}(ae,o,l,d)}}(nt,he.until,Ve,he)}return Ve}function Qp(ae){return new Date(ae.substr(0,4)+"-"+ae.substr(4,2)+"-"+ae.substr(6,5)+":"+ae.substr(11,2)+":"+ae.substr(13))}function Ku(ae,o){const l=new Date(o).setHours(0,0,0,0);-1===Ac.indexOf(l)&&(!Vh||l>=Vh.getTime())&&ae.push(o)}function Qh(ae,o){let l=pu;return o.count?l=o.count:o.until&&("DAILY"===o.freq||"WEEKLY"===o.freq?l=Math.floor((o.until.getTime()-ae.getTime())/Cn)+1:("MONTHLY"===o.freq||"YEARLY"===o.freq)&&(l=Math.floor((o.until.getMonth()+12*o.until.getFullYear()-(ae.getMonth()+12*ae.getFullYear()))/o.interval)+(o.day.length>1?Math.floor((o.until.getTime()-ae.getTime())/Cn)+1:1),"YEARLY"===o.freq&&(l=o.month.length>1?l*o.month.length:l))),l}function ld(ae,o,l,d){switch(d.month.length||d.day.length||d.monthDay.length?d.month.length>0&&!d.day.length&&!d.monthDay.length&&d.monthDay.push(ae.getDate()):(d.monthDay.push(ae.getDate()),"YEARLY"===d.freq&&d.month.push(ae.getMonth()+1)),function sp(ae){return ae.monthDay.length&&!ae.day.length?"date":!ae.monthDay.length&&ae.day.length?"day":"both"}(d)){case"day":switch(d.freq){case"MONTHLY":Nd(ae,o,l,d);break;case"YEARLY":!function sf(ae,o,l,d){const y=d.day,C=y.map(Ve=>Mc.test(Ve));if(y.length>1&&C.indexOf(!0)>-1)return void function Xu(ae,o,l,d){const y=d.day,C=Qh(ae,d);let L=new Date(ae.getTime());const q=d.interval;let He,It,vt,X=[],he=[],nt=0;L=ar.getMonthStartDate(L);let Ni=[];for(d.month.length&&ar.setMonth(L,d.month[0],1),L=Rl(L,d.day);Sa(L,o);){It=new Date(L.getTime());for(let Ki=0;Ki<=d.month.length;Ki++)for(let Ts=0;Ts<=y.length-1;Ts++){for(L=ar.getMonthStartDate(L),L=Rl(L,d.day),X=[];ar.isSameYear(It,L)&&C&&l.length+d.recExceptionCount<=C;)for(;ar.isSameYear(It,L);){if(It=new Date(L.getTime()),0===d.month.length||d.month.length>0&&d.month[Ki]===ar.getMonth(It)){const Hs=y[Ts].match(tc),Js=parseInt(Hs[0],10);for(vt=new Date(L.getTime());ar.isSameYear(vt,L)&&ar.isSameMonth(vt,L);)Hs[Hs.length-1]===xl[vt.getDay()]&&X.push([vt.getTime()]),vt.setDate(vt.getDate()+1);vt.setDate(vt.getDate()-1),He=Hs[0].indexOf("-")>-1?X.length- -1*Js:Js-1,He=isNaN(He)?0:He}nt=Tc(L,d,nt,undefined,1),L=Rl(L,d.day)}if(L=0===Ts&&vt?new Date(vt.getTime()):new Date(It.getTime()),X.length>0&&((0,E.le)(d.setPosition)?Xh(X,undefined,ae,o,l,d,He):he=[wa(X,He,Ni)]),C&&l.length+d.recExceptionCount>=C)return}(0,E.le)(d.setPosition)||(tp(he,undefined,ae,o,l,d),Ni=[]),ar.isLastMonth(L)?(ar.setValidDate(L,1,1),L.setFullYear(L.getFullYear()+q-1)):L.setFullYear(L.getFullYear()+q),L=Rl(L,d.day),d.month.length&&ar.setMonth(L,d.month[0],L.getDate())}}(ae,o,l,d);if(d.month.length&&1===y.length&&C.indexOf(!0)>-1)return void Nd(ae,o,l,d);let q,L=new Date(ae.getTime());const X=Qh(ae,d),he=d.interval;let He=[];for(d.month.length&&ar.setMonth(L,d.month[0],L.getDate()),(0,E.le)(d.setPosition)&&0===d.month.length&&0===d.weekNo.length&&L.setFullYear(ae.getFullYear(),0,1),L=ar.getMonthStartDate(L),L=Rl(L,d.day);Sa(L,o);){for(q=new Date(L.getTime());ar.isSameYear(q,L)&&X&&l.length+d.recExceptionCount<=X;)for(q=new Date(L.getTime());ar.isSameYear(q,L);){if(!(0===d.month.length||d.month.length>0&&!ar.checkMonth(L,d.month))){ar.setValidDate(L,1,1),L=Rl(L,d.day);break}if(y.length>1){if(ar.compareMonth(q,L)){ar.setValidDate(L,1,1),L=Rl(L,d.day);break}y.indexOf(xl[q.getDay()])>-1&&He.push([q.getTime()]),q.setDate(q.getDate()+1)}else{if(q.getFullYear()>L.getFullYear()){ar.setValidDate(L,1,1),L=Rl(L,d.day);break}const Ve=xc(y[0]);xl[q.getDay()]===Ve&&new Date(q.getFullYear(),q.getMonth(),0)>new Date(ae.getFullYear())&&He.push([q.getTime()]),q.setDate(q.getDate()+7)}}if(L.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()),lf(He,ae,o,l,d),ar.isLastMonth(L)&&(ar.setValidDate(L,1,1),L=Rl(L,d.day)),L.setFullYear(L.getFullYear()+he-1),X&&l.length+d.recExceptionCount>=X)return;L=Rl(L,d.day),He=[]}}(ae,o,l,d)}break;case"both":case"date":switch(d.freq){case"MONTHLY":hg(ae,o,l,d);break;case"YEARLY":!function ef(ae,o,l,d){if(d.month.length)return void hg(ae,o,l,d);const y=Qu(ae,d);let C;for(y.tempDate=y.mainDate=ar.getMonthStartDate(y.tempDate);Sa(y.tempDate,o);){for(C=new Date(y.tempDate.getTime());ar.isSameYear(C,y.tempDate)&&y.expectedCount&&l.length+d.recExceptionCount<=y.expectedCount;){if(!(0===d.month.length||d.month.length>0&&!ar.checkMonth(y.tempDate,d.month))){ar.setValidDate(y.tempDate,1,1),y.tempDate=Rl(y.tempDate,d.day);break}cg(d,y,o,!1),y.beginDate=new Date(y.tempDate.getTime()),y.monthInit=Tc(y.tempDate,d,y.monthInit,y.beginDate)}if(y.tempDate.setFullYear(C.getFullYear(),C.getMonth(),C.getDate()),za(y.dateCollection,y.state,ae,o,l,d),ar.isLastMonth(y.tempDate)&&(ar.setValidDate(y.tempDate,1,1),y.tempDate=Rl(y.tempDate,d.day)),y.expectedCount&&l.length+d.recExceptionCount>=y.expectedCount)return;y.tempDate.setFullYear(y.tempDate.getFullYear()+d.interval-1),y.tempDate=Rl(y.tempDate,d.day),y.monthInit=Tc(y.tempDate,d,y.monthInit,y.beginDate),y.dateCollection=[]}}(ae,o,l,d)}}}function Qu(ae,o){const l={monthCollection:[],index:0,tempDate:new Date(ae.getTime()),mainDate:new Date(ae.getTime()),expectedCount:Qh(ae,o),monthInit:0,dateCollection:[]};return o.month.length&&ar.setMonth(l.tempDate,o.month[0],l.tempDate.getDate()),l}function hg(ae,o,l,d){const y=Qu(ae,d);if(y.tempDate=y.mainDate=ar.getMonthStartDate(y.tempDate),!(("MONTHLY"===d.freq&&12===d.interval||"YEARLY"===d.freq)&&ar.getMonthDaysCount(ae)<d.monthDay[0]))for(;Sa(y.tempDate,o);){if(y.beginDate=new Date(y.tempDate.getTime()),cg(d,y,o,!0,ae,l),(0,E.le)(d.setPosition)||Xh(y.dateCollection,y.state,ae,o,l,d),y.expectedCount&&l.length+d.recExceptionCount>=y.expectedCount)return;y.monthInit=Tc(y.tempDate,d,y.monthInit,y.beginDate),y.dateCollection=[]}}function cg(ae,o,l,d,y,C){for(let L=0;L<ae.monthDay.length;L++){o.date=ae.monthDay[L],o.tempDate=ar.getMonthStartDate(o.tempDate);const q=ar.getMonthDaysCount(o.tempDate);if(o.date=o.date>0?o.date:q+o.date+1,ec(o.tempDate,o.date,o.mainDate)&&o.date>0){if(ar.setDate(o.tempDate,o.date),l&&o.tempDate>l)return;(0===ae.day.length||ae.day.indexOf(xl[o.tempDate.getDay()])>-1)&&(d&&(0,E.le)(ae.setPosition)&&o.expectedCount&&C.length+ae.recExceptionCount<o.expectedCount?Bd(o.state,y,l,C,ae,o.tempDate.getTime()):o.dateCollection.push([o.tempDate.getTime()]))}}}function Tc(ae,o,l,d=null,y){let C=d?d.getMonth():0;const L=ar.getMonthStartDate(ae);return y=(0,E.le)(y)?o.interval:y,ae.setFullYear(L.getFullYear()),ae.setMonth(L.getMonth()),ae.setDate(L.getDate()),o.month.length?(l++,ar.setMonth(ae,o.month[l%=o.month.length],1),0===l&&ar.addYears(ae,y,o.month[0])):(d&&d.getFullYear()<ae.getFullYear()&&(C=ae.getMonth()-1),ar.setValidDate(ae,y,1,C,d)),l}function Nd(ae,o,l,d){if(d.day.length>1)return void function tf(ae,o,l,d){const y=d.day;let C=new Date(ae.getTime());C=ar.getMonthStartDate(C);let he,He,L=[],q=[],X=[];const Ve=Qh(ae,d);let It,nt=0;for(d.month.length&&ar.setMonth(C,d.month[0],1),C=Rl(C,d.day);Sa(C,o)&&Ve&&l.length+d.recExceptionCount<Ve;){const vt=new Date(C.getTime());if(y.map(Ni=>Mc.test(Ni)).indexOf(!0)>-1){for(let Ni=0;Ni<=y.length-1;Ni++){const Ki=y[Ni].match(tc),Ts=parseInt(Ki[0],10);for(C=new Date(C.getTime()),C=ar.getMonthStartDate(C),C=Rl(C,y),vt.setFullYear(C.getFullYear(),C.getMonth(),C.getDate());ar.isSameYear(vt,C)&&ar.isSameMonth(vt,C);)Ki[Ki.length-1]===xl[vt.getDay()]&&L.push([vt.getTime()]),vt.setDate(vt.getDate()+1);if(vt.setDate(vt.getDate()-1),he=Ki[0].indexOf("-")>-1?L.length- -1*Ts:Ts-1,he=isNaN(he)?0:he,L.length>0&&((0,E.le)(d.setPosition)?Xh(L,He,ae,o,l,d,he):q=[wa(L,he,X)]),Ve&&l.length+d.recExceptionCount>=Ve)return;L=[]}(0,E.le)(d.setPosition)||(tp(q,He,ae,o,l,d),X=[]),nt=Tc(C,d,nt,It),C=Rl(C,d.day),L=[]}else{let Ni=[];const Ki=ip(y);vt.setFullYear(C.getFullYear(),C.getMonth(),C.getDate());const Ts=new Date(C.getTime());for(It=new Date(C.getTime());ar.isSameMonth(Ts,C);)Ni.push(C.getTime()),y.indexOf(xl[C.getDay()])>-1&&(L.push(Ni),Ni=[]),C.setDate(C.getDate()+Ki[xl[C.getDay()]]);if(he=d.setPosition<1?L.length+d.setPosition:d.setPosition-1,(0,E.le)(d.setPosition)){he=0;const Hs=[];for(let Js=0;Js<L.length;Js++)for(let Fn=0;Fn<L[Js].length;Fn++)Hs.push(L[Js][Fn]);L=[Hs]}if(L.length>0&&Xh(L,He,ae,o,l,d,he),Ve&&l.length+d.recExceptionCount>=Ve)return;nt=Tc(C,d,nt,It),C=Rl(C,d.day),L=[]}}}(ae,o,l,d);let C=new Date(ae.getTime());const L=Qh(ae,d);let X,q=[],he=0;for(C=ar.getMonthStartDate(C),d.month.length&&ar.setMonth(C,d.month[0],1),C=Rl(C,d.day);Sa(C,o)&&L&&l.length+d.recExceptionCount<L;){X=new Date(C.getTime());const He=new Date(C.getTime());for(;ar.isSameMonth(C,He);)q.push([He.getTime()]),He.setDate(He.getDate()+7);lf(q,ae,o,l,d),he=Tc(C,d,he,X),C=Rl(C,d.day),q=[]}}function za(ae,o,l,d,y,C){let L=C.setPosition<1?ae.length+C.setPosition:C.setPosition-1;(0,E.le)(C.setPosition)&&(L=0,ae=rf(ae)),ae.length>0&&Xh(ae,o,l,d,y,C,L)}function rf(ae){const o=[];for(let l=0;l<ae.length;l++)for(let d=0;d<ae[l].length;d++)o.push(new Date(ae[l][d]).getTime());return o.length>0?[o]:[]}function lf(ae,o,l,d,y){let L,q=[],X=[];const he=function nf(ae,o){let l;const d={monthCollection:[],index:0};if(1===o.length){const y=o[0].match(tc);let C;y.length>1?(C=parseInt(y[0],10),l=C<1?ae.length+C:C-1):(l=0,ae=rf(ae))}else l=0,ae=rf(ae);return d.monthCollection=ae,d.index=l,d}(ae,y.day);ae=he.monthCollection;const He=he.index;null!=y.setPosition?(X=[wa(ae,He,q)],tp(X,L,o,l,d,y)):ae.length>0&&Xh(ae,L,o,l,d,y,He),q=[]}function wa(ae,o,l){for(let d=0;d<ae[o].length;d++)l.push(ae[o][d]);return l}function Bd(ae,o,l,d,y,C){const L=Qh(o,y),q=new Date(C);ae=Bh(q,y),q>=o&&Sa(q,l)&&ae&&L&&d.length+y.recExceptionCount<L&&Ku(d,C)}function ep(ae,o,l,d,y){const C=o||0,L=new Date(ae,y.month[0]-1,1),X=new Date(ae,y.month[0]-1,0).getDate(),He=(L.getDay()-C+7)%7+X,Ve=Math.ceil(He/7)-1;return Bh(new Date(l[d][Ve]),y)?Ve:Ve-1}function tp(ae,o,l,d,y,C){if(ae.length>0)for(let L=0;L<ae.length;L++){ae[L].sort();const X=C.day.map(nt=>Mc.test(nt)),he="YEARLY"===C.freq&&C.validRules.indexOf("BYMONTH")>-1&&!(X.indexOf(!0)>-1)?ep(new Date(ae[0][0]).getFullYear(),0,ae,L,C):ae[L].length+C.setPosition;Bd(o,l,d,y,C,ae[L][C.setPosition<1?he:C.setPosition-1])}}function Xh(ae,o,l,d,y,C,L){if(ae.length>0){ae[L=(0,E.le)(L)?C.setPosition<1?ae.length+C.setPosition:C.setPosition-1:L].sort();for(let q=0;q<ae[L].length;q++)Bd(o,l,d,y,C,ae[L][q])}}function Sa(ae,o){return!o||ae<=o}function xc(ae){return ae.replace(kc,"")}function Rl(ae,o){const l=new Date(ae.getTime());let d;if(o.length>0){const y=[];for(let C=0;C<=o.length-1;C++)d=xc(o[C]),y.push(d);if(-1===y.indexOf(xl[l.getDay()]))do{l.setDate(l.getDate()+1)}while(-1===y.indexOf(xl[l.getDay()]))}return l}function _l(ae){const o={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},l=ae.split(";");let y,d=[];if(l.forEach(C=>{switch(d=C.split("="),d[0]){case"UNTIL":y=d[1],o.until=Qp(y);break;case"BYDAY":o.day=d[1].split(","),o.validRules.push(d[0]);break;case"BYMONTHDAY":o.monthDay=d[1].split(",").map(Number),o.validRules.push(d[0]);break;case"BYMONTH":o.month=d[1].split(",").map(Number),o.validRules.push(d[0]);break;case"BYYEARDAY":o.yearDay=d[1].split(",").map(Number),o.validRules.push(d[0]);break;case"BYWEEKNO":o.weekNo=d[1].split(",").map(Number),o.validRules.push(d[0]);break;case"INTERVAL":o.interval=parseInt(d[1],10);break;case"COUNT":o.count=parseInt(d[1],10);break;case"BYSETPOS":o.setPosition=parseInt(d[1],10)>4?-1:parseInt(d[1],10);break;case"FREQ":o.freq=d[1];break;case"WKST":o.wkst=d[1]}}),"MONTHLY"===o.freq&&0===o.monthDay.length){const C=o.validRules.indexOf("BYDAY");o.validRules.splice(C,1)}return o}function ec(ae,o,l){return o<=ar.getMonthDaysCount(ae)&&ae>=l}function ip(ae){const o={};return ae.forEach((l,d)=>{if(d===ae.length-1){const y=ja.indexOf(l);let C=y;for(;C%7!==ja.indexOf(ae[0]);)C++;o[l]=C-y}else o[l]=ja.indexOf(ae[d+1])-ja.indexOf(l)}),o}function np(ae){const o=ae.shift();ae.push(o)}function Bh(ae,o){let l=!0;const d=o.day,y=o.month,C=ar.getExpectedDays(ae,o.monthDay),L=o.yearDay;return o.validRules.forEach(q=>{switch(q){case"BYDAY":(function Ea(ae,o){const l=[];return o.forEach(d=>{const y=d.match(tc);l.push(2===y.length?y[1]:y[0])}),-1===l.indexOf(xl[ae])})(ae.getDay(),d)&&(l=!1);break;case"BYMONTH":ar.checkMonth(ae,y)&&(l=!1);break;case"BYMONTHDAY":(function uu(ae,o){const l=o.slice(0);let d;const y=ar.getMonthDaysCount(ae);for(d=l.shift();d;){if(d<0&&(d=d+y+1),d===ae.getDate())return!1;d=l.shift()}return!0})(ae,C)&&(l=!1);break;case"BYYEARDAY":(function da(ae,o){const l=o.slice(0);let d;const y=function Nh(ae){ad[ar.getFullYear(ae)]||(ad[ar.getFullYear(ae)]=ar.getYearLastDate(ae,0));const o=ad[ar.getFullYear(ae)],l=ae.getTime()-o.getTime();return Math.ceil(l/Cn)}(ae);for(d=l.shift();d;){if(d<0&&(d=d+ar.getYearDaysCount(ae,0)+1),d===y)return!1;d=l.shift()}return!0})(ae,L)&&(l=!1)}}),l}function Vd(ae){return"Islamic"===ae?new mh:new rd}const ad={};let Ac;const ja=["SU","MO","TU","WE","TH","FR","SA"];let pu,Vh,ar;const xl=["SU","MO","TU","WE","TH","FR","SA"],dg=43,fu=["first","second","third","fourth","last"],Ic="summaryOn",_h={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},Mc=/\d/,kc=/[^A-Z]+/,tc=/[a-z]+|[^a-z]+/gi;function nh(ae){return[ae.getUTCFullYear(),_d(ae.getUTCMonth()+1),_d(ae.getUTCDate()),"T",_d(ae.getUTCHours()),_d(ae.getUTCMinutes()),_d(ae.getUTCSeconds()),"Z"].join("")}function _d(ae){return("0"+ae).slice(-2)}class op{constructor(o){this.slots=[],this.isDoubleTapped=!1,this.parent=o}processData(o,l,d){const y=this.parent.activeView.startDate(),C=this.parent.activeView.endDate(),L=this.parent.eventFields;let q=[],X=1,he=!1;const He=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];o.length>0&&(0,E.le)(o[0][L.id])&&(he=!0);for(let It of o){he&&(It[L.id]=X++),It=this.updateEventDateTime(It),l?this.processTimezoneChange(It,d):!this.parent.isPrinting&&!this.parent.uiStateValues.isResize&&(It=this.processTimezone(It));for(let vt=0;vt<He.length;vt++)(null===It[He[vt].field]||0===It[He[vt].field])&&(It[He[vt].field]=void 0);if(!(0,E.le)(It[L.recurrenceRule])&&""===It[L.recurrenceRule]&&(It[L.recurrenceRule]=null),(0,E.le)(It[L.recurrenceRule])||!(0,E.le)(It[L.recurrenceID])||this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)if(!(0,E.le)(It[L.recurrenceRule])&&(0,E.le)(It[L.recurrenceID])){const vt=this.generateOccurrence(It,null,d,!0);for(const mi of vt){const Ni=this.parent.eventsProcessed.filter(Ki=>Ki[L.startTime].getTime()-mi[L.startTime].getTime()==0&&Ki[L.id]===mi[L.id]);mi.Guid=Ni.length>0?Ni[0].Guid:this.generateGuid(),q.push(mi)}}else{const vt=this.parent.eventsProcessed.filter(mi=>mi[this.parent.eventFields.id]===It[this.parent.eventFields.id]);It.Guid=vt.length>0?vt[0].Guid:this.generateGuid(),q.push(It)}else It.Guid=this.generateGuid(),q.push(It);else q=q.concat(this.generateOccurrence(It,null,d,!0))}this.parent.eventsProcessed=[];const Ve=q.filter(It=>!It[this.parent.eventFields.isBlock]);this.parent.eventsProcessed=this.filterEvents(y,C,Ve);const nt=q.filter(It=>It[this.parent.eventFields.isBlock]);for(const It of nt)It[L.isAllDay]&&(Bi(new Date(It[L.startTime].getTime()))<Bi(new Date(It[L.endTime].getTime()))||(It[L.startTime]=Bi(It[L.startTime]),It[L.endTime]=os(Bi(It[L.endTime]),1)));return this.parent.blockProcessed=nt,Ve}updateEventDateTime(o){return"string"==typeof o[this.parent.eventFields.startTime]&&(o[this.parent.eventFields.startTime]=to(o[this.parent.eventFields.startTime])),"string"==typeof o[this.parent.eventFields.endTime]&&(o[this.parent.eventFields.endTime]=to(o[this.parent.eventFields.endTime])),o}getProcessedEvents(o=this.parent.eventsData){let l=[];for(const d of o)!(0,E.le)(d[this.parent.eventFields.recurrenceRule])&&(0,E.le)(d[this.parent.eventFields.recurrenceID])?l=l.concat(this.generateOccurrence(d)):l.push(d);return l}timezonePropertyChange(o){const l=this.parent.eventsData.concat(this.parent.blockData),d=this.processData(l,!0,o);this.parent.notify(Ln,{processedData:d})}timezoneConvert(o){const l=this.parent.eventFields;if(o[l.startTimezone]=o[l.startTimezone]||o[l.endTimezone],o[l.endTimezone]=o[l.endTimezone]||o[l.startTimezone],this.parent.timezone){const y=o[l.endTimezone];o[l.startTime]=this.parent.tzModule.convert(o[l.startTime],this.parent.timezone,o[l.startTimezone]),o[l.endTime]=this.parent.tzModule.convert(o[l.endTime],this.parent.timezone,y)}}processTimezoneChange(o,l){const d=this.parent.eventFields;o[d.isAllDay]||(l&&this.parent.timezone?(o[d.startTime]=this.parent.tzModule.convert(o[d.startTime],l,this.parent.timezone),o[d.endTime]=this.parent.tzModule.convert(o[d.endTime],l,this.parent.timezone)):!l&&this.parent.timezone?(o[d.startTime]=this.parent.tzModule.add(o[d.startTime],this.parent.timezone),o[d.endTime]=this.parent.tzModule.add(o[d.endTime],this.parent.timezone)):l&&!this.parent.timezone&&(o[d.startTime]=this.parent.tzModule.remove(o[d.startTime],l),o[d.endTime]=this.parent.tzModule.remove(o[d.endTime],l)))}processTimezone(o,l=!1){const d=this.parent.eventFields;if(o[d.startTimezone]||o[d.endTimezone]){const y=o[d.startTimezone]||o[d.endTimezone],C=o[d.endTimezone]||o[d.startTimezone];l?this.parent.timezone?(o[d.startTime]=this.parent.tzModule.convert(o[d.startTime],y,this.parent.timezone),o[d.endTime]=this.parent.tzModule.convert(o[d.endTime],C,this.parent.timezone),o[d.startTime]=this.parent.tzModule.remove(o[d.startTime],this.parent.timezone),o[d.endTime]=this.parent.tzModule.remove(o[d.endTime],this.parent.timezone)):(o[d.startTime]=this.parent.tzModule.remove(o[d.startTime],y),o[d.endTime]=this.parent.tzModule.remove(o[d.endTime],C)):(o[d.startTime]=this.parent.tzModule.add(o[d.startTime],y),o[d.endTime]=this.parent.tzModule.add(o[d.endTime],C),this.parent.timezone&&(o[d.startTime]=this.parent.tzModule.convert(o[d.startTime],y,this.parent.timezone),o[d.endTime]=this.parent.tzModule.convert(o[d.endTime],C,this.parent.timezone)))}else this.parent.timezone&&(l?(o[d.startTime]=this.parent.tzModule.remove(o[d.startTime],this.parent.timezone),o[d.endTime]=this.parent.tzModule.remove(o[d.endTime],this.parent.timezone)):(o[d.startTime]=this.parent.tzModule.add(o[d.startTime],this.parent.timezone),o[d.endTime]=this.parent.tzModule.add(o[d.endTime],this.parent.timezone)));return o}filterBlockEvents(o){const l=this.parent.eventFields,d=o[l.startTime],y=o[l.endTime];let C;if(this.parent.activeViewOptions.group.resources.length>0){const q=this.getGroupIndexFromEvent(o);C=this.parent.resourceBase.lastResourceLevel[q]}const L=(0,E.l7)([],this.parent.blockProcessed,null,!0);for(const q of L)q[l.isAllDay]&&q[l.endTime].getTime()>Bi(new Date(q[l.endTime].getTime())).getTime()&&(q[l.startTime]=Bi(q[l.startTime]),q[l.endTime]=os(Bi(q[l.endTime]),1));return this.filterEvents(d,y,L,C)}filterEvents(o,l,d=this.parent.eventsProcessed,y){const C=this.parent.eventFields,L=new ns.$G(C.startTime,"greaterthanorequal",o).and(new ns.$G(C.endTime,"greaterthanorequal",o)).and(new ns.$G(C.startTime,"lessthan",l)).or(new ns.$G(C.startTime,"lessthanorequal",o).and(new ns.$G(C.endTime,"greaterthan",o)));let q=new ns.hm({json:d}).executeLocal((new ns.AE).where(L));return y&&(q=this.filterEventsByResource(y,q)),this.sortByTime(q)}filterEventsByRange(o,l,d){let y=[];return y=l&&d?this.filterEvents(l,d,o):l&&!d?o.filter(C=>C[this.parent.eventFields.startTime]>=l):!l&&d?o.filter(C=>C[this.parent.eventFields.endTime]<=d):o,this.sortByTime(y)}filterEventsByResource(o,l=this.parent.eventsProcessed){const d={},y=this.parent.resourceBase.resourceCollection;for(let q=0;q<y.length;q++)d[y[q].field]=o.groupOrder[q];const C=Object.keys(d);return l.filter(q=>C.every(X=>q[X]instanceof Array?q[X].indexOf(d[X])>-1:q[X]===d[X]))}sortByTime(o){if(this.parent.eventSettings.sortComparer)o=this.parent.eventSettings.sortComparer.call(this.parent,o);else{const l=this.parent.eventFields;o.sort((d,y)=>{const L=y[l.startTime];return d[l.startTime].getTime()-L.getTime()})}return o}sortByDateTime(o){if(this.parent.eventSettings.sortComparer)o=this.parent.eventSettings.sortComparer.call(this.parent,o);else{const l=this.parent.eventFields;o.sort((d,y)=>{const C=d[l.startTime],L=y[l.startTime],X=y[l.endTime],he=d[l.endTime].getTime()-C.getTime(),He=X.getTime()-L.getTime();return C.getTime()-L.getTime()||He-he})}return o}getSmallestMissingNumber(o){const l=Math.max(...o);for(let d=0;d<l;d++)if(-1===o.indexOf(d))return d;return l+1}splitEventByDay(o){const l=this.parent.eventFields,d=[],y=o[l.startTime],C=o[l.endTime];if(Bi(new Date(y.getTime()))<Bi(new Date(C.getTime()))){let q=new Date(y.getTime()),X=os(Bi(new Date(y.getTime())),1);const he=0===C.getHours()&&0===C.getMinutes()?C:os(C,1);let He=1;const Ve=Er(y.getTime(),he.getTime());for(;X<=C&&q.getTime()!==X.getTime();){const nt=(0,E.l7)({},o);nt[l.startTime]=q,nt[l.endTime]=X,nt.data={index:He,count:Ve},nt.Guid=this.generateGuid(),nt.isSpanned=!0,d.push(nt),q=X,Bi(new Date(q.getTime())).getTime()===Bi(new Date(C.getTime())).getTime()&&X.getTime()!==C.getTime()?(X=new Date(q.getTime()),X=new Date(X.setHours(C.getHours(),C.getMinutes(),C.getSeconds()))):X=os(Bi(new Date(q.getTime())),1),He++}}else d.push(o);return d}splitEvent(o,l){const d=this.parent.eventFields;let y=Bi(o[d.startTime]).getTime(),C=Bi(o[d.endTime]).getTime();if(Vn(o[d.endTime])<=0){const he=os(Bi(o[d.endTime]),-1).getTime();C=y>he?y:he}const L=y,q=C,X=[];if(y!==C){y<l[0].getTime()&&(y=l[0].getTime()),C>l[l.length-1].getTime()&&(C=l[l.length-1].getTime());let he=y;for(let He=0;He<this.slots.length;He++){let Ve=this.slots[He];if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){const It=[];for(const mi of Ve)It.push(new Date(mi));const vt=this.getRenderedDates(It);if(!(0,E.le)(vt)&&vt.length>0){Ve=[];for(const mi of vt)Ve.push(mi.getTime())}}if("number"==typeof Ve){const It=Ve;Ve=[],Ve.push(It)}const nt=Ve[0];if(he=he<=nt&&C>=nt?nt:he,he>C||nt>C)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView){const It=Ve.indexOf(he);if(-1!==It){let vt=Ve.indexOf(C);const mi=-1!==vt;if(vt=mi?vt:Ve.length-1,X.push(this.cloneEventObject(o,Ve[It],Ve[vt],vt-It+1,Ve[It]!==L,Ve[vt]!==q)),mi)break}}else if(this.dateInRange(he,Ve[0],Ve[Ve.length-1])){const It=[];for(let vt=0;vt<Ve.length;vt++)this.dateInRange(Ve[vt],L,q)&&It.push(Ve[vt]);if(It.length>0)if(this.parent.activeViewOptions.group.byDate)for(const vt of It)X.push(this.cloneEventObject(o,vt,vt,1,vt!==L,vt!==q));else X.push(this.cloneEventObject(o,It[0],It[It.length-1],It.length,It[0]!==L,It[It.length-1]!==q))}}}else X.push(this.cloneEventObject(o,y,C,1,!1,!1));return X}cloneEventObject(o,l,d,y,C,L){const q=this.parent.eventFields,X=(0,E.l7)({},o,null,!0),he={count:y,isLeft:C,isRight:L};return he[q.startTime]=o[q.startTime],he[q.endTime]=o[q.endTime],X.data=he,X[q.startTime]=new Date(l),X[q.endTime]=new Date(d),X}dateInRange(o,l,d){return l<=o&&o<=d}getSelectedEventElements(o){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(o);else if(this.parent.selectedElements.filter(d=>d.getAttribute("data-guid")===o.getAttribute("data-guid")).length<=0){const d='div[data-guid="'+o.getAttribute("data-guid")+'"]',y=[].slice.call(this.parent.element.querySelectorAll(d));for(const C of y)this.parent.selectedElements.push(C)}else{const d=this.parent.selectedElements.filter(y=>y.getAttribute("data-guid")!==o.getAttribute("data-guid"));this.parent.selectedElements=d}return o&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements}getSelectedEvents(){const o=[],l=[];return[].slice.call(this.parent.element.querySelectorAll("."+w)).filter(y=>{0===o.filter(L=>L.Guid===y.getAttribute("data-guid")).length&&o.push(this.getEventByGuid(y.getAttribute("data-guid"))),l.push(y)}),{event:o.length>1?o:o[0],element:l.length>1?l:l[0]}}removeSelectedAppointmentClass(){const o=this.getSelectedAppointments();for(const l of o)l.setAttribute("aria-selected","false");(0,E.IV)(o,w),("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&(0,E.IV)(o,Ke)}addSelectedAppointments(o){for(const l of o)l.setAttribute("aria-selected","true");"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass(),(0,E.cn)(o,w)}getSelectedAppointments(){return[].slice.call(this.parent.element.querySelectorAll("."+w+",."+Mn+":focus"))}focusElement(o){if(this.parent.eventWindow.dialogObject&&this.parent.eventWindow.dialogObject.visible)return;const l=document.activeElement,d=this.parent.getSelectedElements();if(d.length>0&&(l&&(this.parent.element.contains(l)||-1!==d.indexOf(l))||o)){if(this.parent.keyboardInteractionModule){const C=!(0,E.le)(this.parent.activeCellsData)&&this.parent.activeCellsData.element||d[d.length-1];this.parent.keyboardInteractionModule.selectCells(C instanceof Array,C)}return}const y=this.getSelectedAppointments();y.length>0&&y[y.length-1].focus()}selectWorkCellByTime(o){let l;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return l;if(o.length>0){const d=o[o.length-1],y=d[this.parent.eventFields.startTime];let C=new Date(+y).setMinutes(0,0,0);const L=this.isAllDayAppointment(d);let q;("Month"===this.parent.currentView||L)&&(C=new Date(+y).setHours(0,0,0,0)),q=L&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();let X='[data-date="'+new Date(C).getTime()+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(X+='[data-group-index="'+this.getGroupIndexFromEvent(d)+'"]'),l=q.querySelector(X),l)return this.parent.activeCellsData=this.parent.getCellDetails(l),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,l),l}return l}getGroupIndexFromEvent(o){let l,d,y,C;for(let q=this.parent.resourceBase.resourceCollection.length-1;q>=0;q--)if(!(0,E.le)(o[this.parent.resourceBase.resourceCollection[q].field])){d=this.parent.resourceBase.resourceCollection[q],l=q,y=d.name,C=d.field;break}(0,E.le)(y)&&(0,E.le)(l)&&(y=this.parent.resourceCollection.slice(-1)[0].name,l=this.parent.resourceCollection.length-1,C=this.parent.resourceCollection.slice(-1)[0].field,d=this.parent.resourceCollection.filter((q,X)=>q.name===y?(l=X,q):null)[0]);const L=o[C]instanceof Array?o[C][0]:o[C];return l>0?this.parent.resourceBase.getIndexFromResourceId(L,y,d,o,this.parent.resourceCollection[l-1].field):this.parent.resourceBase.getIndexFromResourceId(L,y,d)}isAllDayAppointment(o){const l=this.parent.eventFields,d=o[l.isAllDay],y=(o[l.endTime].getTime()-o[l.startTime].getTime())/Cn>=1;return!!(d||"TimeSlot"!==this.parent.eventSettings.spannedEventPlacement&&y)}addEventListener(){this.parent.on($n,this.appointmentBorderRemove,this)}removeEventListener(){this.parent.off($n,this.appointmentBorderRemove)}appointmentBorderRemove(o){const l=o.event.target;(0,E.oq)(l,"."+Mn)?"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass():(0,E.oq)(l,"."+M)||this.removeSelectedAppointmentClass()}wireAppointmentEvents(o,l,d=!1){const y=!(0,E.le)(l)&&l[this.parent.eventFields.isReadonly];E.bi.add(o,"click",this.eventClick,this),!this.parent.isAdaptive&&!this.parent.activeViewOptions.readonly&&!y&&(E.bi.add(o,"touchstart",this.eventTouchClick,this),E.bi.add(o,"dblclick",this.eventDoubleClick,this)),!this.parent.activeViewOptions.readonly&&!y&&!d&&(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(o),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(o))}eventTouchClick(o){setTimeout(()=>this.isDoubleTapped=!1,250),o.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(o):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(o))}renderResizeHandler(o,l,d){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly&&!d)for(const y of Object.keys(l)){const C=(0,E.az)("div",{className:Wn});switch(y){case"isLeft":l.isLeft||(C.appendChild((0,E.az)("div",{className:"e-left-right-resize"})),(0,E.cn)([C],this.parent.enableRtl?Un:gn),(0,E.Ce)([C],o));break;case"isRight":l.isRight||(C.appendChild((0,E.az)("div",{className:"e-left-right-resize"})),(0,E.cn)([C],this.parent.enableRtl?gn:Un),(0,E.R3)([C],o));break;case"isTop":l.isTop||(C.appendChild((0,E.az)("div",{className:"e-top-bottom-resize"})),(0,E.cn)([C],"e-top-handler"),(0,E.Ce)([C],o));break;case"isBottom":l.isBottom||(C.appendChild((0,E.az)("div",{className:"e-top-bottom-resize"})),(0,E.cn)([C],"e-bottom-handler"),(0,E.R3)([C],o))}}}eventClick(o){const l=o.target;if(!(l.classList.contains("e-drag-clone")||l.classList.contains("e-resize-clone")||l.classList.contains(Vl)))if((o.ctrlKey||o.metaKey)&&1===o.which&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+w));const d=(0,E.oq)(o.target,"."+Mn);this.getSelectedEventElements(d),this.activeEventData(o,!1),this.parent.trigger(js,{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:o,requestType:"eventSelect"});const C=(0,E.l7)(this.parent.activeEventData,{cancel:!1,originalEvent:o});this.parent.trigger(je,C)}else{this.removeSelectedAppointmentClass(),this.activeEventData(o,!0),this.parent.trigger(js,{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:o,requestType:"eventSelect"});const y=(0,E.l7)(this.parent.activeEventData,{cancel:!1,originalEvent:o});this.parent.trigger(je,y,C=>{C.cancel?(this.removeSelectedAppointmentClass(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide()):(("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&(0,E.cn)([this.parent.activeEventData.element],Ke),this.parent.allowInline?this.parent.notify(ms,{data:C.event,element:C.element,type:"Event"}):this.parent.notify(je,C))})}}eventDoubleClick(o){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),"touchstart"===o.type&&this.activeEventData(o,!0),this.removeSelectedAppointmentClass(),!this.parent.activeEventData.element.classList.contains(Ph)&&!this.parent.activeEventData.element.querySelector("."+Vl)&&(!(0,E.le)(this.parent.activeEventData.event)&&(0,E.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])?this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save"):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert()))}getEventByGuid(o){return this.parent.eventsProcessed.filter(l=>l.Guid===o)[0]}getEventById(o){return this.parent.eventsData.filter(l=>l[this.parent.eventFields.id]===o)[0]}generateGuid(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,o=>{const l=16*Math.random()|0;return("x"===o?l:3&l|8).toString(16)})}getEventIDType(){return 0!==this.parent.eventsData.length?typeof this.parent.eventsData[0][this.parent.eventFields.id]:0!==this.parent.blockData.length?typeof this.parent.blockData[0][this.parent.eventFields.id]:"string"}getEventMaxID(o){if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;let l;const d=this.getEventIDType();if("string"===d&&(l=this.generateGuid()),"number"===d){const y=this.parent.eventsData.concat(this.parent.blockData);let C=Math.max(...y.map(L=>L[this.parent.eventFields.id]));C=(0,E.le)(o)?C:C+o,l=C+1}return l}activeEventData(o,l){const d=(0,E.oq)(o.target,"."+Mn),y=d.getAttribute("data-guid");l&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+y+'"]'))),d.focus());let C=this.getEventByGuid(y);C&&C.isSpanned&&(C=this.parent.eventsData.filter(L=>L[this.parent.eventFields.id]===C[this.parent.eventFields.id])[0]),this.parent.activeEventData={event:C,element:d}}generateOccurrence(o,l,d,y){const C=o[this.parent.eventFields.startTime],q=o[this.parent.eventFields.recurrenceRule],X=o[this.parent.eventFields.endTime].getTime()-C.getTime();l=new Date((l||this.parent.activeView.startDate()).getTime()-X);const he=o[this.parent.eventFields.recurrenceException];let He;"Agenda"!==this.parent.currentView&&y&&(He=function co(ae,o){return Math.ceil((o.getTime()-ae.getTime())/Cn)}(this.parent.activeView.startDate(),this.parent.activeView.endDate())+1);const Ve=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),vt=Zu(C,q,he,this.parent.activeViewOptions.firstDayOfWeek,He,l,this.parent.calendarMode,d,Ve);"Agenda"===this.parent.currentView&&-1===q.indexOf("COUNT")&&-1===q.indexOf("UNTIL")&&((0,E.le)(o.generatedDates)?o.generatedDates={start:new Date(vt[0]),end:new Date(vt[vt.length-1])}:(vt[0]<o.generatedDates.start.getTime()&&(o.generatedDates.start=new Date(vt[0])),vt[vt.length-1]>o.generatedDates.end.getTime()&&(o.generatedDates.end=new Date(vt[vt.length-1]))));const mi=[];for(const Ni of vt){const Ki=(0,E.l7)({},o,null,!0);Ki[this.parent.eventFields.startTime]=new Date(Ni),Ki[this.parent.eventFields.endTime]=new Date(new Date(Ni).setMilliseconds(X)),Ki[this.parent.eventFields.recurrenceID]=Ki[this.parent.eventFields.id],delete Ki[this.parent.eventFields.recurrenceException],delete Ki[this.parent.eventFields.followingID],Ki.Guid=this.generateGuid(),mi.push(Ki)}return mi}getParentEvent(o,l=!1){let d;do{(o=this.getFollowingEvent(o))&&(d=(0,E.l7)({},o,null,!0))}while(o&&l);if(l&&d){const y=this.getEventCollections(d);let C=y.follow.slice(-1)[0];y.occurrence.length>0&&!d[this.parent.eventFields.recurrenceException]&&(C=y.occurrence.slice(-1)[0]),C&&(d[this.parent.eventFields.recurrenceRule]=C[this.parent.eventFields.recurrenceRule])}return d}getEventCollections(o,l){const d=[];let y=[],C=o;do{C=this.getFollowingEvent(C,!0),C&&d.push(C),y=y.concat(this.getOccurrenceEvent(C||o))}while(C);let L={};if(l){const q=this.parent.eventFields;L={follow:d.filter(X=>X[q.startTime]>=l[q.startTime]),occurrence:y.filter(X=>X[q.startTime]>=l[q.startTime])}}else L={follow:d,occurrence:y};return L}getFollowingEvent(o,l){const d=this.parent.eventFields;let y;return y=l?o[d.id]:o[d.recurrenceID]||o[d.followingID],this.parent.eventsData.filter(L=>L[l?d.followingID:d.id]===y).shift()}isFollowingEvent(o,l){const d=o[this.parent.eventFields.startTime],y=l[this.parent.eventFields.startTime];return d.getHours()===y.getHours()&&d.getMinutes()===y.getMinutes()&&d.getSeconds()===y.getSeconds()}getOccurrenceEvent(o,l=!1,d=!1){const y=l?"Guid":d?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,C=l?"Guid":this.parent.eventFields.id;return(l?this.parent.eventsProcessed:this.parent.eventsData).filter(q=>q[y]===o[C])}getOccurrencesByID(o){const l=this.parent.eventFields;let d=[];const y=this.parent.eventsData.filter(C=>C[l.id]===o);for(const C of y)(0,E.le)(C[l.recurrenceRule])||(d=d.concat(this.generateOccurrence(C)));return d}getOccurrencesByRange(o,l){const d=this.parent.eventFields;let y=[];for(const L of this.parent.eventsData)(0,E.le)(L[d.recurrenceRule])||(y=y.concat(this.generateOccurrence(L)));return y.filter(L=>L[d.startTime]>=o&&L[d.endTime]<=l&&!(0,E.le)(L[d.recurrenceID]))}getDeletedOccurrences(o){const l=this.parent.eventFields;let d;const y=[];if(d="string"==typeof o||"number"==typeof o?this.parent.eventsData.filter(C=>C[l.id]===o)[0]:(0,E.l7)({},o,null,!0),d[l.recurrenceException]){const C=d[l.recurrenceException].split(",");for(let L=0,q=C.length;L<q;L++)if(0===this.parent.eventsData.filter(he=>he[l.recurrenceID]===d[l.id]&&he[l.recurrenceException]===C[L]).length){const he=Qp(C[L]),He=(0,E.l7)({},o,null,!0);He[l.recurrenceID]=d[l.id],delete He[l.followingID],He[l.recurrenceException]=C[L];const Ve=new Date(he.getTime()),nt=d[l.endTime].getTime()-d[l.startTime].getTime(),It=new Date(Ve.getTime());It.setMilliseconds(nt),He[l.startTime]=new Date(Ve.getTime()),He[l.endTime]=new Date(It.getTime()),y.push(He)}}return y}applyResourceColor(o,l,d,y,C){if(!this.parent.resourceBase)return;const q=this.parent.resourceBase.getResourceColor(l,y);var X,he;q&&(o.style[d]=(0,E.le)(C)?q:(he=C,X=(X=q).replace("#",""),`rgba(${parseInt(X.substring(0,X.length/3),16)}, ${parseInt(X.substring(X.length/3,2*X.length/3),16)}, ${parseInt(X.substring(2*X.length/3,3*X.length/3),16)}, ${he})`))}createBlockAppointmentElement(o,l){const d=o[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,y=(0,E.az)("div",{className:Ge,attrs:{"data-id":"Appointment_"+o[this.parent.eventFields.id],"aria-readonly":"true","aria-selected":"false"}});let C;if((0,E.le)(this.parent.activeViewOptions.eventTemplate))C=[(0,E.az)("div",{className:El,innerHTML:d})];else{const X=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",he="eventTemplate"+(this.parent.activeViewOptions.group.resources.length>0&&-1===this.parent.currentView.indexOf("Year")?"_"+l:"");C=this.parent.getAppointmentTemplate()(o,this.parent,he,X,!1)}return(0,E.R3)(C,y),this.setWrapperAttributes(y,l),y}setWrapperAttributes(o,l){(0,E.le)(this.cssClass)||(0,E.cn)([o],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&o.setAttribute("data-group-index",l.toString())}getReadonlyAttribute(o){return(o[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()}isBlockRange(o){const l=o instanceof Array?o:[o];let d=!1;const y=this.parent.eventFields;for(const C of l){let L=[];(0,E.le)(C[y.recurrenceRule])||!(0,E.le)(C[y.recurrenceID])&&C[y.id]!==C[y.recurrenceID]?L.push(C):L=this.generateOccurrence(C);for(const q of L)if(this.filterBlockEvents(q).length>0){d=!0;break}}return this.parent.uiStateValues.isBlock=d,d}getFilterEventsList(o,l){return new ns.hm(o).executeLocal((new ns.AE).where(l))}getSeriesEvents(o,l){const d=this.parent.eventFields;let y,C;l=(0,E.le)(l)?o[d.startTime]:l;const L=[];let he,q=o[d.id],X=o[d.followingID];const He="EditSeries"===this.parent.currentAction?"greaterthan":"greaterthanorequal";do{he=new ns.$G(d.followingID,"equal",q).and(new ns.$G(d.startTime,He,l)),C=this.getFilterEventsList(this.parent.eventsData,he),y=C.slice(-1)[0],(0,E.le)(y)||y[d.id]===X?X=null:(L.push(y),q=y[d.id],X=y[d.followingID])}while(1===C.length&&!(0,E.le)(y[d.followingID]));return L}getEditedOccurrences(o,l){const d=this.parent.eventFields;let C,y=[];for(const L of o){let q=new ns.$G(d.recurrenceID,"equal",L[d.id]).or(new ns.$G(d.recurrenceID,"equal",L[d.followingID]).and(new ns.$G(d.recurrenceID,"notequal",void 0)).and(new ns.$G(d.recurrenceID,"notequal",null)));("EditFollowingEvents"===this.parent.currentAction||"DeleteFollowingEvents"===this.parent.currentAction)&&(q=q.and(new ns.$G(d.startTime,"greaterthanorequal",l))),C=this.getFilterEventsList(this.parent.eventsData,q),y=y.concat(C)}return y}getRenderedDates(o){let y,l=0,d=o.length;if(o[0]<this.parent.minDate&&o[o.length-1]>this.parent.maxDate){for(let C=0;C<o.length;C++)Bi(o[C]).getTime()===Bi(new Date(this.parent.minDate)).getTime()&&(l=C),Bi(o[C]).getTime()===Bi(new Date(this.parent.maxDate)).getTime()&&(d=C);y=o.filter(C=>C>=o[l]&&C<=o[d])}return y}isValidEvent(o,l,d,y){const C=d.getTime()>y.startHour.getTime()&&l.getTime()<y.endHour.getTime(),L=y.startHour.getTime()<=l.getTime()&&o[this.parent.eventFields.startTime].getTime()>=y.startHour.getTime()&&o[this.parent.eventFields.endTime].getTime()<y.endHour.getTime()&&l.getTime()===d.getTime();return C||L}allDayExpandScroll(o){let l=0;[].slice.call(this.parent.element.querySelectorAll("."+No)).forEach(y=>{[].slice.call(y.children).forEach(L=>{L.style.top=l+"px"}),l+=y.offsetHeight}),l=o.offsetHeight-l,this.parent.element.querySelector("."+qs).style.height=l/12+"em",this.parent.uiStateValues.expand?(0,E.cn)([o],Ha):(0,E.IV)([o],Ha)}updateEventMinimumDuration(o,l,d){if((oo(d)-oo(l))/wr<this.parent.eventSettings.minimumEventDuration){const C=new Date(l);if(C.setMinutes(C.getMinutes()+this.parent.eventSettings.minimumEventDuration),(d=C).getTime()>o.endHour.getTime()){const L=new Date(o.endHour.getTime());L.setMinutes(L.getMinutes()-this.parent.eventSettings.minimumEventDuration),l=L,d=o.endHour}}return{startDate:l,endDate:d}}unWireEvents(){const o=[].slice.call(this.parent.element.querySelectorAll("."+Mn));for(const l of o)E.bi.clearEvents(l)}destroy(){this.unWireEvents(),this.parent=null}}class cf extends op{constructor(o){super(o),this.dateRender=[],this.renderedEvents=[],this.renderedAllDayEvents=[],this.overlapEvents=[],this.moreEvents=[],this.overlapList=[],this.allDayEvents=[],this.slotCount=this.parent.activeViewOptions.timeScale.slotCount,this.interval=this.parent.activeViewOptions.timeScale.interval,this.allDayLevel=0,this.startHour=this.parent.activeView.getStartHour(),this.endHour=this.parent.activeView.getEndHour(),this.element=this.parent.activeView.getPanel(),this.fields=this.parent.eventFields,this.animation=new E.fw({progress:this.animationUiUpdate.bind(this)}),this.addEventListener()}renderAppointments(){if((0,E.le)(this.parent))return;this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea();const o=[].slice.call(this.parent.element.querySelectorAll("."+Ge+",."+Mn+",."+lr)),l=!(!this.parent.crudModule||!this.parent.crudModule.crudObj.isCrudAction);for(const y of o)if(!l||y.classList.contains(wo)||y.classList.contains(lr))(0,E.Od)(y);else{const C=parseInt(y.getAttribute("data-group-index"),10);for(let L=0,q=this.parent.crudModule.crudObj.sourceEvent.length;L<q;L++)(C===this.parent.crudModule.crudObj.sourceEvent[L].groupIndex||C===this.parent.crudModule.crudObj.targetEvent[L].groupIndex)&&(0,E.Od)(y)}if(!this.element.querySelector("."+xi)||(this.allDayElement=[].slice.call(this.element.querySelectorAll("."+qs)),this.setAllDayRowHeight(0),0===this.parent.eventsProcessed.length&&0===this.parent.blockProcessed.length))return;const d=this.element.querySelector("."+vn);E.bi.remove(d,"click",this.rowExpandCollapse),E.bi.add(d,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter((y,C,L)=>C===L.map(q=>q.Guid).indexOf(y.Guid)),(0,E.IV)(this.allDayElement,ql),this.slots.push(this.parent.activeView.renderDates.map(y=>+y)),this.renderEvents("allDayEvents")),this.parent.notify(rs,{}),(0,E.cn)(this.allDayElement,ql),l&&(this.parent.crudModule.crudObj.isCrudAction=!1),this.parent.renderTemplates()}initializeValues(){if(this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0)for(let o=0,l=this.resources.length;o<l;o++)this.dateRender[o]=this.resources[o].renderDates}getHeight(o,l){let d=(oo(l)-oo(o))/wr*(this.cellHeight*this.slotCount)/this.interval;return d=d<=0?this.cellHeight:d,d}appendEvent(o,l,d,y){const C=[].slice.call(this.element.querySelectorAll("."+nr));(0,E.V7)(l,this.parent.enableRtl?{right:y}:{left:y});const L=l.classList.contains(Ge)?"blockEvent":"event",q={data:(0,E.l7)({},o,null,!0),element:l,cancel:!1,type:L};this.parent.trigger(Re,q,X=>{X.cancel||C[d].appendChild(l)})}processBlockEvents(){const o=this.getResourceList();let l=0;for(const d of o){const y=this.dateRender[d];for(let C=0,L=y.length;C<L;C++){const q=new Date(y[C].getTime()),X=os(y[C],1),he=this.filterEvents(q,X,this.parent.blockProcessed,this.resources[d]);for(const He of he)this.parent.resourceBase&&this.setValues(He,d),this.renderBlockEvents(He,C,d,l),this.cssClass=null,this.groupOrder=null;l+=1}}}renderBlockEvents(o,l,d,y){const C=this.isSpannedEvent(o,l,d),L=C[this.fields.startTime],q=C[this.fields.endTime],he=sr(Bi(new Date(this.dateRender[d][l].getTime())),this.startHour,this.endHour);if(L<=q&&this.isValidEvent(o,L,q,he)){let He,Ve;if(C[this.fields.isAllDay]){const vt=this.parent.element.querySelector("."+ee+" table");Ve=(0,E.Ac)(vt.offsetHeight),He=(0,E.Ac)(0)}else Ve=(0,E.Ac)(this.getHeight(L,q)),He=(0,E.Ac)(this.getTopValue(L,l,d));const nt=this.createBlockAppointmentElement(o,d);(0,E.V7)(nt,{width:"100%",height:Ve,top:He}),this.appendEvent(o,nt,this.parent.activeViewOptions.group.byDate?this.resources.length*l+d:y,"0px")}}renderEvents(o){(0,E.IV)(this.allDayElement,ql);const l="allDayEvents"===o?this.sortByDateTime(this.allDayEvents):void 0,d=this.getResourceList();let C,y=0;for(const L of d){C=!0,this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction&&"allDayEvents"!==o&&!this.parent.uiStateValues.isGroupAdaptive&&0===this.parent.crudModule.crudObj.sourceEvent.filter(he=>he.groupIndex===L).length&&0===this.parent.crudModule.crudObj.targetEvent.filter(he=>he.groupIndex===L).length&&(C=!1),this.slots=[];const q=this.dateRender[L],X=this.getRenderedDates(q)||q;this.slots.push(q.map(he=>+he));for(let he=0,He=q.length;he<He&&q[he]<=X[X.length-1];he++){this.renderedEvents=[];const Ve=new Date(q[he].getTime()),nt=os(q[he],1),It=this.filterEvents(Ve,nt,l,this.resources[L]);if(C)for(const vt of It){if(this.parent.resourceBase&&this.setValues(vt,L),"allDayEvents"===o)this.renderAllDayEvents(vt,he,L,y);else if(this.isAllDayAppointment(vt))this.allDayEvents.push((0,E.l7)({},vt,null,!0));else{if(this.parent.eventSettings.enableMaxHeight&&this.getOverlapIndex(vt,he,!1,L)>0)continue;this.renderNormalEvents(vt,he,L,y)}this.cssClass=null,this.groupOrder=null}else for(const vt of It)this.isAllDayAppointment(vt)&&this.allDayEvents.push((0,E.l7)({},vt,null,!0));y+=1}}}setValues(o,l){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[l].cssClass,this.groupOrder=this.resources[l].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(o)}getResourceList(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map((l,d)=>d)}createAppointmentElement(o,l,d,y){const C=this.parent.eventFields,L=o[C.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),q=(0,E.az)("div",{className:Mn,attrs:{"data-id":"Appointment_"+o[C.id],"data-guid":o.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(o),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnouncementString(o)}});o[this.fields.isReadonly]&&(0,E.cn)([q],"e-read-only");const X=(0,E.az)("div",{className:k});let he;q.appendChild(X),this.parent.activeViewOptions.group.resources.length>0&&q.setAttribute("data-group-index",(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:y).toString());const He=d;if((0,E.le)(this.parent.activeViewOptions.eventTemplate)){const Ve=(0,E.az)("div",{className:El,innerHTML:L});if(l)if(o[C.isAllDay])he=[Ve];else{he=[];const nt=(0,E.az)("div",{className:K+(this.parent.isAdaptive?" "+zs:""),innerHTML:this.parent.getTimeString(o[C.startTime])}),It=(0,E.az)("div",{className:K+(this.parent.isAdaptive?" "+zs:""),innerHTML:this.parent.getTimeString(o[C.endTime])});(0,E.cn)([Ve],"e-text-center"),He.isLeft||he.push(nt),he.push(Ve),He.isRight||he.push(It)}else{const nt=this.parent.getTimeString(o[C.startTime])+" - "+this.parent.getTimeString(o[C.endTime]);he=[Ve,(0,E.az)("div",{className:K+(this.parent.isAdaptive?" "+zs:""),innerHTML:nt}),(0,E.az)("div",{className:ka,innerHTML:o[C.location]||this.parent.eventSettings.fields.location.default||""})]}}else{const It=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",vt=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:y,mi="eventTemplate"+(this.parent.activeViewOptions.group.resources.length>0?"_"+vt:"");he=this.parent.getAppointmentTemplate()(o,this.parent,mi,It,!1)}if((0,E.R3)(he,X),!(this.parent.isAdaptive||(0,E.le)(o[C.recurrenceRule])&&(0,E.le)(o[C.recurrenceID]))){const nt=(0,E.az)("div",{className:vr+" "+(o[C.id]===o[C.recurrenceID]?fo:hl)});l?X.appendChild(nt):q.appendChild(nt)}return this.renderSpannedIcon(l?X:q,He),(0,E.le)(this.cssClass)||(0,E.cn)([q],this.cssClass),this.applyResourceColor(q,o,"backgroundColor",this.groupOrder),this.renderResizeHandler(q,He,o[this.fields.isReadonly]),q}createMoreIndicator(o,l,d){const y=d+l,C=o[y];if(C.childElementCount<=0){const L=(0,E.az)("div",{className:lr,id:lr+"-"+y.toString()}),q=(0,E.az)("div",{className:tl,attrs:{tabindex:"0",role:"list","data-index":y.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});L.appendChild(q),C.appendChild(L),E.bi.add(q,"click",this.rowExpandCollapse,this)}else{const L=C.querySelector("."+tl),q=parseInt(L.getAttribute("data-count"),10)+1;L.setAttribute("data-count",q.toString()),L.innerHTML="+"+this.parent.globalize.formatNumber(q)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}}renderSpannedIcon(o,l){const d=(0,E.az)("div",{className:ne+" "+vr});if(l.isLeft){const y=d.cloneNode();(0,E.cn)([y],Ye),(0,E.Ce)([y],o)}if(l.isRight){const y=d.cloneNode();(0,E.cn)([y],Ct),(0,E.R3)([y],o)}if(l.isTop){const y=d.cloneNode();(0,E.cn)([y],"e-up-icon"),(0,E.Ce)([y],o)}if(l.isBottom){const y=d.cloneNode();(0,E.cn)([y],"e-down-icon"),(0,E.R3)([y],o)}}isSpannedEvent(o,l,d){let y=Bi(this.dateRender[d][l]);const C=this.getRenderedDates(this.dateRender[d])||[y];0===C.filter(Ve=>Ve.getDay()===l).length&&(y=Bi(C[0]));const q=this.parent.eventFields,X=sr(y,this.startHour,this.endHour),he=(0,E.l7)({},o,null,!0);he.isSpanned={isBottom:!1,isTop:!1},o[q.startTime].getTime()<X.startHour.getTime()&&(he[q.startTime]=X.startHour,he.isSpanned.isTop=!0),o[q.endTime].getTime()>X.endHour.getTime()&&(he[q.endTime]=X.endHour,he.isSpanned.isBottom=!0);const He=this.updateEventMinimumDuration(X,he[q.startTime],he[q.endTime]);return he[q.startTime]=He.startDate,he[q.endTime]=He.endDate,he}renderAllDayEvents(o,l,d,y,C){let L=this.getRenderedDates(this.dateRender[d])||this.dateRender[d];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[d][l].getTime()],L=[this.dateRender[d][l]]);const q=this.splitEvent(o,L)[0],X=this.element.querySelector("."+qs+":first-child"),he=X.offsetTop,He=new Date(q[this.parent.eventFields.startTime].getTime()),Ve=new Date(q[this.parent.eventFields.endTime].getTime());let nt=0,It=1;const vt=L[0].getTime()<=He.getTime()&&os(L.slice(-1)[0],1).getTime()>=He.getTime();if(He<=Ve&&vt){let mi=[];if(this.renderedAllDayEvents[d]&&(mi=this.renderedAllDayEvents[d].filter(Ni=>Ni.Guid===o.Guid),this.parent.activeViewOptions.group.byDate&&(mi=mi.filter(Ni=>Ni[this.parent.eventFields.startTime]>=L[l]&&Ni[this.parent.eventFields.endTime]<=os(new Date(+L[l]),1)))),0===mi.length){const Ni=q.data.count,Ki=this.getOverlapIndex(q,l,!0,d);q.Index=Ki,this.allDayLevel=this.allDayLevel<Ki?Ki:this.allDayLevel;const Ts=q.data.isRight?0:"Day"===this.parent.currentView?4:7;Ni>=0&&(nt=100*Ni-Ts),(0,E.le)(this.renderedAllDayEvents[d])&&(this.renderedAllDayEvents[d]=[]),this.renderedAllDayEvents[d].push((0,E.l7)({},q,null,!0));const Hs=[].slice.call(this.element.querySelector("."+Pn).children),Js=this.parent.activeViewOptions.group.byDate?this.resources.length*l+d:y,Fn=this.element.querySelector("."+el+":nth-child("+(Js+1)+")");let Hn;Hn=C?this.parent.inlineModule.createInlineAppointmentElement(o):this.createAppointmentElement(o,!0,q.data,d),(0,E.cn)([Hn],wo);const Fr=(0,E.l7)({},q.data,null,!0);o.data=Fr,this.parent.trigger(Re,{data:o,element:Hn,cancel:!1},kr=>{if(!kr.cancel){Fn.appendChild(Hn);const Mo=Hn.offsetHeight;if(It+=(0===Ki?he:he+Ki*Mo)+1,(0,E.V7)(Hn,{width:nt+"%",top:(0,E.Ac)(It)}),Ki>1){this.moreEvents.push(Hn);for(let Ra=0,pa=Ni;Ra<pa;Ra++)this.createMoreIndicator(Hs,Ra,Js)}X.setAttribute("data-count",this.allDayLevel.toString()),this.setAllDayRowHeight(4+(!this.parent.uiStateValues.expand&&this.allDayLevel>2?3*Mo:(this.allDayLevel+1)*Mo)),this.addOrRemoveClass(),this.wireAppointmentEvents(Hn,o)}})}}}renderNormalEvents(o,l,d,y,C){const L=this.isSpannedEvent(o,l,d),q=L[this.fields.startTime],X=L[this.fields.endTime];let he="0%",Ve=0;const It=sr(Bi(new Date(this.dateRender[d][l].getTime())),this.startHour,this.endHour),vt=this.isValidEvent(o,q,X,It);if(q<=X&&vt){const mi=this.getHeight(q,X);q.getTime()>It.startHour.getTime()&&(Ve=this.getTopValue(q,l,d));const Ni=this.getOverlapIndex(L,l,!1,d);L.Index=Ni,this.overlapList.push(L),this.overlapList.length>1?((0,E.le)(this.overlapEvents[Ni])&&(this.overlapEvents[Ni]=[]),this.overlapEvents[Ni].push(L)):(this.overlapEvents=[],this.overlapEvents.push([L])),he=this.getEventWidth();const Ts=this.adjustOverlapElements({index:Ni,left:"0%",width:he,day:l,dayIndex:y,record:L,resource:d});let Hs;he=Ts.appWidth,(0,E.le)(this.renderedEvents[d])&&(this.renderedEvents[d]=[]),this.renderedEvents[d].push((0,E.l7)({},L,null,!0)),Hs=C?this.parent.inlineModule.createInlineAppointmentElement(o):this.createAppointmentElement(o,!1,L.isSpanned,d),(0,E.V7)(Hs,{width:this.parent.eventSettings.enableMaxHeight?"100%":Ts.appWidth,height:mi+"px",top:Ve+"px"});const Js=15*Hs.querySelectorAll("."+ne).length,Fn=mi-40-Js,Hn=Hs.querySelector("."+El);!this.parent.isAdaptive&&Hn&&(Hn.style.maxHeight=(0,E.Ac)(Fn));const Fr=this.parent.activeViewOptions.group.byDate?this.resources.length*l+d:y,lo={};lo[this.fields.startTime]=o[this.fields.startTime],lo[this.fields.endTime]=o[this.fields.endTime],L.data=lo,this.appendEvent(L,Hs,Fr,Ts.appLeft),this.wireAppointmentEvents(Hs,o),mi<this.cellHeight&&[].slice.call(Hs.querySelectorAll("."+Wn)).forEach(Mo=>{Mo.style.height=Math.ceil(mi/Mo.offsetHeight)+"px"})}}getEventWidth(){const l=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length;return(l<0?0:l)+"%"}getEventLeft(o,l){const d=(parseFloat(o)+1)*l;return(d>99?99:d)+"%"}getTopValue(o,l,d){const C=sr(Bi(this.dateRender[d][l]),this.startHour,this.endHour).startHour,L=60*(o.getHours()-C.getHours())+(o.getMinutes()-C.getMinutes());return this.parent.activeViewOptions.timeScale.enable?L*this.cellHeight*this.slotCount/this.interval:0}getOverlapIndex(o,l,d,y){const C=this.parent.eventFields;let L=[],q=-1;if(this.overlapEvents=[],d){if(!(0,E.le)(this.renderedAllDayEvents[y])){const X=Bi(new Date(this.dateRender[y][l].getTime()));L=this.renderedAllDayEvents[y].filter(he=>Bi(he[C.startTime]).getTime()<=X.getTime()&&Bi(he[C.endTime]).getTime()>=X.getTime()),this.parent.activeViewOptions.group.resources.length>0&&(L=this.filterEventsByResource(this.resources[y],L))}}else{const X=(0,E.le)(this.renderedEvents[y])?[]:this.renderedEvents[y];let he=[];const He=o[C.startTime],Ve=o[C.endTime];this.overlapList=X.filter(nt=>nt[C.endTime]>He&&nt[C.startTime]<=Ve||nt[C.startTime]>=Ve&&nt[C.endTime]<=He||nt[C.endTime].getTime()===nt[C.startTime].getTime()&&nt[C.startTime].getTime()===He.getTime()&&nt[C.endTime]<Ve),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[y],this.overlapList)),this.overlapList.forEach(nt=>{let It=X.filter(mi=>mi[C.endTime]>nt[C.startTime]&&mi[C.startTime]<=nt[C.endTime]);this.parent.activeViewOptions.group.resources.length>0&&(It=this.filterEventsByResource(this.resources[y],It));const vt=It.filter(mi=>-1===this.overlapList.indexOf(mi));vt.length>0&&(he=he.concat(vt))});for(let nt=0;nt<he.length-1;nt++)for(let It=nt+1;It<he.length;It++)he[nt][C.id]===he[It][C.id]&&(he.splice(It,1),It--);this.overlapList=this.overlapList.concat(he),L=this.overlapList;for(const nt of L){const vt=nt.Index;(0,E.le)(this.overlapEvents[vt])?this.overlapEvents[vt]=[nt]:this.overlapEvents[vt].push(nt)}}if(d||(L=L.filter(X=>X[C.startTime]===o[C.startTime]&&X[C.endTime]>o[C.endTime]||X[C.endTime]>o[C.startTime]&&X[C.startTime]<o[C.endTime]||X[C.endTime]===o[C.startTime]&&X[C.startTime]===o[C.endTime]||X[C.startTime].getTime()===o[C.startTime].getTime()&&X[C.endTime].getTime()===o[C.endTime].getTime()||X[C.startTime].getTime()===o[C.startTime].getTime()&&X[C.endTime].getTime()<o[C.endTime].getTime()||X[C.endTime].getTime()>o[C.endTime].getTime())),L.length>0){const X=L.map(he=>he.Index);q=X.length>0?this.getSmallestMissingNumber(X):0}return-1===q?0:q}adjustOverlapElements(o){const l={appWidth:o.width,appLeft:o.left};for(let d=0,y=this.overlapEvents.length;d<y;d++)if(!(0,E.le)(this.overlapEvents[d]))for(let C=0,L=this.overlapEvents[d].length;C<L;C++){const X=this.element.querySelector("#e-appointment-wrapper-"+(this.parent.activeViewOptions.group.byDate?this.resources.length*o.day+o.resource:o.dayIndex));if(X.childElementCount>0){const he=this.overlapEvents[d][C].Guid;if(X.querySelectorAll('div[data-guid="'+he+'"]').length>0&&he!==o.record.Guid){const He=X.querySelector('div[data-guid="'+he+'"]');parseFloat(o.width)<=parseFloat(He.style.width)&&(this.parent.enableRtl?He.style.right=this.getEventLeft(o.width,d):He.style.left=this.getEventLeft(o.width,d),He.style.width=parseFloat(o.width)+"%"),l.appWidth=He.style.width}else{let He=o.width;(0,E.le)(this.overlapEvents[d-1])&&(He=this.getEventWidth()),l.appWidth=He,l.appLeft=this.getEventLeft(He,o.index)}}}return l}setAllDayRowHeight(o){const l=this.parent.element.querySelector("."+$);("auto"===this.parent.height||!this.parent.enableAllDayScroll)&&(0,E.cn)([l],ih);const d=this.parent.element.querySelector("."+Pn);if(d.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.height&&this.parent.enableAllDayScroll)d.style.height=o/12+"em",this.parent.eventBase.allDayExpandScroll(l);else{l.scrollTop=0;for(const y of this.allDayElement)y.style.height=o/12+"em";(0,E.IV)([l],Ha)}this.animation.animate(this.allDayElement[0])}addOrRemoveClass(){this.moreEvents.filter(d=>{!this.parent.uiStateValues.expand&&this.allDayLevel>2?((0,E.cn)([d],Sl),d.setAttribute("tabindex","-1")):((0,E.IV)([d],Sl),d.setAttribute("tabindex","0"))});const o=this.element.querySelector("."+vn);this.parent.uiStateValues.expand?((0,E.IV)([o],vl),(0,E.cn)([o],Oo)):((0,E.IV)([o],Oo),(0,E.cn)([o],vl)),this.allDayLevel>2?(0,E.IV)([o],zs):(0,E.cn)([o],zs),[].slice.call(this.element.querySelectorAll("."+lr)).forEach(d=>{!this.parent.uiStateValues.expand&&this.allDayLevel>2?(0,E.IV)([d],zs):(0,E.cn)([d],zs)})}getEventHeight(){const o=(0,E.az)("div",{className:Mn,styles:"visibility:hidden"});this.element.querySelector("."+el+":first-child").appendChild(o);const d=o.offsetHeight;return(0,E.Od)(o),d}rowExpandCollapse(){const o=this.element.querySelector("."+vn);let l;this.parent.uiStateValues.expand=o.classList.contains(vl),this.parent.uiStateValues.expand?(o.setAttribute("title",this.parent.localeObj.getConstant("collapseAllDaySection")),o.setAttribute("aria-label","Collapse section"),l=(this.allDayLevel+1)*this.getEventHeight()+4):(o.setAttribute("title",this.parent.localeObj.getConstant("expandAllDaySection")),o.setAttribute("aria-label","Expand section"),l=3*this.getEventHeight()+4),this.setAllDayRowHeight(l),this.addOrRemoveClass(),this.animation.animate(o)}animationUiUpdate(){this.parent.notify(rs,{})}destroy(){!this.parent||this.parent&&this.parent.isDestroyed||(this.removeEventListener(),this.allDayElement=null,this.renderedAllDayEvents=null,this.renderedEvents=null,this.slotCount=null,this.interval=null,this.startHour=null,this.endHour=null,this.element=null,this.fields=null,this.animation=null,super.destroy())}}class Oc extends op{constructor(o){super(o),this.renderedEvents=[],this.monthHeaderHeight=0,this.moreIndicatorHeight=19,this.renderType="day",this.element=this.parent.activeView.getPanel(),this.fields=this.parent.eventFields,this.maxHeight=this.parent.eventSettings.enableMaxHeight&&!this.parent.eventSettings.enableIndicator&&!this.parent.rowAutoHeight,this.withIndicator=this.parent.eventSettings.enableMaxHeight&&this.parent.eventSettings.enableIndicator&&!this.parent.rowAutoHeight,this.maxOrIndicator=this.maxHeight||this.withIndicator,this.moreIndicatorHeight=this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace?0:this.moreIndicatorHeight,this.addEventListener()}removeEventWrapper(o){if(o.length>0){o="Month"===this.parent.currentView?o:[o[0]];for(const l of o)!l.classList.contains("e-more-indicator")&&l.parentElement&&l.parentElement.parentNode&&(0,E.Od)(l.parentElement)}}renderAppointments(){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea();const o=this.parent.element.querySelector("."+ee);this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=o.scrollTop,this.parent.uiStateValues.left=o.scrollLeft);const l=[].slice.call(this.element.querySelectorAll("."+nr));if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)for(let y=0,C=this.parent.crudModule.crudObj.sourceEvent.length;y<C;y++){const L=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.sourceEvent[y].groupIndex+'"]'));if(this.removeEventWrapper(L),this.parent.crudModule.crudObj.targetEvent[y]&&this.parent.crudModule.crudObj.sourceEvent[y].groupIndex!==this.parent.crudModule.crudObj.targetEvent[y].groupIndex){const q=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.targetEvent[y].groupIndex+'"]'));this.removeEventWrapper(q)}}else for(const y of l)(0,E.Od)(y);if(this.removeHeightProperty(ks),!this.element.querySelector("."+xi))return;if("Month"===this.parent.currentView){const y=(0,E.az)("div",{className:nr}),C=this.parent.element.querySelector("."+xi);C.appendChild(y),this.monthHeaderHeight=y.offsetTop-C.offsetTop,C.removeChild(y)}this.eventHeight=ro(this.element,Mn);const d=o.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!(0,E.le)(this.parent.currentAction)&&(o.scrollTop=o.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?(this.renderResourceEvents(),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell()):this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();const y={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.virtualScrollModule&&(this.parent.currentAction?(o.scrollTop=d,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.enablePersistence||this.parent.notify(rs,{}),this.parent.notify(ln,y),"Month"===this.parent.currentView&&this.parent.showWeekNumber){const C=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll("."+ko)).forEach((q,X)=>{(0,E.V7)(q,{height:C[X].offsetHeight+"px"})}),this.parent.element.querySelector("."+Mr).scrollTop=this.parent.element.querySelector("."+ee).scrollTop}}this.parent.renderTemplates()}renderEventsHandler(o,l,d){this.renderedEvents=[];let y,C,L=0;if(d?(L=d.groupIndex,this.cssClass=d.cssClass,this.groupOrder=d.groupOrder,y=this.parent.eventBase.filterEventsByResource(d,this.parent.eventsProcessed),C=this.parent.eventBase.filterEventsByResource(d,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll("."+xi+'[data-group-index="'+L+'"]'))):(y=this.parent.eventsProcessed,C=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll("."+xi))),this.sortByDateTime(y),this.sortByDateTime(C),"Month"===this.parent.currentView&&this.parent.rowAutoHeight&&0===this.parent.activeViewOptions.group.resources.length){const he=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),He="auto"===this.parent.height?(this.parent.element.querySelector(".e-content-wrap").clientHeight+this.parent.element.querySelector(".e-date-header-wrap").clientHeight)/he.length:this.parent.element.querySelector(".e-schedule-table").clientHeight/he.length;he.forEach(Ve=>{(0,E.V7)(Ve,{height:He+"px"})})}const q=this.workCells[this.parent.activeView.isTimelineView()?0:this.workCells.length-1].getBoundingClientRect();this.cellWidth=q.width,this.cellHeight=q.height,this.dateRender=o;const X=this.getRenderedDates(o);this.getSlotDates(l||this.parent.activeViewOptions.workDays),this.processBlockEvents(C,L,d);for(const he of y){this.parent.resourceBase&&!d&&(this.cssClass=this.parent.resourceBase.getCssClass(he));const He=this.splitEvent(he,X||this.dateRender);for(const Ve of He){if(this.maxHeight){const nt="Month"===this.parent.currentView?Ve[this.fields.startTime]:this.getStartTime(Ve,Ve.data);if(this.getIndex(nt)>0)continue}this.updateIndicatorIcon(Ve),this.renderEvents(Ve,L,y)}}this.cssClass=null,this.groupOrder=null}processBlockEvents(o,l,d){for(const y of o){this.parent.resourceBase&&!d&&(this.cssClass=this.parent.resourceBase.getCssClass(y));const C=[];if("day"!==this.renderType||y[this.fields.isAllDay])C.push(y);else{const L=(0,E.l7)({},y,null,!0);let q=this.isSameDate(L[this.fields.startTime],L[this.fields.endTime]);if(L.isBlockIcon=q,!q&&Vn(L[this.fields.startTime])>0){const X=(0,E.l7)({},y,null,!0);X[this.fields.endTime]=os(Bi(new Date(y[this.fields.startTime]+"")),1),X.isBlockIcon=!0,L[this.fields.startTime]=X[this.fields.endTime],C.push(X)}if(q=this.isSameDate(L[this.fields.startTime],L[this.fields.endTime]),!q&&Vn(L[this.fields.endTime])>0){const X=(0,E.l7)({},y,null,!0);X[this.fields.startTime]=Bi(new Date(y[this.fields.endTime]+"")),X.isBlockIcon=!0,C.push(X),L[this.fields.endTime]=X[this.fields.startTime]}C.push(L)}for(const L of C){const q=this.splitEvent(L,this.dateRender);for(const X of q)this.renderBlockEvents(X,l,!!L.isBlockIcon)}}}isSameDate(o,l){return new Date(+o).setHours(0,0,0,0)===new Date(+l).setHours(0,0,0,0)}renderBlockEvents(o,l,d){const y=o.data,C=this.getStartTime(o,y),L=this.getEndTime(o,y),q=this.parent.getIndexOfDate(this.dateRender,Bi(new Date(C.getTime())));if(q<0||C>L)return;const X=this.getCellTd(q),he=this.getPosition(C,L,o[this.fields.isAllDay],q);if(d)this.renderBlockIndicator(X,he,l);else{let Ve=this.getEventWidth(C,L,o[this.fields.isAllDay],y.count);Ve=Ve<=0?this.cellWidth:Ve;const nt=this.parent.enableRtl?0:he,It=this.parent.enableRtl?he:0,vt=this.cellHeight-this.monthHeaderHeight,mi=this.getRowTop(l),Ni=this.createBlockAppointmentElement(o,l);(0,E.V7)(Ni,{width:Ve+"px",height:vt+"px",left:nt+"px",right:It+"px",top:mi+"px"}),this.renderEventElement(o,Ni,X)}}renderBlockIndicator(o,l,d){const y=(0,E.az)("div",{className:"e-icons "+p});(0,E.le)(o.querySelector("."+p))&&o.appendChild(y)}getStartTime(o,l){return o[this.fields.startTime]}getEndTime(o,l){return o[this.fields.endTime]}getCellTd(o){return this.workCells[o]}getEventWidth(o,l,d,y){return y*this.cellWidth-1}getPosition(o,l,d,y){return 0}getRowTop(o){return 0}updateIndicatorIcon(o){if(-1===this.parent.currentView.indexOf("Timeline")||"TimelineMonth"===this.parent.currentView||o[this.fields.isAllDay])return;const l=o.data,d=this.parent.activeView.getStartHour(),y=this.parent.activeView.getEndHour(),C=sr(o[this.fields.startTime],d,y),L=sr(o[this.fields.endTime],d,y),q=l[this.fields.startTime],X=l[this.fields.endTime];if(l.isLeft=l.isLeft||q.getTime()<C.startHour.getTime(),l.isRight=l.isRight||X.getTime()>L.endHour.getTime(),Bi(q).getTime()!==Bi(X).getTime()){const he=C.startHour,He=L.endHour,Ve=new Date(Bi(q));if(Ve.setHours(He.getHours(),He.getMinutes(),He.getSeconds()),l.isLeft=l.isLeft||q.getTime()>=(he.getDate()===C.endHour.getDate()?Ve.getTime():os(Ve,1).getTime()),X.getTime()!==Bi(X).getTime()){const nt=new Date(Bi(X));l.isRight=l.isRight||X.getTime()<=nt.setHours(he.getHours(),he.getMinutes(),he.getSeconds())}}}renderResourceEvents(){const o=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(let l=0,d=this.parent.crudModule.crudObj.sourceEvent.length;l<d;l++){const y=this.parent.crudModule.crudObj.sourceEvent[l];if(this.renderEventsHandler(y.renderDates,y.workDays,y),this.parent.crudModule.crudObj.sourceEvent[l].groupIndex!==this.parent.crudModule.crudObj.targetEvent[l].groupIndex){const C=this.parent.crudModule.crudObj.targetEvent[l];this.renderEventsHandler(C.renderDates,C.workDays,C)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(const l of o)this.renderEventsHandler(l.renderDates,l.workDays,l)}getSlotDates(o){this.slots=[];const l=this.dateRender.map(y=>+y),d=this.parent.activeViewOptions.showWeekend?7:o.length;for(;l.length>0;)this.slots.push(l.splice(0,d))}createAppointmentElement(o,l,d=!1){const y=o[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),C=(0,E.l7)({},o,o.data,!0),L={"data-id":"Appointment_"+o[this.fields.id],role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(o),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnouncementString(C,y)};d||(L["data-guid"]=o.Guid),this.parent.activeViewOptions.group.resources.length>0&&(L["data-group-index"]=l.toString());const q=(0,E.az)("div",{className:Mn,attrs:L});(0,E.le)(this.cssClass)||(0,E.cn)([q],this.cssClass),o[this.fields.isReadonly]&&(0,E.cn)([q],"e-read-only");const X=(0,E.az)("div",{className:k});let he;q.appendChild(X);const He=o.data,Ve=this.getEventData(o);if((0,E.le)(this.parent.activeViewOptions.eventTemplate)){const nt=o[this.fields.location]||this.parent.eventSettings.fields.location.default||"",It=(0,E.az)("div",{className:El,innerHTML:y+(nt?";&nbsp"+nt:"")}),vt=(0,E.az)("div",{className:K+(this.parent.isAdaptive?" "+zs:""),innerHTML:this.parent.getTimeString(He[this.fields.startTime])}),mi=(0,E.az)("div",{className:K+(this.parent.isAdaptive?" "+zs:""),innerHTML:this.parent.getTimeString(He[this.fields.endTime])});if("Month"===this.parent.currentView)o[this.fields.isAllDay]?(he=[It],(0,E.cn)([It],"e-text-center")):He.count<=1&&!He.isLeft&&!He.isRight?he=[vt,It]:(he=[],(0,E.cn)([It],"e-text-center"),He.isLeft||he.push(vt),he.push(It),He.isRight||he.push(mi));else{let Ni;if(o[this.fields.isAllDay])Ni=[It,(0,E.az)("div",{className:K,innerHTML:this.parent.localeObj.getConstant("allDay")})];else{const Ts=this.parent.getTimeString(He[this.fields.startTime])+" - "+this.parent.getTimeString(He[this.fields.endTime]);Ni=[It,(0,E.az)("div",{className:K+(this.parent.isAdaptive?" "+zs:""),innerHTML:Ts}),(0,E.az)("div",{className:ka,innerHTML:nt})]}const Ki=(0,E.az)("div",{className:"e-inner-wrap"});(0,E.R3)(Ni,Ki),he=[Ki]}}else{const vt=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",mi="eventTemplate"+(this.parent.activeViewOptions.group.resources.length>0?"_"+l:"");he=this.parent.getAppointmentTemplate()(Ve,this.parent,mi,vt,!1)}return(0,E.R3)(he,X),this.appendEventIcons(o,X),this.renderResizeHandler(q,o.data,o[this.fields.isReadonly]),q}appendEventIcons(o,l){const d=o.data;if((0,E.le)(o[this.fields.recurrenceRule])&&(0,E.le)(o[this.fields.recurrenceID])||l.appendChild((0,E.az)("div",{className:vr+" "+(o[this.fields.id]===o[this.fields.recurrenceID]?fo:hl)+(this.parent.isAdaptive?" "+zs:"")})),d.isLeft){const y=(0,E.az)("div",{className:ne+" "+vr+" "+Ye});(0,E.Ce)([y],l)}if(d.isRight){const y=(0,E.az)("div",{className:ne+" "+vr+" "+Ct});(0,E.R3)([y],l)}}renderEvents(o,l,d){const y=o[this.fields.startTime],C=o[this.fields.endTime],L=this.parent.getIndexOfDate(this.dateRender,Bi(y));if(L<0||y.getTime()<this.parent.minDate.getTime()||C.getTime()>this.parent.maxDate.getTime())return;const q=this.getIndex(y);o.Index=q;let X=this.eventHeight;this.renderedEvents.push((0,E.l7)({},o,null,!0));const he=o.data.count;if(y.getTime()<=C.getTime()){const He=he*this.cellWidth-5,Ve=this.workCells[L],nt=q*(X+0),It=this.monthHeaderHeight+(q+1)*(X+0)+this.moreIndicatorHeight,vt=this.maxOrIndicator?q<1:this.cellHeight>It;if(this.parent.rowAutoHeight||vt){let mi;mi=this.inlineValue?this.parent.inlineModule.createInlineAppointmentElement():this.createAppointmentElement(o,l),this.applyResourceColor(mi,o,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(mi,o),(0,E.V7)(mi,{width:He+"px",top:nt+"px"}),this.renderEventElement(o,mi,Ve),this.parent.rowAutoHeight&&this.updateCellHeight(Ve.parentElement.firstElementChild,It)}else for(let mi=0;mi<he;mi++){const Ni=this.workCells[L+mi];if(Ni&&(0,E.le)(Ni.querySelector("."+tl))){const Ki=new Date(this.dateRender[L+mi].getTime()),Ts=os(this.dateRender[L+mi],1),Hs=Ni.getAttribute("data-group-index"),Js=this.getFilteredEvents(Ki,Ts,Hs),Fn=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight;X=this.withIndicator?Fn:X;const Hn=Math.floor(Fn/(X+0)),lo=this.getMoreIndicatorElement(Js.length-Hn<=0?1:Js.length-Hn,Ki,Ts);(0,E.le)(Hs)||lo.setAttribute("data-group-index",Hs),lo.style.top=Fn+"px",lo.style.width=this.cellWidth-2+"px",this.renderElement(Ni,lo),E.bi.add(lo,"click",this.moreIndicatorClick,this)}}}}updateCellHeight(o,l){l>o.offsetHeight&&(0,E.V7)(o,{height:l+"px"})}updateBlockElements(){const o=[].slice.call(this.element.querySelectorAll("."+Ge));for(const l of o){const d=(0,E.oq)(l,"tr");this.monthHeaderHeight=l.offsetParent.offsetTop-d.offsetTop,l.style.height=d.offsetHeight-1-this.monthHeaderHeight+"px";const y=d.firstElementChild,C=Math.round(l.offsetWidth/y.offsetWidth);l.style.width=y.offsetWidth*C+"px"}}getFilteredEvents(o,l,d,y){let C;if((0,E.le)(d))C=this.filterEvents(o,l);else{const L=this.parent.resourceBase.lastResourceLevel[parseInt(d,10)];C=this.filterEvents(o,l,(0,E.le)(y)?void 0:y,L)}return C}getOverlapEvents(o,l){const d=[];for(const y of l){const C=Bi(o).getTime();Bi(y[this.fields.startTime]).getTime()<=C&&Bi(y[this.fields.endTime]).getTime()>=C&&d.push(y)}return d}getIndex(o){let l=-1;const d=this.renderedEvents;if(d.length>0){const C=this.getOverlapEvents(o,d).map(L=>L.Index);l=C.length>0?this.getSmallestMissingNumber(C):0}return-1===l?0:l}moreIndicatorClick(o){const l=(0,E.oq)(o.target,"."+tl),d=new Date(parseInt(l.getAttribute("data-start-date"),10)),y=new Date(parseInt(l.getAttribute("data-end-date"),10)),C=l.getAttribute("data-group-index"),L={cancel:!1,event:o,element:l,isPopupOpen:!0,startTime:d,endTime:y,viewName:this.parent.getNavigateView()};C&&(L.groupIndex=parseInt(C,10)),this.parent.trigger("moreEventsClick",L,q=>{if(!q.cancel)if(q.isPopupOpen){const X=this.getFilteredEvents(d,y,C);this.parent.quickPopup.moreEventClick({date:d,event:X,element:o.target},y,C)}else this.parent.setProperties({selectedDate:d},!0),this.parent.changeView(q.viewName,o)})}renderEventElement(o,l,d){const y=l.classList.contains(Ge)?"blockEvent":"event",C=l.classList.contains(Mn),q={data:this.getEventData(o),element:l,cancel:!1,type:y};this.parent.trigger(Re,q,X=>{X.cancel?this.renderedEvents.pop():this.renderElement(d,l,C)})}getEventData(o){const l=(0,E.l7)({},o,null,!0);return l[this.fields.startTime]=o.data[this.fields.startTime],l[this.fields.endTime]=o.data[this.fields.endTime],l}renderElement(o,l,d=!1){this.maxOrIndicator&&d&&this.setMaxEventHeight(l,o);const y=o.querySelector("."+nr);if(y)y.appendChild(l);else{const C=(0,E.az)("div",{className:nr});C.appendChild(l),o.appendChild(C)}}getMoreIndicatorElement(o,l,d){return(0,E.az)("div",{className:tl,innerHTML:"+"+this.parent.globalize.formatNumber(o)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more")),attrs:{tabindex:"0","data-start-date":l.getTime().toString(),"data-end-date":d.getTime().toString(),role:"list"}})}removeHeightProperty(o){const l=[].slice.call(this.element.querySelectorAll("."+o+" tbody tr"));for(const d of l)d.firstElementChild.style.height=""}setMaxEventHeight(o,l){const d=bo(l.querySelector("."+Mi));(0,E.V7)(o,{height:l.offsetHeight-d-(this.maxHeight?0:this.moreIndicatorHeight)+"px","align-items":"center"})}destroy(){this.element=null,this.fields=null,this.maxHeight=null,this.withIndicator=null,this.maxOrIndicator=null,this.moreIndicatorHeight=null,this.removeEventListener(),super.destroy()}}class yh extends Oc{constructor(o,l){super(o),this.startHour=this.parent.activeView.getStartHour(),this.endHour=this.parent.activeView.getEndHour(),this.slotCount=this.parent.activeViewOptions.timeScale.slotCount,this.interval=this.parent.activeViewOptions.timeScale.interval,this.day=0,this.rowIndex=0,this.cellTops=[],this.renderType=l,this.eventContainers=[].slice.call(this.element.querySelectorAll("."+$o));const d=[].slice.call(this.element.querySelectorAll("."+ks+" tbody tr"));this.dayLength=0===d.length?0:d[0].children.length,this.content=this.parent.element.querySelector("."+ks)}getSlotDates(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map(o=>+o)),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length}getOverlapEvents(o,l){const d=[];if("day"===this.renderType)for(const y of l)Bi(y[this.fields.startTime]).getTime()<=Bi(new Date(o.getTime())).getTime()&&Bi(y[this.fields.endTime]).getTime()>=Bi(new Date(o.getTime())).getTime()&&d.push(y);else for(const y of l){const C=y.data;C.trimStartTime.getTime()<=o.getTime()&&C.trimEndTime.getTime()>o.getTime()&&d.push(y)}return d}getSortComparerIndex(o,l){let d=-1;const y=this.renderedEvents;if(y.length>0){const L=this.getOverlapSortComparerEvents(o,l,y).map(q=>q.Index);d=L.length>0?this.getSmallestMissingNumber(L):0}return-1===d?0:d}getOverlapSortComparerEvents(o,l,d){const y=[];for(const C of d)if("day"===this.renderType)Bi(C[this.fields.startTime]).getTime()<=Bi(new Date(o.getTime())).getTime()&&Bi(C[this.fields.endTime]).getTime()>=Bi(new Date(o.getTime())).getTime()&&y.push(C);else{const L=C.data;(L.trimStartTime.getTime()<=o.getTime()&&o.getTime()<L.trimEndTime.getTime()||o.getTime()<=L.trimStartTime.getTime()&&L.trimStartTime.getTime()<l.getTime())&&y.push(C)}return y}renderResourceEvents(){this.removeHeightProperty(Ss);const o=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(let l=0,d=this.parent.crudModule.crudObj.sourceEvent.length;l<d;l++){const y=this.parent.crudModule.crudObj.sourceEvent[l];if(this.rowIndex=y.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,y),this.parent.crudModule.crudObj.targetEvent[l]&&this.parent.crudModule.crudObj.sourceEvent[l].groupIndex!==this.parent.crudModule.crudObj.targetEvent[l].groupIndex){const C=this.parent.crudModule.crudObj.targetEvent[l];this.rowIndex=C.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,C)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(let l=0;l<o.length;l++)this.rowIndex=l,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,o[l])}renderEvents(o,l,d){let y=o[this.fields.startTime],C=o[this.fields.endTime];if(y.getTime()<this.parent.minDate.getTime()||C.getTime()>this.parent.maxDate.getTime())return;const L=o.data;y=this.getStartTime(o,L),C=this.getEndTime(o,L);const q=sr(o[this.fields.startTime],this.startHour,this.endHour),X=this.updateEventMinimumDuration(q,y,C);if(y=X.startDate,C=X.endDate,this.day=this.parent.getIndexOfDate(this.dateRender,Bi(new Date(y.getTime()))),this.day<0)return;const he=this.getCellTd(),He=(0,E.le)(this.parent.eventSettings.sortComparer)?this.getIndex(y):this.getSortComparerIndex(y,C);o.Index=He;const Ve=this.eventHeight,nt=L.count,It=(0,E.l7)({},o,null,!0);It[this.fields.startTime]=L[this.fields.startTime],It[this.fields.endTime]=L[this.fields.endTime];const mi=sr(Bi(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour),Ni=this.isValidEvent(It,y,C,mi);if(y<=C&&Ni){let Ki=this.getEventWidth(y,C,o[this.fields.isAllDay],nt);Ki="day"===this.renderType?Ki-2:Ki;let Ts=0,Hs=0;const Js=this.getPosition(y,C,o[this.fields.isAllDay],this.day);Ki=Ki<=0?this.cellWidth:Ki,this.renderedEvents.push((0,E.l7)({},o,null,!0)),(0,E.le)(this.cellTops[l])&&(this.cellTops[l]=this.getRowTop(l));const Fn=this.cellTops[l],Hn=Fn+(this.maxHeight?0:2)+He*(Ve+2);Ts=this.parent.enableRtl?0:Js,Hs=this.parent.enableRtl?Js:0;const Fr=(He+1)*(Ve+2)+this.moreIndicatorHeight,lo=this.maxOrIndicator?He<1:this.cellHeight>Fr;if(this.parent.rowAutoHeight||lo){let kr;if(kr=(0,E.le)(this.inlineValue)?this.createAppointmentElement(o,l):this.parent.inlineModule.createInlineAppointmentElement(),this.applyResourceColor(kr,o,"backgroundColor",this.groupOrder),(0,E.V7)(kr,{width:Ki+"px",left:Ts+"px",right:Hs+"px",top:Hn+"px"}),this.wireAppointmentEvents(kr,o),this.renderEventElement(o,kr,he),this.parent.rowAutoHeight){const Mo=this.getFirstChild(l);this.updateCellHeight(Mo,Fr)}"TimelineMonth"!==this.parent.activeViewOptions.option&&this.parent.activeViewOptions.timeScale.enable&&Ki<this.cellWidth&&[].slice.call(kr.querySelectorAll("."+Wn)).forEach(ul=>{ul.style.width=Math.ceil(Ki/ul.getBoundingClientRect().width)+"px"})}else for(let kr=0;kr<nt;kr++){const Mo=he.querySelector("."+tl);let ul=this.parent.enableRtl?Hs:Ts;ul=Math.floor(ul/this.cellWidth)*this.cellWidth;const Ra=this.interval/this.slotCount;let pa="TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType||0!==kr?new Date(this.dateRender[this.day+kr].getTime()):new Date(y),Ba=os(this.dateRender[this.day+kr],1);if("TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType){const Ja=this.getPosition(pa,Ba,o[this.fields.isAllDay],this.day+kr);this.renderTimelineMoreIndicator(y,pa,Ba,Ve,Ra,l,d,Fn,Ts,Hs,he,Mo,ul,Ja)}else{const Ja=(oo(C)-oo(y))/wr*this.slotCount/this.interval;for(let Td=0;Td<Ja&&(pa=0===Td?new Date(pa.getTime()):new Date(pa.getTime()+6e4*Ra),Ba=new Date(pa.getTime()+6e4*Ra),!(Ba.getTime()>C.getTime()));Td++){const kp=this.getPosition(pa,Ba,!1,this.day+kr);if(ul>kp)break;ul=kp,this.renderTimelineMoreIndicator(y,pa,Ba,Ve,Ra,l,d,Fn,Ts,Hs,he,Mo,ul,kp)}}}}this.parent.renderTemplates()}renderTimelineMoreIndicator(o,l,d,y,C,L,q,X,he,He,Ve,nt,It,vt){if(he=this.parent.enableRtl?He=vt:vt,It=this.parent.enableRtl?He:he,It=Math.floor(It/this.cellWidth)*this.cellWidth,Ve&&(0,E.le)(nt)||!this.isAlreadyAvail(It,Ve)){const mi="TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType?new Date(+o):l,Ni=new Date(mi.setMinutes(Math.floor(mi.getMinutes()/C)*C)),Ki=new Date(Ni.getTime()+6e4*C);let Ts;this.parent.activeViewOptions.group.resources.length>0&&!(0,E.le)(L)&&(Ts=L.toString());const Hs=this.getFilterEvents(l,d,Ni,Ki,Ts,q),Js=this.cellHeight-this.moreIndicatorHeight;y=this.withIndicator?Js-2:y;const Fn=Math.floor(Js/(y+2)),Hn=Hs.length-Fn<=0?1:Hs.length-Fn;let Fr;Fr="day"===this.renderType?this.getMoreIndicatorElement(Hn,l,d):this.getMoreIndicatorElement(Hn,Ni,Ki),(0,E.le)(Ts)||Fr.setAttribute("data-group-index",Ts),Fr.style.top=X+Js+"px",Fr.style.width=this.cellWidth+"px",Fr.style.left=Math.floor(he/this.cellWidth)*this.cellWidth+"px",Fr.style.right=Math.floor(He/this.cellWidth)*this.cellWidth+"px",this.renderElement(Ve,Fr),E.bi.add(Fr,"click",this.moreIndicatorClick,this)}}updateCellHeight(o,l){if(l>this.cellHeight){if((0,E.V7)(o,{height:l+"px"}),this.parent.activeViewOptions.group.resources.length>0){const y=this.parent.element.querySelector("."+Ss+' tbody td[data-group-index="'+o.getAttribute("data-group-index")+'"]');y&&(0,E.V7)(y,{height:l+"px"})}const d=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(o.parentElement.rowIndex+1)+") td");d&&(0,E.V7)(d,{height:l+"px"})}}getFirstChild(o){let d="";return this.parent.activeViewOptions.group.resources.length>0&&(d='[data-group-index="'+o.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+d)}updateBlockElements(){const o=[].slice.call(this.element.querySelectorAll("."+Ge));for(const d of o){const y=parseInt(d.getAttribute("data-group-index"),10),C=this.getFirstChild(y);d.style.height=C.offsetHeight+"px";const L=Math.round(d.offsetWidth/C.offsetWidth);d.style.width=C.offsetWidth*L+"px"}const l=[].slice.call(this.element.querySelectorAll("."+p));for(const d of l){const y=parseInt(d.getAttribute("data-group-index"),10);d.style.top=this.getRowTop(y)+this.getFirstChild(y).offsetHeight-18+"px"}}getStartTime(o,l){let d=o[this.fields.startTime];const y=sr(d,this.startHour,this.endHour);return d=y.startHour.getTime()>=l[this.fields.startTime]?y.startHour:y.endHour.getTime()<=l[this.fields.startTime]?this.getNextDay(y.startHour,l):l[this.fields.startTime],l.trimStartTime=o[this.fields.isAllDay]?y.startHour:l[this.fields.startTime],d}getNextDay(o,l){let d;for(let y=1;y<=this.dateRender.length;y++)if(d=os(o,y),-1!==this.parent.getIndexOfDate(this.dateRender,Bi(new Date(o.getTime()))))return l.count=l.count-1,d;return d}getEndTime(o,l){let d=o[this.fields.endTime];const y=sr(d,this.startHour,this.endHour);return"TimelineMonth"===this.parent.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?d=l[this.fields.endTime]:(d=l[this.fields.endTime],y.endHour.getTime()<=l[this.fields.endTime]&&(d=y.endHour),y.startHour.getTime()>=l[this.fields.endTime].getTime()&&!o.isAllDay&&(d=this.getPreviousDay(y.startHour,y.endHour,l))),l.trimEndTime=o[this.fields.isAllDay]?y.endHour:l[this.fields.endTime],d}getPreviousDay(o,l,d){for(let y=1;y<=this.dateRender.length;y++){let C=os(l,-y);if(-1!==this.parent.getIndexOfDate(this.dateRender,Bi(new Date(o.getTime())))){C=Bi(new Date(C.getTime())),C.setHours(l.getHours(),l.getMinutes(),l.getSeconds());const L=d.count,q=d[this.fields.endTime];return d.count=0!==q.getHours()||0!==q.getMinutes()?L-1:L,C}}return d[this.fields.endTime]}getEventWidth(o,l,d,y){return"day"===this.renderType||d?y*this.slotsPerDay*this.cellWidth:this.isSameDay(o,l)?this.getSameDayEventsWidth(o,l):this.getSpannedEventsWidth(o,l,y)}getSameDayEventsWidth(o,l){return(oo(l)-oo(o))/wr*(this.cellWidth*this.slotCount)/this.interval}getSpannedEventsWidth(o,l,d){const y=d*this.slotsPerDay*this.cellWidth;let C;const L=sr(Bi(new Date(o.getTime())),this.startHour,this.endHour),q=this.getSameDayEventsWidth(L.startHour,o);if(-1===this.parent.getIndexOfDate(this.dateRender,Bi(new Date(l.getTime()))))C=0;else{const he=sr(Bi(new Date(l.getTime())),this.startHour,this.endHour);C=this.getSameDayEventsWidth(l,he.endHour),C=this.slotsPerDay*this.cellWidth===C?0:C}const X=q+C;return y>X?y-X:y-q}isSameDay(o,l){return this.parent.getIndexOfDate(this.dateRender,Bi(new Date(o.getTime())))===this.parent.getIndexOfDate(this.dateRender,Bi(new Date(l.getTime())))}getAppointmentLeft(o,l,d){const y=this.isSameDay(l,o.startHour)?(oo(l)-oo(o.startHour))/(wr*this.interval)*this.slotCount:0;return 0===d?y:Math.round((oo(o.endHour)-oo(o.startHour))/wr/this.interval*this.slotCount)*d+y}getPosition(o,l,d,y){if("day"===this.renderType||d)return y*this.slotsPerDay*this.cellWidth;const L=sr(Bi(new Date(this.dateRender[y].getTime())),this.startHour,this.endHour);let q;return q=L.endHour.getTime()<=l.getTime()&&L.startHour.getTime()>=o.getTime()?this.getAppointmentLeft(L,L.startHour,y):L.endHour.getTime()<=l.getTime()?this.getAppointmentLeft(L,o,y):L.startHour.getTime()>=o.getTime()?this.getAppointmentLeft(L,L.startHour,y):this.getAppointmentLeft(L,o,y),q*this.cellWidth}getFilterEvents(o,l,d,y,C,L){return"day"===this.renderType?this.getFilteredEvents(o,l,C,L):this.getFilteredEvents(d,y,C,L)}isAlreadyAvail(o,l){const d=[].slice.call(l.querySelectorAll("."+tl));for(let y=0;y<d.length;y++){let C;if(d&&(C=this.parent.enableRtl?d[y].style.right:d[y].style.left),parseInt(C,10)===Math.floor(o))return!0}return!1}getRowTop(o){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector("."+ee+' tbody td[data-group-index="'+o.toString()+'"]').offsetTop:0}getCellTd(){return this.eventContainers[this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex]}renderBlockIndicator(o,l,d){if(!(this.parent.headerRows.length>0&&("Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option||"Date"!==this.parent.headerRows[this.parent.headerRows.length-1].option)||(l=Math.floor(l/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.isAlreadyAvail(l,o)))){const y=(0,E.az)("div",{className:"e-icons "+p});this.parent.activeViewOptions.group.resources.length>0&&y.setAttribute("data-group-index",d.toString()),this.parent.enableRtl?y.style.right=l+"px":y.style.left=l+"px",y.style.top=this.getRowTop(d)+this.cellHeight-18+"px",this.renderElement(o,y)}}setMaxEventHeight(o,l){(0,E.V7)(o,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})}destroy(){this.renderType=null,this.eventContainers=null,this.dayLength=null,this.content=null,super.destroy(),this.parent=null}}class Fc{constructor(o){this.parent=o,this.parent.on(ms,this.inlineEdit,this)}inlineEdit(o){if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),"Cell"===o.type){const l=this.parent.element.querySelector("."+Bo);l&&l.classList.contains(M)&&this.parent.quickPopup.morePopup.hide(),this.removeInlineAppointmentElement(),this.cellEdit(o)}else this.parent.element.querySelector("."+Vl)!==o.element.querySelector("."+Vl)&&this.removeInlineAppointmentElement(),this.eventEdit(o)}cellEdit(o){const l=this.generateEventData();let d=o.element.cellIndex,y=this.getEventDaysCount(l);y>1&&(y=Math.round(y),y--,d-=y);const C=Bi(new Date(""+l[this.parent.eventFields.startTime])).getTime(),L=Bi(new Date(""+l[this.parent.eventFields.endTime])).getTime(),q=o.groupIndex||0;if("Day"===this.parent.currentView||"Week"===this.parent.currentView||"WorkWeek"===this.parent.currentView){const he=l[this.parent.eventFields.startTime].getDay();this.createVerticalViewInline(l,he,q,d)}else"Month"===this.parent.currentView?this.createMonthViewInline(l,q,C,L):this.createTimelineViewInline(l,C,L,q);const X=this.parent.element.querySelector("."+Vl);X&&X.focus()}eventEdit(o){let d,l=o.element.querySelector("."+Vl);if(l)d=l.value;else{const y=o.element.querySelector("."+El),C=o.element.querySelector("."+K);if(d=y.innerText,l=(0,E.az)("input",{className:Vl,attrs:{value:d}}),(0,E.cn)([y],zs),(0,E.oq)(o.element,"."+Bo))o.element.insertBefore(l,y);else if(["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1){const L=o.element.querySelector("."+N);L.insertBefore(l,L.firstChild)}else{const L=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.currentView)>-1?".e-inner-wrap":".e-appointment-details";o.element.querySelector(L).insertBefore(l,C)}l.focus()}l.setSelectionRange(d.length,d.length)}createVerticalViewInline(o,l,d,y){const C=this.getEventDaysCount(o),L=new cf(this.parent);L.initializeValues();const q=L.dateRender[d].map(X=>X.getDay()).indexOf(l);if(C>=1){L.allDayElement=[].slice.call(this.parent.element.querySelectorAll("."+qs)),L.slots.push(...this.parent.activeView.renderDates.map(He=>+He));const X=[].slice.call(this.parent.element.querySelectorAll("."+wo));let he=0;X.length>0&&(he=Math.floor(this.parent.element.querySelector("."+Pn).getBoundingClientRect().height/X[0].offsetHeight)-1),L.allDayLevel=he,L.renderAllDayEvents(o,q,d,y,this.parent.allowInline)}else L.renderNormalEvents(o,q,d,y,this.parent.allowInline)}createMonthViewInline(o,l,d,y){const C=this.getEventDaysCount(o),L=this.parent.eventBase.cloneEventObject(o,d,y,C,!1,!1),q=new Oc(this.parent);q.dateRender=this.parent.activeView.renderDates,q.inlineValue=this.parent.allowInline;let X=this.parent.activeView.renderDates,he=this.parent.activeViewOptions.workDays,He="."+xi;if(this.parent.activeViewOptions.group.resources.length>0){He+='[data-group-index="'+l+'"]';const vt=this.parent.resourceBase.lastResourceLevel[l];X=vt.renderDates,he=vt.workDays}q.workCells=[].slice.call(this.parent.element.querySelectorAll(He)),q.cellWidth=q.workCells[0].offsetWidth,q.cellHeight=q.workCells[0].offsetHeight,q.eventHeight=ro(this.parent.monthModule.element,Mn),q.getSlotDates(he);const Ve=q.getRenderedDates(X),nt=q.splitEvent(L,Ve||X);for(const vt of nt)q.renderEvents(vt,l);this.parent.element.querySelector("."+Vl).focus()}createTimelineViewInline(o,l,d,y){const C=this.getEventDaysCount(o),L=this.parent.eventBase.cloneEventObject(o,l,d,C,!1,!1),q=new yh(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");q.dateRender=this.parent.activeView.renderDates,q.eventContainers=[].slice.call(this.parent.element.querySelectorAll("."+$o));const X=this.parent.element.querySelector("."+xi);q.inlineValue=this.parent.allowInline,q.cellWidth=X.offsetWidth,q.cellHeight=X.offsetHeight;const he=0===this.parent.element.querySelectorAll("."+ks+" tbody tr").length?0:this.parent.element.querySelectorAll("."+ks+" tbody tr")[0].children.length;q.slotsPerDay=he/q.dateRender.length,q.eventHeight=ro(q.element,Mn),q.renderEvents(L,y)}getEventDaysCount(o){const l=o[this.parent.eventFields.startTime];return Math.abs(o[this.parent.eventFields.endTime].getTime()-l.getTime())/Cn}generateEventData(o){const l=this.parent.element.querySelector("."+Vl),d=l?l.value:o?o.innerHTML:"",y={};return y[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),y[this.parent.eventFields.subject]=d,y[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,y[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,y[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.eventWindow.setDefaultValueToObject(y),this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(y,this.parent.activeCellsData.groupIndex),y}documentClick(){const o=this.parent.element.querySelector("."+Vl);o&&""!==o.value?this.inlineCrudActions(o):this.removeInlineAppointmentElement()}inlineCrudActions(o){if((0,E.oq)(o,"."+Ph)){const l=this.generateEventData(o);this.parent.addEvent(l)}else{const l=(0,E.oq)(o,"."+Mn),d=this.parent.getEventDetails(l);let y;d[this.parent.eventFields.subject]=o.value,d[this.parent.eventFields.id]===d[this.parent.eventFields.recurrenceID]&&(y="EditOccurrence",d[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID()),this.parent.saveEvent(d,y)}this.removeInlineAppointmentElement()}createInlineAppointmentElement(o){const l=(0,E.az)("div",{className:Mn+" "+Ph}),d=(0,E.az)("div",{className:k});l.appendChild(d);const y=(0,E.az)("input",{className:Vl});return d.appendChild(y),o&&this.parent.eventBase.applyResourceColor(l,o,"backgroundColor"),l}removeInlineAppointmentElement(){const o=[].slice.call(this.parent.element.querySelectorAll("."+Ph));o.length>0&&o.forEach(d=>(0,E.Od)(d));const l=this.parent.element.querySelector("."+Vl);if(l){const d=(0,E.oq)(l,"."+Mn);(0,E.IV)([d.querySelector("."+El)],zs),(0,E.Od)(l)}}destroy(){this.parent.off(ms,this.inlineEdit)}}class lp{renderFormValidator(o,l,d,y){this.element=d,this.formObj=new ws.Tl(o,{locale:y,customPlacement:(C,L)=>{this.errorPlacement(C,L)},rules:l,validationComplete:C=>{this.validationComplete(C)},focusout:C=>{this.focusOut(C)}})}focusOut(o){const l=o.relatedTarget;this.ignoreError=!(!l||!(l.classList.contains("e-dlg-closeicon-btn")||l.classList.contains("e-close")||l.classList.contains(qs)||l.classList.contains(Ce)||l.classList.contains(sl)||l.classList.contains(xi)||l.classList.contains(pe)))}validationComplete(o){const l=this.element.querySelector("#"+o.inputName+"_Error");l&&(l.style.display="failure"===o.status?"":"none")}errorPlacement(o,l){const d=l.getAttribute("for"),y=this.element.querySelector("#"+d+"_Error");!y&&!this.ignoreError&&this.createTooltip(o,l,d,""),(0,E.le)(y)||(y.querySelector(".e-error").innerHTML=l.innerHTML)}createTooltip(o,l,d,y){let C,L;const q=o.getBoundingClientRect();this.element.classList.contains(eh)?(C=this.element,L=this.element.getBoundingClientRect()):(C=this.element.querySelector(".e-schedule-dialog .e-dlg-content"),L=C.getBoundingClientRect());const X=(0,E.az)("div",{className:"e-tooltip-wrap e-popup "+sa,id:d+"_Error",styles:"display:"+y+";top:"+(q.bottom-L.top+C.scrollTop+9)+"px;left:"+(q.left-L.left+C.scrollLeft+q.width/2)+"px;"}),he=(0,E.az)("div",{className:"e-tip-content"});he.appendChild(l);const He=(0,E.az)("div",{className:"e-arrow-tip e-tip-top"});He.appendChild((0,E.az)("div",{className:"e-arrow-tip-outer e-tip-top"})),He.appendChild((0,E.az)("div",{className:"e-arrow-tip-inner e-tip-top"})),X.appendChild(he),X.appendChild(He),C.appendChild(X),X.style.left=parseInt(X.style.left,10)-X.offsetWidth/2+"px"}destroyToolTip(){if(this.element){const o=[].slice.call(this.element.querySelectorAll("."+sa));for(const l of o)(0,E.Od)(l)}this.formObj&&this.formObj.element&&this.formObj.reset()}destroy(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.formObj=null,this.element=null}}class hd{constructor(o){this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=o,this.l10n=this.parent.localeObj,this.fieldValidator=new lp,this.render(),this.addEventListener()}render(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()}renderQuickPopup(){const o=(0,E.az)("div",{className:eh+" e-popup-close"});this.parent.isAdaptive?(document.body.appendChild(o),(0,E.cn)([o],mn)):this.parent.element.appendChild(o),this.quickPopup=new _e.GI(o,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3})}renderMorePopup(){const o=`<div class="${xo}"><div class="e-more-event-header"><div class="${_}" title="${this.l10n.getConstant("close")}" tabindex="0"></div><div class="${g}"><div class="${D}"></div><div class="${O} ${qi}" tabindex="0"></div></div></div></div>`,l=(0,E.az)("div",{className:Bo+" e-popup-close",innerHTML:o});this.parent.isAdaptive?(document.body.appendChild(l),(0,E.cn)([l],mn)):this.parent.element.appendChild(l),this.morePopup=new _e.GI(l,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2});const d=this.morePopup.element.querySelector("."+_);this.renderButton("e-round",vr+" "+ia,!1,d,this.closeClick),E.bi.add(this.morePopup.element.querySelector("."+O),"click",this.navigationClick,this)}renderQuickDialog(){const o=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){const C={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};o.splice(1,0,C)}this.quickDialog=new _e.Vq({animationSettings:{effect:"Zoom"},buttons:o,cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});const l=(0,E.az)("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(l),this.quickDialog.appendTo(l);const d=this.quickDialog.element.querySelector("."+xs);d&&(d.setAttribute("aria-label",this.l10n.getConstant("occurrence")),d.setAttribute("aria-label",d.innerHTML));const y=this.quickDialog.element.querySelector("."+Os);y&&(y.setAttribute("aria-label",this.l10n.getConstant("series")),y.setAttribute("aria-label",y.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))}renderButton(o,l,d,y,C){new ls.zx({cssClass:o,disabled:d,enableRtl:this.parent.enableRtl,iconCss:l}).appendTo(y),E.bi.add(y,"click",C,this),(0,E.IV)([y],vr)}quickDialogClass(o){const l=[Je,St,Hi,Ms,Wr,zs],d=this.quickDialog.element.querySelector("."+xs),y=this.quickDialog.element.querySelector("."+Os),C=this.quickDialog.element.querySelector("."+br);switch((0,E.IV)([d,y],l),(0,E.cn)([this.quickDialog.element.querySelector("."+Ms)],zs),this.parent.eventSettings.editFollowingEvents&&((0,E.cn)([C],zs),(0,E.IV)([this.quickDialog.element],Pi)),o){case"Recurrence":(0,E.cn)([d],Je),(0,E.cn)([y],St),this.parent.eventSettings.editFollowingEvents&&((0,E.IV)([C],zs),(0,E.cn)([this.quickDialog.element],Pi),(0,E.cn)([C],ri));break;case"Delete":(0,E.cn)([d],Hi),(0,E.cn)([y],Ms);break;case"Alert":(0,E.cn)([d],[xs,Wr]),(0,E.cn)([y],[Os,zs])}}applyFormValidation(){const o=this.quickPopup.element.querySelector("."+mo),l={};l[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(o,l,this.quickPopup.element,this.parent.locale)}openRecurrenceAlert(){const o=this.quickDialog.element.querySelector("."+xs);o&&(o.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),o.setAttribute("aria-label",o.innerHTML));const l=this.quickDialog.element.querySelector("."+br);l&&(l.innerHTML=this.l10n.getConstant("editFollowingEvent"),l.setAttribute("aria-label",l.innerHTML));const d=this.quickDialog.element.querySelector("."+Os);d&&(d.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries"),d.setAttribute("aria-label",d.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence");const y=this.parent.activeEventData.event;if(this.parent.eventSettings.editFollowingEvents&&"EditOccurrence"===this.parent.currentAction&&!(0,E.le)(y[this.parent.eventFields.recurrenceID])&&y[this.parent.eventFields.recurrenceID]!==y[this.parent.eventFields.id]){const C=this.quickDialog.element.querySelector("."+br);(0,E.cn)([C],zs)}this.showQuickDialog("RecurrenceAlert")}openRecurrenceValidationAlert(o){this.quickDialogClass("Alert");const l=this.quickDialog.element.querySelector("."+xs);l.innerHTML=this.l10n.getConstant("ok"),l.setAttribute("aria-label",l.innerHTML);const d=this.quickDialog.element.querySelector("."+Os);let y;switch(d.innerHTML=this.l10n.getConstant("cancel"),d.setAttribute("aria-label",d.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert"),o){case"wrongPattern":(0,E.cn)([d],zs),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":(0,E.cn)([d],zs),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":(0,E.cn)([d],zs),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":y=this.quickDialog.element.querySelector("."+Ms),(0,E.IV)([d,y],zs),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),l.innerHTML=this.l10n.getConstant("yes"),d.innerHTML=this.l10n.getConstant("no"),y.innerHTML=this.l10n.getConstant("cancel");break;case"occurrenceAlert":(0,E.cn)([d],zs),this.quickDialog.content=this.l10n.getConstant("occurenceAlert")}(!this.parent.enableRecurrenceValidation&&"wrongPattern"===o||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")}openDeleteAlert(){if(this.parent.activeViewOptions.readonly)return;const o=this.quickDialog.element.querySelector("."+xs);o&&(o.innerHTML=this.l10n.getConstant("delete"),o.setAttribute("aria-label",o.innerHTML));const l=this.quickDialog.element.querySelector("."+Os);l&&(l.innerHTML=this.l10n.getConstant("cancel"),l.setAttribute("aria-label",l.innerHTML)),this.quickDialog.content=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleContent":"deleteContent"),this.quickDialog.header=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleEvent":"deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}openValidationError(o,l){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(o);const d=this.quickDialog.element.querySelector("."+xs);d&&(d.innerHTML=this.l10n.getConstant("ok"),d.setAttribute("aria-label",d.innerHTML));const y=this.quickDialog.element.querySelector("."+Os);y&&(y.innerHTML=this.l10n.getConstant("cancel"),d.setAttribute("aria-label",y.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert",l)}showQuickDialog(o,l){this.quickDialog.dataBind();const d={type:o,cancel:!1,element:this.quickDialog.element,data:(0,E.l7)({},l||this.parent.activeEventData.event,null,!0)};this.parent.trigger(ci,d,y=>{y.cancel||this.quickDialog.show()})}createMoreEventList(o,l,d){const y=this.parent.eventFields,C=(0,E.az)("div",{className:Q});let L=(0,E.az)("div",{className:me});if(0===o.length)L=(0,E.az)("div",{className:Q,innerHTML:this.l10n.getConstant("emptyContainer")});else for(const q of o){const X=q[y.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),he=(0,E.az)("div",{className:Mn,attrs:{"data-id":""+q[y.id],"data-guid":q.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(q),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnouncementString(q)}});let He;if((0,E.le)(this.parent.activeViewOptions.eventTemplate))he.appendChild((0,E.az)("div",{className:El,innerHTML:X}));else{const nt=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate";He=this.parent.getAppointmentTemplate()(q,this.parent,"eventTemplate",nt,!1),(0,E.R3)(He,he)}(0,E.le)(d)||he.setAttribute("data-group-index",d),(0,E.le)(q[y.recurrenceRule])||he.appendChild((0,E.az)("div",{className:vr+" "+(q[y.id]===q[y.recurrenceID]?fo:hl)}));const Ve={data:(0,E.l7)({},q,null,!0),element:he,cancel:!1};this.parent.trigger(Re,Ve,nt=>{nt.cancel||(L.appendChild(he),this.parent.eventBase.wireAppointmentEvents(he,q,this.parent.isAdaptive||"Year"===this.parent.currentView),this.parent.eventBase.applyResourceColor(he,q,"backgroundColor",l))})}return C.appendChild(L),C}tapHoldEventPopup(o){const l=(0,E.oq)(o.target,"."+Mn);this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(l),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();const d=l.getAttribute("data-guid"),y=this.parent.eventBase.getEventByGuid(d);if((0,E.le)(y))return;const C=y[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),L=`<div class="e-multiple-event-popup"><div class="${Tn}"><button class="${So}" title="${this.l10n.getConstant("close")}"></button><div class="${El}">${C}</div><button class="${ss}" title="${this.l10n.getConstant("edit")}"></button><button class="${Dr}" title="${this.l10n.getConstant("delete")}"></button></div></div>`;this.quickPopup.element.innerHTML=L;const q=this.quickPopup.element.querySelector("."+So);this.renderButton("e-flat e-round e-small",vr+" "+ia,!1,q,this.closeClick);const X=this.parent.activeViewOptions.readonly||y[this.parent.eventFields.isReadonly],he=!this.parent.eventSettings.allowEditing||X,He=!this.parent.eventSettings.allowDeleting||X,Ve=this.quickPopup.element.querySelector("."+ss);Ve&&this.renderButton("e-flat e-round e-small",vr+" "+rn,he,Ve,this.editClick);const nt=this.quickPopup.element.querySelector("."+Dr);nt&&this.renderButton("e-flat e-round e-small",vr+" "+jn,He,nt,this.deleteClick),this.beforeQuickPopupOpen(l)}isCellBlocked(o){const l={};if(l[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,l[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,l[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){const y=parseInt((o.element instanceof Array?o.element[0]:o.element).getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(l,isNaN(y)?null:y)}return this.parent.eventBase.isBlockRange(l)}cellClick(o){const l=new Date(o.startTime.getTime());if(!this.parent.showQuickInfo||!this.parent.eventSettings.allowAdding||"MonthAgenda"===this.parent.currentView||this.isCellBlocked(o)||!this.parent.isMinMaxDate(new Date(l.setHours(0,0,0,0))))return void this.quickPopupHide();const d=o.event.target;if(this.parent.isAdaptive){this.quickPopupHide();let nt=this.parent.element.querySelector("."+Ht);(0,E.le)(nt)&&(nt=(0,E.az)("div",{className:Ht,innerHTML:`<div class="e-title">+ ${this.l10n.getConstant("newEvent")}</div>`}));const It=(0,E.oq)(d,"."+xi+",."+qs);return void(It&&It.appendChild(nt))}const y=(0,E.oq)(d,"."+xi+",."+qs+",."+Ce);if((0,E.le)(y)||d.classList.contains(tl))return;if(this.quickPopup.relateTo===y&&this.quickPopup.element.classList.contains(M)){const nt=this.quickPopup.element.querySelector("."+El);return void(nt&&nt.focus())}const L={};L[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,L[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,L[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;const q=(0,E.az)("div",{className:qr});q.appendChild(this.getPopupHeader("Cell",L)),q.appendChild(this.getPopupContent("Cell",o,L)),q.appendChild(this.getPopupFooter("Cell",L));const X=q.querySelector("."+El);X&&ws.II.createInput({element:X,properties:{placeholder:this.l10n.getConstant("addTitle")}}),(0,E.le)(this.parent.eventSettings.fields.subject.default)||(X.value=this.parent.eventSettings.fields.subject.default);const he=q.querySelector("."+So);he&&this.renderButton("e-flat e-round e-small",vr+" "+ia,!1,he,this.popupClose);const He=q.querySelector("."+sl);He&&this.renderButton("e-flat","",!1,He,this.detailsClick);const Ve=q.querySelector("."+Bl);Ve&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,Ve,this.saveClick),this.morePopup&&this.morePopup.hide(),this.quickPopup.content=q,this.quickPopup.relateTo=y,this.quickPopup.dataBind(),this.beforeQuickPopupOpen(y)}isSameEventClick(o){if(this.quickPopup.relateTo===(0,E.oq)(o.element,"."+Mn)&&this.quickPopup.element.classList.contains(M)){const d=this.quickPopup.element.querySelector("."+ss);if(d&&d.focus(),!this.parent.isAdaptive){const y=this.quickPopup.element.querySelector("."+Xr);y&&y.focus()}return!0}return!1}isQuickTemplate(o){return"Both"===this.parent.quickInfoTemplates.templateType||this.parent.quickInfoTemplates.templateType===o}eventClick(o){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup((0,E.oq)(o.element,"."+Mn));else{if(this.isSameEventClick(o))return;const d=o.event,y=(0,E.az)("div",{className:Ho});y.appendChild(this.getPopupHeader("Event",d)),y.appendChild(this.getPopupContent("Event",o,d)),y.appendChild(this.getPopupFooter("Event",d));const C=this.parent.activeViewOptions.readonly||d[this.parent.eventFields.isReadonly],L=!this.parent.eventSettings.allowEditing||C,q=!this.parent.eventSettings.allowDeleting||C,X=y.querySelector("."+ss),he="e-flat e-round e-small";X&&this.renderButton(he,vr+" "+rn,L,X,this.editClick);const He=y.querySelector("."+Dr);He&&this.renderButton(he,vr+" "+jn,q,He,this.deleteClick);const Ve=y.querySelector("."+So);Ve&&this.renderButton(he,vr+" "+ia,!1,Ve,this.popupClose);const nt=y.querySelector("."+Xr);nt&&this.renderButton("e-flat e-primary","",L,nt,this.editClick);const It=y.querySelector("."+nl);It&&this.renderButton("e-flat","",q,It,this.deleteClick),this.morePopup&&!(0,E.oq)(o.element,"."+me)&&this.morePopup.hide(),this.quickPopup.content=y,this.quickPopup.relateTo=this.parent.isAdaptive?document.body:(0,E.oq)(o.element,"."+Mn),this.quickPopup.dataBind(),this.beforeQuickPopupOpen(o.element)}}getPopupHeader(o,l){const d=(0,E.az)("div",{className:Tn});if(this.isQuickTemplate(o)&&this.parent.quickInfoTemplates.header){const y=(0,E.l7)({},l,{elementType:o.toLowerCase()},!0),C=this.parent.element.id,L=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(y,this.parent,"header",C+"_headerTemplate",!1));(0,E.R3)([].slice.call(L),d)}else{let y,C;switch(o){case"Cell":y=`<div class="${er}"><button class="${So}" title="${this.l10n.getConstant("close")}"></button></div>`;break;case"Event":C=this.getFormattedString(l),y=`<div class="${er}"><button class="${ss+" "+vr}" title="${this.l10n.getConstant("edit")}"></button><button class="${Dr+" "+vr}" title="${this.l10n.getConstant("delete")}"></button><button class="${So}" title="${this.l10n.getConstant("close")}"></button></div><div class="${N}"><div class="${El} ${To}" title="${C.eventSubject}">${C.eventSubject}</div></div >`}const L=(0,E.az)("div",{innerHTML:y});(0,E.R3)([].slice.call(L.childNodes),d)}return d}getPopupContent(o,l,d){const y=(0,E.az)("div",{className:"e-popup-content"});if(this.isQuickTemplate(o)&&this.parent.quickInfoTemplates.content){const C=(0,E.l7)({},d,{elementType:o.toLowerCase()},!0),L=this.parent.element.id,q=[].slice.call(this.parent.getQuickInfoTemplatesContent()(C,this.parent,"content",L+"_contentTemplate",!1));(0,E.R3)([].slice.call(q),y)}else{let C,L,q;const X=this.getResourceText(l,o.toLowerCase());switch(o){case"Cell":L=this.getFormattedString(d),C=`<table class="e-popup-table"><tbody><tr><td><form class="${mo}" onsubmit="return false;"><input class="${El} e-field" type="text" name="${this.parent.eventFields.subject}" /></form></td></tr><tr><td><div class="${dr}"><div class="${hu} ${vr}"></div><div class="${il} ${To}">${L.details}</div></div>${this.parent.activeViewOptions.group.resources.length>0?`<div class="${ng}"><div class="${rg} ${vr} "></div><div class="${og} ${To}">${X}</div></div>`:""}</td></tr></tbody></table>`;break;case"Event":q=this.getFormattedString(d),C='<div class="'+dr+'"><div class="'+hu+" "+vr+'"></div><div class="e-date-time-wrapper '+To+'"><div class="'+il+" "+To+'">'+q.details+"</div>",d[this.parent.eventFields.recurrenceRule]&&(C+='<div class="e-recurrence-summary '+To+'">'+this.getRecurrenceSummary(d)+"</div>"),C+="</div></div>",d[this.parent.eventFields.location]&&(C+='<div class="'+ka+'"><div class="e-location-icon '+vr+'"></div><div class="e-location-details '+To+'">'+d[this.parent.eventFields.location]+"</div></div>"),(d[this.parent.eventFields.startTimezone]||d[this.parent.eventFields.endTimezone])&&(C+='<div class="'+Vo+'"><div class="e-time-zone-icon '+vr+'"></div><div class="e-time-zone-details '+To+'">'+this.getTimezone(d)+"</div></div>"),d[this.parent.eventFields.description]&&(C+='<div class="'+Xa+'"><div class="e-description-icon '+vr+'"></div><div class="e-description-details '+To+'">'+d[this.parent.eventFields.description]+"</div></div>"),this.parent.resourceCollection.length>0&&(C+='<div class="'+ng+'"><div class="'+rg+" "+vr+'"></div><div class="'+og+" "+To+'">'+X+"</div></div>")}const he=(0,E.az)("div",{innerHTML:C});(0,E.R3)([].slice.call(he.childNodes),y)}return y}getPopupFooter(o,l){const d=(0,E.az)("div",{className:Kr});if(this.isQuickTemplate(o)&&this.parent.quickInfoTemplates.footer){const y=(0,E.l7)({},l,{elementType:o.toLowerCase()},!0),C=this.parent.element.id,L=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(y,this.parent,"footer",C+"_footerTemplate",!1));(0,E.R3)([].slice.call(L),d)}else{let y;switch(o){case"Cell":y=`<button class="${sl+" "+To}" title="${this.l10n.getConstant("moreDetails")}">${this.l10n.getConstant("moreDetails")}</button><button class="${Bl} ${To}" title="${this.l10n.getConstant("save")}">${this.l10n.getConstant("save")}</button>`;break;case"Event":y=this.parent.isAdaptive?"":`<button class="${Xr} ${To}" title="${this.l10n.getConstant("edit")}">${this.l10n.getConstant("edit")}</button><button class="${nl} ${To}" title="${this.l10n.getConstant("delete")}">${this.l10n.getConstant("delete")}</button>`}const C=(0,E.az)("div",{innerHTML:y});(0,E.R3)([].slice.call(C.childNodes),d)}return d}getResourceText(o,l){if(0===this.parent.resourceCollection.length)return null;let d="";if(0===this.parent.activeViewOptions.group.resources.length){const y=this.parent.resourceBase.resourceCollection.slice(-1)[0],C=y.dataSource;if("event"===l){const L=o.event;for(const q of C){const X=L[y.field];if(X instanceof Array){if(X.indexOf(q[y.idField])>-1){const he=X[X.indexOf(q[y.idField])],He=C.filter(Ve=>Ve[y.idField]===he)[0];d+=""===d?He[y.textField]:", "+He[y.textField]}}else q[y.idField]===X&&(d=q[y.textField].toString())}}else d=C[0][y.textField].toString()}else if("event"===l){const y=o.event;let C,L;for(let he=this.parent.resourceBase.resourceCollection.length-1;he>=0;he--)if(C=y[this.parent.resourceBase.resourceCollection[he].field],!(0,E.le)(C)){L=this.parent.resourceBase.resourceCollection[he];break}Array.isArray(C)||(C=[C]);const q=[],X=L.dataSource;C.forEach(he=>{let He;const Ve=Ro(X,L.idField,he);Ve>-1&&(He=X[Ve][L.textField]),He&&q.push(He)}),d=q.join(", ")}else{const y=o,C=(0,E.le)(y.groupIndex)?0:y.groupIndex,L=this.parent.resourceBase.lastResourceLevel[C];d=L.resourceData[L.resource.textField]}return d}getFormattedString(o){const l=this.parent.eventFields,d=o[l.subject]||this.l10n.getConstant("noTitle"),y=o[l.startTime],C=o[l.endTime],L=this.getDateFormat(y,"long"),q=o[l.isAllDay]&&0===C.getHours()&&0===C.getMinutes()?this.getDateFormat(os(new Date(C.getTime()),-1),"long"):this.getDateFormat(C,"long"),X=this.parent.getTimeString(y),he=this.parent.getTimeString(C);let He="";const Ve=C.getDate()!==y.getDate()&&(C.getTime()-y.getTime())/36e5<24?1:0;return o[l.isAllDay]?(He=L+" ("+this.l10n.getConstant("allDay")+")",(C.getTime()-y.getTime())/Cn>1&&(He+="&nbsp;-&nbsp;"+q+" ("+this.l10n.getConstant("allDay")+")")):He=(C.getTime()-y.getTime())/Cn>=1||Ve>0?L+" ("+X+")&nbsp;-&nbsp;"+q+" ("+he+")":L+" ("+X+"&nbsp;-&nbsp;"+he+")",{eventSubject:d,details:He}}moreEventClick(o,l,d){this.quickPopupHide(!0);const y=this.morePopup.element.querySelector("."+Q);y&&(0,E.Od)(y);const C=o.date.getTime().toString(),L=(0,E.oq)(o.element,"."+tl+",."+xi),q=this.parent.globalize.formatDate(o.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector("."+D).innerHTML=Bs(q,"single");const X=this.morePopup.element.querySelector("."+O);let he;X.innerHTML=this.getDateFormat(o.date,"d"),X.setAttribute("data-date",C),X.setAttribute("data-end-date",l.getTime().toString()),(0,E.le)(d)||(X.setAttribute("data-group-index",d),he=this.parent.resourceBase.lastResourceLevel[parseInt(d,10)].groupOrder);const He=this.createMoreEventList(o.event,he,d);if(this.morePopup.element.querySelector("."+xo).appendChild(He),(0,E.IV)(this.morePopup.element.querySelector("."+g).childNodes,ts),Bi(o.date).getTime()===Bi(this.parent.getCurrentTime()).getTime()&&(0,E.cn)(this.morePopup.element.querySelector("."+g).childNodes,ts),!this.parent.isAdaptive)if(-1!==this.parent.currentView.indexOf("Timeline")){const nt=L.getAttribute("data-group-index"),It=new Date(parseInt(L.getAttribute("data-start-date"),10));It.setHours(It.getHours(),It.getMinutes(),0);const vt=It.getTime().toString();if((0,E.le)(nt))this.morePopup.relateTo=this.parent.element.querySelector("."+ee+' tbody tr td[data-date="'+vt+'"]');else if(this.morePopup.relateTo=this.parent.element.querySelector("."+ee+' tbody tr td[data-group-index="'+nt+'"][data-date="'+vt+'"]'),(0,E.le)(this.morePopup.relateTo)){const mi=[].slice.call(this.parent.element.querySelectorAll("."+ee+' tbody tr td[data-group-index="'+nt+'"]'));for(let Ni=0;Ni<mi.length;Ni++)mi[Ni].getAttribute("data-date")<vt&&(this.morePopup.relateTo=mi[Ni])}}else this.morePopup.relateTo=(0,E.oq)(L,"."+xi);this.parent.renderTemplates(),this.parent.trigger(ci,{type:"EventContainer",cancel:!1,element:this.morePopup.element,data:o},nt=>{nt.cancel||this.morePopup.show()})}saveClick(o){this.applyFormValidation(),this.dialogEvent=o,this.isCrudAction=!0,this.quickPopupHide()}detailsClick(o){const l=this.quickPopup.element.querySelector("."+El);l&&""!==l.value&&(0,E.l7)(this.parent.activeCellsData,{subject:l.value}),this.dialogEvent=o,this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}editClick(o){this.dialogEvent=o,this.quickPopupHide(!0);const l=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",(0,E.le)(l[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(l,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())}deleteClick(o){this.dialogEvent=o,this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()}updateMoreEventContent(){if(this.morePopup.element.classList.contains("e-popup-close"))return;const o=this.morePopup.element.querySelector("."+Q);o&&(0,E.Od)(o);const l=this.morePopup.element.querySelector("."+O),d=new Date(parseInt(l.getAttribute("data-date"),10)),y=new Date(parseInt(l.getAttribute("data-end-date"),10)),C=l.getAttribute("data-group-index");let L,q;(0,E.le)(C)||(L=this.parent.resourceBase.lastResourceLevel[parseInt(C,10)],q=L.groupOrder);const X=this.parent.eventBase.filterEvents(d,y,this.parent.eventsProcessed,L),he=this.createMoreEventList(X,q,C);this.morePopup.element.querySelector("."+xo).appendChild(he)}closeClick(o){this.dialogEvent=o,"Year"===this.parent.currentView&&this.parent.activeCellsData&&this.parent.activeCellsData.element&&this.parent.selectCell(this.parent.activeCellsData.element),this.quickPopupHide(),this.morePopup.hide()}dialogButtonClick(o){this.dialogEvent=o,this.quickDialog.hide();const l=o.target,d=this.quickDialog.element.querySelector("."+Os),y=this.parent.activeEventData.event;if(l.classList.contains(Je))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(y,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(y,this.parent.currentAction)}else if(l.classList.contains(ri))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(y,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(y,this.parent.currentAction)}else if(l.classList.contains(St))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(y,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(y,this.parent.currentAction)}else l.classList.contains(Hi)?this.parent.crudModule.deleteEvent(y,this.parent.currentAction):!d.classList.contains(zs)&&(l.classList.contains(xs)||l.classList.contains(Os)&&!d.classList.contains(Ms))&&(this.parent.uiStateValues.isIgnoreOccurrence=l.classList.contains(Os),this.parent.eventWindow.eventSave(o,this.l10n.getConstant("ok")))}updateTapHoldEventPopup(o){const l=this.parent.eventBase.getSelectedEventElements(o);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),l.length>0){const d=this.parent.eventBase.getEventByGuid(l[0].getAttribute("data-guid")),y=1===l.length?d[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+l.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector("."+El).innerHTML=y,l.length>1?(0,E.cn)([this.quickPopup.element.querySelector("."+rn)],Zl):(0,E.IV)([this.quickPopup.element.querySelector("."+rn)],Zl)}else this.parent.selectedElements=[],this.quickPopupHide()}getTimezone(o){let l="";return l+=o[this.parent.eventFields.startTimezone]||"",l+=""===l?"":" - ",l+=o[this.parent.eventFields.endTimezone]||"",l}getRecurrenceSummary(o){const l=this.parent.eventWindow.getRecurrenceEditorInstance();if(l){const d=l.getRuleSummary(o[this.parent.eventFields.recurrenceRule]);return d.charAt(0).toUpperCase()+d.slice(1)}return""}getDateFormat(o,l){return Bs(this.parent.globalize.formatDate(o,{skeleton:l,calendar:this.parent.getCalendarMode()}),"single")}getDataFromTarget(o){if(o.classList.contains(Mn))return this.parent.activeEventData.event;const l={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex};return this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,l),l}beforeQuickDialogClose(o){const l={event:o.event||this.dialogEvent,type:(0,E.le)(this.parent.activeEventData.event)?"ValidationAlert":(0,E.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger(pi,l,d=>{d.cancel||this.parent.eventBase.focusElement(!0)})}beforeQuickPopupOpen(o){this.parent.renderTemplates();const l=this.quickPopup.element.querySelector("."+Ho),d=this.parent.isAdaptive?l?"ViewEventInfo":"EditEventInfo":"QuickInfo",y={type:d,cancel:!1,data:(0,E.l7)({},this.getDataFromTarget(o),null,!0),target:o,element:this.quickPopup.element};this.parent.trigger(ci,y,C=>{if(C.cancel)this.quickPopupHide(),this.destroyPopupButtons("quickPopup"),C.element.classList.contains(M)&&this.quickPopupClose(),yr(this.quickPopup.element),this.isMultipleEventSelect=!1;else{const L=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.parent.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=(0,E.Ac)("EditEventInfo"===d?65:window.innerHeight);else{this.quickPopup.offsetX=10,this.quickPopup.collision={X:this.parent.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.parent.enableRtl?"left":"right",Y:this.parent.enableRtl?"bottom":"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);const q=(0,_e.vF)(this.quickPopup.element,this.parent.element);if(q.indexOf(this.parent.enableRtl?"left":"right")>-1&&(this.quickPopup.offsetX=-o.offsetWidth-10-this.quickPopup.element.offsetWidth,this.quickPopup.dataBind(),(0,_e.vF)(this.quickPopup.element,this.parent.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind())),this.parent.virtualScrollModule&&(q.indexOf("top")>-1||q.indexOf("bottom")>-1)){const he=function Br(ae){const o=getComputedStyle(ae);return window.WebKitCSSMatrix?new WebKitCSSMatrix(o.webkitTransform).m42:0}(this.parent.element.querySelector("."+ee+" table"));this.quickPopup.offsetY=he,this.quickPopup.dataBind()}}l&&this.applyEventColor(),this.quickPopup.element.style.display=L,this.quickPopup.dataBind(),this.quickPopup.show()}})}applyEventColor(){let o="";o="Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?this.parent.enableRtl?"border-right-color":"border-left-color":"background-color";let l=this.parent.activeEventData.element.style[o];if(""===l)return;let d=this.quickPopup.element.querySelector("."+Tn);const y=this.quickPopup.element.querySelector("."+Kr);y&&y.offsetParent&&(d=this.quickPopup.element.querySelector("."+El),d&&(d.style.borderLeftColor=l,l=`rgba(${l.match(/\d+/g).join()},0.3)`)),d&&(d.style.backgroundColor=l)}quickPopupOpen(){if(this.parent.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector("."+qr)){const o=this.quickPopup.element.querySelector("."+El);o&&o.focus()}else{const o=this.quickPopup.element.querySelector("."+Xr);o&&o.focus();const l=this.quickPopup.element.querySelector("."+ss);l&&l.focus()}}quickPopupClose(){this.parent.eventBase.focusElement(),this.quickPopup.relateTo=xi,this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyPopupButtons("quickPopup"),yr(this.quickPopup.element)}morePopupOpen(){if(this.parent.isAdaptive)return this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",void(this.morePopup.element.style.height=(0,E.Ac)(window.innerHeight));this.morePopup.element.querySelector("."+O).focus(),this.morePopup.refreshPosition()}morePopupClose(){const o=this.parent.element.querySelector("."+me);o&&(0,E.Od)(o)}popupClose(o){this.dialogEvent=o,this.isCrudAction=!1,this.quickPopupHide(!0)}quickPopupHide(o){if(!this.quickPopup.element.classList.contains(M))return;const l=this.quickPopup.element.querySelector("."+qr);let d;if(l){const L=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&L&&!L.ej2_instances[0].validate())return;const q=this.parent.eventFields,X=this.parent.eventWindow.getObjectFromFormData(eh);this.parent.eventWindow.setDefaultValueToObject(X),X[q.id]=this.parent.eventBase.getEventMaxID(),X[q.startTime]=this.parent.activeCellsData.startTime,X[q.endTime]=this.parent.activeCellsData.endTime,X[q.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(X),d=X}else d=this.parent.activeEventData.event;const y=this.quickPopup.element.querySelector("."+Ho);this.parent.trigger(pi,{event:this.dialogEvent,type:this.parent.isAdaptive?y?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:d,element:this.quickPopup.element,target:l?this.parent.activeCellsData.element:this.parent.activeEventData.element},L=>{if(!L.cancel&&this.quickPopup.element.classList.contains("e-popup-open")){if(l&&this.isCrudAction&&(this.parent.currentAction="Add",this.parent.crudModule.addEvent(L.data)),o){const q=this.quickPopup.hideAnimation;this.quickPopup.hideAnimation=null,this.quickPopup.hide(),this.quickPopup.hideAnimation=q}else this.quickPopup.hide();this.isMultipleEventSelect=!1,this.isCrudAction=!1}})}navigationClick(o){const l=(0,E.oq)(o.target,"."+qi);if(!(0,E.le)(l)){const d=this.parent.getDateFromElement(o.currentTarget);(0,E.le)(d)||(this.closeClick(o),this.parent.setProperties({selectedDate:d},!0),this.parent.changeView(this.parent.getNavigateView(),o))}}documentClick(o){const l=o.event.target,d="."+eh+",."+Ce+",."+qs+",."+xi+",."+Mn+",.e-popup",y=this.parent.element.querySelector("."+eh);(y&&y.childElementCount>0&&!(0,E.oq)(l,d)||!(0,E.oq)(l,d))&&(this.quickPopupHide(),this.parent.removeNewEventElement());const C=this.parent.element.querySelector("."+Vl);C&&C!==l&&this.parent.allowInline&&this.parent.inlineModule.documentClick(),(0,E.oq)(l,"."+Mn+",."+Ce)&&this.parent.removeNewEventElement(),!(0,E.oq)(l,"."+Bo)&&l.classList&&!l.classList.contains(tl)&&!(0,E.oq)(l,"."+M)&&!(0,E.oq)(l,"."+xi)&&this.morePopup.hide()}onClosePopup(o){(0,E.le)(o)||(this.dialogEvent=o),this.quickPopupHide(),this.parent.eventBase.focusElement()}addEventListener(){this.parent.on(Kn,this.cellClick,this),this.parent.on(je,this.eventClick,this),this.parent.on($n,this.documentClick,this),this.parent.on(Ln,this.updateMoreEventContent,this)}removeEventListener(){this.parent.off(Kn,this.cellClick),this.parent.off(je,this.eventClick),this.parent.off($n,this.documentClick),this.parent.off(Ln,this.updateMoreEventContent)}destroyPopupButtons(o){const d=[].slice.call(("quickPopup"===o?this.quickPopup:this.morePopup).element.querySelectorAll(".e-control.e-btn"));for(const y of d){const C=y.ej2_instances[0];C&&C.destroy()}}refreshQuickDialog(){this.destroyQuickDialog(),this.renderQuickDialog()}refreshQuickPopup(){this.destroyQuickPopup(),this.renderQuickPopup()}refreshMorePopup(){this.destroyMorePopup(),this.renderMorePopup()}destroyQuickDialog(){this.quickDialog.element&&(this.quickDialog.destroy(),(0,E.Od)(this.quickDialog.element),this.quickDialog=null)}destroyQuickPopup(){this.quickPopup.element&&(this.destroyPopupButtons("quickPopup"),this.quickPopup.destroy(),(0,E.Od)(this.quickPopup.element),this.quickPopup=null)}destroyMorePopup(){this.morePopup.element&&(this.destroyPopupButtons("morePopup"),this.morePopup.destroy(),(0,E.Od)(this.morePopup.element),this.morePopup=null)}destroy(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListener(),this.destroyQuickPopup(),this.destroyMorePopup(),this.destroyQuickDialog(),this.parent=null,this.l10n=null,this.isCrudAction=null,this.fieldValidator=null,this.isMultipleEventSelect=null}}class Pc{constructor(o){this.parent=o,this.tooltipObj=new _e.u({animation:{close:{effect:"FadeOut"}},content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" e-schedule-event-tooltip",target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onBeforeClose.bind(this),enableRtl:this.parent.enableRtl}),this.tooltipObj.appendTo(this.parent.element)}getTargets(){const o=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&o.push("."+En),this.parent.eventSettings.enableTooltip&&o.push("."+Mn),o.join(",")}onBeforeRender(o){if(!(0,E.le)(o.target.getAttribute("data-tooltip-id")))return;if(o.target.classList.contains(En)&&this.parent.activeViewOptions.group.resources.length>0){let d;if(this.parent.activeView.isTimelineView()){const X=parseInt(o.target.getAttribute("data-group-index"),10);d=this.parent.resourceBase.lastResourceLevel[X]}else{const X=o.target.parentNode.sectionRowIndex,he=o.target.cellIndex;d=this.parent.activeView.getColumnLevels()[X][he]}const y={resource:d.resource,resourceData:d.resourceData},C=(0,E.az)("div"),L=this.parent.element.id+"_headerTooltipTemplate",q=[].slice.call(this.parent.getHeaderTooltipTemplate()(y,this.parent,"headerTooltipTemplate",L,!1));return(0,E.R3)(q,C),this.setContent(C),void this.parent.renderTemplates()}const l=this.parent.eventBase.getEventByGuid(o.target.getAttribute("data-guid"));if(!(0,E.le)(l)){if((0,E.le)(this.parent.eventSettings.tooltipTemplate)){const d=this.parent.globalize,y=this.parent.eventFields,C=new Date(""+l[y.startTime]);let L=new Date(""+l[y.endTime]);L=0===L.getHours()&&0===L.getMinutes()?new Date(L.setMilliseconds(-1e3)):L;const q=Bi(new Date(""+C)),X=Bi(new Date(""+L)),he=l[y.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),He=(0,E.le)(l[y.location])?"":l[y.location];let Ve="",nt="",It="";Ve=d.formatDate(C,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),nt=d.formatDate(C,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),It=d.formatDate(L,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),Ve=Bs(Ve,"single"),nt=Bs(nt,"single"),It=Bs(It,"single");const vt="short",mi=d.formatDate(C,{type:"time",skeleton:vt,calendar:this.parent.getCalendarMode()}),Ni=d.formatDate(L,{type:"time",skeleton:vt,calendar:this.parent.getCalendarMode()});let Ki;q.getTime()===X.getTime()?(Ki=d.formatDate(C,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),Ki=Bs(Ki,"single")):Ki=q.getFullYear()===X.getFullYear()?Ve+" - "+It:nt+" - "+It;const Ts=l[y.isAllDay]?this.parent.localeObj.getConstant("allDay"):mi+" - "+Ni;this.setContent('<div><div class="e-subject">'+he+'</div><div class="e-location">'+He+'</div><div class="e-details">'+Ki+'</div><div class="e-all-day">'+Ts+"</div></div>")}else{const d=(0,E.az)("div"),y=this.parent.element.id+"_tooltipTemplate",C=[].slice.call(this.parent.getEventTooltipTemplate()(l,this.parent,"tooltipTemplate",y,!1));(0,E.R3)(C,d),this.setContent(d)}this.parent.renderTemplates()}}onBeforeClose(){this.parent.resetTemplates(["tooltipTemplate","headerTooltipTemplate"])}setContent(o){this.tooltipObj.setProperties({content:o},!0)}close(){this.tooltipObj.close()}destroy(){this.tooltipObj.destroy(),(0,E.cn)([this.parent.element],"e-control"),this.tooltipObj=null,this.parent=null}}var Pl=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};const qa="e-input-wrapper",zd="e-input-wrapper-side",jd="e-repeat-element",zh="e-repeat-interval",gu="e-interval",Oa="e-days",Nc="e-non-week",Bc="e-year-expander",yu="e-year-expander-element",ic="e-month-expander",vu="e-month-expander-element",dd="e-month-expander-checkbox-wrapper",sc="e-form-left",nc="e-form-right",ap="e-month-day",bu="e-month-expander-wrapper",Cu="e-month-pos",pf="e-month-week",rc="e-end-on",yg="e-end-on-element",Su="e-end-on-date",ff="e-until-date",Vc="e-end-on-count",Eu="e-recurrence-count",rh="e-hide-recurrence-element",qh="e-primary",cp="e-active",Ud="e-recurrence-table",dp="e-repeat-content",_c="none",ud="daily",Hc="weekly",pd="monthly",fd="yearly",Kl="never",Da="until",oc="count",zc="text",gd="value",fp="MONTHLY",Or=";",Lr={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},Sh={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},Nl=[Oa,Nc,rc,gu,Bc,ic],ra=[Nc],Eh=[Oa,Bc],Ua=[Oa],ac=[Oa,Nc,Bc,ic],fn=[Su,Vc],vo=[Su],Qo=[Vc];let go=class extends E.wA{constructor(o,l){super(o,l),this.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},this.renderStatus=!1,this.dayButtons=[],this.monthButtons=[]}startState(o,l,d){this.showFormElement(),this.updateForm(o),this.freshOnEndForm(),this.updateEndOnForm(l),this.selectMonthDay(d),this.updateUntilDate(d),this.onMonthDay.setProperties({checked:!0})}preRender(){this.localeObj=new E.E7(this.getModuleName(),this.defaultLocale,this.locale),this.calendarUtil=Vd(this.calendarMode)}applyCustomClass(o){o&&(0,E.cn)([this.element],o.split(" "))}initialize(){(0,E.cn)([this.element],"e-"+this.getModuleName()),this.renderComponent(),(0,E.le)(this.value)||""===this.value?((0,E.le)(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),Kl,this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)}triggerChangeEvent(){if(this.renderStatus){const o=this.getRecurrenceRule();this.trigger("change",{value:o},l=>this.setProperties({value:l.value},!1))}}resetDayButton(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach(l=>(0,E.IV)([l],[cp,qh]))}daySelection(o){this.resetDayButton();const l=[0,1,2,3,4,5,6];this.rotateArray(l,this.firstDayOfWeek);const d=this.element.querySelector('.e-days button[data-index="'+l.indexOf(o)+'"]');d&&(0,E.cn)([d],[cp,qh])}rtlClass(o){o?(0,E.cn)([this.element],"e-rtl"):(0,E.IV)([this.element],"e-rtl")}updateUntilDate(o){const l=new Date(o.getTime());l.setDate(l.getDate()+60),this.untilDateObj.setProperties({value:l})}selectMonthDay(o){this.monthDate.setProperties({value:this.calendarUtil.getDate(o)}),this.monthWeekDays.setProperties({value:Sh[["sun","mon","tue","wed","thu","fri","sat"][o.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(o)}),this.monthWeekPos.setProperties({value:this.getDayPosition(o)}),this.daySelection(o.getDay())}updateForm(o){this.repeatType.setProperties({value:o});const l=this.element.querySelector("."+rc);switch(o===ud?(0,E.s1)(l,[sc],[nc]):(0,E.s1)(l,[nc],[sc]),o){case _c:Nl.forEach(d=>(0,E.cn)([this.element.querySelector("."+d)],rh));break;case Hc:ra.forEach(d=>(0,E.cn)([this.element.querySelector("."+d)],rh));break;case pd:Eh.forEach(d=>(0,E.cn)([this.element.querySelector("."+d)],rh));break;case fd:Ua.forEach(d=>(0,E.cn)([this.element.querySelector("."+d)],rh));break;case ud:ac.forEach(d=>(0,E.cn)([this.element.querySelector("."+d)],rh))}}updateEndOnForm(o){switch(this.endType.setProperties({value:o}),o){case Kl:fn.forEach(l=>(0,E.cn)([this.element.querySelector("."+l)],rh));break;case Da:Qo.forEach(l=>(0,E.cn)([this.element.querySelector("."+l)],rh));break;case oc:vo.forEach(l=>(0,E.cn)([this.element.querySelector("."+l)],rh))}}freshOnEndForm(){fn.forEach(o=>{const l=this.element.querySelector("."+o);l&&(0,E.IV)([l],rh)})}showFormElement(){Nl.forEach(o=>{const l=this.element.querySelector("."+o);l&&(0,E.IV)([l],rh)})}renderDropdowns(){const o=this;this.repeatType=new Ds.NB({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:zc,value:gd},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat")},change:d=>{o.setProperties({selectedType:this.frequencies.indexOf(d.value)},!1),o.element.querySelector("."+dp).innerHTML=o.localeObj.getConstant(Lr[d.value]),o.showFormElement(),o.updateForm(d.value),o.resetFormValues(),o.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector("."+jd)),this.endType=new Ds.NB({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:zc,value:gd},change:d=>{o.freshOnEndForm(),o.updateEndOnForm(d.value),o.resetFormValues(),o.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector("."+yg));const l=d=>new Ds.NB({dataSource:d,popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,fields:{text:zc,value:gd},index:1,change:y=>{o.onWeekDay.setProperties({checked:!0}),o.resetFormValues(),o.triggerChangeEvent()}});this.monthWeekPos=l(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector("."+Cu)),this.monthWeekDays=l(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector("."+pf)),this.monthValue=new Ds.NB({dataSource:this.getMonthData(),fields:{text:zc,value:gd},enableRtl:this.enableRtl,index:7,change:d=>{o.resetFormValues(),o.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector("."+yu))}setDefaultValue(){const o=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));for(const l of o){const d=l.ej2_instances[0];d.element.classList.contains(zh)?(d.value=1,d.dataBind()):d.element.classList.contains(Eu)&&(d.value=10,d.dataBind())}}resetFormValues(){const o=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));for(const l of o){let d;if(l.classList.contains("e-datepicker"))d=l.ej2_instances[0],d.value?(d.value=d.value,d.dataBind()):this.updateUntilDate(this.startDate);else if(l.classList.contains("e-dropdownlist"))d=l.ej2_instances[0],d.index=d.index||0,d.dataBind();else if(l.classList.contains("e-numerictextbox")){let y;d=l.ej2_instances[0],y=d.element.classList.contains(zh)?1:d.element.classList.contains(Eu)?10:this.startDate.getDate(),d.value=d.value||y,d.dataBind()}}}getPopupWidth(){return E.AR.isDevice?"100%":"auto"}renderDatePickers(){const o=this;this.untilDateObj=new Ti.Mt({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:(0,E.le)(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:l=>{l.value&&o.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector("."+ff))}getFormat(o){let l;return l="en"===this.locale||"en-US"===this.locale?(0,E.NA)(o+".short",(0,E.bD)(this.getCalendarMode())):(0,E.NA)("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+o+".short",E.qV),l}dayButtonRender(){const o=[].slice.call(this.element.querySelectorAll(".e-days button")),l=this;for(const d of o){const y=new ls.zx({isToggle:!0,enableRtl:this.enableRtl},d);this.dayButtons.push(y),E.bi.add(d,"click",C=>{const L=[].slice.call(this.element.querySelectorAll(".e-days button."+qh)),q=C.target;q.classList.contains(qh)?L.length>1&&((0,E.IV)([q],qh),l.triggerChangeEvent()):((0,E.cn)([q],qh),l.triggerChangeEvent())})}}radioButtonRender(){const o=this;this.onMonthDay=new ls.EU({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:()=>{o.resetFormValues(),o.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector("."+vu)),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new ls.EU({label:this.localeObj.getConstant("monthExpander"),cssClass:"e-month-type",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:()=>{o.resetFormValues(),o.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector("."+bu)),this.monthButtons.push(this.onWeekDay)}numericTextboxRender(){const o=this;this.recurrenceCount=new ws.No({value:10,format:"#",enableRtl:this.enableRtl,min:1,max:999,change:()=>{o.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+Eu)),this.monthDate=new ws.No({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:()=>{o.onMonthDay.setProperties({checked:!0}),o.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector("."+ap)),this.repeatInterval=new ws.No({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:()=>{o.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector("."+zh))}renderComponent(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()}rotateArray(o,l){let d;for(let y=0;y<l;y++)d=o.shift(),o.push(d)}getEndData(){const l=this,d=[];return[Kl,Da,oc].forEach(y=>{d.push({text:l.localeObj.getConstant(y),value:y})}),d}getDayPosition(o){let l=new Date(o.getTime()),d=new Date(o.getTime());const y=o.getDay(),C=[];for(l=this.calendarUtil.getMonthStartDate(l),d=this.calendarUtil.getMonthEndDate(d);l<d;)l.getDay()===y&&C.push(l.getTime()),l.setDate(l.getDate()+1);return C.indexOf(o.getTime())===C.length-1?-1:C.indexOf(o.getTime())+1}getRepeatData(){const o=[],l=this;return this.frequencies.forEach(d=>{o.push({text:l.localeObj.getConstant(d===_c?Kl:d),value:d})}),o}getMonthPosData(){const l={first:1,second:2,third:3,fourth:4,last:-1},d=this,y=[];return["first","second","third","fourth","last"].forEach(C=>{y.push({text:d.localeObj.getConstant(C),value:l[C]})}),y}getDayData(o){const l=["sun","mon","tue","wed","thu","fri","sat"],d=[];let y;if(this.rotateArray(l,this.firstDayOfWeek),"en"===this.locale||"en-US"===this.locale)y=(0,E.NA)("days.stand-alone."+o,(0,E.bD)(this.getCalendarMode()));else{const C="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+o;y=(0,E.NA)(C,E.qV)}for(const C of l){const L=(0,E.NA)(C,y);d.push({text:"narrow"===o?L:Bs(L,"single"),value:Sh[C]})}return d}getMonthData(){const o=[];let l;if("en"===this.locale||"en-US"===this.locale)l=(0,E.NA)("months.stand-alone.wide",(0,E.bD)(this.getCalendarMode()));else{const d="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide";l=(0,E.NA)(d,E.qV)}for(const d of Object.keys(l))o.push({text:Bs((0,E.NA)(d,l),"single"),value:d});return o}setTemplate(){const o=this.getDayData("narrow"),l=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+qa+" "+sc+'"><input type="text" tabindex="0" class="'+jd+'"label="'+jd.substr(2)+'" /></div><div class="'+qa+" "+gu+" "+nc+'"><table  class="'+Ud+' e-repeat-content-wrapper"><tr><td><input type="text" tabindex="0" class="'+zh+'"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="'+dp+'"></span></td></tr></table></div><div class="'+zd+" "+Oa+" "+sc+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+l[0].text+'">'+o[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+l[1].text+'">'+o[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+l[2].text+'">'+o[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+l[3].text+'">'+o[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+l[4].text+'">'+o[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+l[5].text+'">'+o[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+l[6].text+'">'+o[6].text+'</button></div><div class="'+zd+" "+Nc+" "+sc+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="'+Bc+'"><input class="'+yu+'" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="'+ic+'"><table class="'+Ud+' e-month-expand-wrapper"><tr><td><div class="'+qa+" "+dd+'"><input class="'+vu+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+qa+' e-monthday-element"><input type="text" tabindex="0" class="'+ap+'"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+qa+" "+dd+'" style="min-width: 30px;margin-bottom:18px;"><input class="'+bu+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+qa+' e-week-position" ><input type="text" tabindex="0" class="'+Cu+'"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+qa+' e-day-position"><input type="text" tabindex="0" class="'+pf+'"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="'+zd+" "+rc+" "+nc+'"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+qa+' e-end-on-left"><input type="text" tabindex="0" class="'+yg+'"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+qa+" "+Su+'" ><input type="text" tabindex="0" class="'+ff+'"title="'+this.localeObj.getConstant(Da)+'" /></div><div class="'+qa+" "+Vc+'"><input type="text" tabindex="0" class="'+Eu+'"title="'+this.localeObj.getConstant(oc)+'" /></div></div></div></div>'}getSelectedDaysData(){let o="BYDAY=";const l=[].slice.call(this.element.querySelectorAll(".e-days button."+qh)),d=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(d,this.firstDayOfWeek);for(let y=0;y<l.length;y++)o+=d[parseInt(l[y].getAttribute("data-index"),10)]+(y===l.length-1?"":",");return o+Or}getSelectedMonthData(){let o;return o=this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+Or:"BYMONTHDAY="+this.monthDate.value+Or,o}getIntervalData(){return"INTERVAL="+this.repeatInterval.value+Or}getEndOnCount(){return"COUNT="+this.recurrenceCount.value+Or}getYearMonthRuleData(){return"BYMONTH="+this.monthValue.value+Or}updateWeekButton(o){const l=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(l,this.firstDayOfWeek);for(const d of this.dayButtons){const y=parseInt(d.element.getAttribute("data-index"),10);-1!==o.indexOf(l[y])?d.setProperties({isPrimary:!0}):d.setProperties({isPrimary:!1})}}updateMonthUI(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(const o of Object.keys(Sh))if(Sh[o]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}}updateUI(o,l){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),l){case Da:this.untilDateObj.setProperties({value:this.ruleObject.until});break;case oc:this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(o){case Hc:this.updateWeekButton(this.ruleObject.day);break;case fd:this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case pd:this.updateMonthUI()}}getUntilData(){return this.untilDateObj.value?"UNTIL="+nh(this.untilDateObj.value)+Or:""}destroyComponents(){this.recurrenceCount.isDestroyed||this.recurrenceCount.destroy(),this.monthDate.isDestroyed||this.monthDate.destroy(),this.repeatInterval.isDestroyed||this.repeatInterval.destroy(),this.untilDateObj.isDestroyed||this.untilDateObj.destroy(),this.repeatType.isDestroyed||this.repeatType.destroy(),this.endType.isDestroyed||this.endType.destroy(),this.monthWeekPos.isDestroyed||this.monthWeekPos.destroy(),this.monthWeekDays.isDestroyed||this.monthWeekDays.destroy(),this.monthValue.isDestroyed||this.monthValue.destroy(),this.dayButtons.forEach(o=>{o.isDestroyed||o.destroy()}),this.dayButtons=[],this.monthButtons.forEach(o=>{o.isDestroyed||o.destroy()}),this.monthButtons=[]}resetFields(){this.startState(_c,Kl,this.startDate),this.setDefaultValue()}updateRuleUntilDate(o){if(this.untilDateObj.value&&o){const l=this.untilDateObj.value,d=new Date(l.getFullYear(),l.getMonth(),l.getDate(),o.getHours(),o.getMinutes(),o.getMilliseconds());this.untilDateObj.setProperties({value:d})}}getCalendarMode(){return this.calendarMode.toLowerCase()}getRuleSummary(o=this.getRecurrenceRule()){return function Jh(ae,o,l,d="Gregorian"){const y=_l(ae);let L,q,C=o.getConstant("every")+" ";const X=d.toLowerCase();if("en"===l||"en-US"===l){const He="days.stand-alone.abbreviated";q=(0,E.NA)("months.stand-alone.abbreviated",(0,E.bD)(X)),L=(0,E.NA)(He,(0,E.bD)(X))}else{const He="main."+l+".dates.calendars."+X+".days.stand-alone.abbreviated";q=(0,E.NA)("main."+l+".dates.calendars."+X+".months.stand-alone.abbreviated",E.qV),L=(0,E.NA)(He,E.qV)}switch(y.interval>1&&(C+=y.interval+" "),y.freq){case"DAILY":C+=o.getConstant("summaryDay");break;case"WEEKLY":C+=o.getConstant("summaryWeek")+" "+o.getConstant(Ic)+" ",y.day.forEach((he,He)=>{C+=Bs((0,E.NA)(_h[he],L),"single"),C+=y.day.length-1===He?"":", "});break;case"MONTHLY":C+=o.getConstant("summaryMonth")+" "+o.getConstant(Ic)+" ",C+=od(y,L,o);break;case"YEARLY":C+=o.getConstant("summaryYear")+" "+o.getConstant(Ic)+" ",C+=Bs((0,E.NA)(y.month[0].toString(),q),"single")+" ",C+=od(y,L,o)}if(y.count)C+=", "+y.count+" "+o.getConstant("summaryTimes");else if(y.until){const he=y.until;C+=", "+o.getConstant("summaryUntil")+" "+he.getDate()+" "+Bs((0,E.NA)((he.getMonth()+1).toString(),q),"single")+" "+he.getFullYear()}return C}(o,this.localeObj,this.locale,this.calendarMode)}getRecurrenceDates(o,l,d,y,C){return C=(0,E.le)(C)?this.startDate:C,Zu(o,l,d,this.firstDayOfWeek,y,C,this.calendarMode)}getRecurrenceRule(){let o="FREQ=";switch(this.repeatType.value){case ud:o+="DAILY;";break;case Hc:o+="WEEKLY;"+this.getSelectedDaysData();break;case pd:o+=fp+Or+this.getSelectedMonthData();break;case fd:o+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case _c:return""}switch(o+=this.getIntervalData(),this.endType.value){case Da:o+=this.getUntilData();break;case oc:o+=this.getEndOnCount()}return o}setRecurrenceRule(o,l=this.startDate){if(!o)return void this.repeatType.setProperties({value:_c});this.renderStatus=!1,this.ruleObject=_l(o);const d=this.ruleObject.count?oc:this.ruleObject.until?Da:Kl;switch(this.ruleObject.freq){case"DAILY":this.startState(ud,d,l),this.updateUI(ud,d);break;case"WEEKLY":this.startState(Hc,d,l),this.updateUI(Hc,d);break;case fp:this.startState(pd,d,l),this.updateUI(pd,d);break;case"YEARLY":this.startState(fd,d,l),this.updateUI(fd,d)}this.renderStatus=!0,this.triggerChangeEvent()}destroy(){this.destroyComponents(),super.destroy();let o=["e-"+this.getModuleName()];for(this.cssClass&&(o=o.concat(this.cssClass.split(" "))),(0,E.IV)([this.element],o);this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)}getModuleName(){return"recurrenceeditor"}getPersistData(){return this.addOnPersist([])}render(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()}onPropertyChanged(o,l){for(const d of Object.keys(o))switch(d){case"startDate":this.selectMonthDay(o.startDate),this.updateUntilDate(o.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(o.enableRtl);break;case"cssClass":l.cssClass&&(0,E.IV)([this.element],l.cssClass.split(" ")),o.cssClass&&(0,E.cn)([this.element],o.cssClass.split(" "));break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=o.calendarMode,this.calendarUtil=Vd(o.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:o.dateFormat})}}};Pl([(0,E.Z9)(["none","daily","weekly","monthly","yearly"])],go.prototype,"frequencies",void 0),Pl([(0,E.Z9)(0)],go.prototype,"firstDayOfWeek",void 0),Pl([(0,E.Z9)(new Date)],go.prototype,"startDate",void 0),Pl([(0,E.Z9)()],go.prototype,"dateFormat",void 0),Pl([(0,E.Z9)("Gregorian")],go.prototype,"calendarMode",void 0),Pl([(0,E.Z9)()],go.prototype,"cssClass",void 0),Pl([(0,E.Z9)()],go.prototype,"value",void 0),Pl([(0,E.Z9)(new Date(1900,0,1))],go.prototype,"minDate",void 0),Pl([(0,E.Z9)(new Date(2099,11,31))],go.prototype,"maxDate",void 0),Pl([(0,E.Z9)(0)],go.prototype,"selectedType",void 0),Pl([(0,E.ju)()],go.prototype,"change",void 0),go=Pl([E.Zl],go);const xn="e-field",vs="e-recurrence-container",Ga="e-hide";class bd{constructor(o){this.parent=o,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.renderEventWindow()}renderEventWindow(){this.element=(0,E.az)("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);const o={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:Ao,enableRtl:this.parent.enableRtl,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(o.cssClass=Ao+" "+mn,o.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>'):(o.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:nl,disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary "+Me,isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:pe,content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}],o.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>"),this.dialogObject=new _e.Vq(o,this.element),this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),(0,E.cn)([this.element.parentElement],Ao+"-container"),this.parent.isAdaptive&&(E.bi.add(this.element.querySelector(".e-back-icon"),"click",this.dialogClose,this),E.bi.add(this.element.querySelector("."+U),"click",this.eventSave,this)),E.bi.add(this.dialogObject.element,"keydown",this.preventEventSave,this),this.applyFormValidation()}refresh(){this.destroy(!0),this.renderEventWindow()}refreshRecurrenceEditor(){if(this.recurrenceEditor){const o=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(o)}}setRecurrenceEditor(o){this.parent.editorTemplate&&(this.recurrenceEditor=o)}openEditor(o,l,d,y){if(this.parent.currentAction=l,this.parent.removeNewEventElement(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),this.parent.inlineModule.removeInlineAppointmentElement(),"Add"===l){let C={};this.cellClickAction=!d,this.parent.activeCellsData=o;const L=o;this.cellClickAction?this.convertToEventData(L,C):(this.parent.activeCellsData={startTime:L.startTime||L[this.fields.startTime],endTime:L.endTime||L[this.fields.endTime],isAllDay:L.isAllDay||L[this.fields.isAllDay],element:L.element,groupIndex:L.groupIndex},C=L),o=C}switch((0,E.le)(this.parent.editorTemplate)||this.renderFormElements(this.element.querySelector(".e-schedule-form"),o),!this.parent.isAdaptive&&(0,E.le)(this.parent.editorTemplate)&&(0,E.IV)([this.dialogObject.element.querySelector(".e-recurrenceeditor")],zs),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),l){case"Add":this.onCellDetailsUpdate(o,y);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":"EditOccurrence"===l&&!this.parent.isAdaptive&&(0,E.le)(this.parent.editorTemplate)&&(0,E.cn)([this.dialogObject.element.querySelector(".e-recurrenceeditor")],zs),this.cellClickAction=!1,this.onEventDetailsUpdate(o)}}setDialogContent(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind()}preventEventSave(o){this.parent&&!this.parent.allowKeyboardInteraction&&"Enter"===o.code&&(this.isEnterKey=!0)}onBeforeOpen(o){const l={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(l.duration=this.getSlotDuration());const d=this.getInstance(Me);d&&(d.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),d.dataBind());const y=this.getInstance(nl);y&&(y.disabled=!this.parent.eventSettings.allowDeleting,y.dataBind());const C=new ns.BH;return this.parent.trigger(ci,l,L=>{if(o.cancel=L.cancel,this.duration=this.cellClickAction?L.duration:null,this.refreshDateTimePicker(this.duration),this.cellClickAction&&L.duration!==this.getSlotDuration()&&(0,E.le)(this.parent.editorTemplate)){const q=this.getInstance(ta),X=this.getInstance(ca);X.value=new Date(q.value.getTime()+wr*L.duration),X.dataBind()}this.parent.editorTemplate&&this.element.querySelector(".e-recurrenceeditor")&&!this.recurrenceEditor&&(this.recurrenceEditor=this.getInstance("e-recurrenceeditor")),C.resolve(o)}),C}onBeforeClose(o){o.isInteracted&&(this.isCrudAction=!1);const l={type:"Editor",event:o.event||this.dialogEvent,data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},d=new ns.BH;return this.parent.trigger(pi,l,y=>{o.cancel=y.cancel,y.cancel||(this.isCrudAction&&(o.cancel=this.processCrudActions(y.data),this.isCrudAction=o.cancel),this.isCrudAction||(this.resetForm(),this.parent.eventBase.focusElement(!0),this.eventCrudData=null)),d.resolve(o)}),d}getEventWindowContent(){const o=(0,E.az)("div",{className:"e-form-container"}),l=(0,E.az)("form",{id:this.parent.element.id+"EditForm",className:mo,attrs:{onsubmit:"return false;"}});return this.renderFormElements(l),o.appendChild(l),o}renderFormElements(o,l){if((0,E.le)(this.parent.editorTemplate))o.appendChild(this.getDefaultEventWindowContent());else{if(l){this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents();const C=[].slice.call(o.children);for(const L of C)(0,E.Od)(L)}const d=this.parent.element.id+"_editorTemplate",y=[].slice.call(this.parent.getEditorTemplate()(l||{},this.parent,"editorTemplate",d,!1));(0,E.R3)(y,o),this.parent.renderTemplates()}}getDefaultEventWindowContent(){const o=this.createDivElement("e-dialog-parent"),l=this.createDivElement("e-title-location-row");o.appendChild(l),l.appendChild(this.renderTextBox(El)),l.querySelector("."+El).setAttribute("title",this.parent.editorTitles.subject),l.appendChild(this.renderTextBox(ka)),l.querySelector("."+ka).setAttribute("title",this.parent.editorTitles.location);const d=this.createDivElement("e-start-end-row");o.appendChild(d),d.appendChild(this.renderDateTimePicker(ta,this.onTimeChange.bind(this))),d.querySelector("."+ta).setAttribute("title",this.parent.editorTitles.startTime),d.appendChild(this.renderDateTimePicker(ca)),d.querySelector("."+ca).setAttribute("title",this.parent.editorTitles.endTime);const y=this.createDivElement("e-all-day-time-zone-row");o.appendChild(y),y.appendChild(this.renderCheckBox(Wo)),y.appendChild(this.renderCheckBox(Vo));const C=this.createDivElement(it);o.appendChild(C),C.appendChild(this.renderDropDown(Qe)),C.appendChild(this.renderDropDown(F));const L=this.createDivElement("e-repeat-parent-row");o.appendChild(L);const q=this.renderCheckBox(va),X=(0,E.az)("span",{className:vs}),he=(0,E.az)("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});if(this.buttonObj=new ls.zx({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),X.appendChild(he),this.buttonObj.appendTo(he),q.appendChild(X),L.appendChild(q),this.parent.isAdaptive?E.bi.add(he,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(o),this.parent.resourceCollection.length>0){const nt=this.createDivElement("e-resources-row");for(const It of this.parent.resourceBase.resourceCollection)nt.appendChild(this.renderResourceDetails(It));o.appendChild(nt)}const He=this.createDivElement(Xa+"-row");He.appendChild(this.renderTextBox(Xa)),He.querySelector("."+Xa).setAttribute("title",this.parent.editorTitles.description),o.appendChild(He);const Ve=(0,E.az)("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return o.appendChild(Ve),o}createRecurrenceEditor(o){const l=this.createDivElement();o.appendChild(l),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(l),this.updateMinMaxDateToEditor()}createDivElement(o){return(0,E.az)("div",{className:o})}createInputElement(o,l,d){return(0,E.az)(d||"input",{className:o,attrs:{type:"text",name:l,value:"",id:l,title:""===this.l10n.getConstant(l.charAt(0).toLowerCase()+l.slice(1))?l:this.l10n.getConstant(l.charAt(0).toLowerCase()+l.slice(1))}})}getSlotDuration(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount}renderDateTimePicker(o,l){const d=this.createDivElement(o+"-container"),y=this.getFieldName(o),C=this.createInputElement(o+" "+xn,y);return d.appendChild(C),new Ti.xZ({change:l,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",timeFormat:this.parent.activeViewOptions.timeFormat,format:((0,E.le)(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.parent.activeViewOptions.timeFormat,placeholder:this.getFieldLabel(o),step:this.getSlotDuration(),width:"100%"}).appendTo(C),d}refreshDateTimePicker(o){const d=[].slice.call(this.element.querySelectorAll(".e-start,.e-end"));for(const y of d){const C=y.ej2_instances[0];C.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek,C.timeFormat=this.parent.activeViewOptions.timeFormat,C.step=o||this.getSlotDuration(),C.dataBind()}}onTimeChange(){const o=this.getInstance(ta);if(o.element.parentElement.classList.contains("e-input-focus")){const l=this.getInstance(ca);let d=0;this.cellClickAction?(d=wr*this.duration,this.eventWindowTime.startTime=o.value):d=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();const y=(0,E.le)(o.value)?null:new Date(o.value.getTime()+d);this.cellClickAction&&(this.eventWindowTime.endTime=y),l.value=y,l.dataBind()}this.recurrenceEditor&&this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime)}renderResourceDetails(o){const l=o.field,d="e-"+l,y=o.title,C=this.createDivElement(d+"-container e-resources"),L=this.createInputElement(d+" "+xn,l);C.appendChild(L);const q='<div class="e-resource-template"><div class="e-resource-color" style="background-color:${'+o.colorField+'}"></div><div class="e-resource-text">${'+o.textField+"}</div></div>";return o.allowMultiple?new Ds.NU({cssClass:this.parent.cssClass||"",dataSource:o.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:q,fields:{text:o.textField,value:o.idField},htmlAttributes:{title:y,name:l},floatLabelType:"Always",placeholder:y,popupHeight:"230px",popupWidth:"447px",mode:"Box"}).appendTo(L):new Ds.NB({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:o.dataSource,enableRtl:this.parent.enableRtl,fields:{text:o.textField,value:o.idField},htmlAttributes:{title:y,name:l},floatLabelType:"Always",placeholder:y,popupHeight:"230px",popupWidth:"447px",itemTemplate:q}).appendTo(L),C}renderDropDown(o){const l=this.getFieldName(o),d=this.createDivElement(o+"-container"),y=this.createInputElement(o+" "+xn,l);return d.appendChild(y),new Ds.NB({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:this.parent.timezoneDataSource,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:this.parent.localeObj.getConstant("searchTimezone"),noRecordsTemplate:this.parent.localeObj.getConstant("noRecords"),filtering:L=>{let q=new ns.AE;q=""!==L.text?q.where("Text","contains",L.text,!0):q,L.updateData(this.parent.timezoneDataSource,q)},htmlAttributes:{title:this.getFieldLabel(o),name:l},floatLabelType:"Always",placeholder:this.getFieldLabel(o),popupHeight:"230px"}).appendTo(y),d}onMultiselectResourceChange(o){if(!o.value||!this.parent.activeViewOptions.group.byGroupID||this.parent.resourceCollection.length<=1)return;const l=this.parent.resourceBase.resourceCollection,d=o.element.getAttribute("name")||this.getColumnName(o.element);for(let y=0;y<l.length;y++)if(l[y].field===d&&y<l.length-1){const C=this.createInstance(y);let L=[];for(let q=0;q<o.value.length;q++){const X=l[y+1],He=X.dataSource.filter(nt=>nt[X.groupIDField]===o.value[q])[0][l[y+1].groupIDField],Ve=this.filterDatasource(y,He);L=L.concat(Ve)}C.dataSource=L,C.dataBind()}}createInstance(o){return this.element.querySelector(".e-"+this.parent.resourceBase.resourceCollection[o+1].field).ej2_instances[0]}onDropdownResourceChange(o){if(!o.value||this.parent.resourceCollection.length<=1||!this.parent.activeViewOptions.group.byGroupID)return;const l=o.element.getAttribute("name")||this.getColumnName(o.element),d=this.parent.resourceBase.resourceCollection;for(let y=0;y<d.length;y++)if(y<d.length-1&&d[y].field===l){const C=this.createInstance(y);C.dataSource=this.filterDatasource(y,o.itemData[d[y].idField]),C.dataBind();const q=C.dataSource[0][d[y+1].idField];C.value=d[y+1].allowMultiple?[q]:q,C.dataBind()}}filterDatasource(o,l){const d=this.parent.resourceBase.resourceCollection[o+1];return d.dataSource.filter(y=>y[d.groupIDField]===l)}onTimezoneChange(o){if((o.element.getAttribute("name")||this.getColumnName(o.element))===this.parent.eventFields.startTimezone){const d=this.getInstance(Qe),y=this.getInstance(F);y.value=d.value,y.dataBind()}}renderCheckBox(o){const l=this.createDivElement(o+"-container"),d=this.getFieldName(o),y=this.createInputElement(o+" "+xn,d);l.appendChild(y);const C=new ls.Jg({change:this.onChange.bind(this),cssClass:o+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,label:this.getFieldLabel(o)});return C.appendTo(y),y.setAttribute("name",d),"Repeat"===d&&(this.repeatStatus=C),l}renderTextBox(o){const l=this.createDivElement(o+"-container"),d=this.getFieldName(o),C=this.createInputElement(o+" "+xn,d,o===Xa?"textarea":"input");return l.appendChild(C),ws.II.createInput({element:C,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(o)}}),l}getFieldName(o){let l="";switch(o){case El:l=this.fields.subject;break;case ka:l=this.fields.location;break;case ta:l=this.fields.startTime;break;case ca:l=this.fields.endTime;break;case Xa:l=this.fields.description;break;case Wo:l=this.fields.isAllDay;break;case Qe:l=this.fields.startTimezone;break;case F:l=this.fields.endTimezone;break;case Vo:l="Timezone";break;case va:l="Repeat"}return l}getFieldLabel(o){let l="";switch(o){case El:l=this.parent.editorTitles.subject;break;case ka:l=this.parent.editorTitles.location;break;case Xa:l=this.parent.editorTitles.description;break;case ta:l=this.parent.editorTitles.startTime;break;case ca:l=this.parent.editorTitles.endTime;break;case Qe:l=this.parent.editorTitles.startTimezone;break;case F:l=this.parent.editorTitles.endTimezone;break;case va:l=this.parent.editorTitles.recurrenceRule;break;case Wo:l=this.parent.editorTitles.isAllDay;break;case Vo:l=this.l10n.getConstant("timezone")}return l}onChange(o){const l=o.event.currentTarget.querySelector("input");l.classList.contains(Wo)?this.onAllDayChange(o.checked):l.classList.contains(Vo)?this.timezoneChangeStyle(o.checked):l.classList.contains(va)&&this.onRepeatChange(o.checked)}renderRepeatDialog(){const o=(0,E.az)("div");this.repeatDialogObject=new _e.Vq({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(o),this.repeatDialogObject.appendTo(o),this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))}loadRecurrenceEditor(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)}onRepeatChange(o){if(o)this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor();else{this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule));const l=this.element.querySelector("."+vs);(0,E.cn)([l],Ga)}}repeatSaveDialog(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();const o=this.element.querySelector("."+vs);this.recurrenceEditor.getRecurrenceRule()?(0,E.IV)([o],Ga):((0,E.cn)([o],Ga),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()}closeRepeatDialog(){this.repeatDialogObject.hide()}repeatCancelDialog(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})}repeatOpenDialog(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()}onCellDetailsUpdate(o,l){if(!this.parent.eventSettings.allowAdding)return;this.element.querySelector("."+mo).removeAttribute("data-id"),this.element.querySelector("."+ei).innerHTML=this.l10n.getConstant("newEvent"),o.Timezone=!1,this.repeatStartDate=o[this.fields.startTime],this.repeatRule="",(0,E.le)(this.parent.eventSettings.fields.subject.default)||(o[this.fields.subject]=this.parent.eventSettings.fields.subject.default),(0,E.le)(this.parent.eventSettings.fields.location.default)||(o[this.fields.location]=this.parent.eventSettings.fields.location.default),(0,E.le)(this.parent.eventSettings.fields.description.default)||(o[this.fields.description]=this.parent.eventSettings.fields.description.default),this.showDetails(o),o[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(o[this.fields.recurrenceRule],o[this.fields.startTime]),this.repeatRule=o[this.fields.recurrenceRule]);const d=this.element.querySelector("."+nl);if(d&&(0,E.cn)([d],zs),this.recurrenceEditor&&this.recurrenceEditor.setProperties({startDate:o[this.fields.startTime],selectedType:(0,E.le)(l)?(0,E.le)(o[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:l}),this.parent.isAdaptive&&(0,E.le)(this.parent.editorTemplate)){const y=this.element.querySelector("."+vs);(0,E.cn)([y],Ga),this.updateRepeatLabel(this.repeatRule)}else{const y=this.element.querySelector("."+Me);this.disableButton(y,!1)}this.dialogObject.show()}convertToEventData(o,l){o.subject&&(l[this.fields.subject]=o.subject),l[this.fields.startTime]=o.startTime,l[this.fields.endTime]=o.endTime,l[this.fields.isAllDay]=o.isAllDay,o.RecurrenceRule&&(l[this.fields.recurrenceRule]=o.RecurrenceRule),(this.parent.resourceCollection.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(l)}applyFormValidation(){const o=y=>y&&Object.keys(y).length>0?y:void 0,l=this.element.querySelector("."+mo),d={};d[this.parent.eventSettings.fields.subject.name]=o(this.parent.eventSettings.fields.subject.validation),d[this.parent.eventSettings.fields.location.name]=o(this.parent.eventSettings.fields.location.validation),d[this.parent.eventSettings.fields.startTime.name]=o(this.parent.eventSettings.fields.startTime.validation),d[this.parent.eventSettings.fields.endTime.name]=o(this.parent.eventSettings.fields.endTime.validation),d[this.parent.eventSettings.fields.description.name]=o(this.parent.eventSettings.fields.description.validation),this.fieldValidator=new lp,this.fieldValidator.renderFormValidator(l,d,this.element,this.parent.locale)}showDetails(o){const l=(0,E.l7)({},o,null,!0);0===l[this.fields.endTime].getHours()&&0===l[this.fields.endTime].getMinutes()&&this.trimAllDay(l),this.eventData=l;const d=this.getFormElements(Ao),y=Object.keys(l);for(const C of d){const L=C.name||this.getColumnName(C);!(0,E.le)(L)&&""!==L&&(-1!==y.indexOf(L)?this.setValueToElement(C,l[L]):this.setDefaultValueToElement(C))}if((0,E.le)(this.parent.editorTemplate)){this.onAllDayChange(l[this.fields.isAllDay]);const C=this.getInstance(Vo+"."+xn);(0,E.le)(l[this.fields.startTimezone])&&(0,E.le)(l[this.fields.endTimezone])||(C.checked=!0,C.dataBind()),this.timezoneChangeStyle(C.checked),delete l.Timezone}}getColumnName(o){let l=o.getAttribute("data-name")||"";if(""===l){let d=!1,y="";o.classList.contains("e-dropdownlist")?(y="e-ddl",d=!0):o.classList.contains("e-multiselect")?(y="e-multiselect",d=!0):o.classList.contains("e-datetimepicker")?y="e-datetimepicker":o.classList.contains("e-datepicker")?y="e-datepicker":o.classList.contains("e-checkbox")&&(y="e-checkbox");const L=(0,E.oq)(o,d?`.${y}:not(.e-control)`:`.${y}`)||o.querySelector(`.${y}`);if(L){const q=L.querySelector("[name]");q&&(l=q.name)}}return l}onAllDayChange(o){const l=this.getInstance(ta),d=this.getInstance(ca),y=this.element.querySelector(".e-time-zone-container");let C;o?(C=(0,E.le)(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,(0,E.cn)(this.element.querySelectorAll(".e-time-icon"),yi),(0,E.cn)([y],zs),this.element.querySelector("."+it)&&(0,E.IV)([this.element.querySelector("."+it)],Qr),l.format=d.format=C):(C=(0,E.le)(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.parent.activeViewOptions.timeFormat:this.parent.dateFormat+" "+this.parent.activeViewOptions.timeFormat,(0,E.IV)(this.element.querySelectorAll(".e-time-icon"),yi),(0,E.IV)([y],zs),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&(0,E.cn)([this.element.querySelector("."+it)],Qr),l.format=d.format=C),this.cellClickAction&&this.updateDateTime(o,l,d),l.dataBind(),d.dataBind(),(0,E.le)(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(l.value)}updateDateTime(o,l,d){let y,C;if(o)if(y=Bi(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){const L=os(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();C=+this.eventWindowTime.startTime>L?this.eventWindowTime.endTime:new Date(L)}else C=Bi(new Date(this.eventWindowTime.endTime.getTime()));else{const L=this.parent.activeCellsData.startTime;if(y=new Date(this.eventWindowTime.startTime.getTime()),y.setHours(L.getHours(),L.getMinutes(),L.getSeconds()),this.parent.activeCellsData.isAllDay){const q=this.parent.getStartEndTime(this.parent.workHours.start);y.setHours(q.getHours(),q.getMinutes(),q.getSeconds()),C=new Date(y.getTime()),C.setMilliseconds(wr*this.getSlotDuration())}else C=new Date(y.getTime()),C.setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(y.getTime()),endTime:new Date(C.getTime())},l.value=y,d.value=C,l.dataBind(),d.dataBind()}getFormat(o){let l;return l="en"===this.parent.locale||"en-US"===this.parent.locale?(0,E.NA)(o+".short",(0,E.bD)(this.parent.getCalendarMode())):(0,E.NA)(`main.${this.parent.locale}.dates.calendars.${this.parent.getCalendarMode()}.${o}.short`,E.qV),l}onEventDetailsUpdate(o){if(!this.parent.eventSettings.allowEditing)return;if(this.parent.isAdaptive||(0,E.IV)([this.element.querySelector("."+nl)],zs),this.element.querySelector("."+ei).innerHTML=this.l10n.getConstant("editEvent"),this.element.querySelector("."+mo).setAttribute("data-id",o[this.fields.id].toString()),(0,E.le)(this.parent.editorTemplate)){o=(0,E.l7)({},o,null,!0);const d=this.getInstance(Vo+"."+xn);let y;o[this.fields.startTimezone]||o[this.fields.endTimezone]?(y=!0,this.parent.eventBase.timezoneConvert(o)):y=!1,o.Timezone=y,d.checked=y,d.dataBind()}if(this.showDetails(o),o[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(o[this.fields.recurrenceRule],o[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:o[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=o[this.fields.startTime],this.repeatRule="",o[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(o[this.fields.recurrenceRule],o[this.fields.startTime]),this.repeatRule=o[this.fields.recurrenceRule]),this.parent.isAdaptive&&(0,E.le)(this.parent.editorTemplate)){const d=this.element.querySelector("."+vs);o[this.fields.recurrenceRule]?((0,E.IV)([d],Ga),this.repeatStatus.setProperties({checked:!0})):((0,E.cn)([d],Ga),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}const l=this.parent.readonly||o[this.fields.isReadonly];if(this.parent.isAdaptive){const d=this.element.querySelector("."+U);d&&(l?(0,E.cn)([d],sd):(0,E.IV)([d],sd))}else{const d=this.element.querySelector("."+Me),y=this.element.querySelector("."+nl);this.disableButton(d,l),this.disableButton(y,l)}this.dialogObject.show()}disableButton(o,l){o&&(o.ej2_instances[0].disabled=l)}renderRecurrenceEditor(){return new go({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})}updateMinMaxDateToEditor(){const o=this.element.querySelector(".e-start"),l=this.element.querySelector(".e-end");if(o&&l){const d=o.ej2_instances[0],y=l.ej2_instances[0];d.min=this.parent.minDate,d.max=this.parent.maxDate,y.min=this.parent.minDate,y.max=this.parent.maxDate,d.dataBind(),y.dataBind()}if(this.recurrenceEditor){const d=this.recurrenceEditor.element.querySelector(".e-until-date");if(d){const y=d.ej2_instances[0];y.min=this.parent.minDate,y.max=this.parent.maxDate,y.dataBind()}}}updateRepeatLabel(o){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();const l=o?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(o):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:l})}dialogClose(o){this.isEnterKey?this.isEnterKey=!1:(this.dialogEvent=o,this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide())}resetForm(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),!this.parent.isAdaptive&&this.recurrenceEditor&&!this.recurrenceEditor.isDestroyed&&this.recurrenceEditor.resetFields()}timezoneChangeStyle(o){const l=this.element.querySelector("."+it),d=this.parent.tzModule.getLocalTimezoneName();if(o){(0,E.cn)([l],Qr);const y=this.getInstance(Qe),C=this.getInstance(F),L=y.dataSource;(!y.value||!this.parent.timezone)&&(L.some(X=>X.Value===d)||(L.push({Value:d,Text:d}),y.dataSource=L,C.dataSource=L,y.dataBind(),C.dataBind())),y.value=y.value||this.parent.timezone||d,C.value=C.value||this.parent.timezone||d,y.dataBind(),C.dataBind()}else(0,E.IV)([l],Qr)}resetFormFields(){const o=this.getFormElements(Ao);for(const l of o){const d=l.name||this.getColumnName(l);!(0,E.le)(d)&&""!==d&&this.setDefaultValueToElement(l)}}eventSave(o,l){if(this.isEnterKey)return void(this.isEnterKey=!1);const d=this.element.querySelector("."+mo);if(d&&d.classList.contains("e-formvalidator")&&!d.ej2_instances[0].validate())return;const y=this.getEventDataFromEditor();this.processEventValidation(y.tempData,l)||(this.eventCrudData=y.eventData,this.dialogEvent=o,this.isCrudAction=!0,this.dialogObject.hide())}getEventDataFromEditor(){const o=(0,E.l7)({},this.getObjectFromFormData(Ao));o.Timezone||(o[this.fields.startTimezone]=null,o[this.fields.endTimezone]=null),delete o.Timezone,delete o.Repeat,this.setDefaultValueToObject(o),o[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;const l=(0,E.l7)({},o,null,!0);return o[this.fields.isAllDay]&&(o[this.fields.startTime]=(0,E.le)(o[this.fields.startTime])?null:Bi(new Date(o[this.fields.startTime].getTime())),o[this.fields.endTime]=(0,E.le)(o[this.fields.endTime])?null:os(Bi(new Date(o[this.fields.endTime].getTime())),1)),{eventData:o,tempData:l}}processEventValidation(o,l){let d;if((0,E.le)(this.parent.editorTemplate)){if(!o[this.fields.startTime]||!o[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(o[this.fields.startTime]>o[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value){d=this.recurrenceValidation(o[this.fields.startTime],o[this.fields.endTime],l);let y=!0;if("seriesChangeAlert"===d&&this.parent.uiStateValues.isIgnoreOccurrence&&(y=!1),!(0,E.le)(d)&&y&&(!this.parent.enableRecurrenceValidation&&"wrongPattern"===d||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(d),!0}return!1}processCrudActions(o){this.parent.uiStateValues.isBlock=!1;const l=this.getResourceData(o),d=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!(0,E.le)(l),y=this.getEventIdFromForm();if((0,E.le)(y))this.parent.currentAction="Add",d?this.resourceSaveEvent(o,this.parent.currentAction):(o[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(o));else{let q,C="string"===this.parent.eventBase.getEventIDType()?y:parseInt(y,10),L=this.parent.eventsData.filter(X=>X[this.fields.id]===C)[0];if((0,E.le)(L)&&(L=this.parent.blockData.filter(X=>X[this.fields.id]===C)[0]),(o=(0,E.l7)({},L,o))[this.fields.isReadonly])return!1;if(!(0,E.le)(L[this.fields.recurrenceRule])){if(q=this.parent.currentAction,o.Guid=this.parent.activeEventData.event.Guid,"EditOccurrence"===this.parent.currentAction&&(o[this.fields.recurrenceID]?(C=o[this.fields.recurrenceID],q=null):(o[this.fields.id]=this.parent.eventBase.getEventMaxID(),o.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(C,o)))return!0;"EditSeries"===this.parent.currentAction||o[this.fields.id]!==L[this.fields.id]?o[this.fields.recurrenceID]=L[this.fields.id]:"EditFollowingEvents"===this.parent.currentAction&&(o[this.fields.id]=this.parent.eventBase.getEventMaxID(),o[this.fields.followingID]=L[this.fields.id])}d?this.resourceSaveEvent(o,"Save",q):this.parent.saveEvent(o,q)}return this.parent.uiStateValues.isBlock}getResourceData(o){let l=null;return!(0,E.le)(this.parent.resourceBase)&&!(0,E.le)(this.parent.resourceBase.resourceCollection)&&this.parent.resourceBase.resourceCollection.length>0&&(l=o[this.parent.resourceBase.resourceCollection.slice(-1)[0].field]),l}getObjectFromFormData(o){const l=this.getFormElements(o),d={};for(const y of l){const C=y.name||this.getColumnName(y);!(0,E.le)(C)&&""!==C&&(d[C]=this.getValueFromElement(y))}return d}setDefaultValueToObject(o){(0,E.le)(o[this.fields.subject])||(o[this.fields.subject]=o[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.l10n.getConstant("addTitle")),(0,E.le)(o[this.fields.location])||(o[this.fields.location]=o[this.fields.location]||this.parent.eventSettings.fields.location.default),(0,E.le)(o[this.fields.description])||(o[this.fields.description]=o[this.fields.description]||this.parent.eventSettings.fields.description.default)}recurrenceValidation(o,l,d){let y;const C=this.recurrenceEditor,L=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(d!==this.l10n.getConstant("ok")){const q=this.parent.activeEventData.event;let X=[];if(("EditSeries"===this.parent.currentAction||"EditFollowingEvents"===this.parent.currentAction)&&!(0,E.le)(q)){const he=q[this.parent.eventFields.startTime],He=this.parent.eventBase.getSeriesEvents(this.eventData,he);if(He.length>0)X=this.parent.eventBase.getEditedOccurrences(He,he);else{const Ve=this.parent.eventBase.getEventById(q[this.parent.eventFields.id]);X=this.parent.eventBase.getEditedOccurrences([Ve],he)}"EditSeries"===this.parent.currentAction&&!(0,E.le)(this.eventData[this.parent.eventFields.recurrenceException])&&X.push(this.eventData)}if(X.length>0&&(y="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<o&&(y="wrongPattern"),(0,E.le)(y)){let he=C.value.split(";")[1].split("=")[1].split(",");const He={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},Ve=[],nt=[];let It;switch(C.value.split(";")[0].split("=")[1]){case"DAILY":(l.getTime()-o.getTime())/36e5>24*L&&(y="createError");break;case"WEEKLY":he=C.value.split(";")[1].split("=")[1].split(",");for(let vt=0;vt<he.length*(L+1);vt++)Ve[vt]=he.length>vt?He[he[vt]]:Ve[vt-he.length]+7*L;It=Ve.sort((vt,mi)=>vt-mi);for(let vt=1;vt<It.length;vt++)nt.push(It[vt]-It[vt-1]);((l.getTime()-o.getTime())/36e5>=24*Math.min(...nt)||(0,E.le)(L))&&(y="createError");break;case"MONTHLY":l.getTime()>=new Date(+o).setMonth(o.getMonth()+L)&&(y="createError");break;case"YEARLY":l.getTime()>=new Date(+o).setFullYear(o.getFullYear()+L)&&(y="createError")}}}else l.getTime()>=new Date(+o).setMonth(o.getMonth()+L)&&(y="createError"),(0,E.le)(y)&&this.parent.quickPopup.quickDialog.hide();return(0,E.le)(L)&&(y="createError"),y}getRecurrenceIndex(o,l){let d;for(let y=0;y<o.length;y++)if(l[this.fields.startTime].valueOf()===o[y][this.fields.startTime].valueOf()){d=y;break}return d}trimAllDay(o){if(o[this.fields.isAllDay]){const l=os(new Date(+o[this.fields.endTime]),-1).getTime();o[this.fields.endTime]=+o[this.fields.startTime]>l?o[this.fields.endTime]:new Date(l)}}editOccurrenceValidation(o,l,d){void 0===d&&(d=this.eventData);const y=this.parent.getOccurrencesByID(o);this.parent.eventsData.filter(q=>q[this.fields.recurrenceID]===o).map(q=>y.push((0,E.l7)({},q))),l=(0,E.l7)({},l),this.trimAllDay(l);for(const q of y)this.trimAllDay(q);this.parent.eventBase.sortByTime(y);const L=this.getRecurrenceIndex(y,d);if((0,E.le)(L))return!1;if(0===L){if(!(0,E.le)(y[L+1])){if(!(Bi(new Date(+y[L+1][this.fields.startTime])).getTime()>Bi(new Date(+l[this.fields.endTime])).getTime())&&Bi(new Date(+y[y.length-1][this.fields.endTime])).getTime()>=Bi(new Date(+l[this.fields.startTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(Bi(new Date(+y[y.length-1][this.fields.endTime])).getTime()<Bi(new Date(+l[this.fields.startTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}return!1}if(L===y.length-1){if(!(Bi(new Date(+y[L-1][this.fields.endTime])).getTime()<Bi(new Date(+l[this.fields.startTime])).getTime())&&Bi(new Date(+y[y.length-1-L][this.fields.startTime])).getTime()<=Bi(new Date(+l[this.fields.endTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(Bi(new Date(+y[y.length-1-L][this.fields.endTime])).getTime()>Bi(new Date(+l[this.fields.startTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}else{if(!(Bi(new Date(+y[L-1][this.fields.endTime])).getTime()<Bi(new Date(+l[this.fields.startTime])).getTime()||Bi(new Date(+y[0][this.fields.startTime])).getTime()>Bi(new Date(+l[this.fields.startTime])).getTime())||!(Bi(new Date(+y[L+1][this.fields.startTime])).getTime()>Bi(new Date(+l[this.fields.endTime])).getTime()||Bi(new Date(+y[y.length-1][this.fields.endTime])).getTime()<Bi(new Date(+l[this.fields.startTime])).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(Bi(new Date(+y[L+1][this.fields.endTime])).getTime()<Bi(new Date(+l[this.fields.startTime])).getTime()||Bi(new Date(+y[L-1][this.fields.startTime])).getTime()>Bi(new Date(+l[this.fields.endTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}return!1}resourceSaveEvent(o,l,d){const y=this.parent.resourceBase.resourceCollection.slice(-1)[0];let C=o[y.field];C=C instanceof Array?C:[C];const L=this.parent.resourceBase.lastResourceLevel,q=[];for(let X=0;X<C.length;X++){const he=(0,E.l7)({},o,null,!0);he[this.fields.id]=this.parent.eventBase.getEventMaxID();const He=[],Ve=()=>{if("Save"===l&&X===C.length-1)if(He.length>0){He[0][this.fields.id]=o[this.fields.id];for(let nt=1;nt<He.length;nt++)He[nt][this.fields.id]=this.parent.eventBase.getEventMaxID(X),q.push(He[nt]),this.parent.saveEvent(He[0],d)}else he[this.fields.id]=o[this.fields.id],this.parent.saveEvent(he,d);else if(He.length>0)for(let nt=0;nt<He.length;nt++)He[nt][this.fields.id]=this.parent.eventBase.getEventMaxID(nt),q.push(He[nt]);else he[this.fields.id]=this.parent.eventBase.getEventMaxID(X),q.push(he)};if(this.parent.activeViewOptions.group.byGroupID&&!(0,E.le)(L)){const nt=y.dataSource,It=this.parent.resourceCollection;let vt;if(vt=It.length>1?Ro(nt,y.idField,C[X],he,It):Ro(nt,y.idField,C[X]),vt<0)return;const mi=nt[vt][y.groupIDField],Ki=L.filter(Ts=>Ts.resourceData[y.idField]===C[X]).filter(Ts=>Ts.resourceData[y.groupIDField]===mi)[0].groupOrder;for(let Ts=0;Ts<this.parent.resourceBase.resourceCollection.length;Ts++)he[this.parent.resourceBase.resourceCollection[Ts].field]=Ki[Ts]instanceof Array?Ki[Ts][0]:Ki[Ts];Ve()}else{for(let nt=0;nt<this.parent.resourceBase.resourceCollection.length-1;nt++){const It=this.parent.resourceBase.resourceCollection[nt].field;if(he[It]instanceof Array&&he[It].length>1)for(let vt=0;vt<he[It].length;vt++){const mi=(0,E.l7)({},he,null,!0);mi[It]=o[It][vt],mi[y.field]=C[X],He.push(mi)}else if(0===He.length)he[It]=o[It]instanceof Array?o[It][0]:o[It],he[y.field]=C[X];else for(let vt=0;vt<He.length;vt++)He[vt][It]=o[It]instanceof Array?o[It][0]:o[It]}he[y.field]=C[X],Ve()}}if(q.length>0){for(const X of q)X[this.fields.recurrenceException]=null,X[this.fields.recurrenceID]=null;this.parent.addEvent(q)}}getEventIdFromForm(){return this.element.querySelector("."+mo).getAttribute("data-id")}getFormElements(o){let l=[];return l=[].slice.call(o===Ao?this.element.querySelectorAll("."+xn):this.parent.element.querySelectorAll("."+o+" ."+xn)),l}getValueFromElement(o){let l;return l=o.classList.contains("e-datepicker")||o.classList.contains("e-datetimepicker")||o.classList.contains("e-dropdownlist")||o.classList.contains("e-multiselect")?o.ej2_instances[0].value:o.classList.contains("e-checkbox")?o.ej2_instances[0].checked:"checkbox"===o.type?o.checked:E.pJ.sanitize(o.value),l}setValueToElement(o,l){if(o.classList.contains("e-datepicker")){const d=o.ej2_instances[0];d.value=l,d.dataBind()}else if(o.classList.contains("e-datetimepicker")){const d=o.ej2_instances[0];d.element.classList.contains(ta)?this.eventWindowTime.startTime=new Date(""+l):this.eventWindowTime.endTime=new Date(""+l),d.value=l,d.dataBind()}else if(o.classList.contains("e-dropdownlist")){const d=o.ej2_instances[0];d.value=l,d.dataBind()}else if(o.classList.contains("e-multiselect")){const d=o.ej2_instances[0];d.value=[],d.value=l instanceof Array?l:[l],d.dataBind()}else if(o.classList.contains("e-checkbox")){const d=o.ej2_instances[0];d.checked=l,d.dataBind()}else"checkbox"!==o.type?o.value=l||"":o.checked=l}setDefaultValueToElement(o){if(o.classList.contains("e-datepicker")){const l=o.ej2_instances[0];l.value=this.parent.getCurrentTime(),l.dataBind()}else if(o.classList.contains("e-datetimepicker")){const l=o.ej2_instances[0],d=this.parent.getCurrentTime();this.eventWindowTime={startTime:d,endTime:d},l.value=d,l.dataBind()}else if(o.classList.contains("e-dropdownlist")){const l=o.ej2_instances[0];l.value=null,l.dataBind()}else if(o.classList.contains("e-multiselect")){const l=o.ej2_instances[0];l.value=[],l.dataBind()}else if(o.classList.contains("e-checkbox")){const l=o.ej2_instances[0];l.checked=!1,l.dataBind()}else"checkbox"===o.type?o.checked=!1:o.value=""}getInstance(o){const l=this.element.querySelector("."+o);return l?l.ej2_instances[0]:null}eventDelete(o){if(this.isEnterKey)this.isEnterKey=!1;else{switch(this.parent.currentAction){case"EditOccurrence":this.parent.currentAction=(0,E.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"Delete":"DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete";break;case"EditFollowingEvents":(0,E.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])||(this.parent.currentAction="DeleteFollowingEvents")}this.dialogEvent=o,this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()}}getRecurrenceEditorInstance(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor}destroyComponents(){const o=this.getFormElements(Ao);for(const l of o){let d;(l.classList.contains("e-datetimepicker")||l.classList.contains("e-datepicker")||l.classList.contains("e-checkbox")||l.classList.contains("e-dropdownlist")||l.classList.contains("e-multiselect"))&&(d=l.ej2_instances),d&&d[0]&&d[0].destroy()}this.buttonObj&&this.buttonObj.destroy()}destroy(o){this.parent&&!this.parent.isDestroyed&&this.parent.resetTemplates(["editorTemplate"]),this.destroyComponents(),this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),this.repeatDialogObject=null),this.dialogObject&&(this.dialogObject.element&&E.bi.remove(this.dialogObject.element,"keydown",this.preventEventSave),this.dialogObject.destroy(),this.dialogObject=null),this.element&&((0,E.Od)(this.element),this.element=null),o||(this.l10n=null,this.parent=null,this.fields=null,this.buttonObj=null,this.repeatStatus=null,this.eventWindowTime=null)}}class cc{constructor(o){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.isScrollHeightNull=!0,this.parent=o,this.addEventListener()}addEventListener(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.on(cn,this.virtualScrolling,this)}removeEventListener(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.off(cn,this.virtualScrolling)}getRenderedCount(){return this.setItemSize(),Math.ceil(this.parent.element.clientHeight/this.itemSize)+this.bufferCount}setTranslateValue(){const o=this.parent.element.querySelector("."+Yi),l=this.parent.element.querySelector("."+ee),d=this.parent.element.querySelector("."+Ee),y=this.parent.element.querySelector("."+_s);this.renderVirtualTrackHeight(l,o),this.setTranslate(o,l,d,y)}renderVirtualTrackHeight(o,l){if(this.parent.resourceBase.setExpandedResources(),this.isScrollHeightNull){const d=(0,E.az)("div",{className:te}),y=[].slice.call(l.querySelectorAll("table td")),C=parseInt(y[0].getAttribute("data-group-index"),10),L=parseInt(y[y.length-1].getAttribute("data-group-index"),10);this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources.filter(X=>X.groupIndex>=C&&X.groupIndex<=L),this.setItemSize(),d.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",this.isScrollHeightNull=!1;const q=this.parent.element.querySelector("."+te);(0,E.le)(q)||(0,E.Od)(q),o.appendChild(d)}}renderVirtualTrack(o){const l=(0,E.az)("div",{className:te});l.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",o.appendChild(l)}updateVirtualScrollHeight(){const o=this.parent.element.querySelector("."+te);if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex!==this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex){const y=this.parent.element.querySelector("."+ks);this.renderedLength=y.querySelector("tbody").children.length,o.style.height=y.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*y.offsetHeight/this.renderedLength+"px"}else o.style.height="";this.averageRowHeight=o.offsetHeight/this.parent.resourceBase.expandedResources.length}updateVirtualTrackHeight(o){const l=this.parent.resourceBase.renderedResources.length;if(l!==this.getRenderedCount()){o.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";const d=this.parent.element.querySelector("."+Yi),y=this.parent.element.querySelector("."+ee),C=this.parent.element.querySelector("."+Ee);this.translateY=0,this.setTranslate(d,y,C)}else{let C=l+(this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex-this.parent.resourceBase.renderedResources[l-1].groupIndex);C=C>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:C,o.style.height=C*this.itemSize+"px"}}setItemSize(){this.itemSize=ro(this.parent.activeView.element,xi)||this.itemSize}renderEvents(){this.setTabIndex(),this.parent.refreshEvents(!1),this.parent.notify(rs,{}),this.parent.hideSpinner()}virtualScrolling(){this.parent.quickPopup&&(this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide());const o=this.parent.element.querySelector("."+Yi),l=this.parent.element.querySelector("."+ee),d=this.parent.element.querySelector("."+Ee),y=this.parent.element.querySelector("."+_s),C=this.parent.element.querySelector("."+ks);this.renderedLength=o.querySelector("tbody").children.length;const L=parseInt(o.querySelector("tbody td").getAttribute("data-group-index"),10),q=this.parent.rowAutoHeight?C.offsetHeight-l.offsetHeight:this.bufferCount*this.itemSize;(0,E.cn)([l],"e-transition");let X=[];if(l.scrollTop-this.translateY<0?X=this.upScroll(l,L):l.scrollTop-this.translateY>q&&(X=this.downScroll(l,L)),!(0,E.le)(X)&&X.length>0){this.parent.showSpinner();const he=this.parent.getSelectedElements();this.focusedEle=he[he.length-1]||this.focusedEle,this.updateContent(o,l,d,X),this.setTranslate(o,l,d,y),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(()=>{this.renderEvents()},250)}}upScroll(o,l){let d=0;d=~~(o.scrollTop/this.itemSize)+Math.ceil(o.clientHeight/this.itemSize)-this.renderedLength,this.parent.rowAutoHeight&&(d=d>l?l-this.bufferCount:d),d=d>0?d:0;const y=this.getBufferCollection(d,d+this.renderedLength);if(this.parent.resourceBase.renderedResources=y,0===l)this.translateY=o.scrollTop;else{let C=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;C=C>0?C:this.itemSize,this.translateY=o.scrollTop-this.bufferCount*C>0?o.scrollTop-this.bufferCount*C:0}return y}downScroll(o,l){if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return null;let C=0;C=~~(o.scrollTop/this.itemSize),this.parent.rowAutoHeight&&(C=~~((o.scrollTop-this.translateY)/this.averageRowHeight)+l,C=C>l+this.bufferCount?C:l+this.bufferCount);let L=C+this.renderedLength;L=L>this.parent.resourceBase.expandedResources.length?C+(this.parent.resourceBase.expandedResources.length-C):L;const q=this.getBufferCollection(L-this.renderedLength,L);return this.translateY=o.scrollTop,q}updateContent(o,l,d,y){const C=o.querySelector("tbody").children.length;document.activeElement&&document.activeElement.classList.contains(En)&&(this.isResourceCell=!0,this.parent.element.focus());for(let he=0;he<C;he++)(0,E.Od)(o.querySelector("tbody tr")),(0,E.Od)(l.querySelector("tbody tr")),(0,E.Od)(d.querySelector("div"));this.parent.resourceBase.renderedResources=y;const L=this.parent.resourceBase.getContentRows(y,!0),q=this.parent.activeView.getContentRows(),X=this.parent.activeView.getEventRows(y.length);(0,E.R3)(L,o.querySelector("tbody")),(0,E.R3)(q,l.querySelector("tbody")),(0,E.R3)(X,d)}getBufferCollection(o,l){return this.parent.resourceBase.expandedResources.slice(o,l)}setTranslate(o,l,d,y){(0,E.V7)(o.querySelector("table"),{transform:`translateY(${this.translateY}px)`}),(0,E.V7)(l.querySelector("table"),{transform:`translateY(${this.translateY}px)`}),(0,E.V7)(d,{transform:`translateY(${this.translateY}px)`}),(0,E.le)(y)||(0,E.V7)(y,{transform:`translateY(${this.translateY}px)`})}updateFocusedWorkCell(){if(this.focusedEle){const o=parseInt(this.focusedEle.getAttribute("data-date"),10),l=parseInt(this.focusedEle.getAttribute("data-group-index"),10),d=this.parent.element.querySelector(`.${xi}[data-date="${o}"][data-group-index="${l}"]`);d&&this.parent.addSelectedClass([d],d,!0),this.focusedEle=null}}setTabIndex(){const o=this.parent.element.querySelector("."+Yi),l=[].slice.call(this.parent.element.querySelectorAll("."+En));l&&o&&l.forEach(y=>{y.getBoundingClientRect().top>=o.getBoundingClientRect().top&&y.setAttribute("tabindex","0")});const d=this.parent.element.querySelector(`.${En}[tabindex="0"]`);this.isResourceCell&&d&&(d.focus(),this.isResourceCell=!1)}destroy(){this.removeEventListener()}}class mp{constructor(o){this.parent=o}render(o,l=!0){this.initializeLayout(o),this.parent.activeView&&l&&this.parent.crudModule.refreshDataManager()}initializeLayout(o){switch(this.parent.activeView&&(this.parent.resetTemplates(["cellTemplate","eventTemplate","tooltipTemplate","majorSlotTemplate","minorSlotTemplate","headerTooltipTemplate","dateHeaderTemplate","dayHeaderTemplate","mothHeaderTemplate","headerIndentTemplate","resourceHeaderTemplate","cellHeaderTemplate"]),this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),o){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Year":this.parent.activeView=this.parent.yearModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule}if((0,E.le)(this.parent.activeView)){const l=this.parent.viewCollections[0].option;if(l)return this.parent.setProperties({currentView:l},!0),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(l);throw Error("Inject required modules")}this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(o),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.activeViewOptions.group.resources.length>0&&(this.parent.enableAdaptiveUI&&!this.parent.isAdaptive||this.parent.isAdaptive&&this.parent.activeViewOptions.group.enableCompactView),this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),-1!==this.parent.currentView.indexOf("Timeline")&&-1===this.parent.currentView.indexOf("Year")&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new cc(this.parent),this.parent.uiStateValues.top=0),this.updateHeader(),this.parent.activeView.renderLayout(wn),this.parent.renderTemplates(),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new Pc(this.parent))}updateHeader(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?(0,E.cn)([this.parent.element],Fl):this.parent.element.classList.contains(Fl)&&(0,E.IV)([this.parent.element],Fl),this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))}updateLabelText(o){const l=this.parent.activeView.getLabelText(o);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",l)}}var Wh=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class jc extends E.rt{}Wh([(0,E.Z9)(!0)],jc.prototype,"highlight",void 0),Wh([(0,E.Z9)("09:00")],jc.prototype,"start",void 0),Wh([(0,E.Z9)("18:00")],jc.prototype,"end",void 0);var Zd=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class Dh extends E.rt{}Zd([(0,E.Z9)(!0)],Dh.prototype,"enable",void 0),Zd([(0,E.Z9)(60)],Dh.prototype,"interval",void 0),Zd([(0,E.Z9)(2)],Dh.prototype,"slotCount",void 0),Zd([(0,E.Z9)()],Dh.prototype,"minorSlotTemplate",void 0),Zd([(0,E.Z9)()],Dh.prototype,"majorSlotTemplate",void 0);var Th=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class xh extends E.rt{}Th([(0,E.Z9)("Both")],xh.prototype,"templateType",void 0),Th([(0,E.Z9)()],xh.prototype,"header",void 0),Th([(0,E.Z9)()],xh.prototype,"content",void 0),Th([(0,E.Z9)()],xh.prototype,"footer",void 0);var bf=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class Wl extends E.rt{}bf([(0,E.Z9)()],Wl.prototype,"option",void 0),bf([(0,E.Z9)()],Wl.prototype,"template",void 0);class oh{constructor(o){this.parent=o,this.crudObj={sourceEvent:null,targetEvent:null,isCrudAction:!1}}getQuery(){const o=this.parent.activeView.startDate(),l=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(o,l)}getTable(){return this.parent.eventSettings.query?this.parent.eventSettings.query.clone().fromTable:null}refreshDataManager(){if(!this.parent.activeView)return;const o=this.parent.activeView.startDate(),l=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(o,l)).then(y=>this.dataManagerSuccess(y)).catch(y=>this.dataManagerFailure(y))}dataManagerSuccess(o){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger("dataBinding",o,l=>{const d=(0,E.l7)([],l.result,null,!0);this.parent.eventsData=d.filter(y=>!y[this.parent.eventFields.isBlock]),this.parent.blockData=d.filter(y=>y[this.parent.eventFields.isBlock]),this.parent.refreshEvents(!1),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),this.parent.trigger("dataBound",null,()=>{this.parent.hideSpinner(),this.parent.isPrinting&&this.parent.notify("print",{})})})}dataManagerFailure(o){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(cr,{error:o},()=>this.parent.hideSpinner())}refreshData(o){const l={requestType:o.requestType,cancel:!1,data:o.data,addedRecords:o.editParams.addedRecords,changedRecords:o.editParams.changedRecords,deletedRecords:o.editParams.deletedRecords};if(this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.activeViewOptions.group.allowGroupEdit&&!this.parent.rowAutoHeight&&!this.parent.virtualScrollModule&&this.parent.activeViewOptions.group.byGroupID&&("eventCreated"===o.requestType||"eventRemoved"===o.requestType)){this.crudObj.isCrudAction=!0,this.crudObj.sourceEvent=[];const d=o.data instanceof Array?0===o.data.length&&"eventRemoved"===o.requestType?o.editParams.deletedRecords:o.data:"string"!=typeof o.data&&"number"!=typeof o.data||"eventRemoved"!==o.requestType?[o.data]:o.editParams.deletedRecords;for(const y of d){this.crudObj.isCrudAction=!("eventRemoved"===o.requestType&&!(0,E.le)(y.parent));const C=this.parent.eventBase.getGroupIndexFromEvent(y);C>-1&&0===this.parent.crudModule.crudObj.sourceEvent.filter(L=>L.groupIndex===C).length&&this.crudObj.isCrudAction&&this.crudObj.sourceEvent.push(this.parent.resourceBase.lastResourceLevel[C])}this.crudObj.targetEvent=this.crudObj.sourceEvent}this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger(Ls,l,d=>{d.cancel||this.refreshDataManager()}):o.promise.then(()=>{!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(Ls,l,d=>{d.cancel||this.refreshDataManager()})}).catch(d=>{!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(cr,{error:d})})}addEvent(o){if(this.parent.eventSettings.allowAdding&&!this.parent.activeViewOptions.readonly){if(!this.isBlockEvent(o)&&this.parent.eventBase.isBlockRange(o))return void this.parent.quickPopup.openValidationError("blockAlert",o);const l=o instanceof Array?o:[o];this.parent.trigger(Xi,{requestType:"eventCreate",cancel:!1,data:l,addedRecords:l,changedRecords:[],deletedRecords:[]},y=>{if(!y.cancel){const C=this.parent.eventFields,L={addedRecords:[],changedRecords:[],deletedRecords:[]};let q;if(y.addedRecords instanceof Array){for(let he of y.addedRecords){he=this.parent.eventBase.updateEventDateTime(he);const He=(0,E.l7)({},this.parent.eventBase.processTimezone(he,!0),null,!0);L.addedRecords.push(He)}q=this.parent.dataModule.dataManager.saveChanges(L,C.id,this.getTable(),this.getQuery())}else{const he=this.parent.eventBase.processTimezone(y.addedRecords,!0);L.addedRecords.push(he),q=this.parent.dataModule.dataManager.insert(he,this.getTable(),this.getQuery())}this.refreshData({requestType:"eventCreated",cancel:!1,data:y.addedRecords,promise:q,editParams:L})}})}}saveEvent(o,l){if(this.parent.eventSettings.allowEditing&&!this.parent.activeViewOptions.readonly){if("EditFollowingEvents"!==this.parent.currentAction&&!this.isBlockEvent(o)&&this.parent.eventBase.isBlockRange(o))return void this.parent.quickPopup.openValidationError("blockAlert",o);if(this.parent.currentAction=l,l)switch(l){case"Save":this.processSave(o);break;case"EditOccurrence":this.processOccurrences(o,l);break;case"EditFollowingEvents":this.processFollowSeries(o,l);break;case"EditSeries":this.processEntireSeries(o,l)}else this.parent.trigger(Xi,{requestType:"eventChange",cancel:!1,data:o,addedRecords:[],changedRecords:o instanceof Array?o:[o],deletedRecords:[]},C=>{if(!C.cancel){let L;const q=this.parent.eventFields,X={addedRecords:[],changedRecords:[],deletedRecords:[]};if(C.changedRecords instanceof Array){for(let He of C.changedRecords){He=this.parent.eventBase.updateEventDateTime(He);const Ve=(0,E.l7)({},this.parent.eventBase.processTimezone(He,!0),null,!0);X.changedRecords.push(Ve)}L=this.parent.dataModule.dataManager.saveChanges(X,q.id,this.getTable(),this.getQuery())}else{const He=this.parent.eventBase.processTimezone(C.changedRecords,!0);X.changedRecords.push(He),L=this.parent.dataModule.dataManager.update(q.id,He,this.getTable(),this.getQuery())}this.refreshData({requestType:"eventChanged",cancel:!1,data:C.changedRecords,promise:L,editParams:X})}})}}deleteEvent(o,l){if(this.parent.eventSettings.allowDeleting&&!this.parent.activeViewOptions.readonly){this.parent.currentAction=l;let d=[];if(d="string"==typeof o||"number"==typeof o?this.parent.eventsData.filter(y=>y[this.parent.eventFields.id]===o):o instanceof Array?o:[o],l)switch(l){case"Delete":this.processDelete(d);break;case"DeleteOccurrence":this.processOccurrences(d,l);break;case"DeleteFollowingEvents":this.processFollowSeries(d,l);break;case"DeleteSeries":this.processEntireSeries(d,l)}else this.parent.trigger(Xi,{requestType:"eventRemove",cancel:!1,data:o,addedRecords:[],changedRecords:[],deletedRecords:d},C=>{if(!C.cancel){let L;const q=this.parent.eventFields,X={addedRecords:[],changedRecords:[],deletedRecords:[]};C.deletedRecords.length>1?(X.deletedRecords=X.deletedRecords.concat(C.deletedRecords),L=this.parent.dataModule.dataManager.saveChanges(X,q.id,this.getTable(),this.getQuery())):(X.deletedRecords.push(C.deletedRecords[0]),L=this.parent.dataModule.dataManager.remove(q.id,C.deletedRecords[0],this.getTable(),this.getQuery())),this.parent.eventBase.selectWorkCellByTime(C.deletedRecords),this.refreshData({requestType:"eventRemoved",cancel:!1,data:C.deletedRecords,promise:L,editParams:X})}})}}processOccurrences(o,l){let d=[],y=!1;if(o instanceof Array)for(const q of o)d.push({occurrence:q,parent:this.getParentEvent(q)});else d={occurrence:o,parent:this.getParentEvent(o)};const L={requestType:"EditOccurrence"===l?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:o instanceof Array?o:[o],deletedRecords:[]};L.data=d,this.parent.trigger(Xi,L,q=>{if(!q.cancel){const X=this.parent.eventFields,he={addedRecords:[],changedRecords:[],deletedRecords:[]},He=d instanceof Array?d:[d];for(let It=0,vt=q.changedRecords.length;It<vt;It++){const mi=q.changedRecords[It],Ni=He[It].parent,Ki=Ni[X.recurrenceException];let Ts,Hs;switch(l){case"EditOccurrence":Ts=this.parent.eventsProcessed.filter(Js=>Js.Guid===mi.Guid)[0],Hs=this.excludeDateCheck(Ts[X.startTime],Ki),Hs!==Ni[X.recurrenceException]?(Ni[X.recurrenceException]=Hs,mi[X.recurrenceException]=nh(Ts[X.startTime]),mi[X.recurrenceID]=Ni[X.id],mi[X.followingID]=null,he.changedRecords.push(this.parent.eventBase.processTimezone(Ni,!0)),he.addedRecords.push(this.parent.eventBase.processTimezone(mi,!0))):he.changedRecords.push(this.parent.eventBase.processTimezone(mi,!0));break;case"DeleteOccurrence":mi[X.recurrenceException]||(Ni[X.recurrenceException]=this.excludeDateCheck(mi[X.startTime],Ki),he.changedRecords.push(this.parent.eventBase.processTimezone(Ni,!0))),mi[X.id]!==Ni[X.id]&&(he.deletedRecords.push(mi),y=!0)}}const Ve=this.parent.dataModule.dataManager.saveChanges(he,X.id,this.getTable(),this.getQuery());this.parent.eventBase.selectWorkCellByTime(q.changedRecords),this.refreshData({requestType:"EditOccurrence"===l?"eventChanged":"eventRemoved",cancel:!1,data:y?q.deletedRecords:q.changedRecords,promise:Ve,editParams:he})}})}processFollowSeries(o,l){let d=[];if(o instanceof Array)for(const L of o)d.push({occurrence:L,parent:this.getParentEvent(L)});else d={occurrence:o,parent:this.getParentEvent(o)};const C={requestType:"EditFollowingEvents"===l?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:o instanceof Array?o:[o],deletedRecords:[]};C.data=d,this.parent.trigger(Xi,C,L=>{if(!L.cancel){const q=this.parent.eventFields,X={addedRecords:[],changedRecords:[],deletedRecords:[]},he=d instanceof Array?d:[d];for(let nt=0,It=L.changedRecords.length;nt<It;nt++){const vt=L.changedRecords[nt],mi=he[nt].parent,Ni=this.parent.eventBase.getEventCollections(mi,vt);let Ki;switch(l){case"EditFollowingEvents":if(this.processRecurrenceRule(mi,vt),Ki=!this.parent.eventBase.isFollowingEvent(mi,vt),vt[q.followingID]=Ki?null:mi[q.id],vt[q.recurrenceID]=null,X.addedRecords.push(this.parent.eventBase.processTimezone(vt,!0)),X.changedRecords.push(this.parent.eventBase.processTimezone(mi,!0)),!this.parent.uiStateValues.isIgnoreOccurrence){if(vt[q.recurrenceException]=null,Ni.occurrence.length>0){const Ts=Ni.occurrence.slice(-1)[0][q.recurrenceRule];-1===Ts.indexOf("COUNT")&&(vt[q.recurrenceRule]=Ts)}Ni.follow.length>0&&(vt[q.recurrenceRule]=Ni.follow.slice(-1)[0][q.recurrenceRule],X.deletedRecords=X.deletedRecords.concat(Ni.follow)),Ki&&(Ni.occurrence=Ni.occurrence.filter(Ts=>Ts[q.recurrenceID]===vt[q.id])),X.deletedRecords=X.deletedRecords.concat(Ni.occurrence)}break;case"DeleteFollowingEvents":this.processRecurrenceRule(mi,vt[q.startTime]),X.changedRecords.push(this.parent.eventBase.processTimezone(mi,!0)),X.deletedRecords=X.deletedRecords.concat(Ni.occurrence).concat(Ni.follow)}}const He=this.parent.dataModule.dataManager.saveChanges(X,q.id,this.getTable(),this.getQuery());this.parent.eventBase.selectWorkCellByTime(L.changedRecords),this.refreshData({requestType:"EditFollowingEvents"===l?"eventChanged":"eventRemoved",cancel:!1,data:L.changedRecords,promise:He,editParams:X})}})}processEntireSeries(o,l){let d=[],y=!1;if(o instanceof Array)for(const q of o)d.push(this.getParentEvent(q,!0));else d=this.getParentEvent(o,!0);const L={requestType:"EditSeries"===l?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:o instanceof Array?o:[o],deletedRecords:[]};L.data=d,this.parent.trigger(Xi,L,q=>{if(!q.cancel){const X=this.parent.eventFields,he={addedRecords:[],changedRecords:[],deletedRecords:[]},He=d instanceof Array?d:[d];for(let It=0,vt=q.changedRecords.length;It<vt;It++){const mi=q.changedRecords[It],Ni=He[It],Ki=this.parent.eventBase.getEventCollections(Ni),Ts=Ki.follow.concat(Ki.occurrence);switch(l){case"EditSeries":if(mi[X.startTime]>Ni[X.startTime]&&mi[X.recurrenceRule]&&this.processRecurrenceRule(Ni,mi),mi[X.id]=Ni[X.id],mi[X.recurrenceID]=null,mi[X.followingID]=null,this.parent.uiStateValues.isIgnoreOccurrence&&mi[X.recurrenceException]){const Hs=this.parent.eventsData.filter(Js=>Js[X.id]===mi[X.id]);Hs.length>0&&(mi[X.recurrenceRule]=Hs[0][X.recurrenceRule])}else mi[X.recurrenceException]=null,he.deletedRecords=he.deletedRecords.concat(Ts);he.changedRecords.push(this.parent.eventBase.processTimezone(mi,!0)),this.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":he.deletedRecords=he.deletedRecords.concat(Ts.concat(Ni)),y=!0}}const Ve=this.parent.dataModule.dataManager.saveChanges(he,X.id,this.getTable(),this.getQuery());this.parent.eventBase.selectWorkCellByTime(q.changedRecords),this.refreshData({requestType:"EditSeries"===l?"eventChanged":"eventRemoved",cancel:!1,data:y?q.deletedRecords:q.changedRecords,promise:Ve,editParams:he})}})}processDelete(o){const l=[];for(const y of o)l.push(y[this.parent.eventFields.recurrenceRule]?{occurrence:y,parent:this.getParentEvent(y)}:y);const d={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:o};d.data=l,this.parent.trigger(Xi,d,y=>{if(!y.cancel){const C=this.parent.eventFields,L={addedRecords:[],changedRecords:[],deletedRecords:[]};for(let he=0,He=y.deletedRecords.length;he<He;he++){let Ve=(0,E.le)(y.deletedRecords[he][this.parent.eventFields.recurrenceRule]);if(!Ve){const nt=l[he].parent,It=L.changedRecords.filter(mi=>mi[C.id]===nt[C.id]),vt=y.deletedRecords[he][C.startTime];if(It.length>0){const mi=It[0];mi[C.recurrenceException]=this.excludeDateCheck(vt,mi[C.recurrenceException])}else nt[C.recurrenceException]=this.excludeDateCheck(vt,nt[C.recurrenceException]);0===It.length&&L.changedRecords.push(this.parent.eventBase.processTimezone(nt,!0)),Ve=y.deletedRecords[he][C.id]!==nt[C.id]}Ve&&L.deletedRecords.push(y.deletedRecords[he])}const q=this.parent.dataModule.dataManager.saveChanges(L,C.id,this.getTable(),this.getQuery());this.refreshData({requestType:"eventRemoved",cancel:!1,data:y.deletedRecords,promise:q,editParams:L})}})}processSave(o){const l=o instanceof Array?o:[o],d=[];for(const C of l)d.push(C[this.parent.eventFields.recurrenceRule]?{occurrence:C,parent:this.getParentEvent(C)}:C);const y={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:l,deletedRecords:[]};y.data=d,this.parent.trigger(Xi,y,C=>{if(!C.cancel){const L=this.parent.eventFields,q={addedRecords:[],changedRecords:[],deletedRecords:[]};for(const He of C.changedRecords)if(!(0,E.le)(He[L.recurrenceRule])&&(0,E.le)(He[L.recurrenceException])){const Ve=nh(He[L.startTime]),nt=this.getParentEvent(He);nt[L.recurrenceException]=(0,E.le)(nt[L.recurrenceException])?Ve:nt[L.recurrenceException].concat(","+Ve),He[L.id]=this.parent.getEventMaxID(),He[L.recurrenceException]=Ve,q.addedRecords.push(this.parent.eventBase.processTimezone(He,!0)),q.changedRecords.push(this.parent.eventBase.processTimezone(nt,!0))}else q.changedRecords.push(this.parent.eventBase.processTimezone(He,!0));const X=this.parent.dataModule.dataManager.saveChanges(q,L.id,this.getTable(),this.getQuery());this.refreshData({requestType:"eventChanged",cancel:!1,data:C.changedRecords,promise:X,editParams:q})}})}getParentEvent(o,l=!1){const d=this.parent.eventBase.getParentEvent(o,l)||o;return(d[this.parent.eventFields.startTimezone]||d[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(d),d}excludeDateCheck(o,l){const d=nh(o);return(0,E.le)(l)?l=d:-1===l.indexOf(d)&&(l=(0,E.le)(l)?d:l+","+d),l}processRecurrenceRule(o,l){const d=this.parent.eventFields,y=o[d.recurrenceRule];let C;if(l instanceof Date)C=new Date(+l);else{C=new Date(+l[d.startTime]);const L=l[d.recurrenceRule],q=o[d.startTime],he=Zu(q,L,"DeleteFollowingEvents"===this.parent.currentAction?l[d.recurrenceException]:null,this.parent.activeViewOptions.firstDayOfWeek),He=new Date(he.slice(-1)[0]);He.setHours(C.getHours(),C.getMinutes(),C.getSeconds()),C.setHours(q.getHours(),q.getMinutes(),q.getSeconds()),l[d.recurrenceRule]=this.getUpdatedRecurrenceRule(L,new Date(+He),!1)}o[d.recurrenceRule]=this.getUpdatedRecurrenceRule(y,os(new Date(C.getTime()),-1),!0)}getUpdatedRecurrenceRule(o,l,d){const y=o.split(";");let C="";for(let L of y)if(""!==L){const q=L.split("=")[0];let X=L.split("=")[1];("COUNT"===q||"UNTIL"===q)&&(X=nh(l),L=L.replace(L,"UNTIL="+X)),C+=L+";"}return d&&-1===C.indexOf("UNTIL")&&(C+="UNTIL="+nh(l)),C}isBlockEvent(o){const l=o instanceof Array?o:[o];let d=!1;for(const y of l)d=y[this.parent.eventFields.isBlock]||!1;return d}destroy(){this.crudObj=null,this.parent=null}}class Kd{constructor(o){this.parent=o,E.bi.add(this.parent.element,"mouseover",this.onHover,this)}cellMouseDown(o){this.isPreventAction(o)||this.parent.notify(gr,{event:o})}cellClick(o){if(this.isPreventAction(o))return;const d=(0,E.oq)(o.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if((0,E.le)(d))return;if(!(0,E.le)((0,E.oq)(o.target,"."+Ht)))return void this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add");const y=(0,E.oq)(o.target,"."+qi),C=this.parent.getNavigateView(),L=this.parent.currentView===C;if((0,E.le)(y)||L||(0,E.le)(this.parent.viewOptions[C.charAt(0).toLowerCase()+C.slice(1)])){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView)return void(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide());if(this.parent.isAdaptive&&(o.target.classList.contains(tl)||(0,E.oq)(o.target,"."+tl)))return;const q=d.classList.contains(xi)||d.classList.contains(qs);if(q&&o.shiftKey&&1===o.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(o);this.parent.activeCellsData=this.parent.getCellDetails(d);const X=(0,E.l7)(this.parent.activeCellsData,{cancel:!1,event:o,name:"cellClick"});this.parent.trigger(Kn,X,he=>{he.cancel?this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide():(q&&this.parent.selectCell(d),this.parent.allowInline?this.parent.notify(ms,{element:he.element,groupIndex:he.groupIndex,type:"Cell"}):this.parent.notify(Kn,he))})}else{const q=this.parent.getDateFromElement(d);!(0,E.le)(q)&&!this.parent.isAdaptive&&this.parent.isMinMaxDate(q)&&(this.parent.setProperties({selectedDate:q},!0),this.parent.changeView(this.parent.getNavigateView(),o))}}cellDblClick(o){const d=(0,E.oq)(o.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(this.parent.activeViewOptions.readonly||this.isPreventAction(o)||(0,E.le)(d))return;const y=(0,E.l7)(this.parent.activeCellsData,{cancel:!1,event:o,name:"cellDoubleClick"});this.parent.trigger("cellDoubleClick",y,C=>{const L=new Date(C.startTime.getTime());!this.parent.isMinMaxDate(new Date(L.setHours(0,0,0,0)))||C.cancel||this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")})}onHover(o){const d=(0,E.oq)(o.target,".e-work-cells,.e-time-slots,.e-all-day-cells,.e-header-cells,.e-resource-cells,.e-appointment,.e-week-number,.e-month-header");d&&this.parent.trigger("hover",{element:d,event:o})}isPreventAction(o){if((0,E.oq)(o.target,"."+qi))return!1;if((0,E.oq)(o.target,"."+nr)&&!(0,E.oq)(o.target,"."+tl))return!0;let l=(0,E.oq)(o.target,"."+Mn+",."+Bt);return!((0,E.le)(l)&&(l=(0,E.oq)(o.target,"."+Ce),!this.parent.activeView.isTimelineView()||(0,E.le)(l)))}destroy(){E.bi.remove(this.parent.element,"mouseover",this.onHover)}}var Ah=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class Al extends E.rt{}Ah([(0,E.Z9)()],Al.prototype,"name",void 0),Ah([(0,E.Z9)()],Al.prototype,"default",void 0),Ah([(0,E.Z9)()],Al.prototype,"title",void 0),Ah([(0,E.Z9)({})],Al.prototype,"validation",void 0);var Jl=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class Hl extends E.rt{}Jl([(0,E.Z9)("Id")],Hl.prototype,"id",void 0),Jl([(0,E.Z9)("IsBlock")],Hl.prototype,"isBlock",void 0),Jl([(0,E.Zz)({name:"Subject"},Al)],Hl.prototype,"subject",void 0),Jl([(0,E.Zz)({name:"StartTime"},Al)],Hl.prototype,"startTime",void 0),Jl([(0,E.Zz)({name:"EndTime"},Al)],Hl.prototype,"endTime",void 0),Jl([(0,E.Zz)({name:"StartTimezone"},Al)],Hl.prototype,"startTimezone",void 0),Jl([(0,E.Zz)({name:"EndTimezone"},Al)],Hl.prototype,"endTimezone",void 0),Jl([(0,E.Zz)({name:"Location"},Al)],Hl.prototype,"location",void 0),Jl([(0,E.Zz)({name:"Description"},Al)],Hl.prototype,"description",void 0),Jl([(0,E.Zz)({name:"IsAllDay"},Al)],Hl.prototype,"isAllDay",void 0),Jl([(0,E.Zz)({name:"RecurrenceID"},Al)],Hl.prototype,"recurrenceID",void 0),Jl([(0,E.Zz)({name:"RecurrenceRule"},Al)],Hl.prototype,"recurrenceRule",void 0),Jl([(0,E.Zz)({name:"RecurrenceException"},Al)],Hl.prototype,"recurrenceException",void 0),Jl([(0,E.Z9)("IsReadonly")],Hl.prototype,"isReadonly",void 0),Jl([(0,E.Z9)("FollowingID")],Hl.prototype,"followingID",void 0);var Ul=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class Uo extends E.rt{}Ul([(0,E.Z9)()],Uo.prototype,"template",void 0),Ul([(0,E.Z9)([])],Uo.prototype,"dataSource",void 0),Ul([(0,E.Z9)()],Uo.prototype,"query",void 0),Ul([(0,E.Zz)({},Hl)],Uo.prototype,"fields",void 0),Ul([(0,E.Z9)(!1)],Uo.prototype,"enableTooltip",void 0),Ul([(0,E.Z9)("AllDayRow")],Uo.prototype,"spannedEventPlacement",void 0),Ul([(0,E.Z9)(1)],Uo.prototype,"minimumEventDuration",void 0),Ul([(0,E.Z9)()],Uo.prototype,"tooltipTemplate",void 0),Ul([(0,E.Z9)()],Uo.prototype,"resourceColorField",void 0),Ul([(0,E.Z9)(!1)],Uo.prototype,"editFollowingEvents",void 0),Ul([(0,E.Z9)(!0)],Uo.prototype,"allowAdding",void 0),Ul([(0,E.Z9)(!0)],Uo.prototype,"allowEditing",void 0),Ul([(0,E.Z9)(!0)],Uo.prototype,"allowDeleting",void 0),Ul([(0,E.Z9)(!1)],Uo.prototype,"enableMaxHeight",void 0),Ul([(0,E.Z9)(!1)],Uo.prototype,"enableIndicator",void 0),Ul([(0,E.Z9)(!1)],Uo.prototype,"ignoreWhitespace",void 0),Ul([(0,E.Z9)()],Uo.prototype,"sortComparer",void 0);var Ya=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class La extends E.rt{}Ya([(0,E.Z9)(!1)],La.prototype,"byDate",void 0),Ya([(0,E.Z9)(!0)],La.prototype,"byGroupID",void 0),Ya([(0,E.Z9)(!1)],La.prototype,"allowGroupEdit",void 0),Ya([(0,E.Z9)([])],La.prototype,"resources",void 0),Ya([(0,E.Z9)(!0)],La.prototype,"enableCompactView",void 0),Ya([(0,E.Z9)()],La.prototype,"headerTooltipTemplate",void 0);var Ml=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};class oa extends E.rt{}Ml([(0,E.Z9)()],oa.prototype,"field",void 0),Ml([(0,E.Z9)()],oa.prototype,"title",void 0),Ml([(0,E.Z9)()],oa.prototype,"name",void 0),Ml([(0,E.Z9)(!1)],oa.prototype,"allowMultiple",void 0),Ml([(0,E.Z9)([])],oa.prototype,"dataSource",void 0),Ml([(0,E.Z9)()],oa.prototype,"query",void 0),Ml([(0,E.Z9)("Id")],oa.prototype,"idField",void 0),Ml([(0,E.Z9)("Text")],oa.prototype,"textField",void 0),Ml([(0,E.Z9)("Expanded")],oa.prototype,"expandedField",void 0),Ml([(0,E.Z9)("GroupID")],oa.prototype,"groupIDField",void 0),Ml([(0,E.Z9)("Color")],oa.prototype,"colorField",void 0),Ml([(0,E.Z9)("StartHour")],oa.prototype,"startHourField",void 0),Ml([(0,E.Z9)("EndHour")],oa.prototype,"endHourField",void 0),Ml([(0,E.Z9)("WorkDays")],oa.prototype,"workDaysField",void 0),Ml([(0,E.Z9)("CssClass")],oa.prototype,"cssClassField",void 0);class yp{constructor(o){this.resourceCollection=[],this.leftPixel=25,this.parent=o}renderResourceHeaderIndent(o){const l=(0,E.az)("td",{className:"e-resource-left-td"}),d=(0,E.az)("div",{className:Ii});this.parent.activeViewOptions.headerIndentTemplate?this.parent.renderHeaderIndentTemplate({className:[l.className],type:"emptyCells"},l):l.appendChild(d),this.parent.trigger(gi,{elementType:"emptyCells",element:l}),o.appendChild(l)}hideResourceRows(o){if(this.resourceCollection.length<=1||this.parent.virtualScrollModule)return;const l=this.lastResourceLevel.length;for(let d=0;d<l;d++){const y=this.lastResourceLevel[d].resourceData,C=this.lastResourceLevel[d].resource;if(y.ClassName===un&&!y[C.expandedField]&&!(0,E.le)(y[C.expandedField])){const q=[].slice.call(o.children).slice(d+1,d+(parseInt(y.Count,10)+1));(0,E.cn)(q,Zl)}}}createResourceColumn(){const o=this.resourceCollection,l=(0,E.az)("div",{className:Yi}),d=this.parent.activeView.createTableLayout(Ss);!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(0,E.cn)([d],Ko);const y=d.querySelector("tbody");let C=this.generateTreeData(!0);if(this.countCalculation(o.slice(0,-2),o.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){const L=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),C=this.expandedResources.slice(0,L),this.renderedResources=C}return(0,E.R3)(this.getContentRows(C),y),this.hideResourceRows(y),d.appendChild(y),l.appendChild(d),l}setRenderedResources(){const o=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(o.slice(0,-2),o.slice(0,-1)),this.renderedResources=this.lastResourceLevel}setExpandedResources(){const o=[];for(let l=0;l<this.lastResourceLevel.length;l++){const d=this.lastResourceLevel[l].resourceData,y=d.Count;o.push(this.lastResourceLevel[l]);const C=d[this.lastResourceLevel[l].resource.expandedField];!(0,E.le)(C)&&!C&&y>0&&(l+=y)}this.expandedResources=o}getContentRows(o,l){const d=[];let y,C;const L=this.resourceCollection,q=(0,E.az)("tr"),X=(0,E.az)("td",{attrs:{tabindex:l?"-1":"0"}});for(let he=0;he<o.length;he++){const He=X.cloneNode();if(C=Ro(L,"name",o[he].resource.name),C===L.length-1?((0,E.l7)(o[he].resourceData,{ClassName:Ps}),this.renderedResources[he].className=[Ps]):((0,E.l7)(o[he].resourceData,{ClassName:un}),this.renderedResources[he].className=[un]),y=C*this.leftPixel+"px",o[he].resourceData.ClassName===un&&!(0,E.le)(o[he].resourceData.Count)&&o[he].resourceData.Count>0){let vt;vt=o[he].resourceData[L[C].expandedField]||(0,E.le)(o[he].resourceData[L[C].expandedField])?Jn:Xs;const mi=(0,E.az)("div");(0,E.cn)([mi],[Ar,vt]),this.setMargin(mi,y),He.appendChild(mi),this.resourceCollection.length>1&&E.bi.add(mi,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(He,o[he],Ii),He.setAttribute("data-group-index",o[he].groupIndex.toString()),He.setAttribute("aria-label",o[he].resourceData[o[he].resource.textField]+" resource"),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(He.querySelector("."+Ii),y),(0,E.cn)([He],[En,o[he].resourceData.ClassName]),this.parent.trigger(gi,{elementType:"resourceHeader",element:He,groupIndex:o[he].groupIndex});const It=q.cloneNode();It.appendChild(He),d.push(It)}return d}setMargin(o,l){this.parent.enableRtl?o.style.marginRight=l:o.style.marginLeft=l}countCalculation(o,l){let d;for(let y=0;y<o.length;y++){const C=o[o.length-(y+1)].dataSource;for(let L=0;L<C.length;L++){let q=0;if(this.parent.activeViewOptions.group.byGroupID){const X=(new ns.AE).where(l[l.length-1].groupIDField,"equal",C[L][o[o.length-(y+1)].idField]);d=new ns.hm(l[l.length-1].dataSource).executeLocal(X)}else d=l[l.length-1].dataSource;for(let X=0;X<d.length;X++)q+=parseInt(d[X].Count,10);q+=parseInt(C[L].Count,10),(0,E.l7)(C[L],{Count:q})}l=l.slice(0,-1)}}onTreeIconClick(o){this.parent.eventTooltip&&this.parent.eventTooltip.close();const l=o.target;let d;const y=(0,E.oq)(l,"."+un).parentElement,C=parseInt(y.children[0].getAttribute("data-group-index"),10);let L={cancel:!1,event:o,groupIndex:C,requestType:l.classList.contains(Jn)?"resourceCollapse":"resourceExpand"};this.parent.trigger(Xi,L,q=>{if(!q.cancel){l.classList.contains(Jn)?((0,E.s1)(l,[Xs],[Jn]),d=!0):((0,E.s1)(l,[Jn],[Xs]),d=!1);const X=[].slice.call(this.parent.element.querySelectorAll("."+Mn));for(const He of X)(0,E.Od)(He);this.parent.virtualScrollModule?this.updateVirtualContent(C,d,o,l):this.updateContent(C,d);const he={cssProperties:this.parent.getCssProperties(),module:"scroll"};this.parent.notify(ln,he),L={cancel:!1,event:o,groupIndex:C,requestType:l.classList.contains(Jn)?"resourceExpanded":"resourceCollapsed"},this.parent.refreshEvents(!1),this.parent.trigger(Ls,L)}})}updateContent(o,l){const d=[],y=[],C=[];let L;const q=this.lastResourceLevel[o].resourceData,X=[].slice.call(this.parent.element.querySelectorAll("."+Yi+" tr")),he=[].slice.call(this.parent.element.querySelectorAll("."+ee+" tbody tr")),He=[].slice.call(this.parent.element.querySelectorAll("."+ee+" ."+$o));for(let nt=0;nt<q.Count;nt++)d.push(X[o+nt+1]),y.push(he[o+nt+1]),C.push(He[o+nt+1]);const Ve=this.lastResourceLevel;for(let nt=0;nt<d.length;nt++){let It=!0;if(L=d[nt].children[0].classList.contains(un),Ve[o].resourceData[Ve[o].resource.expandedField]=!l,l){if(L){const vt=d[nt].querySelector("."+Ar);vt&&(0,E.s1)(vt,[Xs],[Jn])}d[nt].classList.contains(Zl)||(0,E.cn)([d[nt],y[nt],C[nt]],Zl)}else{if(L){const vt=d[nt].rowIndex;if(!Ve[vt].resourceData[Ve[vt].resource.expandedField]&&!(0,E.le)(Ve[vt].resourceData[Ve[vt].resource.expandedField])&&(d.splice(nt+1,parseInt(Ve[vt].resourceData.Count,10)),y.splice(nt+1,parseInt(Ve[vt].resourceData.Count,10)),C.splice(nt+1,parseInt(Ve[vt].resourceData.Count,10)),It=!1),It){const mi=d[nt].querySelector("."+Ar);mi&&(0,E.s1)(mi,[Jn],[Xs])}}d[nt].classList.contains(Zl)&&(0,E.IV)([d[nt],y[nt],C[nt]],Zl)}}}updateVirtualContent(o,l,d,y){this.lastResourceLevel[o].resourceData[this.lastResourceLevel[o].resource.expandedField]=!l,this.setExpandedResources();const C=this.parent.virtualScrollModule.getRenderedCount(),L=this.expandedResources.indexOf(this.renderedResources[0]);if(this.renderedResources=this.expandedResources.slice(L,L+C),this.renderedResources.length<C){let nt=this.expandedResources.length-C;nt=nt>0?nt:0,this.renderedResources=this.expandedResources.slice(nt,this.expandedResources.length)}const q=this.parent.element.querySelector("."+te);this.parent.virtualScrollModule.updateVirtualTrackHeight(q);const X=this.parent.element.querySelector("."+Yi+" table"),he=this.parent.element.querySelector("."+ee+" table"),He=this.parent.element.querySelector("."+Ee);this.parent.virtualScrollModule.updateContent(X,he,He,this.renderedResources);const Ve=this.parent.element.querySelector("."+_s);(0,E.le)(Ve)||(Ve.style.height=this.parent.element.querySelector("."+ks).offsetHeight+"px")}renderResourceHeader(){const o=(0,E.az)("div",{className:Rn});if(o.innerHTML='<div class="'+qo+'"><div class="'+Lh+'"><div class="e-icons '+gl+'"></div></div><div class="'+au+'"></div></div>',"MonthAgenda"===this.parent.currentView){const l=this.parent.activeView.getPanel().querySelector("."+ee);l.insertBefore(o,l.querySelector("."+Go))}else this.parent.element.insertBefore(o,this.parent.element.querySelector("."+ur));this.renderResourceHeaderText(),E.bi.add(o.querySelector("."+gl),"click",this.menuClick,this)}renderResourceTree(){this.popupOverlay=(0,E.az)("div",{className:Yu});const o=(0,E.az)("div",{className:Fh+" e-popup-close"});if("MonthAgenda"===this.parent.currentView){const d=this.parent.activeView.getPanel().querySelector("."+Go);d.insertBefore(o,d.children[0]),d.appendChild(this.popupOverlay)}else this.parent.element.querySelector("."+ur).appendChild(o),this.parent.element.querySelector("."+ur).appendChild(this.popupOverlay);const l=(0,E.az)("div",{className:"e-resource-tree"});o.appendChild(l),this.treeViewObj=new bi.LQ({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this)}),this.treeViewObj.appendTo(l),this.treeViewObj.expandAll(),this.treePopup=new _e.GI(o,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,relateTo:this.parent.element.querySelector("."+ur),enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?Go:ur))}),this.parent.on($n,this.documentClick,this)}generateTreeData(o){const l=[],d=[];let y=0;for(let C=0,L=this.resourceTreeLevel.length;C<L;C++){const q=(X,he,He)=>{const Ve=this.resourceCollection[he];let nt,It;o?(It={type:"resourceHeader",resource:X.resource,resourceData:X.resourceData,groupIndex:y,groupOrder:X.groupOrder},d.push(It),y++):nt={resourceId:He,resourceName:X.resourceData[Ve.textField],resource:X.resource,resourceData:X.resourceData},X.child.length>0&&!o&&(nt.resourceChild=[]);let vt=1;for(const mi of X.child)o?q(mi,he+1,He+"-"+vt):nt.resourceChild.push(q(mi,he+1,He+"-"+vt)),vt+=1;return o&&(0,E.l7)(It.resourceData,{Count:vt-1}),nt};o?q(this.resourceTreeLevel[C],0,(C+1).toString()):l.push(q(this.resourceTreeLevel[C],0,(C+1).toString()))}return o?(this.lastResourceLevel=d,d):l}renderResourceHeaderText(){const o=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],l=[];for(let C=0,L=o.groupOrder.length;C<L;C++){const q=this.resourceCollection[C],X=q.dataSource.filter(Ve=>Ve[q.idField]===o.groupOrder[C]),he=(0,E.az)("div",{className:R,innerHTML:X[0][q.textField]});l.push(he);const He=(0,E.az)("div",{className:"e-icons e-icon-next"});l.push(He)}l.pop();const y=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector("."+au);yr(y);for(const C of l)y.appendChild(C);1===this.lastResourceLevel.length&&(0,E.cn)([this.parent.element.querySelector("."+Lh)],zs)}menuClick(o){if(this.parent.element.querySelector("."+Fh).classList.contains(M))this.treePopup.hide(),(0,E.IV)([this.popupOverlay],Qr);else{const l=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));(0,E.IV)(l,"e-active"),(0,E.cn)([l[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),(0,E.cn)([this.popupOverlay],Qr)}}selectResourceByIndex(o){this.lastResourceLevel&&o>-1&&o<this.lastResourceLevel.length&&this.triggerEvents(o)}resourceClick(o){if(!o.node.classList.contains("e-has-child")){this.treePopup.hide(),(0,E.IV)([this.popupOverlay],Qr);const d=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)")).indexOf(o.node);this.triggerEvents(d,o),o.event.preventDefault()}}triggerEvents(o,l){let d={cancel:!1,event:l?l.event:null,groupIndex:o,requestType:"resourceChange"};this.parent.trigger(Xi,d,y=>{y.cancel||(this.parent.uiStateValues.groupIndex=y.groupIndex,this.parent.renderModule.render(this.parent.currentView),d={cancel:!1,event:l?l.event:null,groupIndex:this.parent.uiStateValues.groupIndex,requestType:"resourceChanged"},this.parent.trigger(Ls,d))})}documentClick(o){if((0,E.oq)(o.event.target,"."+Fh))return;const l=this.parent.element.querySelector("."+Fh);l&&l.classList.contains(M)&&(this.treePopup.hide(),(0,E.IV)([this.popupOverlay],Qr))}bindResourcesData(o){this.parent.showSpinner();const l=[];for(const d of this.parent.resources){const y=new cu(d.dataSource,d.query);l.push(y.getData(y.generateQuery()))}Promise.all(l).then(d=>this.dataManagerSuccess(d,o)).catch(d=>this.parent.crudModule.dataManagerFailure(d))}dataManagerSuccess(o,l){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.parent.resourceCollection=[];for(let d=0,y=o.length;d<y;d++){const L=this.getResourceModel(this.parent.resources[d],o[d].result);this.parent.resourceCollection.push(L)}this.refreshLayout(l)}}getResourceModel(o,l){return{field:o.field,title:o.title,name:o.name,allowMultiple:o.allowMultiple,dataSource:l||o.dataSource,idField:o.idField,textField:o.textField,groupIDField:o.groupIDField,colorField:o.colorField,startHourField:o.startHourField,endHourField:o.endHourField,workDaysField:o.workDaysField,expandedField:o.expandedField,cssClassField:o.cssClassField}}refreshLayout(o){((0,E.le)(this.parent.uiStateValues.groupIndex)||!this.parent.enablePersistence)&&(this.parent.uiStateValues.groupIndex=0),this.parent.renderElements(o)}setResourceCollection(){let o=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(const d of this.parent.activeViewOptions.group.resources){const y=Ro(this.parent.resourceCollection,"name",d);y>=0&&o.push(this.parent.resourceCollection[y])}else this.parent.resourceCollection.length>0&&(o=this.parent.resourceCollection);let l=0;for(const d of o){const y=this.getResourceModel(d);d.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=l),l++,this.resourceCollection.push(y)}(0,E.le)(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)}generateResourceLevels(o,l){const y=[];let C=[];const L=(q,X,he,He,Ve)=>{const nt=[],It=q[0];if(It){let vt;if(He&&this.parent.activeViewOptions.group.byGroupID){const mi=He[he.idField];vt=It.dataSource.filter(Ni=>Ni[It.groupIDField]===mi)}else vt=It.dataSource;for(let mi=0;mi<vt.length;mi++){let Ni=[];Ve&&Ve.length>0&&(Ni=Ni.concat(Ve)),Ni.push(vt[mi][It.idField]);const Ki=L(q.slice(1),X+1,It,vt[mi],Ni);if(0===X&&0===Ki.length&&this.resourceCollection.length>1)continue;let Js,Ts=[],Hs=this.parent.activeView.renderDates;if(!this.parent.activeViewOptions.group.byDate&&X+1===this.resourceCollection.length){const Fr=vt[mi][It.workDaysField],lo=vt[mi][It.startHourField],kr=vt[mi][It.endHourField];Fr&&Fr.length>0?(Hs=this.parent.activeView.getRenderDates(Fr),Js=Fr,Ts=this.parent.activeView.getDateSlots(Hs,Fr)):(Js=this.parent.activeViewOptions.workDays,Ts=o);const Mo=this.generateCustomHours(Ts,lo,kr,Ni);C=C.concat(Mo)}nt.push({type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:X,groupOrder:Ni,resource:It,resourceData:vt[mi],colSpan:this.parent.activeViewOptions.group.byDate?1:Ts.length,renderDates:Hs,workDays:Js,cssClass:vt[mi][It.cssClassField],child:Ki})}return y[X]||(y[X]=[]),nt.length>0&&y[X].push(nt),nt}return[]};return this.resourceTreeLevel=L(this.resourceCollection,0),l?[]:this.generateHeaderLevels(y,C,o)}generateCustomHours(o,l,d,y){const C=(0,E.l7)([],o,null,!0);for(const L of C)l&&(L.startHour=this.parent.getStartEndTime(l)),d&&(L.endHour=this.parent.getStartEndTime(d)),y&&(L.groupOrder=y);return C}generateHeaderLevels(o,l,d){const y=[];for(let he=o.length-1;he>=0;he--){let He=0;for(const Ve of o[he])for(const nt of Ve){if(o[he+1]&&o[he+1].length>0){const It=o[he+1][He];if(!It)continue;let vt=0;for(const mi of It)(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&mi.resourceData[mi.resource.groupIDField]===nt.resourceData[nt.resource.idField])&&(vt+=mi.colSpan);nt.colSpan=vt}nt.groupIndex=He,He++,y[nt.resourceLevelIndex]=y[nt.resourceLevelIndex]||[],y[nt.resourceLevelIndex].push(nt)}}if(this.lastResourceLevel=y.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){let he=0;for(const He of this.lastResourceLevel)for(let Ve=0;Ve<He.colSpan;Ve++)l[he].groupIndex=He.groupIndex,he++;return y.push(l),y}const C=[],L=(0,E.l7)([],y,null,!0);let q=0;for(const he of L[0])q+=he.colSpan;const X=[];for(const he of d){he.colSpan=q,X.push(he);const He=(0,E.l7)([],L,null,!0);for(let Ve=0,nt=He.length;Ve<nt;Ve++){if(Ve===He.length-1)for(const It of He[Ve])It.date=he.date,It.workDays=he.workDays,It.startHour=this.parent.getStartEndTime(It.resourceData[It.resource.startHourField])||he.startHour,It.endHour=this.parent.getStartEndTime(It.resourceData[It.resource.endHourField])||he.endHour;C[Ve]||(C[Ve]=[]),C[Ve]=C[Ve].concat(He[Ve])}}return C.unshift(X),C}setResourceValues(o,l){const d=(y,C,L)=>{o[C]=this.resourceCollection[y].allowMultiple&&this.parent.activeViewOptions.group.allowGroupEdit?[L]:L};if(void 0===l&&(l=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!(0,E.le)(l)){const y=this.lastResourceLevel[l].groupOrder;for(let C=0;C<this.resourceCollection.length;C++)d(C,this.resourceCollection[C].field,y[C])}else if(this.parent.resourceCollection.length>0)for(let y=0;y<this.resourceCollection.length;y++){const C=this.resourceCollection[y].dataSource[0];C&&d(y,this.resourceCollection[y].field,C[this.resourceCollection[y].idField])}}getResourceColor(o,l){const d=!(0,E.le)(l)&&this.colorIndex>l.length-1?l.length-1:this.colorIndex,y=this.resourceCollection[d];if((0,E.le)(l)&&this.parent.activeViewOptions.group.allowGroupEdit&&y.allowMultiple)return;const C=(0,E.le)(l)?o[y.field]:l[d],L=this.filterData(y.dataSource,y.idField,C);return L.length>0?L[0][y.colorField]:void 0}getCssClass(o){const l=this.resourceCollection.slice(-1)[0];if(this.parent.activeViewOptions.group.allowGroupEdit&&l.allowMultiple)return;const d=this.filterData(l.dataSource,l.idField,o[l.field]);return d.length>0?d[0][l.cssClassField]:void 0}getResourceRenderDates(){const d=[].concat.apply([],this.lastResourceLevel.map(y=>y.renderDates)).filter((C,L,q)=>q.map(X=>X.getTime()).indexOf(C.getTime())===L);return d.sort((y,C)=>y.getTime()-C.getTime()),d}filterData(o,l,d){return o.filter(y=>y[l]===d)}getResourceData(o,l,d){if(this.parent.activeViewOptions.group.allowGroupEdit){const y={};for(const C of d){const L=this.lastResourceLevel[C].groupOrder;for(let q=0,X=L.length;q<X;q++){const he=this.resourceCollection[q].field;(0,E.le)(y[he])&&(y[he]=[]),y[he].push(L[q])}}o=(0,E.l7)(o,y)}else for(let y=0,C=this.resourceCollection.length;y<C;y++)this.lastResourceLevel[l]&&(o[this.resourceCollection[y].field]=this.lastResourceLevel[l].groupOrder[y])}addResource(o,l,d){const y=o instanceof Array?o:[o];for(const C of this.parent.resourceCollection)if(C.name===l){y.forEach((L,q)=>new ns.hm({json:C.dataSource}).insert(L,null,null,d+q));break}this.refreshLayout(!0)}removeResource(o,l){const d=o instanceof Array?o:[o];for(const y of this.parent.resourceCollection)if(y.name===l){d.forEach(C=>new ns.hm({json:y.dataSource}).remove(y.idField,C));break}this.refreshLayout(!0)}getIndexFromResourceId(o,l,d,y,C){if(l=l||this.parent.resourceCollection.slice(-1)[0].name,(0,E.le)(d)&&(d=this.resourceCollection.filter(q=>q.name===l)[0],(0,E.le)(d)))return null;const L=d.dataSource.filter(q=>y&&q[d.idField]===o?q[d.groupIDField]===y[C]?q[d.idField]===o:null:q[d.idField]===o)[0];return this.lastResourceLevel.map(q=>q.resourceData).indexOf(L)}resourceExpand(o,l,d){const y=this.parent.resourceCollection.filter(X=>X.name===l?X:null)[0];let C=0;const L=y.dataSource.filter(X=>X[y.idField]===o)[0];C=this.parent.activeViewOptions.group.byGroupID?this.lastResourceLevel.map(X=>X.resourceData).indexOf(L):this.getIndexFromResourceId(o,l,y);const q=this.parent.element.querySelector(`.e-resource-column-wrap [data-group-index="${C}"] .e-resource-tree-icon`);q&&(q.classList.contains(Xs)&&!d||q.classList.contains(Jn)&&d)&&q.click()}resourceScroll(o,l){if(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)return;const d=l||this.parent.resourceCollection.slice(-1)[0].name;let y=this.parent.resourceCollection.length-1;const C=this.parent.resourceCollection.filter((X,he)=>X.name===d?(y=he,X):null)[0],L=this.parent.element.querySelector("."+ee);let q=0;if(this.parent.activeView.isTimelineView()){if(this.parent.activeViewOptions.group.byGroupID){const X=C.dataSource.filter(he=>he[C.idField]===o)[0];q=this.lastResourceLevel.map(he=>he.resourceData).indexOf(X)}else q=this.getIndexFromResourceId(o,d,C);if(this.parent.virtualScrollModule){const X=this.parent.element.querySelector("."+te),he=Math.round(X.offsetHeight/this.expandedResources.length);if(this.parent.rowAutoHeight&&(L.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),L.scrollTop=q*he-(this.parent.virtualScrollModule.bufferCount-1)*he,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight){const He=this.parent.element.querySelector(`.${xi}[data-group-index="${q}"]`);He&&!He.parentElement.classList.contains(Zl)&&(L.scrollTop=L.scrollTop<He.offsetTop?He.offsetTop:L.scrollTop+He.offsetTop)}else L.scrollTop=q*he}else{const X=this.parent.element.querySelector(`.${xi}[data-group-index="${q}"]`);X&&!X.parentElement.classList.contains(Zl)&&(L.scrollTop=X.offsetTop)}}else{q=this.parent.activeViewOptions.group.byGroupID?d===this.parent.resourceCollection.slice(-1)[0].name?this.lastResourceLevel.map(He=>He.resourceData[C.idField]).indexOf(o):C.dataSource.map(He=>He[C.idField]).indexOf(o):this.getIndexFromResourceId(o,d,C);const X=this.parent.element.querySelector(`.${No}:nth-child(${y+1})`),he=[].slice.call(X.children).map(He=>He.offsetLeft);L.scrollLeft=he[q]}}destroy(){this.parent.off($n,this.documentClick),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,(0,E.Od)(this.parent.element.querySelector("."+Fh)),(0,E.Od)(this.parent.element.querySelector("."+Yu)));const o=this.parent.element.querySelector("."+Rn);o&&(0,E.Od)(o)}}var kn=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C};let vp=(()=>{let ae=class extends E.wA{constructor(l,d){super(l,d)}render(){const l=[],d=[];if(l.push(uo),this.enableRtl?l.push($s):d.push($s),this.isAdaptive?l.push(mn):d.push(mn),this.allowMultiDrag?l.push(tr):d.push(tr),this.cssClass){const y=this.cssClass.split(" ");for(const C of y)l.push(C)}(0,E.s1)(this.element,l,d),this.validateDate(),(0,_e.rj)({target:this.element}),this.scrollModule=new Pd(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new mp(this),this.eventBase=new op(this),this.workCellAction=new Kd(this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new Jp(this)),this.inlineModule=new Fc(this),this.initializeDataModule(),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources(),this.wireEvents()}renderTableContainer(){this.element.querySelector("."+ur)||this.element.appendChild(this.createElement("div",{className:ur}))}renderTemplates(){this.isReact&&this.renderReactTemplates()}resetTemplates(l){(this.isAngular||this.isReact)&&this.clearTemplate(l)}initializeResources(l=!1){this.resources.length>0?(this.resourceBase=new yp(this),this.resourceBase.bindResourcesData(l)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(l))}renderElements(l){if(l)return this.initializeView(this.currentView),void this.eventWindow.refresh();this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new Fd(this)),this.renderTableContainer(),(E.AR.isDevice||E.AR.isTouch)&&(this.scheduleTouchModule=new nd(this)),this.initializeView(this.currentView),this.destroyPopups(),this.isPrinting||this.initializePopups()}validateDate(l=this.selectedDate){let d=l instanceof Date?new Date(l.getTime()):new Date(l);const y=this.minDate instanceof Date?new Date(this.minDate.getTime()):new Date(this.minDate),C=this.maxDate instanceof Date?new Date(this.maxDate.getTime()):new Date(this.maxDate);if(!(y<=C))throw Error("minDate should be equal or less than maxDate");d<y&&(d=y),d>C&&(d=C),this.setProperties({selectedDate:new Date(""+d),minDate:new Date(""+y),maxDate:new Date(""+C)},!0),this.eventWindow&&this.eventWindow.updateMinMaxDateToEditor()}getViewIndex(l){for(let d=0;d<this.viewCollections.length;d++)if(this.viewCollections[d].option===l)return d;return-1}setViewOptions(l=!1){let d,y;this.viewOptions={},this.viewCollections=[];const C=this.viewIndex;let L=0;this.viewIndex=-1;for(const q of this.views){const X="string"!=typeof q;"string"==typeof q?(d=q,this.currentView===d&&(y=d,this.viewIndex=L)):(d=q.option,q.isSelected&&(y=d,this.viewIndex=L));const he=(0,E.l7)({option:d},X?q:{}),He=d.charAt(0).toLowerCase()+d.slice(1);he.cellHeaderTemplateName=he.cellHeaderTemplate?he.option:"",he.dateHeaderTemplateName=he.dateHeaderTemplate?he.option:"",he.cellTemplateName=he.cellTemplate?he.option:"",he.dayHeaderTemplateName=he.dayHeaderTemplate?he.option:"",he.monthHeaderTemplateName=he.monthHeaderTemplate?he.option:"",he.resourceHeaderTemplateName=he.resourceHeaderTemplate?he.option:"",he.headerIndentTemplateName=he.headerIndentTemplate?he.option:"",he.eventTemplateName=he.eventTemplate?he.option:"",!(0,E.le)(he.firstDayOfWeek)&&0===he.firstDayOfWeek&&delete he.firstDayOfWeek,!(0,E.le)(he.interval)&&1===he.interval&&delete he.interval,this.viewCollections.push(he),(0,E.le)(this.viewOptions[He])?this.viewOptions[He]=[he]:this.viewOptions[He].push(he),L++}if(!l&&y&&this.setProperties({currentView:y},!0),-1===this.viewIndex){const q=this.getViewIndex(this.currentView);this.viewIndex="string"==typeof this.views[0]||(0,E.le)(C)||-1===C?-1===q?0:q:C}}getActiveViewOptions(){const l={enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},y={byDate:!(this.viewCollections[this.viewIndex].option.indexOf("Year")>-1)&&this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView},q=this.viewCollections[this.viewIndex],X=(0,E.l7)({dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,cellHeaderTemplate:this.cellHeaderTemplate,dayHeaderTemplate:this.dayHeaderTemplate,monthHeaderTemplate:this.monthHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,headerIndentTemplate:this.headerIndentTemplate,firstMonthOfYear:this.firstMonthOfYear,firstDayOfWeek:this.firstDayOfWeek,workDays:this.viewCollections[this.viewIndex].workDays?[]:this.workDays,monthsCount:this.monthsCount,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:l,timeFormat:this.internalTimeFormat,group:y,headerRows:this.headerRows,orientation:"Horizontal",numberOfWeeks:0,displayDate:null},q,void 0,!0);return 0!==this.firstDayOfWeek&&q.firstDayOfWeek&&this.firstDayOfWeek!==q.firstDayOfWeek&&(X.firstDayOfWeek=this.firstDayOfWeek),X.displayDate&&(X.displayDate=X.displayDate instanceof Date?new Date(X.displayDate.getTime()):new Date(X.displayDate)),X}initializeDataModule(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new cu(this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new oh(this)}setEditorTitles(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}}initializeView(l){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(l)}initializeTemplates(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer)}initializePopups(){this.eventWindow=new bd(this),this.quickPopup=new hd(this)}getDayNames(l){const d=[];let y,C="";"en"===this.locale||"en-US"===this.locale?(C="days.stand-alone.",y=(0,E.NA)(C+l,(0,E.bD)(this.getCalendarMode()))):(C="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+l,y=(0,E.NA)(C,E.qV));for(const L of Object.keys(y))d.push((0,E.NA)(L,y));return d}setCldrTimeFormat(){this.internalTimeFormat=(0,E.le)(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?(0,E.NA)("timeFormats.short",(0,E.bD)(this.getCalendarMode())):(0,E.NA)("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",E.qV):this.timeFormat}getCalendarMode(){return this.calendarMode.toLowerCase()}getTimeString(l){return this.globalize.formatDate(l,{format:this.activeViewOptions.timeFormat,type:"time",calendar:this.getCalendarMode()}).toLocaleUpperCase()}getDateTime(l){return l instanceof Date?new Date(l.getTime()):new Date(l)}setCalendarMode(){this.calendarUtil="Islamic"===this.calendarMode?new mh:new rd}changeView(l,d,y,C){if((0,E.le)(C)&&(C=this.getViewIndex(l)),!y&&C===this.viewIndex&&this.currentView===l||C<0)return;this.viewIndex=C;let L={requestType:"viewNavigate",cancel:!1,event:d};this.trigger(Xi,L,q=>{q.cancel||this.trigger(Rs,{action:"view",cancel:!1,currentDate:this.selectedDate,previousView:this.currentView,currentView:l,viewIndex:this.viewIndex},he=>{he.cancel||(this.viewIndex=he.viewIndex,this.setProperties({currentView:l},!0),this.headerModule&&(this.headerModule.updateActiveView(),this.headerModule.setCalendarDate(this.selectedDate),this.headerModule.setCalendarView()),this.initializeView(this.currentView),this.animateLayout(),L={requestType:"viewNavigate",cancel:!1,event:d},this.trigger(Ls,L))})})}changeDate(l,d){let y={requestType:"dateNavigate",cancel:!1,event:d};this.trigger(Xi,y,C=>{C.cancel||this.trigger(Rs,{action:"date",cancel:!1,previousDate:this.selectedDate,currentDate:l},q=>{q.cancel||(this.uiStateValues.isInitial=!!this.activeView.isTimelineView()||this.uiStateValues.isInitial,this.validateDate(q.currentDate),this.headerModule&&this.headerModule.setCalendarDate(q.currentDate),this.initializeView(this.currentView),this.animateLayout(),y={requestType:"dateNavigate",cancel:!1,event:d},this.trigger(Ls,y))})})}isMinMaxDate(l=this.selectedDate){return l.getTime()>=this.minDate.getTime()&&l.getTime()<=this.maxDate.getTime()}isSelectedDate(l){return l.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)}getCurrentTime(l=new Date){return this.timezone?this.tzModule.convert(l,this.tzModule.getLocalTimezoneName(),this.timezone):l}getNavigateView(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView||"TimelineYear"===this.currentView?"TimelineDay":"Agenda":"Day"}animateLayout(){!this.activeView.element||new E.fw({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)}requiredModules(){const l=[];this.setViewOptions(!0);for(let d of Object.keys(this.viewOptions))d="timelineDay"===d||"timelineWeek"===d||"timelineWorkWeek"===d?"timelineViews":d,l.push({member:d,args:[this]});return this.allowDragAndDrop&&l.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&l.push({member:"resize",args:[this]}),l.push({member:"excelExport",args:[this]}),l.push({member:"iCalendarExport",args:[this]}),l.push({member:"iCalendarImport",args:[this]}),l.push({member:"print",args:[this]}),l}preRender(){this.isAdaptive=E.AR.isDevice||function Yr(){return window.navigator.userAgent.toLowerCase().indexOf("ipad")>-1}(),this.globalize=new E.eC(this.locale),this.tzModule=new $u,(this&&(0,E.le)(this.uiStateValues)||!this.enablePersistence)&&(this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0,isResize:!1}),this.activeCellsData={startTime:this.getCurrentTime(),endTime:this.getCurrentTime(),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new E.E7(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()}getDefaultLocale(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",occurenceAlert:"Cannot reschedule an occurrence of the recurring appointment if it skips over a later occurrence of the same appointment.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",ok:"Ok",yes:"Yes",no:"No",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At",expandAllDaySection:"Expand-all-day-section",collapseAllDaySection:"Collapse-all-day-section",searchTimezone:"Search Timezone",noRecords:"No records found"}}wireEvents(){E.bi.add(window,"resize",this.onScheduleResize,this),E.bi.add(window,"orientationchange",this.onScheduleResize,this),E.bi.add(document,E.AR.touchStartEvent,this.onDocumentClick,this)}removeSelectedClass(){const l=this.getSelectedElements();for(const d of l)d.setAttribute("aria-selected","false"),d.removeAttribute("tabindex");(0,E.IV)(l,zr)}addSelectedClass(l,d,y){for(const C of l)C.setAttribute("aria-selected","true");(0,E.cn)(l,zr),d&&(d.setAttribute("tabindex","0"),d.focus({preventScroll:y||!1}))}selectCell(l){this.removeSelectedClass(),this.addSelectedClass([l],l)}getAllDayRow(){return this.element.querySelector("."+Pn)}getContentTable(){return this.activeView.element.querySelector("."+ks+" tbody")}getTableRows(){return[].slice.call(this.element.querySelectorAll("."+ks+" tbody tr:not(."+Zl+")"))}getWorkCellElements(){return[].slice.call(this.element.querySelectorAll("."+xi))}getIndexOfDate(l,d){return l.map(Number).indexOf(+d)}isAllDayCell(l){return!!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||l.classList.contains(qs)||l.classList.contains(Ce)||!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)}getDateFromElement(l){let d;if((0,E.le)(l)||(d=l.getAttribute("data-date")),!(0,E.le)(d)){const y=parseInt(d,10);return new Date(y)}}getTargetElement(l,d,y){const C=document.elementFromPoint(d,y);let L;return C&&(L=C.closest(l)),L?[L]:null}getCellHeaderTemplate(){return this.cellHeaderTemplateFn}getDayHeaderTemplate(){return this.dayHeaderTemplateFn}getMonthHeaderTemplate(){return this.monthHeaderTemplateFn}getCellTemplate(){return this.cellTemplateFn}getDateHeaderTemplate(){return this.dateHeaderTemplateFn}getMajorSlotTemplate(){return this.majorSlotTemplateFn}getMinorSlotTemplate(){return this.minorSlotTemplateFn}getAppointmentTemplate(){return this.appointmentTemplateFn}getEventTooltipTemplate(){return this.eventTooltipTemplateFn}getHeaderTooltipTemplate(){return this.headerTooltipTemplateFn}getEditorTemplate(){return this.editorTemplateFn}getQuickInfoTemplatesHeader(){return this.quickInfoTemplatesHeaderFn}getQuickInfoTemplatesContent(){return this.quickInfoTemplatesContentFn}getQuickInfoTemplatesFooter(){return this.quickInfoTemplatesFooterFn}getResourceHeaderTemplate(){return this.resourceHeaderTemplateFn}getHeaderIndentTemplate(){return this.headerIndentTemplateFn}getCssProperties(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"}}removeNewEventElement(){const l=this.element.querySelector("."+Ht);(0,E.le)(l)||(0,E.Od)(l)}getStartEndTime(l){if(!(0,E.le)(l)&&""!==l){const d=Bi(this.getCurrentTime()),y=l.split(":");return 2===y.length&&d.setHours(parseInt(y[0],10),parseInt(y[1],10),0),d}return null}onDocumentClick(l){this.notify($n,{event:l})}onScheduleResize(){(0,E.le)(this.activeView)||(this.isAdaptive||function ol(){return window.navigator.userAgent.toLowerCase().indexOf("mobi")>-1}())&&document.activeElement&&document.activeElement.classList.contains(El)||(this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime(),this.quickPopup&&this.quickPopup.onClosePopup(),"Month"===this.currentView||"Agenda"!==this.currentView&&"MonthAgenda"!==this.currentView&&!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()?(this.uiStateValues.isResize=!0,this.activeView.resetColWidth(),this.notify(ln,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.refreshEvents(!1),this.uiStateValues.isResize=!1):this.notify(rs,{}))}templateParser(l){if(l)try{if(document.querySelectorAll(l).length)return(0,E.MY)(document.querySelector(l).innerHTML.trim())}catch{return(0,E.MY)(l)}}getAnnouncementString(l,d){let y;if(this.quickPopup&&this.activeViewOptions.group.resources.length>0){const He='"s event - ';y=this.quickPopup.getResourceText({event:l},"event")+He}const C=d||l[this.eventFields.subject]||this.eventSettings.fields.subject.default,L="full",q=this.globalize.formatDate(l[this.eventFields.startTime],{type:"dateTime",skeleton:L,calendar:this.getCalendarMode()}),X=this.globalize.formatDate(l[this.eventFields.endTime],{type:"dateTime",skeleton:L,calendar:this.getCalendarMode()});let he=C+" "+this.localeObj.getConstant("beginFrom")+" "+q+" "+this.localeObj.getConstant("endAt")+" "+X;return y&&(he=y+" "+he),he}boundaryValidation(l,d){const C={left:!1,right:!1,top:!1,bottom:!1},L=this.element.querySelector("."+ee).getBoundingClientRect();return l<L.top+30+window.pageYOffset&&l>L.top+window.pageYOffset&&(C.top=!0),l>L.bottom-30+window.pageYOffset&&l<L.bottom+window.pageYOffset&&(C.bottom=!0),d<L.left+30+window.pageXOffset&&d>L.left+window.pageXOffset&&(C.left=!0),d>L.right-30+window.pageXOffset&&d<L.right+window.pageXOffset&&(C.right=!0),C}getWeekNumberContent(l){let d;if("FirstDay"===this.weekRule){const y=Nr(l.slice(-1)[0],this.firstDayOfWeek);d=this.globalize.formatNumber(_r(y))}else if("FirstFourDayWeek"===this.weekRule){const L=function Ur(ae,o){return new Date(o.valueOf()-(o.valueOf()-ae.valueOf())/2)}(Jr(l.slice(-1)[0],this.firstDayOfWeek),Nr(l.slice(-1)[0],this.firstDayOfWeek));d=this.globalize.formatNumber(_r(L))}else if("FirstFullWeek"===this.weekRule){const y=Jr(l.slice(-1)[0],this.firstDayOfWeek);d=this.globalize.formatNumber(_r(y))}return d}renderHeaderIndentTemplate(l,d){if(this.activeViewOptions.headerIndentTemplate){const L=this.element.id+"_"+this.activeViewOptions.headerIndentTemplateName+"headerIndentTemplate",q=[].slice.call(this.getHeaderIndentTemplate()(l,this,"headerIndentTemplate",L,!1));(0,E.R3)(q,d)}}unWireEvents(){E.bi.remove(window,"resize",this.onScheduleResize),E.bi.remove(window,"orientationchange",this.onScheduleResize),E.bi.remove(document,E.AR.touchStartEvent,this.onDocumentClick)}getModuleName(){return"schedule"}getPersistData(){return this.addOnPersist(["currentView","selectedDate","scrollTop","scrollLeft"])}onPropertyChanged(l,d){if(this.isReact&&(0,E.le)(this.activeView))return;const y={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1};for(const C of Object.keys(l))switch(C){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),y.isView=!0;break;case"currentView":y.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":y.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange(this.activeView.getDateRangeText());break;case"showHeaderBar":this.destroyHeaderModule(),l.showHeaderBar&&(this.headerModule=new Fd(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),this.notify(ln,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.refreshEvents(!1);break;case"showWeekend":case"workDays":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":case"rowAutoHeight":y.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new E.eC(this.locale),this.localeObj=new E.E7(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),y.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=l.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),y.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=l.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),y.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=l.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),y.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=l.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),y.isLayout=!0;break;case"dayHeaderTemplate":this.activeViewOptions.dayHeaderTemplate=l.dayHeaderTemplate,this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),y.isLayout=!0;break;case"monthHeaderTemplate":this.activeViewOptions.monthHeaderTemplate=l.monthHeaderTemplate,this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),y.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=l.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),y.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(d.timezone),this.headerModule.setCalendarTimezone();break;case"enableRtl":this.setRtlClass(),y.isRefresh=!0;break;default:this.extendedPropertyChange(C,l,d,y)}this.propertyChangeAction(y)}propertyChangeAction(l){l.isRefresh?this.refresh():l.isResource?this.initializeResources(!0):l.isView?this.changeView(this.currentView,null,!0):l.isDate?this.changeDate(this.selectedDate):l.isLayout?this.initializeView(this.currentView):l.isDataManager&&this.crudModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",(0,E.IV)([this.element],_t)),this.crudModule.refreshDataManager())}allDayRowScrollUpdate(){const l=this.element.querySelector("."+$),d=this.element.querySelector("."+Pn);if("auto"!==this.height&&this.enableAllDayScroll)l.classList.contains(ih)&&(0,E.IV)([l],ih),this.eventBase.allDayExpandScroll(l);else if((0,E.cn)([l],ih),l.classList.contains(Ha)&&(0,E.IV)([l],Ha),this.uiStateValues.expand){const y=[].slice.call(this.element.querySelectorAll("."+qs));y[0].style.height=d.style.height?d.style.height:y[1].style.height}this.uiStateValues.expand||(d.style.height="")}extendedPropertyChange(l,d,y,C){switch(l){case"width":case"height":case"enableAllDayScroll":["Day","Week","WorkWeek"].indexOf(this.currentView)>-1&&this.allDayRowScrollUpdate(),this.notify(qn,{module:"scroll",properties:{width:d.width,height:d.height}});break;case"cssClass":y.cssClass&&(0,E.IV)([this.element],y.cssClass.split(" ")),d.cssClass&&(0,E.cn)([this.element],d.cssClass.split(" "));break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),C.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(d.eventSettings,y.eventSettings,C);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),d.allowKeyboardInteraction&&(this.keyboardInteractionModule=new Jp(this));break;case"timezoneDataSource":this.eventWindow&&this.eventWindow.refresh();break;case"editorTemplate":(0,E.le)(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(d.group,y.group,C);break;case"resources":C.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=d.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=d.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),C.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":case"eventDragArea":this.refreshEvents(!1);break;case"weekRule":C.isLayout=!0;break;case"firstMonthOfYear":this.activeViewOptions.firstMonthOfYear=d.firstMonthOfYear,this.viewIndex=this.activeView.viewIndex,C.isLayout=!0;break;case"monthsCount":this.activeViewOptions.monthsCount=d.monthsCount,this.viewIndex=this.activeView.viewIndex,C.isLayout=!0;break;case"timeFormat":this.internalTimeFormat=d.timeFormat||this.activeViewOptions.timeFormat,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),C.isLayout=!0;break;case"enableAdaptiveUI":this.showHeaderBar&&this.headerModule&&(this.destroyHeaderModule(),this.headerModule=new Fd(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),C.isLayout=!0;break;case"headerIndentTemplate":this.activeViewOptions.headerIndentTemplate=d.headerIndentTemplate,this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),C.isLayout=!0}}setRtlClass(){this.enableRtl?(0,E.cn)([this.element],"e-rtl"):(0,E.IV)([this.element],"e-rtl")}onGroupSettingsPropertyChanged(l,d,y){for(const C of Object.keys(l))"headerTooltipTemplate"===C?this.headerTooltipTemplateFn=this.templateParser(l[C]):(y.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())}onEventSettingsPropertyChanged(l,d,y){for(const C of Object.keys(l))switch(C){case"dataSource":case"query":case"fields":this.initializeDataModule(),y.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=l.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),y.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),l.enableTooltip&&(this.eventTooltip=new Pc(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),y.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.showHeaderBar&&this.headerModule&&this.headerModule.updateAddIcon(),this.eventWindow&&this.eventWindow.refresh();break;case"spannedEventPlacement":case"minimumEventDuration":case"enableMaxHeight":case"enableIndicator":this.refreshEvents(!1);break;case"ignoreWhitespace":y.isLayout=!0}}destroyHeaderModule(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)}destroyPopups(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)}showSpinner(){(0,_e.yh)(this.element)}hideSpinner(){(0,_e.v3)(this.element)}setWorkHours(l,d,y,C){let L=[];L=this.getWorkHourCells(l,d,y,C),(0,E.cn)(L,v)}resetWorkHours(l=this.activeView.renderDates,d,y,C){if(l&&d&&y){const L=this.getWorkHourCells(l,d,y,C);(0,E.IV)(L,v)}else{const L=[].slice.call(this.element.querySelectorAll("."+v));(0,E.IV)(L,v)}}getWorkHourCells(l,d,y,C){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];let L=this.getStartEndTime(d),q=this.getStartEndTime(y);const X=this.getContentTable();if((0,E.le)(L)||(0,E.le)(q)||!X)return[];L.setMilliseconds(0),q.setMilliseconds(0);const he=this.activeView.getStartHour();L<he&&(L=he);const He=this.activeView.getEndHour();q>He&&(q=He);const nt=this.activeViewOptions.timeScale.interval*wr/this.activeViewOptions.timeScale.slotCount;let It=Math.round((L.getTime()-he.getTime())/nt),vt=Math.ceil((q.getTime()-he.getTime())/nt);const mi=It,Ni=vt,Ki=[];for(let Ts of l){Ts=this.getDateTime(Ts),Bi(Ts);let Hs=this.activeView.renderDates;!(0,E.le)(C)&&this.resourceBase&&!this.activeView.isTimelineView()&&(Hs=this.resourceBase.lastResourceLevel[C].renderDates);const Js=this.getIndexOfDate(Hs,Ts);if(Js>=0){if(this.activeView.isTimelineView()){const Fn=Math.round((He.getTime()-he.getTime())/nt);It=mi+Js*Fn,vt=Ni+Js*Fn}for(let Fn=It;Fn<vt;Fn++)if(this.activeView.isTimelineView()){const Hn=(0,E.le)(C)?0:C;Ki.push(X.rows[Hn].cells[Fn])}else if((0,E.le)(C))Ki.push(X.rows[Fn].cells[Js]);else{const Fr=[].slice.call(X.rows[Fn].querySelectorAll("."+xi+'[data-group-index="'+C+'"]'));Ki.push(Fr[Js])}}}return Ki}getCellDetails(l){const d=l instanceof Array?l:[l],y=(0,E.sb)(d[0]),C=(0,E.sb)(d.slice(-1)[0]),L=this.getDateFromElement(y);let q=this.getDateFromElement(C);if((0,E.le)(L)||(0,E.le)(q))return;const X=this.activeView.isTimelineView()&&!(0,E.le)(C.getAttribute("colSpan"))&&this.headerRows.length>0,he=X?parseInt(C.getAttribute("colSpan"),10):1;q=!this.activeViewOptions.timeScale.enable||X||C.classList.contains(qs)||C.classList.contains(Ce)?os(new Date(q.getTime()),he):this.activeView.getEndDateFromStartDate(q);const He={startTime:L,endTime:q,isAllDay:this.isAllDayCell(y),element:l},Ve=y.getAttribute("data-group-index");return(0,E.le)(Ve)||(He.groupIndex=parseInt(Ve,10)),He}getSelectedElements(){return[].slice.call(this.element.querySelectorAll("."+zr))}getResourceCollections(){return this.resourceCollection}setResourceCollections(l){this.setProperties({resources:l},!1)}changeCurrentView(l,d){let y=this.getViewIndex(l);const C=l.charAt(0).toLowerCase()+l.slice(1),L=this.viewOptions[C];L&&(y=this.viewCollections.indexOf(L[d||0])),-1!==y&&y!==this.viewIndex&&this.changeView(l,null,null,y)}getCurrentViewIndex(){return this.viewIndex}getResourcesByIndex(l){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(l<0||l>=this.resourceBase.lastResourceLevel.length)return;const d=this.resourceBase.lastResourceLevel[l],y={};return this.resourceBase.setResourceValues(y,l),{resource:d.resource,resourceData:d.resourceData,groupData:y}}}expandResource(l,d){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(l,d,!1)}collapseResource(l,d){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(l,d,!0)}scrollTo(l,d){this.activeView.scrollToDate&&(0,E.le)(l)&&d?this.activeView.scrollToDate(d):this.activeView.scrollToHour&&this.activeView.scrollToHour(l,d)}scrollToResource(l,d){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(l,d)}exportToICalendar(l,d){if(!this.iCalendarExportModule)throw Error("Inject ICalendarExport module");this.iCalendarExportModule.initializeCalendarExport(l,d)}importICalendar(l){if(!this.iCalendarImportModule)throw Error("Inject ICalendarImport module");this.iCalendarImportModule.initializeCalendarImport(l)}addEvent(l){this.crudModule.addEvent(l)}exportToExcel(l){if(!this.excelExportModule)throw Error("Inject ExcelExport module");this.excelExportModule.initializeExcelExport(l)}print(l){if(!this.printModule)throw Error("Inject Print module");this.printModule.print(l)}saveEvent(l,d){this.crudModule.saveEvent(l,d)}deleteEvent(l,d){this.crudModule.deleteEvent(l,d)}getEvents(l,d,y){let C=[];return C=y?this.eventBase.getProcessedEvents():this.eventsData,l&&(l=this.getDateTime(l)),d&&(d=this.getDateTime(d)),C=this.eventBase.filterEventsByRange(C,l,d),C}getBlockEvents(l,d,y){let C=[];return C=y?this.eventBase.getProcessedEvents(this.blockData):this.blockData,l&&(l=this.getDateTime(l)),d&&(d=this.getDateTime(d)),C=this.eventBase.filterEventsByRange(C,l,d),C}getOccurrencesByID(l){return this.eventBase.getOccurrencesByID(l)}getOccurrencesByRange(l,d){return l=this.getDateTime(l),d=this.getDateTime(d),this.eventBase.getOccurrencesByRange(l,d)}getCurrentViewDates(){return this.activeView?this.activeView.renderDates:[]}setRecurrenceEditor(l){this.eventWindow.setRecurrenceEditor(l)}getEventMaxID(){return this.eventBase.getEventMaxID()}getDeletedOccurrences(l){return this.eventBase.getDeletedOccurrences(l)}getCurrentViewEvents(){return this.eventsProcessed}refreshEvents(l=!0){if(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",(0,E.IV)([this.element],_t)),l)this.crudModule.refreshDataManager();else{if(this.activeViewOptions&&this.activeViewOptions.eventTemplate){let L=["eventTemplate"];if(this.crudModule&&this.crudModule.crudObj.isCrudAction&&-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.currentView)){L=[];for(let q=0,X=this.crudModule.crudObj.sourceEvent.length;q<X;q++)L.push("eventTemplate_"+this.crudModule.crudObj.sourceEvent[q].groupIndex),this.crudModule.crudObj.targetEvent[q]&&this.crudModule.crudObj.sourceEvent[q].groupIndex!==this.crudModule.crudObj.targetEvent[q].groupIndex&&L.push("eventTemplate_"+this.crudModule.crudObj.targetEvent[q].groupIndex)}this.resetTemplates(L)}const C=(this.eventsData||[]).concat(this.blockData||[]);this.notify(Ln,{processedData:this.eventBase?this.eventBase.processData(C):[]})}}refreshTemplates(l){switch(l?this.resetTemplates([l]):this.resetTemplates(),l){case"eventTemplate":this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.refreshEvents(!1);break;case"dateHeaderTemplate":this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.activeView.refreshHeader();break;case"resourceHeaderTemplate":this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.activeView.isTimelineView()?this.activeView.refreshResourceHeader():this.activeView.refreshHeader();break;case"quickInfoTemplates":this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.quickPopup=new hd(this),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer);break;case"editorTemplate":this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null),this.eventWindow=new bd(this),this.editorTemplateFn=this.templateParser(this.editorTemplate);break;case"tooltipTemplate":case"headerTooltipTemplate":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.eventTooltip=new Pc(this),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);break;default:this.initializeView(this.currentView)}}refreshLayout(){this.onScheduleResize(),this.headerModule&&this.headerModule.refresh(),this.eventWindow&&this.eventWindow.refresh()}getEventDetails(l){const d=(l=(0,E.sb)(l)).getAttribute("data-guid");return d?this.eventBase.getEventByGuid(d):{}}isSlotAvailable(l,d,y){let C,L,q=this.activeEventData.event;if(l instanceof Date||"string"==typeof l?(C=l,L=d):(q=l,C=l[this.eventFields.startTime],L=l[this.eventFields.endTime],this.resourceBase&&(y=this.eventBase.getGroupIndexFromEvent(l))),(0,E.le)(C)||(0,E.le)(L))return!0;C=this.getDateTime(C),L=this.getDateTime(L);let X=this.eventBase.filterEvents(C,L);return!(0,E.le)(y)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(X=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[y],X)),q&&(X=X.filter(q.Guid?he=>he.Guid!==q.Guid:he=>he[this.eventFields.id]!==q[this.eventFields.id])),!(X.length>0)}openEditor(l,d,y,C){"Add"!==d||y?(l[this.eventFields.startTime]=this.getDateTime(l[this.eventFields.startTime]),l[this.eventFields.endTime]=this.getDateTime(l[this.eventFields.endTime])):(l.startTime=this.getDateTime(l.startTime),l.endTime=this.getDateTime(l.endTime),(0,E.le)(l.element)||(l.element=(0,E.sb)(l.element))),this.currentAction=d,"Add"!==d&&(this.activeEventData.event=l),this.eventWindow.openEditor(l,d,y,C)}closeEditor(){this.eventWindow&&this.eventWindow.dialogClose()}closeQuickInfoPopup(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)}selectResourceByIndex(l){this.resourceBase&&this.uiStateValues.isGroupAdaptive&&this.resourceBase.selectResourceByIndex(l)}getIndexFromResourceId(l,d){return this.resourceBase?this.resourceBase.getIndexFromResourceId(l,d):null}addResource(l,d,y){this.resourceBase.addResource(l,d,y)}removeResource(l,d){this.resourceBase.removeResource(l,d)}destroy(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.hideSpinner(),this.unWireEvents(),this.destroyHeaderModule(),this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.eventBase&&(this.eventBase.destroy(),this.eventBase=null),this.workCellAction&&(this.workCellAction.destroy(),this.workCellAction=null),this.inlineModule&&(this.inlineModule.destroy(),this.inlineModule=null),this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.printModule&&this.printModule.destroy(),this.activeView&&(this.resetTemplates(),this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),this.crudModule&&(this.crudModule.destroy(),this.crudModule=null),this.dataModule&&(this.dataModule.destroy(),this.dataModule=null),super.destroy();const l=["dayModule","weekModule","workWeekModule","monthModule","monthAgendaModule","yearModule","agendaModule","timelineViewsModule","timelineMonthModule","timelineYearModule","resizeModule","dragAndDropModule","excelExportModule","printModule","iCalendarExportModule","iCalendarImportModule","tzModule","eventsData","eventsProcessed","blockData","blockProcessed","uiStateValues","viewCollections","viewOptions","defaultLocale","localeObj","selectedElements","resourceCollection","editorTitles","eventFields","activeViewOptions","activeEventData","activeCellsData","renderModule"];for(const y of l)this[y]=null;yr(this.element);let d=[uo,$s,mn,tr];this.cssClass&&(d=d.concat(this.cssClass.split(" "))),(0,E.IV)([this.element],d)}};return kn([(0,E.Z9)("auto")],ae.prototype,"width",void 0),kn([(0,E.Z9)("auto")],ae.prototype,"height",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"showHeaderBar",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"showTimeIndicator",void 0),kn([(0,E.Z9)("Week")],ae.prototype,"currentView",void 0),kn([(0,E.Z9)(["Day","Week","WorkWeek","Month","Agenda"])],ae.prototype,"views",void 0),kn([(0,E.Z9)(new Date)],ae.prototype,"selectedDate",void 0),kn([(0,E.Z9)(new Date(1900,0,1))],ae.prototype,"minDate",void 0),kn([(0,E.Z9)(new Date(2099,11,31))],ae.prototype,"maxDate",void 0),kn([(0,E.Z9)()],ae.prototype,"dateFormat",void 0),kn([(0,E.Z9)("Gregorian")],ae.prototype,"calendarMode",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"showWeekend",void 0),kn([(0,E.Z9)(0)],ae.prototype,"firstDayOfWeek",void 0),kn([(0,E.Z9)("FirstDay")],ae.prototype,"weekRule",void 0),kn([(0,E.Z9)([1,2,3,4,5])],ae.prototype,"workDays",void 0),kn([(0,E.Z9)(12)],ae.prototype,"monthsCount",void 0),kn([(0,E.Z9)("00:00")],ae.prototype,"startHour",void 0),kn([(0,E.Z9)("24:00")],ae.prototype,"endHour",void 0),kn([(0,E.Z9)(null)],ae.prototype,"timeFormat",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"enableAllDayScroll",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"enableAdaptiveUI",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"allowResizing",void 0),kn([(0,E.Zz)({},jc)],ae.prototype,"workHours",void 0),kn([(0,E.Zz)({},Dh)],ae.prototype,"timeScale",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"allowKeyboardInteraction",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"allowDragAndDrop",void 0),kn([(0,E.Z9)()],ae.prototype,"dateHeaderTemplate",void 0),kn([(0,E.Z9)()],ae.prototype,"cellHeaderTemplate",void 0),kn([(0,E.Z9)()],ae.prototype,"dayHeaderTemplate",void 0),kn([(0,E.Z9)()],ae.prototype,"monthHeaderTemplate",void 0),kn([(0,E.Z9)()],ae.prototype,"cellTemplate",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"readonly",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"showQuickInfo",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"allowInline",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"allowMultiCellSelection",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"allowMultiRowSelection",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"quickInfoOnSelectionEnd",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"showWeekNumber",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"rowAutoHeight",void 0),kn([(0,E.Z9)(!1)],ae.prototype,"allowMultiDrag",void 0),kn([(0,E.Z9)(0)],ae.prototype,"firstMonthOfYear",void 0),kn([(0,E.Z9)()],ae.prototype,"editorTemplate",void 0),kn([(0,E.Zz)({},xh)],ae.prototype,"quickInfoTemplates",void 0),kn([(0,E.Z9)(7)],ae.prototype,"agendaDaysCount",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"hideEmptyAgendaDays",void 0),kn([(0,E.Z9)(!0)],ae.prototype,"enableRecurrenceValidation",void 0),kn([(0,E.Z9)()],ae.prototype,"timezone",void 0),kn([(0,E.Zz)({},Uo)],ae.prototype,"eventSettings",void 0),kn([(0,E.Z9)(sh)],ae.prototype,"timezoneDataSource",void 0),kn([(0,E.Z9)()],ae.prototype,"resourceHeaderTemplate",void 0),kn([(0,E.Z9)()],ae.prototype,"headerIndentTemplate",void 0),kn([(0,E.Zz)({},La)],ae.prototype,"group",void 0),kn([(0,E.FE)([],oa)],ae.prototype,"resources",void 0),kn([(0,E.FE)([],Wl)],ae.prototype,"headerRows",void 0),kn([(0,E.Z9)()],ae.prototype,"cssClass",void 0),kn([(0,E.Z9)()],ae.prototype,"eventDragArea",void 0),kn([(0,E.ju)()],ae.prototype,"created",void 0),kn([(0,E.ju)()],ae.prototype,"destroyed",void 0),kn([(0,E.ju)()],ae.prototype,"cellClick",void 0),kn([(0,E.ju)()],ae.prototype,"cellDoubleClick",void 0),kn([(0,E.ju)()],ae.prototype,"moreEventsClick",void 0),kn([(0,E.ju)()],ae.prototype,"hover",void 0),kn([(0,E.ju)()],ae.prototype,"select",void 0),kn([(0,E.ju)()],ae.prototype,"actionBegin",void 0),kn([(0,E.ju)()],ae.prototype,"actionComplete",void 0),kn([(0,E.ju)()],ae.prototype,"actionFailure",void 0),kn([(0,E.ju)()],ae.prototype,"navigating",void 0),kn([(0,E.ju)()],ae.prototype,"renderCell",void 0),kn([(0,E.ju)()],ae.prototype,"eventClick",void 0),kn([(0,E.ju)()],ae.prototype,"eventRendered",void 0),kn([(0,E.ju)()],ae.prototype,"dataBinding",void 0),kn([(0,E.ju)()],ae.prototype,"popupOpen",void 0),kn([(0,E.ju)()],ae.prototype,"popupClose",void 0),kn([(0,E.ju)()],ae.prototype,"dragStart",void 0),kn([(0,E.ju)()],ae.prototype,"drag",void 0),kn([(0,E.ju)()],ae.prototype,"dragStop",void 0),kn([(0,E.ju)()],ae.prototype,"resizeStart",void 0),kn([(0,E.ju)()],ae.prototype,"resizing",void 0),kn([(0,E.ju)()],ae.prototype,"resizeStop",void 0),kn([(0,E.ju)()],ae.prototype,"dataBound",void 0),ae=kn([E.Zl],ae),ae})();class Jd{constructor(o){this.parent=o}isTimelineView(){return-1!==this.parent.currentView.indexOf("Timeline")}getContentRows(){return[]}refreshHeader(){}refreshResourceHeader(){(0,E.Od)(this.element.querySelector("tbody").lastElementChild.firstElementChild);const o=(0,E.az)("td");o.appendChild(this.parent.resourceBase.createResourceColumn()),(0,E.Ce)([o],this.element.querySelector("tbody").lastElementChild),this.parent.notify(rs,{})}getDayName(o){return this.parent.getDayNames("abbreviated")[o.getDay()]}getDate(o){return this.parent.globalize.formatDate(o,{format:"d",calendar:this.parent.getCalendarMode()})}getTime(o){return this.parent.isAdaptive?this.parent.globalize.formatDate(o,"HH:mm"===this.parent.activeViewOptions.timeFormat||"HH.mm"===this.parent.activeViewOptions.timeFormat?{format:"H",calendar:this.parent.getCalendarMode()}:{skeleton:"h",calendar:this.parent.getCalendarMode()}):this.parent.getTimeString(o)}getTimelineDate(o){return Bs(this.parent.globalize.formatDate(o,{skeleton:"MMMd",calendar:this.parent.getCalendarMode()})+", "+this.parent.getDayNames("wide")[o.getDay()],"multiple")}createEventTable(o){const l=(0,E.az)("div",{className:Ee});return(0,E.R3)(this.getEventRows(o),l),l}getEventRows(o){const l=[];let d;for(let y=0;y<o;y++)d=(0,E.az)("div",{className:$o}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&d.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[y].groupIndex.toString()),l.push(d);return l}collapseRows(o){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(o.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(o.querySelector("."+Ee)))}createTableLayout(o){const d=(0,E.az)("table",{className:"e-schedule-table "+(o||""),attrs:{role:"table"}}),y=(0,E.az)("tbody");return d.appendChild(y),d}createColGroup(o,l){let d=l.length;l[0]&&l[0].colSpan&&(d=l.map(C=>C.colSpan).reduce((C,L)=>C+L));const y=(0,E.az)("colgroup");for(let C=0;C<d;C++)y.appendChild((0,E.az)("col"));(0,E.Ce)([y],o)}getScrollXIndent(o){return o.offsetHeight-o.clientHeight>0?Vs():0}scrollTopPanel(o){this.getDatesHeaderElement().firstElementChild.scrollLeft=o.scrollLeft}scrollHeaderLabels(o){const l=this.element.querySelector(".e-date-header-wrap table"),d=l.offsetWidth/l.querySelectorAll("colgroup col").length,y=(L,q)=>{let X,he=0,He=0;const Ve=q?-o.scrollLeft:o.scrollLeft;for(const nt of L){if(He+=parseInt(nt.getAttribute("colSpan"),10),He>Math.floor(Ve/d)){X=nt;break}he+=nt.offsetWidth}(0,E.le)(X)||(X.children[0].style[q?"right":"left"]=Ve-he+"px")},C=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];for(const L of C){const q=[].slice.call(this.element.querySelectorAll(L));if(q.length>0){for(const X of q)X.children[0].style[this.parent.enableRtl?"right":"left"]="";y(q,this.parent.enableRtl)}}}addAttributes(o,l){o.template&&(0,E.R3)(o.template,l),o.colSpan&&l.setAttribute("colspan",o.colSpan.toString()),o.className&&(0,E.cn)([l],o.className)}getHeaderBarHeight(){let o=2;if(this.parent.headerModule&&(o+=bo(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){const l=this.parent.element.querySelector("."+qo);l&&(o+=l.offsetHeight)}return o}renderPanel(o){o===Sn?(0,E.Ce)([this.element],this.parent.element.querySelector("."+ur)):this.parent.element.querySelector("."+ur).appendChild(this.element)}setPanel(o){this.element=o}getPanel(){return this.element}getDatesHeaderElement(){return this.element.querySelector("."+fe)}getDateSlots(o,l){return[]}generateColumnLevels(){return[]}getColumnLevels(){return this.colLevels}highlightCurrentTime(){}startDate(){return this.renderDates[0]}endDate(){return os(this.renderDates[this.renderDates.length-1],1)}getStartHour(){let o=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return(0,E.le)(o)&&(o=new Date(2e3,0,0,0)),o}getEndHour(){let o=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return(0,E.le)(o)&&(o=new Date(2e3,0,0,0)),o}isCurrentDate(o){return o.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)}isCurrentMonth(o){return this.parent.activeViewOptions.displayDate||this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeView.getStartDate().getTime()<=this.parent.getCurrentTime().getTime()&&this.parent.activeView.getEndDate().getTime()>=this.parent.getCurrentTime().getTime():o.getFullYear()===this.parent.getCurrentTime().getFullYear()&&o.getMonth()===this.parent.getCurrentTime().getMonth()}isWorkDay(o,l=this.parent.activeViewOptions.workDays){return l.indexOf(o.getDay())>=0}isWorkHour(o,l,d,y){return!((0,E.le)(l)||(0,E.le)(d)||(l.setMilliseconds(0),d.setMilliseconds(0),Vn(o)<Vn(l)||Vn(o)>=Vn(d)||!this.isWorkDay(o,y)))}getRenderDates(o){const l=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView){let y=Jr(Bi(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek);for(let C=0,L=7*this.parent.activeViewOptions.interval;C<L;C++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(y,o))&&l.push(y),y=os(y,1)}else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView){let d=Jr(Bi(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek);for(let y=0,C=7*this.parent.activeViewOptions.interval;y<C;y++)this.isWorkDay(d,o)&&l.push(d),d=os(d,1)}else{const d="Agenda"===this.parent.currentView?this.parent.agendaDaysCount:this.parent.activeViewOptions.interval;let y=Bi(this.parent.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(y,o))&&l.push(y),y=os(y,1)}while(d!==l.length)}return o||(this.renderDates=l),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),l}getNextPreviousDate(o){if("Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){if(this.parent.activeViewOptions.showWeekend){const d=this.parent.activeViewOptions.interval;return os(this.parent.selectedDate,"next"===o?d:-d)}{let d;if("next"===o)for(d=os(this.renderDates.slice(-1)[0],1);!this.isWorkDay(d);)d=os(d,1);else{d=os(this.renderDates[0],-1);let y=0;do{this.isWorkDay(d)&&(y+=1),this.parent.activeViewOptions.interval!==y&&(d=os(d,-1))}while(this.parent.activeViewOptions.interval!==y)}return d}}return os(this.parent.selectedDate,("next"===o?7:-7)*this.parent.activeViewOptions.interval)}getLabelText(o){const l=o.charAt(0).toLowerCase()+o.substring(1);return this.parent.localeObj.getConstant(l)+" of "+Bs(this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long",calendar:this.parent.getCalendarMode()}),"single")}getDateRangeText(){return this.parent.isAdaptive?Bs(this.parent.globalize.formatDate(this.parent.selectedDate,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single"):this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])}formatDateRange(o,l){const d=this.parent.globalize,y=this.parent.getCalendarMode();if(o===l&&(l=null),!(0,E.le)(this.parent.activeViewOptions.dateFormat)){let X="";return l?(X=d.formatDate(o,{format:this.parent.activeViewOptions.dateFormat,calendar:y})+" - "+d.formatDate(l,{format:this.parent.activeViewOptions.dateFormat,calendar:y}),Bs(X,"multiple")):(X=d.formatDate(o,{format:this.parent.activeViewOptions.dateFormat,calendar:y}),Bs(X,"multiple"))}let C,L;if(L="en"===this.parent.locale||"en-US"===this.parent.locale?(0,E.NA)("dateFormats.long",(0,E.bD)(y)):(0,E.NA)("main."+this.parent.locale+".dates.calendars."+y+".dateFormats.long",E.qV),!l)return Bs(d.formatDate(o,{format:L,calendar:y}),"single");const q=L.trim().toLocaleLowerCase();return C="d"===q.substr(0,1)?o.getFullYear()===l.getFullYear()?o.getMonth()===l.getMonth()?d.formatDate(o,{format:"dd",calendar:y})+" - "+d.formatDate(l,{format:"dd MMMM yyyy",calendar:y}):d.formatDate(o,{format:"dd MMM",calendar:y})+" - "+d.formatDate(l,{format:"dd MMM yyyy",calendar:y}):d.formatDate(o,{format:"dd MMM yyyy",calendar:y})+" - "+d.formatDate(l,{format:"dd MMM yyyy",calendar:y}):"m"===q.substr(0,1)?o.getFullYear()===l.getFullYear()?o.getMonth()===l.getMonth()?d.formatDate(o,{format:"MMMM dd",calendar:y})+" - "+d.formatDate(l,{format:"dd, yyyy",calendar:y}):d.formatDate(o,{format:"MMM dd",calendar:y})+" - "+d.formatDate(l,{format:"MMM dd, yyyy",calendar:y}):d.formatDate(o,{format:"MMM dd, yyyy",calendar:y})+" - "+d.formatDate(l,{format:"MMM dd, yyyy",calendar:y}):d.formatDate(o,{format:L,calendar:y})+" - "+d.formatDate(l,{format:L,calendar:y}),Bs(C,"multiple")}getMobileDateElement(o,l){return(0,E.az)("div",{className:l,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(o,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+Bs(this.parent.globalize.formatDate(o,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"})}setResourceHeaderContent(o,l,d=To){if(this.parent.activeViewOptions.resourceHeaderTemplate){const y={resource:l.resource,resourceData:l.resourceData},q=this.parent.element.id+"_"+this.parent.activeViewOptions.resourceHeaderTemplateName+"resourceHeaderTemplate",X=[].slice.call(this.parent.getResourceHeaderTemplate()(y,this.parent,"resourceHeaderTemplate",q,!1));(0,E.R3)(X,o)}else o.appendChild((0,E.az)("div",{className:d,innerHTML:l.resourceData[l.resource.textField]}))}renderResourceMobileLayout(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())}addAutoHeightClass(o){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(0,E.cn)([o],Ko)}getColElements(){return[].slice.call(this.element.querySelectorAll("."+ee+" col, ."+$+" col"))}setColWidth(o){if(this.isTimelineView()){const l=this.getColElements(),y=this.element.querySelector("."+ks+" tbody").getBoundingClientRect().width/(l.length/2);if(l.forEach(q=>(0,E.V7)(q,{width:(0,E.Ac)(y)})),o.offsetHeight!==o.clientHeight){const q=this.parent.element.querySelector("."+Yi);(0,E.le)(q)||(0,E.V7)(q,{height:(0,E.Ac)(o.clientHeight)})}[].slice.call(this.element.querySelectorAll(`.${Ce},.${Le},.e-header-week-cell,.e-header-month-cell,.e-header-year-cell`)).forEach(q=>{const X=(0,E.le)(q.getAttribute("colspan"))?"1":q.getAttribute("colspan"),he=parseInt(X,10);(0,E.V7)(q,{width:(0,E.Ac)(y*he)})})}}resetColWidth(){const o=this.getColElements();for(const l of o)l.style.width=""}getContentAreaElement(){return this.element.querySelector("."+ee)}wireExpandCollapseIconEvents(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1){const o=[].slice.call(this.element.querySelectorAll("."+Ar));for(const l of o)E.bi.clearEvents(l),E.bi.add(l,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}}scrollToDate(o){if(-1===["Month","TimelineMonth"].indexOf(this.parent.currentView)||(0,E.le)(o))return;const l=this.getContentAreaElement(),d=new Date(Bi(new Date(+o)).getTime()).getTime(),y=l.querySelector(`.${xi}[data-date="${d}"]`);"Month"===this.parent.currentView&&y&&(l.scrollTop=y.offsetTop),"TimelineMonth"===this.parent.currentView&&y&&(l.scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-y.offsetLeft-y.offsetWidth):y.offsetLeft)}setPersistence(){if(this.parent.enablePersistence){const o=this.element.querySelector(".e-content-wrap");(0,E.le)(o)||(this.parent.scrollLeft=o.scrollLeft,this.parent.scrollTop=o.scrollTop)}}retainScrollPosition(){if(this.parent.enablePersistence){const o=this.parent.element.querySelector(".e-content-wrap");!(0,E.le)(o)&&!(0,E.le)(this.parent.scrollLeft)&&!(0,E.le)(this.parent.scrollTop)&&(o.scrollTop=this.parent.scrollTop,o.scrollLeft=this.parent.scrollLeft)}}getViewStartDate(){let o=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(o=this.parent.resourceBase.getResourceRenderDates()[0]),o}getViewEndDate(){let o=os(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(o=os(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),o}destroy(){this.element&&this.element.parentNode&&(0,E.Od)(this.element),this.element=null,this.renderDates=null,this.colLevels=null}}class Iu extends Jd{constructor(o){super(o),this.viewClass="e-day-view",this.isInverseTableSelect=!0,this.baseCssClass="e-vertical-view",this.appointment=null}getModuleName(){return"verticalView"}addEventListener(){this.parent.on(ln,this.scrollUiUpdate,this),this.parent.on(Ln,this.renderEvents,this)}removeEventListener(){this.parent&&(this.parent.off(ln,this.scrollUiUpdate),this.parent.off(Ln,this.renderEvents))}renderEvents(){this.appointment=this.parent.activeViewOptions.timeScale.enable?new cf(this.parent):new Oc(this.parent),this.appointment.renderAppointments(),this.parent.notify(Rr,{})}onContentScroll(o){this.parent.removeNewEventElement();const l=o.target;this.parent.notify(cn,o),this.scrollLeftPanel(l),this.scrollTopPanel(l),this.parent.isAdaptive||(this.parent.uiStateValues.top=l.scrollTop),this.parent.uiStateValues.left=l.scrollLeft,(0,E.le)(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide(),this.setPersistence()}onAdaptiveMove(o){this.parent.uiStateValues.action&&o.preventDefault()}onAdaptiveScroll(o){this.parent&&!this.parent.isDestroyed&&(this.parent.removeNewEventElement(),this.parent.uiStateValues.top=o.target.scrollTop)}scrollLeftPanel(o){const l=this.getLeftPanelElement();(0,E.le)(l)||(l.scrollTop=o.scrollTop)}scrollUiUpdate(o){if(!this.parent)return;const l=this.parent.element.querySelector("."+$),d=this.getHeaderBarHeight(),y=this.getLeftPanelElement(),C=this.getScrollableElement(),L=this.getDatesHeaderElement(),q=this.parent.element.offsetHeight-d-L.offsetHeight;this.setColWidth(C),this.setContentHeight(C,y,q);const X=Vs();L.firstElementChild.style[o.cssProperties.rtlBorder]="",L.style[o.cssProperties.rtlPadding]="";const he=!this.parent.enableAllDayScroll||!(C.offsetWidth-C.clientWidth<=l.offsetWidth-l.clientWidth&&l.classList.contains("e-all-day-scroll"));C.offsetWidth-C.clientWidth>0&&he?(L.firstElementChild.style[o.cssProperties.border]=X>0?"1px":"0px",L.style[o.cssProperties.padding]=X>0?X-1+"px":"0px"):(L.firstElementChild.style[o.cssProperties.border]="",L.style[o.cssProperties.padding]=""),o.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(y&&(y.scrollTop=this.parent.uiStateValues.top),C.scrollTop=this.parent.uiStateValues.top,C.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime(),this.retainScrollPosition()}setContentHeight(o,l,d){this.parent.isAdaptive&&!this.isTimelineView()||(0,E.le)(l)||(l.style.height="auto"===this.parent.height?"auto":(0,E.Ac)(d-this.getScrollXIndent(o))),o.style.height="auto"===this.parent.height?"auto":(0,E.Ac)(d)}scrollToWorkHour(){if(this.parent.workHours.highlight){const o=this.element.querySelector("."+v);o&&(this.getScrollableElement().scrollTop=o.offsetTop,this.parent.uiStateValues.top=o.offsetTop,this.parent.uiStateValues.left=0)}}scrollToHour(o,l){const d=this.parent.getStartEndTime(o);(0,E.le)(d)||!(0,E.le)(l)||(this.getScrollableElement().scrollTop=this.getTopFromDateTime(d))}generateColumnLevels(){const o=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);let l=[];if(this.parent.activeViewOptions.group.resources.length>0){if(l=this.parent.resourceBase.generateResourceLevels(o),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){const d=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];l=[this.getDateSlots(d.renderDates,d.workDays,d.resourceData[d.resource.startHourField],d.resourceData[d.resource.endHourField])]}}else l.push(o);return this.colLevels=l,l}getDateSlots(o,l,d=this.parent.workHours.start,y=this.parent.workHours.end){const C=[],L=this.parent.getStartEndTime(d),q=this.parent.getStartEndTime(y);for(const X of o){const he=[Ce];this.isCurrentDate(X)&&he.push(sn),C.push({date:X,type:"dateHeader",className:he,colSpan:1,workDays:l,startHour:new Date(+L),endHour:new Date(+q)})}return C}isWorkHourRange(o){return this.getStartHour().getTime()<=o.getTime()&&this.getEndHour().getTime()>=o.getTime()}highlightCurrentTime(){if(!(this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime()))if(this.getCurrentTimeIndicatorIndex().length>0){if([].slice.call(this.element.querySelectorAll("."+xi)).length>0&&this.changeCurrentTimePosition(),(0,E.le)(this.currentTimeIndicatorTimer)){const d=this.parent.getCurrentTime(),y=wr-(1e3*d.getSeconds()+d.getMilliseconds());y<=59e3&&window.setTimeout(()=>{(0,E.le)(this.currentTimeIndicatorTimer)||(this.clearCurrentTimeIndicatorTimer(),this.changeCurrentTimePosition(),this.updateCurrentTimeIndicatorTimer())},y),this.updateCurrentTimeIndicatorTimer()}}else this.clearCurrentTimeIndicatorTimer();else this.clearCurrentTimeIndicatorTimer()}getCurrentTimeIndicatorIndex(){const o=[];if(!(0,E.le)(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){let l=0;for(const d of this.parent.resourceBase.lastResourceLevel){const y=this.parent.getIndexOfDate(d.renderDates,Bi(this.parent.getCurrentTime()));y>=0&&o.push(this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*y+l:l+y),l+=this.parent.activeViewOptions.group.byDate?1:d.renderDates.length}}else{const d=this.parent.getIndexOfDate(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates,Bi(this.parent.getCurrentTime()));d>=0&&o.push(d)}return o}clearCurrentTimeIndicatorTimer(){(0,E.le)(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())}updateCurrentTimeIndicatorTimer(){this.currentTimeIndicatorTimer=window.setInterval(()=>{this.changeCurrentTimePosition()},wr)}removeCurrentTimeIndicatorElements(){const l=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));for(const d of l)(0,E.Od)(d)}changeCurrentTimePosition(){if(!this.parent||this.parent&&this.parent.isDestroyed)return;this.removeCurrentTimeIndicatorElements();const o=this.getCurrentTimeIndicatorIndex(),l=this.parent.getContentTable().rows[0],d=this.getTopFromDateTime(this.parent.getCurrentTime()),y=(0,E.Ac)(d),C=Math.floor(d/l.cells[0].offsetHeight),L=this.getLeftPanelElement(),q=[].slice.call(L.querySelectorAll("tr"));if((0,E.le)(C)||isNaN(C)||C===q.length)return;const X=[].slice.call(this.element.querySelectorAll("."+jo));for(let He=0,Ve=o[0];He<Ve;He++)X[He].appendChild((0,E.az)("div",{className:"e-previous-timeline",styles:"top:"+y}));for(const He of o)X[He].appendChild((0,E.az)("div",{className:_s,styles:"top:"+y}));const he=(0,E.az)("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+y});C<=q.length&&((0,E.IV)(L.querySelectorAll("."+en),en),q[C]&&(0,E.cn)([q[C].lastElementChild],en),(0,E.Ce)([he],L),he.style.top=(0,E.Ac)(he.offsetTop-he.offsetHeight/2))}getTopFromDateTime(o){const l=this.getStartHour();return(60*(o.getHours()-l.getHours())+(o.getMinutes()-l.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval}getWorkCellHeight(){return parseFloat(this.element.querySelector("."+xi).getBoundingClientRect().height.toFixed(2))}getTdContent(o,l,d){let y;const C=(0,E.az)("div");let L="";const q=this.parent.element.id+"_";switch(l){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){L="dateHeaderTemplate";const X={date:o,type:l},he=this.parent.activeViewOptions.dateHeaderTemplateName;y=[].slice.call(this.parent.getDateHeaderTemplate()(X,this.parent,L,q+he+L,!1))}else C.innerHTML=this.parent.activeView.isTimelineView()?`<span class="e-header-date e-navigate">${this.getTimelineDate(o)}</span>`:`<div class="e-header-day">${Bs(this.getDayName(o),"single")}</div><div class="e-header-date e-navigate" role="link">${this.getDate(o)}</div>`,y=[].slice.call(C.childNodes);break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){L="majorSlotTemplate";const X={date:o,type:l};y=[].slice.call(this.parent.getMajorSlotTemplate()(X,this.parent,L,q+L,!1))}else C.innerHTML=`<span>${this.getTime(o)}</span>`,y=[].slice.call(C.childNodes);break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){L="minorSlotTemplate";const X={date:o,type:l};y=[].slice.call(this.parent.getMinorSlotTemplate()(X,this.parent,L,q+L,!1))}else y=[].slice.call(C.childNodes);break;case"alldayCells":if(this.parent.activeViewOptions.cellTemplate){const X=this.parent.activeViewOptions.cellTemplateName;L="cellTemplate";const he={date:o,type:l,groupIndex:d};y=[].slice.call(this.parent.getCellTemplate()(he,this.parent,L,q+X+L,!1))}}return y}refreshHeader(){(0,E.Od)(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(rs,{})}renderLayout(o){this.setPanel((0,E.az)("div",{className:G}));const l=[this.baseCssClass,this.viewClass];l.push(o),this.parent.activeViewOptions.group.byDate&&l.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||(0,E.cn)([this.element],["e-timescale-disable",this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&l.push(th),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&l.push(Ll),this.renderPanel(o),(0,E.cn)([this.element],l),this.element.appendChild(this.createTableLayout(ye)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+Rn)&&this.renderResourceMobileLayout(),this.parent.notify(rs,{})}renderHeader(){const o=(0,E.az)("tr"),l=(0,E.az)("td");if(l.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){const d=(0,E.az)("td",{className:"e-left-indent"});d.appendChild(this.renderLeftIndent()),o.appendChild(d)}o.appendChild(l),(0,E.Ce)([o],this.element.querySelector("tbody"))}renderContent(){const o=(0,E.az)("tr"),l=(0,E.az)("td");if(this.parent.isAdaptive){l.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");const d=(0,E.az)("div",{className:po});this.parent.activeViewOptions.timeScale.enable&&d.appendChild(this.renderTimeCells()),d.appendChild(this.renderContentArea()),l.appendChild(d),E.bi.add(d,"scroll",this.onAdaptiveScroll,this),E.bi.add(d,E.AR.touchMoveEvent,this.onAdaptiveMove,this),o.appendChild(l)}else{if(l.appendChild(this.renderContentArea()),this.parent.activeViewOptions.timeScale.enable){const d=(0,E.az)("td");d.appendChild(this.renderTimeCells()),o.appendChild(d)}o.appendChild(l)}this.element.querySelector("tbody").appendChild(o)}renderLeftIndent(){const o=(0,E.az)("div",{className:"e-left-indent-wrap"}),l=this.createTableLayout(),d=(0,E.az)("tr"),y=this.colLevels.length;let C;for(let he=0;he<y;he++){const He=d.cloneNode(),Ve={className:[this.colLevels[he][0]&&this.colLevels[he][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==Ve.className.indexOf(Ce)){Ve.className.push(ko);const nt=this.parent.getWeekNumberContent(this.renderDates);Ve.template=[(0,E.az)("span",{innerHTML:""+nt,attrs:{title:this.parent.localeObj.getConstant("week")+" "+nt}})]}C=this.createTd(Ve),this.parent.renderHeaderIndentTemplate(Ve,C),He.appendChild(C),l.querySelector("tbody").appendChild(He)}const L=d.cloneNode(),q=(0,E.az)("div",{attrs:{tabindex:"0",role:"list",title:this.parent.localeObj.getConstant("expandAllDaySection"),"aria-disabled":"false","aria-label":"Expand section"},className:vn+" "+vl+" "+vr+" "+zs}),X={className:[qs],type:"emptyCells"};return C=this.createTd(X),C.appendChild(q),this.parent.renderHeaderIndentTemplate(X,C),L.appendChild(C),l.querySelector("tbody").appendChild(L),o.appendChild(l),o}renderDatesHeader(){const o=(0,E.az)("div",{className:fe}),l=(0,E.az)("div",{className:$});o.appendChild(l);const d=this.createTableLayout(),y=(0,E.az)("tr"),C=this.colLevels.length,L=this.colLevels[C-1];for(let q=0;q<C;q++){const X=y.cloneNode();(0,E.cn)([X],No);const he=this.colLevels[q];for(let He=0;He<he.length;He++)X.appendChild(this.createTd(he[He]));d.querySelector("tbody").appendChild(X)}return this.createAllDayRow(d,L),this.createColGroup(d,L),l.appendChild(d),o}createAllDayRow(o,l){const d=(0,E.az)("tr");(0,E.cn)([d],Pn);for(let C=0;C<l.length;C++){const L=(0,E.l7)({},l[C]);L.className=[qs],L.type="alldayCells";const q=this.createTd(L);q.setAttribute("data-date",L.date.getTime().toString()),(0,E.le)(L.groupIndex)?this.parent.uiStateValues.isGroupAdaptive&&q.setAttribute("data-group-index",""+this.parent.uiStateValues.groupIndex):q.setAttribute("data-group-index",""+L.groupIndex),this.wireCellEvents(q),d.appendChild(q)}o.querySelector("tbody").appendChild(d);const y=(0,E.az)("thead");y.appendChild(this.createEventWrapper("allDay")),(0,E.Ce)([y],o)}createTd(o){const l=(0,E.az)("td");if(this.addAttributes(o,l),o.date&&o.type){const y=this.getTdContent(o.date,o.type,o.groupIndex);y&&y.length&&(0,E.R3)(y,l)}return this.parent.isMinMaxDate(Bi(new Date(""+o.date)))||(0,E.cn)([l],Oh),"resourceHeader"===o.type&&this.setResourceHeaderContent(l,o),"dateHeader"===o.type&&o.className.indexOf(Ce)>=0&&(l.setAttribute("data-date",o.date.getTime().toString()),(0,E.le)(o.groupIndex)||l.setAttribute("data-group-index",""+o.groupIndex),this.wireMouseEvents(l)),this.parent.trigger(gi,{elementType:o.type,element:l,date:o.date,groupIndex:o.groupIndex}),l}wireCellEvents(o){E.bi.add(o,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(o)}wireMouseEvents(o){E.bi.add(o,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||E.bi.add(o,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)}renderTimeCells(){const o=(0,E.az)("div",{className:Ie}),l=this.createTableLayout(),d=(0,E.az)("tr");return this.getTimeSlotRows(C=>{C.type=C.first?"majorSlot":"minorSlot",C.className=C.last?["e-time-cells",Le]:[Le];const L=d.cloneNode();return L.appendChild(this.createTd({date:C.date,type:C.type,className:C.className})),l.querySelector("tbody").appendChild(L),C}),o.appendChild(l),o}renderContentArea(){const o=(0,E.az)("div",{className:ee}),l=this.createTableLayout(ks);return this.addAutoHeightClass(l),this.renderContentTable(l),this.createColGroup(l,this.colLevels.slice(-1)[0]),o.appendChild(l),this.wireCellEvents(l.querySelector("tbody")),E.bi.add(o,"scroll",this.onContentScroll,this),E.bi.add(o,E.AR.touchMoveEvent,this.onAdaptiveMove,this),o}renderContentTable(o){const l=(0,E.az)("tr",{attrs:{role:"row"}}),d=(0,E.az)("td",{attrs:{role:"gridcell","aria-selected":"false"}}),y=o.querySelector("tbody");this.getTimeSlotRows(L=>{const q=l.cloneNode();for(const X of this.colLevels[this.colLevels.length-1]){const he=this.createContentTd(X,L,d);q.appendChild(he)}return y.appendChild(q),L}),this.renderContentTableHeader(o)}createContentTd(o,l,d){const y=d.cloneNode();o.colSpan&&y.setAttribute("colspan",o.colSpan.toString());const C=this.getContentTdClass(l),L=Bi(o.date);this.parent.isMinMaxDate(L)||C.push(Oh),Hr(L,Vn(l.date));let q="workCells";if(-1!==o.className.indexOf(un)&&(C.push(Bt),q="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(L,o.startHour,o.endHour,o.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(L,o.workDays))&&C.push(v),(0,E.cn)([y],C),this.parent.activeViewOptions.cellTemplate){const he={date:L,type:q,groupIndex:o.groupIndex},nt=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",It=[].slice.call(this.parent.getCellTemplate()(he,this.parent,"cellTemplate",nt,!1));(0,E.R3)(It,y)}return y.setAttribute("data-date",L.getTime().toString()),(!(0,E.le)(o.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&y.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:o.groupIndex)),this.parent.trigger(gi,{elementType:q,element:y,date:L,groupIndex:o.groupIndex}),y}getContentTdClass(o){return o.last?[xi]:[xi,"e-alternate-cells"]}renderContentTableHeader(o){const l=(0,E.az)("thead");l.appendChild(this.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&l.appendChild(this.createEventWrapper("timeIndicator")),(0,E.Ce)([l],o)}createEventWrapper(o=""){const l=(0,E.az)("tr"),d=this.colLevels.slice(-1)[0];for(let y=0,C=d.length;y<C;y++){const L=d[y],q=(0,E.az)("td",{className:"allDay"===o?el:"timeIndicator"===o?jo:"e-day-wrapper",attrs:{"data-date":L.date.getTime().toString()}});if((0,E.le)(L.groupIndex)||q.setAttribute("data-group-index",L.groupIndex.toString()),""===o){const X=(0,E.az)("div",{id:nr+"-"+y.toString(),className:nr});q.appendChild(X)}l.appendChild(q)}return l}getScrollableElement(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+po):this.getContentAreaElement()}getLeftPanelElement(){return this.element.querySelector("."+Ie)}getEndDateFromStartDate(o){const d=this.parent.activeViewOptions.timeScale.interval*wr/this.parent.activeViewOptions.timeScale.slotCount,y=new Date(o.getTime());return y.setMilliseconds(y.getMilliseconds()+d),y}getTimeSlotRows(o){const l=[],d=this.getStartHour(),y=this.getEndHour(),C=this.parent.activeViewOptions.timeScale.interval*wr,L=C/this.parent.activeViewOptions.timeScale.slotCount;let q=Math.round(Cn/L);const X=d.getTime(),he=y.getTime();X!==he&&(q=Math.abs(he-X)/L-(new Date(he).getTimezoneOffset()-new Date(X).getTimezoneOffset())/(60/this.parent.activeViewOptions.timeScale.slotCount)),this.parent.activeViewOptions.timeScale.enable||(q=1);const He=this.parent.getStartEndTime(this.parent.workHours.start),Ve=this.parent.getStartEndTime(this.parent.workHours.end);for(let nt=0;nt<q;nt++){let It=new Date(X+L*nt);if(Fo(It)||new Date(X).getTimezoneOffset()!==It.getTimezoneOffset()){const Ni=new Date(X).getTimezoneOffset()-It.getTimezoneOffset();It=new Date(It.getTime()-6e4*Ni)}const vt=nt%(C/L),mi={date:new Date(""+It),startHour:He,endHour:Ve,first:0===vt,middle:vt<this.parent.activeViewOptions.timeScale.slotCount-1,last:vt===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};o&&o(mi),l.push(mi)}return l}destroy(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)&&(this.clearCurrentTimeIndicatorTimer(),this.element)){this.appointment&&(this.appointment.destroy(),this.appointment=null);const o=this.getContentAreaElement();o&&(E.bi.remove(o,"scroll",this.onContentScroll),E.bi.remove(o,E.AR.touchMoveEvent,this.onAdaptiveMove)),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),super.destroy()}}}class Mu extends Jd{constructor(o){super(o)}createAgendaContentElement(o,l,d,y,C){let L;const q=this.parent.eventFields;if("noEvents"===o){const X=[{subject:this.parent.localeObj.getConstant("noEvents")}];L=on.Kh.createList(this.parent.createElement,X,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:"<div class=e-no-event>${subject}</div>"})}else L=on.Kh.createList(this.parent.createElement,l,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass}),[].slice.call(L.children).forEach((he,He)=>{const Ve=(0,E.az)("div",{className:Mn,attrs:{"data-id":"Appointment_"+l[He][this.parent.eventFields.id],"data-guid":l[He].Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(l[He]),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnouncementString(l[He])}});let nt;if((0,E.le)(C)||Ve.setAttribute("data-group-index",C.toString()),this.parent.eventBase.applyResourceColor(Ve,l[He],"borderColor",y),(0,E.le)(this.parent.activeViewOptions.eventTemplate))nt=this.createAppointment(l[He]);else{(0,E.cn)([Ve],"e-template");const Ni=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate";nt=this.parent.getAppointmentTemplate()(l[He],this.parent,"eventTemplate",Ni,!1),(0,E.le)(l[He][q.recurrenceRule])||Ve.appendChild((0,E.az)("div",{className:vr+" "+(l[He][q.id]===l[He][q.recurrenceID]?fo:hl)}))}(0,E.R3)([].slice.call(nt),Ve),yr(he),he.appendChild(Ve);const It={data:(0,E.l7)({},l[He],null,!0),element:he,cancel:!1};this.parent.trigger(Re,It,vt=>{vt.cancel&&(0,E.Od)(he)})});return d.appendChild(L),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&(0,E.cn)([d],es),this.parent.renderTemplates(),d}createAppointment(o){const l=this.parent.eventFields;let d=o[l.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle");const y=o[l.location]||this.parent.eventSettings.fields.location.default,C=(0,E.az)("div",{className:N});!(0,E.le)(y)&&""!==y&&(d+=","),C.appendChild((0,E.az)("div",{className:El,innerHTML:d})),!(0,E.le)(y)&&""!==y&&C.appendChild((0,E.az)("div",{className:ka,innerHTML:y})),(0,E.le)(o[l.recurrenceRule])||C.appendChild((0,E.az)("div",{className:vr+" "+(o[l.id]===o[l.recurrenceID]?fo:hl)}));const L=o[l.startTime],q=o[l.endTime],X=o[l.isAllDay];let he=this.parent.localeObj.getConstant("allDay");const He=this.parent.getTimeString(L)+" - "+this.parent.getTimeString(q);(0,E.le)(o.data)||(he=((q.getTimezoneOffset()!==L.getTimezoneOffset()?q.getTime()-L.getTime()+36e5:q.getTime()-L.getTime())/Cn>=1?he:He)+" ("+this.parent.localeObj.getConstant("day")+" "+o.data.index+"/"+o.data.count+")");const Ve=!(0,E.le)(o.data)||X?he:He;return[C,(0,E.az)("div",{className:dr,innerHTML:Ve})]}processAgendaEvents(o){let l=[];if((0,E.le)(o))return l;for(const d of o){const y=this.parent.eventBase.splitEventByDay(d);l=l.concat(y.length>1?y:d)}return l}wireEventActions(){const o=[].slice.call(this.parent.element.querySelectorAll("."+Mn));for(const d of o)this.parent.eventBase.wireAppointmentEvents(d,this.parent.getEventDetails(d),!0);const l=[].slice.call(this.parent.element.querySelectorAll(".e-m-date"));for(const d of l)E.bi.add(d,"click",this.parent.agendaModule.dayNavigationClick,this)}calculateResourceTableElement(o,l,d){if((0,E.le)(this.parent.resourceBase.lastResourceLevel)){const He=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(He)}const y=os(new Date(d.getTime()),l),C=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?l:1,L=this.parent.resourceBase.resourceCollection,q=this.parent.resourceBase.lastResourceLevel,X=d;for(let He=0;He<C;He++){const Ve=[],nt=[];let vt,mi,It=0;const Ni=os(X,He),Ki=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?os(Ni,1):y,Ts=this.parent.eventBase.filterEvents(Ni,Ki);if(Ts.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(let Hn=0;Hn<q.length;Hn++){l=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:l;const Fr=[],lo=this.parent.eventBase.filterEvents(d=Ni,y,Ts,q[Hn]);if(lo.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(let kr=0;kr<l;kr++){const Mo=this.parent.eventBase.filterEvents(d,os(d,1),lo,void 0);if((Mo.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(Fr.push(Mo[0]),vt={rowSpan:1,type:"eventColumn",resource:L[L.length-1],groupIndex:q[Hn].groupIndex,groupOrder:q[Hn].groupOrder,resourceData:q[Hn].resourceData,eventData:Mo,date:d},mi={rowSpan:1,type:"dateColumn",resource:L[L.length-1],groupOrder:q[Hn].groupOrder,resourceData:q[Hn].resourceData,date:d},Ve[It]||(Ve[It]=[]),Ve[It].push(vt),Ve[It].push(mi),It++),(d=os(d,1)).getTime()>=y.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){Ve[Ve.length-1][1].cssClass=es;const ul={rowSpan:Fr.length,type:"resourceColumn",resource:L[L.length-1],groupOrder:q[Hn].groupOrder.slice(0,-1),resourceData:q[Hn].resourceData,groupIndex:Ve.length-Fr.length,className:[R],date:d};Ve[Ve.length-Fr.length].push(ul),nt.push((0,E.l7)({},ul,null,!0));break}}}const Hs=L.slice(0,-1);let Js=[],Fn=0;for(let Hn=0;Hn<Hs.length;Hn++){const Fr=Hs[Hs.length-(Hn+1)].dataSource;for(let lo=0;lo<Fr.length;lo++){let kr=0;for(let Mo=0;Mo<nt.length;Mo++)nt[Mo].groupOrder[Hs.length-(Hn+1)]===Fr[lo][Hs[Hs.length-(Hn+1)].idField]&&(Fn+=nt[Mo].rowSpan,Js.push((0,E.l7)({},nt[Mo],null,!0))),++kr===nt.length&&Js.length>0&&(Js[0].rowSpan=Fn,Js[0].type="parentColumnLevel_"+(Hn+1),Js[0].resource=Hs[Hs.length-(Hn+1)],Js[0].resourceData=Fr[lo],Js[0].date=d,Ve[Js[0].groupIndex].push(Js[0]),Js=[],Fn=0)}}this.createResourceTableRow(Ve,o)}}0===this.parent.eventBase.filterEvents(X,y).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(o,X)}createResourceTableRow(o,l){const d=(0,E.az)("tr",{attrs:{role:"row"}});let y;const C=(0,E.az)("td",{attrs:{role:"gridcell","aria-selected":"false"}});let L,X,q=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){let he=[];const He=this.parent.resourceBase.resourceCollection.slice(0,-1);for(let nt=0;nt<o.length;nt++)he=he.concat(o[nt]);X=He.length>0?"parentColumnLevel_"+He.length:"resourceColumn";const Ve=he.filter(nt=>nt.type===X);for(let nt=0;nt<Ve.length;nt++)q+=Ve[nt].rowSpan}for(let he=0;he<o.length;he++){y=d.cloneNode();for(let He=o[he].length-1;He>=0;He--){const Ve=o[he][He];let nt=C.cloneNode();if("dateColumn"===Ve.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){L=o[he][He];continue}nt.setAttribute("data-date",Ve.date.getTime().toString()),nt.appendChild(this.createDateHeaderElement(Ve.date));const It=[ie,Ri];Ve.cssClass&&It.push(Ve.cssClass),(0,E.cn)([nt],It),y.appendChild(nt)}else"eventColumn"===Ve.type?(nt=this.createAgendaContentElement(0===Ve.eventData.length?"noEvents":"data",Ve.eventData,nt,Ve.groupOrder,Ve.groupIndex),nt.setAttribute("data-date",Ve.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&(0,E.cn)([nt],[ie,"e-day-padding"]),y.appendChild(nt)):(nt.setAttribute("rowspan",Ve.rowSpan.toString()),(0,E.cn)([nt],"e-resource-column"),this.setResourceHeaderContent(nt,Ve,Ve.className[0]),y.appendChild(nt))}if(this.parent.activeViewOptions.group.byDate&&0===he&&"MonthAgenda"!==this.parent.currentView){const He=C.cloneNode();He.setAttribute("data-date",L.date.getTime().toString()),He.setAttribute("rowspan",q.toString()),He.appendChild(this.createDateHeaderElement(L.date)),(0,E.cn)([He],[ie,Ri,"e-date-border"]);const Ve=Er(this.parent.selectedDate.getTime(),L.date.getTime());if(y.setAttribute("aria-rowindex",Ve.toString()),this.parent.element.querySelector(`.e-agenda-view tr[aria-rowindex="${Ve}"]`))break;y.insertBefore(He,y.childNodes[0])}l.appendChild(y)}}createDateHeaderElement(o){let l;if(this.parent.activeViewOptions.dateHeaderTemplate){l=(0,E.az)("div",{className:ii});const d={date:o,type:"dateHeader"},L=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",q=[].slice.call(this.parent.getDateHeaderTemplate()(d,this.parent,"dateHeaderTemplate",L,!1));(0,E.R3)(q,l)}else l=this.getMobileDateElement(o,ii);return l}renderEmptyContent(o,l){const d=this.createTableRowElement(l,"noEvents"),y=d.children[0],C=(0,E.az)("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});y.appendChild(C),o.appendChild(d)}createTableRowElement(o,l){const d=Er(this.parent.selectedDate.getTime(),o.getTime()),y=(0,E.az)("tr",{attrs:{role:"row","aria-rowindex":d.toString()}}),C=(0,E.az)("td",{attrs:{class:"monthHeader"===l?"e-month-header":ie,role:"gridcell","aria-selected":"false","aria-colindex":d.toString(),"data-date":o.getTime().toString()}}),L=C.cloneNode(),q=C.cloneNode();return y.appendChild(L),"noEvents"!==l&&y.appendChild(q),y}destroy(){super.destroy()}}const pc=["dateHeaderTemplate"],$a=["dayHeaderTemplate"],Sp=["cellHeaderTemplate"],Ep=["cellTemplate"],Im=["eventTemplate"],Qd=["monthHeaderTemplate"],lh=["resourceHeaderTemplate"],Gh=["headerIndentTemplate"],ku=["timeScaleMinorSlotTemplate"],Sg=["timeScaleMajorSlotTemplate"],_i=["groupHeaderTooltipTemplate"],Dp=["template"],Xd=["eventSettingsTooltipTemplate"],Tp=["eventSettingsTemplate"],Fa=["editorTemplate"],Aa=["quickInfoTemplatesHeader"],Ih=["quickInfoTemplatesContent"],ah=["quickInfoTemplatesFooter"];var ua=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C},Za=function(ae,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ae,o)};let xf=["allowVirtualScrolling","cellHeaderTemplate","cellTemplate","dateFormat","dateHeaderTemplate","dayHeaderTemplate","displayDate","displayName","endHour","eventTemplate","firstDayOfWeek","firstMonthOfYear","group","headerIndentTemplate","headerRows","interval","isSelected","monthHeaderTemplate","monthsCount","numberOfWeeks","option","orientation","readonly","resourceHeaderTemplate","showWeekNumber","showWeekend","startHour","timeFormat","timeScale","workDays"],Af=[],hh=(()=>{class ae extends ot{constructor(l){super(),this.viewContainerRef=l,Pt("currentInstance",this,this.viewContainerRef),this.registerEvents(Af),this.directivePropList=xf}}return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.s_b))},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-view"]],contentQueries:function(l,d,y){if(1&l&&(ut.Suo(y,pc,5),ut.Suo(y,$a,5),ut.Suo(y,Sp,5),ut.Suo(y,Ep,5),ut.Suo(y,Im,5),ut.Suo(y,Qd,5),ut.Suo(y,lh,5),ut.Suo(y,Gh,5),ut.Suo(y,ku,5),ut.Suo(y,Sg,5),ut.Suo(y,_i,5)),2&l){let C;ut.iGM(C=ut.CRH())&&(d.dateHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.dayHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.cellHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.cellTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.eventTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.monthHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.resourceHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.headerIndentTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.timeScale_minorSlotTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.timeScale_majorSlotTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.group_headerTooltipTemplate=C.first)}},inputs:{allowVirtualScrolling:"allowVirtualScrolling",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",dayHeaderTemplate:"dayHeaderTemplate",displayDate:"displayDate",displayName:"displayName",endHour:"endHour",eventTemplate:"eventTemplate",firstDayOfWeek:"firstDayOfWeek",firstMonthOfYear:"firstMonthOfYear",group:"group",headerIndentTemplate:"headerIndentTemplate",headerRows:"headerRows",interval:"interval",isSelected:"isSelected",monthHeaderTemplate:"monthHeaderTemplate",monthsCount:"monthsCount",numberOfWeeks:"numberOfWeeks",option:"option",orientation:"orientation",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeFormat:"timeFormat",timeScale:"timeScale",workDays:"workDays"},features:[ut.qOj]}),ua([wt(),Za("design:type",Object)],ae.prototype,"dateHeaderTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"dayHeaderTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"cellHeaderTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"cellTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"eventTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"monthHeaderTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"resourceHeaderTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"headerIndentTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"timeScale_minorSlotTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"timeScale_majorSlotTemplate",void 0),ua([wt(),Za("design:type",Object)],ae.prototype,"group_headerTooltipTemplate",void 0),ae})(),Ia=(()=>{class ae extends hi{constructor(){super("views")}}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-views"]],contentQueries:function(l,d,y){if(1&l&&ut.Suo(y,hh,4),2&l){let C;ut.iGM(C=ut.CRH())&&(d.children=C)}},features:[ut.qOj]}),ae})(),ys=["allowMultiple","colorField","cssClassField","dataSource","endHourField","expandedField","field","groupIDField","idField","name","query","startHourField","textField","title","workDaysField"],Eg=[],so=(()=>{class ae extends ot{constructor(l){super(),this.viewContainerRef=l,Pt("currentInstance",this,this.viewContainerRef),this.registerEvents(Eg),this.directivePropList=ys}}return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.s_b))},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-resource"]],inputs:{allowMultiple:"allowMultiple",colorField:"colorField",cssClassField:"cssClassField",dataSource:"dataSource",endHourField:"endHourField",expandedField:"expandedField",field:"field",groupIDField:"groupIDField",idField:"idField",name:"name",query:"query",startHourField:"startHourField",textField:"textField",title:"title",workDaysField:"workDaysField"},features:[ut.qOj]}),ae})(),If=(()=>{class ae extends hi{constructor(){super("resources")}}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-resources"]],contentQueries:function(l,d,y){if(1&l&&ut.Suo(y,so,4),2&l){let C;ut.iGM(C=ut.CRH())&&(d.children=C)}},features:[ut.qOj]}),ae})(),Rf=["option","template"],Ou=[],Lu=(()=>{class ae extends ot{constructor(l){super(),this.viewContainerRef=l,Pt("currentInstance",this,this.viewContainerRef),this.registerEvents(Ou),this.directivePropList=Rf}}return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.s_b))},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-header-row"]],contentQueries:function(l,d,y){if(1&l&&ut.Suo(y,Dp,5),2&l){let C;ut.iGM(C=ut.CRH())&&(d.template=C.first)}},inputs:{option:"option",template:"template"},features:[ut.qOj]}),ae})();!function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);y>3&&C&&Object.defineProperty(o,l,C)}([wt(),function(ae,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],Lu.prototype,"template",void 0);let Tg=(()=>{class ae extends hi{constructor(){super("headerrows")}}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275dir=ut.lG2({type:ae,selectors:[["e-header-rows"]],contentQueries:function(l,d,y){if(1&l&&ut.Suo(y,Lu,4),2&l){let C;ut.iGM(C=ut.CRH())&&(d.children=C)}},features:[ut.qOj]}),ae})();var al=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C},la=function(ae,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ae,o)};const Sd=["actionBegin","actionComplete","actionFailure","cellClick","cellDoubleClick","created","dataBinding","dataBound","destroyed","drag","dragStart","dragStop","eventClick","eventRendered","hover","moreEventsClick","navigating","popupClose","popupOpen","renderCell","resizeStart","resizeStop","resizing","select","currentViewChange","selectedDateChange"],Ed=["currentView","selectedDate"];let _o=(()=>{let ae=class extends vp{constructor(l,d,y,C){super(),this.ngEle=l,this.srenderer=d,this.viewContainerRef=y,this.injector=C,this.tags=["views","resources","headerRows"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let L=this.injector.get("ScheduleDay");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleWeek");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleWorkWeek");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleMonth");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleYear");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleAgenda");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleMonthAgenda");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleTimelineViews");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleTimelineMonth");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleTimelineYear");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleResize");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleDragAndDrop");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleExcelExport");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleICalendarExport");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("ScheduleICalendarImport");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}try{let L=this.injector.get("SchedulePrint");-1===this.injectedModules.indexOf(L)&&this.injectedModules.push(L)}catch{}this.registerEvents(Sd),this.addTwoWay.call(this,Ed),Pt("currentInstance",this,this.viewContainerRef),this.context=new Ui}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childViews,this.childResources&&(this.tagObjects[1].instance=this.childResources),this.childHeaderRows&&(this.tagObjects[2].instance=this.childHeaderRows),this.context.ngAfterContentChecked(this)}};return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.SBq),ut.Y36(ut.Qsj),ut.Y36(ut.s_b),ut.Y36(ut.zs3))},ae.\u0275cmp=ut.Xpm({type:ae,selectors:[["ejs-schedule"]],contentQueries:function(l,d,y){if(1&l&&(ut.Suo(y,pc,5),ut.Suo(y,$a,5),ut.Suo(y,Ep,5),ut.Suo(y,Sp,5),ut.Suo(y,Xd,5),ut.Suo(y,Tp,5),ut.Suo(y,Fa,5),ut.Suo(y,Qd,5),ut.Suo(y,ku,5),ut.Suo(y,Sg,5),ut.Suo(y,lh,5),ut.Suo(y,Gh,5),ut.Suo(y,Aa,5),ut.Suo(y,Ih,5),ut.Suo(y,ah,5),ut.Suo(y,_i,5),ut.Suo(y,Ia,5),ut.Suo(y,If,5),ut.Suo(y,Tg,5)),2&l){let C;ut.iGM(C=ut.CRH())&&(d.dateHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.dayHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.cellTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.cellHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.eventSettings_tooltipTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.eventSettings_template=C.first),ut.iGM(C=ut.CRH())&&(d.editorTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.monthHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.timeScale_minorSlotTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.timeScale_majorSlotTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.resourceHeaderTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.headerIndentTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.quickInfoTemplates_header=C.first),ut.iGM(C=ut.CRH())&&(d.quickInfoTemplates_content=C.first),ut.iGM(C=ut.CRH())&&(d.quickInfoTemplates_footer=C.first),ut.iGM(C=ut.CRH())&&(d.group_headerTooltipTemplate=C.first),ut.iGM(C=ut.CRH())&&(d.childViews=C.first),ut.iGM(C=ut.CRH())&&(d.childResources=C.first),ut.iGM(C=ut.CRH())&&(d.childHeaderRows=C.first)}},inputs:{agendaDaysCount:"agendaDaysCount",allowDragAndDrop:"allowDragAndDrop",allowInline:"allowInline",allowKeyboardInteraction:"allowKeyboardInteraction",allowMultiCellSelection:"allowMultiCellSelection",allowMultiDrag:"allowMultiDrag",allowMultiRowSelection:"allowMultiRowSelection",allowResizing:"allowResizing",calendarMode:"calendarMode",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",cssClass:"cssClass",currentView:"currentView",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",dayHeaderTemplate:"dayHeaderTemplate",editorTemplate:"editorTemplate",enableAdaptiveUI:"enableAdaptiveUI",enableAllDayScroll:"enableAllDayScroll",enablePersistence:"enablePersistence",enableRecurrenceValidation:"enableRecurrenceValidation",enableRtl:"enableRtl",endHour:"endHour",eventDragArea:"eventDragArea",eventSettings:"eventSettings",firstDayOfWeek:"firstDayOfWeek",firstMonthOfYear:"firstMonthOfYear",group:"group",headerIndentTemplate:"headerIndentTemplate",headerRows:"headerRows",height:"height",hideEmptyAgendaDays:"hideEmptyAgendaDays",locale:"locale",maxDate:"maxDate",minDate:"minDate",monthHeaderTemplate:"monthHeaderTemplate",monthsCount:"monthsCount",quickInfoOnSelectionEnd:"quickInfoOnSelectionEnd",quickInfoTemplates:"quickInfoTemplates",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",resources:"resources",rowAutoHeight:"rowAutoHeight",selectedDate:"selectedDate",showHeaderBar:"showHeaderBar",showQuickInfo:"showQuickInfo",showTimeIndicator:"showTimeIndicator",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeFormat:"timeFormat",timeScale:"timeScale",timezone:"timezone",timezoneDataSource:"timezoneDataSource",views:"views",weekRule:"weekRule",width:"width",workDays:"workDays",workHours:"workHours"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",cellClick:"cellClick",cellDoubleClick:"cellDoubleClick",created:"created",dataBinding:"dataBinding",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",eventClick:"eventClick",eventRendered:"eventRendered",hover:"hover",moreEventsClick:"moreEventsClick",navigating:"navigating",popupClose:"popupClose",popupOpen:"popupOpen",renderCell:"renderCell",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",select:"select",currentViewChange:"currentViewChange",selectedDateChange:"selectedDateChange"},features:[ut.qOj],decls:0,vars:0,template:function(l,d){},encapsulation:2,changeDetection:0}),ae})();al([wt(),la("design:type",Object)],_o.prototype,"dateHeaderTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"dayHeaderTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"cellTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"cellHeaderTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"eventSettings_tooltipTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"eventSettings_template",void 0),al([wt(),la("design:type",Object)],_o.prototype,"editorTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"monthHeaderTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"timeScale_minorSlotTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"timeScale_majorSlotTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"resourceHeaderTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"headerIndentTemplate",void 0),al([wt(),la("design:type",Object)],_o.prototype,"quickInfoTemplates_header",void 0),al([wt(),la("design:type",Object)],_o.prototype,"quickInfoTemplates_content",void 0),al([wt(),la("design:type",Object)],_o.prototype,"quickInfoTemplates_footer",void 0),al([wt(),la("design:type",Object)],_o.prototype,"group_headerTooltipTemplate",void 0),_o=al([Oi([Ui]),la("design:paramtypes",[ut.SBq,ut.Qsj,ut.s_b,ut.zs3])],_o);const fc={provide:"ScheduleDay",useValue:class wf extends Iu{constructor(o){super(o),this.viewClass="e-day-view"}getModuleName(){return"day"}}},Gc={provide:"ScheduleWeek",useValue:class bp extends Iu{constructor(o){super(o),this.viewClass="e-week-view"}startDate(){return this.getViewStartDate()}endDate(){return this.getViewEndDate()}getModuleName(){return"week"}}},Yh={provide:"ScheduleWorkWeek",useValue:class Cp extends Iu{constructor(o){super(o),this.viewClass="e-work-week-view"}startDate(){return this.getViewStartDate()}endDate(){return this.getViewEndDate()}getModuleName(){return"workWeek"}}},Ap={provide:"ScheduleMonth",useValue:class Ru extends Jd{constructor(o){super(o),this.dayNameFormat="wide",this.viewClass="e-month-view",this.isInverseTableSelect=!1,this.monthEvent=null,this.monthDates={}}addEventListener(){this.parent.on(ln,this.onScrollUIUpdate,this),this.parent.on(Ln,this.onDataReady,this),this.parent.on(Kn,this.onCellClick,this)}removeEventListener(){this.parent&&(this.parent.off(ln,this.onScrollUIUpdate),this.parent.off(Ln,this.onDataReady),this.parent.off(Kn,this.onCellClick))}onDataReady(o){this.monthEvent=new Oc(this.parent),this.monthEvent.renderAppointments(),this.parent.notify(Rr,{})}onCellClick(o){}onContentScroll(o){this.parent.removeNewEventElement(),this.parent.notify(cn,o),this.scrollTopPanel(o.target),this.scrollLeftPanel(o.target),this.setPersistence()}scrollLeftPanel(o){const l=this.getLeftPanelElement();l&&(l.scrollTop=o.scrollTop)}getLeftPanelElement(){return this.element.querySelector("."+Mr)}onScrollUIUpdate(o){const l=this.getHeaderBarHeight(),d=this.getDatesHeaderElement(),y=this.getContentAreaElement(),C=this.parent.element.offsetHeight-l-d.offsetHeight,L=this.getLeftPanelElement();"auto"!==this.parent.height&&this.setContentHeight(y,L,C);const q=Vs();if(d.firstElementChild.style[o.cssProperties.rtlBorder]="",d.style[o.cssProperties.rtlPadding]="",y.offsetWidth-y.clientWidth>0?(d.firstElementChild.style[o.cssProperties.border]=q>0?"1px":"0px",d.style[o.cssProperties.padding]=q>0?q-1+"px":"0px"):(d.firstElementChild.style[o.cssProperties.border]="",d.style[o.cssProperties.padding]=""),this.setColWidth(y),o.scrollPosition)L&&(L.scrollTop=o.scrollPosition.top),y.scrollTop=o.scrollPosition.top,y.scrollLeft=o.scrollPosition.left;else{const X=this.element.querySelector("."+Ce+'[data-date="'+this.parent.selectedDate.getTime().toString()+'"]');y.scrollLeft=(0,E.le)(X)?0:this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-X.offsetLeft-X.offsetWidth):X.offsetLeft}this.retainScrollPosition()}setContentHeight(o,l,d){o.style.height="auto","Month"===this.parent.currentView&&(o.style.height=(0,E.Ac)(d)),l&&("MonthAgenda"===this.parent.currentView&&(d=this.element.querySelector("."+ks).offsetHeight),l.style.height="auto",l.style.height=(0,E.Ac)(d-this.getScrollXIndent(o)))}generateColumnLevels(){let o=[];const l=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(o=this.parent.resourceBase.generateResourceLevels(l),"MonthAgenda"===this.parent.currentView&&(o=[l]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){const d=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];o=[this.getDateSlots(d.renderDates,d.workDays)]}}else o.push(l);return this.colLevels=o,o}getDateSlots(o,l){const d=this.parent.activeViewOptions.showWeekend?7:l.length,y=[],C=this.isCurrentMonth(this.parent.selectedDate);for(let L=0;L<d;L++){const q=[Ce],X=o.slice(0,d).map(he=>he.getDay());C&&X.indexOf(this.parent.getCurrentTime().getDay())===L&&q.push(sn),y.push({date:o[L],type:"monthDay",className:q,colSpan:1,workDays:l})}return y}getDayNameFormat(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"}renderLayout(o){this.dayNameFormat=this.getDayNameFormat(),this.setPanel((0,E.az)("div",{className:G}));const l=[this.viewClass];l.push(o),this.parent.activeViewOptions.group.byDate&&l.push("e-by-date"),this.parent.activeViewOptions.allowVirtualScrolling&&l.push(th),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&l.push(Ll),(0,E.cn)([this.element],l),this.renderPanel(o),this.element.appendChild(this.createTableLayout(ye)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();const d="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!d.querySelector("."+Rn)&&this.renderResourceMobileLayout(),this.parent.notify(rs,{}),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)}refreshHeader(){(0,E.Od)(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(rs,{})}wireCellEvents(o){E.bi.add(o,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),E.bi.add(o,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||E.bi.add(o,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)}renderHeader(){const o=(0,E.az)("tr");this.renderLeftIndent(o);const l=(0,E.az)("td");l.appendChild(this.renderDatesHeader()),o.appendChild(l),(0,E.Ce)([o],this.element.querySelector("tbody"))}renderLeftIndent(o){this.parent.activeViewOptions.showWeekNumber&&o.appendChild((0,E.az)("td",{className:"e-left-indent"}))}renderContent(){const o=(0,E.az)("tr");this.parent.activeViewOptions.showWeekNumber&&o.appendChild(this.renderWeekNumberContent());const l=(0,E.az)("td"),d=(0,E.az)("div",{className:ee}),y=this.renderContentArea();if("Month"===this.parent.currentView)d.appendChild(y);else{const C=(0,E.az)("div",{className:ur});C.appendChild(y),d.appendChild(C)}E.bi.add(d,"scroll",this.onContentScroll,this),l.appendChild(d),o.appendChild(l),this.element.querySelector("tbody").appendChild(o),this.renderAppointmentContainer()}renderWeekNumberContent(){const o=this.renderDates.map(L=>new Date(+L)),l=(0,E.az)("td"),d=(0,E.az)("div",{className:Mr});l.appendChild(d);const y=this.createTableLayout();d.appendChild(y);const C=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length;for(let L=0,q=this.renderDates.length/C;L<q;L++){const X=o.splice(0,C),he=this.parent.getWeekNumberContent(X);y.querySelector("tbody").appendChild(this.createWeekNumberElement(he))}return l}renderAppointmentContainer(){}renderDatesHeader(){const o=(0,E.az)("div",{className:fe}),l=(0,E.az)("div",{className:$});o.appendChild(l);const d=this.createTableLayout();this.createColGroup(d,this.colLevels[this.colLevels.length-1]);const y=(0,E.az)("tr");for(let C=0;C<this.colLevels.length;C++){const L=this.colLevels[C],q=y.cloneNode();for(let X=0;X<L.length;X++)q.appendChild(this.createHeaderCell(L[X]));d.querySelector("tbody").appendChild(q)}return l.appendChild(d),o}createHeaderCell(o){const l=(0,E.az)("td");if(this.addAttributes(o,l),"monthDay"===o.type){const y=(0,E.az)("span",{innerHTML:Bs(this.parent.getDayNames(this.dayNameFormat)[o.date.getDay()],"single")});l.appendChild(y)}if("resourceHeader"===o.type&&this.setResourceHeaderContent(l,o),"dateHeader"===o.type){if((0,E.cn)([l],Mi),l.setAttribute("data-date",o.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){const y={date:o.date,type:o.type},q=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",X=[].slice.call(this.parent.getDateHeaderTemplate()(y,this.parent,"dateHeaderTemplate",q,!1));X&&X.length&&(0,E.R3)(X,l)}else{const y=(0,E.az)("span",{className:qi}),L=this.parent.globalize.formatDate(o.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});y.setAttribute("title",Bs(L,"multiple"));const q=!this.parent.calendarUtil.isMonthStart(o.date)||this.isCurrentDate(o.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(o.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(o.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});y.innerHTML=Bs(q,"single"),l.appendChild(y)}this.wireCellEvents(l)}return this.parent.trigger(gi,{elementType:o.type,element:l,date:o.date,groupIndex:o.groupIndex}),l}getContentSlots(){if(!this.colLevels[this.colLevels.length-1]||!this.colLevels[this.colLevels.length-1][0])return[];const o=[],l=(y,C,L,q)=>{const X={date:new Date(+C),groupIndex:L.groupIndex,workDays:L.workDays,type:"monthCells",className:q||[xi]};o[y]||(o[y]=[]),o[y].push(X)},d="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!d||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate){const y=this.renderDates.map(L=>new Date(+L)),C=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length;for(let L=0;L<this.renderDates.length/C;L++){const q=y.splice(0,C);for(const X of q)if(d){const he=this.colLevels[this.colLevels.length-1],He=he.slice(0,he.length/C);for(let Ve=0;Ve<He.length;Ve++){let nt;0!==Ve&&(nt=[xi,"e-disable-date"]),l(L,X,He[Ve],nt)}}else l(L,X,this.colLevels[this.colLevels.length-1][0])}}else for(const y of this.colLevels[this.colLevels.length-2]){const C=y.renderDates.map(q=>new Date(+q)),L=this.parent.activeViewOptions.showWeekend?7:y.workDays.length;for(let q=0;q<y.renderDates.length/L;q++){const X=C.splice(0,L);for(const he of X)l(q,he,y)}}return o}updateClassList(o){!this.isCustomMonth()&&this.isOtherMonth(o.date)&&o.className.push(Vi),this.parent.isMinMaxDate(o.date)||o.className.push(Oh),"MonthAgenda"===this.parent.currentView&&this.parent.isSelectedDate(o.date)&&o.className.push(zr)}isOtherMonth(o){return o.getTime()<this.monthDates.start.getTime()||o.getTime()>this.monthDates.end.getTime()}renderContentArea(){const o=this.createTableLayout(ks);this.addAutoHeightClass(o),"TimelineMonth"===this.parent.currentView&&this.createColGroup(o,this.colLevels[this.colLevels.length-1]);const l=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(l),end:this.parent.calendarUtil.lastDateOfMonth(Io(l,this.parent.activeViewOptions.interval-1))};const d=o.querySelector("tbody");return(0,E.R3)(this.getContentRows(),d),this.wireCellEvents(d),o}getContentRows(){const o=[],l=(0,E.az)("tr",{attrs:{role:"row"}}),d=(0,E.az)("td",{attrs:{role:"gridcell","aria-selected":"false"}}),y=this.getContentSlots();for(let C=0;C<y.length;C++){const L=l.cloneNode();for(let q=0;q<y[C].length;q++){const X=this.createContentTd(y[C][q],d);L.appendChild(X)}o.push(L)}return o}createContentTd(o,l){const d=l.cloneNode();o.colSpan&&d.setAttribute("colspan",o.colSpan.toString()),this.updateClassList(o);let y=o.type;if(-1!==o.className.indexOf(un)&&(o.className.push(Bt),y="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(o.date,o.workDays)&&o.className.push("e-work-days"),this.isCurrentDate(o.date)&&o.className.push(ts),(0,E.cn)([d],o.className),d.setAttribute("data-date",o.date.getTime().toString()),(!(0,E.le)(o.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&d.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:o.groupIndex)),this.renderDateHeaderElement(o,d),this.parent.activeViewOptions.cellTemplate){const L={date:o.date,type:y,groupIndex:o.groupIndex},he=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",He=[].slice.call(this.parent.getCellTemplate()(L,this.parent,"cellTemplate",he,!1));(0,E.R3)(He,d)}return this.parent.trigger(gi,{elementType:y,element:d,date:o.date,groupIndex:o.groupIndex}),d}renderDateHeaderElement(o,l){if("TimelineMonth"===this.parent.currentView)return;const d=(0,E.az)("div",{className:Mi});if(this.parent.activeViewOptions.cellHeaderTemplate){const y={date:o.date,type:o.type,groupIndex:o.groupIndex},q=this.parent.element.id+"_"+this.parent.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate",X=[].slice.call(this.parent.getCellHeaderTemplate()(y,this.parent,"cellHeaderTemplate",q,!1));(0,E.R3)(X,d)}else{const y=!this.parent.calendarUtil.isMonthStart(o.date)||this.isCurrentDate(o.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(o.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(o.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});d.innerHTML=Bs(y,"single")}if(l.appendChild(d),"month"===this.getModuleName()){(0,E.cn)([d],qi);const C=this.parent.globalize.formatDate(o.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});d.setAttribute("aria-label",C)}}getMonthStart(o){const y=Jr("Month"!==this.parent.currentView||(0,E.le)(this.parent.activeViewOptions.displayDate)||!this.parent.uiStateValues.isCustomMonth&&!this.isCustomRange()?this.parent.uiStateValues.isCustomMonth||this.isCustomRange()||!this.isCustomMonth()?this.parent.calendarUtil.firstDateOfMonth(o):o:this.parent.activeViewOptions.displayDate,this.parent.activeViewOptions.firstDayOfWeek);return new Date(y.getFullYear(),y.getMonth(),y.getDate())}getMonthEnd(o){if(this.isCustomMonth())return os(this.getMonthStart(o),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1);{const l=Io(o,this.parent.activeViewOptions.interval-1);return os(Jr(this.parent.calendarUtil.lastDateOfMonth(l),this.parent.activeViewOptions.firstDayOfWeek),6)}}isCustomRange(){const o=this.parent.getCurrentViewDates();if(o&&o.length>0){const l=Bi(this.parent.selectedDate).getTime(),d=Jr(o[o.length-1],this.parent.activeViewOptions.firstDayOfWeek);return!(l>=Jr(o[0],this.parent.activeViewOptions.firstDayOfWeek).getTime()&&l<=os(d,6).getTime())}return!1}getRenderDates(o){const l=[],d=Bi(this.parent.selectedDate);let y=this.getMonthStart(d);const C=this.getMonthEnd(d);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(y,o))&&l.push(y),y=os(y,1),y.getHours()>0&&(y=Bi(y))}while(y.getTime()<=C.getTime());return o||(this.renderDates=l),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),l}getNextPreviousDate(o){if(this.isCustomMonth()){const l=this.parent.getCurrentViewDates();return os(Jr("next"===o?l[l.length-1]:l[0],this.parent.activeViewOptions.firstDayOfWeek),"next"===o?7:7*-(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6))}return Io(this.parent.selectedDate,("next"===o?1:-1)*this.parent.activeViewOptions.interval)}getStartDate(){return this.getMonthStart(this.parent.selectedDate)}getEndDate(){return this.getMonthEnd(this.parent.selectedDate)}getEndDateFromStartDate(o){return os(new Date(o.getTime()),1)}getDateRangeText(){if(this.parent.isAdaptive||(0,E.le)(this.parent.activeViewOptions.dateFormat)){let l,o=this.parent.selectedDate,d=!1;if(this.isCustomMonth()){const L=this.parent.getCurrentViewDates();d=L[0].getMonth()!==L[L.length-1].getMonth()||L[0].getFullYear()!==L[L.length-1].getFullYear(),d&&(o=L[0],l=L[L.length-1])}const y="Month"!==this.parent.currentView||!this.isCustomMonth();return this.parent.activeViewOptions.interval>1&&y||d?(l=l||Io(Zn(o),this.parent.activeViewOptions.interval-1),o.getFullYear()===l.getFullYear()?Bs(this.parent.globalize.formatDate(o,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(l,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(l,{skeleton:"y",calendar:this.parent.getCalendarMode()}),"single"):Bs(this.parent.globalize.formatDate(o,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+o.getFullYear()+" - "+this.parent.globalize.formatDate(l,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(l,{skeleton:"y",calendar:this.parent.getCalendarMode()}),"single")):Bs(this.parent.globalize.formatDate(o,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.parent.selectedDate)}getLabelText(o){return this.parent.localeObj.getConstant(o)+" of "+Bs(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}createWeekNumberElement(o){const l=(0,E.az)("tr"),d=(0,E.az)("td",{className:ko,attrs:{title:o?this.parent.localeObj.getConstant("week")+" "+o:""},innerHTML:o||""});return l.appendChild(d),this.parent.trigger(gi,{elementType:"weekNumberCell",element:d}),l}unWireEvents(){const o=this.element.querySelector("."+ee);o&&E.bi.remove(o,"scroll",this.onContentScroll)}isCustomMonth(){return"Month"===this.parent.currentView&&(!(0,E.le)(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)}getModuleName(){return"month"}destroy(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.monthEvent&&(this.monthEvent.destroy(),this.monthEvent=null),this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),super.destroy())}}},eu={provide:"ScheduleAgenda",useValue:class Sf extends Mu{constructor(o){super(o),this.viewClass="e-agenda-view",this.isInverseTableSelect=!1,this.agendaDates={},this.virtualScrollTop=1}getModuleName(){return"agenda"}renderLayout(){this.agendaDates={},this.element=(0,E.az)("div",{className:G}),(0,E.cn)([this.element],this.viewClass),this.element.appendChild(this.createTableLayout(ye)),this.element.querySelector("table").setAttribute("role","presentation"),this.parent.element.querySelector("."+ur).appendChild(this.element);const o=(0,E.az)("tr");this.element.querySelector("tbody").appendChild(o);const l=(0,E.az)("td");o.appendChild(l);const d=(0,E.az)("div",{className:ee});l.appendChild(d);const y=this.createTableLayout(ks);d.appendChild(y);const C=y.querySelector("tbody"),L=Bi(this.parent.selectedDate);this.renderEmptyContent(C,L),this.wireEvents(),this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+Rn)&&this.renderResourceMobileLayout(),this.parent.notify(rs,{})}eventLoad(o){this.dataSource=(0,E.l7)([],this.parent.eventsData,null,!0);for(const L of this.parent.eventsData)delete L.generatedDates;let l=this.parent.activeViewOptions.allowVirtualScrolling?o.processedData:this.parent.eventsProcessed;if(this.parent.uiStateValues.isGroupAdaptive){const L=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(L,this.dataSource),l=this.parent.eventBase.filterEventsByResource(L,l)}this.parent.eventsProcessed=this.processAgendaEvents(l);const d=Bi(this.parent.selectedDate),y=this.element.querySelector("."+ks+" tbody");yr(y),this.renderInitialContent(y,d),this.wireEventActions(),(0,E.oq)(y,"."+ee).scrollTop=1,this.parent.notify(Rr,{}),this.parent.activeViewOptions.allowVirtualScrolling||this.retainScrollPosition()}refreshEvent(o){let l=[];const d=this.parent.eventFields;for(const y of this.dataSource)(0,E.le)(y[d.recurrenceID])&&!(0,E.le)(y[d.recurrenceRule])&&!(0,E.le)(y.generatedDates)&&o>=y.generatedDates.end&&(l=l.concat(this.parent.eventBase.generateOccurrence(y,o)));this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.processAgendaEvents(l))}refreshHeader(){const o=this.element.querySelector("."+ks+" tbody");this.parent.activeViewOptions.group.byDate?yr(o):(0,E.Od)(o.firstElementChild);const l=Bi(this.parent.selectedDate),d=(0,E.az)("tbody"),y=new Date(l.getTime()),C=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(y):os(y,this.parent.agendaDaysCount);this.renderContent(d,y,C),(0,E.R3)([].slice.call(d.childNodes),o)}renderInitialContent(o,l){const d=(0,E.az)("tbody");let y=new Date(l.getTime()),C=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(y):os(y,this.parent.agendaDaysCount);if(this.renderContent(d,y,C),(0,E.R3)([].slice.call(d.childNodes),o),this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.parent.eventsData.length>0){const L=this.getContentAreaElement(),q=L.querySelector(".e-content-table");for(;L.offsetWidth<=L.clientWidth&&!(this.parent.isAdaptive&&q.offsetHeight>=L.clientHeight);){const X=(0,E.az)("tbody");if(C=y,y=os(C,-this.parent.agendaDaysCount),this.renderContent(X,y,C),(0,E.Ce)([].slice.call(X.childNodes),o),y<=this.parent.minDate)break}}o.childNodes.length<=0&&this.renderEmptyContent(o,l)}renderContent(o,l,d){const y=this.parent.eventFields,C=new Date(l.getTime()),L=this.appointmentFiltering(C,d);let q;if(L.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&(l=L[0][y.startTime],l=new Date(new Date(l.getTime()).setHours(0,0,0,0)),this.updateHeaderText(L[0][y.startTime])),!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&L.length>0){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){let X=l;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,X=C,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))),this.calculateResourceTableElement(o,this.parent.agendaDaysCount,X)}else for(let X=0;X<this.parent.agendaDaysCount;X++){const he=this.appointmentFiltering(l),He=this.createTableRowElement(l,"data");if(this.element.querySelector('tr[aria-rowindex="'+parseInt(He.getAttribute("aria-rowindex"),10)+'"]')){l=os(l,1);continue}const Ve=He.children[0],nt=He.children[1];if(he.length>0||!this.parent.hideEmptyAgendaDays&&0===he.length){const It=this.parent.hideEmptyAgendaDays||0!==he.length?"data":"noEvents";Ve.appendChild(this.createDateHeaderElement(l)),He.appendChild(Ve);const vt=this.createAgendaContentElement(It,he,nt);He.appendChild(vt),vt.querySelectorAll("li").length>0&&o.appendChild(He)}else this.parent.activeViewOptions.allowVirtualScrolling&&X--;if(this.isCurrentDate(new Date(l.getTime()))&&(0,E.cn)(Ve.childNodes,"e-current-day"),(l=os(l,1)).getTime()>d.getTime())break}q=new Date(l.getTime()-Cn)}this.agendaDates={start:C,end:q}}agendaScrolling(o){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(o),this.parent.activeViewOptions.allowVirtualScrolling||this.setPersistence()}virtualScrolling(o){const l=o.target,d=l.scrollTop,y=l.scrollHeight,L=d+l.clientHeight,q=this.virtualScrollTop<d?"next":"previous",X=l.querySelector("tbody"),he=(0,E.az)("tbody"),He=this.getElementFromScrollerPosition(o),Ve=this.parent.getDateFromElement(He);let nt,It;if(0===d){if(nt=this.getPreviousNextDate(os(Ve,-1),q),It=this.appointmentFiltering(nt.start,nt.end),It.length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(he,nt.start,nt.end),(0,E.Ce)([].slice.call(he.childNodes),X),this.wireEventActions();for(let mi=0,Ni=X.children;mi<Ni.length;mi++)if(Ni[mi].getAttribute("aria-rowindex")===He.getAttribute("aria-colindex")){const Ki=Ni[mi].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;l.scrollTop=Ki;break}this.updateHeaderText(Ve)}}else L>=y-5?(nt=this.getPreviousNextDate(os(Ve,1),q),It=this.appointmentFiltering(nt.start,nt.end),(It.length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(he,nt.start,nt.end),(0,E.R3)([].slice.call(he.childNodes),X),this.wireEventActions(),this.updateHeaderText(Ve))):this.updateHeaderText(Ve);this.virtualScrollTop=d;const vt=this.parent.eventBase.getSelectedAppointments();vt.length>0&&vt[vt.length-1].focus()}getElementFromScrollerPosition(o){let l;const d=o.target,y=d.scrollTop,C=d.scrollHeight,q=y+d.clientHeight,X=[].slice.call(d.querySelectorAll(".e-agenda-item"));let he,He;if(X.length>0)if(0===y)he=X[0],l=(0,E.oq)(he,"."+ie);else if(q===C)he=X[X.length-1],l=(0,E.oq)(he,"."+ie);else for(let Ve=0,nt=X.length;Ve<nt;Ve++)if(he=X[Ve],He=he.getBoundingClientRect(),He.top>=0){l=(0,E.oq)(he,"."+ie);break}return l}updateHeaderText(o){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(this.getDateRangeText(o))}getPreviousNextDate(o,l){let d=new Date(o.getTime());const y=this.getStartDateFromEndDate(o),C=this.getEndDateFromStartDate(o);let L=0;do{if((this.appointmentFiltering(d).length>0||!this.parent.hideEmptyAgendaDays)&&L++,d=os(d,"next"===l?1:-1),d<y||d>C)break}while(L!==this.parent.agendaDaysCount);const q=os(d,"next"===l?-1:1);return"next"===l?{start:o,end:os(q,1)}:{start:q,end:os(o,1)}}appointmentFiltering(o,l){let d,y;!(0,E.le)(o)&&(0,E.le)(l)?(d=Bi(new Date(o.getTime())),y=Hr(new Date(d.getTime()),Cn)):(d=new Date(o.getTime()),y=new Date(l.getTime()));let C=this.parent.eventBase.filterEvents(d,y);return 0===C.length&&(this.refreshEvent(o),C=this.parent.eventBase.filterEvents(d,y)),C}getStartDateFromEndDate(o){let l;const d=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){const y=Math.min(...this.parent.eventsProcessed.map(C=>C[d.startTime].getTime()));l=this.parent.hideEmptyAgendaDays?new Date(y):this.parent.minDate}else l=this.parent.hideEmptyAgendaDays?Io(o,-1):this.parent.minDate;return Bi(l)}getEndDateFromStartDate(o){let l;const d=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){const y=Math.max(...this.parent.eventsProcessed.map(C=>C[d.endTime].getTime()));l=this.parent.hideEmptyAgendaDays?new Date(y):this.parent.maxDate}else l=this.parent.hideEmptyAgendaDays?Io(o,1):this.parent.maxDate;return Bi(os(l,1))}getNextPreviousDate(o){return os(this.parent.selectedDate,"next"===o?1:-1)}startDate(){return Bi(this.parent.selectedDate)}endDate(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):os(this.startDate(),this.parent.agendaDaysCount)}getDateRangeText(o){const l=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){const d=(0,E.le)(o)?this.parent.selectedDate:o;return Bs(this.parent.globalize.formatDate(d,{format:l,calendar:this.parent.getCalendarMode()}),"multiple")}{const d=this.parent.selectedDate,y=os(d,this.parent.agendaDaysCount-1);return this.formatDateRange(d,y)}}dayNavigationClick(o){const l=(0,E.oq)(o.currentTarget,"."+ie),d=this.parent.getDateFromElement(l);!(0,E.le)(d)&&!this.parent.isAdaptive&&this.parent.isMinMaxDate(d)&&(this.parent.setProperties({selectedDate:d},!0),this.parent.changeView("Day",o))}wireEvents(){E.bi.add(this.element.querySelector("."+ee),"scroll",this.agendaScrolling,this)}unWireEvents(){E.bi.remove(this.element.querySelector("."+ee),"scroll",this.agendaScrolling);const o=[].slice.call(this.element.querySelectorAll(".e-m-date"));for(const l of o)E.bi.remove(l,"click",this.dayNavigationClick)}addEventListener(){this.parent.on(ln,this.onAgendaScrollUiUpdate,this),this.parent.on(Ln,this.eventLoad,this)}removeEventListener(){this.parent&&(this.parent.off(ln,this.onAgendaScrollUiUpdate),this.parent.off(Ln,this.eventLoad))}onAgendaScrollUiUpdate(){const o=this.getHeaderBarHeight();this.parent.headerModule&&this.parent.headerModule.updateHeaderItems(this.parent.activeViewOptions.allowVirtualScrolling?"add":"remove");const l=this.element.querySelector("."+ee);"auto"!==this.parent.height&&(l.style.height=(0,E.Ac)(this.parent.element.offsetHeight-o))}destroy(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"),super.destroy())}}},Rg=["change"],Mg=[];let Of=(()=>{let ae=class extends go{constructor(l,d,y,C){super(),this.ngEle=l,this.srenderer=d,this.viewContainerRef=y,this.injector=C,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Rg),this.addTwoWay.call(this,Mg),Pt("currentInstance",this,this.viewContainerRef),this.context=new Ui}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return ae.\u0275fac=function(l){return new(l||ae)(ut.Y36(ut.SBq),ut.Y36(ut.Qsj),ut.Y36(ut.s_b),ut.Y36(ut.zs3))},ae.\u0275cmp=ut.Xpm({type:ae,selectors:[["ejs-recurrenceeditor"]],inputs:{calendarMode:"calendarMode",cssClass:"cssClass",dateFormat:"dateFormat",enablePersistence:"enablePersistence",enableRtl:"enableRtl",firstDayOfWeek:"firstDayOfWeek",frequencies:"frequencies",locale:"locale",maxDate:"maxDate",minDate:"minDate",selectedType:"selectedType",startDate:"startDate",value:"value"},outputs:{change:"change"},features:[ut.qOj],decls:0,vars:0,template:function(l,d){},encapsulation:2,changeDetection:0}),ae})();Of=function(ae,o,l,d){var L,y=arguments.length,C=y<3?o:null===d?d=Object.getOwnPropertyDescriptor(o,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(ae,o,l,d);else for(var q=ae.length-1;q>=0;q--)(L=ae[q])&&(C=(y<3?L(C):y>3?L(o,l,C):L(o,l))||C);return y>3&&C&&Object.defineProperty(o,l,C),C}([Oi([Ui]),function(ae,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",o)}(0,[ut.SBq,ut.Qsj,ut.s_b,ut.zs3])],Of);var mc=rt(9952),Ka=rt(4383),Rh=rt(3544);let aa=(()=>{class ae{}return ae.\u0275fac=function(l){return new(l||ae)},ae.\u0275mod=ut.oAB({type:ae}),ae.\u0275inj=ut.cJS({providers:[At.sa3,At.mO3,At.U05,At.Okq,At.KxS,At.iZF,At.LkR,At.PhL,At.lTR,At._qr,gt.l,fc,Gc,Yh,Ap,eu],imports:[i.ez,Zt.UX,Si,We.p,Us,mc.lY,mc.Q,Ka.Rh.forRoot(),At.zE6,Lt.Ps]}),ae})();ut.B6R(Ue.O,function(){return[i.sg,i.O5,Rh.R,mc.S4,mc._z,u.b,Wt]},[])},6209:(An,hs,rt)=>{rt.d(hs,{f:()=>Li});var i=rt(529),u=rt(8274),Ue=rt(1302);let Zt=(()=>{class Lt{constructor(Si){this.storageService=Si}get getToken(){return{"x-access-token":this.storageService.getToken().split('"').join("")+""}}}return Lt.\u0275fac=function(Si){return new(Si||Lt)(u.LFG(Ue.V))},Lt.\u0275prov=u.Yz7({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})();var $e=rt(5452);let Li=(()=>{class Lt{constructor(Si,We,gt){this.http=Si,this.auth=We,this.helpService=gt,this.headers=new i.WM(this.auth.getToken)}callPostMethod(Si,We){return this.http.post(Si,We,{headers:this.headers})}callGetMethod(Si,We){void 0===We&&(We="");const gt=Si.endsWith("/")?Si+We:Si+"/"+We;return this.http.get(gt,{headers:this.headers})}packParametarPost(Si,We){let gt=[];if(We){for(let E=0;E<We.length;E++)gt[We[E].name]=Si[We[E].path];return gt}return{}}packParametarGet(Si,We){let gt=[];if(We)for(let E=0;E<We.length;E++)gt.push(Si[We[E]]);return gt.toString()}callApi(Si,We){if("POST"===Si.request.type)return Si.request.url&&(Si.body=this.helpService.postRequestDataParameters(Si.body,We.snapshot.params,Si.request.url)),this.callPostMethod(Si.request.api,Si.body);if(Si.request.url){const gt=this.helpService.getRequestDataParameters(We.snapshot.params,Si.request.url);return this.callGetMethod(Si.request.api,gt)}{const gt=this.helpService.getRequestDataParameters(We.snapshot.params,Si.request.parameters);return this.callGetMethod(Si.request.api,gt)}}callServerMethod(Si,We,gt){return Si.url&&(We=this.helpService.postRequestDataParameters(We,gt.snapshot.params,Si.url)),"POST"===Si.type?this.callPostMethod(Si.api,We):this.callGetMethod(Si.api,We)}getDocument(Si){return this.http.post("/api/upload/getDocument",Si,{responseType:"blob",headers:(new i.WM).append("Content-Type","application/json")})}}return Lt.\u0275fac=function(Si){return new(Si||Lt)(u.LFG(i.eN),u.LFG(Zt),u.LFG($e.s))},Lt.\u0275prov=u.Yz7({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})()},4937:(An,hs,rt)=>{rt.d(hs,{e:()=>Ue});var i=rt(8274),u=rt(529);let Ue=(()=>{class Zt{constructor(Li){this.http=Li}getConfiguration(Li,Lt){return this.http.get("../../assets/configurations/"+Li+"/"+Lt)}getLanguageForDashboard(Li){return this.http.get("../../assets/configurations/languages/dashboard/"+Li+".json")}getLanguageForLanding(Li){return this.http.get("../../assets/configurations/languages/landing/"+Li+".json")}getAllLangs(){return this.http.get("../../assets/configurations/languages/choose-lang.json")}}return Zt.\u0275fac=function(Li){return new(Li||Zt)(i.LFG(u.eN))},Zt.\u0275prov=i.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt})()},5452:(An,hs,rt)=>{rt.d(hs,{s:()=>We});var i=rt(8274);const u=new i.OlP("JWT_OPTIONS");let Ue=(()=>{class gt{constructor(at=null){this.tokenGetter=at&&at.tokenGetter||function(){}}urlBase64Decode(at){let Oe=at.replace(/-/g,"+").replace(/_/g,"/");switch(Oe.length%4){case 0:break;case 2:Oe+="==";break;case 3:Oe+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(Oe)}b64decode(at){let ft="";if((at=String(at).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let Nt,Di,jt=0,bt=0;Di=at.charAt(bt++);~Di&&(Nt=jt%4?64*Nt+Di:Di,jt++%4)?ft+=String.fromCharCode(255&Nt>>(-2*jt&6)):0)Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(Di);return ft}b64DecodeUnicode(at){return decodeURIComponent(Array.prototype.map.call(this.b64decode(at),Oe=>"%"+("00"+Oe.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(at=this.tokenGetter()){return at instanceof Promise?at.then(Oe=>this._decodeToken(Oe)):this._decodeToken(at)}_decodeToken(at){if(!at||""===at)return null;const Oe=at.split(".");if(3!==Oe.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const ft=this.urlBase64Decode(Oe[1]);if(!ft)throw new Error("Cannot decode the token.");return JSON.parse(ft)}getTokenExpirationDate(at=this.tokenGetter()){return at instanceof Promise?at.then(Oe=>this._getTokenExpirationDate(Oe)):this._getTokenExpirationDate(at)}_getTokenExpirationDate(at){let Oe;if(Oe=this.decodeToken(at),!Oe||!Oe.hasOwnProperty("exp"))return null;const ft=new Date(0);return ft.setUTCSeconds(Oe.exp),ft}isTokenExpired(at=this.tokenGetter(),Oe){return at instanceof Promise?at.then(ft=>this._isTokenExpired(ft,Oe)):this._isTokenExpired(at,Oe)}_isTokenExpired(at,Oe){if(!at||""===at)return!0;const ft=this.getTokenExpirationDate(at);return Oe=Oe||0,null!==ft&&!(ft.valueOf()>(new Date).valueOf()+1e3*Oe)}getAuthScheme(at,Oe){return"function"==typeof at?at(Oe):at}}return gt.\u0275fac=function(at){return new(at||gt)(i.LFG(u))},gt.\u0275prov=i.Yz7({token:gt,factory:gt.\u0275fac}),gt})();var Lt=(()=>{return(gt=Lt||(Lt={}))[gt.superadmin=1]="superadmin",gt[gt.user=2]="user",Lt;var gt})(),ut=(()=>{return(gt=ut||(ut={})).pdf="application/pdf",gt.default="description",ut;var gt})(),Si=rt(1302);let We=(()=>{class gt{constructor(at){this.storageService=at,this.helper=new Ue}postRequestDataParameters(at,Oe,ft){for(let jt=0;jt<ft.length;jt++)at[ft[jt]]=Oe[ft[jt]];return at}getRequestDataParameters(at,Oe){let ft="";if(Oe)for(let jt=0;jt<Oe.length;jt++)ft+=at[Oe[jt]]+"/";return ft}getDecodeToken(){return this.helper.decodeToken(this.storageService.getToken()).user}setLocalStorage(at,Oe){localStorage.setItem(at,"string"==typeof Oe?Oe:JSON.stringify(Oe))}getLocalStorageStringValue(at){return localStorage.getItem(at)}getHeightForGridWithoutPx(at){let Oe=window.innerHeight;return Oe=Number(at?Oe-303:Oe-267),"horizontal"===this.getLocalStorageStringValue("orientation")&&(window.innerWidth>992?Oe-=60:Oe-=20),Oe}setLanguage(at){localStorage.setItem("language","string"==typeof at?at:JSON.stringify(at))}getLanguage(){return localStorage.getItem("language")?JSON.parse(localStorage.getItem("language")??"{}"):null}concatenatePageLink(at,Oe,ft){let jt="";for(let Nt=0;Nt<Oe.length;Nt++)jt+=ft[Oe[Nt]]+"/";return at.endsWith("/")?at+jt:at+"/"+jt}getFileTypeIcon(at){return at===ut.pdf?"picture_as_pdf":"description"}getTypeOfName(at){for(var Oe in Lt)if(Number(Oe)===at)return Lt[Oe];return Lt[Lt.user]}checkRights(at){const Oe=this.getTypeOfName(this.getDecodeToken().type);if(at){for(let ft=0;ft<at.length;ft++)if(at[ft]===Oe)return!0;return!1}return!0}getUserNameFromToken(){const at=this.getDecodeToken();return at.firstname?at.firstname:at.lastname}}return gt.\u0275fac=function(at){return new(at||gt)(i.LFG(Si.V))},gt.\u0275prov=i.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})()},2684:(An,hs,rt)=>{rt.d(hs,{e:()=>Ue});var i=rt(7579),u=rt(8274);let Ue=(()=>{class Zt{constructor(){this.refreshGrid=new i.x,this.refreshFormDataAfterUpdate=new i.x,this.orientation=new i.x}sendRefreshGrid(){this.refreshGrid.next(null)}getRefreshGrid(){return this.refreshGrid.asObservable()}sendRefreshFormDataAfterUpdate(){this.refreshFormDataAfterUpdate.next(null)}getRefreshFormDataAfterUpdate(){return this.refreshFormDataAfterUpdate.asObservable()}sendOrientation(Li){this.orientation.next(Li)}getOrientation(){return this.orientation.asObservable()}}return Zt.\u0275fac=function(Li){return new(Li||Zt)},Zt.\u0275prov=u.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt})()},1302:(An,hs,rt)=>{rt.d(hs,{V:()=>Zt});var i=rt(8274),u=rt(6895);let Ue=(()=>{class $e{constructor(Lt,ut){this.document=Lt,this.platformId=ut,this.documentIsAccessible=(0,u.NF)(this.platformId)}static getCookieRegExp(Lt){const ut=Lt.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+ut+"|;\\s*"+ut+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(Lt){try{return decodeURIComponent(Lt)}catch{return Lt}}check(Lt){return!!this.documentIsAccessible&&(Lt=encodeURIComponent(Lt),$e.getCookieRegExp(Lt).test(this.document.cookie))}get(Lt){if(this.documentIsAccessible&&this.check(Lt)){Lt=encodeURIComponent(Lt);const Si=$e.getCookieRegExp(Lt).exec(this.document.cookie);return Si[1]?$e.safeDecodeURIComponent(Si[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const Lt={},ut=this.document;return ut.cookie&&""!==ut.cookie&&ut.cookie.split(";").forEach(Si=>{const[We,gt]=Si.split("=");Lt[$e.safeDecodeURIComponent(We.replace(/^ /,""))]=$e.safeDecodeURIComponent(gt)}),Lt}set(Lt,ut,Si,We,gt,E,at){if(!this.documentIsAccessible)return;if("number"==typeof Si||Si instanceof Date||We||gt||E||at)return void this.set(Lt,ut,{expires:Si,path:We,domain:gt,secure:E,sameSite:at||"Lax"});let Oe=encodeURIComponent(Lt)+"="+encodeURIComponent(ut)+";";const ft=Si||{};ft.expires&&(Oe+="number"==typeof ft.expires?"expires="+new Date((new Date).getTime()+1e3*ft.expires*60*60*24).toUTCString()+";":"expires="+ft.expires.toUTCString()+";"),ft.path&&(Oe+="path="+ft.path+";"),ft.domain&&(Oe+="domain="+ft.domain+";"),!1===ft.secure&&"None"===ft.sameSite&&(ft.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${Lt} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),ft.secure&&(Oe+="secure;"),ft.sameSite||(ft.sameSite="Lax"),Oe+="sameSite="+ft.sameSite+";",this.document.cookie=Oe}delete(Lt,ut,Si,We,gt="Lax"){if(!this.documentIsAccessible)return;const E=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(Lt,"",{expires:E,path:ut,domain:Si,secure:We,sameSite:gt})}deleteAll(Lt,ut,Si,We="Lax"){if(!this.documentIsAccessible)return;const gt=this.getAll();for(const E in gt)gt.hasOwnProperty(E)&&this.delete(E,Lt,ut,Si,We)}}return $e.\u0275fac=function(Lt){return new(Lt||$e)(i.LFG(u.K0),i.LFG(i.Lbi))},$e.\u0275prov=i.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})(),Zt=(()=>{class $e{constructor(Lt){this.cookieService=Lt}setSessionStorage(Lt,ut){sessionStorage.setItem(Lt,JSON.stringify(ut))}getSessionStorageSimple(Lt){return sessionStorage.getItem(Lt)}getSessionStorageObject(Lt){return JSON.parse(JSON.stringify(sessionStorage.getItem(Lt)))}removeAllSessionStorage(){sessionStorage.clear()}removeSessionStorage(Lt){sessionStorage.removeItem(Lt)}setLocalStorage(Lt,ut){localStorage.setItem(Lt,JSON.stringify(ut))}getLocalStorageSimple(Lt){return localStorage.getItem(Lt)}getLocalStorageObject(Lt){return JSON.parse(JSON.stringify(localStorage.getItem(Lt)))}removeAllLocalStorage(){localStorage.clear()}removeLocalStorage(Lt){localStorage.removeItem(Lt)}setToken(Lt){this.cookieService.set("token",Lt,{expires:1,path:"/",sameSite:"Lax"})}getToken(){return this.cookieService.get("token")}deleteToken(){this.cookieService.delete("token","/")}}return $e.\u0275fac=function(Lt){return new(Lt||$e)(i.LFG(Ue))},$e.\u0275prov=i.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})()},3356:(An,hs,rt)=>{rt.d(hs,{p:()=>u});var i=rt(8274);let u=(()=>{class Ue{}return Ue.\u0275fac=function($e){return new($e||Ue)},Ue.\u0275mod=i.oAB({type:Ue}),Ue.\u0275inj=i.cJS({}),Ue})()},3970:(An,hs,rt)=>{var i=rt(1481),u=rt(8274),Ue=rt(7685),Zt=rt(4937),$e=rt(5452),Li=rt(1302),Lt=rt(6895),ut=rt(9952);function Si(Ze,ne){if(1&Ze&&(u.TgZ(0,"a",12),u._uU(1),u.qZA()),2&Ze){const le=ne.$implicit;u.s9C("routerLink",le.link),u.xp6(1),u.hij(" ",le.title," ")}}function We(Ze,ne){if(1&Ze){const le=u.EpF();u.TgZ(0,"button",13),u.NdJ("select",function(Ye){u.CHM(le);const Ct=u.oxw();return u.KtG(Ct.profileIconSelectEvent(Ye))}),u.qZA()}if(2&Ze){const le=u.oxw();u.s9C("content",le.username),u.Q6J("items",le.items)}}let gt=(()=>{class Ze{constructor(le,De,Ye,Ct){this.configurationService=le,this.helpService=De,this.router=Ye,this.storageService=Ct,this.menu=[],this.items=[{text:"Pode\u0161avanja",id:"settings",iconCss:"e-icons e-settings"},{separator:!0},{text:"Odjavi se",id:"logout"}]}ngOnInit(){this.language=this.helpService.getLanguage(),this.initializationMenu(),this.username=this.helpService.getUserNameFromToken()}initializationMenu(){this.configurationService.getConfiguration("/navigation-menu","navigation-menu.json").subscribe(le=>{for(let De=0;De<le.length;De++)if(le[De].rights)this.helpService.checkRights(le[De].rights)&&this.menu.push(le[De]);else if(le[De].menu)for(let Ye=0;Ye<le[De].menu.length;Ye++)this.helpService.checkRights(le[De].menu[Ye].rights)&&this.menu.push(le[De])})}profileIconSelectEvent(le){switch(le.item.id){case"settings":this.router.navigate(["dashboard/settings/change-personal-info"]);break;case"logout":this.logout()}}logout(){this.storageService.deleteToken(),this.router.navigate(["/login"])}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.Y36(Zt.e),u.Y36($e.s),u.Y36(Ue.F0),u.Y36(Li.V))},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-navigation"]],decls:14,vars:2,consts:[[1,"header"],[1,"header-content","responsive-wrapper"],[1,"header-logo"],["routerLink","/"],["src","../../../assets/images/logo.png",1,"logo"],[1,"header-navigation"],[1,"header-navigation-links"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"header-navigation-actions"],["ejs-dropdownbutton","","class","background-none",3,"items","content","select",4,"ngIf"],["href","#",1,"button"],[1,"fa","fa-list"],[3,"routerLink"],["ejs-dropdownbutton","",1,"background-none",3,"items","content","select"]],template:function(le,De){1&le&&(u.TgZ(0,"header",0)(1,"div",1)(2,"div",2)(3,"a",3),u._UZ(4,"img",4),u.qZA()(),u.TgZ(5,"div",5)(6,"nav",6),u.YNc(7,Si,2,2,"a",7),u.qZA(),u.TgZ(8,"div",8),u.YNc(9,We,1,2,"button",9),u.qZA()(),u.TgZ(10,"a",10),u._UZ(11,"i",11),u.TgZ(12,"span"),u._uU(13,"Menu"),u.qZA()()()()),2&le&&(u.xp6(7),u.Q6J("ngForOf",De.menu),u.xp6(2),u.Q6J("ngIf",De.items))},dependencies:[Lt.sg,Lt.O5,Ue.yS,ut._z],styles:['img[_ngcontent-%COMP%]{display:block;max-width:100%}[_ngcontent-%COMP%]:focus{outline:0}.header[_ngcontent-%COMP%]{display:flex;align-items:center;height:80px;border-bottom:1px solid var(--c-border-primary);background-color:var(--c-background-primary)}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center}.header-content[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:none}@media (max-width: 1200px){.header-content[_ngcontent-%COMP%]{justify-content:space-between}.header-content[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:inline-flex}}.header-logo[_ngcontent-%COMP%]{margin-right:2.5rem}.header-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.header-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-shrink:0;position:relative}.header-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{display:block;content:"";position:absolute;inset:auto 0 0;overflow:hidden;height:50%;border-bottom-left-radius:8px;border-bottom-right-radius:8px;background-color:#fff3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.header-navigation[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:center;justify-content:space-between}@media (max-width: 1200px){.header-navigation[_ngcontent-%COMP%]{display:none}}.header-navigation-links[_ngcontent-%COMP%]{display:flex;align-items:center}.header-navigation-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--c-text-action);font-weight:700;transition:.15s ease}.header-navigation-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:1.5rem}.header-navigation-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header-navigation-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:var(--c-accent-primary)}.header-navigation-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.header-navigation-actions[_ngcontent-%COMP%] > .avatar[_ngcontent-%COMP%]{margin-left:.75rem}.header-navigation-actions[_ngcontent-%COMP%] > .icon-button[_ngcontent-%COMP%] + .icon-button[_ngcontent-%COMP%]{margin-left:.25rem}.header-navigation-actions[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] + .icon-button[_ngcontent-%COMP%]{margin-left:1rem}.button[_ngcontent-%COMP%]{font:inherit;color:inherit;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;padding:0 1em;height:40px;border-radius:8px;line-height:1;border:2px solid var(--c-border-primary);color:var(--c-text-action);font-size:.875rem;transition:.15s ease;background-color:var(--c-background-primary)}.button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.25em}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.button[_ngcontent-%COMP%]:hover, .button[_ngcontent-%COMP%]:focus{border-color:var(--c-accent-primary);color:var(--c-accent-primary)}.icon-button[_ngcontent-%COMP%]{font:inherit;color:inherit;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;color:var(--c-text-action);transition:.15s ease}.icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25em}.icon-button[_ngcontent-%COMP%]:focus, .icon-button[_ngcontent-%COMP%]:hover{background-color:var(--c-background-tertiary);color:var(--c-accent-primary)}.avatar[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:50%;overflow:hidden}.logo[_ngcontent-%COMP%]{width:150px}']}),Ze})(),E=(()=>{class Ze{constructor(){}ngOnInit(){}}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[[1,"container"]],template:function(le,De){1&le&&(u.TgZ(0,"div",0),u._UZ(1,"app-navigation")(2,"router-outlet"),u.qZA())},dependencies:[Ue.lC,gt],styles:['@import"https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap";[_ngcontent-%COMP%]:root{--c-text-primary: #282a32;--c-text-secondary: #686b87;--c-text-action: #404089;--c-accent-primary: #434ce8;--c-border-primary: #eff1f6;--c-background-primary: #ffffff;--c-background-secondary: #fdfcff;--c-background-tertiary: #ecf3fe;--c-background-quaternary: #e9ecf4}body[_ngcontent-%COMP%]{line-height:1.5;min-height:100vh;font-family:Be Vietnam Pro,sans-serif;background-color:var(--c-background-secondary);color:var(--c-text-primary)}img[_ngcontent-%COMP%]{display:block;max-width:100%}[_ngcontent-%COMP%]:focus{outline:0}.main[_ngcontent-%COMP%]{padding-top:3rem}.main-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between}.main-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;line-height:1.25}@media (max-width: 550px){.main-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1rem}}.search[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%;max-width:340px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font:inherit;color:inherit;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;padding:0 1em 0 36px;height:40px;border-radius:8px;border:2px solid var(--c-border-primary);color:var(--c-text-action);font-size:.875rem;transition:.15s ease;width:100%;line-height:1}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--c-text-action)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:var(--c-accent-primary)}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;border:0;background-color:transparent;position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:1.25em;color:var(--c-text-action);padding:0;height:40px}.horizontal-tabs[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;align-items:center;overflow-x:auto}@media (max-width: 1000px){.horizontal-tabs[_ngcontent-%COMP%]{scrollbar-width:none;position:relative}.horizontal-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}}.horizontal-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;flex-shrink:0;align-items:center;height:48px;padding:0 .25rem;font-weight:500;color:inherit;border-bottom:3px solid transparent;text-decoration:none;transition:.15s ease}.horizontal-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .horizontal-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .horizontal-tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--c-accent-primary);border-bottom-color:var(--c-accent-primary)}.horizontal-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:1rem}.content-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding-top:3rem;margin-top:-1px;border-top:1px solid var(--c-border-primary)}.content-header-intro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.content-header-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--c-text-secondary);margin-top:.25rem;font-size:.875rem;margin-bottom:1rem}@media (min-width: 800px){.content-header-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{display:none}}.content[_ngcontent-%COMP%]{border-top:1px solid var(--c-border-primary);margin-top:2rem;display:flex;align-items:flex-start}.content-panel[_ngcontent-%COMP%]{display:none;max-width:280px;width:25%;padding:2rem 1rem 2rem 0;margin-right:3rem}@media (min-width: 800px){.content-panel[_ngcontent-%COMP%]{display:block}}.vertical-tabs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.vertical-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75em 1em;background-color:transparent;border-radius:8px;text-decoration:none;font-weight:500;color:var(--c-text-action);transition:.15s ease}.vertical-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .vertical-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .vertical-tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--c-background-tertiary);color:var(--c-accent-primary)}.vertical-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.25rem}.content-main[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:6rem;flex-grow:1}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);column-gap:1.5rem;row-gap:1.5rem}@media (min-width: 600px){.card-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1200px){.card-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card[_ngcontent-%COMP%]{background-color:var(--c-background-primary);box-shadow:0 3px 3px #0000000d,0 5px 15px #0000000d;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}.card-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding:1.5rem 1.25rem 1rem}.card-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.card-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center}.card-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%}.card-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-left:.75rem;font-weight:500}.toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:40px;height:24px;border-radius:99em;background-color:var(--c-background-quaternary);box-shadow:inset 1px 1px 1px #0000000d;position:relative;transition:.15s ease}.toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;left:3px;top:3px;height:18px;width:18px;background-color:var(--c-background-primary);border-radius:50%;box-shadow:0 1px 3px #00000026;transition:.15s ease}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:var(--c-accent-primary)}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{transform:translate(calc(100% - 2px))}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 4px var(--c-background-tertiary)}.card-body[_ngcontent-%COMP%]{padding:1rem 1.25rem;font-size:.875rem}.card-footer[_ngcontent-%COMP%]{margin-top:auto;padding:1rem 1.25rem;display:flex;align-items:center;justify-content:flex-end;border-top:1px solid var(--c-border-primary)}.card-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--c-text-action);text-decoration:none;font-weight:500;font-size:.875rem}html[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}html[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--c-text-primary);border:4px solid var(--c-background-primary);border-radius:99em}']}),Ze})();var at=rt(6209),Oe=rt(4006);let ft=(()=>{class Ze{constructor(){}ngOnInit(){}}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-ad-card"]],decls:31,vars:0,consts:[[1,"antialiased","bg-gray-200","font-sans","mb-4"],[1,"max-w-6xl","mx-auto"],[1,"flex","items-center","justify-center","min-h-screen"],[1,"max-w-sm","w-full","sm:w-1/2","lg:w-1/3","py-6","px-3"],[1,"bg-white","shadow-xl","rounded-lg","overflow-hidden","card-item"],[1,"bg-cover","bg-center","h-56","p-4",2,"background-image","url(https://images.unsplash.com/photo-1475855581690-80accde3ae2b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80)"],[1,"flex","justify-end"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"h-6","w-6","text-white","fill-current"],["d","M12.76 3.76a6 6 0 0 1 8.48 8.48l-8.53 8.54a1 1 0 0 1-1.42 0l-8.53-8.54a6 6 0 0 1 8.48-8.48l.76.75.76-.75zm7.07 7.07a4 4 0 1 0-5.66-5.66l-1.46 1.47a1 1 0 0 1-1.42 0L9.83 5.17a4 4 0 1 0-5.66 5.66L12 18.66l7.83-7.83z"],[1,"p-4"],[1,"uppercase","tracking-wide","text-sm","font-bold","text-gray-700"],[1,"text-gray-700"],[1,"flex","p-4","border-t","border-gray-300","text-gray-700","contact"],[1,"flex-1","items-center"],[1,"fa","fa-phone"],["href","tel:+43 664 1437137"],[1,"text-gray-900","font-bold"],[1,"fa","fa-envelope"],["href","mailto:albert.sprung@gmail.com"],[1,"px-4","pt-3","pb-4","border-t","border-gray-300","bg-gray-100"],[1,"text-xs","uppercase","font-bold","text-gray-600","tracking-wide"],[1,"flex","items-center","pt-2"],[1,"text-sm","text-gray-700"]],template:function(le,De){1&le&&(u.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),u.O4$(),u.TgZ(7,"svg",7),u._UZ(8,"path",8),u.qZA()()(),u.kcU(),u.TgZ(9,"div",9)(10,"p",10),u._uU(11,"Detached house \u2022 5y old "),u.qZA(),u.TgZ(12,"p",11),u._uU(13,"742 Evergreen Terrace"),u.qZA()(),u.TgZ(14,"div",12)(15,"div",13),u._UZ(16,"span",14),u.TgZ(17,"a",15),u._UZ(18,"span",16),u._uU(19," Contact us"),u.qZA()(),u.TgZ(20,"div",13),u._UZ(21,"span",17),u.TgZ(22,"a",18),u._UZ(23,"span",16),u._uU(24," Send mail"),u.qZA()()(),u.TgZ(25,"div",19)(26,"div",20),u._uU(27,"Description"),u.qZA(),u.TgZ(28,"div",21)(29,"p",22),u._uU(30,"This is some description"),u.qZA()()()()()()()())},styles:[".justify-end[_ngcontent-%COMP%]{justify-content:flex-end}.flex[_ngcontent-%COMP%]{display:flex}.p-4[_ngcontent-%COMP%]{padding:1rem!important}.text-3xl[_ngcontent-%COMP%]{font-size:1.875rem}p[_ngcontent-%COMP%]{margin:0}.h-56[_ngcontent-%COMP%]{height:14rem}.bg-cover[_ngcontent-%COMP%]{background-size:cover}.bg-center[_ngcontent-%COMP%]{background-position:center}.text-white[_ngcontent-%COMP%]{color:#fff}.h-6[_ngcontent-%COMP%]{height:1.5rem}.border-t[_ngcontent-%COMP%]{border-top:1px solid;border-bottom:1px solid}.border-gray-300[_ngcontent-%COMP%]{border-color:#e2e8f0}.flex-1[_ngcontent-%COMP%]{flex:1 1 0%}.items-center[_ngcontent-%COMP%]{align-items:center}.inline-flex[_ngcontent-%COMP%]{display:inline-flex}.fill-current[_ngcontent-%COMP%]{fill:currentColor}.text-gray-600[_ngcontent-%COMP%]{color:#718096}.w-6[_ngcontent-%COMP%]{width:1.5rem}.tracking-wide[_ngcontent-%COMP%]{letter-spacing:.025em}.uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.bg-gray-100[_ngcontent-%COMP%]{background-color:#f7fafc}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.card-item[_ngcontent-%COMP%]{border:1px solid lightgray;box-shadow:0 0 8px 2px #d3d3d3;transition:.5s all ease-in-out}.card-item[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.card-icon[_ngcontent-%COMP%]{font-size:30px}.contact[_ngcontent-%COMP%]{width:300px}.contact[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;cursor:pointer}a[_ngcontent-%COMP%]{display:block;text-decoration:blink;color:#000}"]}),Ze})();function jt(Ze,ne){if(1&Ze&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&Ze){const le=ne.$implicit;u.xp6(1),u.Oqu(le.name)}}let Nt=(()=>{class Ze{constructor(le){this.service=le,this.showHideMenu=""}ngOnInit(){this.initializeSities()}initializeSities(){this.service.callGetMethod("api/getCities","").subscribe(le=>{this.listOfCities=le})}showHideMobileMenu(){this.showHideMenu=""===this.showHideMenu?"block":""}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.Y36(at.f))},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-home"]],decls:32,vars:4,consts:[[1,"navigation"],[1,"nav-container"],[1,"brand"],["routerLink",""],["src","../../../assets/images/logo.png",1,"logo"],[1,"nav-mobile"],["id","nav-toggle",3,"click"],["name","normal",1,"combobox","input-large","form-control"],["value","","selected","selected"],[4,"ngFor","ngForOf"],["routerLink","/login",1,"btn","transparent"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"left-ads"],[1,"container","mt-4"],[1,"row"],[1,"right-ads"]],template:function(le,De){1&le&&(u.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"a",3),u._UZ(4,"img",4),u.qZA()(),u.TgZ(5,"nav")(6,"div",5)(7,"a",6),u.NdJ("click",function(){return De.showHideMobileMenu()}),u._UZ(8,"span"),u.qZA()(),u.TgZ(9,"ul")(10,"li")(11,"select",7)(12,"option",8),u._uU(13,"Select a State"),u.qZA(),u.YNc(14,jt,2,1,"option",9),u.qZA()(),u.TgZ(15,"li")(16,"a",10),u._UZ(17,"i",11),u._uU(18," Login"),u.qZA()()()()()(),u.TgZ(19,"div",12),u._uU(20,"IMAGE"),u.qZA(),u.TgZ(21,"div",13)(22,"div",14),u._UZ(23,"app-ad-card")(24,"app-ad-card")(25,"app-ad-card")(26,"app-ad-card")(27,"app-ad-card")(28,"app-ad-card")(29,"app-ad-card"),u.qZA()(),u.TgZ(30,"div",15),u._uU(31,"IMAGE"),u.qZA()),2&le&&(u.xp6(9),u.Gre("nav-list ",De.showHideMenu,""),u.xp6(5),u.Q6J("ngForOf",De.listOfCities))},dependencies:[Lt.sg,Ue.yS,Oe.YN,Oe.Kr,ft],styles:['@charset "UTF-8";.nav-list.block[_ngcontent-%COMP%]{display:block}.logo[_ngcontent-%COMP%]{width:135px}.navigation[_ngcontent-%COMP%]{box-shadow:0 2px 15px #0000001a!important}nav[_ngcontent-%COMP%]{float:right}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;position:relative}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:none;width:122px;height:41px;outline:none;border-radius:49px;cursor:pointer;color:var(--btn-color);text-transform:uppercase;font-weight:600;margin:12px 0;transition:.5s;padding:8px;border:2px solid}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--btn-color);color:#fff!important}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:only-child):after{padding-left:4px;content:" \\25be"}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:190px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:15px;line-height:20px}.nav-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:1;box-shadow:0 3px 12px #00000026;display:none}.nav-mobile[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:0;background:#fff;height:70px;width:70px}@media only screen and (max-width: 800px){.nav-mobile[_ngcontent-%COMP%]{display:block}nav[_ngcontent-%COMP%]{width:100%;padding:70px 0 15px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:15px;line-height:20px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:30px}}#nav-toggle[_ngcontent-%COMP%]{position:absolute;left:18px;top:22px;cursor:pointer;padding:10px 35px 16px 0}#nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], #nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, #nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{cursor:pointer;border-radius:1px;height:5px;width:35px;background:#463f3f;position:absolute;display:block;content:"";transition:all .3s ease-in-out}#nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{top:-10px}#nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{bottom:-10px}#nav-toggle.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:transparent}#nav-toggle.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, #nav-toggle.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{top:0}#nav-toggle.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{transform:rotate(45deg)}#nav-toggle.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}@media screen and (min-width: 800px){.nav-list[_ngcontent-%COMP%]{display:block!important}}.navigation[_ngcontent-%COMP%]{height:70px;background:#ffffff}.nav-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.brand[_ngcontent-%COMP%]{position:absolute;padding-left:20px;float:left;line-height:70px;text-transform:uppercase;font-size:1.4em}.brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#463f3f;text-decoration:none}.left-ads[_ngcontent-%COMP%]{position:fixed;width:20%;left:0;text-align:center}.right-ads[_ngcontent-%COMP%]{position:fixed;width:20%;right:0;text-align:center}.input-large[_ngcontent-%COMP%]{border:1px solid #197ffc!important;margin-right:30px;margin-top:15px;width:300px}@media (max-width: 992px){.nav-list[_ngcontent-%COMP%]{text-align:center;margin:auto;padding:14px!important;border-bottom:1px solid lightgray!important;box-shadow:0 5px 8px #d3d3d3}.input-large[_ngcontent-%COMP%]{width:100%}}']}),Ze})(),Di=(()=>{class Ze{constructor(){}ngOnInit(){}}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-forgot-password"]],decls:22,vars:0,consts:[[1,"main"],[1,"container"],[1,"wrapper"],[1,"heading"],[1,"text","text-large"],[1,"text","text-normal"],["href","#",1,"text","text-links"],["name","signin",1,"form"],[1,"input-control"],["for","email","hidden","",1,"input-label"],["type","email","name","email","id","email","placeholder","Email Address",1,"input-field"],["for","password","hidden","",1,"input-label"],["type","password","name","password","id","password","placeholder","Password",1,"input-field"],["type","submit","name","submit","value","Sign In","disabled","",1,"input-submit"]],template:function(le,De){1&le&&(u.TgZ(0,"main",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"h1",4),u._uU(5,"Sign In"),u.qZA(),u.TgZ(6,"p",5),u._uU(7,"New user? "),u.TgZ(8,"span")(9,"a",6),u._uU(10,"Create an account"),u.qZA()()()(),u.TgZ(11,"form",7)(12,"div",8)(13,"label",9),u._uU(14,"Email Address"),u.qZA(),u._UZ(15,"input",10),u.qZA(),u.TgZ(16,"div",8)(17,"label",11),u._uU(18,"Password"),u.qZA(),u._UZ(19,"input",12),u.qZA(),u.TgZ(20,"div",8),u._UZ(21,"input",13),u.qZA()()()()())},styles:["html[_ngcontent-%COMP%]{font-size:100%;font-size-adjust:100%;box-sizing:border-box;scroll-behavior:smooth}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:inherit;list-style:none;list-style-type:none;text-decoration:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:var(--color-black);background:var(--color-light)}a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-family:inherit;font-size:inherit;line-height:inherit;cursor:pointer;border:none;outline:none;background:none;text-decoration:none}img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-width:80rem;min-height:100vh;width:100%;padding:0 2rem;margin:0 auto}.ion-logo-apple[_ngcontent-%COMP%]{font-size:1.65rem;line-height:inherit;margin-right:.5rem;color:var(--color-black)}.ion-logo-google[_ngcontent-%COMP%]{font-size:1.65rem;line-height:inherit;margin-right:.5rem;color:var(--color-red)}.ion-logo-facebook[_ngcontent-%COMP%]{font-size:1.65rem;line-height:inherit;margin-right:.5rem;color:var(--color-blue)}.text[_ngcontent-%COMP%]{font-family:inherit;line-height:inherit;text-transform:unset;text-rendering:optimizeLegibility}.text-large[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:var(--color-black)}.text-normal[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:var(--color-black)}.text-links[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:var(--color-blue)}.text-links[_ngcontent-%COMP%]:hover{text-decoration:underline}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{max-width:28rem;width:100%;margin:2rem auto;padding:2rem 2.5rem;border:none;outline:none;border-radius:.25rem;color:var(--color-black);background:var(--color-white);box-shadow:var(--shadow-large)}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:2rem}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.25rem}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{font-family:inherit;font-size:1rem;font-weight:400;line-height:inherit;width:100%;height:auto;padding:.75rem 1.25rem;border:none;outline:none;border-radius:2rem;color:var(--color-black);background:var(--color-light);text-transform:unset;text-rendering:optimizeLegibility}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-submit[_ngcontent-%COMP%]{font-family:inherit;font-size:1rem;font-weight:500;line-height:inherit;cursor:pointer;min-width:40%;height:auto;padding:.65rem 1.25rem;border:none;outline:none;border-radius:2rem;color:var(--color-white);background:var(--color-blue);box-shadow:var(--shadow-medium);text-transform:capitalize;text-rendering:optimizeLegibility}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .striped[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin:1rem 0}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .striped-line[_ngcontent-%COMP%]{flex:auto;flex-basis:auto;border:none;outline:none;height:2px;background:var(--color-grayish)}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .striped-text[_ngcontent-%COMP%]{font-family:inherit;font-size:1rem;font-weight:500;line-height:inherit;color:var(--color-black);margin:0 1rem}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .method-control[_ngcontent-%COMP%]{margin-bottom:1rem}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .method-action[_ngcontent-%COMP%]{font-family:inherit;font-size:.95rem;font-weight:500;line-height:inherit;display:flex;justify-content:center;align-items:center;width:100%;height:auto;padding:.35rem 1.25rem;outline:none;border:2px solid var(--color-grayish);border-radius:2rem;color:var(--color-black);background:var(--color-white);text-transform:capitalize;text-rendering:optimizeLegibility;transition:all .35s ease}.main[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .method-action[_ngcontent-%COMP%]:hover{background:var(--color-light)}"]}),Ze})();class bt{}var Rt=rt(7725);let z=(()=>{class Ze{constructor(le,De,Ye,Ct,_t,Ht){this.service=le,this.storageService=De,this.helpService=Ye,this.router=Ct,this.configurationService=_t,this.toastr=Ht,this.mode="",this.passwordMode="password",this.user=new bt}ngOnInit(){}switchToSignUpMode(){this.mode="sign-up-mode"}switchToForgotMode(){this.mode="forgot-mode"}switchToSignInMode(){this.mode=""}changeTheme(le){document.getElementsByTagName("html")[0].dataset.theme=le,localStorage.setItem("theme",le)}showHidePassword(){this.passwordMode="password"===this.passwordMode?"text":"password"}signUp(){this.service.callPostMethod("/api/signUp",this.user).subscribe(le=>{le?(this.mode="",this.toastr.showSuccessCustom("You successfuly create account. Please verified your mail address!","")):this.toastr.showErrorCustom("Mail address exists! Try another email!")})}login(){this.service.callPostMethod("/api/login",this.user).subscribe(le=>{le?this.setUserInfoAndRoute(le):this.toastr.showErrorCustom("Your email or password is incorrect or you have not verified your email address!","")})}sentLinkToEmailForReset(){this.service.callPostMethod("/api/sentLinkToEmailForReset",this.user).subscribe(le=>{le?this.mode="":this.toastr.showErrorCustom("Your email or password is incorrect or you have not verified your email address!","")})}setUserInfoAndRoute(le){this.storageService.setToken(le.token);const De=this.helpService.getDecodeToken();this.helpService.setLocalStorage("logo",De.logo),this.setLanguageForDashboard(),setTimeout(()=>{this.router.navigate(["/dashboard"])},20)}setLanguageForDashboard(){this.helpService.setLanguage({gridPopupAddTitle:"Add new record",gridPopupEditTitle:"Edit record"})}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.Y36(at.f),u.Y36(Li.V),u.Y36($e.s),u.Y36(Ue.F0),u.Y36(Zt.e),u.Y36(Rt.l))},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-login"]],decls:68,vars:11,consts:[[1,"forms-container"],[1,"signin-signup"],[1,"sign-in-form",3,"submit"],["routerLink","../",1,"logo"],["src","../../../../assets/images/logo.png","alt",""],[1,"title"],[1,"input-field"],[1,"fas","fa-user"],["type","email","name","email","autocomplete","email","placeholder","Email","required","yes",3,"ngModel","ngModelChange"],[1,"fas","fa-lock"],["name","password","autocomplete","current-password","placeholder","Password","id","id_password","required","yes",3,"type","ngModel","ngModelChange"],["id","togglePassword",1,"far","fa-eye",2,"cursor","pointer",3,"click"],[1,"pass",3,"click"],["type","submit","value","Sign in",1,"btn","solid","login"],[1,"social-media"],[1,"icon-mode",3,"click"],[1,"fas","fa-moon"],[1,"fas","fa-sun"],[1,"text-mode"],[1,"sign-up-form",3,"submit"],["type","text","name","username","autocomplete","username","placeholder","Username","required","yes",3,"ngModel","ngModelChange"],[1,"fas","fa-envelope"],["name","password","autocomplete","current-password","placeholder","Password","id","id_reg","required","yes",3,"type","ngModel","ngModelChange"],["type","submit","value","Create account",1,"btn","solid"],[1,"forgot-form",3,"submit"],["type","submit","value","Sent for reset",1,"btn","solid"],[1,"panels-container"],[1,"panel","left-panel"],[1,"content"],["id","sign-up-btn",1,"btn","transparent",3,"click"],[1,"panel","right-panel"],["id","sign-in-btn",1,"btn","transparent",3,"click"]],template:function(le,De){1&le&&(u.TgZ(0,"body")(1,"div")(2,"div",0)(3,"div",1)(4,"form",2),u.NdJ("submit",function(){return De.login()}),u.TgZ(5,"a",3),u._UZ(6,"img",4),u.qZA(),u.TgZ(7,"h2",5),u._uU(8,"Login"),u.qZA(),u.TgZ(9,"div",6),u._UZ(10,"i",7),u.TgZ(11,"input",8),u.NdJ("ngModelChange",function(Ct){return De.user.email=Ct}),u.qZA()(),u.TgZ(12,"div",6),u._UZ(13,"i",9),u.TgZ(14,"input",10),u.NdJ("ngModelChange",function(Ct){return De.user.password=Ct}),u.qZA(),u.TgZ(15,"i",11),u.NdJ("click",function(){return De.showHidePassword()}),u.qZA()(),u.TgZ(16,"a",12),u.NdJ("click",function(){return De.switchToForgotMode()}),u._uU(17,"Forgot your password?"),u.qZA(),u._UZ(18,"input",13),u.TgZ(19,"div",14)(20,"a",15),u.NdJ("click",function(){return De.changeTheme("dark")}),u._UZ(21,"i",16),u.qZA(),u.TgZ(22,"a",15),u.NdJ("click",function(){return De.changeTheme("light")}),u._UZ(23,"i",17),u.qZA()(),u.TgZ(24,"p",18),u._uU(25,"Change theme"),u.qZA()(),u.TgZ(26,"form",19),u.NdJ("submit",function(){return De.signUp()}),u.TgZ(27,"a",3),u._UZ(28,"img",4),u.qZA(),u.TgZ(29,"h2",5),u._uU(30,"Register"),u.qZA(),u.TgZ(31,"div",6),u._UZ(32,"i",7),u.TgZ(33,"input",20),u.NdJ("ngModelChange",function(Ct){return De.user.firstname=Ct}),u.qZA()(),u.TgZ(34,"div",6),u._UZ(35,"i",21),u.TgZ(36,"input",8),u.NdJ("ngModelChange",function(Ct){return De.user.email=Ct}),u.qZA()(),u.TgZ(37,"div",6),u._UZ(38,"i",9),u.TgZ(39,"input",22),u.NdJ("ngModelChange",function(Ct){return De.user.password=Ct}),u.qZA(),u.TgZ(40,"i",11),u.NdJ("click",function(){return De.showHidePassword()}),u.qZA()(),u._UZ(41,"input",23),u.qZA(),u.TgZ(42,"form",24),u.NdJ("submit",function(){return De.sentLinkToEmailForReset()}),u.TgZ(43,"a",3),u._UZ(44,"img",4),u.qZA(),u.TgZ(45,"h2",5),u._uU(46,"Forgot password"),u.qZA(),u.TgZ(47,"div",6),u._UZ(48,"i",21),u.TgZ(49,"input",8),u.NdJ("ngModelChange",function(Ct){return De.user.email=Ct}),u.qZA()(),u._UZ(50,"input",25),u.qZA()()(),u.TgZ(51,"div",26)(52,"div",27)(53,"div",28)(54,"h3"),u._uU(55,"You don't have an account?"),u.qZA(),u.TgZ(56,"p"),u._uU(57,"Create your account right now to follow people and like publications"),u.qZA(),u.TgZ(58,"button",29),u.NdJ("click",function(){return De.switchToSignUpMode()}),u._uU(59,"Register"),u.qZA()()(),u.TgZ(60,"div",30)(61,"div",28)(62,"h3"),u._uU(63,"Already have an account?"),u.qZA(),u.TgZ(64,"p"),u._uU(65,"Login to see your notifications and post your favorite photos"),u.qZA(),u.TgZ(66,"button",31),u.NdJ("click",function(){return De.switchToSignInMode()}),u._uU(67,"Sign in"),u.qZA()()()()()()),2&le&&(u.xp6(1),u.Gre("container-login ",De.mode,""),u.xp6(10),u.Q6J("ngModel",De.user.email),u.xp6(3),u.s9C("type",De.passwordMode),u.Q6J("ngModel",De.user.password),u.xp6(19),u.Q6J("ngModel",De.user.firstname),u.xp6(3),u.Q6J("ngModel",De.user.email),u.xp6(3),u.s9C("type",De.passwordMode),u.Q6J("ngModel",De.user.password),u.xp6(10),u.Q6J("ngModel",De.user.email))},dependencies:[Ue.yS,Oe._Y,Oe.Fj,Oe.JJ,Oe.JL,Oe.Q7,Oe.On,Oe.F],styles:['.logo[_ngcontent-%COMP%]{position:absolute;top:-40%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:224px}.forms-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.signin-signup[_ngcontent-%COMP%]{position:absolute;top:50%;left:75%;transform:translate(-50%,-50%);width:50%;display:grid;grid-template-columns:1fr;z-index:5;transition:1s .7s ease-in-out}form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 5rem;overflow:hidden;grid-column:1/2;grid-row:1/2;transition:.2s .7s ease-in-out}form.sign-in-form[_ngcontent-%COMP%]{z-index:2}form.sign-up-form[_ngcontent-%COMP%], form.forgot-form[_ngcontent-%COMP%]{z-index:1;opacity:0}.btn-modal[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:pink;font-size:20px;color:#fff;padding:10px 30px;cursor:pointer}#popUpBox[_ngcontent-%COMP%]{width:500px;overflow:hidden;background:pink;box-shadow:0 0 10px #000;border-radius:10px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;padding:10px;text-align:center;display:none}.title[_ngcontent-%COMP%]{font-size:2.2rem;color:var(--title);margin-bottom:10px}.input-field[_ngcontent-%COMP%]{width:85%;height:55px;background-color:var(--bg-input);margin:10px 0;border-radius:55px;display:grid;grid-template-columns:15% 70% 15%;padding:0 .4rem}.input-field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;line-height:55px;color:var(--input-icon);font-size:1.1rem}.key[_ngcontent-%COMP%]{color:var(--key-color);text-decoration:none}.key[_ngcontent-%COMP%]:hover{color:var(--pass-hover-color)}.pass[_ngcontent-%COMP%]{margin:12px 0;color:var(--pass-color)}.pass[_ngcontent-%COMP%]:hover{color:var(--pass-hover-color)}#togglePassword[_ngcontent-%COMP%], #toggleReg[_ngcontent-%COMP%]{text-align:center;color:var(--input-icon)}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;outline:none;border:none;line-height:1;font-weight:600;font-size:1.1rem;color:var(--input)}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--input-hover);font-weight:500}.btn[_ngcontent-%COMP%]{width:150px;height:49px;border:none;outline:none;border-radius:49px;cursor:pointer;background-color:var(--btn-color);color:var(--btn-text);text-transform:uppercase;font-weight:600;margin:10px 0;transition:.5s}.btn[_ngcontent-%COMP%]:hover{background-color:var(--btn-hover)}.check[_ngcontent-%COMP%]{display:block;position:relative;margin:12px 0;cursor:pointer;font-size:16px;-webkit-user-select:none;user-select:none}.checkmark[_ngcontent-%COMP%]{color:var(--check-text)}.checkmark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--check-link);text-decoration:underline}.checkmark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--check-hover)}.social-text[_ngcontent-%COMP%]{padding:.7rem 0;font-size:1rem;color:var(--social-text)}.social-media[_ngcontent-%COMP%]{display:flex;justify-content:center}.social-icon[_ngcontent-%COMP%]{height:46px;width:46px;border:1px solid var(--icon-color);margin:0 .45rem;display:flex;justify-content:center;align-items:center;text-decoration:none;color:var(--icon-color);font-size:1.1rem;border-radius:50%;transition:.3s}.social-icon[_ngcontent-%COMP%]:hover{color:var(--social-icon);border-color:var(--social-icon)}.icon-mode[_ngcontent-%COMP%]{height:32px;width:32px;border:1px solid var(--icon-color);margin:40px 5px 0;display:flex;justify-content:center;align-items:center;text-decoration:none;color:var(--icon-color);font-size:1rem;border-radius:50%;transition:.3s}.icon-mode[_ngcontent-%COMP%]:hover{color:var(--social-icon);border-color:var(--social-icon)}.text-mode[_ngcontent-%COMP%]{padding:.5rem 0;font-size:.8rem;font-style:italic;color:var(--social-text)}.panels-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:grid;grid-template-columns:repeat(2,1fr)}.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;justify-content:space-around;text-align:center;z-index:7}.left-panel[_ngcontent-%COMP%]{pointer-events:all;padding:3rem 17% 2rem 12%}.right-panel[_ngcontent-%COMP%]{pointer-events:none;padding:3rem 12% 2rem 17%}.panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{color:var(--panel-color);transition:.9s .6s ease-in-out}.panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;line-height:1;font-size:1.5rem}.panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;padding:.7rem 0}.btn.transparent[_ngcontent-%COMP%]{margin:0;background:none;border:2px solid #fff;width:130px;height:41px;font-weight:600;font-size:.8rem}.image[_ngcontent-%COMP%]{width:90%;margin-top:10px;transition:1.1s .4s ease-in-out}.right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{transform:translate(800px)}.container-login[_ngcontent-%COMP%]{position:relative;width:100%;min-height:100vh;background-color:var(--bg-color);overflow:hidden}.container-login[_ngcontent-%COMP%]:before{content:"";position:absolute;width:2000px;height:2000px;border-radius:50%;background:linear-gradient(-45deg,var(--bg-round-a),var(--bg-round-b));top:-10%;right:48%;transform:translateY(-50%);z-index:6;transition:1.8s ease-in-out}.container-login.sign-up-mode[_ngcontent-%COMP%]:before, .container-login.forgot-mode[_ngcontent-%COMP%]:before{transform:translate(100%,-50%);right:52%}.container-login.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container-login.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translate(-800px)}.container-login.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .container-login.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{transform:translate(0)}.container-login.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]{pointer-events:none}.container-login.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]{pointer-events:all}.container-login.sign-up-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%]{left:25%}.container-login.sign-up-mode[_ngcontent-%COMP%]   form.sign-in-form[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   form.sign-in-form[_ngcontent-%COMP%]{z-index:1;opacity:0}.container-login.sign-up-mode[_ngcontent-%COMP%]   form.sign-up-form[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   form.forgot-form[_ngcontent-%COMP%]{z-index:2;opacity:1}.keyboard[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;padding:5px 0;background:var(--keyboard-color);box-shadow:0 0 50px #00000080;-webkit-user-select:none;user-select:none;transition:bottom .4s;z-index:999}.keyboard--hidden[_ngcontent-%COMP%]{bottom:-100%}.keyboard__keys[_ngcontent-%COMP%]{text-align:center}.keyboard__key[_ngcontent-%COMP%]{height:45px;width:6%;max-width:90px;margin:3px;border-radius:4px;border:none;background:rgba(255,255,255,.2);color:var(--key-letter);font-size:1.05rem;outline:none;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;vertical-align:top;padding:0;-webkit-tap-highlight-color:transparent;position:relative}.keyboard__key[_ngcontent-%COMP%]:active{background:rgba(255,255,255,.12)}.keyboard__key--wide[_ngcontent-%COMP%]{width:12%}.keyboard__key--extra-wide[_ngcontent-%COMP%]{width:36%;max-width:500px}.keyboard__key--activatable[_ngcontent-%COMP%]:after{content:"";top:10px;right:10px;position:absolute;width:8px;height:8px;background:rgba(0,0,0,.4);border-radius:50%}.keyboard__key--active[_ngcontent-%COMP%]:after{background:#08ff00}.keyboard__key--dark[_ngcontent-%COMP%]{background:rgba(0,0,0,.25)}@media (max-width: 870px){.container-login[_ngcontent-%COMP%]{min-height:800px;height:100vh}.container-login[_ngcontent-%COMP%]:before{width:1500px;height:1500px;left:30%;bottom:68%;transform:translate(-50%);right:initial;top:initial;transition:2s ease-in-out}.signin-signup[_ngcontent-%COMP%]{width:100%;left:50%;top:95%;transform:translate(-50%,-100%);transition:1s .8s ease-in-out}.panels-container-login[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr 2fr 1fr}.panel[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;align-items:center;padding:2.5rem 8%}.panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-right:15%;transition:.9s .8s ease-in-out}.panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;padding:.5rem 0}.btn.transparent[_ngcontent-%COMP%]{width:110px;height:35px;font-size:.7rem}.image[_ngcontent-%COMP%]{display:none}.left-panel[_ngcontent-%COMP%]{grid-row:1/2}.right-panel[_ngcontent-%COMP%]{grid-row:3/4}.right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{transform:translateY(300px)}.container-login.sign-up-mode[_ngcontent-%COMP%]:before, .container-login.forgot-mode[_ngcontent-%COMP%]:before{transform:translate(-50%,100%);bottom:32%;right:initial}.container-login.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container-login.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translateY(-300px)}.container-login.sign-up-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%], .container-login.forgot-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%]{top:5%;transform:translate(-50%);left:50%}.keyboard[_ngcontent-%COMP%], .key[_ngcontent-%COMP%]{opacity:0;visibility:hidden;font-size:.1px}}@media (max-width: 570px){form[_ngcontent-%COMP%]{padding:0 1.5rem}.image[_ngcontent-%COMP%]{display:none}.panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:.5rem 1rem}.panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0}.container-login[_ngcontent-%COMP%]:before{bottom:75%;left:50%}.container-login.sign-up-mode[_ngcontent-%COMP%]:before, .container-login.forgot-mode[_ngcontent-%COMP%]:before{bottom:24%;left:50%}.field-icon[_ngcontent-%COMP%]{float:right;margin-left:300px;margin-top:-55px;position:relative;z-index:1}}@media (max-width: 385px){.field-icon[_ngcontent-%COMP%]{float:right;margin-left:260px;margin-top:-55px;position:relative;z-index:1}}@media (max-width: 350px){.field-icon[_ngcontent-%COMP%]{float:right;margin-left:200px;margin-top:-55px;position:relative;z-index:1}}.btn.solid[_ngcontent-%COMP%]{width:auto}.btn.login[_ngcontent-%COMP%]{width:150px}']}),Ze})(),J=(()=>{class Ze{constructor(le,De){this.router=le,this.storageService=De}canActivate(){return!this.storageService.getToken()||(this.router.navigate(["/dashboard"]),!1)}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.LFG(Ue.F0),u.LFG(Li.V))},Ze.\u0275prov=u.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})();const Ne=[{path:"",component:Nt},{path:"login",canActivate:[J],component:z},{path:"forgot-password",canActivate:[J],component:Di},{path:"dashboard",canActivate:[(()=>{class Ze{constructor(le,De){this.router=le,this.storageService=De}canActivate(){return!!this.storageService.getToken()||(this.router.navigate(["/login"]),!1)}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.LFG(Ue.F0),u.LFG(Li.V))},Ze.\u0275prov=u.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})()],component:E,loadChildren:()=>rt.e(821).then(rt.bind(rt,8821)).then(Ze=>Ze.DashboardModule)}];let ce=(()=>{class Ze{}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275mod=u.oAB({type:Ze}),Ze.\u0275inj=u.cJS({imports:[Ue.Bz.forRoot(Ne),Ue.Bz]}),Ze})(),be=(()=>{class Ze{constructor(){this.title="CityInfo"}}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275cmp=u.Xpm({type:Ze,selectors:[["app-root"]],decls:1,vars:0,template:function(le,De){1&le&&u._UZ(0,"router-outlet")},dependencies:[Ue.lC]}),Ze})();var Se=rt(529),ue=rt(3356),_e=rt(4523),lt=rt(7340);function B(Ze){return new u.vHH(3e3,!1)}function As(){return typeof window<"u"&&typeof window.document<"u"}function bs(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function kt(Ze){switch(Ze.length){case 0:return new lt.ZN;case 1:return Ze[0];default:return new lt.ZE(Ze)}}function wt(Ze,ne,le,De,Ye=new Map,Ct=new Map){const _t=[],Ht=[];let vi=-1,ds=null;if(De.forEach(Ks=>{const Qs=Ks.get("offset"),Wn=Qs==vi,or=Wn&&ds||new Map;Ks.forEach((gn,Un)=>{let Zr=Un,Co=gn;if("offset"!==Un)switch(Zr=ne.normalizePropertyName(Zr,_t),Co){case lt.k1:Co=Ye.get(Un);break;case lt.l3:Co=Ct.get(Un);break;default:Co=ne.normalizeStyleValue(Un,Zr,Co,_t)}or.set(Zr,Co)}),Wn||Ht.push(or),ds=or,vi=Qs}),_t.length)throw function Jt(Ze){return new u.vHH(3502,!1)}();return Ht}function Ot(Ze,ne,le,De){switch(ne){case"start":Ze.onStart(()=>De(le&&Ai(le,"start",Ze)));break;case"done":Ze.onDone(()=>De(le&&Ai(le,"done",Ze)));break;case"destroy":Ze.onDestroy(()=>De(le&&Ai(le,"destroy",Ze)))}}function Ai(Ze,ne,le){const Ct=bi(Ze.element,Ze.triggerName,Ze.fromState,Ze.toState,ne||Ze.phaseName,le.totalTime??Ze.totalTime,!!le.disabled),_t=Ze._data;return null!=_t&&(Ct._data=_t),Ct}function bi(Ze,ne,le,De,Ye="",Ct=0,_t){return{element:Ze,triggerName:ne,fromState:le,toState:De,phaseName:Ye,totalTime:Ct,disabled:!!_t}}function Ti(Ze,ne,le){let De=Ze.get(ne);return De||Ze.set(ne,De=le),De}function ns(Ze){const ne=Ze.indexOf(":");return[Ze.substring(1,ne),Ze.slice(ne+1)]}let ls=(Ze,ne)=>!1,ws=(Ze,ne,le)=>[],Ds=null;function on(Ze){const ne=Ze.parentNode||Ze.host;return ne===Ds?null:ne}(bs()||typeof Element<"u")&&(As()?(Ds=(()=>document.documentElement)(),ls=(Ze,ne)=>{for(;ne;){if(ne===Ze)return!0;ne=on(ne)}return!1}):ls=(Ze,ne)=>Ze.contains(ne),ws=(Ze,ne,le)=>{if(le)return Array.from(Ze.querySelectorAll(ne));const De=Ze.querySelector(ne);return De?[De]:[]});let Dn=null,In=!1;const Ls=ls,cr=ws;let gi=(()=>{class Ze{validateStyleProperty(le){return function js(Ze){Dn||(Dn=function Xi(){return typeof document<"u"?document.body:null}()||{},In=!!Dn.style&&"WebkitAppearance"in Dn.style);let ne=!0;return Dn.style&&!function Kn(Ze){return"ebkit"==Ze.substring(1,6)}(Ze)&&(ne=Ze in Dn.style,!ne&&In&&(ne="Webkit"+Ze.charAt(0).toUpperCase()+Ze.slice(1)in Dn.style)),ne}(le)}matchesElement(le,De){return!1}containsElement(le,De){return Ls(le,De)}getParentElement(le){return on(le)}query(le,De,Ye){return cr(le,De,Ye)}computeStyle(le,De,Ye){return Ye||""}animate(le,De,Ye,Ct,_t,Ht=[],vi){return new lt.ZN(Ye,Ct)}}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275prov=u.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),je=(()=>{class Ze{}return Ze.NOOP=new gi,Ze})();const ci="ng-enter",pi="ng-leave",Fi="ng-trigger",as=".ng-trigger",Es="ng-animating",Ns=".ng-animating";function bn(Ze){if("number"==typeof Ze)return Ze;const ne=Ze.match(/^(-?[\.\d]+)(m?s)/);return!ne||ne.length<2?0:pn(parseFloat(ne[1]),ne[2])}function pn(Ze,ne){return"s"===ne?1e3*Ze:Ze}function ms(Ze,ne,le){return Ze.hasOwnProperty("duration")?Ze:function dn(Ze,ne,le){let Ye,Ct=0,_t="";if("string"==typeof Ze){const Ht=Ze.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ht)return ne.push(B()),{duration:0,delay:0,easing:""};Ye=pn(parseFloat(Ht[1]),Ht[2]);const vi=Ht[3];null!=vi&&(Ct=pn(parseFloat(vi),Ht[4]));const ds=Ht[5];ds&&(_t=ds)}else Ye=Ze;if(!le){let Ht=!1,vi=ne.length;Ye<0&&(ne.push(function de(){return new u.vHH(3100,!1)}()),Ht=!0),Ct<0&&(ne.push(function Be(){return new u.vHH(3101,!1)}()),Ht=!0),Ht&&ne.splice(vi,0,B())}return{duration:Ye,delay:Ct,easing:_t}}(Ze,ne,le)}function Cs(Ze,ne={}){return Object.keys(Ze).forEach(le=>{ne[le]=Ze[le]}),ne}function Yn(Ze){const ne=new Map;return Object.keys(Ze).forEach(le=>{ne.set(le,Ze[le])}),ne}function rs(Ze,ne=new Map,le){if(le)for(let[De,Ye]of le)ne.set(De,Ye);for(let[De,Ye]of Ze)ne.set(De,Ye);return ne}function hn(Ze,ne,le){return le?ne+":"+le+";":""}function cn(Ze){let ne="";for(let le=0;le<Ze.style.length;le++){const De=Ze.style.item(le);ne+=hn(0,De,Ze.style.getPropertyValue(De))}for(const le in Ze.style)Ze.style.hasOwnProperty(le)&&!le.startsWith("_")&&(ne+=hn(0,Jr(le),Ze.style[le]));Ze.setAttribute("style",ne)}function ln(Ze,ne,le){Ze.style&&(ne.forEach((De,Ye)=>{const Ct=Br(Ye);le&&!le.has(Ye)&&le.set(Ye,Ze.style[Ct]),Ze.style[Ct]=De}),bs()&&cn(Ze))}function qn(Ze,ne){Ze.style&&(ne.forEach((le,De)=>{const Ye=Br(De);Ze.style[Ye]=""}),bs()&&cn(Ze))}function $n(Ze){return Array.isArray(Ze)?1==Ze.length?Ze[0]:(0,lt.vP)(Ze):Ze}const tn=new RegExp("{{\\s*(.+?)\\s*}}","g");function mr(Ze){let ne=[];if("string"==typeof Ze){let le;for(;le=tn.exec(Ze);)ne.push(le[1]);tn.lastIndex=0}return ne}function Cn(Ze,ne,le){const De=Ze.toString(),Ye=De.replace(tn,(Ct,_t)=>{let Ht=ne[_t];return null==Ht&&(le.push(function xt(Ze){return new u.vHH(3003,!1)}()),Ht=""),Ht.toString()});return Ye==De?Ze:Ye}function wr(Ze){const ne=[];let le=Ze.next();for(;!le.done;)ne.push(le.value),le=Ze.next();return ne}const ro=/-+([a-z0-9])/g;function Br(Ze){return Ze.replace(ro,(...ne)=>ne[1].toUpperCase())}function Jr(Ze){return Ze.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zn(Ze,ne,le){switch(ne.type){case 7:return Ze.visitTrigger(ne,le);case 0:return Ze.visitState(ne,le);case 1:return Ze.visitTransition(ne,le);case 2:return Ze.visitSequence(ne,le);case 3:return Ze.visitGroup(ne,le);case 4:return Ze.visitAnimate(ne,le);case 5:return Ze.visitKeyframes(ne,le);case 6:return Ze.visitStyle(ne,le);case 8:return Ze.visitReference(ne,le);case 9:return Ze.visitAnimateChild(ne,le);case 10:return Ze.visitAnimateRef(ne,le);case 11:return Ze.visitQuery(ne,le);case 12:return Ze.visitStagger(ne,le);default:throw function $t(Ze){return new u.vHH(3004,!1)}()}}function _r(Ze,ne){return window.getComputedStyle(Ze)[ne]}function sr(Ze,ne){const le=[];return"string"==typeof Ze?Ze.split(/\s*,\s*/).forEach(De=>function zn(Ze,ne,le){if(":"==Ze[0]){const vi=function Er(Ze,ne){switch(Ze){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(le,De)=>parseFloat(De)>parseFloat(le);case":decrement":return(le,De)=>parseFloat(De)<parseFloat(le);default:return ne.push(function Tt(Ze){return new u.vHH(3016,!1)}()),"* => *"}}(Ze,le);if("function"==typeof vi)return void ne.push(vi);Ze=vi}const De=Ze.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==De||De.length<4)return le.push(function ni(Ze){return new u.vHH(3015,!1)}()),ne;const Ye=De[1],Ct=De[2],_t=De[3];ne.push(Vs(Ye,_t));"<"==Ct[0]&&!("*"==Ye&&"*"==_t)&&ne.push(Vs(_t,Ye))}(De,le,ne)):le.push(Ze),le}const to=new Set(["true","1"]),Eo=new Set(["false","0"]);function Vs(Ze,ne){const le=to.has(Ze)||Eo.has(Ze),De=to.has(ne)||Eo.has(ne);return(Ye,Ct)=>{let _t="*"==Ze||Ze==Ye,Ht="*"==ne||ne==Ct;return!_t&&le&&"boolean"==typeof Ye&&(_t=Ye?to.has(Ze):Eo.has(Ze)),!Ht&&De&&"boolean"==typeof Ct&&(Ht=Ct?to.has(ne):Eo.has(ne)),_t&&Ht}}const bo=new RegExp("s*:selfs*,?","g");function yr(Ze,ne,le,De){return new oo(Ze).build(ne,le,De)}class oo{constructor(ne){this._driver=ne}build(ne,le,De){const Ye=new Bs(le);return this._resetContextStyleTimingState(Ye),Zn(this,$n(ne),Ye)}_resetContextStyleTimingState(ne){ne.currentQuerySelector="",ne.collectedStyles=new Map,ne.collectedStyles.set("",new Map),ne.currentTime=0}visitTrigger(ne,le){let De=le.queryCount=0,Ye=le.depCount=0;const Ct=[],_t=[];return"@"==ne.name.charAt(0)&&le.errors.push(function is(){return new u.vHH(3006,!1)}()),ne.definitions.forEach(Ht=>{if(this._resetContextStyleTimingState(le),0==Ht.type){const vi=Ht,ds=vi.name;ds.toString().split(/\s*,\s*/).forEach(Ks=>{vi.name=Ks,Ct.push(this.visitState(vi,le))}),vi.name=ds}else if(1==Ht.type){const vi=this.visitTransition(Ht,le);De+=vi.queryCount,Ye+=vi.depCount,_t.push(vi)}else le.errors.push(function zi(){return new u.vHH(3007,!1)}())}),{type:7,name:ne.name,states:Ct,transitions:_t,queryCount:De,depCount:Ye,options:null}}visitState(ne,le){const De=this.visitStyle(ne.styles,le),Ye=ne.options&&ne.options.params||null;if(De.containsDynamicStyles){const Ct=new Set,_t=Ye||{};De.styles.forEach(Ht=>{Ht instanceof Map&&Ht.forEach(vi=>{mr(vi).forEach(ds=>{_t.hasOwnProperty(ds)||Ct.add(ds)})})}),Ct.size&&(wr(Ct.values()),le.errors.push(function ui(Ze,ne){return new u.vHH(3008,!1)}()))}return{type:0,name:ne.name,style:De,options:Ye?{params:Ye}:null}}visitTransition(ne,le){le.queryCount=0,le.depCount=0;const De=Zn(this,$n(ne.animation),le);return{type:1,matchers:sr(ne.expr,le.errors),animation:De,queryCount:le.queryCount,depCount:le.depCount,options:mn(ne.options)}}visitSequence(ne,le){return{type:2,steps:ne.steps.map(De=>Zn(this,De,le)),options:mn(ne.options)}}visitGroup(ne,le){const De=le.currentTime;let Ye=0;const Ct=ne.steps.map(_t=>{le.currentTime=De;const Ht=Zn(this,_t,le);return Ye=Math.max(Ye,le.currentTime),Ht});return le.currentTime=Ye,{type:3,steps:Ct,options:mn(ne.options)}}visitAnimate(ne,le){const De=function $s(Ze,ne){if(Ze.hasOwnProperty("duration"))return Ze;if("number"==typeof Ze)return tr(ms(Ze,ne).duration,0,"");const le=Ze;if(le.split(/\s+/).some(Ct=>"{"==Ct.charAt(0)&&"{"==Ct.charAt(1))){const Ct=tr(0,0,"");return Ct.dynamic=!0,Ct.strValue=le,Ct}const Ye=ms(le,ne);return tr(Ye.duration,Ye.delay,Ye.easing)}(ne.timings,le.errors);le.currentAnimateTimings=De;let Ye,Ct=ne.styles?ne.styles:(0,lt.oB)({});if(5==Ct.type)Ye=this.visitKeyframes(Ct,le);else{let _t=ne.styles,Ht=!1;if(!_t){Ht=!0;const ds={};De.easing&&(ds.easing=De.easing),_t=(0,lt.oB)(ds)}le.currentTime+=De.duration+De.delay;const vi=this.visitStyle(_t,le);vi.isEmptyStep=Ht,Ye=vi}return le.currentAnimateTimings=null,{type:4,timings:De,style:Ye,options:null}}visitStyle(ne,le){const De=this._makeStyleAst(ne,le);return this._validateStyleAst(De,le),De}_makeStyleAst(ne,le){const De=[],Ye=Array.isArray(ne.styles)?ne.styles:[ne.styles];for(let Ht of Ye)"string"==typeof Ht?Ht===lt.l3?De.push(Ht):le.errors.push(new u.vHH(3002,!1)):De.push(Yn(Ht));let Ct=!1,_t=null;return De.forEach(Ht=>{if(Ht instanceof Map&&(Ht.has("easing")&&(_t=Ht.get("easing"),Ht.delete("easing")),!Ct))for(let vi of Ht.values())if(vi.toString().indexOf("{{")>=0){Ct=!0;break}}),{type:6,styles:De,easing:_t,offset:ne.offset,containsDynamicStyles:Ct,options:null}}_validateStyleAst(ne,le){const De=le.currentAnimateTimings;let Ye=le.currentTime,Ct=le.currentTime;De&&Ct>0&&(Ct-=De.duration+De.delay),ne.styles.forEach(_t=>{"string"!=typeof _t&&_t.forEach((Ht,vi)=>{const ds=le.collectedStyles.get(le.currentQuerySelector),Ks=ds.get(vi);let Qs=!0;Ks&&(Ct!=Ye&&Ct>=Ks.startTime&&Ye<=Ks.endTime&&(le.errors.push(function us(Ze,ne,le,De,Ye){return new u.vHH(3010,!1)}()),Qs=!1),Ct=Ks.startTime),Qs&&ds.set(vi,{startTime:Ct,endTime:Ye}),le.options&&function gr(Ze,ne,le){const De=ne.params||{},Ye=mr(Ze);Ye.length&&Ye.forEach(Ct=>{De.hasOwnProperty(Ct)||le.push(function Fe(Ze){return new u.vHH(3001,!1)}())})}(Ht,le.options,le.errors)})})}visitKeyframes(ne,le){const De={type:5,styles:[],options:null};if(!le.currentAnimateTimings)return le.errors.push(function Us(){return new u.vHH(3011,!1)}()),De;let Ct=0;const _t=[];let Ht=!1,vi=!1,ds=0;const Ks=ne.steps.map(Co=>{const fo=this._makeStyleAst(Co,le);let hl=null!=fo.offset?fo.offset:function uo(Ze){if("string"==typeof Ze)return null;let ne=null;if(Array.isArray(Ze))Ze.forEach(le=>{if(le instanceof Map&&le.has("offset")){const De=le;ne=parseFloat(De.get("offset")),De.delete("offset")}});else if(Ze instanceof Map&&Ze.has("offset")){const le=Ze;ne=parseFloat(le.get("offset")),le.delete("offset")}return ne}(fo.styles),No=0;return null!=hl&&(Ct++,No=fo.offset=hl),vi=vi||No<0||No>1,Ht=Ht||No<ds,ds=No,_t.push(No),fo});vi&&le.errors.push(function $i(){return new u.vHH(3012,!1)}()),Ht&&le.errors.push(function et(){return new u.vHH(3200,!1)}());const Qs=ne.steps.length;let Wn=0;Ct>0&&Ct<Qs?le.errors.push(function zt(){return new u.vHH(3202,!1)}()):0==Ct&&(Wn=1/(Qs-1));const or=Qs-1,gn=le.currentTime,Un=le.currentAnimateTimings,Zr=Un.duration;return Ks.forEach((Co,fo)=>{const hl=Wn>0?fo==or?1:Wn*fo:_t[fo],No=hl*Zr;le.currentTime=gn+Un.delay+No,Un.duration=No,this._validateStyleAst(Co,le),Co.offset=hl,De.styles.push(Co)}),De}visitReference(ne,le){return{type:8,animation:Zn(this,$n(ne.animation),le),options:mn(ne.options)}}visitAnimateChild(ne,le){return le.depCount++,{type:9,options:mn(ne.options)}}visitAnimateRef(ne,le){return{type:10,animation:this.visitReference(ne.animation,le),options:mn(ne.options)}}visitQuery(ne,le){const De=le.currentQuerySelector,Ye=ne.options||{};le.queryCount++,le.currentQuery=ne;const[Ct,_t]=function ol(Ze){const ne=!!Ze.split(/\s*,\s*/).find(le=>":self"==le);return ne&&(Ze=Ze.replace(bo,"")),Ze=Ze.replace(/@\*/g,as).replace(/@\w+/g,le=>as+"-"+le.slice(1)).replace(/:animating/g,Ns),[Ze,ne]}(ne.selector);le.currentQuerySelector=De.length?De+" "+Ct:Ct,Ti(le.collectedStyles,le.currentQuerySelector,new Map);const Ht=Zn(this,$n(ne.animation),le);return le.currentQuery=null,le.currentQuerySelector=De,{type:11,selector:Ct,limit:Ye.limit||0,optional:!!Ye.optional,includeSelf:_t,animation:Ht,originalSelector:ne.selector,options:mn(ne.options)}}visitStagger(ne,le){le.currentQuery||le.errors.push(function Xt(){return new u.vHH(3013,!1)}());const De="full"===ne.timings?{duration:0,delay:0,easing:"full"}:ms(ne.timings,le.errors,!0);return{type:12,animation:Zn(this,$n(ne.animation),le),timings:De,options:null}}}class Bs{constructor(ne){this.errors=ne,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mn(Ze){return Ze?(Ze=Cs(Ze)).params&&(Ze.params=function Yr(Ze){return Ze?Cs(Ze):null}(Ze.params)):Ze={},Ze}function tr(Ze,ne,le){return{duration:Ze,delay:ne,easing:le}}function vr(Ze,ne,le,De,Ye,Ct,_t=null,Ht=!1){return{type:1,element:Ze,keyframes:ne,preStyleProps:le,postStyleProps:De,duration:Ye,delay:Ct,totalTime:Ye+Ct,easing:_t,subTimeline:Ht}}class Qr{constructor(){this._map=new Map}get(ne){return this._map.get(ne)||[]}append(ne,le){let De=this._map.get(ne);De||this._map.set(ne,De=[]),De.push(...le)}has(ne){return this._map.has(ne)}clear(){this._map.clear()}}const ir=new RegExp(":enter","g"),$r=new RegExp(":leave","g");function Ir(Ze,ne,le,De,Ye,Ct=new Map,_t=new Map,Ht,vi,ds=[]){return(new Pn).buildKeyframes(Ze,ne,le,De,Ye,Ct,_t,Ht,vi,ds)}class Pn{buildKeyframes(ne,le,De,Ye,Ct,_t,Ht,vi,ds,Ks=[]){ds=ds||new Qr;const Qs=new xi(ne,le,ds,Ye,Ct,Ks,[]);Qs.options=vi;const Wn=vi.delay?bn(vi.delay):0;Qs.currentTimeline.delayNextStep(Wn),Qs.currentTimeline.setStyles([_t],null,Qs.errors,vi),Zn(this,De,Qs);const or=Qs.timelines.filter(gn=>gn.containsAnimation());if(or.length&&Ht.size){let gn;for(let Un=or.length-1;Un>=0;Un--){const Zr=or[Un];if(Zr.element===le){gn=Zr;break}}gn&&!gn.allowOnlyTimelineStyles()&&gn.setStyles([Ht],null,Qs.errors,vi)}return or.length?or.map(gn=>gn.buildKeyframes()):[vr(le,[],[],[],0,Wn,"",!1)]}visitTrigger(ne,le){}visitState(ne,le){}visitTransition(ne,le){}visitAnimateChild(ne,le){const De=le.subInstructions.get(le.element);if(De){const Ye=le.createSubContext(ne.options),Ct=le.currentTimeline.currentTime,_t=this._visitSubInstructions(De,Ye,Ye.options);Ct!=_t&&le.transformIntoNewTimeline(_t)}le.previousNode=ne}visitAnimateRef(ne,le){const De=le.createSubContext(ne.options);De.transformIntoNewTimeline(),this._applyAnimationRefDelays([ne.options,ne.animation.options],le,De),this.visitReference(ne.animation,De),le.transformIntoNewTimeline(De.currentTimeline.currentTime),le.previousNode=ne}_applyAnimationRefDelays(ne,le,De){for(const Ye of ne){const Ct=Ye?.delay;if(Ct){const _t="number"==typeof Ct?Ct:bn(Cn(Ct,Ye?.params??{},le.errors));De.delayNextStep(_t)}}}_visitSubInstructions(ne,le,De){let Ct=le.currentTimeline.currentTime;const _t=null!=De.duration?bn(De.duration):null,Ht=null!=De.delay?bn(De.delay):null;return 0!==_t&&ne.forEach(vi=>{const ds=le.appendInstructionToTimeline(vi,_t,Ht);Ct=Math.max(Ct,ds.duration+ds.delay)}),Ct}visitReference(ne,le){le.updateOptions(ne.options,!0),Zn(this,ne.animation,le),le.previousNode=ne}visitSequence(ne,le){const De=le.subContextCount;let Ye=le;const Ct=ne.options;if(Ct&&(Ct.params||Ct.delay)&&(Ye=le.createSubContext(Ct),Ye.transformIntoNewTimeline(),null!=Ct.delay)){6==Ye.previousNode.type&&(Ye.currentTimeline.snapshotCurrentStyles(),Ye.previousNode=ks);const _t=bn(Ct.delay);Ye.delayNextStep(_t)}ne.steps.length&&(ne.steps.forEach(_t=>Zn(this,_t,Ye)),Ye.currentTimeline.applyStylesToKeyframe(),Ye.subContextCount>De&&Ye.transformIntoNewTimeline()),le.previousNode=ne}visitGroup(ne,le){const De=[];let Ye=le.currentTimeline.currentTime;const Ct=ne.options&&ne.options.delay?bn(ne.options.delay):0;ne.steps.forEach(_t=>{const Ht=le.createSubContext(ne.options);Ct&&Ht.delayNextStep(Ct),Zn(this,_t,Ht),Ye=Math.max(Ye,Ht.currentTimeline.currentTime),De.push(Ht.currentTimeline)}),De.forEach(_t=>le.currentTimeline.mergeTimelineCollectedStyles(_t)),le.transformIntoNewTimeline(Ye),le.previousNode=ne}_visitTiming(ne,le){if(ne.dynamic){const De=ne.strValue;return ms(le.params?Cn(De,le.params,le.errors):De,le.errors)}return{duration:ne.duration,delay:ne.delay,easing:ne.easing}}visitAnimate(ne,le){const De=le.currentAnimateTimings=this._visitTiming(ne.timings,le),Ye=le.currentTimeline;De.delay&&(le.incrementTime(De.delay),Ye.snapshotCurrentStyles());const Ct=ne.style;5==Ct.type?this.visitKeyframes(Ct,le):(le.incrementTime(De.duration),this.visitStyle(Ct,le),Ye.applyStylesToKeyframe()),le.currentAnimateTimings=null,le.previousNode=ne}visitStyle(ne,le){const De=le.currentTimeline,Ye=le.currentAnimateTimings;!Ye&&De.hasCurrentStyleProperties()&&De.forwardFrame();const Ct=Ye&&Ye.easing||ne.easing;ne.isEmptyStep?De.applyEmptyStep(Ct):De.setStyles(ne.styles,Ct,le.errors,le.options),le.previousNode=ne}visitKeyframes(ne,le){const De=le.currentAnimateTimings,Ye=le.currentTimeline.duration,Ct=De.duration,Ht=le.createSubContext().currentTimeline;Ht.easing=De.easing,ne.styles.forEach(vi=>{Ht.forwardTime((vi.offset||0)*Ct),Ht.setStyles(vi.styles,vi.easing,le.errors,le.options),Ht.applyStylesToKeyframe()}),le.currentTimeline.mergeTimelineCollectedStyles(Ht),le.transformIntoNewTimeline(Ye+Ct),le.previousNode=ne}visitQuery(ne,le){const De=le.currentTimeline.currentTime,Ye=ne.options||{},Ct=Ye.delay?bn(Ye.delay):0;Ct&&(6===le.previousNode.type||0==De&&le.currentTimeline.hasCurrentStyleProperties())&&(le.currentTimeline.snapshotCurrentStyles(),le.previousNode=ks);let _t=De;const Ht=le.invokeQuery(ne.selector,ne.originalSelector,ne.limit,ne.includeSelf,!!Ye.optional,le.errors);le.currentQueryTotal=Ht.length;let vi=null;Ht.forEach((ds,Ks)=>{le.currentQueryIndex=Ks;const Qs=le.createSubContext(ne.options,ds);Ct&&Qs.delayNextStep(Ct),ds===le.element&&(vi=Qs.currentTimeline),Zn(this,ne.animation,Qs),Qs.currentTimeline.applyStylesToKeyframe(),_t=Math.max(_t,Qs.currentTimeline.currentTime)}),le.currentQueryIndex=0,le.currentQueryTotal=0,le.transformIntoNewTimeline(_t),vi&&(le.currentTimeline.mergeTimelineCollectedStyles(vi),le.currentTimeline.snapshotCurrentStyles()),le.previousNode=ne}visitStagger(ne,le){const De=le.parentContext,Ye=le.currentTimeline,Ct=ne.timings,_t=Math.abs(Ct.duration),Ht=_t*(le.currentQueryTotal-1);let vi=_t*le.currentQueryIndex;switch(Ct.duration<0?"reverse":Ct.easing){case"reverse":vi=Ht-vi;break;case"full":vi=De.currentStaggerTime}const Ks=le.currentTimeline;vi&&Ks.delayNextStep(vi);const Qs=Ks.currentTime;Zn(this,ne.animation,le),le.previousNode=ne,De.currentStaggerTime=Ye.currentTime-Qs+(Ye.startTime-De.currentTimeline.startTime)}}const ks={};class xi{constructor(ne,le,De,Ye,Ct,_t,Ht,vi){this._driver=ne,this.element=le,this.subInstructions=De,this._enterClassName=Ye,this._leaveClassName=Ct,this.errors=_t,this.timelines=Ht,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ks,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=vi||new v(this._driver,le,0),Ht.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(ne,le){if(!ne)return;const De=ne;let Ye=this.options;null!=De.duration&&(Ye.duration=bn(De.duration)),null!=De.delay&&(Ye.delay=bn(De.delay));const Ct=De.params;if(Ct){let _t=Ye.params;_t||(_t=this.options.params={}),Object.keys(Ct).forEach(Ht=>{(!le||!_t.hasOwnProperty(Ht))&&(_t[Ht]=Cn(Ct[Ht],_t,this.errors))})}}_copyOptions(){const ne={};if(this.options){const le=this.options.params;if(le){const De=ne.params={};Object.keys(le).forEach(Ye=>{De[Ye]=le[Ye]})}}return ne}createSubContext(ne=null,le,De){const Ye=le||this.element,Ct=new xi(this._driver,Ye,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Ye,De||0));return Ct.previousNode=this.previousNode,Ct.currentAnimateTimings=this.currentAnimateTimings,Ct.options=this._copyOptions(),Ct.updateOptions(ne),Ct.currentQueryIndex=this.currentQueryIndex,Ct.currentQueryTotal=this.currentQueryTotal,Ct.parentContext=this,this.subContextCount++,Ct}transformIntoNewTimeline(ne){return this.previousNode=ks,this.currentTimeline=this.currentTimeline.fork(this.element,ne),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(ne,le,De){const Ye={duration:le??ne.duration,delay:this.currentTimeline.currentTime+(De??0)+ne.delay,easing:""},Ct=new M(this._driver,ne.element,ne.keyframes,ne.preStyleProps,ne.postStyleProps,Ye,ne.stretchStartingKeyframe);return this.timelines.push(Ct),Ye}incrementTime(ne){this.currentTimeline.forwardTime(this.currentTimeline.duration+ne)}delayNextStep(ne){ne>0&&this.currentTimeline.delayNextStep(ne)}invokeQuery(ne,le,De,Ye,Ct,_t){let Ht=[];if(Ye&&Ht.push(this.element),ne.length>0){ne=(ne=ne.replace(ir,"."+this._enterClassName)).replace($r,"."+this._leaveClassName);let ds=this._driver.query(this.element,ne,1!=De);0!==De&&(ds=De<0?ds.slice(ds.length+De,ds.length):ds.slice(0,De)),Ht.push(...ds)}return!Ct&&0==Ht.length&&_t.push(function Kt(Ze){return new u.vHH(3014,!1)}()),Ht}}class v{constructor(ne,le,De,Ye){this._driver=ne,this.element=le,this.startTime=De,this._elementTimelineStylesLookup=Ye,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(le),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(le,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(ne){const le=1===this._keyframes.size&&this._pendingStyles.size;this.duration||le?(this.forwardTime(this.currentTime+ne),le&&this.snapshotCurrentStyles()):this.startTime+=ne}fork(ne,le){return this.applyStylesToKeyframe(),new v(this._driver,ne,le||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(ne){this.applyStylesToKeyframe(),this.duration=ne,this._loadKeyframe()}_updateStyle(ne,le){this._localTimelineStyles.set(ne,le),this._globalTimelineStyles.set(ne,le),this._styleSummary.set(ne,{time:this.currentTime,value:le})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(ne){ne&&this._previousKeyframe.set("easing",ne);for(let[le,De]of this._globalTimelineStyles)this._backFill.set(le,De||lt.l3),this._currentKeyframe.set(le,lt.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(ne,le,De,Ye){le&&this._previousKeyframe.set("easing",le);const Ct=Ye&&Ye.params||{},_t=function fe(Ze,ne){const le=new Map;let De;return Ze.forEach(Ye=>{if("*"===Ye){De=De||ne.keys();for(let Ct of De)le.set(Ct,lt.l3)}else rs(Ye,le)}),le}(ne,this._globalTimelineStyles);for(let[Ht,vi]of _t){const ds=Cn(vi,Ct,De);this._pendingStyles.set(Ht,ds),this._localTimelineStyles.has(Ht)||this._backFill.set(Ht,this._globalTimelineStyles.get(Ht)??lt.l3),this._updateStyle(Ht,ds)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((ne,le)=>{this._currentKeyframe.set(le,ne)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((ne,le)=>{this._currentKeyframe.has(le)||this._currentKeyframe.set(le,ne)}))}snapshotCurrentStyles(){for(let[ne,le]of this._localTimelineStyles)this._pendingStyles.set(ne,le),this._updateStyle(ne,le)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const ne=[];for(let le in this._currentKeyframe)ne.push(le);return ne}mergeTimelineCollectedStyles(ne){ne._styleSummary.forEach((le,De)=>{const Ye=this._styleSummary.get(De);(!Ye||le.time>Ye.time)&&this._updateStyle(De,le.value)})}buildKeyframes(){this.applyStylesToKeyframe();const ne=new Set,le=new Set,De=1===this._keyframes.size&&0===this.duration;let Ye=[];this._keyframes.forEach((Ht,vi)=>{const ds=rs(Ht,new Map,this._backFill);ds.forEach((Ks,Qs)=>{Ks===lt.k1?ne.add(Qs):Ks===lt.l3&&le.add(Qs)}),De||ds.set("offset",vi/this.duration),Ye.push(ds)});const Ct=ne.size?wr(ne.values()):[],_t=le.size?wr(le.values()):[];if(De){const Ht=Ye[0],vi=new Map(Ht);Ht.set("offset",0),vi.set("offset",1),Ye=[Ht,vi]}return vr(this.element,Ye,Ct,_t,this.duration,this.startTime,this.easing,!1)}}class M extends v{constructor(ne,le,De,Ye,Ct,_t,Ht=!1){super(ne,le,_t.delay),this.keyframes=De,this.preStyleProps=Ye,this.postStyleProps=Ct,this._stretchStartingKeyframe=Ht,this.timings={duration:_t.duration,delay:_t.delay,easing:_t.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let ne=this.keyframes,{delay:le,duration:De,easing:Ye}=this.timings;if(this._stretchStartingKeyframe&&le){const Ct=[],_t=De+le,Ht=le/_t,vi=rs(ne[0]);vi.set("offset",0),Ct.push(vi);const ds=rs(ne[0]);ds.set("offset",$(Ht)),Ct.push(ds);const Ks=ne.length-1;for(let Qs=1;Qs<=Ks;Qs++){let Wn=rs(ne[Qs]);const or=Wn.get("offset");Wn.set("offset",$((le+or*De)/_t)),Ct.push(Wn)}De=_t,le=0,Ye="",ne=Ct}return vr(this.element,ne,this.preStyleProps,this.postStyleProps,De,le,Ye,!0)}}function $(Ze,ne=3){const le=Math.pow(10,ne-1);return Math.round(Ze*le)/le}class pt{}const wi=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Gi extends pt{normalizePropertyName(ne,le){return Br(ne)}normalizeStyleValue(ne,le,De,Ye){let Ct="";const _t=De.toString().trim();if(wi.has(le)&&0!==De&&"0"!==De)if("number"==typeof De)Ct="px";else{const Ht=De.match(/^[+-]?[\d\.]+([a-z]*)$/);Ht&&0==Ht[1].length&&Ye.push(function ji(Ze,ne){return new u.vHH(3005,!1)}())}return _t+Ct}}function Vi(Ze,ne,le,De,Ye,Ct,_t,Ht,vi,ds,Ks,Qs,Wn){return{type:0,element:Ze,triggerName:ne,isRemovalTransition:Ye,fromState:le,fromStyles:Ct,toState:De,toStyles:_t,timelines:Ht,queriedElements:vi,preStyleProps:ds,postStyleProps:Ks,totalTime:Qs,errors:Wn}}const sn={};class ts{constructor(ne,le,De){this._triggerName=ne,this.ast=le,this._stateStyles=De}match(ne,le,De,Ye){return function Sn(Ze,ne,le,De,Ye){return Ze.some(Ct=>Ct(ne,le,De,Ye))}(this.ast.matchers,ne,le,De,Ye)}buildStyles(ne,le,De){let Ye=this._stateStyles.get("*");return void 0!==ne&&(Ye=this._stateStyles.get(ne?.toString())||Ye),Ye?Ye.buildStyles(le,De):new Map}build(ne,le,De,Ye,Ct,_t,Ht,vi,ds,Ks){const Qs=[],Wn=this.ast.options&&this.ast.options.params||sn,gn=this.buildStyles(De,Ht&&Ht.params||sn,Qs),Un=vi&&vi.params||sn,Zr=this.buildStyles(Ye,Un,Qs),Co=new Set,fo=new Map,hl=new Map,No="void"===Ye,el={params:Ws(Un,Wn),delay:this.ast.options?.delay},wo=Ks?[]:Ir(ne,le,this.ast.animation,Ct,_t,gn,Zr,el,ds,Qs);let Sl=0;if(wo.forEach(vn=>{Sl=Math.max(vn.duration+vn.delay,Sl)}),Qs.length)return Vi(le,this._triggerName,De,Ye,No,gn,Zr,[],[],fo,hl,Sl,Qs);wo.forEach(vn=>{const vl=vn.element,Oo=Ti(fo,vl,new Set);vn.preStyleProps.forEach(qr=>Oo.add(qr));const tl=Ti(hl,vl,new Set);vn.postStyleProps.forEach(qr=>tl.add(qr)),vl!==le&&Co.add(vl)});const lr=wr(Co.values());return Vi(le,this._triggerName,De,Ye,No,gn,Zr,wo,lr,fo,hl,Sl)}}function Ws(Ze,ne){const le=Cs(ne);for(const De in Ze)Ze.hasOwnProperty(De)&&null!=Ze[De]&&(le[De]=Ze[De]);return le}class ht{constructor(ne,le,De){this.styles=ne,this.defaultParams=le,this.normalizer=De}buildStyles(ne,le){const De=new Map,Ye=Cs(this.defaultParams);return Object.keys(ne).forEach(Ct=>{const _t=ne[Ct];null!==_t&&(Ye[Ct]=_t)}),this.styles.styles.forEach(Ct=>{"string"!=typeof Ct&&Ct.forEach((_t,Ht)=>{_t&&(_t=Cn(_t,Ye,le));const vi=this.normalizer.normalizePropertyName(Ht,le);_t=this.normalizer.normalizeStyleValue(Ht,vi,_t,le),De.set(vi,_t)})}),De}}class I{constructor(ne,le,De){this.name=ne,this.ast=le,this._normalizer=De,this.transitionFactories=[],this.states=new Map,le.states.forEach(Ye=>{this.states.set(Ye.name,new ht(Ye.style,Ye.options&&Ye.options.params||{},De))}),oe(this.states,"true","1"),oe(this.states,"false","0"),le.transitions.forEach(Ye=>{this.transitionFactories.push(new ts(ne,Ye,this.states))}),this.fallbackTransition=function j(Ze,ne,le){return new ts(Ze,{type:1,animation:{type:2,steps:[],options:null},matchers:[(_t,Ht)=>!0],options:null,queryCount:0,depCount:0},ne)}(ne,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(ne,le,De,Ye){return this.transitionFactories.find(_t=>_t.match(ne,le,De,Ye))||null}matchStyles(ne,le,De){return this.fallbackTransition.buildStyles(ne,le,De)}}function oe(Ze,ne,le){Ze.has(ne)?Ze.has(le)||Ze.set(le,Ze.get(ne)):Ze.has(le)&&Ze.set(ne,Ze.get(le))}const Ee=new Qr;class dt{constructor(ne,le,De){this.bodyNode=ne,this._driver=le,this._normalizer=De,this._animations=new Map,this._playersById=new Map,this.players=[]}register(ne,le){const De=[],Ct=yr(this._driver,le,De,[]);if(De.length)throw function Wt(Ze){return new u.vHH(3503,!1)}();this._animations.set(ne,Ct)}_buildPlayer(ne,le,De){const Ye=ne.element,Ct=wt(0,this._normalizer,0,ne.keyframes,le,De);return this._driver.animate(Ye,Ct,ne.duration,ne.delay,ne.easing,[],!0)}create(ne,le,De={}){const Ye=[],Ct=this._animations.get(ne);let _t;const Ht=new Map;if(Ct?(_t=Ir(this._driver,le,Ct,ci,pi,new Map,new Map,De,Ee,Ye),_t.forEach(Ks=>{const Qs=Ti(Ht,Ks.element,new Map);Ks.postStyleProps.forEach(Wn=>Qs.set(Wn,null))})):(Ye.push(function At(){return new u.vHH(3300,!1)}()),_t=[]),Ye.length)throw function li(Ze){return new u.vHH(3504,!1)}();Ht.forEach((Ks,Qs)=>{Ks.forEach((Wn,or)=>{Ks.set(or,this._driver.computeStyle(Qs,or,lt.l3))})});const ds=kt(_t.map(Ks=>{const Qs=Ht.get(Ks.element);return this._buildPlayer(Ks,new Map,Qs)}));return this._playersById.set(ne,ds),ds.onDestroy(()=>this.destroy(ne)),this.players.push(ds),ds}destroy(ne){const le=this._getPlayer(ne);le.destroy(),this._playersById.delete(ne);const De=this.players.indexOf(le);De>=0&&this.players.splice(De,1)}_getPlayer(ne){const le=this._playersById.get(ne);if(!le)throw function Oi(Ze){return new u.vHH(3301,!1)}();return le}listen(ne,le,De,Ye){const Ct=bi(le,"","","");return Ot(this._getPlayer(ne),De,Ct,Ye),()=>{}}command(ne,le,De,Ye){if("register"==De)return void this.register(ne,Ye[0]);if("create"==De)return void this.create(ne,le,Ye[0]||{});const Ct=this._getPlayer(ne);switch(De){case"play":Ct.play();break;case"pause":Ct.pause();break;case"reset":Ct.reset();break;case"restart":Ct.restart();break;case"finish":Ct.finish();break;case"init":Ct.init();break;case"setPosition":Ct.setPosition(parseFloat(Ye[0]));break;case"destroy":this.destroy(ne)}}}const Bt="ng-animate-queued",Yi="ng-animate-disabled",Xs=[],Jn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ar={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},En="__ng_removed";class Ie{constructor(ne,le=""){this.namespaceId=le;const De=ne&&ne.hasOwnProperty("value");if(this.value=function en(Ze){return Ze??null}(De?ne.value:ne),De){const Ct=Cs(ne);delete Ct.value,this.options=Ct}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(ne){const le=ne.params;if(le){const De=this.options.params;Object.keys(le).forEach(Ye=>{null==De[Ye]&&(De[Ye]=le[Ye])})}}}const Ae="void",Le=new Ie(Ae);class Et{constructor(ne,le,De){this.id=ne,this.hostElement=le,this._engine=De,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+ne,Rn(le,this._hostClassName)}listen(ne,le,De,Ye){if(!this._triggers.has(le))throw function Gt(Ze,ne){return new u.vHH(3302,!1)}();if(null==De||0==De.length)throw function Dt(Ze){return new u.vHH(3303,!1)}();if(!function jo(Ze){return"start"==Ze||"done"==Ze}(De))throw function Pt(Ze,ne){return new u.vHH(3400,!1)}();const Ct=Ti(this._elementListeners,ne,[]),_t={name:le,phase:De,callback:Ye};Ct.push(_t);const Ht=Ti(this._engine.statesByElement,ne,new Map);return Ht.has(le)||(Rn(ne,Fi),Rn(ne,Fi+"-"+le),Ht.set(le,Le)),()=>{this._engine.afterFlush(()=>{const vi=Ct.indexOf(_t);vi>=0&&Ct.splice(vi,1),this._triggers.has(le)||Ht.delete(le)})}}register(ne,le){return!this._triggers.has(ne)&&(this._triggers.set(ne,le),!0)}_getTrigger(ne){const le=this._triggers.get(ne);if(!le)throw function di(Ze){return new u.vHH(3401,!1)}();return le}trigger(ne,le,De,Ye=!0){const Ct=this._getTrigger(le),_t=new _s(this.id,le,ne);let Ht=this._engine.statesByElement.get(ne);Ht||(Rn(ne,Fi),Rn(ne,Fi+"-"+le),this._engine.statesByElement.set(ne,Ht=new Map));let vi=Ht.get(le);const ds=new Ie(De,this.id);if(!(De&&De.hasOwnProperty("value"))&&vi&&ds.absorbOptions(vi.options),Ht.set(le,ds),vi||(vi=Le),ds.value!==Ae&&vi.value===ds.value){if(!function ko(Ze,ne){const le=Object.keys(Ze),De=Object.keys(ne);if(le.length!=De.length)return!1;for(let Ye=0;Ye<le.length;Ye++){const Ct=le[Ye];if(!ne.hasOwnProperty(Ct)||Ze[Ct]!==ne[Ct])return!1}return!0}(vi.params,ds.params)){const Un=[],Zr=Ct.matchStyles(vi.value,vi.params,Un),Co=Ct.matchStyles(ds.value,ds.params,Un);Un.length?this._engine.reportError(Un):this._engine.afterFlush(()=>{qn(ne,Zr),ln(ne,Co)})}return}const Wn=Ti(this._engine.playersByElement,ne,[]);Wn.forEach(Un=>{Un.namespaceId==this.id&&Un.triggerName==le&&Un.queued&&Un.destroy()});let or=Ct.matchTransition(vi.value,ds.value,ne,ds.params),gn=!1;if(!or){if(!Ye)return;or=Ct.fallbackTransition,gn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:ne,triggerName:le,transition:or,fromState:vi,toState:ds,player:_t,isFallbackTransition:gn}),gn||(Rn(ne,Bt),_t.onStart(()=>{Do(ne,Bt)})),_t.onDone(()=>{let Un=this.players.indexOf(_t);Un>=0&&this.players.splice(Un,1);const Zr=this._engine.playersByElement.get(ne);if(Zr){let Co=Zr.indexOf(_t);Co>=0&&Zr.splice(Co,1)}}),this.players.push(_t),Wn.push(_t),_t}deregister(ne){this._triggers.delete(ne),this._engine.statesByElement.forEach(le=>le.delete(ne)),this._elementListeners.forEach((le,De)=>{this._elementListeners.set(De,le.filter(Ye=>Ye.name!=ne))})}clearElementCache(ne){this._engine.statesByElement.delete(ne),this._elementListeners.delete(ne);const le=this._engine.playersByElement.get(ne);le&&(le.forEach(De=>De.destroy()),this._engine.playersByElement.delete(ne))}_signalRemovalForInnerTriggers(ne,le){const De=this._engine.driver.query(ne,as,!0);De.forEach(Ye=>{if(Ye[En])return;const Ct=this._engine.fetchNamespacesByElement(Ye);Ct.size?Ct.forEach(_t=>_t.triggerLeaveAnimation(Ye,le,!1,!0)):this.clearElementCache(Ye)}),this._engine.afterFlushAnimationsDone(()=>De.forEach(Ye=>this.clearElementCache(Ye)))}triggerLeaveAnimation(ne,le,De,Ye){const Ct=this._engine.statesByElement.get(ne),_t=new Map;if(Ct){const Ht=[];if(Ct.forEach((vi,ds)=>{if(_t.set(ds,vi.value),this._triggers.has(ds)){const Ks=this.trigger(ne,ds,Ae,Ye);Ks&&Ht.push(Ks)}}),Ht.length)return this._engine.markElementAsRemoved(this.id,ne,!0,le,_t),De&&kt(Ht).onDone(()=>this._engine.processLeaveNode(ne)),!0}return!1}prepareLeaveAnimationListeners(ne){const le=this._elementListeners.get(ne),De=this._engine.statesByElement.get(ne);if(le&&De){const Ye=new Set;le.forEach(Ct=>{const _t=Ct.name;if(Ye.has(_t))return;Ye.add(_t);const vi=this._triggers.get(_t).fallbackTransition,ds=De.get(_t)||Le,Ks=new Ie(Ae),Qs=new _s(this.id,_t,ne);this._engine.totalQueuedPlayers++,this._queue.push({element:ne,triggerName:_t,transition:vi,fromState:ds,toState:Ks,player:Qs,isFallbackTransition:!0})})}}removeNode(ne,le){const De=this._engine;if(ne.childElementCount&&this._signalRemovalForInnerTriggers(ne,le),this.triggerLeaveAnimation(ne,le,!0))return;let Ye=!1;if(De.totalAnimations){const Ct=De.players.length?De.playersByQueriedElement.get(ne):[];if(Ct&&Ct.length)Ye=!0;else{let _t=ne;for(;_t=_t.parentNode;)if(De.statesByElement.get(_t)){Ye=!0;break}}}if(this.prepareLeaveAnimationListeners(ne),Ye)De.markElementAsRemoved(this.id,ne,!1,le);else{const Ct=ne[En];(!Ct||Ct===Jn)&&(De.afterFlush(()=>this.clearElementCache(ne)),De.destroyInnerAnimations(ne),De._onRemovalComplete(ne,le))}}insertNode(ne,le){Rn(ne,this._hostClassName)}drainQueuedTransitions(ne){const le=[];return this._queue.forEach(De=>{const Ye=De.player;if(Ye.destroyed)return;const Ct=De.element,_t=this._elementListeners.get(Ct);_t&&_t.forEach(Ht=>{if(Ht.name==De.triggerName){const vi=bi(Ct,De.triggerName,De.fromState.value,De.toState.value);vi._data=ne,Ot(De.player,Ht.phase,vi,Ht.callback)}}),Ye.markedForDestroy?this._engine.afterFlush(()=>{Ye.destroy()}):le.push(De)}),this._queue=[],le.sort((De,Ye)=>{const Ct=De.transition.ast.depCount,_t=Ye.transition.ast.depCount;return 0==Ct||0==_t?Ct-_t:this._engine.driver.containsElement(De.element,Ye.element)?1:-1})}destroy(ne){this.players.forEach(le=>le.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,ne)}elementContainsData(ne){let le=!1;return this._elementListeners.has(ne)&&(le=!0),le=!!this._queue.find(De=>De.element===ne)||le,le}}class Ji{constructor(ne,le,De){this.bodyNode=ne,this.driver=le,this._normalizer=De,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Ye,Ct)=>{}}_onRemovalComplete(ne,le){this.onRemovalComplete(ne,le)}get queuedPlayers(){const ne=[];return this._namespaceList.forEach(le=>{le.players.forEach(De=>{De.queued&&ne.push(De)})}),ne}createNamespace(ne,le){const De=new Et(ne,le,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,le)?this._balanceNamespaceList(De,le):(this.newHostElements.set(le,De),this.collectEnterElement(le)),this._namespaceLookup[ne]=De}_balanceNamespaceList(ne,le){const De=this._namespaceList,Ye=this.namespacesByHostElement;if(De.length-1>=0){let _t=!1,Ht=this.driver.getParentElement(le);for(;Ht;){const vi=Ye.get(Ht);if(vi){const ds=De.indexOf(vi);De.splice(ds+1,0,ne),_t=!0;break}Ht=this.driver.getParentElement(Ht)}_t||De.unshift(ne)}else De.push(ne);return Ye.set(le,ne),ne}register(ne,le){let De=this._namespaceLookup[ne];return De||(De=this.createNamespace(ne,le)),De}registerTrigger(ne,le,De){let Ye=this._namespaceLookup[ne];Ye&&Ye.register(le,De)&&this.totalAnimations++}destroy(ne,le){if(!ne)return;const De=this._fetchNamespace(ne);this.afterFlush(()=>{this.namespacesByHostElement.delete(De.hostElement),delete this._namespaceLookup[ne];const Ye=this._namespaceList.indexOf(De);Ye>=0&&this._namespaceList.splice(Ye,1)}),this.afterFlushAnimationsDone(()=>De.destroy(le))}_fetchNamespace(ne){return this._namespaceLookup[ne]}fetchNamespacesByElement(ne){const le=new Set,De=this.statesByElement.get(ne);if(De)for(let Ye of De.values())if(Ye.namespaceId){const Ct=this._fetchNamespace(Ye.namespaceId);Ct&&le.add(Ct)}return le}trigger(ne,le,De,Ye){if(po(le)){const Ct=this._fetchNamespace(ne);if(Ct)return Ct.trigger(le,De,Ye),!0}return!1}insertNode(ne,le,De,Ye){if(!po(le))return;const Ct=le[En];if(Ct&&Ct.setForRemoval){Ct.setForRemoval=!1,Ct.setForMove=!0;const _t=this.collectedLeaveElements.indexOf(le);_t>=0&&this.collectedLeaveElements.splice(_t,1)}if(ne){const _t=this._fetchNamespace(ne);_t&&_t.insertNode(le,De)}Ye&&this.collectEnterElement(le)}collectEnterElement(ne){this.collectedEnterElements.push(ne)}markElementAsDisabled(ne,le){le?this.disabledNodes.has(ne)||(this.disabledNodes.add(ne),Rn(ne,Yi)):this.disabledNodes.has(ne)&&(this.disabledNodes.delete(ne),Do(ne,Yi))}removeNode(ne,le,De,Ye){if(po(le)){const Ct=ne?this._fetchNamespace(ne):null;if(Ct?Ct.removeNode(le,Ye):this.markElementAsRemoved(ne,le,!1,Ye),De){const _t=this.namespacesByHostElement.get(le);_t&&_t.id!==ne&&_t.removeNode(le,Ye)}}else this._onRemovalComplete(le,Ye)}markElementAsRemoved(ne,le,De,Ye,Ct){this.collectedLeaveElements.push(le),le[En]={namespaceId:ne,setForRemoval:Ye,hasAnimation:De,removedBeforeQueried:!1,previousTriggersValues:Ct}}listen(ne,le,De,Ye,Ct){return po(le)?this._fetchNamespace(ne).listen(le,De,Ye,Ct):()=>{}}_buildInstruction(ne,le,De,Ye,Ct){return ne.transition.build(this.driver,ne.element,ne.fromState.value,ne.toState.value,De,Ye,ne.fromState.options,ne.toState.options,le,Ct)}destroyInnerAnimations(ne){let le=this.driver.query(ne,as,!0);le.forEach(De=>this.destroyActiveAnimationsForElement(De)),0!=this.playersByQueriedElement.size&&(le=this.driver.query(ne,Ns,!0),le.forEach(De=>this.finishActiveQueriedAnimationOnElement(De)))}destroyActiveAnimationsForElement(ne){const le=this.playersByElement.get(ne);le&&le.forEach(De=>{De.queued?De.markedForDestroy=!0:De.destroy()})}finishActiveQueriedAnimationOnElement(ne){const le=this.playersByQueriedElement.get(ne);le&&le.forEach(De=>De.finish())}whenRenderingDone(){return new Promise(ne=>{if(this.players.length)return kt(this.players).onDone(()=>ne());ne()})}processLeaveNode(ne){const le=ne[En];if(le&&le.setForRemoval){if(ne[En]=Jn,le.namespaceId){this.destroyInnerAnimations(ne);const De=this._fetchNamespace(le.namespaceId);De&&De.clearElementCache(ne)}this._onRemovalComplete(ne,le.setForRemoval)}ne.classList?.contains(Yi)&&this.markElementAsDisabled(ne,!1),this.driver.query(ne,".ng-animate-disabled",!0).forEach(De=>{this.markElementAsDisabled(De,!1)})}flush(ne=-1){let le=[];if(this.newHostElements.size&&(this.newHostElements.forEach((De,Ye)=>this._balanceNamespaceList(De,Ye)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let De=0;De<this.collectedEnterElements.length;De++)Rn(this.collectedEnterElements[De],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const De=[];try{le=this._flushAnimations(De,ne)}finally{for(let Ye=0;Ye<De.length;Ye++)De[Ye]()}}else for(let De=0;De<this.collectedLeaveElements.length;De++)this.processLeaveNode(this.collectedLeaveElements[De]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(De=>De()),this._flushFns=[],this._whenQuietFns.length){const De=this._whenQuietFns;this._whenQuietFns=[],le.length?kt(le).onDone(()=>{De.forEach(Ye=>Ye())}):De.forEach(Ye=>Ye())}}reportError(ne){throw function ot(Ze){return new u.vHH(3402,!1)}()}_flushAnimations(ne,le){const De=new Qr,Ye=[],Ct=new Map,_t=[],Ht=new Map,vi=new Map,ds=new Map,Ks=new Set;this.disabledNodes.forEach(Tn=>{Ks.add(Tn);const er=this.driver.query(Tn,".ng-animate-queued",!0);for(let pr=0;pr<er.length;pr++)Ks.add(er[pr])});const Qs=this.bodyNode,Wn=Array.from(this.statesByElement.keys()),or=Yo(Wn,this.collectedEnterElements),gn=new Map;let Un=0;or.forEach((Tn,er)=>{const pr=ci+Un++;gn.set(er,pr),Tn.forEach(Kr=>Rn(Kr,pr))});const Zr=[],Co=new Set,fo=new Set;for(let Tn=0;Tn<this.collectedLeaveElements.length;Tn++){const er=this.collectedLeaveElements[Tn],pr=er[En];pr&&pr.setForRemoval&&(Zr.push(er),Co.add(er),pr.hasAnimation?this.driver.query(er,".ng-star-inserted",!0).forEach(Kr=>Co.add(Kr)):fo.add(er))}const hl=new Map,No=Yo(Wn,Array.from(Co));No.forEach((Tn,er)=>{const pr=pi+Un++;hl.set(er,pr),Tn.forEach(Kr=>Rn(Kr,pr))}),ne.push(()=>{or.forEach((Tn,er)=>{const pr=gn.get(er);Tn.forEach(Kr=>Do(Kr,pr))}),No.forEach((Tn,er)=>{const pr=hl.get(er);Tn.forEach(Kr=>Do(Kr,pr))}),Zr.forEach(Tn=>{this.processLeaveNode(Tn)})});const el=[],wo=[];for(let Tn=this._namespaceList.length-1;Tn>=0;Tn--)this._namespaceList[Tn].drainQueuedTransitions(le).forEach(pr=>{const Kr=pr.player,il=pr.element;if(el.push(Kr),this.collectedEnterElements.length){const Bo=il[En];if(Bo&&Bo.setForMove){if(Bo.previousTriggersValues&&Bo.previousTriggersValues.has(pr.triggerName)){const xo=Bo.previousTriggersValues.get(pr.triggerName),Is=this.statesByElement.get(pr.element);if(Is&&Is.has(pr.triggerName)){const g=Is.get(pr.triggerName);g.value=xo,Is.set(pr.triggerName,g)}}return void Kr.destroy()}}const Tl=!Qs||!this.driver.containsElement(Qs,il),sl=hl.get(il),Bl=gn.get(il),Xr=this._buildInstruction(pr,De,Bl,sl,Tl);if(Xr.errors&&Xr.errors.length)return void wo.push(Xr);if(Tl)return Kr.onStart(()=>qn(il,Xr.fromStyles)),Kr.onDestroy(()=>ln(il,Xr.toStyles)),void Ye.push(Kr);if(pr.isFallbackTransition)return Kr.onStart(()=>qn(il,Xr.fromStyles)),Kr.onDestroy(()=>ln(il,Xr.toStyles)),void Ye.push(Kr);const nl=[];Xr.timelines.forEach(Bo=>{Bo.stretchStartingKeyframe=!0,this.disabledNodes.has(Bo.element)||nl.push(Bo)}),Xr.timelines=nl,De.append(il,Xr.timelines),_t.push({instruction:Xr,player:Kr,element:il}),Xr.queriedElements.forEach(Bo=>Ti(Ht,Bo,[]).push(Kr)),Xr.preStyleProps.forEach((Bo,xo)=>{if(Bo.size){let Is=vi.get(xo);Is||vi.set(xo,Is=new Set),Bo.forEach((g,D)=>Is.add(D))}}),Xr.postStyleProps.forEach((Bo,xo)=>{let Is=ds.get(xo);Is||ds.set(xo,Is=new Set),Bo.forEach((g,D)=>Is.add(D))})});if(wo.length){const Tn=[];wo.forEach(er=>{Tn.push(function Ei(Ze,ne){return new u.vHH(3505,!1)}())}),el.forEach(er=>er.destroy()),this.reportError(Tn)}const Sl=new Map,lr=new Map;_t.forEach(Tn=>{const er=Tn.element;De.has(er)&&(lr.set(er,er),this._beforeAnimationBuild(Tn.player.namespaceId,Tn.instruction,Sl))}),Ye.forEach(Tn=>{const er=Tn.element;this._getPreviousPlayers(er,!1,Tn.namespaceId,Tn.triggerName,null).forEach(Kr=>{Ti(Sl,er,[]).push(Kr),Kr.destroy()})});const vn=Zr.filter(Tn=>ze(Tn,vi,ds)),vl=new Map;hr(vl,this.driver,fo,ds,lt.l3).forEach(Tn=>{ze(Tn,vi,ds)&&vn.push(Tn)});const tl=new Map;or.forEach((Tn,er)=>{hr(tl,this.driver,new Set(Tn),vi,lt.k1)}),vn.forEach(Tn=>{const er=vl.get(Tn),pr=tl.get(Tn);vl.set(Tn,new Map([...Array.from(er?.entries()??[]),...Array.from(pr?.entries()??[])]))});const qr=[],Ho=[],kl={};_t.forEach(Tn=>{const{element:er,player:pr,instruction:Kr}=Tn;if(De.has(er)){if(Ks.has(er))return pr.onDestroy(()=>ln(er,Kr.toStyles)),pr.disabled=!0,pr.overrideTotalTime(Kr.totalTime),void Ye.push(pr);let il=kl;if(lr.size>1){let sl=er;const Bl=[];for(;sl=sl.parentNode;){const Xr=lr.get(sl);if(Xr){il=Xr;break}Bl.push(sl)}Bl.forEach(Xr=>lr.set(Xr,il))}const Tl=this._buildAnimation(pr.namespaceId,Kr,Sl,Ct,tl,vl);if(pr.setRealPlayer(Tl),il===kl)qr.push(pr);else{const sl=this.playersByElement.get(il);sl&&sl.length&&(pr.parentPlayer=kt(sl)),Ye.push(pr)}}else qn(er,Kr.fromStyles),pr.onDestroy(()=>ln(er,Kr.toStyles)),Ho.push(pr),Ks.has(er)&&Ye.push(pr)}),Ho.forEach(Tn=>{const er=Ct.get(Tn.element);if(er&&er.length){const pr=kt(er);Tn.setRealPlayer(pr)}}),Ye.forEach(Tn=>{Tn.parentPlayer?Tn.syncPlayerEvents(Tn.parentPlayer):Tn.destroy()});for(let Tn=0;Tn<Zr.length;Tn++){const er=Zr[Tn],pr=er[En];if(Do(er,pi),pr&&pr.hasAnimation)continue;let Kr=[];if(Ht.size){let Tl=Ht.get(er);Tl&&Tl.length&&Kr.push(...Tl);let sl=this.driver.query(er,Ns,!0);for(let Bl=0;Bl<sl.length;Bl++){let Xr=Ht.get(sl[Bl]);Xr&&Xr.length&&Kr.push(...Xr)}}const il=Kr.filter(Tl=>!Tl.destroyed);il.length?qo(this,er,il):this.processLeaveNode(er)}return Zr.length=0,qr.forEach(Tn=>{this.players.push(Tn),Tn.onDone(()=>{Tn.destroy();const er=this.players.indexOf(Tn);this.players.splice(er,1)}),Tn.play()}),qr}elementContainsData(ne,le){let De=!1;const Ye=le[En];return Ye&&Ye.setForRemoval&&(De=!0),this.playersByElement.has(le)&&(De=!0),this.playersByQueriedElement.has(le)&&(De=!0),this.statesByElement.has(le)&&(De=!0),this._fetchNamespace(ne).elementContainsData(le)||De}afterFlush(ne){this._flushFns.push(ne)}afterFlushAnimationsDone(ne){this._whenQuietFns.push(ne)}_getPreviousPlayers(ne,le,De,Ye,Ct){let _t=[];if(le){const Ht=this.playersByQueriedElement.get(ne);Ht&&(_t=Ht)}else{const Ht=this.playersByElement.get(ne);if(Ht){const vi=!Ct||Ct==Ae;Ht.forEach(ds=>{ds.queued||!vi&&ds.triggerName!=Ye||_t.push(ds)})}}return(De||Ye)&&(_t=_t.filter(Ht=>!(De&&De!=Ht.namespaceId||Ye&&Ye!=Ht.triggerName))),_t}_beforeAnimationBuild(ne,le,De){const Ct=le.element,_t=le.isRemovalTransition?void 0:ne,Ht=le.isRemovalTransition?void 0:le.triggerName;for(const vi of le.timelines){const ds=vi.element,Ks=ds!==Ct,Qs=Ti(De,ds,[]);this._getPreviousPlayers(ds,Ks,_t,Ht,le.toState).forEach(or=>{const gn=or.getRealPlayer();gn.beforeDestroy&&gn.beforeDestroy(),or.destroy(),Qs.push(or)})}qn(Ct,le.fromStyles)}_buildAnimation(ne,le,De,Ye,Ct,_t){const Ht=le.triggerName,vi=le.element,ds=[],Ks=new Set,Qs=new Set,Wn=le.timelines.map(gn=>{const Un=gn.element;Ks.add(Un);const Zr=Un[En];if(Zr&&Zr.removedBeforeQueried)return new lt.ZN(gn.duration,gn.delay);const Co=Un!==vi,fo=function zr(Ze){const ne=[];return Mr(Ze,ne),ne}((De.get(Un)||Xs).map(Sl=>Sl.getRealPlayer())).filter(Sl=>!!Sl.element&&Sl.element===Un),hl=Ct.get(Un),No=_t.get(Un),el=wt(0,this._normalizer,0,gn.keyframes,hl,No),wo=this._buildPlayer(gn,el,fo);if(gn.subTimeline&&Ye&&Qs.add(Un),Co){const Sl=new _s(ne,Ht,Un);Sl.setRealPlayer(wo),ds.push(Sl)}return wo});ds.forEach(gn=>{Ti(this.playersByQueriedElement,gn.element,[]).push(gn),gn.onDone(()=>function _n(Ze,ne,le){let De=Ze.get(ne);if(De){if(De.length){const Ye=De.indexOf(le);De.splice(Ye,1)}0==De.length&&Ze.delete(ne)}return De}(this.playersByQueriedElement,gn.element,gn))}),Ks.forEach(gn=>Rn(gn,Es));const or=kt(Wn);return or.onDestroy(()=>{Ks.forEach(gn=>Do(gn,Es)),ln(vi,le.toStyles)}),Qs.forEach(gn=>{Ti(Ye,gn,[]).push(or)}),or}_buildPlayer(ne,le,De){return le.length>0?this.driver.animate(ne.element,le,ne.duration,ne.delay,ne.easing,De):new lt.ZN(ne.duration,ne.delay)}}class _s{constructor(ne,le,De){this.namespaceId=ne,this.triggerName=le,this.element=De,this._player=new lt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(ne){this._containsRealPlayer||(this._player=ne,this._queuedCallbacks.forEach((le,De)=>{le.forEach(Ye=>Ot(ne,De,void 0,Ye))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(ne.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(ne){this.totalTime=ne}syncPlayerEvents(ne){const le=this._player;le.triggerCallback&&ne.onStart(()=>le.triggerCallback("start")),ne.onDone(()=>this.finish()),ne.onDestroy(()=>this.destroy())}_queueEvent(ne,le){Ti(this._queuedCallbacks,ne,[]).push(le)}onDone(ne){this.queued&&this._queueEvent("done",ne),this._player.onDone(ne)}onStart(ne){this.queued&&this._queueEvent("start",ne),this._player.onStart(ne)}onDestroy(ne){this.queued&&this._queueEvent("destroy",ne),this._player.onDestroy(ne)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(ne){this.queued||this._player.setPosition(ne)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(ne){const le=this._player;le.triggerCallback&&le.triggerCallback(ne)}}function po(Ze){return Ze&&1===Ze.nodeType}function nr(Ze,ne){const le=Ze.style.display;return Ze.style.display=ne??"none",le}function hr(Ze,ne,le,De,Ye){const Ct=[];le.forEach(vi=>Ct.push(nr(vi)));const _t=[];De.forEach((vi,ds)=>{const Ks=new Map;vi.forEach(Qs=>{const Wn=ne.computeStyle(ds,Qs,Ye);Ks.set(Qs,Wn),(!Wn||0==Wn.length)&&(ds[En]=Ar,_t.push(ds))}),Ze.set(ds,Ks)});let Ht=0;return le.forEach(vi=>nr(vi,Ct[Ht++])),_t}function Yo(Ze,ne){const le=new Map;if(Ze.forEach(Ht=>le.set(Ht,[])),0==ne.length)return le;const Ye=new Set(ne),Ct=new Map;function _t(Ht){if(!Ht)return 1;let vi=Ct.get(Ht);if(vi)return vi;const ds=Ht.parentNode;return vi=le.has(ds)?ds:Ye.has(ds)?1:_t(ds),Ct.set(Ht,vi),vi}return ne.forEach(Ht=>{const vi=_t(Ht);1!==vi&&le.get(vi).push(Ht)}),le}function Rn(Ze,ne){Ze.classList?.add(ne)}function Do(Ze,ne){Ze.classList?.remove(ne)}function qo(Ze,ne,le){kt(le).onDone(()=>Ze.processLeaveNode(ne))}function Mr(Ze,ne){for(let le=0;le<Ze.length;le++){const De=Ze[le];De instanceof lt.ZE?Mr(De.players,ne):ne.push(De)}}function ze(Ze,ne,le){const De=le.get(Ze);if(!De)return!1;let Ye=ne.get(Ze);return Ye?De.forEach(Ct=>Ye.add(Ct)):ne.set(Ze,De),le.delete(Ze),!0}class Go{constructor(ne,le,De){this.bodyNode=ne,this._driver=le,this._normalizer=De,this._triggerCache={},this.onRemovalComplete=(Ye,Ct)=>{},this._transitionEngine=new Ji(ne,le,De),this._timelineEngine=new dt(ne,le,De),this._transitionEngine.onRemovalComplete=(Ye,Ct)=>this.onRemovalComplete(Ye,Ct)}registerTrigger(ne,le,De,Ye,Ct){const _t=ne+"-"+Ye;let Ht=this._triggerCache[_t];if(!Ht){const vi=[],Ks=yr(this._driver,Ct,vi,[]);if(vi.length)throw function gs(Ze,ne){return new u.vHH(3404,!1)}();Ht=function S(Ze,ne,le){return new I(Ze,ne,le)}(Ye,Ks,this._normalizer),this._triggerCache[_t]=Ht}this._transitionEngine.registerTrigger(le,Ye,Ht)}register(ne,le){this._transitionEngine.register(ne,le)}destroy(ne,le){this._transitionEngine.destroy(ne,le)}onInsert(ne,le,De,Ye){this._transitionEngine.insertNode(ne,le,De,Ye)}onRemove(ne,le,De,Ye){this._transitionEngine.removeNode(ne,le,Ye||!1,De)}disableAnimations(ne,le){this._transitionEngine.markElementAsDisabled(ne,le)}process(ne,le,De,Ye){if("@"==De.charAt(0)){const[Ct,_t]=ns(De);this._timelineEngine.command(Ct,le,_t,Ye)}else this._transitionEngine.trigger(ne,le,De,Ye)}listen(ne,le,De,Ye,Ct){if("@"==De.charAt(0)){const[_t,Ht]=ns(De);return this._timelineEngine.listen(_t,le,Ht,Ct)}return this._transitionEngine.listen(ne,le,De,Ye,Ct)}flush(ne=-1){this._transitionEngine.flush(ne)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Mn=(()=>{class Ze{constructor(le,De,Ye){this._element=le,this._startStyles=De,this._endStyles=Ye,this._state=0;let Ct=Ze.initialStylesByElement.get(le);Ct||Ze.initialStylesByElement.set(le,Ct=new Map),this._initialStyles=Ct}start(){this._state<1&&(this._startStyles&&ln(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ln(this._element,this._initialStyles),this._endStyles&&(ln(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ze.initialStylesByElement.delete(this._element),this._startStyles&&(qn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qn(this._element,this._endStyles),this._endStyles=null),ln(this._element,this._initialStyles),this._state=3)}}return Ze.initialStylesByElement=new WeakMap,Ze})();function Ge(Ze){let ne=null;return Ze.forEach((le,De)=>{(function p(Ze){return"display"===Ze||"position"===Ze})(De)&&(ne=ne||new Map,ne.set(De,le))}),ne}class w{constructor(ne,le,De,Ye){this.element=ne,this.keyframes=le,this.options=De,this._specialStyles=Ye,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=De.duration,this._delay=De.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ne=>ne()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const ne=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,ne,this.options),this._finalKeyframe=ne.length?ne[ne.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(ne){const le=[];return ne.forEach(De=>{le.push(Object.fromEntries(De))}),le}_triggerWebAnimation(ne,le,De){return ne.animate(this._convertKeyframesToObject(le),De)}onStart(ne){this._originalOnStartFns.push(ne),this._onStartFns.push(ne)}onDone(ne){this._originalOnDoneFns.push(ne),this._onDoneFns.push(ne)}onDestroy(ne){this._onDestroyFns.push(ne)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(ne=>ne()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(ne=>ne()),this._onDestroyFns=[])}setPosition(ne){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=ne*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const ne=new Map;this.hasStarted()&&this._finalKeyframe.forEach((De,Ye)=>{"offset"!==Ye&&ne.set(Ye,this._finished?De:_r(this.element,Ye))}),this.currentSnapshot=ne}triggerCallback(ne){const le="start"===ne?this._onStartFns:this._onDoneFns;le.forEach(De=>De()),le.length=0}}class k{validateStyleProperty(ne){return!0}validateAnimatableStyleProperty(ne){return!0}matchesElement(ne,le){return!1}containsElement(ne,le){return Ls(ne,le)}getParentElement(ne){return on(ne)}query(ne,le,De){return cr(ne,le,De)}computeStyle(ne,le,De){return window.getComputedStyle(ne)[le]}animate(ne,le,De,Ye,Ct,_t=[]){const vi={duration:De,delay:Ye,fill:0==Ye?"both":"forwards"};Ct&&(vi.easing=Ct);const ds=new Map,Ks=_t.filter(or=>or instanceof w);(function Nr(Ze,ne){return 0===Ze||0===ne})(De,Ye)&&Ks.forEach(or=>{or.currentSnapshot.forEach((gn,Un)=>ds.set(Un,gn))});let Qs=function Ln(Ze){return Ze.length?Ze[0]instanceof Map?Ze:Ze.map(ne=>Yn(ne)):[]}(le).map(or=>rs(or));Qs=function Vr(Ze,ne,le){if(le.size&&ne.length){let De=ne[0],Ye=[];if(le.forEach((Ct,_t)=>{De.has(_t)||Ye.push(_t),De.set(_t,Ct)}),Ye.length)for(let Ct=1;Ct<ne.length;Ct++){let _t=ne[Ct];Ye.forEach(Ht=>_t.set(Ht,_r(Ze,Ht)))}}return ne}(ne,Qs,ds);const Wn=function $o(Ze,ne){let le=null,De=null;return Array.isArray(ne)&&ne.length?(le=Ge(ne[0]),ne.length>1&&(De=Ge(ne[ne.length-1]))):ne instanceof Map&&(le=Ge(ne)),le||De?new Mn(Ze,le,De):null}(ne,Qs);return new w(ne,Qs,vi,Wn)}}let N=(()=>{class Ze extends lt._j{constructor(le,De){super(),this._nextAnimationId=0,this._renderer=le.createRenderer(De.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(le){const De=this._nextAnimationId.toString();this._nextAnimationId++;const Ye=Array.isArray(le)?(0,lt.vP)(le):le;return G(this._renderer,null,De,"register",[Ye]),new R(De,this._renderer)}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.LFG(u.FYo),u.LFG(Lt.K0))},Ze.\u0275prov=u.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();class R extends lt.LC{constructor(ne,le){super(),this._id=ne,this._renderer=le}create(ne,le){return new K(this._id,ne,le||{},this._renderer)}}class K{constructor(ne,le,De,Ye){this.id=ne,this.element=le,this._renderer=Ye,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",De)}_listen(ne,le){return this._renderer.listen(this.element,`@@${this.id}:${ne}`,le)}_command(ne,...le){return G(this._renderer,this.element,this.id,ne,le)}onDone(ne){this._listen("done",ne)}onStart(ne){this._listen("start",ne)}onDestroy(ne){this._listen("destroy",ne)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(ne){this._command("setPosition",ne)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function G(Ze,ne,le,De,Ye){return Ze.setProperty(ne,`@@${le}:${De}`,Ye)}const ee="@.disabled";let te=(()=>{class Ze{constructor(le,De,Ye){this.delegate=le,this.engine=De,this._zone=Ye,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),De.onRemovalComplete=(Ct,_t)=>{const Ht=_t?.parentNode(Ct);Ht&&_t.removeChild(Ht,Ct)}}createRenderer(le,De){const Ct=this.delegate.createRenderer(le,De);if(!(le&&De&&De.data&&De.data.animation)){let Ks=this._rendererCache.get(Ct);return Ks||(Ks=new ie("",Ct,this.engine,()=>this._rendererCache.delete(Ct)),this._rendererCache.set(Ct,Ks)),Ks}const _t=De.id,Ht=De.id+"-"+this._currentId;this._currentId++,this.engine.register(Ht,le);const vi=Ks=>{Array.isArray(Ks)?Ks.forEach(vi):this.engine.registerTrigger(_t,Ht,le,Ks.name,Ks)};return De.data.animation.forEach(vi),new xe(this,Ht,Ct,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(le,De,Ye){le>=0&&le<this._microtaskId?this._zone.run(()=>De(Ye)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ct=>{const[_t,Ht]=Ct;_t(Ht)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([De,Ye]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.LFG(u.FYo),u.LFG(Go),u.LFG(u.R0b))},Ze.\u0275prov=u.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();class ie{constructor(ne,le,De,Ye){this.namespaceId=ne,this.delegate=le,this.engine=De,this._onDestroy=Ye,this.destroyNode=this.delegate.destroyNode?Ct=>le.destroyNode(Ct):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(ne,le){return this.delegate.createElement(ne,le)}createComment(ne){return this.delegate.createComment(ne)}createText(ne){return this.delegate.createText(ne)}appendChild(ne,le){this.delegate.appendChild(ne,le),this.engine.onInsert(this.namespaceId,le,ne,!1)}insertBefore(ne,le,De,Ye=!0){this.delegate.insertBefore(ne,le,De),this.engine.onInsert(this.namespaceId,le,ne,Ye)}removeChild(ne,le,De){this.engine.onRemove(this.namespaceId,le,this.delegate,De)}selectRootElement(ne,le){return this.delegate.selectRootElement(ne,le)}parentNode(ne){return this.delegate.parentNode(ne)}nextSibling(ne){return this.delegate.nextSibling(ne)}setAttribute(ne,le,De,Ye){this.delegate.setAttribute(ne,le,De,Ye)}removeAttribute(ne,le,De){this.delegate.removeAttribute(ne,le,De)}addClass(ne,le){this.delegate.addClass(ne,le)}removeClass(ne,le){this.delegate.removeClass(ne,le)}setStyle(ne,le,De,Ye){this.delegate.setStyle(ne,le,De,Ye)}removeStyle(ne,le,De){this.delegate.removeStyle(ne,le,De)}setProperty(ne,le,De){"@"==le.charAt(0)&&le==ee?this.disableAnimations(ne,!!De):this.delegate.setProperty(ne,le,De)}setValue(ne,le){this.delegate.setValue(ne,le)}listen(ne,le,De){return this.delegate.listen(ne,le,De)}disableAnimations(ne,le){this.engine.disableAnimations(ne,le)}}class xe extends ie{constructor(ne,le,De,Ye,Ct){super(le,De,Ye,Ct),this.factory=ne,this.namespaceId=le}setProperty(ne,le,De){"@"==le.charAt(0)?"."==le.charAt(1)&&le==ee?this.disableAnimations(ne,De=void 0===De||!!De):this.engine.process(this.namespaceId,ne,le.slice(1),De):this.delegate.setProperty(ne,le,De)}listen(ne,le,De){if("@"==le.charAt(0)){const Ye=function Ke(Ze){switch(Ze){case"body":return document.body;case"document":return document;case"window":return window;default:return Ze}}(ne);let Ct=le.slice(1),_t="";return"@"!=Ct.charAt(0)&&([Ct,_t]=function ct(Ze){const ne=Ze.indexOf(".");return[Ze.substring(0,ne),Ze.slice(ne+1)]}(Ct)),this.engine.listen(this.namespaceId,Ye,Ct,_t,Ht=>{this.factory.scheduleListenerCallback(Ht._data||-1,De,Ht)})}return this.delegate.listen(ne,le,De)}}const qi=[{provide:lt._j,useClass:N},{provide:pt,useFactory:function si(){return new Gi}},{provide:Go,useClass:(()=>{class Ze extends Go{constructor(le,De,Ye,Ct){super(le.body,De,Ye)}ngOnDestroy(){this.flush()}}return Ze.\u0275fac=function(le){return new(le||Ze)(u.LFG(Lt.K0),u.LFG(je),u.LFG(pt),u.LFG(u.z2F))},Ze.\u0275prov=u.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})()},{provide:u.FYo,useFactory:function Ri(Ze,ne,le){return new te(Ze,ne,le)},deps:[i.se,Go,u.R0b]}],Mi=[{provide:je,useFactory:()=>new k},{provide:u.QbO,useValue:"BrowserAnimations"},...qi],es=[{provide:je,useClass:gi},{provide:u.QbO,useValue:"NoopAnimations"},...qi];let Gs=(()=>{class Ze{static withConfig(le){return{ngModule:Ze,providers:le.disableAnimations?es:Mi}}}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275mod=u.oAB({type:Ze}),Ze.\u0275inj=u.cJS({providers:Mi,imports:[i.b2]}),Ze})(),Pr=(()=>{class Ze{}return Ze.\u0275fac=function(le){return new(le||Ze)},Ze.\u0275mod=u.oAB({type:Ze,bootstrap:[be]}),Ze.\u0275inj=u.cJS({providers:[at.f],imports:[i.b2,Ue.Bz,Lt.ez,Oe.u5,ce,Se.JF,ue.p,_e.w,Gs]}),Ze})();(0,u.G48)(),i.q6().bootstrapModule(Pr).catch(Ze=>console.error(Ze))},5299:(An,hs,rt)=>{rt.d(hs,{r0:()=>_e,hJ:()=>lt,qm:()=>is,cc:()=>zt,ow:()=>Wt});var i=rt(8274),u=rt(7628);function Zt(kt){return function(wt){!function Ue(kt,wt){wt.forEach(function(Ot){Object.getOwnPropertyNames(Ot.prototype).forEach(function(Ai){(!kt.prototype.hasOwnProperty(Ai)||Ot.isFormBase)&&(kt.prototype[Ai]=Ot.prototype[Ai])})})}(wt,kt)}}function $e(kt,wt,Ot){var Ai={};if(kt&&kt.length){for(var bi=0,Ti=kt;bi<Ti.length;bi++){var ns=Ti[bi];!0===Ot?(wt.propCollection[ns]=new i.vpe(!1),wt[ns]=wt.propCollection[ns]):Ai[ns]=new i.vpe(!1)}!0!==Ot&&wt.setProperties(Ai,!0)}}function Li(kt,wt,Ot){var Ai=Object.keys(kt.registeredTemplate);if(Ai.length)for(var bi=wt&&wt.filter(function(cr){return!/\./g.test(cr)}),Ti=0,ns=bi&&bi||Ai;Ti<ns.length;Ti++){var ls=ns[Ti];if(Ot&&Ot.length)for(var ws=0;ws<Ot.length;ws++)for(var Ds=0;Ds<kt.registeredTemplate.template.length;Ds++)kt.registeredTemplate.template[Ds].rootNodes[0]===Ot[ws]&&(Bn=kt.registeredTemplate[ls])[Ds].destroy();else if(kt.registeredTemplate[ls])for(var Kn=0,Dn=kt.registeredTemplate[ls];Kn<Dn.length;Kn++){var Bn;if(!(Bn=Dn[Kn]).destroyed){if(Bn._view){var In=Bn._view.renderer.parentNode(Bn.rootNodes[0]);if(!(0,u.le)(In))for(Ds=0;Ds<Bn.rootNodes.length;Ds++)In.appendChild(Bn.rootNodes[Ds])}Bn.destroy()}}delete kt.registeredTemplate[ls]}for(var js=function(cr){cr.instance&&cr.instance.clearTemplate(wt&&wt.filter(function(Rs){return!!new RegExp(cr.name).test(Rs)}))},Yt=0,Xi=kt.tagObjects;Yt<Xi.length;Yt++)js(Xi[Yt])}function Lt(kt,wt,Ot){for(var Ai=kt.replace(/\[/g,".").replace(/\]/g,"").split("."),bi=Ot||{},Ti=0;Ti<Ai.length;Ti++){var ns=Ai[Ti];Ti+1===Ai.length?bi[ns]=void 0===wt?{}:wt:void 0===bi[ns]&&(bi[ns]={}),bi=bi[ns]}return bi}var ut=/Ref$/,Si=function(){function kt(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return kt.prototype.ngOnInit=function(){this.registeredTemplate={};for(var wt=0,Ot=this.tags;wt<Ot.length;wt++){var Ai=Ot[wt],bi=(0,u.NA)("child"+Ai.substring(0,1).toUpperCase()+Ai.substring(1),this);bi&&this.tagObjects.push({instance:bi,name:Ai})}for(var Ti=Object.keys(this),ns=0;ns<Ti.length;ns++){var ls=(0,u.NA)(Ti[ns],this);"object"==typeof ls&&ls&&ls.elementRef&&((0,u.NA)(-1!==Ti[ns].indexOf("Ref")?Ti[ns]:Ti[ns]+"Ref",this)||(0,u.sO)(-1!==Ti[ns].indexOf("Ref")?Ti[ns]:Ti[ns]+"Ref",ls,this),(0,u.NA)("viewContainerRef",this)&&!(0,u.NA)("_viewContainerRef",ls.elementRef.nativeElement)&&!(0,u.NA)("propName",ls.elementRef.nativeElement)&&((0,u.sO)("_viewContainerRef",(0,u.NA)("viewContainerRef",this),ls.elementRef.nativeElement),(0,u.sO)("propName",Ti[ns].replace("Ref",""),ls.elementRef.nativeElement)))}for(var ws=0,Ds=Ti=(Ti=Object.keys(this)).filter(function(js){return/Ref$/i.test(js)});ws<Ds.length;ws++){var Bn=Ds[ws].replace("Ref","");(0,u.sO)(Bn.replace("_","."),(0,u.NA)(Bn,this),this.propCollection)}var Kn=Object.keys(this);if(this.directivePropList){for(var Dn=0;Dn<this.directivePropList.length;Dn++){var In=this.directivePropList[Dn];-1!==Kn.indexOf(In)&&(0,u.NA)(In,this)&&(0,u.sO)(In,(0,u.NA)(In,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},kt.prototype.registerEvents=function(wt){$e(wt,this,!0)},kt.prototype.ngOnChanges=function(wt){for(var Ot=0,Ai=Object.keys(wt);Ot<Ai.length;Ot++){var bi=Ai[Ot];this.propCollection[bi]=wt[bi].currentValue}this.isUpdated=!1,this.hasChanges=!0},kt.prototype.clearTemplate=function(wt){Li(this,wt)},kt.prototype.getProperties=function(){for(var wt=0,Ot=this.tagObjects;wt<Ot.length;wt++){var Ai=Ot[wt];this.propCollection[Ai.name]=Ai.instance.getProperties()}return this.propCollection},kt.prototype.isChanged=function(){var wt=this.hasChanges;if(!(0,u.le)(this.propCollection[this.property]))for(var Ai=Object.keys(this.propCollection[this.property][0]),bi=0;bi<Ai.length;bi++)if(!(0,u.le)(this.propCollection[Ai[bi]])){var Ti=(0,u.NA)(Ai[bi],this),ns=this.propCollection[this.property][0][Ai[bi]];!(0,u.le)(Ti)&&this.propCollection[Ai[bi]]!==Ti&&ns!==Ti&&((0,u.sO)(Ai[bi],Ti,this.propCollection[this.property][0]),(0,u.sO)(Ai[bi],Ti,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var ls=0,ws=this.tagObjects;ls<ws.length;ls++)wt=wt||ws[ls].instance.hasChanges;return wt||this.hasChanges},kt.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var wt=Object.keys(this),Ot=0,Ai=wt=wt.filter(function(ns){return ut.test(ns)});Ot<Ai.length;Ot++){var Ti=Ai[Ot].replace("Ref","");(0,u.sO)(Ti.replace("_","."),(0,u.NA)(Ti,this),this.propCollection)}},kt.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},kt.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},kt.prototype.ngOnDestroy=function(){this.directivePropList=[]},kt}(),We=function(){function kt(wt){this.list=[],this.hasChanges=!1,this.propertyName=wt}return kt.prototype.ngOnInit=function(){this.isInitChanges=!0},kt.prototype.ngAfterContentInit=function(){var wt=this,Ot=0;this.list=this.children.map(function(Ai){return Ai.dirIndex=Ot++,Ai.property=wt.propertyName,Ai}),this.hasChanges=!0},kt.prototype.getProperties=function(){for(var wt=[],Ot=0,Ai=this.list;Ot<Ai.length;Ot++)wt.push(Ai[Ot].getProperties());return wt},kt.prototype.isChanged=function(){var wt=this,Ot=!1,Ai=0,bi=!1,Ti=this.children.map(function(on){return on});if(this.list.length===this.children.length)for(var ns=0;ns<this.list.length;ns++)this.list[ns].propCollection.dataSource&&this.list[ns].dataSource&&this.list[ns].propCollection.dataSource!==this.list[ns].dataSource&&(this.list[ns].propCollection.dataSource=this.list[ns].dataSource,this.list[ns].hasChanges=!0),this.list[ns].hasChanges!==Ti[ns].hasChanges&&(bi=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!bi)||null,this.hasNewChildren&&(this.list=this.children.map(function(on){return on.dirIndex=Ai++,on.property=wt.propertyName,on}));for(var ls=0,ws=this.list;ls<ws.length;ls++)Ot=Ot||ws[ls].hasChanges;return!!this.list.length&&Ot},kt.prototype.clearTemplate=function(wt){for(var Ot=this,Ai=0,bi=this.list;Ai<bi.length;Ai++)bi[Ai].clearTemplate(wt&&wt.map(function(ns){return new RegExp(Ot.propertyName).test(ns)?ns.replace(Ot.propertyName+".",""):ns}))},kt.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var wt=0;wt<this.list.length;wt++)(0,u.NA)("childColumns",this.list[wt])&&"columns"===(0,u.NA)("property",this.list[wt])&&(0,u.sO)("columns",(0,u.NA)("childColumns",this.list[wt]).getProperties(),this.list[wt].propCollection),this.list[wt].isUpdated=!0},kt.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},kt.prototype.ngOnDestroy=function(){this.list=[]},kt}(),E=function(){function kt(){this.isProtectedOnChange=!0,this.isFormInit=!0}return kt.prototype.saveChanges=function(wt,Ot,Ai){if(!this.isProtectedOnChange){this.oldProperties[wt]=Ai,this.changedProperties[wt]=Ot,this.finalUpdate();var bi=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(bi)}}},kt.prototype.ngOnInit=function(wt){var Ot=wt||this;Ot.registeredTemplate={},Ot.ngBoundedEvents={},Ot.isAngular=!0,Ot.isFormInit=!0,wt&&(this.tags=wt.tags),Ot.tags=this.tags||[],Ot.complexTemplate=this.complexTemplate||[],Ot.tagObjects=[],Ot.ngAttr=this.getAngularAttr(Ot.element),Ot.createElement=function(js,Yt){var Xi=Ot.srenderer?Ot.srenderer.createElement(js):(0,u.az)(js);return typeof Yt>"u"||(Xi.innerHTML=Yt.innerHTML?Yt.innerHTML:"",void 0!==Yt.className&&(Xi.className=Yt.className),void 0!==Yt.id&&(Xi.id=Yt.id),void 0!==Yt.styles&&Xi.setAttribute("style",Yt.styles),void 0!==Ot.ngAttr&&Xi.setAttribute(Ot.ngAttr,""),void 0!==Yt.attrs&&(0,u.Y4)(Xi,Yt.attrs)),Xi};for(var Ai=0,bi=Ot.tags;Ai<bi.length;Ai++){var Ti=bi[Ai],ns={instance:(0,u.NA)("child"+Ti.substring(0,1).toUpperCase()+Ti.substring(1),Ot),name:Ti};Ot.tagObjects.push(ns)}for(var ls=Object.keys(Ot),ws=0;ws<ls.length;ws++){var Ds=(0,u.NA)(ls[ws],Ot);"object"==typeof Ds&&Ds&&Ds.elementRef&&("object"==typeof Ds&&Ds&&Ds.elementRef&&-1!==ls[ws].indexOf("_")&&-1===ls[ws].indexOf("Ref")&&(0,u.sO)(ls[ws]+"Ref",Ds,Ot),Ot.viewContainerRef&&!(0,u.NA)("_viewContainerRef",Ds.elementRef.nativeElement)&&!(0,u.NA)("propName",Ds.elementRef.nativeElement)&&((0,u.sO)("_viewContainerRef",Ot.viewContainerRef,Ds.elementRef.nativeElement),(0,u.sO)("propName",ls[ws].replace("Ref",""),Ds.elementRef.nativeElement)))}for(var on=0,Bn=ls=(ls=Object.keys(Ot)).filter(function(js){return/Ref$/i.test(js)&&/\_/i.test(js)});on<Bn.length;on++){var Dn=Bn[on].replace("Ref",""),In={};(0,u.sO)(Dn.replace("_","."),(0,u.NA)(Dn,Ot),In),Ot.setProperties(In,!0)}},kt.prototype.getAngularAttr=function(wt){for(var bi,Ot=wt.attributes,Ai=Ot.length,Ti=0;Ti<Ai;Ti++)/_ngcontent/g.test(Ot[Ti].name)&&(bi=Ot[Ti].name);return bi},kt.prototype.ngAfterViewInit=function(wt){var Ot=wt||this;/ejs-tab|ejs-accordion/g.test(Ot.ngEle.nativeElement.outerHTML)&&(Ot.ngEle.nativeElement.style.visibility="hidden");for(var bi=Object.keys(Ot),Ti=0,ns=bi=bi.filter(function(Ds){return/Ref$/i.test(Ds)});Ti<ns.length;Ti++){var ws=ns[Ti].replace("Ref","");(0,u.sO)(ws.replace("_","."),(0,u.NA)(ws+"Ref",Ot),Ot)}setTimeout(function(){(typeof window<"u"&&Ot.element||Ot.getModuleName().includes("btn"))&&(Ot.appendTo(Ot.element),Ot.ngEle.nativeElement.style.visibility="")})},kt.prototype.ngOnDestroy=function(wt){var Ot=wt||this;setTimeout(function(){typeof window<"u"&&Ot.element.classList.contains("e-control")&&(Ot.destroy(),Ot.clearTemplate(null),Ot.ngBoundedEvents={},Ot.tagObjects={},Ot.ngEle=null)})},kt.prototype.clearTemplate=function(wt,Ot){Li(this,wt,Ot)},kt.prototype.ngAfterContentChecked=function(wt){for(var Ot=wt||this,Ai=0,bi=Ot.tagObjects;Ai<bi.length;Ai++){var Ti=bi[Ai];if(!(0,u.o8)(Ti.instance)&&(Ti.instance.isInitChanges||Ti.instance.hasChanges||Ti.instance.hasNewChildren))if(Ti.instance.isInitChanges){var ns={},ls=void 0;(ws=(0,u.NA)("instance.list",Ti))&&ws.length&&(ls=ws[0].directivePropList);var Ds=!0;if(Ot.getModuleName&&"gantt"===Ot.getModuleName()&&(Ds=!1),ls&&Ds&&-1===ls.indexOf(Ti.instance.propertyName))for(var on=Object.keys(Ti.instance.list[0].propCollection),Bn=0;Bn<Ti.instance.list.length;Bn++){Ti.instance.list[Bn].propCollection[Ti.instance.propertyName]=[];for(var Kn={},Dn=0;Dn<on.length;Dn++)Kn[In=on[Dn]]=Ti.instance.list[Bn].propCollection[In];for(var js=0;js<Ti.instance.list[Bn].tags.length;js++){var Yt=Ti.instance.list[Bn].tags[js],Xi=(0,u.NA)("child"+Yt.substring(0,1).toUpperCase()+Yt.substring(1),Ti.instance.list[Bn]);if(Xi){var Ls=Ti.instance.list[Bn]["child"+Yt.substring(0,1).toUpperCase()+Yt.substring(1)];if(Ls)for(var cr=0;cr<Ls.list.length;cr++){var Rs=Ls.list[0].tags[0];if(Rs){var gi=(0,u.NA)("child"+Rs.substring(0,1).toUpperCase()+Rs.substring(1),Ls.list[cr]);gi&&Ls.list[cr].tagObjects.push({instance:gi,name:Rs})}}Ti.instance.list[Bn].tagObjects.push({instance:Xi,name:Yt})}}Ti.instance.list[Bn].propCollection[Ti.instance.propertyName].push(Kn)}ns[Ti.name]=Ti.instance.getProperties(),Ot.setProperties(ns,Ti.instance.isInitChanges)}else{(Ot[Ti.name].length!==Ti.instance.list.length||/diagram|tab/.test(Ot.getModuleName()))&&(Ot[Ti.name]=Ti.instance.list);for(var je=0,Re=Ti.instance.list;je<Re.length;je++){var ws,tt=Ti.instance.list.indexOf(ws=Re[je]),ti=(0,u.NA)(Ti.name,Ot)[tt],ci=Object.keys(ti);if(ci=ci.filter(function(Es){return/Ref$/i.test(Es)}),ti.properties&&0!==Object.keys(ti.properties).length)for(var pi=0,Fi=ci;pi<Fi.length;pi++){var In;In=(In=Fi[pi]).replace(/Ref/,""),ti.properties[In]=ti.properties[In]?ti.properties[In]:ti.propCollection[In]}!(0,u.o8)(ti)&&!(0,u.o8)(ti.setProperties)&&(/diagram|DashboardLayout/.test(Ot.getModuleName())?ti.setProperties(ws.getProperties(),!0):ti.setProperties(ws.getProperties())),ws.isUpdated=!0}}}},kt.prototype.registerEvents=function(wt){$e(wt,this)},kt.prototype.twoWaySetter=function(wt,Ot){var Ai=(0,u.NA)(Ot,this.properties);Ai!==wt&&(this.saveChanges(Ot,wt,Ai),(0,u.sO)(Ot,(0,u.le)(wt)?null:wt,this.properties),(0,u.NA)(Ot+"Change",this).emit(wt))},kt.prototype.addTwoWay=function(wt){for(var Ot=this,Ai=function(ws){(0,u.NA)(ws,bi),Object.defineProperty(bi,ws,{get:function(){return(0,u.NA)(ws,Ot.properties)},set:function(Ds){return Ot.twoWaySetter(Ds,ws)}}),(0,u.sO)(ws+"Change",new i.vpe,bi)},bi=this,Ti=0,ns=wt;Ti<ns.length;Ti++)Ai(ns[Ti])},kt.prototype.addEventListener=function(wt,Ot){var Ai=(0,u.NA)(wt,this);(0,u.o8)(Ai)||(this.ngBoundedEvents[wt]||(this.ngBoundedEvents[wt]=new Map),this.ngBoundedEvents[wt].set(Ot,Ai.subscribe(Ot)))},kt.prototype.removeEventListener=function(wt,Ot){var Ai=(0,u.NA)(wt,this);(0,u.o8)(Ai)||this.ngBoundedEvents[wt].get(Ot).unsubscribe()},kt.prototype.trigger=function(wt,Ot,Ai){var bi=(0,u.NA)(wt,this),Ti=this.isProtectedOnChange;this.isProtectedOnChange=!1,Ot&&(Ot.name=wt),(0,u.o8)(bi)||bi.next(Ot);var ns=(0,u.NA)("local"+wt.charAt(0).toUpperCase()+wt.slice(1),this);(0,u.o8)(ns)||ns.call(this,Ot),this.isProtectedOnChange=Ti,Ai&&(this.preventChange=this.isPreventChange,Ai.call(this,Ot)),this.isPreventChange=!1},kt}(),at=function(){function kt(){}return kt.prototype.propagateChange=function(wt){},kt.prototype.propagateTouch=function(){},kt.prototype.localChange=function(wt){var Ot=void 0===wt.checked?wt.value:wt.checked;this.objCheck=(0,u.Kn)(Ot),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(Ot),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==Ot&&(this.propagateChange(Ot),this.angularValue=Ot)):Ot!==this.angularValue&&void 0!==this.propagateChange&&void 0!==Ot&&(this.propagateChange(Ot),this.angularValue=Ot)},kt.prototype.registerOnChange=function(wt){this.propagateChange=wt},kt.prototype.registerOnTouched=function(wt){this.propagateTouch=wt},kt.prototype.twoWaySetter=function(wt,Ot){var Ai=this.oldValue||(0,u.NA)(Ot,this.properties),bi=this.inputElement||this.element;bi&&Ai===wt&&this.value===wt&&(void 0===bi.value||""===bi.value)||(this.saveChanges(Ot,wt,Ai),(0,u.sO)(Ot,(0,u.le)(wt)?null:wt,this.properties),(0,u.NA)(Ot+"Change",this).emit(wt))},kt.prototype.ngAfterViewInit=function(wt){var Ot=wt||this;if(typeof window<"u"){Ot.appendTo(Ot.element);var Ai=Ot.inputElement||Ot.element;Ai.addEventListener("focus",Ot.ngOnFocus.bind(Ot)),Ai.addEventListener("blur",Ot.ngOnBlur.bind(Ot))}this.isFormInit=!1},kt.prototype.setDisabledState=function(wt){this.enabled=!wt,this.disabled=wt},kt.prototype.writeValue=function(wt){void 0===this.checked?this.value=wt:this.ngEle&&(this.checked="boolean"==typeof wt?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?wt===this.value:wt:wt===this.value),this.angularValue=wt,this.isUpdated=!0,this.preventChange=!this.isFormInit},kt.prototype.ngOnFocus=function(wt){!0!==this.skipFromEvent&&this.focus.emit(wt)},kt.prototype.ngOnBlur=function(wt){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(wt)},kt.isFormBase=!0,kt}(),Oe=(0,u.aR)();(0,u.Wr)({compile:function ft(kt,wt){if("string"==typeof kt)return Oe(kt,wt);var Ot=kt.elementRef.nativeElement._viewContainerRef,Ai=kt.elementRef.nativeElement.propName;return function(bi,Ti,ns){var ws=Ot||Ti.viewContainerRef,Ds=ws.createEmbeddedView(kt,{$implicit:bi});Ds.markForCheck();var on=Ti&&Ti.registeredTemplate?Ti.registeredTemplate:(0,u.NA)("currentInstance.registeredTemplate",ws);return typeof on[ns=ns&&Ti.registeredTemplate?ns:Ai]>"u"&&(on[ns]=[]),on[ns].push(Ds),Ds.rootNodes}}});var bt=rt(2162),Rt=rt(6895),z=rt(4006);const J=["ejs-button",""],ve=["*"];var ce=function(kt,wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(kt,wt)};const Se=["created"],ue=[];let _e=(()=>{let kt=class extends bt.zx{constructor(Ot,Ai,bi,Ti){super(),this.ngEle=Ot,this.srenderer=Ai,this.viewContainerRef=bi,this.injector=Ti,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Se),this.addTwoWay.call(this,ue),Lt("currentInstance",this,this.viewContainerRef),this.containerContext=new E}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};return kt.\u0275fac=function(Ot){return new(Ot||kt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},kt.\u0275cmp=i.Xpm({type:kt,selectors:[["","ejs-button",""]],inputs:{content:"content",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",iconCss:"iconCss",iconPosition:"iconPosition",isPrimary:"isPrimary",isToggle:"isToggle",locale:"locale"},outputs:{created:"created"},features:[i.qOj],attrs:J,ngContentSelectors:ve,decls:1,vars:0,template:function(Ot,Ai){1&Ot&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),kt=function(kt,wt,Ot,Ai){var ns,bi=arguments.length,Ti=bi<3?wt:null===Ai?Ai=Object.getOwnPropertyDescriptor(wt,Ot):Ai;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ti=Reflect.decorate(kt,wt,Ot,Ai);else for(var ls=kt.length-1;ls>=0;ls--)(ns=kt[ls])&&(Ti=(bi<3?ns(Ti):bi>3?ns(wt,Ot,Ti):ns(wt,Ot))||Ti);return bi>3&&Ti&&Object.defineProperty(wt,Ot,Ti),Ti}([Zt([E]),ce("design:paramtypes",[i.SBq,i.Qsj,i.s_b,i.zs3])],kt),kt})(),lt=(()=>{class kt{}return kt.\u0275fac=function(Ot){return new(Ot||kt)},kt.\u0275mod=i.oAB({type:kt}),kt.\u0275inj=i.cJS({imports:[Rt.ez]}),kt})();const Fe=["focus","blur","change","created","checkedChange","indeterminateChange"],xt=["checked","indeterminate"];let $t=ji=class extends bt.Jg{constructor(wt,Ot,Ai,bi){super(),this.ngEle=wt,this.srenderer=Ot,this.viewContainerRef=Ai,this.injector=bi,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Fe),this.addTwoWay.call(this,xt),Lt("currentInstance",this,this.viewContainerRef),this.formContext=new at,this.formCompContext=new E}registerOnChange(wt){}registerOnTouched(wt){}writeValue(wt){}setDisabledState(wt){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var ji;$t.\u0275fac=function(wt){return new(wt||$t)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},$t.\u0275cmp=i.Xpm({type:$t,selectors:[["ejs-checkbox"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",indeterminate:"indeterminate",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange",indeterminateChange:"indeterminateChange"},features:[i._Bn([{provide:z.JU,useExisting:(0,i.Gpc)(()=>ji),multi:!0}]),i.qOj],decls:0,vars:0,template:function(wt,Ot){},encapsulation:2,changeDetection:0}),$t.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],$t=ji=function(kt,wt,Ot,Ai){var ns,bi=arguments.length,Ti=bi<3?wt:null===Ai?Ai=Object.getOwnPropertyDescriptor(wt,Ot):Ai;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ti=Reflect.decorate(kt,wt,Ot,Ai);else for(var ls=kt.length-1;ls>=0;ls--)(ns=kt[ls])&&(Ti=(bi<3?ns(Ti):bi>3?ns(wt,Ot,Ti):ns(wt,Ot))||Ti);return bi>3&&Ti&&Object.defineProperty(wt,Ot,Ti),Ti}([Zt([E,at]),function(kt,wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",wt)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],$t);let is=(()=>{class kt{}return kt.\u0275fac=function(Ot){return new(Ot||kt)},kt.\u0275mod=i.oAB({type:kt}),kt.\u0275inj=i.cJS({imports:[Rt.ez]}),kt})();const us=["focus","blur","change","created","valueChange"],Us=["value"];let $i=et=class extends bt.EU{constructor(wt,Ot,Ai,bi){super(),this.ngEle=wt,this.srenderer=Ot,this.viewContainerRef=Ai,this.injector=bi,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(us),this.addTwoWay.call(this,Us),Lt("currentInstance",this,this.viewContainerRef),this.formContext=new at,this.formCompContext=new E}registerOnChange(wt){}registerOnTouched(wt){}writeValue(wt){}setDisabledState(wt){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var et;$i.\u0275fac=function(wt){return new(wt||$i)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},$i.\u0275cmp=i.Xpm({type:$i,selectors:[["ejs-radiobutton"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",valueChange:"valueChange"},features:[i._Bn([{provide:z.JU,useExisting:(0,i.Gpc)(()=>et),multi:!0}]),i.qOj],decls:0,vars:0,template:function(wt,Ot){},encapsulation:2,changeDetection:0}),$i.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],$i=et=function(kt,wt,Ot,Ai){var ns,bi=arguments.length,Ti=bi<3?wt:null===Ai?Ai=Object.getOwnPropertyDescriptor(wt,Ot):Ai;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ti=Reflect.decorate(kt,wt,Ot,Ai);else for(var ls=kt.length-1;ls>=0;ls--)(ns=kt[ls])&&(Ti=(bi<3?ns(Ti):bi>3?ns(wt,Ot,Ti):ns(wt,Ot))||Ti);return bi>3&&Ti&&Object.defineProperty(wt,Ot,Ti),Ti}([Zt([E,at]),function(kt,wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",wt)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],$i);let zt=(()=>{class kt{}return kt.\u0275fac=function(Ot){return new(Ot||kt)},kt.\u0275mod=i.oAB({type:kt}),kt.\u0275inj=i.cJS({imports:[Rt.ez]}),kt})();const qt=["focus","blur","change","created","checkedChange"],Ci=["checked"];let gs=Jt=class extends bt.rs{constructor(wt,Ot,Ai,bi){super(),this.ngEle=wt,this.srenderer=Ot,this.viewContainerRef=Ai,this.injector=bi,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(qt),this.addTwoWay.call(this,Ci),Lt("currentInstance",this,this.viewContainerRef),this.formContext=new at,this.formCompContext=new E}registerOnChange(wt){}registerOnTouched(wt){}writeValue(wt){}setDisabledState(wt){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Jt;gs.\u0275fac=function(wt){return new(wt||gs)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},gs.\u0275cmp=i.Xpm({type:gs,selectors:[["ejs-switch"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",locale:"locale",name:"name",offLabel:"offLabel",onLabel:"onLabel",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange"},features:[i._Bn([{provide:z.JU,useExisting:(0,i.Gpc)(()=>Jt),multi:!0}]),i.qOj],decls:0,vars:0,template:function(wt,Ot){},encapsulation:2,changeDetection:0}),gs.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],gs=Jt=function(kt,wt,Ot,Ai){var ns,bi=arguments.length,Ti=bi<3?wt:null===Ai?Ai=Object.getOwnPropertyDescriptor(wt,Ot):Ai;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ti=Reflect.decorate(kt,wt,Ot,Ai);else for(var ls=kt.length-1;ls>=0;ls--)(ns=kt[ls])&&(Ti=(bi<3?ns(Ti):bi>3?ns(wt,Ot,Ti):ns(wt,Ot))||Ti);return bi>3&&Ti&&Object.defineProperty(wt,Ot,Ti),Ti}([Zt([E,at]),function(kt,wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",wt)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],gs);let Wt=(()=>{class kt{}return kt.\u0275fac=function(Ot){return new(Ot||kt)},kt.\u0275mod=i.oAB({type:kt}),kt.\u0275inj=i.cJS({imports:[Rt.ez]}),kt})(),li=["avatarIconCss","avatarText","cssClass","enabled","leadingIconCss","leadingIconUrl","text","trailingIconCss","trailingIconUrl","value"],Oi=[],Gt=(()=>{class kt extends Si{constructor(Ot){super(),this.viewContainerRef=Ot,Lt("currentInstance",this,this.viewContainerRef),this.registerEvents(Oi),this.directivePropList=li}}return kt.\u0275fac=function(Ot){return new(Ot||kt)(i.Y36(i.s_b))},kt.\u0275dir=i.lG2({type:kt,selectors:[["e-chip"]],inputs:{avatarIconCss:"avatarIconCss",avatarText:"avatarText",cssClass:"cssClass",enabled:"enabled",leadingIconCss:"leadingIconCss",leadingIconUrl:"leadingIconUrl",text:"text",trailingIconCss:"trailingIconCss",trailingIconUrl:"trailingIconUrl",value:"value"},features:[i.qOj]}),kt})(),Dt=(()=>{class kt extends We{constructor(){super("chips")}}return kt.\u0275fac=function(Ot){return new(Ot||kt)},kt.\u0275dir=i.lG2({type:kt,selectors:[["e-chips"]],contentQueries:function(Ot,Ai,bi){if(1&Ot&&i.Suo(bi,Gt,4),2&Ot){let Ti;i.iGM(Ti=i.CRH())&&(Ai.children=Ti)}},features:[i.qOj]}),kt})();const hi=["beforeClick","click","created","delete","deleted"],Ei=[""];let Ui=(()=>{let kt=class extends bt.jg{constructor(Ot,Ai,bi,Ti){super(),this.ngEle=Ot,this.srenderer=Ai,this.viewContainerRef=bi,this.injector=Ti,this.tags=["chips"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(hi),this.addTwoWay.call(this,Ei),Lt("currentInstance",this,this.viewContainerRef),this.context=new E}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childChips,this.context.ngAfterContentChecked(this)}};return kt.\u0275fac=function(Ot){return new(Ot||kt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},kt.\u0275cmp=i.Xpm({type:kt,selectors:[["ejs-chiplist"]],contentQueries:function(Ot,Ai,bi){if(1&Ot&&i.Suo(bi,Dt,5),2&Ot){let Ti;i.iGM(Ti=i.CRH())&&(Ai.childChips=Ti.first)}},inputs:{avatarIconCss:"avatarIconCss",avatarText:"avatarText",chips:"chips",cssClass:"cssClass",enableDelete:"enableDelete",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",leadingIconCss:"leadingIconCss",leadingIconUrl:"leadingIconUrl",locale:"locale",selectedChips:"selectedChips",selection:"selection",text:"text",trailingIconCss:"trailingIconCss",trailingIconUrl:"trailingIconUrl"},outputs:{beforeClick:"beforeClick",click:"click",created:"created",delete:"delete",deleted:"deleted"},features:[i.qOj],decls:0,vars:0,template:function(Ot,Ai){},encapsulation:2,changeDetection:0}),kt})();Ui=function(kt,wt,Ot,Ai){var ns,bi=arguments.length,Ti=bi<3?wt:null===Ai?Ai=Object.getOwnPropertyDescriptor(wt,Ot):Ai;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ti=Reflect.decorate(kt,wt,Ot,Ai);else for(var ls=kt.length-1;ls>=0;ls--)(ns=kt[ls])&&(Ti=(bi<3?ns(Ti):bi>3?ns(wt,Ot,Ti):ns(wt,Ot))||Ti);return bi>3&&Ti&&Object.defineProperty(wt,Ot,Ti),Ti}([Zt([E]),function(kt,wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",wt)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],Ui)},4954:(An,hs,rt)=>{rt.d(hs,{fMR:()=>qu,NQQ:()=>rm,iKq:()=>Qc,SRY:()=>$f,LkR:()=>C0,sa3:()=>b0,U05:()=>dm,iZF:()=>lm,MwP:()=>Cc,zE6:()=>Kf,lTR:()=>m0,PhL:()=>am,mO3:()=>ou,_qr:()=>cm,KxS:()=>g0,Okq:()=>hm});var i=rt(8274),u=rt(7628);function Zt(b){return function(e){!function Ue(b,e){e.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(s){(!b.prototype.hasOwnProperty(s)||t.isFormBase)&&(b.prototype[s]=t.prototype[s])})})}(e,b)}}function $e(b,e,t){var s={};if(b&&b.length){for(var n=0,r=b;n<r.length;n++){var h=r[n];!0===t?(e.propCollection[h]=new i.vpe(!1),e[h]=e.propCollection[h]):s[h]=new i.vpe(!1)}!0!==t&&e.setProperties(s,!0)}}function Li(b,e,t){var s=Object.keys(b.registeredTemplate);if(s.length)for(var n=e&&e.filter(function(ki){return!/\./g.test(ki)}),r=0,h=n&&n||s;r<h.length;r++){var m=h[r];if(t&&t.length)for(var T=0;T<t.length;T++)for(var V=0;V<b.registeredTemplate.template.length;V++)b.registeredTemplate.template[V].rootNodes[0]===t[T]&&(se=b.registeredTemplate[m])[V].destroy();else if(b.registeredTemplate[m])for(var ge=0,ke=b.registeredTemplate[m];ge<ke.length;ge++){var se;if(!(se=ke[ge]).destroyed){if(se._view){var qe=se._view.renderer.parentNode(se.rootNodes[0]);if(!(0,u.le)(qe))for(V=0;V<se.rootNodes.length;V++)qe.appendChild(se.rootNodes[V])}se.destroy()}}delete b.registeredTemplate[m]}for(var mt=function(ki){ki.instance&&ki.instance.clearTemplate(e&&e.filter(function(Qi){return!!new RegExp(ki.name).test(Qi)}))},Vt=0,Qt=b.tagObjects;Vt<Qt.length;Vt++)mt(Qt[Vt])}function Lt(b,e,t){for(var s=b.replace(/\[/g,".").replace(/\]/g,"").split("."),n=t||{},r=0;r<s.length;r++){var h=s[r];r+1===s.length?n[h]=void 0===e?{}:e:void 0===n[h]&&(n[h]={}),n=n[h]}return n}var ut=/Ref$/,Si=function(){function b(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return b.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var s=t[e],n=(0,u.NA)("child"+s.substring(0,1).toUpperCase()+s.substring(1),this);n&&this.tagObjects.push({instance:n,name:s})}for(var r=Object.keys(this),h=0;h<r.length;h++){var m=(0,u.NA)(r[h],this);"object"==typeof m&&m&&m.elementRef&&((0,u.NA)(-1!==r[h].indexOf("Ref")?r[h]:r[h]+"Ref",this)||(0,u.sO)(-1!==r[h].indexOf("Ref")?r[h]:r[h]+"Ref",m,this),(0,u.NA)("viewContainerRef",this)&&!(0,u.NA)("_viewContainerRef",m.elementRef.nativeElement)&&!(0,u.NA)("propName",m.elementRef.nativeElement)&&((0,u.sO)("_viewContainerRef",(0,u.NA)("viewContainerRef",this),m.elementRef.nativeElement),(0,u.sO)("propName",r[h].replace("Ref",""),m.elementRef.nativeElement)))}for(var T=0,V=r=(r=Object.keys(this)).filter(function(mt){return/Ref$/i.test(mt)});T<V.length;T++){var se=V[T].replace("Ref","");(0,u.sO)(se.replace("_","."),(0,u.NA)(se,this),this.propCollection)}var ge=Object.keys(this);if(this.directivePropList){for(var ke=0;ke<this.directivePropList.length;ke++){var qe=this.directivePropList[ke];-1!==ge.indexOf(qe)&&(0,u.NA)(qe,this)&&(0,u.sO)(qe,(0,u.NA)(qe,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},b.prototype.registerEvents=function(e){$e(e,this,!0)},b.prototype.ngOnChanges=function(e){for(var t=0,s=Object.keys(e);t<s.length;t++){var n=s[t];this.propCollection[n]=e[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},b.prototype.clearTemplate=function(e){Li(this,e)},b.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var s=t[e];this.propCollection[s.name]=s.instance.getProperties()}return this.propCollection},b.prototype.isChanged=function(){var e=this.hasChanges;if(!(0,u.le)(this.propCollection[this.property]))for(var s=Object.keys(this.propCollection[this.property][0]),n=0;n<s.length;n++)if(!(0,u.le)(this.propCollection[s[n]])){var r=(0,u.NA)(s[n],this),h=this.propCollection[this.property][0][s[n]];!(0,u.le)(r)&&this.propCollection[s[n]]!==r&&h!==r&&((0,u.sO)(s[n],r,this.propCollection[this.property][0]),(0,u.sO)(s[n],r,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var m=0,T=this.tagObjects;m<T.length;m++)e=e||T[m].instance.hasChanges;return e||this.hasChanges},b.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var e=Object.keys(this),t=0,s=e=e.filter(function(h){return ut.test(h)});t<s.length;t++){var r=s[t].replace("Ref","");(0,u.sO)(r.replace("_","."),(0,u.NA)(r,this),this.propCollection)}},b.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},b.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},b.prototype.ngOnDestroy=function(){this.directivePropList=[]},b}(),We=function(){function b(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return b.prototype.ngOnInit=function(){this.isInitChanges=!0},b.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(s){return s.dirIndex=t++,s.property=e.propertyName,s}),this.hasChanges=!0},b.prototype.getProperties=function(){for(var e=[],t=0,s=this.list;t<s.length;t++)e.push(s[t].getProperties());return e},b.prototype.isChanged=function(){var e=this,t=!1,s=0,n=!1,r=this.children.map(function(Y){return Y});if(this.list.length===this.children.length)for(var h=0;h<this.list.length;h++)this.list[h].propCollection.dataSource&&this.list[h].dataSource&&this.list[h].propCollection.dataSource!==this.list[h].dataSource&&(this.list[h].propCollection.dataSource=this.list[h].dataSource,this.list[h].hasChanges=!0),this.list[h].hasChanges!==r[h].hasChanges&&(n=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map(function(Y){return Y.dirIndex=s++,Y.property=e.propertyName,Y}));for(var m=0,T=this.list;m<T.length;m++)t=t||T[m].hasChanges;return!!this.list.length&&t},b.prototype.clearTemplate=function(e){for(var t=this,s=0,n=this.list;s<n.length;s++)n[s].clearTemplate(e&&e.map(function(h){return new RegExp(t.propertyName).test(h)?h.replace(t.propertyName+".",""):h}))},b.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)(0,u.NA)("childColumns",this.list[e])&&"columns"===(0,u.NA)("property",this.list[e])&&(0,u.sO)("columns",(0,u.NA)("childColumns",this.list[e]).getProperties(),this.list[e].propCollection),this.list[e].isUpdated=!0},b.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},b.prototype.ngOnDestroy=function(){this.list=[]},b}(),E=function(){function b(){this.isProtectedOnChange=!0,this.isFormInit=!0}return b.prototype.saveChanges=function(e,t,s){if(!this.isProtectedOnChange){this.oldProperties[e]=s,this.changedProperties[e]=t,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},b.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(mt,Vt){var Qt=t.srenderer?t.srenderer.createElement(mt):(0,u.az)(mt);return typeof Vt>"u"||(Qt.innerHTML=Vt.innerHTML?Vt.innerHTML:"",void 0!==Vt.className&&(Qt.className=Vt.className),void 0!==Vt.id&&(Qt.id=Vt.id),void 0!==Vt.styles&&Qt.setAttribute("style",Vt.styles),void 0!==t.ngAttr&&Qt.setAttribute(t.ngAttr,""),void 0!==Vt.attrs&&(0,u.Y4)(Qt,Vt.attrs)),Qt};for(var s=0,n=t.tags;s<n.length;s++){var r=n[s],h={instance:(0,u.NA)("child"+r.substring(0,1).toUpperCase()+r.substring(1),t),name:r};t.tagObjects.push(h)}for(var m=Object.keys(t),T=0;T<m.length;T++){var V=(0,u.NA)(m[T],t);"object"==typeof V&&V&&V.elementRef&&("object"==typeof V&&V&&V.elementRef&&-1!==m[T].indexOf("_")&&-1===m[T].indexOf("Ref")&&(0,u.sO)(m[T]+"Ref",V,t),t.viewContainerRef&&!(0,u.NA)("_viewContainerRef",V.elementRef.nativeElement)&&!(0,u.NA)("propName",V.elementRef.nativeElement)&&((0,u.sO)("_viewContainerRef",t.viewContainerRef,V.elementRef.nativeElement),(0,u.sO)("propName",m[T].replace("Ref",""),V.elementRef.nativeElement)))}for(var Y=0,se=m=(m=Object.keys(t)).filter(function(mt){return/Ref$/i.test(mt)&&/\_/i.test(mt)});Y<se.length;Y++){var ke=se[Y].replace("Ref",""),qe={};(0,u.sO)(ke.replace("_","."),(0,u.NA)(ke,t),qe),t.setProperties(qe,!0)}},b.prototype.getAngularAttr=function(e){for(var n,t=e.attributes,s=t.length,r=0;r<s;r++)/_ngcontent/g.test(t[r].name)&&(n=t[r].name);return n},b.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var n=Object.keys(t),r=0,h=n=n.filter(function(V){return/Ref$/i.test(V)});r<h.length;r++){var T=h[r].replace("Ref","");(0,u.sO)(T.replace("_","."),(0,u.NA)(T+"Ref",t),t)}setTimeout(function(){(typeof window<"u"&&t.element||t.getModuleName().includes("btn"))&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")})},b.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){typeof window<"u"&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),t.ngBoundedEvents={},t.tagObjects={},t.ngEle=null)})},b.prototype.clearTemplate=function(e,t){Li(this,e,t)},b.prototype.ngAfterContentChecked=function(e){for(var t=e||this,s=0,n=t.tagObjects;s<n.length;s++){var r=n[s];if(!(0,u.o8)(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var h={},m=void 0;(T=(0,u.NA)("instance.list",r))&&T.length&&(m=T[0].directivePropList);var V=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(V=!1),m&&V&&-1===m.indexOf(r.instance.propertyName))for(var Y=Object.keys(r.instance.list[0].propCollection),se=0;se<r.instance.list.length;se++){r.instance.list[se].propCollection[r.instance.propertyName]=[];for(var ge={},ke=0;ke<Y.length;ke++)ge[qe=Y[ke]]=r.instance.list[se].propCollection[qe];for(var mt=0;mt<r.instance.list[se].tags.length;mt++){var Vt=r.instance.list[se].tags[mt],Qt=(0,u.NA)("child"+Vt.substring(0,1).toUpperCase()+Vt.substring(1),r.instance.list[se]);if(Qt){var ai=r.instance.list[se]["child"+Vt.substring(0,1).toUpperCase()+Vt.substring(1)];if(ai)for(var ki=0;ki<ai.list.length;ki++){var Qi=ai.list[0].tags[0];if(Qi){var fs=(0,u.NA)("child"+Qi.substring(0,1).toUpperCase()+Qi.substring(1),ai.list[ki]);fs&&ai.list[ki].tagObjects.push({instance:fs,name:Qi})}}r.instance.list[se].tagObjects.push({instance:Qt,name:Vt})}}r.instance.list[se].propCollection[r.instance.propertyName].push(ge)}h[r.name]=r.instance.getProperties(),t.setProperties(h,r.instance.isInitChanges)}else{(t[r.name].length!==r.instance.list.length||/diagram|tab/.test(t.getModuleName()))&&(t[r.name]=r.instance.list);for(var ps=0,Nn=r.instance.list;ps<Nn.length;ps++){var T,fr=r.instance.list.indexOf(T=Nn[ps]),rr=(0,u.NA)(r.name,t)[fr],xr=Object.keys(rr);if(xr=xr.filter(function(fl){return/Ref$/i.test(fl)}),rr.properties&&0!==Object.keys(rr.properties).length)for(var nn=0,Xo=xr;nn<Xo.length;nn++){var qe;qe=(qe=Xo[nn]).replace(/Ref/,""),rr.properties[qe]=rr.properties[qe]?rr.properties[qe]:rr.propCollection[qe]}!(0,u.o8)(rr)&&!(0,u.o8)(rr.setProperties)&&(/diagram|DashboardLayout/.test(t.getModuleName())?rr.setProperties(T.getProperties(),!0):rr.setProperties(T.getProperties())),T.isUpdated=!0}}}},b.prototype.registerEvents=function(e){$e(e,this)},b.prototype.twoWaySetter=function(e,t){var s=(0,u.NA)(t,this.properties);s!==e&&(this.saveChanges(t,e,s),(0,u.sO)(t,(0,u.le)(e)?null:e,this.properties),(0,u.NA)(t+"Change",this).emit(e))},b.prototype.addTwoWay=function(e){for(var t=this,s=function(T){(0,u.NA)(T,n),Object.defineProperty(n,T,{get:function(){return(0,u.NA)(T,t.properties)},set:function(V){return t.twoWaySetter(V,T)}}),(0,u.sO)(T+"Change",new i.vpe,n)},n=this,r=0,h=e;r<h.length;r++)s(h[r])},b.prototype.addEventListener=function(e,t){var s=(0,u.NA)(e,this);(0,u.o8)(s)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,s.subscribe(t)))},b.prototype.removeEventListener=function(e,t){var s=(0,u.NA)(e,this);(0,u.o8)(s)||this.ngBoundedEvents[e].get(t).unsubscribe()},b.prototype.trigger=function(e,t,s){var n=(0,u.NA)(e,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),(0,u.o8)(n)||n.next(t);var h=(0,u.NA)("local"+e.charAt(0).toUpperCase()+e.slice(1),this);(0,u.o8)(h)||h.call(this,t),this.isProtectedOnChange=r,s&&(this.preventChange=this.isPreventChange,s.call(this,t)),this.isPreventChange=!1},b}(),Oe=(function(){function b(){}b.prototype.propagateChange=function(e){},b.prototype.propagateTouch=function(){},b.prototype.localChange=function(e){var t=void 0===e.checked?e.value:e.checked;this.objCheck=(0,u.Kn)(t),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(t),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)):t!==this.angularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)},b.prototype.registerOnChange=function(e){this.propagateChange=e},b.prototype.registerOnTouched=function(e){this.propagateTouch=e},b.prototype.twoWaySetter=function(e,t){var s=this.oldValue||(0,u.NA)(t,this.properties),n=this.inputElement||this.element;n&&s===e&&this.value===e&&(void 0===n.value||""===n.value)||(this.saveChanges(t,e,s),(0,u.sO)(t,(0,u.le)(e)?null:e,this.properties),(0,u.NA)(t+"Change",this).emit(e))},b.prototype.ngAfterViewInit=function(e){var t=e||this;if(typeof window<"u"){t.appendTo(t.element);var s=t.inputElement||t.element;s.addEventListener("focus",t.ngOnFocus.bind(t)),s.addEventListener("blur",t.ngOnBlur.bind(t))}this.isFormInit=!1},b.prototype.setDisabledState=function(e){this.enabled=!e,this.disabled=e},b.prototype.writeValue=function(e){void 0===this.checked?this.value=e:this.ngEle&&(this.checked="boolean"==typeof e?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?e===this.value:e:e===this.value),this.angularValue=e,this.isUpdated=!0,this.preventChange=!this.isFormInit},b.prototype.ngOnFocus=function(e){!0!==this.skipFromEvent&&this.focus.emit(e)},b.prototype.ngOnBlur=function(e){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(e)},b.isFormBase=!0}(),(0,u.aR)());function jt(b){return function(e,t){var s={set:Nt(t),get:Di(t,b),enumerable:!0,configurable:!0};Object.defineProperty(e,t,s)}}function Nt(b){return function(e){void 0!==e&&((0,u.sO)(b+"Ref",e,this),"string"!=typeof e?(e.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,e.elementRef.nativeElement.propName=b):this.saveChanges&&(this.saveChanges(b,e,void 0),this.dataBind()))}}function Di(b,e){return function(){return(0,u.NA)(b+"Ref",this)||e}}(0,u.Wr)({compile:function ft(b,e){if("string"==typeof b)return Oe(b,e);var t=b.elementRef.nativeElement._viewContainerRef,s=b.elementRef.nativeElement.propName;return function(n,r,h){var T=t||r.viewContainerRef,V=T.createEmbeddedView(b,{$implicit:n});V.markForCheck();var Y=r&&r.registeredTemplate?r.registeredTemplate:(0,u.NA)("currentInstance.registeredTemplate",T);return typeof Y[h=h&&r.registeredTemplate?h:s]>"u"&&(Y[h]=[]),Y[h].push(V),V.rootNodes}}});var bt=rt(4028),Rt=rt(5774),z=rt(2162),J=rt(3155),ve=rt(8608),Ne=rt(7140),ce=rt(9528),be=rt(461),Se=rt(8526),ue=rt(7220);function _e(b){return"[object String]"===Object.prototype.toString.call(b)?"$s"+b:"$o"+b.toString()}class lt{constructor(e){this.table={},this.nElements=0,this.toStr=e||_e}getValue(e){const t=this.table["$"+this.toStr(e)];if(!(typeof t>"u"))return t.value}setValue(e,t){let s;const n="$"+this.toStr(e);return this.nElements++,s=void 0,void(this.table[n]={key:e,value:t})}remove(e){const t="$"+this.toStr(e),s=this.table[t];return delete this.table[t],this.nElements--,s.value}keys(){const e=[];let t=Object.keys(this.table);for(let s=0;s<t.length;s++)e.push(this.table[t[s]].key);return e}values(){const e=[];let t=Object.keys(this.table);for(let s=0;s<t.length;s++)e.push(this.table[t[s]].value);return e}containsKey(e){let t=!0;return t=typeof this.getValue(e)>"u",!t}clear(){this.table={},this.nElements=0}size(){return this.nElements}}let Xe=(()=>{class b{constructor(t){this.stringStartMark="/",this.internalValue="",this.isSaving6=!1,this.position6=-1,this.internalValue=this.normalizeValue(t)}get status(){return this.status6}set status(t){this.status6=t}get isSaving(){return this.isSaving6}set isSaving(t){this.isSaving6=t}get objectCollectionIndex(){return this.index6}set objectCollectionIndex(t){this.index6=t}get position(){return this.position6}set position(t){this.position6=t}get clonedObject(){return null}get value(){return this.internalValue}set value(t){let s=t;null!==t&&t.length>0?(s=t,this.internalValue=this.normalizeValue(s)):this.internalValue=s}save(t){t.write(this.toString())}toString(){return this.stringStartMark+this.escapeString(this.value)}clone(t){let s=new b;return s.value=this.internalValue,s}escapeString(t){let s="";for(let n=0,r=t.length;n<r;n++){let h=t[n];b.delimiters.indexOf(h),s+=h}return s}normalizeValue(t,s){return t}}return b.delimiters="()<>[]{}/%}",b.replacements=[" ","\t","\n","\r"],b})(),B=(()=>{class b{constructor(){this.forTest="test",this.forTest=b.obj}}return b.obj="obj",b.endObj="endobj",b.r="R",b.whiteSpace=" ",b.slash="/",b.newLine="\r\n",b.stream="stream",b.endStream="endstream",b.xref="xref",b.f="f",b.n="n",b.trailer="trailer",b.startxref="startxref",b.eof="%%EOF",b.header="%PDF-1.5",b.beginText="BT",b.endText="ET",b.beginPath="m",b.appendLineSegment="l",b.stroke="S",b.fill="f",b.fillEvenOdd="f*",b.fillStroke="B",b.fillStrokeEvenOdd="B*",b.appendbeziercurve="c",b.appendRectangle="re",b.saveState="q",b.restoreState="Q",b.paintXObject="Do",b.modifyCtm="cm",b.modifyTM="Tm",b.setLineWidth="w",b.setLineCapStyle="J",b.setLineJoinStyle="j",b.setDashPattern="d",b.setFlatnessTolerance="i",b.closePath="h",b.closeStrokePath="s",b.closeFillStrokePath="b",b.setCharacterSpace="Tc",b.setWordSpace="Tw",b.setHorizontalScaling="Tz",b.setTextLeading="TL",b.setFont="Tf",b.setRenderingMode="Tr",b.setTextRise="Ts",b.setTextScaling="Tz",b.setCoords="Td",b.goToNextLine="T*",b.setText="Tj",b.setTextWithFormatting="TJ",b.setTextOnNewLine="'",b.selectcolorspaceforstroking="CS",b.selectcolorspacefornonstroking="cs",b.setrbgcolorforstroking="RG",b.setrbgcolorfornonstroking="rg",b.setcmykcolorforstroking="K",b.setcmykcolorfornonstroking="k",b.setgraycolorforstroking="G",b.setgraycolorfornonstroking="g",b.clipPath="W",b.clipPathEvenOdd="W*",b.endPath="n",b.setGraphicsState="gs",b.comment="%",b.evenOdd="*",b.setMiterLimit="M",b.setColorAndPattern="scn",b.setColorAndPatternStroking="SCN",b})();class de{constructor(){this.pages="Pages",this.kids="Kids",this.count="Count",this.resources="Resources",this.type="Type",this.size="Size",this.mediaBox="MediaBox",this.parent="Parent",this.root="Root",this.decodeParms="DecodeParms",this.filter="Filter",this.font="Font",this.type1="Type1",this.baseFont="BaseFont",this.encoding="Encoding",this.subtype="Subtype",this.contents="Contents",this.procset="ProcSet",this.colorSpace="ColorSpace",this.extGState="ExtGState",this.pattern="Pattern",this.xObject="XObject",this.length="Length",this.width="Width",this.height="Height",this.bitsPerComponent="BitsPerComponent",this.image="Image",this.dctdecode="DCTDecode",this.columns="Columns",this.blackIs1="BlackIs1",this.k="K",this.s="S",this.predictor="Predictor",this.deviceRgb="DeviceRGB",this.next="Next",this.action="Action",this.link="Link",this.a="A",this.annot="Annot",this.p="P",this.c="C",this.rect="Rect",this.uri="URI",this.annots="Annots",this.ca="ca",this.CA="CA",this.xyz="XYZ",this.fit="Fit",this.dest="Dest",this.BM="BM",this.flatedecode="FlateDecode",this.rotate="Rotate",this.bBox="BBox",this.form="Form",this.w="W",this.cIDFontType2="CIDFontType2",this.cIDToGIDMap="CIDToGIDMap",this.identity="Identity",this.dw="DW",this.fontDescriptor="FontDescriptor",this.cIDSystemInfo="CIDSystemInfo",this.fontName="FontName",this.flags="Flags",this.fontBBox="FontBBox",this.missingWidth="MissingWidth",this.stemV="StemV",this.italicAngle="ItalicAngle",this.capHeight="CapHeight",this.ascent="Ascent",this.descent="Descent",this.leading="Leading",this.avgWidth="AvgWidth",this.fontFile2="FontFile2",this.maxWidth="MaxWidth",this.xHeight="XHeight",this.stemH="StemH",this.registry="Registry",this.ordering="Ordering",this.supplement="Supplement",this.type0="Type0",this.identityH="Identity-H",this.toUnicode="ToUnicode",this.descendantFonts="DescendantFonts",this.background="Background",this.shading="Shading",this.matrix="Matrix",this.antiAlias="AntiAlias",this.function="Function",this.extend="Extend",this.shadingType="ShadingType",this.coords="Coords",this.domain="Domain",this.range="Range",this.functionType="FunctionType",this.bitsPerSample="BitsPerSample",this.patternType="PatternType",this.paintType="PaintType",this.tilingType="TilingType",this.xStep="XStep",this.yStep="YStep"}}class Be{constructor(e){if(this.position7=-1,this.primitiveItems=new lt,this.prefix="<<",this.suffix=">>",this.resources=[],this.object=null,this.archive=!0,this.isFont=!1,typeof e>"u")this.primitiveItems=new lt,this.encrypt=!0,this.dictionaryProperties=new de;else{this.primitiveItems=new lt;let t=e.items.keys(),s=e.items.values();for(let n=0;n<e.items.size();n++)this.primitiveItems.setValue(t[n],s[n]);this.status=e.status,this.freezeChanges(this),this.encrypt=!0,this.dictionaryProperties=new de}}get items(){return this.primitiveItems}get status(){return this.status7}set status(e){this.status7=e}get isSaving(){return this.isSaving7}set isSaving(e){this.isSaving7=e}get objectCollectionIndex(){return this.index7}set objectCollectionIndex(e){this.index7=e}get clonedObject(){return this.object}get position(){return this.position7}set position(e){this.position7=e}get Count(){return this.primitiveItems.size()}get Dictionary(){return this}getArchive(){return this.archive}setArchive(e){this.archive=e}setEncrypt(e){this.encrypt=e,this.modify()}getEncrypt(){return this.encrypt}freezeChanges(e){this.bChanged=!1}clone(e){return new Be}modify(){this.bChanged=!0}remove(e){"string"!=typeof e?(this.primitiveItems.remove(e.value),this.modify()):this.remove(new Xe(e))}containsKey(e){let t=!1;return t=this.primitiveItems.containsKey(e.toString()),t}onBeginSave(){this.beginSave.sender.beginSave()}onFontDictionaryBeginSave(){this.fontDictionaryBeginSave.sender.fontDictionaryBeginSave()}onDescendantFontBeginSave(){this.descendantFontBeginSave.sender.descendantFontBeginSave()}onTemplateBeginSave(){this.pageBeginDrawTemplate.sender.pageBeginSave()}onBeginAnnotationSave(){this.annotationBeginSave.sender.beginSave()}onSectionBeginSave(e){let t=this.sectionBeginSave;t.sender.beginSave(t.state,e)}save(e,t){typeof t>"u"?this.save(e,!0):(e.write(this.prefix),typeof this.beginSave<"u"&&this.onBeginSave(),typeof this.descendantFontBeginSave<"u"&&this.onDescendantFontBeginSave(),typeof this.fontDictionaryBeginSave<"u"&&this.onFontDictionaryBeginSave(),typeof this.annotationBeginSave<"u"&&this.onBeginAnnotationSave(),typeof this.sectionBeginSave<"u"&&this.onSectionBeginSave(e),typeof this.pageBeginDrawTemplate<"u"&&this.onTemplateBeginSave(),this.Count>0&&this.saveItems(e),e.write(this.suffix),e.write(B.newLine))}saveItems(e){e.write(B.newLine);let t=this.primitiveItems.keys(),s=this.primitiveItems.values();for(let n=0;n<t.length;n++)new Xe(t[n]).save(e),e.write(B.whiteSpace),s[n].save(e),e.write(B.newLine)}}class Fe{constructor(e){this.sender=e}}class xt{constructor(e){this.sender=e}}class $t{constructor(e){this.sender=e}}class ji{constructor(e){this.sender=e}}class is{constructor(e,t){this.sender=e,this.state=t}}class zi{constructor(e){this.sender=e}}class ui{constructor(e){this.position5=-1,this.value=e}get intValue(){return this.value}set intValue(e){this.value=e}get isInteger(){return this.integer}set isInteger(e){this.integer=e}get status(){return this.status5}set status(e){this.status5=e}get isSaving(){return this.isSaving5}set isSaving(e){this.isSaving5=e}get objectCollectionIndex(){return this.index5}set objectCollectionIndex(e){this.index5=e}get position(){return this.position5}set position(e){this.position5=e}get clonedObject(){return null}save(e){e.write(this.intValue.toString())}clone(e){return new ui(this.value)}static floatToString(e){let t=e.toFixed(2);return"0.00"===t&&(t=".00"),t}static min(e,t,s){let n=Math.min(e,t);return Math.min(s,n)}}class Ut{constructor(e){if(this.startMark="[",this.endMark="]",this.position9=-1,this.clonedObject9=null,this.isFont=!1,typeof e>"u")this.internalElements=[];else if(typeof e<"u"&&!(e instanceof Ut)){let t=e;for(let s=0;s<t.length;s++){let n=new ui(t[s]);this.add(n)}}else{let t=e;this.internalElements=[];for(let s=0;s<t.elements.length;s++)this.internalElements.push(t.elements[s])}}items(e){return this.internalElements[e]}get count(){return this.internalElements.length}get status(){return this.status9}set status(e){this.status9=e}get isSaving(){return this.isSaving9}set isSaving(e){this.isSaving9=e}get clonedObject(){return this.clonedObject9}get position(){return this.position9}set position(e){this.position9=e}get objectCollectionIndex(){return this.index9}set objectCollectionIndex(e){this.index9=e}get CrossTable(){return this.pdfCrossTable}get elements(){return this.internalElements}add(e){typeof this.internalElements>"u"&&(this.internalElements=[]),this.internalElements.push(e),this.markedChange()}markedChange(){this.bChanged=!0}contains(e){for(let s=0;s<this.internalElements.length;s++){let n=this.internalElements[s],r=e;if(null!=n&&typeof n<"u"&&null!=r&&typeof r<"u"&&n.value===r.value)return!0}return!1}getItems(e){return this.internalElements[e]}save(e){e.write(this.startMark);for(let t=0,s=this.count;t<s;t++)this.getItems(t).save(e),t+1!==s&&e.write(B.whiteSpace);e.write(this.endMark)}clone(e){this.clonedObject9=null;let t=new Ut;for(let s=0;s<this.internalElements.length;s++)t.add(this.internalElements[s].clone(e));return t.pdfCrossTable=e,this.clonedObject9=t,t}static fromRectangle(e){return new Ut([e.x,e.y,e.width,e.height])}insert(e,t){if(e<this.internalElements.length&&e>0){let s=[];for(let n=0;n<e;n++)s.push(this.internalElements[n]);s.push(t);for(let n=e;n<this.internalElements.length;n++)s.push(this.internalElements[n]);this.internalElements=s}else this.internalElements.push(t);this.markChanged()}indexOf(e){return this.internalElements.indexOf(e)}remove(e){let t=this.internalElements.indexOf(e);this.internalElements[t]=null,this.markChanged()}removeAt(e){if(this.internalElements.length>e){let t=[];for(let s=0;s<e;s++)t.push(this.internalElements[s]);for(let s=e+1;s<this.internalElements.length;s++)t.push(this.internalElements[s]);this.internalElements=t}this.markChanged()}clear(){this.internalElements=[],this.markChanged()}markChanged(){this.bChanged=!0}}class oi extends Be{constructor(e,t){super(e),this.dicPrefix="stream",this.dicSuffix="endstream",this.clonedObject2=null,this.bCompress=!0,this.isImageStream=!1,this.isFontStream=!1,typeof e<"u"||typeof t<"u"?(this.dataStream2=[],this.dataStream2=t,this.bCompress2=!1):(this.dataStream2=[],this.bCompress2=!0)}get internalStream(){return this.dataStream2}set internalStream(e){this.dataStream2=[],this.dataStream2=e,this.modify()}get isImage(){return this.isImageStream}set isImage(e){this.isImageStream=e}get isFont(){return this.isFontStream}set isFont(e){this.isFontStream=e}get compress(){return this.bCompress}set compress(e){this.bCompress=e,this.modify()}get data(){return this.dataStream2}set data(e){this.dataStream2=[],this.dataStream2=e,this.modify()}clearStream(){this.internalStream=[],this.items.containsKey(this.dictionaryProperties.filter)&&this.remove(this.dictionaryProperties.filter),this.bCompress=!0,this.modify()}write(e){if(null==e)throw new Error("ArgumentNullException:text");if(e.length<=0)throw new Error("ArgumentException: Can not write an empty string, text");this.dataStream2.push(e),this.modify()}writeBytes(e){if(null===e)throw new Error("ArgumentNullException:data");if(e.length<=0)throw new Error("ArgumentException: Can not write an empty bytes, data");let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);this.dataStream2.push(t),this.modify()}onCmapBeginSave(){this.cmapBeginSave.sender.cmapBeginSave()}onFontProgramBeginSave(){this.fontProgramBeginSave.sender.fontProgramBeginSave()}compressContent(e,t){if(this.bCompress){let s=[];for(let h=0;h<e.length;h++)s.push(e.charCodeAt(h));let n=new Uint8Array(s),r=new Se.Uj;r.write(n,0,n.length),r.close(),e=r.getCompressedString,this.addFilter(this.dictionaryProperties.flatedecode)}return e}addFilter(e){let t=this.items.getValue(this.dictionaryProperties.filter);t instanceof Xt&&(t=t.object);let s=t,n=t;null!=n&&(s=new Ut,s.insert(0,n),this.items.setValue(this.dictionaryProperties.filter,s)),n=new Xe(e),null==s?this.items.setValue(this.dictionaryProperties.filter,n):s.insert(0,n)}save(e){typeof this.cmapBeginSave<"u"&&this.onCmapBeginSave(),typeof this.fontProgramBeginSave<"u"&&this.onFontProgramBeginSave();let t="";for(let n=0;n<this.data.length;n++)t+=this.data[n];t.length>1&&!this.isImage&&!this.isFont&&(t="q\r\n"+t+"Q\r\n"),t=this.compressContent(t,e),this.items.setValue(this.dictionaryProperties.length,new ui(t.length)),super.save(e,!1),e.write(this.dicPrefix),e.write(B.newLine),t.length>0&&e.write(t),e.write(B.newLine),e.write(this.dicSuffix),e.write(B.newLine)}static bytesToString(e){let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return t}}class us{constructor(e){this.sender=e}}class Us{constructor(e){this.sender=e}}var $i;!function(b){let e;var s;let t;(s=e=b.ForceEncoding||(b.ForceEncoding={}))[s.None=0]="None",s[s.Ascii=1]="Ascii",s[s.Unicode=2]="Unicode",function(s){s[s.StringValue=0]="StringValue",s[s.ByteBuffer=1]="ByteBuffer"}(t||(t={}))}($i||($i={}));let et=(()=>{class b{constructor(t){if(this.bHex=!1,this.position1=-1,this.clonedObject1=null,this.bDecrypted=!1,this.isParentDecrypted=!1,this.isPacked=!1,this.isFormField=!1,this.isColorSpace=!1,this.isHexString=!0,typeof t>"u")this.bHex=!1;else if(!(t.length>0&&"0xfeff"===t[0])){this.stringValue=t,this.data=[];for(let s=0;s<t.length;++s)this.data.push(t.charCodeAt(s))}}get hex(){return this.bHex}get value(){return this.stringValue}set value(t){this.stringValue=t,this.data=null}get status(){return this.status1}set status(t){this.status1=t}get isSaving(){return this.isSaving1}set isSaving(t){this.isSaving1=t}get objectCollectionIndex(){return this.index1}set objectCollectionIndex(t){this.index1=t}get clonedObject(){return this.clonedObject1}get position(){return this.position1}set position(t){this.position1=t}get CrossTable(){return this.crossTable}get converted(){return this.bConverted}set converted(t){this.bConverted=t}get encode(){return this.bForceEncoding}set encode(t){this.bForceEncoding=t}static bytesToHex(t){return""}save(t){if(null===t)throw new Error("ArgumentNullException : writer");t.write(void 0!==this.encode&&this.encode===$i.ForceEncoding.Ascii?this.pdfEncode():b.stringMark[0]+this.value+b.stringMark[1])}pdfEncode(){let t="";if(void 0!==this.encode&&this.encode===$i.ForceEncoding.Ascii){let s=this.escapeSymbols(this.value);for(let n=0;n<s.length;n++)t+=String.fromCharCode(s[n]);t=b.stringMark[0]+t+b.stringMark[1]}else t=this.value;return t}escapeSymbols(t){let s=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);switch(r){case 40:case 41:case 92:s.push(92),s.push(r);break;case 13:s.push(92),s.push(114);break;default:s.push(r)}}return s}clone(t){if(null!==this.clonedObject1&&this.clonedObject1.CrossTable===t)return this.clonedObject1;this.clonedObject1=null;let s=new b(this.stringValue);return s.bHex=this.bHex,s.crossTable=t,s.isColorSpace=this.isColorSpace,this.clonedObject1=s,s}static toUnicodeArray(t,s){if(null==t)throw new Error("Argument Null Exception : value");let n=[];for(let r=0;r<t.length;r++){let h=t.charCodeAt(r);n.push(h/256>>>0),n.push(255&h)}return n}static byteToString(t){if(null==t)throw new Error("Argument Null Exception : stream");let s="";for(let n=0;n<t.length;++n)s+=String.fromCharCode(t[n]);return s}}return b.stringMark="()",b.hexStringMark="<>",b.hexFormatPattern="{0:X2}",b})();class zt{constructor(e,t){this.index3=-1,this.position3=-1,this.objNumber=0,this.genNumber=0,"number"==typeof e&&"number"==typeof t?(this.objNumber=e,this.genNumber=t):(this.objNumber=Number(e),this.genNumber=Number(t))}get status(){return this.status3}set status(e){this.status3=e}get isSaving(){return this.isSaving3}set isSaving(e){this.isSaving3=e}get objectCollectionIndex(){return this.index3}set objectCollectionIndex(e){this.index3=e}get position(){return this.position3}set position(e){this.position3=e}get clonedObject(){return null}save(e){e.write(this.toString())}toString(){return this.objNumber.toString()+" "+this.genNumber.toString()+" R"}clone(e){return null}}class Xt{constructor(e,t){this.index4=-1,this.position4=-1,this.objectIndex=-1,this.dictionaryProperties=new de,this.initialize(e)}get status(){return this.status4}set status(e){this.status4=e}get isSaving(){return this.isSaving4}set isSaving(e){this.isSaving4=e}get objectCollectionIndex(){return this.index4}set objectCollectionIndex(e){this.index4=e}get position(){return this.position4}set position(e){this.position4=e}get clonedObject(){return null}get object(){return this.primitiveObject}get reference(){return this.pdfReference}get index(){return this.objectIndex}get element(){return this.primitiveObject}initialize(e){e instanceof Ut||e instanceof Be||e instanceof Xe||e instanceof ui||e instanceof oi||e instanceof zt||e instanceof et?this.primitiveObject=e:this.initialize(e.element)}save(e){let s=e.document.crossTable;this.object.isSaving=!0;let n=null;n=s.getReference(this.object),n.save(e)}clone(e){return null}}class ni extends class Kt{constructor(){this.action=null,this.dictionaryProperties=new de,this.initialize()}get next(){return this.action}set next(e){this.action=e,this.dictionary.items.setValue(this.dictionaryProperties.next,new Xt(this.action))}get dictionary(){return typeof this.pdfDictionary>"u"&&(this.pdfDictionary=new Be),this.pdfDictionary}initialize(){this.dictionary.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.action))}get element(){return this.dictionary}}{constructor(e){super(),this.uniformResourceIdentifier=""}get uri(){return this.uniformResourceIdentifier}set uri(e){this.uniformResourceIdentifier=e,this.dictionary.items.setValue(this.dictionaryProperties.uri,new et(this.uniformResourceIdentifier))}initialize(){super.initialize(),this.dictionary.items.setValue(this.dictionaryProperties.s,new Xe(this.dictionaryProperties.uri))}}var qt=(()=>{return(b=qt||(qt={}))[b.Top=0]="Top",b[b.Middle=1]="Middle",b[b.Bottom=2]="Bottom",qt;var b})(),Ci=(()=>{return(b=Ci||(Ci={}))[b.Left=0]="Left",b[b.Center=1]="Center",b[b.Right=2]="Right",b[b.Justify=3]="Justify",Ci;var b})(),gs=(()=>{return(b=gs||(gs={}))[b.Fill=0]="Fill",b[b.Stroke=1]="Stroke",b[b.FillStroke=2]="FillStroke",b[b.None=3]="None",b[b.ClipFlag=4]="ClipFlag",b[b.ClipFill=4]="ClipFill",b[b.ClipStroke=5]="ClipStroke",b[b.ClipFillStroke=6]="ClipFillStroke",b[b.Clip=7]="Clip",gs;var b})(),Wt=(()=>{return(b=Wt||(Wt={}))[b.Flat=0]="Flat",b[b.Round=1]="Round",b[b.Square=2]="Square",Wt;var b})(),At=(()=>{return(b=At||(At={}))[b.Solid=0]="Solid",b[b.Dash=1]="Dash",b[b.Dot=2]="Dot",b[b.DashDot=3]="DashDot",b[b.DashDotDot=4]="DashDotDot",b[b.Custom=5]="Custom",At;var b})(),li=(()=>{return(b=li||(li={}))[b.Winding=0]="Winding",b[b.Alternate=1]="Alternate",li;var b})(),Oi=(()=>{return(b=Oi||(Oi={}))[b.Rgb=0]="Rgb",b[b.Cmyk=1]="Cmyk",b[b.GrayScale=2]="GrayScale",b[b.Indexed=3]="Indexed",Oi;var b})(),Gt=(()=>{return(b=Gt||(Gt={}))[b.Normal=0]="Normal",b[b.Multiply=1]="Multiply",b[b.Screen=2]="Screen",b[b.Overlay=3]="Overlay",b[b.Darken=4]="Darken",b[b.Lighten=5]="Lighten",b[b.ColorDodge=6]="ColorDodge",b[b.ColorBurn=7]="ColorBurn",b[b.HardLight=8]="HardLight",b[b.SoftLight=9]="SoftLight",b[b.Difference=10]="Difference",b[b.Exclusion=11]="Exclusion",b[b.Hue=12]="Hue",b[b.Saturation=13]="Saturation",b[b.Color=14]="Color",b[b.Luminosity=15]="Luminosity",Gt;var b})(),Dt=(()=>{return(b=Dt||(Dt={}))[b.Centimeter=0]="Centimeter",b[b.Pica=1]="Pica",b[b.Pixel=2]="Pixel",b[b.Point=3]="Point",b[b.Inch=4]="Inch",b[b.Document=5]="Document",b[b.Millimeter=6]="Millimeter",Dt;var b})(),di=(()=>{return(b=di||(di={}))[b.None=0]="None",b[b.LeftToRight=1]="LeftToRight",b[b.RightToLeft=2]="RightToLeft",di;var b})();class ot{constructor(e,t,s,n){typeof e>"u"?typeof t<"u"&&typeof s<"u"&&typeof n<"u"?this.assignRGB(t,s,n):this.filled=!1:e instanceof ot?(this.redColor=e.r,this.greenColor=e.g,this.blueColor=e.b,this.grayColor=e.gray,this.alpha=e.alpha,this.filled=0!==this.alpha):"number"==typeof e&&typeof t>"u"&&typeof s>"u"&&typeof n>"u"?(e<0&&(e=0),e>1&&(e=1),this.redColor=e*ot.maxColourChannelValue,this.greenColor=e*ot.maxColourChannelValue,this.blueColor=e*ot.maxColourChannelValue,this.cyanColor=e,this.magentaColor=e,this.yellowColor=e,this.blackColor=e,this.grayColor=e,this.alpha=ot.maxColourChannelValue,this.filled=!0):typeof n>"u"?this.assignRGB(e,t,s):this.assignRGB(t,s,n,e)}assignRGB(e,t,s,n){typeof e>"u"||typeof t>"u"||typeof s>"u"?this.filled=!1:(this.cyanColor=0,this.magentaColor=0,this.yellowColor=0,this.blackColor=0,this.grayColor=0,this.redColor=e,this.greenColor=t,this.blueColor=s,this.alpha=typeof n>"u"?ot.maxColourChannelValue:n,this.filled=!0,this.assignCMYK(e,t,s))}assignCMYK(e,t,s){let n=e/ot.maxColourChannelValue,r=t/ot.maxColourChannelValue,h=s/ot.maxColourChannelValue,m=ui.min(1-n,1-r,1-h),T=1===m?0:(1-n-m)/(1-m),V=1===m?0:(1-r-m)/(1-m),Y=1===m?0:(1-h-m)/(1-m);this.blackColor=m,this.cyanColor=T,this.magentaColor=V,this.yellowColor=Y}get r(){return this.redColor}set r(e){this.redColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get red(){return this.r/ot.maxColourChannelValue}get b(){return this.blueColor}set b(e){this.blueColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get blue(){return this.b/ot.maxColourChannelValue}get c(){return this.cyanColor}set c(e){this.cyanColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get k(){return this.blackColor}set k(e){this.blackColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get m(){return this.magentaColor}set m(e){this.magentaColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get y(){return this.yellowColor}set y(e){this.yellowColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get g(){return this.greenColor}set g(e){this.greenColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get green(){return this.g/ot.maxColourChannelValue}get gray(){return(this.redColor+this.greenColor+this.blueColor)/(3*ot.maxColourChannelValue)}set gray(e){this.grayColor=e<0?0:e>1?1:e,this.r=this.grayColor*ot.maxColourChannelValue,this.g=this.grayColor*ot.maxColourChannelValue,this.b=this.grayColor*ot.maxColourChannelValue,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get isEmpty(){return!this.filled}get a(){return this.alpha}set a(e){this.alpha=e<0?0:e,this.filled=!0}toString(e,t){if(this.isEmpty)return"";let s="";switch(e){case Oi.Rgb:s=this.rgbToString(t);break;case Oi.GrayScale:s=this.grayScaleToString(t);break;case Oi.Cmyk:s=this.cmykToString(t)}return s}grayScaleToString(e){let t=this.gray,s="",n=null;return n=e?ot.grayStringsSroke.containsKey(t)?ot.grayStringsSroke.getValue(t):null:ot.grayStringsFill.containsKey(t)?ot.grayStringsFill.getValue(t):null,null==n?e&&(s=t.toString()+" G",ot.grayStringsSroke.setValue(t,s)):s=n.toString(),s+B.newLine}rgbToString(e){let t=this.r,s=this.g,n=this.b,r=(t<<16)+(s<<8)+n;e&&(r+=1<<24);let h="",m=null;if(ot.rgbStrings.containsKey(r)&&(m=ot.rgbStrings.getValue(r)),null==m){let T=t/ot.maxColourChannelValue,V=s/ot.maxColourChannelValue,Y=n/ot.maxColourChannelValue;h=e?T.toString()+" "+V.toString()+" "+Y.toString()+" RG":T.toString()+" "+V.toString()+" "+Y.toString()+" rg",ot.rgbStrings.setValue(r,h)}else h=m.toString();return h+B.newLine}cmykToString(e){let s=this.m,n=this.y,r=this.b,h="";return h=this.c.toString()+" "+s.toString()+" "+n.toString()+" "+r.toString()+" K",h+B.newLine}toArray(e){let t=new Ut;return e===Oi.Rgb&&(t.add(new ui(this.red)),t.add(new ui(this.green)),t.add(new ui(this.blue))),t}}ot.rgbStrings=new lt,ot.grayStringsSroke=new lt,ot.grayStringsFill=new lt,ot.maxColourChannelValue=255;class hi{constructor(e,t){typeof e>"u"?(this.x=0,this.y=0):(this.x=null!==e?e:0,this.y=null!==t?t:0)}}class Ei{constructor(e,t){typeof t>"u"?(this.height=0,this.width=0):(this.height=null!==t?t:0,this.width=null!==e?e:0)}}class Ui{constructor(e,t,s,n){if(typeof e==typeof e&&typeof e>"u")this.x=0,this.y=0,this.height=0,this.width=0;else if(e instanceof hi&&t instanceof Ei&&typeof s>"u"){let r=e;this.x=r.x,this.y=r.y;let h=t;this.height=h.height,this.width=h.width}else{let h=t,m=s,T=n;this.x=e,this.y=h,this.height=T,this.width=m}}}class As{constructor(e,t,s,n){this.left=e,this.top=t,this.right=s,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}get topLeft(){return new hi(this.left,this.top)}get size(){return new Ei(this.width,this.height)}toString(){return this.topLeft+"x"+this.size}}class bs{constructor(){}clone(){return this}}class kt extends bs{constructor(e){super(),this.pdfColor=e}get color(){return this.pdfColor}set color(e){this.pdfColor=e}monitorChanges(e,t,s,n,r){if(null==t)throw new Error("ArgumentNullException:streamWriter");let h=!1;return h=!0,t.setColorAndSpace(this.pdfColor,r,!1),true}resetChanges(e){e.setColorAndSpace(new ot(0,0,0),Oi.Rgb,!1)}}var wt=(()=>{return(b=wt||(wt={}))[b.Regular=0]="Regular",b[b.Bold=1]="Bold",b[b.Italic=2]="Italic",b[b.Underline=4]="Underline",b[b.Strikeout=8]="Strikeout",wt;var b})(),Ot=(()=>{return(b=Ot||(Ot={}))[b.Helvetica=0]="Helvetica",b[b.Courier=1]="Courier",b[b.TimesRoman=2]="TimesRoman",b[b.Symbol=3]="Symbol",b[b.ZapfDingbats=4]="ZapfDingbats",Ot;var b})(),bi=(()=>{return(b=bi||(bi={}))[b.None=0]="None",b[b.Word=1]="Word",b[b.WordOnly=2]="WordOnly",b[b.Character=3]="Character",bi;var b})(),Ti=(()=>{return(b=Ti||(Ti={}))[b.None=0]="None",b[b.SuperScript=1]="SuperScript",b[b.SubScript=2]="SubScript",Ti;var b})(),ns=(()=>{return(b=ns||(ns={}))[b.Unknown=0]="Unknown",b[b.StandardEncoding=1]="StandardEncoding",b[b.MacRomanEncoding=2]="MacRomanEncoding",b[b.MacExpertEncoding=3]="MacExpertEncoding",b[b.WinAnsiEncoding=4]="WinAnsiEncoding",b[b.PdfDocEncoding=5]="PdfDocEncoding",b[b.IdentityH=6]="IdentityH",ns;var b})(),ls=(()=>{return(b=ls||(ls={}))[b.Apple=0]="Apple",b[b.Microsoft=4]="Microsoft",b[b.Trimmed=6]="Trimmed",ls;var b})(),ws=(()=>{return(b=ws||(ws={}))[b.Unknown=0]="Unknown",b[b.Symbol=1]="Symbol",b[b.Unicode=2]="Unicode",b[b.Macintosh=3]="Macintosh",ws;var b})(),Ds=(()=>{return(b=Ds||(Ds={}))[b.AppleUnicode=0]="AppleUnicode",b[b.Macintosh=1]="Macintosh",b[b.Iso=2]="Iso",b[b.Microsoft=3]="Microsoft",Ds;var b})(),on=(()=>{return(b=on||(on={}))[b.Undefined=0]="Undefined",b[b.Unicode=1]="Unicode",on;var b})(),Bn=(()=>{return(b=Bn||(Bn={}))[b.Roman=0]="Roman",b[b.Japanese=1]="Japanese",b[b.Chinese=2]="Chinese",Bn;var b})(),Kn=(()=>{return(b=Kn||(Kn={}))[b.FixedPitch=1]="FixedPitch",b[b.Serif=2]="Serif",b[b.Symbolic=4]="Symbolic",b[b.Script=8]="Script",b[b.Nonsymbolic=32]="Nonsymbolic",b[b.Italic=64]="Italic",b[b.ForceBold=262144]="ForceBold",Kn;var b})(),Dn=(()=>{return(b=Dn||(Dn={}))[b.Arg1And2AreWords=1]="Arg1And2AreWords",b[b.ArgsAreXyValues=2]="ArgsAreXyValues",b[b.RoundXyToGrid=4]="RoundXyToGrid",b[b.WeHaveScale=8]="WeHaveScale",b[b.Reserved=16]="Reserved",b[b.MoreComponents=32]="MoreComponents",b[b.WeHaveAnXyScale=64]="WeHaveAnXyScale",b[b.WeHaveTwoByTwo=128]="WeHaveTwoByTwo",b[b.WeHaveInstructions=256]="WeHaveInstructions",b[b.UseMyMetrics=512]="UseMyMetrics",Dn;var b})();class In{constructor(e,t){this.scalingFactor=100,this.wordWrapType=bi.Word,this.internalLineLimit=!0,this.wordWrapType=bi.Word,typeof e<"u"&&"string"!=typeof e&&(this.textAlignment=e),typeof t<"u"&&(this.verticalAlignment=t)}get alignment(){return this.textAlignment}set alignment(e){this.textAlignment=e}get textDirection(){return this.direction}set textDirection(e){this.direction=e}get lineAlignment(){return typeof this.verticalAlignment>"u"||null==this.verticalAlignment?qt.Top:this.verticalAlignment}set lineAlignment(e){this.verticalAlignment=e}get rightToLeft(){return!(typeof this.isRightToLeft>"u"||null==this.isRightToLeft)&&this.isRightToLeft}set rightToLeft(e){this.isRightToLeft=e}get characterSpacing(){return typeof this.internalCharacterSpacing>"u"||null==this.internalCharacterSpacing?0:this.internalCharacterSpacing}set characterSpacing(e){this.internalCharacterSpacing=e}get wordSpacing(){return typeof this.internalWordSpacing>"u"||null==this.internalWordSpacing?0:this.internalWordSpacing}set wordSpacing(e){this.internalWordSpacing=e}get lineSpacing(){return typeof this.leading>"u"||null==this.leading?0:this.leading}set lineSpacing(e){this.leading=e}get clipPath(){return!(typeof this.clip>"u"||null==this.clip)&&this.clip}set clipPath(e){this.clip=e}get subSuperScript(){return typeof this.pdfSubSuperScript>"u"||null==this.pdfSubSuperScript?Ti.None:this.pdfSubSuperScript}set subSuperScript(e){this.pdfSubSuperScript=e}get paragraphIndent(){return typeof this.internalParagraphIndent>"u"||null==this.internalParagraphIndent?0:this.internalParagraphIndent}set paragraphIndent(e){this.internalParagraphIndent=e,this.firstLineIndent=e}get lineLimit(){return this.internalLineLimit}set lineLimit(e){this.internalLineLimit=e}get measureTrailingSpaces(){return!(typeof this.trailingSpaces>"u"||null==this.trailingSpaces)&&this.trailingSpaces}set measureTrailingSpaces(e){this.trailingSpaces=e}get noClip(){return!(typeof this.isNoClip>"u"||null==this.isNoClip)&&this.isNoClip}set noClip(e){this.isNoClip=e}get wordWrap(){return this.wordWrapType}set wordWrap(e){this.wordWrapType=e}get horizontalScalingFactor(){return this.scalingFactor}set horizontalScalingFactor(e){if(e<=0)throw new Error("ArgumentOutOfRangeException:The scaling factor cant be less of equal to zero, ScalingFactor");this.scalingFactor=e}get firstLineIndent(){return typeof this.initialLineIndent>"u"||null==this.initialLineIndent?0:this.initialLineIndent}set firstLineIndent(e){this.initialLineIndent=e}clone(){return this}}class js{constructor(e){if(this.currentPosition=0,null==e)throw new Error("ArgumentNullException:text");this.text=e}get length(){return this.text.length}get end(){return this.currentPosition===this.text.length}get position(){return this.currentPosition}set position(e){this.currentPosition=e}static getCharsCount(e,t){if("string"==typeof t){if(null==e)throw new Error("ArgumentNullException:wholeText");let s=0,n=0;for(;n=e.indexOf(t,n),-1!==n;)s++,n++;return s}{if(null==e)throw new Error("ArgumentNullException:text");if(null==t)throw new Error("ArgumentNullException:symbols");let s=0;for(let n=0,r=e.length;n<r;n++)this.contains(t,e[n])&&s++;return s}}readLine(){let e=this.currentPosition;for(;e<this.length;){let t=this.text[e];switch(t){case"\r":case"\n":{let s=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e+1,"\r"===t&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,s}}e++}if(e>this.currentPosition){let t=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,t}return null}peekLine(){let e=this.currentPosition,t=this.readLine();return this.currentPosition=e,t}readWord(){let e=this.currentPosition;for(;e<this.length;){let t=this.text[e];switch(t){case"\r":case"\n":let s=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e+1,"\r"===t&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,s;case" ":case"\t":{e===this.currentPosition&&e++;let n=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,n}}e++}if(e>this.currentPosition){let t=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,t}return null}peekWord(){let e=this.currentPosition,t=this.readWord();return this.currentPosition=e,t}read(e){if(typeof e>"u"){let t="0";return this.end||(t=this.text[this.currentPosition],this.currentPosition++),t}{let t=0,s="";for(;!this.end&&t<e;)s+=this.read(),t++;return s}}peek(){let e="0";return this.end||(e=this.text[this.currentPosition]),e}close(){this.text=null}readToEnd(){let e;return e=0===this.currentPosition?this.text:this.text.substr(this.currentPosition,this.length-this.currentPosition),this.currentPosition=this.length,e}static contains(e,t){let s=!1;for(let n=0;n<e.length;n++)if(e[n]===t){s=!0;break}return s}}js.whiteSpace=" ",js.tab="\t",js.spaces=[js.whiteSpace,js.tab],js.whiteSpacePattern="^[ \t]+$";class Yt{constructor(){this.isOverloadWithPosition=!1}layout(e,t,s,n,r,h,m){if(n instanceof Ui){this.initialize(e,t,s,n,r),this.isOverloadWithPosition=h,this.clientSize=m;let T=this.doLayout();return this.clear(),T}{this.initialize(e,t,s,n),this.isOverloadWithPosition=r,this.clientSize=h;let T=this.doLayout();return this.clear(),T}}initialize(e,t,s,n,r){if("number"==typeof r){if(null==e)throw new Error("ArgumentNullException:text");if(null==t)throw new Error("ArgumentNullException:font");this.text=e,this.font=t,this.format=s,this.size=new Ei(n.width,n.height),this.rectangle=n,this.pageHeight=r,this.reader=new js(e)}else this.initialize(e,t,s,new Ui(new hi(0,0),n),0)}clear(){this.font=null,this.format=null,this.reader.close(),this.reader=null,this.text=null}doLayout(){let e=new Xi,t=new Xi,s=[],n=this.reader.peekLine(),r=this.getLineIndent(!0);for(;null!=n;){if(t=this.layoutLine(n,r),null!==t||typeof t<"u"){let h=0,m=this.copyToResult(e,t,s,h);if(h=m.numInserted,!m.success){this.reader.read(h);break}}this.reader.readLine(),n=this.reader.peekLine(),r=this.getLineIndent(!1)}return this.finalizeResult(e,s),e}getLineIndent(e){let t=0;return null!=this.format&&(t=e?this.format.firstLineIndent:this.format.paragraphIndent,t=this.size.width>0?Math.min(this.size.width,t):t),t}getLineHeight(){let e=this.font.height;return null!=this.format&&0!==this.format.lineSpacing&&(e=this.format.lineSpacing+this.font.height),e}getLineWidth(e){return this.font.getLineWidth(e,this.format)}layoutLine(e,t){let s=new Xi;s.layoutLineHeight=this.getLineHeight();let n=[],r=this.size.width,h=this.getLineWidth(e)+t,m=cr.FirstParagraphLine,T=!0;if(r<=0||Math.round(h)<=Math.round(r))this.addToLineResult(s,n,e,h,cr.NewLineBreak|m);else{let V="",Y="";h=t;let se=t,ge=new js(e),ke=ge.peekWord();for(ke.length!==ge.length&&" "===ke&&(Y+=ke,V+=ke,ge.position+=1,ke=ge.peekWord());null!=ke;){Y+=ke;let qe=this.getLineWidth(Y.toString())+se;if(" "===Y.toString()&&(Y="",qe=0),qe>r){if(this.getWrapType()===bi.None)break;if(Y.length===ke.length){if(this.getWrapType()===bi.WordOnly){s.textRemainder=e.substring(ge.position);break}if(1===Y.length){V+=ke;break}T=!1,Y="",ke=ge.peek().toString();continue}if(this.getLineWidth(ke.toString())>r?this.format.wordWrap=bi.Character:typeof this.format<"u"&&null!==this.format&&(this.format.wordWrap=bi.Word),this.getWrapType()===bi.Character&&T)T=!1,Y="",Y+=V.toString(),ke=ge.peek().toString();else{let mt=V.toString();" "!==mt&&this.addToLineResult(s,n,mt,h,cr.LayoutBreak|m),this.isOverloadWithPosition&&(r=this.clientSize.width),Y="",V="",h=0,se=0,qe=0,m=cr.None,ke=T?ke:ge.peekWord(),T=!0}}else V+=ke,h=qe,T?(ge.readWord(),ke=ge.peekWord()):(ge.read(),ke=ge.peek().toString())}if(V.length>0){let qe=V.toString();this.addToLineResult(s,n,qe,h,cr.NewLineBreak|cr.LastParagraphLine)}ge.close()}s.layoutLines=[];for(let V=0;V<n.length;V++)s.layoutLines.push(n[V]);return n=[],s}addToLineResult(e,t,s,n,r){let h=new Ls;h.text=s,h.width=n,h.lineType=r,t.push(h);let m=e.actualSize;m.height+=this.getLineHeight(),m.width=Math.max(m.width,n),e.size=m}copyToResult(e,t,s,n){let r=!0,h=null!=this.format&&!this.format.lineLimit,m=e.actualSize.height,T=this.size.height;if(this.pageHeight>0&&T+this.rectangle.y>this.pageHeight&&(T=this.rectangle.y-this.pageHeight,T=Math.max(T,-T)),n=0,null!=t.lines)for(let V=0,Y=t.lines.length;V<Y;V++){let se=m+t.lineHeight;if(!(se<=T||T<=0||h)){r=!1;break}{let ge=t.lines[V];n+=ge.text.length,ge=this.trimLine(ge,0===s.length),s.push(ge);let ke=e.actualSize;ke.width=Math.max(ke.width,ge.width),e.size=ke,m=se}}if(m!=e.size.height){let V=e.actualSize;V.height=m,e.size=V}return{success:r,numInserted:n}}finalizeResult(e,t){e.layoutLines=[];for(let s=0;s<t.length;s++)e.layoutLines.push(t[s]);e.layoutLineHeight=this.getLineHeight(),this.reader.end||(e.textRemainder=this.reader.readToEnd()),t=[]}trimLine(e,t){let s=e.text,n=e.width;return s=s.trim(),s.length!==e.text.length&&(n=this.getLineWidth(s),(e.lineType&cr.FirstParagraphLine)>0&&(n+=this.getLineIndent(t))),e.text=s,e.width=n,e}getWrapType(){return null!=this.format?this.format.wordWrap:bi.Word}}class Xi{get remainder(){return this.textRemainder}get actualSize(){return typeof this.size>"u"&&(this.size=new Ei(0,0)),this.size}get lines(){return this.layoutLines}get lineHeight(){return this.layoutLineHeight}get empty(){return null==this.layoutLines||0===this.layoutLines.length}get lineCount(){return this.empty?0:this.layoutLines.length}}class Ls{get lineType(){return this.type}set lineType(e){this.type=e}get text(){return this.content}set text(e){this.content=e}get width(){return this.lineWidth}set width(e){this.lineWidth=e}}var cr=(()=>{return(b=cr||(cr={}))[b.None=0]="None",b[b.NewLineBreak=1]="NewLineBreak",b[b.LayoutBreak=2]="LayoutBreak",b[b.FirstParagraphLine=4]="FirstParagraphLine",b[b.LastParagraphLine=8]="LastParagraphLine",cr;var b})();class Rs{constructor(e,t){this.fontStyle=wt.Regular,"number"==typeof e&&typeof t>"u"?this.fontSize=e:(this.fontSize=e,this.setStyle(t))}get name(){return this.metrics.name}get size(){return this.fontSize}get height(){return this.metrics.getHeight(null)}get style(){return this.fontStyle}set style(e){this.fontStyle=e}get bold(){return(this.style&wt.Bold)>0}get italic(){return(this.style&wt.Italic)>0}get strikeout(){return(this.style&wt.Strikeout)>0}get underline(){return(this.style&wt.Underline)>0}get metrics(){return this.fontMetrics}set metrics(e){this.fontMetrics=e}get element(){return this.pdfFontInternals}measureString(e,t,s,n,r){if("string"==typeof e&&typeof t>"u")return this.measureString(e,null);if("string"==typeof e&&(t instanceof In||null==t)&&typeof s>"u"&&typeof n>"u")return this.measureString(e,t,0,0);if("string"==typeof e&&(t instanceof In||null==t)&&"number"==typeof s&&"number"==typeof n)return this.measureString(e,0,t,s,n);if("string"==typeof e&&"number"==typeof t&&(s instanceof In||null==s)&&"number"==typeof n&&"number"==typeof r){let h=new Ei(t,0);return this.measureString(e,h,s,n,r)}{if(null==e)throw Error('ArgumentNullException("text")');let h=t,m=s,V=(new Yt).layout(e,this,m,h,!1,new Ei(0,0));return n=e.length,r=V.empty?0:V.lines.length,V.actualSize}}equalsTo(e){return this.equalsToFont(e)}getInternals(){return this.pdfFontInternals}setInternals(e){if(null==e)throw new Error("ArgumentNullException:internals");this.pdfFontInternals=e}setStyle(e){this.fontStyle=e}applyFormatSettings(e,t,s){let n=s;return null!=t&&s>0&&(0!==t.characterSpacing&&(n+=(e.length-1)*t.characterSpacing),0!==t.wordSpacing)&&(n+=js.getCharsCount(e,js.spaces)*t.wordSpacing),n}}Rs.charSizeMultiplier=.001,Rs.syncObject=new Object;class gi{constructor(e){this.streamWriter=e}get document(){return this.pdfDocument}set document(e){this.pdfDocument=e}get position(){return this.streamWriter.buffer.size}get length(){return this.streamWriter.buffer.size}get stream(){return this.streamWriter}write(e){this.streamWriter.write(e)}}var je=(()=>{return(b=je||(je={}))[b.None=0]="None",b[b.Registered=1]="Registered",je;var b})();class Re{constructor(){this.objectCollections=[],this.mainObjectCollection=new lt,this.primitiveObjectCollection=new lt}get count(){return this.objectCollections.length}items(e){return this.objectCollections[e]}get outIsNew(){return this.isNew}add(e){let t=new tt(e);this.objectCollections.push(t),this.primitiveObjectCollection.containsKey(e)||this.primitiveObjectCollection.setValue(e,this.objectCollections.length-1),e.position=this.index=this.objectCollections.length-1,e.status=je.Registered}lookFor(e){let t=-1;if(-1!==e.position)return e.position;if(this.primitiveObjectCollection.containsKey(e)&&this.count===this.primitiveObjectCollection.size())t=this.primitiveObjectCollection.getValue(e);else for(let s=this.count-1;s>=0;s--)if(this.objectCollections[s].object===e){t=s;break}return t}getReference(e,t){let s;return this.index=this.lookFor(e),this.isNew=!1,s=this.objectCollections[this.index].reference,{reference:s,wasNew:t}}trySetReference(e,t,s){return this.index=this.lookFor(e),this.objectCollections[this.index].setReference(t),!0}destroy(){for(let e of this.objectCollections)void 0!==e&&(e.pdfObject.position=-1,e.pdfObject.isSaving=void 0,e.pdfObject.objectCollectionIndex=void 0,e.pdfObject.position=void 0);this.objectCollections=[],this.mainObjectCollection=new lt,this.primitiveObjectCollection=new lt}}class tt{constructor(e,t){this.pdfObject=e,this.pdfReference=t}get object(){return this.pdfObject}set object(e){this.pdfObject=e}get reference(){return this.pdfReference}setReference(e){this.pdfReference=e}}var ci=(()=>{return(b=ci||(ci={}))[b.Free=0]="Free",b[b.Normal=1]="Normal",b[b.Packed=2]="Packed",ci;var b})();class pi extends Be{constructor(){super(),this.sections=null,this.tempDictionaryProperties=new de,this.items.setValue((new de).type,new Xe("Catalog"))}get pages(){return this.sections}set pages(e){this.sections=e,this.items.setValue(this.tempDictionaryProperties.pages,new Xt(e))}}class Fi{constructor(){this.objects=new lt,this.maxGenNumIndex=0,this.objectCount=0,this.dictionaryProperties=new de}get isMerging(){return this.merging}set isMerging(e){this.merging=e}get trailer(){return null==this.internalTrailer&&(this.internalTrailer=new oi),this.internalTrailer}get document(){return this.pdfDocument}set document(e){this.pdfDocument=e,this.items=this.pdfDocument.pdfObjects}get pdfObjects(){return this.items}get objectCollection(){return this.pdfDocument.pdfObjects}get count(){return this.objectCount}set count(e){this.objectCount=e}get nextObjNumber(){return this.count=this.count+1,this.count}save(e,t){this.saveHead(e),this.mappedReferences=null,this.objects.clear(),this.markTrailerReferences(),this.saveObjects(e);let s=this.count,n=e.position;this.registerObject(0,new zt(0,-1),!0),e.write(B.xref),e.write(B.newLine),this.saveSections(e),this.saveTrailer(e,this.count,0),this.saveTheEndess(e,n),this.count=s;for(let h=0;h<this.objectCollection.count;++h)this.objectCollection.items(h).object.isSaving=!1;if(typeof t>"u")return e.stream.buffer;e.stream.save(t)}saveTheEndess(e,t){e.write(B.newLine+B.startxref+B.newLine),e.write(t.toString()+B.newLine),e.write(B.eof+B.newLine)}saveTrailer(e,t,s){e.write(B.trailer+B.newLine);let n=this.trailer;n.items.setValue(this.dictionaryProperties.size,new ui(this.objectCount+1)),n=new Be(n),n.setEncrypt(!1),n.save(e)}saveSections(e){let t=0,s=0;do{s=this.prepareSubsection(t),this.saveSubsection(e,t,s),t+=s}while(0!==s)}saveSubsection(e,t,s){if(!(s<=0||t>=this.count)){e.write(t+" "+(s+1)+B.newLine);for(let n=t;n<=t+s;++n){let r=this.objects.getValue(n),h="";h=r.type===ci.Free?this.getItem(r.offset,65535,!0):this.getItem(r.offset,r.generation,!1),e.write(h)}}}getItem(e,t,s){let n="",r=10-e.toString().length;t<=0&&(t=0);let h=5-t.toString().length<=0?0:5-t.toString().length;for(let m=0;m<r;m++)n+="0";n=n+e.toString()+" ";for(let m=0;m<h;m++)n+="0";return n=n+t.toString()+" ",n=n+(s?B.f:B.n)+B.newLine,n}prepareSubsection(e){let s,t=0,n=this.count;for(let r=0;r<this.document.pdfObjects.count;r++)this.document.pdfObjects.items(r).reference.toString().split(" ");if(e>=n)return t;for(s=e,e=s;s<n;++s)++t;return t}markTrailerReferences(){this.trailer.items.keys(),this.trailer.items.values()}saveHead(e){let t=this.generateFileVersion(e.document);e.write("%PDF-"+t),e.write(B.newLine)}generateFileVersion(e){return"1."+4..toString()}getReference(e,t){return typeof t>"u"?this.getReference(e,!1):this.getSubReference(e,t)}getSubReference(e,t){let n,s=!1,r=null;if(this.items.count>0&&e.objectCollectionIndex>0&&this.items.count>e.objectCollectionIndex-1){let h=this.document.pdfObjects.getReference(e,n);r=h.reference,n=h.wasNew}if(n=null==r&&e.status!==je.Registered,null==r){let m;r=new zt(this.nextObjNumber,0),n?(this.document.pdfObjects.add(e),this.document.pdfObjects.trySetReference(e,r,m),this.document.pdfObjects.mainObjectCollection.setValue(this.document.pdfObjects.objectCollections[this.document.pdfObjects.count-1].reference.objNumber,this.document.pdfObjects.objectCollections[this.document.pdfObjects.count-1]),e.position=-1):this.document.pdfObjects.trySetReference(e,r,m),e.objectCollectionIndex=r.objNumber,e.status=je.None,s=!0}return r}saveObjects(e){let t=this.objectCollection;for(let s=0;s<t.count;++s){let r=t.items(s).object;r.isSaving=!0,this.saveIndirectObject(r,e)}}saveIndirectObject(e,t){let s=this.getReference(e);e instanceof pi&&this.trailer.items.setValue(this.dictionaryProperties.root,s),this.pdfDocument.currentSavingObj=s;let n=!1;n=e.getArchive(),this.registerObject(t.position,s),this.doSaveObject(e,s,t)}doSaveObject(e,t,s){s.write(t.objNumber.toString()),s.write(B.whiteSpace),s.write(t.genNumber.toString()),s.write(B.whiteSpace),s.write(B.obj),s.write(B.newLine),e.save(s),s.write(B.endObj),s.write(B.newLine)}registerObject(e,t,s){"boolean"==typeof s?(this.objects.setValue(t.objNumber,new as(e,t,s)),this.maxGenNumIndex=Math.max(this.maxGenNumIndex,t.genNumber)):typeof s>"u"&&(this.objects.setValue(t.objNumber,new as(e,t)),this.maxGenNumIndex=Math.max(this.maxGenNumIndex,t.genNumber))}static dereference(e){return null!=e&&(e=e.object),e}}class as{get objectNumber(){return this.object}get offset(){let e;return e=this.offsetNumber,e}constructor(e,t,s){this.offsetNumber=e;let r=t;this.generation=r.genNumber,this.object=r.objNumber,this.type=typeof s>"u"?ci.Normal:ci.Free}}class Es{constructor(){}}Es.letter=new Ei(612,792),Es.note=new Ei(540,720),Es.legal=new Ei(612,1008),Es.a0=new Ei(2380,3368),Es.a1=new Ei(1684,2380),Es.a2=new Ei(1190,1684),Es.a3=new Ei(842,1190),Es.a4=new Ei(595,842),Es.a5=new Ei(421,595),Es.a6=new Ei(297,421),Es.a7=new Ei(210,297),Es.a8=new Ei(148,210),Es.a9=new Ei(105,148),Es.a10=new Ei(74,105),Es.b0=new Ei(2836,4008),Es.b1=new Ei(2004,2836),Es.b2=new Ei(1418,2004),Es.b3=new Ei(1002,1418),Es.b4=new Ei(709,1002),Es.b5=new Ei(501,709),Es.archE=new Ei(2592,3456),Es.archD=new Ei(1728,2592),Es.archC=new Ei(1296,1728),Es.archB=new Ei(864,1296),Es.archA=new Ei(648,864),Es.flsa=new Ei(612,936),Es.halfLetter=new Ei(396,612),Es.letter11x17=new Ei(792,1224),Es.ledger=new Ei(1224,792);var Ns=(()=>{return(b=Ns||(Ns={}))[b.Portrait=0]="Portrait",b[b.Landscape=1]="Landscape",Ns;var b})(),bn=(()=>{return(b=bn||(bn={}))[b.RotateAngle0=0]="RotateAngle0",b[b.RotateAngle90=1]="RotateAngle90",b[b.RotateAngle180=2]="RotateAngle180",b[b.RotateAngle270=3]="RotateAngle270",bn;var b})(),pn=(()=>{return(b=pn||(pn={}))[b.None=0]="None",b[b.Numeric=1]="Numeric",b[b.LowerLatin=2]="LowerLatin",b[b.LowerRoman=3]="LowerRoman",b[b.UpperLatin=4]="UpperLatin",b[b.UpperRoman=5]="UpperRoman",pn;var b})(),ms=(()=>{return(b=ms||(ms={}))[b.None=0]="None",b[b.Bottom=1]="Bottom",b[b.Top=2]="Top",b[b.Left=3]="Left",b[b.Right=4]="Right",b[b.Fill=5]="Fill",ms;var b})(),dn=(()=>{return(b=dn||(dn={}))[b.None=0]="None",b[b.TopLeft=1]="TopLeft",b[b.TopCenter=2]="TopCenter",b[b.TopRight=3]="TopRight",b[b.MiddleLeft=4]="MiddleLeft",b[b.MiddleCenter=5]="MiddleCenter",b[b.MiddleRight=6]="MiddleRight",b[b.BottomLeft=7]="BottomLeft",b[b.BottomCenter=8]="BottomCenter",b[b.BottomRight=9]="BottomRight",dn;var b})(),Cs=(()=>{return(b=Cs||(Cs={}))[b.None=0]="None",b[b.Top=1]="Top",b[b.Bottom=2]="Bottom",b[b.Left=3]="Left",b[b.Right=4]="Right",Cs;var b})();class Yn{constructor(){this.pdfMargin=40,this.setMargins(this.pdfMargin)}get left(){return this.leftMargin}set left(e){this.leftMargin=e}get top(){return this.topMargin}set top(e){this.topMargin=e}get right(){return this.rightMargin}set right(e){this.rightMargin=e}get bottom(){return this.bottomMargin}set bottom(e){this.bottomMargin=e}set all(e){this.setMargins(e)}setMargins(e,t,s,n){typeof t>"u"?this.leftMargin=this.topMargin=this.rightMargin=this.bottomMargin=e:typeof s>"u"?(this.leftMargin=this.rightMargin=e,this.bottomMargin=this.topMargin=t):(this.leftMargin=e,this.topMargin=t,this.rightMargin=s,this.bottomMargin=n)}clone(){return this}}class Ln{constructor(e){this.pageMargins=new Yn,this.pageSize=Es.a4,this.rotateAngle=bn.RotateAngle0,this.pageOrientation=Ns.Portrait,this.pageOrigin=new hi(0,0),this.isRotation=!1,"number"==typeof e&&this.pageMargins.setMargins(e)}get size(){return this.pageSize}set size(e){this.setSize(e)}get orientation(){return this.pageOrientation}set orientation(e){this.pageOrientation!==e&&(this.pageOrientation=e,this.updateSize(e))}get margins(){return this.pageMargins}set margins(e){this.pageMargins=e}get width(){return this.pageSize.width}set width(e){this.pageSize.width=e}get height(){return this.pageSize.height}set height(e){this.pageSize.height=e}get origin(){return this.pageOrigin}set origin(e){this.pageOrigin=e}get rotate(){return this.rotateAngle}set rotate(e){this.rotateAngle=e,this.isRotation=!0}updateSize(e){let t=Math.min(this.pageSize.width,this.pageSize.height),s=Math.max(this.pageSize.width,this.pageSize.height);switch(e){case Ns.Portrait:this.pageSize=new Ei(t,s);break;case Ns.Landscape:this.pageSize=new Ei(s,t)}}clone(){return this.pageMargins=this.pageMargins.clone(),this}getActualSize(){return new Ei(this.width-(this.margins.left+this.margins.right),this.height-(this.margins.top+this.margins.bottom))}setSize(e){let t=Math.min(e.width,e.height),s=Math.max(e.width,e.height);this.pageSize=this.orientation===Ns.Portrait?new Ei(t,s):new Ei(s,t)}}class Rr{constructor(e){if(null==e)throw new Error("ArgumentNullException:stream");this.stream=e}clear(){this.stream.clearStream()}setGraphicsState(e){e instanceof Xe?(this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.writeOperator(B.setGraphicsState)):(this.stream.write(B.slash),this.stream.write(e),this.stream.write(B.whiteSpace),this.writeOperator(B.setGraphicsState))}executeObject(e){this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.writeOperator(B.paintXObject),this.stream.write(B.newLine)}closePath(){this.writeOperator(B.closePath)}clipPath(e){this.stream.write(B.clipPath),e&&this.stream.write(B.evenOdd),this.stream.write(B.whiteSpace),this.stream.write(B.endPath),this.stream.write(B.newLine)}closeFillStrokePath(e){this.stream.write(B.closeFillStrokePath),e?(this.stream.write(B.evenOdd),this.stream.write(B.newLine)):this.stream.write(B.newLine)}fillStrokePath(e){this.stream.write(B.fillStroke),e?(this.stream.write(B.evenOdd),this.stream.write(B.newLine)):this.stream.write(B.newLine)}fillPath(e){this.stream.write(B.fill),e?(this.stream.write(B.evenOdd),this.stream.write(B.newLine)):this.stream.write(B.newLine)}endPath(){this.writeOperator(B.n)}closeFillPath(e){this.writeOperator(B.closePath),this.stream.write(B.fill),e?(this.stream.write(B.evenOdd),this.stream.write(B.newLine)):this.stream.write(B.newLine)}closeStrokePath(){this.writeOperator(B.closeStrokePath)}setTextScaling(e){this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),this.writeOperator(B.setTextScaling)}strokePath(){this.writeOperator(B.stroke)}restoreGraphicsState(){this.writeOperator(B.restoreState)}saveGraphicsState(){this.writeOperator(B.saveState)}startNextLine(e,t){typeof e>"u"?this.writeOperator(B.goToNextLine):e instanceof hi?(this.writePoint(e),this.writeOperator(B.setCoords)):(this.writePoint(e,t),this.writeOperator(B.setCoords))}showText(e){this.checkTextParam(e),this.writeText(e),this.writeOperator(B.setText)}setLeading(e){this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),this.writeOperator(B.setTextLeading)}beginPath(e,t){this.writePoint(e,t),this.writeOperator(B.beginPath)}beginText(){this.writeOperator(B.beginText)}endText(){this.writeOperator(B.endText)}appendRectangle(e,t,s,n){e instanceof Ui?this.appendRectangle(e.x,e.y,e.width,e.height):(this.writePoint(e,t),this.writePoint(s,n),this.writeOperator(B.appendRectangle))}appendLineSegment(e,t){e instanceof hi?this.appendLineSegment(e.x,e.y):(this.writePoint(e,t),this.writeOperator(B.appendLineSegment))}setTextRenderingMode(e){this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.writeOperator(B.setRenderingMode)}setCharacterSpacing(e){this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),this.stream.write(B.setCharacterSpace),this.stream.write(B.newLine)}setWordSpacing(e){this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),this.writeOperator(B.setWordSpace)}showNextLineText(e,t){e instanceof et?(this.checkTextParam(e),this.writeText(e),this.writeOperator(B.setTextOnNewLine)):(this.checkTextParam(e),this.writeText(e,t),this.writeOperator(B.setTextOnNewLine))}setColorSpace(e,t){if(e instanceof Xe&&"boolean"==typeof t){let r=t?B.selectcolorspaceforstroking:B.selectcolorspacefornonstroking;this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.stream.write(r),this.stream.write(B.newLine)}else{let n=t;this.setColorSpace(new Xe(e),n)}}modifyCtm(e){if(null==e)throw new Error("ArgumentNullException:matrix");this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.writeOperator(B.modifyCtm)}setFont(e,t,s){if("string"==typeof t)this.setFont(e,new Xe(t),s);else{if(null==e)throw new Error("ArgumentNullException:font");this.stream.write(t.toString()),this.stream.write(B.whiteSpace),this.stream.write(ui.floatToString(s)),this.stream.write(B.whiteSpace),this.writeOperator(B.setFont)}}writeOperator(e){this.stream.write(e),this.stream.write(B.newLine)}checkTextParam(e){if(null==e)throw new Error("ArgumentNullException:text");if("string"==typeof e&&""===e)throw new Error("ArgumentException:The text can not be an empty string, text")}writeText(e,t){if(e instanceof et&&typeof t>"u")this.stream.write(e.pdfEncode());else{let s,n;t?(s=et.hexStringMark[0],n=et.hexStringMark[1]):(s=et.stringMark[0],n=et.stringMark[1]),this.stream.write(s),this.stream.write(e),this.stream.write(n)}}writePoint(e,t){e instanceof hi&&typeof t>"u"?this.writePoint(e.x,e.y):(this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),t=this.updateY(t),this.stream.write(ui.floatToString(t)),this.stream.write(B.whiteSpace))}updateY(e){return-e}write(e){let t="";t+=e,t+=B.newLine,this.writeOperator(t)}writeComment(e){if(!(null!=e&&e.length>0))throw new Error("Invalid comment");{let t="";t+=B.comment,t+=B.whiteSpace,t+=e,this.writeOperator(t)}}setColorAndSpace(e,t,s){e.isEmpty||(this.stream.write(e.toString(t,s)),this.stream.write(B.newLine))}setLineDashPattern(e,t){this.setLineDashPatternHelper(e,t)}setLineDashPatternHelper(e,t){let s="[";if(e.length>1)for(let n=0;n<e.length;n++)s+=n===e.length-1?e[n].toString():e[n].toString()+" ";s+="] ",s+=t.toString(),s+=" "+B.setDashPattern,this.stream.write(s),this.stream.write(B.newLine)}setMiterLimit(e){this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),this.writeOperator(B.setMiterLimit)}setLineWidth(e){this.stream.write(ui.floatToString(e)),this.stream.write(B.whiteSpace),this.writeOperator(B.setLineWidth)}setLineCap(e){this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.writeOperator(B.setLineCapStyle)}setLineJoin(e){this.stream.write(e.toString()),this.stream.write(B.whiteSpace),this.writeOperator(B.setLineJoinStyle)}get position(){return this.stream.position}get length(){let e=0;if(0!==this.stream.data.length&&-1!==this.stream.data.length)for(let t=0;t<this.stream.data.length;t++)e+=this.stream.data[t].length;return e}get document(){return null}appendBezierSegment(e,t,s,n,r,h){e instanceof hi&&t instanceof hi&&s instanceof hi?(this.writePoint(e.x,e.y),this.writePoint(t.x,t.y),this.writePoint(s.x,s.y)):(this.writePoint(e,t),this.writePoint(s,n),this.writePoint(r,h)),this.writeOperator(B.appendbeziercurve)}setColourWithPattern(e,t,s){if(null!=e){let n=e.length,r=0;for(r=0;r<n;++r)this.stream.write(e[r].toString()),this.stream.write(B.whiteSpace)}null!=t&&(this.stream.write(t.toString()),this.stream.write(B.whiteSpace)),this.writeOperator(s?B.setColorAndPatternStroking:B.setColorAndPattern)}}class rs{constructor(e,t){this.pdfColor=new ot(0,0,0),this.dashOffsetValue=0,this.penDashPattern=[0],this.pdfDashStyle=At.Solid,this.pdfLineCap=0,this.pdfLineJoin=0,this.penWidth=1,this.internalMiterLimit=0,this.colorSpace=Oi.Rgb,e instanceof bs?this.setBrush(e):e instanceof ot&&(this.color=e),"number"==typeof t&&(this.width=t)}get color(){return this.pdfColor}set color(e){this.pdfColor=e}get dashOffset(){return typeof this.dashOffsetValue>"u"||null==this.dashOffsetValue?0:this.dashOffsetValue}set dashOffset(e){this.dashOffsetValue=e}get dashPattern(){return this.penDashPattern}set dashPattern(e){this.penDashPattern=e}get dashStyle(){return this.pdfDashStyle}set dashStyle(e){if(this.pdfDashStyle!==e)switch(this.pdfDashStyle=e,this.pdfDashStyle){case At.Custom:break;case At.Dash:this.penDashPattern=[3,1];break;case At.Dot:this.penDashPattern=[1,1];break;case At.DashDot:this.penDashPattern=[3,1,1,1];break;case At.DashDotDot:this.penDashPattern=[3,1,1,1,1,1];break;case At.Solid:break;default:this.pdfDashStyle=At.Solid,this.penDashPattern=[0]}}get lineCap(){return this.pdfLineCap}set lineCap(e){this.pdfLineCap=e}get lineJoin(){return this.pdfLineJoin}set lineJoin(e){this.pdfLineJoin=e}get miterLimit(){return this.internalMiterLimit}set miterLimit(e){this.internalMiterLimit=e}get width(){return this.penWidth}set width(e){this.penWidth=e}clone(){return this}setBrush(e){let t=e;null!=t&&t instanceof kt&&(this.color=t.color,this.pdfBrush=t),this.color=t.color,this.pdfBrush=t}monitorChanges(e,t,s,n,r,h){let m=!1;null==e&&(m=!0),m=this.dashControl(e,!0,t),t.setLineWidth(this.width),t.setLineJoin(this.lineJoin),t.setLineCap(this.lineCap);let T=this.miterLimit;return T>0&&(t.setMiterLimit(T),m=!0),t.setColorAndSpace(this.color,r,!0),m=!0,m}dashControl(e,t,s){let n=this.width,r=this.getPattern();return s.setLineDashPattern(r,this.dashOffset*n),!0}getPattern(){let e=this.dashPattern;for(let t=0;t<e.length;++t)e[t]*=this.width;return e}}class hn{constructor(e){this.radDegFactor=180/Math.PI,this.transformationMatrix=new cn(1,0,0,typeof e>"u"?1:-1,0,0)}get matrix(){return this.transformationMatrix}set matrix(e){this.transformationMatrix=e}translate(e,t){this.transformationMatrix.translate(e,t)}scale(e,t){this.transformationMatrix.elements[0]=e,this.transformationMatrix.elements[3]=t}rotate(e){e=e*Math.PI/180,this.transformationMatrix.elements[0]=Math.cos(e),this.transformationMatrix.elements[1]=Math.sin(e),this.transformationMatrix.elements[2]=-Math.sin(e),this.transformationMatrix.elements[3]=Math.cos(e)}toString(){let e="";for(let s=0,n=this.transformationMatrix.elements.length;s<n;s++)e+=ui.floatToString(this.transformationMatrix.elements[s]),e+=" ";return e}multiply(e){this.transformationMatrix.multiply(e.matrix)}static degreesToRadians(e){return this.degRadFactor*e}radiansToDegrees(e){return this.radDegFactor*e}clone(){return this}}hn.degRadFactor=Math.PI/180;class cn{constructor(e,t,s,n,r,h){typeof e>"u"?this.metrixElements=[]:"number"==typeof e?(this.metrixElements=[],this.metrixElements.push(e),this.metrixElements.push(t),this.metrixElements.push(s),this.metrixElements.push(n),this.metrixElements.push(r),this.metrixElements.push(h)):this.metrixElements=e}get elements(){return this.metrixElements}get offsetX(){return this.metrixElements[4]}get offsetY(){return this.metrixElements[5]}translate(e,t){this.metrixElements[4]=e,this.metrixElements[5]=t}transform(e){let t=e.x,s=e.y;return new hi(t*this.elements[0]+s*this.elements[2]+this.offsetX,t*this.elements[1]+s*this.elements[3]+this.offsetY)}multiply(e){let t=[];t.push(this.elements[0]*e.elements[0]+this.elements[1]*e.elements[2]),t[1]=this.elements[0]*e.elements[1]+this.elements[1]*e.elements[3],t[2]=this.elements[2]*e.elements[0]+this.elements[3]*e.elements[2],t[3]=this.elements[2]*e.elements[1]+this.elements[3]*e.elements[3],t[4]=this.offsetX*e.elements[0]+this.offsetY*e.elements[2]+e.offsetX,t[5]=this.offsetX*e.elements[1]+this.offsetY*e.elements[3]+e.offsetY;for(let s=0;s<t.length;s++)this.elements[s]=t[s]}dispose(){this.metrixElements=null}clone(){return new cn(this.metrixElements)}}class ln{constructor(){this.pdf="PDF",this.text="Text",this.imageB="ImageB",this.imageC="ImageC",this.imageI="ImageI"}}class qn{constructor(){this.mKeys=[],this.mValues=[]}size(){return this.mKeys.length}add(e,t){if(null==e||null==t)throw new ReferenceError("Provided key or value is not valid.");if(this.mKeys.indexOf(e)<0)return this.mKeys.push(e),this.mValues.push(t),1;throw new RangeError("An item with the same key has already been added.")}keys(){return this.mKeys}values(){return this.mValues}getValue(e){if(null==e)throw new ReferenceError("Provided key is not valid.");let t=this.mKeys.indexOf(e);if(t<0)throw new RangeError("No item with the specified key has been added.");return this.mValues[t]}setValue(e,t){if(null==e)throw new ReferenceError("Provided key is not valid.");let s=this.mKeys.indexOf(e);s<0?(this.mKeys.push(e),this.mValues.push(t)):this.mValues[s]=t}remove(e){if(null==e)throw new ReferenceError("Provided key is not valid.");let t=this.mKeys.indexOf(e);if(t<0)throw new RangeError("No item with the specified key has been added.");return this.mKeys.splice(t,1),this.mValues.splice(t,1),!0}containsKey(e){if(null==e)throw new ReferenceError("Provided key is not valid.");return!(this.mKeys.indexOf(e)<0)}clear(){this.mKeys=[],this.mValues=[]}}class $n{constructor(e,t,s){this.dictionary=new Be,this.dictionaryProperties=new de,this.dictionary.items.setValue(this.dictionaryProperties.CA,new ui(e)),this.dictionary.items.setValue(this.dictionaryProperties.ca,new ui(t)),this.dictionary.items.setValue(this.dictionaryProperties.BM,new Xe(s.toString()))}get element(){return this.dictionary}}class gr{constructor(){this.automaticFieldsInformation=[]}get automaticFields(){return this.automaticFieldsInformation}add(e){return this.automaticFields.push(e)}}class mr extends class tn{constructor(){}drawHelper(e,t,s){let n=0!==t||0!==s,r=null;n&&(r=e.save(),e.translateTransform(t,s)),this.drawInternal(e),n&&e.restore(r)}}{constructor(){super(),this.internalBounds=new Ui(0,0,0,0),this.internalTemplateSize=new Ei(0,0)}get bounds(){return this.internalBounds}set bounds(e){this.internalBounds=e}get size(){return new Ei(this.bounds.width,this.bounds.height)}set size(e){this.bounds.width=e.width,this.bounds.height=e.height}get location(){return new hi(this.bounds.x,this.bounds.y)}set location(e){this.bounds.x=e.x,this.bounds.y=e.y}get font(){return this.internalFont}set font(e){this.internalFont=e}get brush(){return this.internalBrush}set brush(e){this.internalBrush=e}get pen(){return this.internalPen}set pen(e){this.internalPen=e}get stringFormat(){return this.internalStringFormat}set stringFormat(e){this.internalStringFormat=e}performDrawHelper(e,t,s,n){if(0===this.bounds.height||0===this.bounds.width){let r=this.getValue(e);this.internalTemplateSize=this.getFont().measureString(r,this.size,this.stringFormat)}}draw(e,t,s){if(typeof t>"u"){let n=new hi(0,0);this.draw(e,n)}else if(t instanceof hi)this.draw(e,t.x,t.y);else{this.drawHelper(e,t,s);let n=new Cn(this,new hi(t,s));e.automaticFields.add(n)}}getSize(){return 0===this.bounds.height||0===this.bounds.width?this.internalTemplateSize:this.size}drawInternal(e){}getBrush(){return typeof this.internalBrush>"u"||null==this.internalBrush?new kt(new ot(0,0,0)):this.internalBrush}getFont(){return typeof this.internalFont>"u"||null==this.internalFont?I.defaultFont:this.internalFont}getPageFromGraphics(e){return typeof e.page<"u"&&null!==e.page?e.page:e.currentPage}}class Cn{constructor(e,t,s,n){this.pageNumberFieldLocation=new hi,this.pageNumberField=null,this.scaleX=1,this.scaleY=1,typeof t>"u"&&e instanceof Cn?(this.pageNumberField=e.field,this.pageNumberFieldLocation=e.location,this.scaleX=e.scalingX,this.scaleY=e.scalingY):typeof s>"u"&&t instanceof hi&&e instanceof mr?(this.pageNumberField=e,this.pageNumberFieldLocation=t):(this.pageNumberField=e,this.pageNumberFieldLocation=t,this.scaleX=s,this.scaleY=n)}get location(){return this.pageNumberFieldLocation}set location(e){this.pageNumberFieldLocation=e}get field(){return this.pageNumberField}set field(e){this.pageNumberField=e}get scalingX(){return this.scaleX}set scalingX(e){this.scaleX=e}get scalingY(){return this.scaleY}set scalingY(e){this.scaleY=e}}class wr{constructor(e){this.mPosition=0,this.buffer=new Uint8Array(e),this.dataView=new DataView(this.buffer.buffer)}get position(){return this.mPosition}set position(e){this.mPosition=e}read(e,t,s){for(let n=t;n<s;n++)e.buffer[n]=this.readByte(this.position),this.position++}getBuffer(e){return this.buffer[e]}writeFromBase64String(e){let t=this.encodedString(e);this.buffer=t}encodedString(e){let s,n,r,h,m,T,V,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Y=0,se=0,ge=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;e.charAt(e.length-1)===t.charAt(64)&&ge--;let ke=new Uint8Array(0|ge);for(;Y<e.length;)h=t.indexOf(e.charAt(Y++)),m=t.indexOf(e.charAt(Y++)),T=t.indexOf(e.charAt(Y++)),V=t.indexOf(e.charAt(Y++)),s=h<<2|m>>4,n=(15&m)<<4|T>>2,r=(3&T)<<6|V,ke[se++]=s,ke[se++]=n,ke[se++]=r;return ke}readByte(e){return this.buffer[e]}get internalBuffer(){return this.buffer}get count(){return this.buffer.byteLength}readNextTwoBytes(e){let t=e.readByte(this.position);return this.position++,t<<=8,t|=e.readByte(this.position),this.position++,t}}class ro{constructor(e){this.currentPosition=-1,this.value=e}get status(){return this.objectStatus}set status(e){this.objectStatus=e}get isSaving(){return this.saving}set isSaving(e){this.saving=e}get objectCollectionIndex(){return this.index}set objectCollectionIndex(e){this.index=e}get position(){return this.currentPosition}set position(e){this.currentPosition=e}get clonedObject(){return null}save(e){e.write(this.boolToStr(this.value))}clone(e){return new ro(this.value)}boolToStr(e){return e?"true":"false"}}var Br=(()=>{return(b=Br||(Br={}))[b.Unknown=0]="Unknown",b[b.Bmp=1]="Bmp",b[b.Emf=2]="Emf",b[b.Gif=3]="Gif",b[b.Jpeg=4]="Jpeg",b[b.Png=5]="Png",b[b.Wmf=6]="Wmf",b[b.Icon=7]="Icon",Br;var b})();let Jr=(()=>{class b{constructor(t){this.sof1Marker=193,this.sof2Marker=194,this.sof3Marker=195,this.sof5Marker=197,this.sof6Marker=198,this.sof7Marker=199,this.sof9Marker=201,this.sof10Marker=202,this.sof11Marker=203,this.sof13Marker=205,this.sof14Marker=206,this.sof15Marker=207,this.mFormat=Br.Unknown,this.mbitsPerComponent=8,this.dictionaryProperties=new de,this.mStream=t,this.initialize()}get height(){return this.mHeight}get width(){return this.mWidth}get bitsPerComponent(){return this.mbitsPerComponent}get size(){return this.mImageData.count}get imageData(){return this.mImageData}get imageDataAsNumberArray(){return this.mImageData.internalBuffer.buffer}initialize(){this.mFormat===Br.Unknown&&this.checkIfJpeg()&&(this.mFormat=Br.Jpeg,this.parseJpegImage()),this.reset(),this.mImageData=new wr(this.mStream.count),this.mStream.read(this.mImageData,0,this.mImageData.count)}reset(){this.mStream.position=0}parseJpegImage(){this.reset();let t=new wr(this.mStream.count);this.mStream.read(t,0,t.count);let s=4,n=!1,r=256*t.getBuffer(s)+t.getBuffer(s+1);for(;s<t.count;){if(s+=r,!(s<t.count)){n=!0;break}if(192===t.getBuffer(s+1))return this.mHeight=256*t.getBuffer(s+5)+t.getBuffer(s+6),void(this.mWidth=256*t.getBuffer(s+7)+t.getBuffer(s+8));s+=2,r=256*t.getBuffer(s)+t.getBuffer(s+1)}n&&(this.mStream.position=0,this.skip(this.mStream,2),this.readExceededJPGImage(this.mStream))}get format(){return this.mFormat}checkIfJpeg(){this.reset();for(let t=0;t<b.mJpegHeader.length;t++){if(b.mJpegHeader[t]!==this.mStream.readByte(t))return!1;this.mStream.position++}return!0}getImageDictionary(){if(this.mFormat===Br.Jpeg){this.imageStream=new oi,this.imageStream.isImage=!0;let s="",n="";for(let r=0;r<this.imageDataAsNumberArray.byteLength;r++)s+=String.fromCharCode(null,this.mStream.readByte(r));for(let r=0;r<s.length;r++)r%2!=0&&(n+=s[r]);return this.imageStream.data=[n],this.imageStream.compress=!1,this.imageStream.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.xObject)),this.imageStream.items.setValue(this.dictionaryProperties.subtype,new Xe(this.dictionaryProperties.image)),this.imageStream.items.setValue(this.dictionaryProperties.width,new ui(this.width)),this.imageStream.items.setValue(this.dictionaryProperties.height,new ui(this.height)),this.imageStream.items.setValue(this.dictionaryProperties.bitsPerComponent,new ui(this.bitsPerComponent)),this.imageStream.items.setValue(this.dictionaryProperties.filter,new Xe(this.dictionaryProperties.dctdecode)),this.imageStream.items.setValue(this.dictionaryProperties.colorSpace,new Xe(this.getColorSpace())),this.imageStream.items.setValue(this.dictionaryProperties.decodeParms,this.getDecodeParams()),this.imageStream}return this.imageStream}getColorSpace(){return this.dictionaryProperties.deviceRgb}getDecodeParams(){let t=new Be;return t.items.setValue(this.dictionaryProperties.columns,new ui(this.width)),t.items.setValue(this.dictionaryProperties.blackIs1,new ro(!0)),t.items.setValue(this.dictionaryProperties.k,new ui(-1)),t.items.setValue(this.dictionaryProperties.predictor,new ui(15)),t.items.setValue(this.dictionaryProperties.bitsPerComponent,new ui(this.bitsPerComponent)),t}readExceededJPGImage(t){this.mStream=t;let s=!0;for(;s;)switch(this.getMarker(t)){case this.sof1Marker:case this.sof2Marker:case this.sof3Marker:case this.sof5Marker:case this.sof6Marker:case this.sof7Marker:case this.sof9Marker:case this.sof10Marker:case this.sof11Marker:case this.sof13Marker:case this.sof14Marker:case this.sof15Marker:t.position+=3,this.mHeight=this.mStream.readNextTwoBytes(t),this.mWidth=this.mStream.readNextTwoBytes(t),s=!1;break;default:this.skipStream(t)}}skip(t,s){this.mStream=t;let n=new wr(s);this.mStream.read(n,0,n.count)}getMarker(t){let s=32;for(s=t.readByte(this.mStream.position),t.position++;255!==s;)s=t.readByte(this.mStream.position),t.position++;do{s=t.readByte(this.mStream.position),t.position++}while(255===s);return s}skipStream(t){let s=this.mStream.readNextTwoBytes(t)-2;s>0&&(t.position+=s)}}return b.mPngHeader=[137,80,78,71,13,10,26,10],b.mJpegHeader=[255,216],b.GIF_HEADER="G,I,F,8",b.BMP_HEADER="B,M",b})(),Nr=(()=>{class b{constructor(t){this.updateProportionsHelper(t)}convertUnits(t,s,n){return this.convertFromPixels(this.convertToPixels(t,s),n)}convertToPixels(t,s){return t*this.proportions[s]}convertFromPixels(t,s){return t/this.proportions[s]}updateProportionsHelper(t){this.proportions=[t/2.54,t/6,1,t/72,t,t/300,t/25.4]}}return b.horizontalResolution=96,b.verticalResolution=96,b})();class Vr{get width(){return this.imageWidth}set width(e){this.imageWidth=e}get height(){return this.imageHeight}set height(e){this.imageHeight=e}set size(e){this.width=e.width,this.height=e.height}get physicalDimension(){return this.imagePhysicalDimension=this.getPointSize(this.width,this.height,this.horizontalResolution,this.verticalResolution),new Ei(this.width,this.height)}get element(){return this.imageStream}getPointSize(e,t,s,n){if(typeof s>"u")return this.getPointSize(e,t,Nr.horizontalResolution,Nr.verticalResolution);{let r=new Nr(s),h=new Nr(n),m=r.convertUnits(e,Dt.Pixel,Dt.Point),T=h.convertUnits(t,Dt.Pixel,Dt.Point);return new Ei(m,T)}}}class Zn extends Vr{constructor(e){super(),this.imageStatus=!0,this.dictionaryProperties=new de,this.loadImage(e)}loadImage(e){this.initializeAsync(e)}initializeAsync(e){let t=new wr(e.length);t.writeFromBase64String(e),this.decoder=new Jr(t),this.height=this.decoder.height,this.width=this.decoder.width,this.bitsPerComponent=this.decoder.bitsPerComponent}save(){this.imageStatus=!0,this.imageStream=this.decoder.getImageDictionary()}}class _r{get empty(){return this.offset===this.length&&this.length===this.checksum&&0===this.checksum}}class Ur{}class Hr{}class Bi{}class Vn{get isItalic(){return 0!=(2&this.macStyle)}get isBold(){return 0!=(1&this.macStyle)}}class co{}class os{}class Io{}class Xn{}class sr{}class zn{}class Er{get empty(){return this.index===this.width&&this.width===this.charCode&&0===this.charCode}compareTo(e){return this.index-e.index}}class to{}class Eo{}class Vs{}class Ro{}class bo{}class yr{constructor(e){this.int32Size=4,this.int16Size=2,this.int64Size=8,this.bufferLength=e,this.buffer=[]}get data(){if(this.buffer.length<this.bufferLength){let e=this.bufferLength-this.buffer.length;for(let t=0;t<e;t++)this.buffer.push(0)}return this.buffer}get position(){return null==this.internalPosition&&(this.internalPosition=0),this.internalPosition}writeShort(e){this.flush([(65280&e)>>8,255&e])}writeInt(e){this.flush([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}writeUInt(e){this.flush([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}writeString(e){if(null==e)throw new Error("Argument Null Exception : value");let t=[];for(let s=0;s<e.length;s++)t.push(e.charCodeAt(s));this.flush(t)}writeBytes(e){this.flush(e)}flush(e){if(null===e)throw new Error("Argument Null Exception : buff");let t=this.position;for(let s=0;s<e.length;s++)this.buffer[t]=e[s],t++;this.internalPosition+=e.length}}class Fo{constructor(e){this.int32Size=4,this.isTtcFont=!1,this.isMacTtf=!1,this.metricsName="",this.isMacTTF=!1,this.missedGlyphs=0,this.tableNames=["cvt ","fpgm","glyf","head","hhea","hmtx","loca","maxp","prep"],this.entrySelectors=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4],this.fontData=e,this.initialize()}get macintosh(){return null==this.macintoshDictionary&&(this.macintoshDictionary=new lt),this.macintoshDictionary}get microsoft(){return null==this.microsoftDictionary&&(this.microsoftDictionary=new lt),this.microsoftDictionary}get macintoshGlyphs(){return null==this.internalMacintoshGlyphs&&(this.internalMacintoshGlyphs=new lt),this.internalMacintoshGlyphs}get microsoftGlyphs(){return null==this.internalMicrosoftGlyphs&&(this.internalMicrosoftGlyphs=new lt),this.internalMicrosoftGlyphs}initialize(){void 0===this.metrics&&(this.metrics=new Vn),this.readFontDictionary();let e=this.readNameTable(),t=this.readHeadTable();this.initializeFontName(e),this.metrics.macStyle=t.macStyle}readFontDictionary(){this.offset=0,this.checkPreambula();let t=this.readInt16(this.offset);this.readInt16(this.offset),this.readInt16(this.offset),this.readInt16(this.offset),void 0===this.tableDirectory&&(this.tableDirectory=new lt);for(let h=0;h<t;++h){let m=new _r,T=this.readString(this.int32Size);m.checksum=this.readInt32(this.offset),m.offset=this.readInt32(this.offset),m.length=this.readInt32(this.offset),this.tableDirectory.setValue(T,m)}this.lowestPosition=this.offset,this.isTtcFont||this.fixOffsets()}fixOffsets(){let e=Number.MAX_VALUE,t=this.tableDirectory.keys();for(let n=0;n<t.length;n++){let h=this.tableDirectory.getValue(t[n]).offset;if(e>h&&(e=h,e<=this.lowestPosition))break}let s=e-this.lowestPosition;if(0!==s){let n=new lt;for(let r=0;r<t.length;r++){let h=this.tableDirectory.getValue(t[r]);h.offset-=s,n.setValue(t[r],h)}this.tableDirectory=n}}checkPreambula(){let e=this.readInt32(this.offset);if(this.isMacTtf=1953658213===e,65536!==e&&1953658213!==e&&1330926671!==e){if(this.isTtcFont=!0,this.offset=0,"ttcf"!==this.readString(4))throw new Error("Can not read TTF font data");if(this.offset+=4,this.readInt32(this.offset)<0)throw new Error("Can not read TTF font data");this.offset=this.readInt32(this.offset),e=this.readInt32(this.offset)}return e}readNameTable(){let e=this.getTable("name");this.offset=e.offset;let t=new Ur;t.formatSelector=this.readUInt16(this.offset),t.recordsCount=this.readUInt16(this.offset),t.offset=this.readUInt16(this.offset),t.nameRecords=[];let n=this.offset;for(let r=0;r<t.recordsCount;r++){this.offset=n;let h=new Hr;h.platformID=this.readUInt16(this.offset),h.encodingID=this.readUInt16(this.offset),h.languageID=this.readUInt16(this.offset),h.nameID=this.readUInt16(this.offset),h.length=this.readUInt16(this.offset),h.offset=this.readUInt16(this.offset),this.offset=e.offset+t.offset+h.offset,h.name=this.readString(h.length,0===h.platformID||3===h.platformID),t.nameRecords[r]=h,n+=12}return t}readHeadTable(){let e=this.getTable("head");this.offset=e.offset;let t=new Bi;return t.version=this.readFixed(this.offset),t.fontRevision=this.readFixed(this.offset),t.checkSumAdjustment=this.readUInt32(this.offset),t.magicNumber=this.readUInt32(this.offset),t.flags=this.readUInt16(this.offset),t.unitsPerEm=this.readUInt16(this.offset),t.created=this.readInt64(this.offset),t.modified=this.readInt64(this.offset),t.xMin=this.readInt16(this.offset),t.yMin=this.readInt16(this.offset),t.xMax=this.readInt16(this.offset),t.yMax=this.readInt16(this.offset),t.macStyle=this.readUInt16(this.offset),t.lowestReadableSize=this.readUInt16(this.offset),t.fontDirectionHint=this.readInt16(this.offset),t.indexToLocalFormat=this.readInt16(this.offset),t.glyphDataFormat=this.readInt16(this.offset),t}readHorizontalHeaderTable(){let e=this.getTable("hhea");this.offset=e.offset;let t=new co;return t.version=this.readFixed(this.offset),t.ascender=this.readInt16(this.offset),t.descender=this.readInt16(this.offset),t.lineGap=this.readInt16(this.offset),t.advanceWidthMax=this.readUInt16(this.offset),t.minLeftSideBearing=this.readInt16(this.offset),t.minRightSideBearing=this.readInt16(this.offset),t.xMaxExtent=this.readInt16(this.offset),t.caretSlopeRise=this.readInt16(this.offset),t.caretSlopeRun=this.readInt16(this.offset),this.offset+=10,t.metricDataFormat=this.readInt16(this.offset),t.numberOfHMetrics=this.readUInt16(this.offset),t}readOS2Table(){let e=this.getTable("OS/2");this.offset=e.offset;let t=new os;return t.version=this.readUInt16(this.offset),t.xAvgCharWidth=this.readInt16(this.offset),t.usWeightClass=this.readUInt16(this.offset),t.usWidthClass=this.readUInt16(this.offset),t.fsType=this.readInt16(this.offset),t.ySubscriptXSize=this.readInt16(this.offset),t.ySubscriptYSize=this.readInt16(this.offset),t.ySubscriptXOffset=this.readInt16(this.offset),t.ySubscriptYOffset=this.readInt16(this.offset),t.ySuperscriptXSize=this.readInt16(this.offset),t.ySuperscriptYSize=this.readInt16(this.offset),t.ySuperscriptXOffset=this.readInt16(this.offset),t.ySuperscriptYOffset=this.readInt16(this.offset),t.yStrikeoutSize=this.readInt16(this.offset),t.yStrikeoutPosition=this.readInt16(this.offset),t.sFamilyClass=this.readInt16(this.offset),t.panose=this.readBytes(10),t.ulUnicodeRange1=this.readUInt32(this.offset),t.ulUnicodeRange2=this.readUInt32(this.offset),t.ulUnicodeRange3=this.readUInt32(this.offset),t.ulUnicodeRange4=this.readUInt32(this.offset),t.vendorIdentifier=this.readBytes(4),t.fsSelection=this.readUInt16(this.offset),t.usFirstCharIndex=this.readUInt16(this.offset),t.usLastCharIndex=this.readUInt16(this.offset),t.sTypoAscender=this.readInt16(this.offset),t.sTypoDescender=this.readInt16(this.offset),t.sTypoLineGap=this.readInt16(this.offset),t.usWinAscent=this.readUInt16(this.offset),t.usWinDescent=this.readUInt16(this.offset),t.ulCodePageRange1=this.readUInt32(this.offset),t.ulCodePageRange2=this.readUInt32(this.offset),t.version>1?(t.sxHeight=this.readInt16(this.offset),t.sCapHeight=this.readInt16(this.offset),t.usDefaultChar=this.readUInt16(this.offset),t.usBreakChar=this.readUInt16(this.offset),t.usMaxContext=this.readUInt16(this.offset)):(t.sxHeight=0,t.sCapHeight=0,t.usDefaultChar=0,t.usBreakChar=0,t.usMaxContext=0),t}readPostTable(){let e=this.getTable("post");this.offset=e.offset;let t=new Io;return t.formatType=this.readFixed(this.offset),t.italicAngle=this.readFixed(this.offset),t.underlinePosition=this.readInt16(this.offset),t.underlineThickness=this.readInt16(this.offset),t.isFixedPitch=this.readUInt32(this.offset),t.minType42=this.readUInt32(this.offset),t.maxType42=this.readUInt32(this.offset),t.minType1=this.readUInt32(this.offset),t.maxType1=this.readUInt32(this.offset),t}readWidthTable(e,t){let s=this.getTable("hmtx");this.offset=s.offset;let n=[];for(let r=0;r<e;r++){let h=new Xn;h.advanceWidth=this.readUInt16(this.offset),h.lsb=this.readInt16(this.offset),n.push(Math.floor(1e3*h.advanceWidth/t))}return n}readCmapTable(){let e=this.getTable("cmap");this.offset=e.offset;let t=new zn;t.version=this.readUInt16(this.offset),t.tablesCount=this.readUInt16(this.offset);let s=this.offset,n=[];for(let r=0;r<t.tablesCount;r++){this.offset=s;let h=new sr;h.platformID=this.readUInt16(this.offset),h.encodingID=this.readUInt16(this.offset),h.offset=this.readUInt32(this.offset),s=this.offset,this.readCmapSubTable(h),n[r]=h}return n}readCmapSubTable(e){let t=this.getTable("cmap");this.offset=t.offset+e.offset;let s=this.readUInt16(this.offset),n=this.getCmapEncoding(e.platformID,e.encodingID);if(n!==ws.Unknown)switch(s){case ls.Apple:this.readAppleCmapTable(e,n);break;case ls.Microsoft:this.readMicrosoftCmapTable(e,n);break;case ls.Trimmed:this.readTrimmedCmapTable(e,n)}}readAppleCmapTable(e,t){let s=this.getTable("cmap");this.offset=s.offset+e.offset;let n=new Eo;n.format=this.readUInt16(this.offset),n.length=this.readUInt16(this.offset),n.version=this.readUInt16(this.offset),null==this.maxMacIndex&&(this.maxMacIndex=0);for(let r=0;r<256;++r){let h=new Er;h.index=this.readByte(this.offset),h.width=this.getWidth(h.index),h.charCode=r,this.macintosh.setValue(r,h),this.addGlyph(h,t),this.maxMacIndex=Math.max(r,this.maxMacIndex)}}readMicrosoftCmapTable(e,t){let s=this.getTable("cmap");this.offset=s.offset+e.offset;let n=t===ws.Unicode?this.microsoft:this.macintosh,r=new Vs;r.format=this.readUInt16(this.offset),r.length=this.readUInt16(this.offset),r.version=this.readUInt16(this.offset),r.segCountX2=this.readUInt16(this.offset),r.searchRange=this.readUInt16(this.offset),r.entrySelector=this.readUInt16(this.offset),r.rangeShift=this.readUInt16(this.offset);let h=r.segCountX2/2;r.endCount=this.readUshortArray(h),r.reservedPad=this.readUInt16(this.offset),r.startCount=this.readUshortArray(h),r.idDelta=this.readUshortArray(h),r.idRangeOffset=this.readUshortArray(h),r.glyphID=this.readUshortArray(r.length/2-8-4*h);let T=0,V=0;for(let Y=0;Y<h;Y++)for(let se=r.startCount[Y];se<=r.endCount[Y]&&65535!==se;se++){if(0===r.idRangeOffset[Y])T=se+r.idDelta[Y]&65535;else{if(V=Y+r.idRangeOffset[Y]/2-h+se-r.startCount[Y],V>=r.glyphID.length)continue;T=r.glyphID[V]+r.idDelta[Y]&65535}let ge=new Er;ge.index=T,ge.width=this.getWidth(ge.index);let ke=t===ws.Symbol&&61440==(65280&se)?255&se:se;ge.charCode=ke,n.setValue(ke,ge),this.addGlyph(ge,t)}}readTrimmedCmapTable(e,t){let s=this.getTable("cmap");this.offset=s.offset+e.offset;let n=new Ro;n.format=this.readUInt16(this.offset),n.length=this.readUInt16(this.offset),n.version=this.readUInt16(this.offset),n.firstCode=this.readUInt16(this.offset),n.entryCount=this.readUInt16(this.offset);for(let r=0;r<n.entryCount;++r){let h=new Er;h.index=this.readUInt16(this.offset),h.width=this.getWidth(h.index),h.charCode=r+n.firstCode,this.macintosh.setValue(r,h),this.addGlyph(h,t),this.maxMacIndex=Math.max(r,this.maxMacIndex)}}initializeFontName(e){for(let t=0;t<e.recordsCount;t++){let s=e.nameRecords[t];if(1===s.nameID?this.metrics.fontFamily=s.name:6===s.nameID&&(this.metrics.postScriptName=s.name),null!=this.metrics.fontFamily&&null!=this.metrics.postScriptName)break}}getTable(e){let s,t=new _r;return this.tableDirectory.containsKey(e)&&(s=this.tableDirectory.getValue(e)),null!=s&&(t=s),t}getWidth(e){return this.width[e=e<this.width.length?e:this.width.length-1]}getCmapEncoding(e,t){let s=ws.Unknown;return e==Ds.Microsoft&&t==on.Undefined?s=ws.Symbol:e==Ds.Microsoft&&t==on.Unicode?s=ws.Unicode:e==Ds.Macintosh&&t==Bn.Roman&&(s=ws.Macintosh),s}addGlyph(e,t){let s=null;switch(t){case ws.Unicode:s=this.microsoftGlyphs;break;case ws.Macintosh:case ws.Symbol:s=this.macintoshGlyphs}s.setValue(e.index,e)}initializeMetrics(e,t,s,n,r,h){this.initializeFontName(e);let m=!1;for(let ke=0;ke<h.length;ke++){let qe=h[ke];if(this.getCmapEncoding(qe.platformID,qe.encodingID)===ws.Symbol){m=!0;break}}this.metrics.isSymbol=m,this.metrics.macStyle=t.macStyle,this.metrics.isFixedPitch=0!==r.isFixedPitch,this.metrics.italicAngle=r.italicAngle;let T=1e3/t.unitsPerEm;this.metrics.winAscent=n.sTypoAscender*T,this.metrics.macAscent=s.ascender*T,this.metrics.capHeight=0!==n.sCapHeight?n.sCapHeight:.7*t.unitsPerEm*T,this.metrics.winDescent=n.sTypoDescender*T,this.metrics.macDescent=s.descender*T,this.metrics.leading=(n.sTypoAscender-n.sTypoDescender+n.sTypoLineGap)*T,this.metrics.lineGap=Math.ceil(s.lineGap*T);let V=t.xMin*T,Y=Math.ceil(this.metrics.macAscent+this.metrics.lineGap);this.metrics.fontBox=new As(V,Y,t.xMax*T,this.metrics.macDescent),this.metrics.stemV=80,this.metrics.widthTable=this.updateWidth(),this.metrics.contains=this.tableDirectory.containsKey("CFF"),this.metrics.subScriptSizeFactor=t.unitsPerEm/n.ySubscriptYSize,this.metrics.superscriptSizeFactor=t.unitsPerEm/n.ySuperscriptYSize}updateWidth(){let t=[];if(this.metrics.isSymbol)for(let s=0;s<256;s++){let n=this.getGlyph(String.fromCharCode(s));t[s]=n.empty?0:n.width}else{let s=[],n="?",r=String.fromCharCode(32);for(let h=0;h<256;h++){s[0]=h;let m=this.getString(s,0,s.length),V=this.getGlyph(m.length>0?m[0]:n);V.empty?(V=this.getGlyph(r),t[h]=V.empty?0:V.width):t[h]=V.width}}return t}getDefaultGlyph(){return this.getGlyph(js.whiteSpace)}getString(e,t,s){let n="";for(let r=0;r<s;r++)n+=String.fromCharCode(e[r+t]);return n}readLocaTable(e){let t=this.getTable("loca");this.offset=t.offset;let s=new to,n=null;if(e){let r=t.length/2;n=[];for(let h=0;h<r;h++)n[h]=2*this.readUInt16(this.offset)}else{let r=t.length/4;n=[];for(let h=0;h<r;h++)n[h]=this.readUInt32(this.offset)}return s.offsets=n,s}updateGlyphChars(e,t){e.containsKey(0)||e.setValue(0,0);let s=new lt,n=e.keys();for(let r=0;r<n.length;r++)s.setValue(n[r],e.getValue(n[r]));for(let r=0;r<n.length;r++)this.processCompositeGlyph(e,n[r],t)}processCompositeGlyph(e,t,s){if(t<s.offsets.length-1){let n=s.offsets[t];if(n!==s.offsets[t+1]){let r=this.getTable("glyf");this.offset=r.offset+n;let h=new bo;if(h.numberOfContours=this.readInt16(this.offset),h.xMin=this.readInt16(this.offset),h.yMin=this.readInt16(this.offset),h.xMax=this.readInt16(this.offset),h.yMax=this.readInt16(this.offset),h.numberOfContours<0){let m=0,T=!0;for(;T;){let V=this.readUInt16(this.offset),Y=this.readUInt16(this.offset);if(e.containsKey(Y)||e.setValue(Y,0),0==(V&Dn.MoreComponents))break;m=0!=(V&Dn.Arg1And2AreWords)?4:2,0!=(V&Dn.WeHaveScale)?m+=2:0!=(V&Dn.WeHaveAnXyScale)?m+=4:0!=(V&Dn.WeHaveTwoByTwo)&&(m+=8),this.offset+=m}}}}}generateGlyphTable(e,t,s,n){s=[];let r=e.keys();r.sort((se,ge)=>se-ge);let h=0;for(let se=0;se<r.length;se++){let ge=r[se];t.offsets.length>0&&(h+=t.offsets[ge+1]-t.offsets[ge])}let m=this.align(h);n=[];for(let se=0;se<m;se++)n.push(0);let T=0,V=0,Y=this.getTable("glyf");for(let se=0;se<t.offsets.length;se++)if(s.push(T),V<r.length&&r[V]===se){++V,s[se]=T;let ge=t.offsets[se],ke=t.offsets[se+1]-ge;ke>0&&(this.offset=Y.offset+ge,n=this.read(n,T,ke).buffer,T+=ke)}return{glyphTableSize:h,newLocaTable:s,newGlyphTable:n}}updateLocaTable(e,t,s){if(null===e)throw new Error("Argument Null Exception : newLocaTable");let n=t?2*e.length:4*e.length,r=this.align(n),h=new yr(r);for(let m=0;m<e.length;m++){let T=e[m];t?(T/=2,h.writeShort(T)):h.writeInt(T)}return{newLocaUpdated:h.data,newLocaSize:n}}align(e){return e+3&-4}getFontProgram(e,t,s,n){if(null===e)throw new Error("Argument Null Exception : newLocaTableOut");if(null===t)throw new Error("Argument Null Exception : newGlyphTable");let h=this.getFontProgramLength(e,t,0),T=h.numTables,V=new yr(h.fontProgramLength);V.writeInt(65536),V.writeShort(T);let Y=this.entrySelectors[T];return V.writeShort(16*(1<<(31&Y))),V.writeShort(Y),V.writeShort(16*(T-(1<<(31&Y)))),this.writeCheckSums(V,T,e,t,s,n),this.writeGlyphs(V,e,t),V.data}getFontProgramLength(e,t,s){if(null===e)throw new Error("Argument Null Exception : newLocaTableOut");if(null===t)throw new Error("Argument Null Exception : newGlyphTable");s=2;let n=this.tableNames,r=0;for(let m=0;m<n.length;m++){let T=n[m];if("glyf"!==T&&"loca"!==T){let V=this.getTable(T);V.empty||(++s,r+=this.align(V.length))}}return r+=e.length,r+=t.length,r+=16*s+12,{fontProgramLength:r,numTables:s}}writeCheckSums(e,t,s,n,r,h){if(null===e)throw new Error("Argument Null Exception : writer");if(null===s)throw new Error("Argument Null Exception : newLocaTableOut");if(null===n)throw new Error("Argument Null Exception : newGlyphTable");let m=this.tableNames,T=16*t+12,V=0;for(let Y=0;Y<m.length;Y++){let se=m[Y],ge=this.getTable(se);if(!ge.empty){if(e.writeString(se),"glyf"===se){let ke=this.calculateCheckSum(n);e.writeInt(ke),V=r}else if("loca"===se){let ke=this.calculateCheckSum(s);e.writeInt(ke),V=h}else e.writeInt(ge.checksum),V=ge.length;e.writeUInt(T),e.writeUInt(V),T+=this.align(V)}}}calculateCheckSum(e){if(null===e)throw new Error("Argument Null Exception : bytes");let t=0,s=0,n=0,r=0,h=0;for(let T=0;T<(e.length+1)/4;T++)h+=255&e[t++],r+=255&e[t++],n+=255&e[t++],s+=255&e[t++];let m=s;return m+=n<<8,m+=r<<16,m+=h<<24,m}writeGlyphs(e,t,s){if(null===e)throw new Error("Argument Null Exception : writer");if(null===t)throw new Error("Argument Null Exception : newLocaTableOut");if(null===s)throw new Error("Argument Null Exception : newGlyphTable");let n=this.tableNames;for(let r=0;r<n.length;r++){let h=n[r],m=this.getTable(h);if(!m.empty)if("glyf"===h)e.writeBytes(s);else if("loca"===h)e.writeBytes(t);else{let T=this.align(m.length),V=[];for(let se=0;se<T;se++)V.push(0);this.offset=m.offset;let Y=this.read(V,0,m.length);e.writeBytes(Y.buffer)}}}setOffset(e){this.offset=e}createInternals(){this.metrics=new Vn;let e=this.readNameTable(),t=this.readHeadTable();this.bIsLocaShort=0===t.indexToLocalFormat;let s=this.readHorizontalHeaderTable(),n=this.readOS2Table(),r=this.readPostTable();this.width=this.readWidthTable(s.numberOfHMetrics,t.unitsPerEm);let h=this.readCmapTable();this.initializeMetrics(e,t,s,n,r,h)}getGlyph(e){if("number"==typeof e){let t=null;return this.metrics.isSymbol||null==this.microsoftGlyphs?this.metrics.isSymbol&&null!=this.macintoshGlyphs&&this.macintoshGlyphs.containsKey(e)&&(t=this.macintoshGlyphs.getValue(e)):this.microsoftGlyphs.containsKey(e)&&(t=this.microsoftGlyphs.getValue(e)),t??this.getDefaultGlyph()}{let t=null,s=e.charCodeAt(0);return this.metrics.isSymbol||null===this.microsoft?(this.metrics.isSymbol&&null!==this.macintosh||this.isMacTTF)&&(0!==this.maxMacIndex?s%=this.maxMacIndex+1:s=61440==(65280&s)?255&s:s,this.macintosh.containsKey(s)&&(t=this.macintosh.getValue(s),this.isFontPresent=!0)):this.microsoft.containsKey(s)?(t=this.microsoft.getValue(s),s!==js.whiteSpace.charCodeAt(0)&&(this.isFontPresent=!0)):s!==js.whiteSpace.charCodeAt(0)&&(this.isFontPresent=!1),e===js.whiteSpace&&null===t&&(t=new Er),null!==t?t:this.getDefaultGlyph()}}getGlyphChars(e){if(null==e)throw new Error("Argument Null Exception : chars");let t=new lt,s=e.keys();for(let n=0;n<s.length;n++){let r=s[n],h=this.getGlyph(r);h.empty||t.setValue(h.index,r.charCodeAt(0))}return t}getAllGlyphs(){let e=[],t=new Er,s=0;for(let n=0;n<this.width.length;n++){let r=this.width[n];t.index=s,t.width=r,e.push(t),s++}return e}readFontProgram(e){let t=this.getGlyphChars(e),s=this.readLocaTable(this.bIsLocaShort);t.size()<e.size()&&(this.missedGlyphs=e.size()-t.size()),this.updateGlyphChars(t,s);let n=this.generateGlyphTable(t,s,null,null),r=n.glyphTableSize,m=n.newGlyphTable,T=this.updateLocaTable(n.newLocaTable,this.bIsLocaShort,null);return this.getFontProgram(T.newLocaUpdated,m,r,T.newLocaSize)}convertString(e){if(null===e)throw new Error("Argument Null Exception : text");let t="";for(let s=0;s<e.length;s++){let r=this.getGlyph(e[s]);r.empty||(t+=String.fromCharCode(r.index))}return t}getCharWidth(e){let t=this.getGlyph(e);return t=t.empty?this.getDefaultGlyph():t,t.empty?0:t.width}readString(e,t){if(void 0===t)return this.readString(e,!1);{let s="";if(t)for(let n=0;n<e;n++)n%2!=0&&(s+=String.fromCharCode(this.fontData[this.offset])),this.offset+=1;else for(let n=0;n<e;n++)s+=String.fromCharCode(this.fontData[this.offset]),this.offset+=1;return s}}readFixed(e){return this.readInt16(e)+this.readInt16(e+2)/16384}readInt32(e){let t=this.fontData[e+3],s=this.fontData[e+2],n=this.fontData[e+1],r=this.fontData[e];return this.offset+=4,t+(s<<8)+(n<<16)+(r<<24)}readUInt32(e){let t=this.fontData[e+3],s=this.fontData[e+2],n=this.fontData[e+1],r=this.fontData[e];return this.offset+=4,t|s<<8|n<<16|r<<24}readInt16(e){let t=(this.fontData[e]<<8)+this.fontData[e+1];return t=32768&t?t-65536:t,this.offset+=2,t}readInt64(e){let t=this.readInt32(e+4),s=4294967296*this.readInt32(e)+t;return t<0&&(s+=4294967296),s}readUInt16(e){let t=this.fontData[e]<<8|this.fontData[e+1];return this.offset+=2,t}readUshortArray(e){let t=[];for(let s=0;s<e;s++)t[s]=this.readUInt16(this.offset);return t}readBytes(e){let t=[];for(let s=0;s<e;s++)t.push(this.fontData[this.offset]),this.offset+=1;return t}readByte(e){let t=this.fontData[e];return this.offset+=1,t}read(e,t,s){if(null===e)throw new Error("Argument Null Exception : buffer");let n=0,r=0;do{for(let h=0;h<s-n&&this.offset+h<this.fontData.length;h++)e[t+h]=this.fontData[this.offset+h];r=s-n,this.offset+=r,n+=r}while(n<s);return{buffer:e,written:n}}}class oo{constructor(){this.lineGap=0}getAscent(e){return this.ascent*Rs.charSizeMultiplier*this.getSize(e)}getDescent(e){return this.descent*Rs.charSizeMultiplier*this.getSize(e)}getLineGap(e){return this.lineGap*Rs.charSizeMultiplier*this.getSize(e)}getHeight(e){let t,s=["cambria","candara","constantia","corbel","cariadings"],n=[];for(let r=0;r<s.length;r++)n.push(s[r]);return t=this.getDescent(e)<0?this.getAscent(e)-this.getDescent(e)+this.getLineGap(e):this.getAscent(e)+this.getDescent(e)+this.getLineGap(e),t}getSize(e){let t=this.size;if(null!=e)switch(e.subSuperScript){case Ti.SubScript:t/=this.subScriptSizeFactor;break;case Ti.SuperScript:t/=this.superscriptSizeFactor}return t}clone(){return this.widthTable=ol.clone(),this}get widthTable(){return this.internalWidthTable}set widthTable(e){this.internalWidthTable=e}}class ol{static clone(){return null}}class Yr extends ol{items(e){if(e<0||e>=this.widths.length)throw new Error("ArgumentOutOfRangeException:index, The character is not supported by the font.");return this.widths[e]}get length(){return this.widths.length}constructor(e){if(super(),null==e)throw new Error("ArgumentNullException:widths");this.widths=e}clone(){return this.widths=this.widths,this}toArray(){return new Ut(this.widths)}}class Bs{constructor(e,t){if(this.nameString="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.dictionaryProperties=new de,this.isCompress=!1,this.isEmbedFont=!1,this.cmapPrefix="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap"+B.newLine+"/CIDSystemInfo << /Registry (Adobe)/Ordering (UCS)/Supplement 0>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange"+B.newLine,this.cmapEndCodespaceRange="endcodespacerange"+B.newLine,this.cmapBeginRange="beginbfrange"+B.newLine,this.cmapEndRange="endbfrange"+B.newLine,this.cmapSuffix="endbfrange\nendcmap\nCMapName currentdict /CMap defineresource pop\nend end"+B.newLine,null==e)throw new Error("ArgumentNullException:base64String");this.fontSize=t,this.fontString=e,this.Initialize()}getCharWidth(e){return this.ttfReader.getCharWidth(e)}getLineWidth(e){let t=0;for(let s=0,n=e.length;s<n;s++)t+=this.getCharWidth(e[s]);return t}Initialize(){let e=new wr(this.fontString.length);e.writeFromBase64String(this.fontString),this.fontData=e.internalBuffer,this.ttfReader=new Fo(this.fontData),this.ttfMetrics=this.ttfReader.metrics}createInternals(){this.fontDictionary=new Be,this.fontProgram=new oi,this.cmap=new oi,this.descendantFont=new Be,this.metrics=new oo,this.ttfReader.createInternals(),this.ttfMetrics=this.ttfReader.metrics,this.initializeMetrics(),this.subsetName=this.getFontName(),this.createDescendantFont(),this.createCmap(),this.createFontDictionary(),this.createFontProgram()}getInternals(){return this.fontDictionary}initializeMetrics(){let e=this.ttfReader.metrics;this.metrics.ascent=e.macAscent,this.metrics.descent=e.macDescent,this.metrics.height=e.macAscent-e.macDescent+e.lineGap,this.metrics.name=e.fontFamily,this.metrics.postScriptName=e.postScriptName,this.metrics.size=this.fontSize,this.metrics.widthTable=new Yr(e.widthTable),this.metrics.lineGap=e.lineGap,this.metrics.subScriptSizeFactor=e.subScriptSizeFactor,this.metrics.superscriptSizeFactor=e.superscriptSizeFactor,this.metrics.isBold=e.isBold}getFontName(){let t,e="";for(let s=0;s<6;s++){let n=Math.floor(26*Math.random())+0;e+=this.nameString[n]}return e+="+",e+=this.ttfReader.metrics.postScriptName,t=e.toString(),t=this.formatName(t),t}formatName(e){let t=e.replace("(","#28");return t=t.replace(")","#29"),t=t.replace("[","#5B"),t=t.replace("]","#5D"),t=t.replace("<","#3C"),t=t.replace(">","#3E"),t=t.replace("{","#7B"),t=t.replace("}","#7D"),t=t.replace("/","#2F"),t=t.replace("%","#25"),t.replace(" ","#20")}createDescendantFont(){this.descendantFont.isFont=!0,this.descendantFont.descendantFontBeginSave=new xt(this),this.descendantFont.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.font)),this.descendantFont.items.setValue(this.dictionaryProperties.subtype,new Xe(this.dictionaryProperties.cIDFontType2)),this.descendantFont.items.setValue(this.dictionaryProperties.baseFont,new Xe(this.subsetName)),this.descendantFont.items.setValue(this.dictionaryProperties.cIDToGIDMap,new Xe(this.dictionaryProperties.identity)),this.descendantFont.items.setValue(this.dictionaryProperties.dw,new ui(1e3)),this.fontDescriptor=this.createFontDescriptor(),this.descendantFont.items.setValue(this.dictionaryProperties.fontDescriptor,new Xt(this.fontDescriptor));let e=this.createSystemInfo();this.descendantFont.items.setValue(this.dictionaryProperties.cIDSystemInfo,e)}createFontDescriptor(){let e=new Be,t=this.ttfReader.metrics;return e.isFont=!0,e.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.fontDescriptor)),e.items.setValue(this.dictionaryProperties.fontName,new Xe(this.subsetName)),e.items.setValue(this.dictionaryProperties.flags,new ui(this.getDescriptorFlags())),e.items.setValue(this.dictionaryProperties.fontBBox,Ut.fromRectangle(this.getBoundBox())),e.items.setValue(this.dictionaryProperties.missingWidth,new ui(t.widthTable[32])),e.items.setValue(this.dictionaryProperties.stemV,new ui(t.stemV)),e.items.setValue(this.dictionaryProperties.italicAngle,new ui(t.italicAngle)),e.items.setValue(this.dictionaryProperties.capHeight,new ui(t.capHeight)),e.items.setValue(this.dictionaryProperties.ascent,new ui(t.winAscent)),e.items.setValue(this.dictionaryProperties.descent,new ui(t.winDescent)),e.items.setValue(this.dictionaryProperties.leading,new ui(t.leading)),e.items.setValue(this.dictionaryProperties.avgWidth,new ui(t.widthTable[32])),e.items.setValue(this.dictionaryProperties.fontFile2,new Xt(this.fontProgram)),e.items.setValue(this.dictionaryProperties.maxWidth,new ui(t.widthTable[32])),e.items.setValue(this.dictionaryProperties.xHeight,new ui(0)),e.items.setValue(this.dictionaryProperties.stemH,new ui(0)),e}createCmap(){this.cmap.cmapBeginSave=new us(this)}createFontDictionary(){this.fontDictionary.isFont=!0,this.fontDictionary.fontDictionaryBeginSave=new $t(this),this.fontDictionary.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.font)),this.fontDictionary.items.setValue(this.dictionaryProperties.baseFont,new Xe(this.subsetName)),this.fontDictionary.items.setValue(this.dictionaryProperties.subtype,new Xe(this.dictionaryProperties.type0)),this.fontDictionary.items.setValue(this.dictionaryProperties.encoding,new Xe(this.dictionaryProperties.identityH));let e=new Ut,t=new Xt(this.descendantFont);e.isFont=!0,e.add(t),this.fontDictionary.items.setValue(this.dictionaryProperties.descendantFonts,e)}createFontProgram(){this.fontProgram.fontProgramBeginSave=new Us(this)}createSystemInfo(){let e=new Be;return e.items.setValue(this.dictionaryProperties.registry,new et("Adobe")),e.items.setValue(this.dictionaryProperties.ordering,new et(this.dictionaryProperties.identity)),e.items.setValue(this.dictionaryProperties.supplement,new ui(0)),e}descendantFontBeginSave(){if(null!=this.usedChars&&this.usedChars.size()>0){let e=this.getDescendantWidth();null!==e&&this.descendantFont.items.setValue(this.dictionaryProperties.w,e)}}cmapBeginSave(){this.generateCmap()}fontDictionaryBeginSave(){null!=this.usedChars&&this.usedChars.size()>0&&!this.fontDictionary.containsKey(this.dictionaryProperties.toUnicode)&&this.fontDictionary.items.setValue(this.dictionaryProperties.toUnicode,new Xt(this.cmap))}fontProgramBeginSave(){this.isCompress=!0,this.generateFontProgram()}getDescendantWidth(){let e=new Ut;if(null!=this.usedChars&&this.usedChars.size()>0){let t=[],s=this.usedChars.keys();for(let T=0;T<s.length;T++){let Y=this.ttfReader.getGlyph(s[T]);Y.empty||t.push(Y)}t.sort((T,V)=>T.index-V.index);let n=0,r=0,h=!1,m=new Ut;for(let T=0;T<t.length;T++){let V=t[T];h||(h=!0,n=V.index,r=V.index-1),(r+1!==V.index||T+1===t.length)&&t.length>1&&(e.add(new ui(n)),0!==T&&e.add(m),n=V.index,m=new Ut),m.add(new ui(V.width)),T+1===t.length&&(e.add(new ui(n)),e.add(m)),r=V.index}}return e}generateCmap(){if(null!=this.usedChars&&this.usedChars.size()>0){let e=this.ttfReader.getGlyphChars(this.usedChars);if(e.size()>0){let t=e.keys().sort(),n=t[t.length-1],r=this.toHexString(t[0],!1)+this.toHexString(n,!1)+B.newLine,h="";h+=this.cmapPrefix,h+=r,h+=this.cmapEndCodespaceRange;let m=0;for(let T=0;T<t.length;T++){0===m&&(0!==T&&(h+=this.cmapEndRange),m=Math.min(100,t.length-T),h+=m,h+=B.whiteSpace,h+=this.cmapBeginRange),m-=1;let V=t[T];h+=this.toHexString(V,!0)+this.toHexString(V,!0)+this.toHexString(e.getValue(V),!0)+"\n"}h+=this.cmapSuffix,this.cmap.clearStream(),this.cmap.isFont=!0,this.cmap.write(h)}}}generateFontProgram(){let e=null;this.usedChars=this.usedChars??new lt,this.ttfReader.setOffset(0),e=this.ttfReader.readFontProgram(this.usedChars),this.fontProgram.clearStream(),this.fontProgram.isFont=!0,this.fontProgram.writeBytes(e)}getDescriptorFlags(){let e=0,t=this.ttfReader.metrics;return t.isFixedPitch&&(e|=Kn.FixedPitch),e|=t.isSymbol?Kn.Symbolic:Kn.Nonsymbolic,t.isItalic&&(e|=Kn.Italic),t.isBold&&(e|=Kn.ForceBold),e}getBoundBox(){let e=this.ttfReader.metrics.fontBox,t=Math.abs(e.right-e.left),s=Math.abs(e.top-e.bottom);return new Ui(e.left,e.bottom,t,s)}toHexString(e,t){let s=e.toString(16);return t&&(s=s.toUpperCase()),"<0000".substring(0,5-s.length)+s+">"}setSymbols(e){if(null===e)throw new Error("Argument Null Exception : text");null==this.usedChars&&(this.usedChars=new lt);for(let t=0;t<e.length;t++)this.usedChars.setValue(e[t],String.fromCharCode(0));!1===this.isEmbedFont&&this.getDescendantWidth()}}class uo{constructor(){this.arabicCharTable=[["\u0621","\ufe80"],["\u0622","\ufe81","\ufe82"],["\u0623","\ufe83","\ufe84"],["\u0624","\ufe85","\ufe86"],["\u0625","\ufe87","\ufe88"],["\u0626","\ufe89","\ufe8a","\ufe8b","\ufe8c"],["\u0627","\ufe8d","\ufe8e"],["\u0628","\ufe8f","\ufe90","\ufe91","\ufe92"],["\u0629","\ufe93","\ufe94"],["\u062a","\ufe95","\ufe96","\ufe97","\ufe98"],["\u062b","\ufe99","\ufe9a","\ufe9b","\ufe9c"],["\u062c","\ufe9d","\ufe9e","\ufe9f","\ufea0"],["\u062d","\ufea1","\ufea2","\ufea3","\ufea4"],["\u062e","\ufea5","\ufea6","\ufea7","\ufea8"],["\u062f","\ufea9","\ufeaa"],["\u0630","\ufeab","\ufeac"],["\u0631","\ufead","\ufeae"],["\u0632","\ufeaf","\ufeb0"],["\u0633","\ufeb1","\ufeb2","\ufeb3","\ufeb4"],["\u0634","\ufeb5","\ufeb6","\ufeb7","\ufeb8"],["\u0635","\ufeb9","\ufeba","\ufebb","\ufebc"],["\u0636","\ufebd","\ufebe","\ufebf","\ufec0"],["\u0637","\ufec1","\ufec2","\ufec3","\ufec4"],["\u0638","\ufec5","\ufec6","\ufec7","\ufec8"],["\u0639","\ufec9","\ufeca","\ufecb","\ufecc"],["\u063a","\ufecd","\ufece","\ufecf","\ufed0"],["\u0640","\u0640","\u0640","\u0640","\u0640"],["\u0641","\ufed1","\ufed2","\ufed3","\ufed4"],["\u0642","\ufed5","\ufed6","\ufed7","\ufed8"],["\u0643","\ufed9","\ufeda","\ufedb","\ufedc"],["\u0644","\ufedd","\ufede","\ufedf","\ufee0"],["\u0645","\ufee1","\ufee2","\ufee3","\ufee4"],["\u0646","\ufee5","\ufee6","\ufee7","\ufee8"],["\u0647","\ufee9","\ufeea","\ufeeb","\ufeec"],["\u0648","\ufeed","\ufeee"],["\u0649","\ufeef","\ufef0","\ufbe8","\ufbe9"],["\u064a","\ufef1","\ufef2","\ufef3","\ufef4"],["\u0671","\ufb50","\ufb51"],["\u0679","\ufb66","\ufb67","\ufb68","\ufb69"],["\u067a","\ufb5e","\ufb5f","\ufb60","\ufb61"],["\u067b","\ufb52","\ufb53","\ufb54","\ufb55"],["\u067e","\ufb56","\ufb57","\ufb58","\ufb59"],["\u067f","\ufb62","\ufb63","\ufb64","\ufb65"],["\u0680","\ufb5a","\ufb5b","\ufb5c","\ufb5d"],["\u0683","\ufb76","\ufb77","\ufb78","\ufb79"],["\u0684","\ufb72","\ufb73","\ufb74","\ufb75"],["\u0686","\ufb7a","\ufb7b","\ufb7c","\ufb7d"],["\u0687","\ufb7e","\ufb7f","\ufb80","\ufb81"],["\u0688","\ufb88","\ufb89"],["\u068c","\ufb84","\ufb85"],["\u068d","\ufb82","\ufb83"],["\u068e","\ufb86","\ufb87"],["\u0691","\ufb8c","\ufb8d"],["\u0698","\ufb8a","\ufb8b"],["\u06a4","\ufb6a","\ufb6b","\ufb6c","\ufb6d"],["\u06a6","\ufb6e","\ufb6f","\ufb70","\ufb71"],["\u06a9","\ufb8e","\ufb8f","\ufb90","\ufb91"],["\u06ad","\ufbd3","\ufbd4","\ufbd5","\ufbd6"],["\u06af","\ufb92","\ufb93","\ufb94","\ufb95"],["\u06b1","\ufb9a","\ufb9b","\ufb9c","\ufb9d"],["\u06b3","\ufb96","\ufb97","\ufb98","\ufb99"],["\u06ba","\ufb9e","\ufb9f"],["\u06bb","\ufba0","\ufba1","\ufba2","\ufba3"],["\u06be","\ufbaa","\ufbab","\ufbac","\ufbad"],["\u06c0","\ufba4","\ufba5"],["\u06c1","\ufba6","\ufba7","\ufba8","\ufba9"],["\u06c5","\ufbe0","\ufbe1"],["\u06c6","\ufbd9","\ufbda"],["\u06c7","\ufbd7","\ufbd8"],["\u06c8","\ufbdb","\ufbdc"],["\u06c9","\ufbe2","\ufbe3"],["\u06cb","\ufbde","\ufbdf"],["\u06cc","\ufbfc","\ufbfd","\ufbfe","\ufbff"],["\u06d0","\ufbe4","\ufbe5","\ufbe6","\ufbe7"],["\u06d2","\ufbae","\ufbaf"],["\u06d3","\ufbb0","\ufbb1"]],this.alef="\u0627",this.alefHamza="\u0623",this.alefHamzaBelow="\u0625",this.alefMadda="\u0622",this.lam="\u0644",this.hamza="\u0621",this.zeroWidthJoiner="\u200d",this.hamzaAbove="\u0654",this.hamzaBelow="\u0655",this.wawHamza="\u0624",this.yehHamza="\u0626",this.waw="\u0648",this.alefMaksura="\u0649",this.yeh="\u064a",this.farsiYeh="\u06cc",this.shadda="\u0651",this.madda="\u0653",this.lwa="\ufefb",this.lwawh="\ufef7",this.lwawhb="\ufef9",this.lwawm="\ufef5",this.bwhb="\u06d3",this.fathatan="\u064b",this.superScriptalef="\u0670",this.vowel=1,this.arabicMapTable=new lt;for(let e=0;e<this.arabicCharTable.length;e++)this.arabicMapTable.setValue(this.arabicCharTable[e][0],this.arabicCharTable[e])}getCharacterShape(e,t){if(e>=this.hamza&&e<=this.bwhb){let s=[];if(this.arabicMapTable.getValue(e))return s=this.arabicMapTable.getValue(e),s[t+1]}else if(e>=this.lwawm&&e<=this.lwa)return e;return e}shape(e,t){let s="",n="";for(let r=0;r<e.length;r++){let h=e[r];h>="\u0600"&&h<="\u06ff"?n+=h:(n.length>0&&(s+=this.doShape(n.toString(),0),n=""),s+=h)}return n.length>0&&(s+=this.doShape(n.toString(),0)),s.toString()}doShape(e,t){let s="",n=0,r=0,h=0,m="",T=new $s,V=new $s;for(;h<e.length;)if(m=e[h++],n=this.ligature(m,V),0===n){let Y=this.getShapeCount(m);r=1===Y?0:2,T.Shapes>2&&(r+=1),r%=V.Shapes,V.Value=this.getCharacterShape(V.Value,r),s=this.append(s,T,t),T=V,V=new $s,V.Value=m,V.Shapes=Y,V.Ligature++}return r=T.Shapes>2?1:0,r%=V.Shapes,V.Value=this.getCharacterShape(V.Value,r),s=this.append(s,T,t),s=this.append(s,V,t),s.toString()}append(e,t,s){return""!==t.Value&&(e+=t.Value,t.Ligature-=1,""!==t.Type&&(0==(s&this.vowel)&&(e+=t.Type),t.Ligature-=1),""!==t.vowel&&(0==(s&this.vowel)&&(e+=t.vowel),t.Ligature-=1)),e}ligature(e,t){if(""!==t.Value){let s=0;if(e>=this.fathatan&&e<=this.hamzaBelow||e===this.superScriptalef){if(s=1,""!==t.vowel&&e!==this.shadda&&(s=2),e===this.shadda){if(null!=t.Type)return 0;t.Type=this.shadda}else e===this.hamzaBelow?t.Value===this.alef?(t.Value=this.alefHamzaBelow,s=2):e===this.lwa?(t.Value=this.lwawhb,s=2):t.Type=this.hamzaBelow:e===this.hamzaAbove?t.Value===this.alef?(t.Value=this.alefHamza,s=2):t.Value===this.lwa?(t.Value=this.lwawh,s=2):t.Value===this.waw?(t.Value=this.wawHamza,s=2):t.Value===this.yeh||t.Value===this.alefMaksura||t.Value===this.farsiYeh?(t.Value=this.yehHamza,s=2):t.Type=this.hamzaAbove:e===this.madda?t.Value===this.alef&&(t.Value=this.alefMadda,s=2):t.vowel=e;return 1===s&&t.Ligature++,s}return""!==t.vowel?0:(t.Value===this.lam&&(e===this.alef?(t.Value=this.lwa,t.Shapes=2,s=3):e===this.alefHamza?(t.Value=this.lwawh,t.Shapes=2,s=3):e===this.alefHamzaBelow?(t.Value=this.lwawhb,t.Shapes=2,s=3):e===this.alefMadda&&(t.Value=this.lwawm,t.Shapes=2,s=3)),s)}return 0}getShapeCount(e){if(e>=this.hamza&&e<=this.bwhb&&!(e>=this.fathatan&&e<=this.hamzaBelow||e===this.superScriptalef)){let t=[];if(this.arabicMapTable.getValue(e))return t=this.arabicMapTable.getValue(e),t.length-1}else if(e===this.zeroWidthJoiner)return 4;return 1}}class $s{constructor(){this.shapeValue="",this.shapeType="",this.shapeVowel="",this.shapeLigature=0,this.shapeShapes=1}get Value(){return this.shapeValue}set Value(e){this.shapeValue=e}get Type(){return this.shapeType}set Type(e){this.shapeType=e}get vowel(){return this.shapeVowel}set vowel(e){this.shapeVowel=e}get Ligature(){return this.shapeLigature}set Ligature(e){this.shapeLigature=e}get Shapes(){return this.shapeShapes}set Shapes(e){this.shapeShapes=e}}class mn{constructor(){this.indexes=[],this.indexLevels=[],this.mirroringShapeCharacters=new lt,this.update()}doMirrorShaping(e){let t=[];for(let n=0;n<e.length;n++)t[n]=1==(1&this.indexLevels[n])&&this.mirroringShapeCharacters.containsKey(e[n].charCodeAt(0))?String.fromCharCode(this.mirroringShapeCharacters.getValue(e[n].charCodeAt(0))):e[n].toString();let s="";for(let n=0;n<t.length;n++)s+=t[n];return s}getLogicalToVisualString(e,t){let s=new tr;this.indexLevels=s.getVisualOrder(e,t),this.setDefaultIndexLevel(),this.doOrder(0,this.indexLevels.length-1);let n=this.doMirrorShaping(e),r="";for(let h=0;h<this.indexes.length;h++)r+=n[this.indexes[h]];return r.toString()}setDefaultIndexLevel(){for(let e=0;e<this.indexLevels.length;e++)this.indexes[e]=e}doOrder(e,t){let s=this.indexLevels[e],n=s,r=s,h=s;for(let m=e+1;m<=t;++m){let T=this.indexLevels[m];T>s?s=T:T<n&&(n=T),r&=T,h|=T}if(0!=(1&h)){if(1==(1&r))return void this.reArrange(e,t+1);for(n|=1;s>=n;){let m=e;for(;;){for(;m<=t&&!(this.indexLevels[m]>=s);)m+=1;if(m>t)break;let T=m+1;for(;T<=t&&!(this.indexLevels[T]<s);)T+=1;this.reArrange(m,T),m=T+1}s-=1}}}reArrange(e,t){let s=(e+t)/2;for(--t;e<s;++e,--t){let n=this.indexes[e];this.indexes[e]=this.indexes[t],this.indexes[t]=n}}update(){this.mirroringShapeCharacters.setValue(40,41),this.mirroringShapeCharacters.setValue(41,40),this.mirroringShapeCharacters.setValue(60,62),this.mirroringShapeCharacters.setValue(62,60),this.mirroringShapeCharacters.setValue(91,93),this.mirroringShapeCharacters.setValue(93,91),this.mirroringShapeCharacters.setValue(123,125),this.mirroringShapeCharacters.setValue(125,123),this.mirroringShapeCharacters.setValue(171,187),this.mirroringShapeCharacters.setValue(187,171),this.mirroringShapeCharacters.setValue(8249,8250),this.mirroringShapeCharacters.setValue(8250,8249),this.mirroringShapeCharacters.setValue(8261,8262),this.mirroringShapeCharacters.setValue(8262,8261),this.mirroringShapeCharacters.setValue(8317,8318),this.mirroringShapeCharacters.setValue(8318,8317),this.mirroringShapeCharacters.setValue(8333,8334),this.mirroringShapeCharacters.setValue(8334,8333),this.mirroringShapeCharacters.setValue(8712,8715),this.mirroringShapeCharacters.setValue(8713,8716),this.mirroringShapeCharacters.setValue(8714,8717),this.mirroringShapeCharacters.setValue(8715,8712),this.mirroringShapeCharacters.setValue(8716,8713),this.mirroringShapeCharacters.setValue(8717,8714),this.mirroringShapeCharacters.setValue(8725,10741),this.mirroringShapeCharacters.setValue(8764,8765),this.mirroringShapeCharacters.setValue(8765,8764),this.mirroringShapeCharacters.setValue(8771,8909),this.mirroringShapeCharacters.setValue(8786,8787),this.mirroringShapeCharacters.setValue(8787,8786),this.mirroringShapeCharacters.setValue(8788,8789),this.mirroringShapeCharacters.setValue(8789,8788),this.mirroringShapeCharacters.setValue(8804,8805),this.mirroringShapeCharacters.setValue(8805,8804),this.mirroringShapeCharacters.setValue(8806,8807),this.mirroringShapeCharacters.setValue(8807,8806),this.mirroringShapeCharacters.setValue(8808,8809),this.mirroringShapeCharacters.setValue(8809,8808),this.mirroringShapeCharacters.setValue(8810,8811),this.mirroringShapeCharacters.setValue(8811,8810),this.mirroringShapeCharacters.setValue(8814,8815),this.mirroringShapeCharacters.setValue(8815,8814),this.mirroringShapeCharacters.setValue(8816,8817),this.mirroringShapeCharacters.setValue(8817,8816),this.mirroringShapeCharacters.setValue(8818,8819),this.mirroringShapeCharacters.setValue(8819,8818),this.mirroringShapeCharacters.setValue(8820,8821),this.mirroringShapeCharacters.setValue(8821,8820),this.mirroringShapeCharacters.setValue(8822,8823),this.mirroringShapeCharacters.setValue(8823,8822),this.mirroringShapeCharacters.setValue(8824,8825),this.mirroringShapeCharacters.setValue(8825,8824),this.mirroringShapeCharacters.setValue(8826,8827),this.mirroringShapeCharacters.setValue(8827,8826),this.mirroringShapeCharacters.setValue(8828,8829),this.mirroringShapeCharacters.setValue(8829,8828),this.mirroringShapeCharacters.setValue(8830,8831),this.mirroringShapeCharacters.setValue(8831,8830),this.mirroringShapeCharacters.setValue(8832,8833),this.mirroringShapeCharacters.setValue(8833,8832),this.mirroringShapeCharacters.setValue(8834,8835),this.mirroringShapeCharacters.setValue(8835,8834),this.mirroringShapeCharacters.setValue(8836,8837),this.mirroringShapeCharacters.setValue(8837,8836),this.mirroringShapeCharacters.setValue(8838,8839),this.mirroringShapeCharacters.setValue(8839,8838),this.mirroringShapeCharacters.setValue(8840,8841),this.mirroringShapeCharacters.setValue(8841,8840),this.mirroringShapeCharacters.setValue(8842,8843),this.mirroringShapeCharacters.setValue(8843,8842),this.mirroringShapeCharacters.setValue(8847,8848),this.mirroringShapeCharacters.setValue(8848,8847),this.mirroringShapeCharacters.setValue(8849,8850),this.mirroringShapeCharacters.setValue(8850,8849),this.mirroringShapeCharacters.setValue(8856,10680),this.mirroringShapeCharacters.setValue(8866,8867),this.mirroringShapeCharacters.setValue(8867,8866),this.mirroringShapeCharacters.setValue(8870,10974),this.mirroringShapeCharacters.setValue(8872,10980),this.mirroringShapeCharacters.setValue(8873,10979),this.mirroringShapeCharacters.setValue(8875,10981),this.mirroringShapeCharacters.setValue(8880,8881),this.mirroringShapeCharacters.setValue(8881,8880),this.mirroringShapeCharacters.setValue(8882,8883),this.mirroringShapeCharacters.setValue(8883,8882),this.mirroringShapeCharacters.setValue(8884,8885),this.mirroringShapeCharacters.setValue(8885,8884),this.mirroringShapeCharacters.setValue(8886,8887),this.mirroringShapeCharacters.setValue(8887,8886),this.mirroringShapeCharacters.setValue(8905,8906),this.mirroringShapeCharacters.setValue(8906,8905),this.mirroringShapeCharacters.setValue(8907,8908),this.mirroringShapeCharacters.setValue(8908,8907),this.mirroringShapeCharacters.setValue(8909,8771),this.mirroringShapeCharacters.setValue(8912,8913),this.mirroringShapeCharacters.setValue(8913,8912),this.mirroringShapeCharacters.setValue(8918,8919),this.mirroringShapeCharacters.setValue(8919,8918),this.mirroringShapeCharacters.setValue(8920,8921),this.mirroringShapeCharacters.setValue(8921,8920),this.mirroringShapeCharacters.setValue(8922,8923),this.mirroringShapeCharacters.setValue(8923,8922),this.mirroringShapeCharacters.setValue(8924,8925),this.mirroringShapeCharacters.setValue(8925,8924),this.mirroringShapeCharacters.setValue(8926,8927),this.mirroringShapeCharacters.setValue(8927,8926),this.mirroringShapeCharacters.setValue(8928,8929),this.mirroringShapeCharacters.setValue(8929,8928),this.mirroringShapeCharacters.setValue(8930,8931),this.mirroringShapeCharacters.setValue(8931,8930),this.mirroringShapeCharacters.setValue(8932,8933),this.mirroringShapeCharacters.setValue(8933,8932),this.mirroringShapeCharacters.setValue(8934,8935),this.mirroringShapeCharacters.setValue(8935,8934),this.mirroringShapeCharacters.setValue(8936,8937),this.mirroringShapeCharacters.setValue(8937,8936),this.mirroringShapeCharacters.setValue(8938,8939),this.mirroringShapeCharacters.setValue(8939,8938),this.mirroringShapeCharacters.setValue(8940,8941),this.mirroringShapeCharacters.setValue(8941,8940),this.mirroringShapeCharacters.setValue(8944,8945),this.mirroringShapeCharacters.setValue(8945,8944),this.mirroringShapeCharacters.setValue(8946,8954),this.mirroringShapeCharacters.setValue(8947,8955),this.mirroringShapeCharacters.setValue(8948,8956),this.mirroringShapeCharacters.setValue(8950,8957),this.mirroringShapeCharacters.setValue(8951,8958),this.mirroringShapeCharacters.setValue(8954,8946),this.mirroringShapeCharacters.setValue(8955,8947),this.mirroringShapeCharacters.setValue(8956,8948),this.mirroringShapeCharacters.setValue(8957,8950),this.mirroringShapeCharacters.setValue(8958,8951),this.mirroringShapeCharacters.setValue(8968,8969),this.mirroringShapeCharacters.setValue(8969,8968),this.mirroringShapeCharacters.setValue(8970,8971),this.mirroringShapeCharacters.setValue(8971,8970),this.mirroringShapeCharacters.setValue(9001,9002),this.mirroringShapeCharacters.setValue(9002,9001),this.mirroringShapeCharacters.setValue(10088,10089),this.mirroringShapeCharacters.setValue(10089,10088),this.mirroringShapeCharacters.setValue(10090,10091),this.mirroringShapeCharacters.setValue(10091,10090),this.mirroringShapeCharacters.setValue(10092,10093),this.mirroringShapeCharacters.setValue(10093,10092),this.mirroringShapeCharacters.setValue(10094,10095),this.mirroringShapeCharacters.setValue(10095,10094),this.mirroringShapeCharacters.setValue(10096,10097),this.mirroringShapeCharacters.setValue(10097,10096),this.mirroringShapeCharacters.setValue(10098,10099),this.mirroringShapeCharacters.setValue(10099,10098),this.mirroringShapeCharacters.setValue(10100,10101),this.mirroringShapeCharacters.setValue(10101,10100),this.mirroringShapeCharacters.setValue(10197,10198),this.mirroringShapeCharacters.setValue(10198,10197),this.mirroringShapeCharacters.setValue(10205,10206),this.mirroringShapeCharacters.setValue(10206,10205),this.mirroringShapeCharacters.setValue(10210,10211),this.mirroringShapeCharacters.setValue(10211,10210),this.mirroringShapeCharacters.setValue(10212,10213),this.mirroringShapeCharacters.setValue(10213,10212),this.mirroringShapeCharacters.setValue(10214,10215),this.mirroringShapeCharacters.setValue(10215,10214),this.mirroringShapeCharacters.setValue(10216,10217),this.mirroringShapeCharacters.setValue(10217,10216),this.mirroringShapeCharacters.setValue(10218,10219),this.mirroringShapeCharacters.setValue(10219,10218),this.mirroringShapeCharacters.setValue(10627,10628),this.mirroringShapeCharacters.setValue(10628,10627),this.mirroringShapeCharacters.setValue(10629,10630),this.mirroringShapeCharacters.setValue(10630,10629),this.mirroringShapeCharacters.setValue(10631,10632),this.mirroringShapeCharacters.setValue(10632,10631),this.mirroringShapeCharacters.setValue(10633,10634),this.mirroringShapeCharacters.setValue(10634,10633),this.mirroringShapeCharacters.setValue(10635,10636),this.mirroringShapeCharacters.setValue(10636,10635),this.mirroringShapeCharacters.setValue(10637,10640),this.mirroringShapeCharacters.setValue(10638,10639),this.mirroringShapeCharacters.setValue(10639,10638),this.mirroringShapeCharacters.setValue(10640,10637),this.mirroringShapeCharacters.setValue(10641,10642),this.mirroringShapeCharacters.setValue(10642,10641),this.mirroringShapeCharacters.setValue(10643,10644),this.mirroringShapeCharacters.setValue(10644,10643),this.mirroringShapeCharacters.setValue(10645,10646),this.mirroringShapeCharacters.setValue(10646,10645),this.mirroringShapeCharacters.setValue(10647,10648),this.mirroringShapeCharacters.setValue(10648,10647),this.mirroringShapeCharacters.setValue(10680,8856),this.mirroringShapeCharacters.setValue(10688,10689),this.mirroringShapeCharacters.setValue(10689,10688),this.mirroringShapeCharacters.setValue(10692,10693),this.mirroringShapeCharacters.setValue(10693,10692),this.mirroringShapeCharacters.setValue(10703,10704),this.mirroringShapeCharacters.setValue(10704,10703),this.mirroringShapeCharacters.setValue(10705,10706),this.mirroringShapeCharacters.setValue(10706,10705),this.mirroringShapeCharacters.setValue(10708,10709),this.mirroringShapeCharacters.setValue(10709,10708),this.mirroringShapeCharacters.setValue(10712,10713),this.mirroringShapeCharacters.setValue(10713,10712),this.mirroringShapeCharacters.setValue(10714,10715),this.mirroringShapeCharacters.setValue(10715,10714),this.mirroringShapeCharacters.setValue(10741,8725),this.mirroringShapeCharacters.setValue(10744,10745),this.mirroringShapeCharacters.setValue(10745,10744),this.mirroringShapeCharacters.setValue(10748,10749),this.mirroringShapeCharacters.setValue(10749,10748),this.mirroringShapeCharacters.setValue(10795,10796),this.mirroringShapeCharacters.setValue(10796,10795),this.mirroringShapeCharacters.setValue(10797,10796),this.mirroringShapeCharacters.setValue(10798,10797),this.mirroringShapeCharacters.setValue(10804,10805),this.mirroringShapeCharacters.setValue(10805,10804),this.mirroringShapeCharacters.setValue(10812,10813),this.mirroringShapeCharacters.setValue(10813,10812),this.mirroringShapeCharacters.setValue(10852,10853),this.mirroringShapeCharacters.setValue(10853,10852),this.mirroringShapeCharacters.setValue(10873,10874),this.mirroringShapeCharacters.setValue(10874,10873),this.mirroringShapeCharacters.setValue(10877,10878),this.mirroringShapeCharacters.setValue(10878,10877),this.mirroringShapeCharacters.setValue(10879,10880),this.mirroringShapeCharacters.setValue(10880,10879),this.mirroringShapeCharacters.setValue(10881,10882),this.mirroringShapeCharacters.setValue(10882,10881),this.mirroringShapeCharacters.setValue(10883,10884),this.mirroringShapeCharacters.setValue(10884,10883),this.mirroringShapeCharacters.setValue(10891,10892),this.mirroringShapeCharacters.setValue(10892,10891),this.mirroringShapeCharacters.setValue(10897,10898),this.mirroringShapeCharacters.setValue(10898,10897),this.mirroringShapeCharacters.setValue(10899,10900),this.mirroringShapeCharacters.setValue(10900,10899),this.mirroringShapeCharacters.setValue(10901,10902),this.mirroringShapeCharacters.setValue(10902,10901),this.mirroringShapeCharacters.setValue(10903,10904),this.mirroringShapeCharacters.setValue(10904,10903),this.mirroringShapeCharacters.setValue(10905,10906),this.mirroringShapeCharacters.setValue(10906,10905),this.mirroringShapeCharacters.setValue(10907,10908),this.mirroringShapeCharacters.setValue(10908,10907),this.mirroringShapeCharacters.setValue(10913,10914),this.mirroringShapeCharacters.setValue(10914,10913),this.mirroringShapeCharacters.setValue(10918,10919),this.mirroringShapeCharacters.setValue(10919,10918),this.mirroringShapeCharacters.setValue(10920,10921),this.mirroringShapeCharacters.setValue(10921,10920),this.mirroringShapeCharacters.setValue(10922,10923),this.mirroringShapeCharacters.setValue(10923,10922),this.mirroringShapeCharacters.setValue(10924,10925),this.mirroringShapeCharacters.setValue(10925,10924),this.mirroringShapeCharacters.setValue(10927,10928),this.mirroringShapeCharacters.setValue(10928,10927),this.mirroringShapeCharacters.setValue(10931,10932),this.mirroringShapeCharacters.setValue(10932,10931),this.mirroringShapeCharacters.setValue(10939,10940),this.mirroringShapeCharacters.setValue(10940,10939),this.mirroringShapeCharacters.setValue(10941,10942),this.mirroringShapeCharacters.setValue(10942,10941),this.mirroringShapeCharacters.setValue(10943,10944),this.mirroringShapeCharacters.setValue(10944,10943),this.mirroringShapeCharacters.setValue(10945,10946),this.mirroringShapeCharacters.setValue(10946,10945),this.mirroringShapeCharacters.setValue(10947,10948),this.mirroringShapeCharacters.setValue(10948,10947),this.mirroringShapeCharacters.setValue(10949,10950),this.mirroringShapeCharacters.setValue(10950,10949),this.mirroringShapeCharacters.setValue(10957,10958),this.mirroringShapeCharacters.setValue(10958,10957),this.mirroringShapeCharacters.setValue(10959,10960),this.mirroringShapeCharacters.setValue(10960,10959),this.mirroringShapeCharacters.setValue(10961,10962),this.mirroringShapeCharacters.setValue(10962,10961),this.mirroringShapeCharacters.setValue(10963,10964),this.mirroringShapeCharacters.setValue(10964,10963),this.mirroringShapeCharacters.setValue(10965,10966),this.mirroringShapeCharacters.setValue(10966,10965),this.mirroringShapeCharacters.setValue(10974,8870),this.mirroringShapeCharacters.setValue(10979,8873),this.mirroringShapeCharacters.setValue(10980,8872),this.mirroringShapeCharacters.setValue(10981,8875),this.mirroringShapeCharacters.setValue(10988,10989),this.mirroringShapeCharacters.setValue(10989,10988),this.mirroringShapeCharacters.setValue(10999,11e3),this.mirroringShapeCharacters.setValue(11e3,10999),this.mirroringShapeCharacters.setValue(11001,11002),this.mirroringShapeCharacters.setValue(11002,11001),this.mirroringShapeCharacters.setValue(12296,12297),this.mirroringShapeCharacters.setValue(12297,12296),this.mirroringShapeCharacters.setValue(12298,12299),this.mirroringShapeCharacters.setValue(12299,12298),this.mirroringShapeCharacters.setValue(12300,12301),this.mirroringShapeCharacters.setValue(12301,12300),this.mirroringShapeCharacters.setValue(12302,12303),this.mirroringShapeCharacters.setValue(12303,12302),this.mirroringShapeCharacters.setValue(12304,12305),this.mirroringShapeCharacters.setValue(12305,12304),this.mirroringShapeCharacters.setValue(12308,12309),this.mirroringShapeCharacters.setValue(12309,12308),this.mirroringShapeCharacters.setValue(12310,12311),this.mirroringShapeCharacters.setValue(12311,12310),this.mirroringShapeCharacters.setValue(12312,12313),this.mirroringShapeCharacters.setValue(12313,12312),this.mirroringShapeCharacters.setValue(12314,12315),this.mirroringShapeCharacters.setValue(12315,12314),this.mirroringShapeCharacters.setValue(65288,65289),this.mirroringShapeCharacters.setValue(65289,65288),this.mirroringShapeCharacters.setValue(65308,65310),this.mirroringShapeCharacters.setValue(65310,65308),this.mirroringShapeCharacters.setValue(65339,65341),this.mirroringShapeCharacters.setValue(65341,65339),this.mirroringShapeCharacters.setValue(65371,65373),this.mirroringShapeCharacters.setValue(65373,65371),this.mirroringShapeCharacters.setValue(65375,65376),this.mirroringShapeCharacters.setValue(65376,65375),this.mirroringShapeCharacters.setValue(65378,65379),this.mirroringShapeCharacters.setValue(65379,65378)}}class tr{constructor(){this.types=[],this.textOrder=-1,this.rtlCharacterTypes=new Array(65536),this.L=0,this.LRE=1,this.LRO=2,this.R=3,this.AL=4,this.RLE=5,this.RLO=6,this.PDF=7,this.EN=8,this.ES=9,this.ET=10,this.AN=11,this.CS=12,this.NSM=13,this.BN=14,this.B=15,this.S=16,this.WS=17,this.ON=18,this.charTypes=[this.L,this.EN,this.BN,this.ES,this.ES,this.S,this.ET,this.ET,this.B,this.AN,this.AN,this.S,this.CS,this.CS,this.WS,this.NSM,this.NSM,this.B,this.BN,27,this.BN,28,30,this.B,31,31,this.S,32,32,this.WS,33,34,this.ON,35,37,this.ET,38,42,this.ON,43,43,this.ET,44,44,this.CS,45,45,this.ET,46,46,this.CS,47,47,this.CS,48,57,this.EN,58,58,this.CS,59,64,this.ON,65,90,this.L,91,96,this.ON,97,122,this.L,123,126,this.ON,127,132,this.BN,133,133,this.B,134,159,this.BN,160,160,this.CS,161,161,this.ON,162,165,this.ET,166,169,this.ON,170,170,this.L,171,175,this.ON,176,177,this.ET,178,179,this.EN,180,180,this.ON,181,181,this.L,182,184,this.ON,185,185,this.EN,186,186,this.L,187,191,this.ON,192,214,this.L,215,215,this.ON,216,246,this.L,247,247,this.ON,248,696,this.L,697,698,this.ON,699,705,this.L,706,719,this.ON,720,721,this.L,722,735,this.ON,736,740,this.L,741,749,this.ON,750,750,this.L,751,767,this.ON,768,855,this.NSM,856,860,this.L,861,879,this.NSM,880,883,this.L,884,885,this.ON,886,893,this.L,894,894,this.ON,895,899,this.L,900,901,this.ON,902,902,this.L,903,903,this.ON,904,1013,this.L,1014,1014,this.ON,1015,1154,this.L,1155,1158,this.NSM,1159,1159,this.L,1160,1161,this.NSM,1162,1417,this.L,1418,1418,this.ON,1419,1424,this.L,1425,1441,this.NSM,1442,1442,this.L,1443,1465,this.NSM,1466,1466,this.L,1467,1469,this.NSM,1470,1470,this.R,1471,1471,this.NSM,1472,1472,this.R,1473,1474,this.NSM,1475,1475,this.R,1476,1476,this.NSM,1477,1487,this.L,1488,1514,this.R,1515,1519,this.L,1520,1524,this.R,1525,1535,this.L,1536,1539,this.AL,1540,1547,this.L,1548,1548,this.CS,1549,1549,this.AL,1550,1551,this.ON,1552,1557,this.NSM,1558,1562,this.L,1563,1563,this.AL,1564,1566,this.L,1567,1567,this.AL,1568,1568,this.L,1569,1594,this.AL,1595,1599,this.L,1600,1610,this.AL,1611,1624,this.NSM,1625,1631,this.L,1632,1641,this.AN,1642,1642,this.ET,1643,1644,this.AN,1645,1647,this.AL,1648,1648,this.NSM,1649,1749,this.AL,1750,1756,this.NSM,1757,1757,this.AL,1758,1764,this.NSM,1765,1766,this.AL,1767,1768,this.NSM,1769,1769,this.ON,1770,1773,this.NSM,1774,1775,this.AL,1776,1785,this.EN,1786,1805,this.AL,1806,1806,this.L,1807,1807,this.BN,1808,1808,this.AL,1809,1809,this.NSM,1810,1839,this.AL,1840,1866,this.NSM,1867,1868,this.L,1869,1871,this.AL,1872,1919,this.L,1920,1957,this.AL,1958,1968,this.NSM,1969,1969,this.AL,1970,2304,this.L,2305,2306,this.NSM,2307,2363,this.L,2364,2364,this.NSM,2365,2368,this.L,2369,2376,this.NSM,2377,2380,this.L,2381,2381,this.NSM,2382,2384,this.L,2385,2388,this.NSM,2389,2401,this.L,2402,2403,this.NSM,2404,2432,this.L,2433,2433,this.NSM,2434,2491,this.L,2492,2492,this.NSM,2493,2496,this.L,2497,2500,this.NSM,2501,2508,this.L,2509,2509,this.NSM,2510,2529,this.L,2530,2531,this.NSM,2532,2545,this.L,2546,2547,this.ET,2548,2560,this.L,2561,2562,this.NSM,2563,2619,this.L,2620,2620,this.NSM,2621,2624,this.L,2625,2626,this.NSM,2627,2630,this.L,2631,2632,this.NSM,2633,2634,this.L,2635,2637,this.NSM,2638,2671,this.L,2672,2673,this.NSM,2674,2688,this.L,2689,2690,this.NSM,2691,2747,this.L,2748,2748,this.NSM,2749,2752,this.L,2753,2757,this.NSM,2758,2758,this.L,2759,2760,this.NSM,2761,2764,this.L,2765,2765,this.NSM,2766,2785,this.L,2786,2787,this.NSM,2788,2800,this.L,2801,2801,this.ET,2802,2816,this.L,2817,2817,this.NSM,2818,2875,this.L,2876,2876,this.NSM,2877,2878,this.L,2879,2879,this.NSM,2880,2880,this.L,2881,2883,this.NSM,2884,2892,this.L,2893,2893,this.NSM,2894,2901,this.L,2902,2902,this.NSM,2903,2945,this.L,2946,2946,this.NSM,2947,3007,this.L,3008,3008,this.NSM,3009,3020,this.L,3021,3021,this.NSM,3022,3058,this.L,3059,3064,this.ON,3065,3065,this.ET,3066,3066,this.ON,3067,3133,this.L,3134,3136,this.NSM,3137,3141,this.L,3142,3144,this.NSM,3145,3145,this.L,3146,3149,this.NSM,3150,3156,this.L,3157,3158,this.NSM,3159,3259,this.L,3260,3260,this.NSM,3261,3275,this.L,3276,3277,this.NSM,3278,3392,this.L,3393,3395,this.NSM,3396,3404,this.L,3405,3405,this.NSM,3406,3529,this.L,3530,3530,this.NSM,3531,3537,this.L,3538,3540,this.NSM,3541,3541,this.L,3542,3542,this.NSM,3543,3632,this.L,3633,3633,this.NSM,3634,3635,this.L,3636,3642,this.NSM,3643,3646,this.L,3647,3647,this.ET,3648,3654,this.L,3655,3662,this.NSM,3663,3760,this.L,3761,3761,this.NSM,3762,3763,this.L,3764,3769,this.NSM,3770,3770,this.L,3771,3772,this.NSM,3773,3783,this.L,3784,3789,this.NSM,3790,3863,this.L,3864,3865,this.NSM,3866,3892,this.L,3893,3893,this.NSM,3894,3894,this.L,3895,3895,this.NSM,3896,3896,this.L,3897,3897,this.NSM,3898,3901,this.ON,3902,3952,this.L,3953,3966,this.NSM,3967,3967,this.L,3968,3972,this.NSM,3973,3973,this.L,3974,3975,this.NSM,3976,3983,this.L,3984,3991,this.NSM,3992,3992,this.L,3993,4028,this.NSM,4029,4037,this.L,4038,4038,this.NSM,4039,4140,this.L,4141,4144,this.NSM,4145,4145,this.L,4146,4146,this.NSM,4147,4149,this.L,4150,4151,this.NSM,4152,4152,this.L,4153,4153,this.NSM,4154,4183,this.L,4184,4185,this.NSM,4186,5759,this.L,5760,5760,this.WS,5761,5786,this.L,5787,5788,this.ON,5789,5905,this.L,5906,5908,this.NSM,5909,5937,this.L,5938,5940,this.NSM,5941,5969,this.L,5970,5971,this.NSM,5972,6001,this.L,6002,6003,this.NSM,6004,6070,this.L,6071,6077,this.NSM,6078,6085,this.L,6086,6086,this.NSM,6087,6088,this.L,6089,6099,this.NSM,6100,6106,this.L,6107,6107,this.ET,6108,6108,this.L,6109,6109,this.NSM,6110,6127,this.L,6128,6137,this.ON,6138,6143,this.L,6144,6154,this.ON,6155,6157,this.NSM,6158,6158,this.WS,6159,6312,this.L,6313,6313,this.NSM,6314,6431,this.L,6432,6434,this.NSM,6435,6438,this.L,6439,6443,this.NSM,6444,6449,this.L,6450,6450,this.NSM,6451,6456,this.L,6457,6459,this.NSM,6460,6463,this.L,6464,6464,this.ON,6465,6467,this.L,6468,6469,this.ON,6470,6623,this.L,6624,6655,this.ON,6656,8124,this.L,8125,8125,this.ON,8126,8126,this.L,8127,8129,this.ON,8130,8140,this.L,8141,8143,this.ON,8144,8156,this.L,8157,8159,this.ON,8160,8172,this.L,8173,8175,this.ON,8176,8188,this.L,8189,8190,this.ON,8191,8191,this.L,8192,8202,this.WS,8203,8205,this.BN,8206,8206,this.L,8207,8207,this.R,8208,8231,this.ON,8232,8232,this.WS,8233,8233,this.B,8234,8234,this.LRE,8235,8235,this.RLE,8236,8236,this.PDF,8237,8237,this.LRO,8238,8238,this.RLO,8239,8239,this.WS,8240,8244,this.ET,8245,8276,this.ON,8277,8278,this.L,8279,8279,this.ON,8280,8286,this.L,8287,8287,this.WS,8288,8291,this.BN,8292,8297,this.L,8298,8303,this.BN,8304,8304,this.EN,8305,8307,this.L,8308,8313,this.EN,8314,8315,this.ET,8316,8318,this.ON,8319,8319,this.L,8320,8329,this.EN,8330,8331,this.ET,8332,8334,this.ON,8335,8351,this.L,8352,8369,this.ET,8370,8399,this.L,8400,8426,this.NSM,8427,8447,this.L,8448,8449,this.ON,8450,8450,this.L,8451,8454,this.ON,8455,8455,this.L,8456,8457,this.ON,8458,8467,this.L,8468,8468,this.ON,8469,8469,this.L,8470,8472,this.ON,8473,8477,this.L,8478,8483,this.ON,8484,8484,this.L,8485,8485,this.ON,8486,8486,this.L,8487,8487,this.ON,8488,8488,this.L,8489,8489,this.ON,8490,8493,this.L,8494,8494,this.ET,8495,8497,this.L,8498,8498,this.ON,8499,8505,this.L,8506,8507,this.ON,8508,8511,this.L,8512,8516,this.ON,8517,8521,this.L,8522,8523,this.ON,8524,8530,this.L,8531,8543,this.ON,8544,8591,this.L,8592,8721,this.ON,8722,8723,this.ET,8724,9013,this.ON,9014,9082,this.L,9083,9108,this.ON,9109,9109,this.L,9110,9168,this.ON,9169,9215,this.L,9216,9254,this.ON,9255,9279,this.L,9280,9290,this.ON,9291,9311,this.L,9312,9371,this.EN,9372,9449,this.L,9450,9450,this.EN,9451,9751,this.ON,9752,9752,this.L,9753,9853,this.ON,9854,9855,this.L,9856,9873,this.ON,9874,9887,this.L,9888,9889,this.ON,9890,9984,this.L,9985,9988,this.ON,9989,9989,this.L,9990,9993,this.ON,9994,9995,this.L,9996,10023,this.ON,10024,10024,this.L,10025,10059,this.ON,10060,10060,this.L,10061,10061,this.ON,10062,10062,this.L,10063,10066,this.ON,10067,10069,this.L,10070,10070,this.ON,10071,10071,this.L,10072,10078,this.ON,10079,10080,this.L,10081,10132,this.ON,10133,10135,this.L,10136,10159,this.ON,10160,10160,this.L,10161,10174,this.ON,10175,10191,this.L,10192,10219,this.ON,10220,10223,this.L,10224,11021,this.ON,11022,11903,this.L,11904,11929,this.ON,11930,11930,this.L,11931,12019,this.ON,12020,12031,this.L,12032,12245,this.ON,12246,12271,this.L,12272,12283,this.ON,12284,12287,this.L,12288,12288,this.WS,12289,12292,this.ON,12293,12295,this.L,12296,12320,this.ON,12321,12329,this.L,12330,12335,this.NSM,12336,12336,this.ON,12337,12341,this.L,12342,12343,this.ON,12344,12348,this.L,12349,12351,this.ON,12352,12440,this.L,12441,12442,this.NSM,12443,12444,this.ON,12445,12447,this.L,12448,12448,this.ON,12449,12538,this.L,12539,12539,this.ON,12540,12828,this.L,12829,12830,this.ON,12831,12879,this.L,12880,12895,this.ON,12896,12923,this.L,12924,12925,this.ON,12926,12976,this.L,12977,12991,this.ON,12992,13003,this.L,13004,13007,this.ON,13008,13174,this.L,13175,13178,this.ON,13179,13277,this.L,13278,13279,this.ON,13280,13310,this.L,13311,13311,this.ON,13312,19903,this.L,19904,19967,this.ON,19968,42127,this.L,42128,42182,this.ON,42183,64284,this.L,64285,64285,this.R,64286,64286,this.NSM,64287,64296,this.R,64297,64297,this.ET,64298,64310,this.R,64311,64311,this.L,64312,64316,this.R,64317,64317,this.L,64318,64318,this.R,64319,64319,this.L,64320,64321,this.R,64322,64322,this.L,64323,64324,this.R,64325,64325,this.L,64326,64335,this.R,64336,64433,this.AL,64434,64466,this.L,64467,64829,this.AL,64830,64831,this.ON,64832,64847,this.L,64848,64911,this.AL,64912,64913,this.L,64914,64967,this.AL,64968,65007,this.L,65008,65020,this.AL,65021,65021,this.ON,65022,65023,this.L,65024,65039,this.NSM,65040,65055,this.L,65056,65059,this.NSM,65060,65071,this.L,65072,65103,this.ON,65104,65104,this.CS,65105,65105,this.ON,65106,65106,this.CS,65107,65107,this.L,65108,65108,this.ON,65109,65109,this.CS,65110,65118,this.ON,65119,65119,this.ET,65120,65121,this.ON,65122,65123,this.ET,65124,65126,this.ON,65127,65127,this.L,65128,65128,this.ON,65129,65130,this.ET,65131,65131,this.ON,65132,65135,this.L,65136,65140,this.AL,65141,65141,this.L,65142,65276,this.AL,65277,65278,this.L,65279,65279,this.BN,65280,65280,this.L,65281,65282,this.ON,65283,65285,this.ET,65286,65290,this.ON,65291,65291,this.ET,65292,65292,this.CS,65293,65293,this.ET,65294,65294,this.CS,65295,65295,this.ES,65296,65305,this.EN,65306,65306,this.CS,65307,65312,this.ON,65313,65338,this.L,65339,65344,this.ON,65345,65370,this.L,65371,65381,this.ON,65382,65503,this.L,65504,65505,this.ET,65506,65508,this.ON,65509,65510,this.ET,65511,65511,this.L,65512,65518,this.ON,65519,65528,this.L,65529,65531,this.BN,65532,65533,this.ON,65534,65535,this.L];for(let e=0;e<this.charTypes.length;++e){let t=this.charTypes[e],s=this.charTypes[++e],n=this.charTypes[++e];for(;t<=s;)this.rtlCharacterTypes[t++]=n}}getVisualOrder(e,t){this.types=this.getCharacterCode(e),this.textOrder=t?this.LRE:this.L,this.doVisualOrder();let s=[];for(let n=0;n<this.levels.length;n++)s[n]=this.levels[n];return s}getCharacterCode(e){let t=[];for(let s=0;s<e.length;s++)t[s]=this.rtlCharacterTypes[e[s].charCodeAt(0)];return t}setDefaultLevels(){for(let e=0;e<this.length;e++)this.levels[e]=this.textOrder}setLevels(){this.setDefaultLevels();for(let e=0;e<this.length;++e){let t=this.levels[e];0!=(128&t)&&(t&=127,this.result[e]=0==(1&t)?this.L:this.R),this.levels[e]=t}}updateLevels(e,t,s){if(0==(1&t))for(let n=e;n<s;++n)this.result[n]===this.R?this.levels[n]+=1:this.result[n]!==this.L&&(this.levels[n]+=2);else for(let n=e;n<s;++n)this.result[n]!==this.R&&(this.levels[n]+=1)}doVisualOrder(){this.length=this.types.length,this.result=this.types,this.levels=[],this.setLevels(),this.length=this.getEmbeddedCharactersLength();let e=this.textOrder,t=0;for(;t<this.length;){let s=this.levels[t],n=0==(1&Math.max(e,s))?this.L:this.R,r=t+1;for(;r<this.length&&this.levels[r]===s;)++r;let m=0==(1&Math.max(r<this.length?this.levels[r]:this.textOrder,s))?this.L:this.R;this.checkNSM(t,r,s,n,m),this.updateLevels(t,s,r),e=s,t=r}this.checkEmbeddedCharacters(this.length)}getEmbeddedCharactersLength(){let e=0;for(let t=0;t<this.length;++t)this.types[t]===this.LRE||this.types[t]===this.RLE||this.types[t]===this.LRO||this.types[t]===this.RLO||this.types[t]===this.PDF||this.types[t]===this.BN||(this.result[e]=this.result[t],this.levels[e]=this.levels[t],e++);return e}checkEmbeddedCharacters(e){for(let t=this.types.length-1;t>=0;--t)this.types[t]===this.LRE||this.types[t]===this.RLE||this.types[t]===this.LRO||this.types[t]===this.RLO||this.types[t]===this.PDF||this.types[t]===this.BN?(this.result[t]=this.types[t],this.levels[t]=-1):(this.result[t]=this.result[e-=1],this.levels[t]=this.levels[e]);for(let t=0;t<this.types.length;t++)-1===this.levels[t]&&(this.levels[t]=0===t?this.textOrder:this.levels[t-1])}checkNSM(e,t,s,n,r){let h=n;for(let m=e;m<t;++m)this.result[m]===this.NSM?this.result[m]=h:h=this.result[m];this.checkEuropeanDigits(e,t,s,n,r)}checkEuropeanDigits(e,t,s,n,r){for(let h=e;h<t;++h)if(this.result[h]===this.EN)for(let m=h-1;m>=e;--m)if(this.result[m]===this.L||this.result[m]===this.R||this.result[m]===this.AL){this.result[m]===this.AL&&(this.result[h]=this.AN);break}this.checkArabicCharacters(e,t,s,n,r)}checkArabicCharacters(e,t,s,n,r){for(let h=e;h<t;++h)this.result[h]===this.AL&&(this.result[h]=this.R);this.checkEuropeanNumberSeparator(e,t,s,n,r)}checkEuropeanNumberSeparator(e,t,s,n,r){for(let h=e+1;h<t-1;++h)if(this.result[h]===this.ES||this.result[h]===this.CS){let m=this.result[h-1],T=this.result[h+1];m===this.EN&&T===this.EN?this.result[h]=this.EN:this.result[h]===this.CS&&m===this.AN&&T===this.AN&&(this.result[h]=this.AN)}this.checkEuropeanNumberTerminator(e,t,s,n,r)}checkEuropeanNumberTerminator(e,t,s,n,r){for(let h=e;h<t;++h)if(this.result[h]===this.ET){let m=h,T=[];T.push(this.ET);let V=this.getLength(m,t,T),Y=m===e?n:this.result[m-1];if(Y!==this.EN&&(Y=V===t?r:this.result[V]),Y===this.EN)for(let se=m;se<V;++se)this.result[se]=this.EN;h=V}this.checkOtherNeutrals(e,t,s,n,r)}checkOtherNeutrals(e,t,s,n,r){for(let h=e;h<t;++h)(this.result[h]===this.ES||this.result[h]===this.ET||this.result[h]===this.CS)&&(this.result[h]=this.ON);this.checkOtherCharacters(e,t,s,n,r)}checkOtherCharacters(e,t,s,n,r){for(let h=e;h<t;++h)if(this.result[h]===this.EN){let m=n;for(let T=h-1;T>=e;--T)if(this.result[T]===this.L||this.result[T]===this.R){m=this.result[T];break}m===this.L&&(this.result[h]=this.L)}this.checkCommanCharacters(e,t,s,n,r)}getLength(e,t,s){for(--e;++e<t;){let n=this.result[e];for(let r=0;r<s.length;++r)n===s[r]&&(e=this.getLength(++e,t,s));return e}return t}checkCommanCharacters(e,t,s,n,r){for(let h=e;h<t;++h)if(this.result[h]===this.WS||this.result[h]===this.ON||this.result[h]===this.B||this.result[h]===this.S){let m=h,V=this.getLength(m,t,[this.B,this.S,this.WS,this.ON]),Y=0,se=0,ge=0;m===e?Y=n:(Y=this.result[m-1],(Y===this.AN||Y===this.EN)&&(Y=this.R)),V===t?se=r:(se=this.result[V],(se===this.AN||se===this.EN)&&(se=this.R)),ge=Y===se?Y:0==(1&s)?this.L:this.R;for(let ke=m;ke<V;++ke)this.result[ke]=ge;h=V}}}class vr{constructor(){this.openBracket="(",this.closeBracket=")"}layout(e,t,s,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");let h=[];return t.Unicode?h=this.customLayout(e,s,r,t,n):(h=[],h[0]=e),h}splitLayout(e,t,s,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");let h=[];return h=this.customSplitLayout(e,t,s,n,r),h}getGlyphIndex(e,t,s,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");if(n=null,0===e.length)return{success:!1,glyphs:n};let V=(new uo).shape(e,0),se=t.fontInternal.ttfReader;n=new Uint16Array(V.length);let ge=0;for(let ke=0,qe=V.length;ke<qe;ke++){let Vt=se.getGlyph(V[ke]);null!==Vt&&typeof Vt<"u"&&(n[ge++]=Vt.index)}return{success:!0,glyphs:n}}customLayout(e,t,s,n,r){if(null===r||typeof r>"u"){if(null==e)throw new Error("ArgumentNullException : line");let h=null;return null!==s&&typeof s<"u"&&s.textDirection!==di.None&&(h=(new mn).getLogicalToVisualString(e,t)),h}{if(null==e)throw new Error("ArgumentNullException : line");if(null==n)throw new Error("ArgumentNullException : font");let h=null;if(null!==s&&typeof s<"u"&&s.textDirection!==di.None){let V=(new uo).shape(e,0);h=this.customLayout(V,t,s)}let m=[];if(r){let T=h.split(""),V=T.length;for(let Y=0;Y<V;Y++)T[Y]=this.addChars(n,T[Y]);m=T}else m=[],m[0]=this.addChars(n,h);return m}}addChars(e,t){let s=t;if(null==e)throw new Error("ArgumentNullException : font");if(null==s)throw new Error("ArgumentNullException : line");let n=s,h=e.fontInternal.ttfReader;e.setSymbols(n),n=h.convertString(n);let m=et.toUnicodeArray(n,!1);return n=et.byteToString(m),n}customSplitLayout(e,t,s,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");return this.customLayout(e,s,r).split("")}}var Qr=(()=>{return(b=Qr||(Qr={}))[b.Paginate=0]="Paginate",b[b.OnePage=1]="OnePage",Qr;var b})(),zs=(()=>{return(b=zs||(zs={}))[b.FitPage=0]="FitPage",b[b.FitElement=1]="FitElement",b[b.FitColumnsToPage=2]="FitColumnsToPage",zs;var b})(),ur=(()=>{return(b=ur||(ur={}))[b.Start=0]="Start",b[b.Line=1]="Line",b[b.Bezier3=3]="Bezier3",b[b.Bezier=3]="Bezier",b[b.PathTypeMask=7]="PathTypeMask",b[b.DashMode=16]="DashMode",b[b.PathMarker=32]="PathMarker",b[b.CloseSubpath=128]="CloseSubpath",ur;var b})();class ir extends bs{constructor(e){super(),this.mbackground=new ot(255,255,255),this.mbStroking=!1,this.mfunction=null,this.dictionaryProperties=new de,this.mpatternDictionary=new Be,this.mpatternDictionary.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.pattern)),this.mpatternDictionary.items.setValue(this.dictionaryProperties.patternType,new ui(2)),this.shading=e,this.colorSpace=Oi.Rgb}get background(){return this.mbackground}set background(e){this.mbackground=e;let t=this.shading;e.isEmpty?t.remove(this.dictionaryProperties.background):t.items.setValue(this.dictionaryProperties.background,e.toArray(this.colorSpace))}get antiAlias(){return this.shading.items.getValue(this.dictionaryProperties.antiAlias).value}set antiAlias(e){let t=this.shading,s=t.items.getValue(this.dictionaryProperties.antiAlias);null==s&&typeof s>"u"?(s=new ro(e),t.items.setValue(this.dictionaryProperties.antiAlias,s)):s.value=e}get function(){return this.mfunction}set function(e){this.mfunction=e,null!=e&&typeof e<"u"?this.shading.items.setValue(this.dictionaryProperties.function,new Xt(this.mfunction)):this.shading.remove(this.dictionaryProperties.function)}get bBox(){return this.shading.items.getValue(this.dictionaryProperties.bBox)}set bBox(e){let t=this.shading;null==e&&typeof e>"u"?t.remove(this.dictionaryProperties.bBox):t.items.setValue(this.dictionaryProperties.bBox,e)}get colorSpace(){return this.mcolorSpace}set colorSpace(e){let t=this.shading.items.getValue(this.dictionaryProperties.colorSpace);if(e!==this.mcolorSpace||null==t){this.mcolorSpace=e;let s=this.colorSpaceToDeviceName(e);this.shading.items.setValue(this.dictionaryProperties.colorSpace,new Xe(s))}}get stroking(){return this.mbStroking}set stroking(e){this.mbStroking=e}get patternDictionary(){return null==this.mpatternDictionary&&(this.mpatternDictionary=new Be),this.mpatternDictionary}get shading(){return this.mshading}set shading(e){if(null==e)throw new Error("ArgumentNullException : Shading");e!==this.mshading&&(this.mshading=e,this.patternDictionary.items.setValue(this.dictionaryProperties.shading,new Xt(this.mshading)))}get matrix(){return this.mmatrix}set matrix(e){if(null==e)throw new Error("ArgumentNullException : Matrix");if(e!==this.mmatrix){this.mmatrix=e.clone();let t=new Ut(this.mmatrix.matrix.elements);this.mpatternDictionary.items.setValue(this.dictionaryProperties.matrix,t)}}monitorChanges(e,t,s,n,r){let h=!1;if(e instanceof ir){this.colorSpace!==r&&(this.colorSpace=r,this.resetFunction()),t.setColorSpace("Pattern",this.mbStroking);let T=s.getResources().getName(this);t.setColourWithPattern(null,T,this.mbStroking),h=!0}return h}resetChanges(e){}colorSpaceToDeviceName(e){let t;return e===Oi.Rgb&&(t="DeviceRGB"),t}resetPatternDictionary(e){this.mpatternDictionary=e}cloneAntiAliasingValue(e){if(null==e)throw new Error("ArgumentNullException : brush");let s=this.shading.items.getValue(this.dictionaryProperties.antiAlias);null!=s&&e.shading.items.setValue(this.dictionaryProperties.antiAlias,new ro(s.value))}cloneBackgroundValue(e){let t=this.background;t.isEmpty||(e.background=t)}get element(){return this.patternDictionary}}class qs{constructor(e,t){if(this.dictionaryProperties=new de,this.writeTransformation=!0,!(typeof e>"u"))if(e instanceof Ei&&typeof t>"u"){this.content=new oi;let s=new Ei(e.width,e.height);this.setSize(s),this.initialize()}else this.content=new oi,this.setSize(new Ei(e,t)),this.initialize()}get size(){return this.templateSize}get width(){return this.size.width}get height(){return this.size.height}get graphics(){if(null==this.pdfGraphics||typeof this.pdfGraphics>"u"){let e=new xi(this),t=new ks(this.size,e,this.content);this.pdfGraphics=t,this.pdfGraphics.initializeCoordinates()}return this.pdfGraphics}getResources(){return null==this.resources&&(this.resources=new $r,this.content.items.setValue(this.dictionaryProperties.resources,this.resources)),this.resources}initialize(){this.addType(),this.addSubType()}addType(){let e=new Xe(this.dictionaryProperties.xObject);this.content.items.setValue(this.dictionaryProperties.type,e)}addSubType(){let e=new Xe(this.dictionaryProperties.form);this.content.items.setValue(this.dictionaryProperties.subtype,e)}reset(e){typeof e>"u"?(null!=this.resources&&(this.resources=null,this.content.remove(this.dictionaryProperties.resources)),null!=this.graphics&&this.graphics.reset(this.size)):(this.setSize(e),this.reset())}setSize(e){let t=new Ui(new hi(0,0),e),s=Ut.fromRectangle(t);this.content.items.setValue(this.dictionaryProperties.bBox,s),this.templateSize=e}get element(){return this.content}}class $r extends Be{constructor(e){super(e),this.properties=new Be}get names(){return this.getNames()}get document(){return this.pdfDocument}set document(e){this.pdfDocument=e}getName(e){let t=e.element,s=null;if(this.names.containsKey(t)&&(s=this.names.getValue(t)),null==s){let n=this.generateName();s=new Xe(n),this.names.setValue(t,s),(e instanceof Rs||e instanceof qs||e instanceof ir||e instanceof Pn||e instanceof $n||e instanceof Vr||e instanceof Zn)&&this.add(e,s)}return s}getNames(){null==this.pdfNames&&(this.pdfNames=new qn);let e=this.items.getValue(this.dictionaryProperties.font);if(null!=e){let t=e;t=Fi.dereference(e)}return this.pdfNames}requireProcedureSet(e){if(null==e)throw new Error("ArgumentNullException:procedureSetName");let t=this.items.getValue(this.dictionaryProperties.procset);null==t&&(t=new Ut,this.items.setValue(this.dictionaryProperties.procset,t));let s=new Xe(e);t.contains(s)||t.add(s)}removeFont(e){let t=null,s=this.pdfNames.keys();for(let n=0;n<this.pdfNames.size();n++)if(this.pdfNames.getValue(s[n])===new Xe(e)){t=s[n];break}null!=t&&this.pdfNames.remove(t)}generateName(){return class Ir{static getNewGuidString(){return"aaaaaaaa-aaaa-4aaa-baaa-aaaaaaaaaaaa".replace(/[ab]/g,e=>{let t=16*Math.random()|0;return("a"===e?t:3&t|8).toString(16)})}}.getNewGuidString()}add(e,t){if(e instanceof Rs){let s=null,n=this.items.getValue(this.dictionaryProperties.font);null!=n?(s=n,s=n):(s=new Be,this.items.setValue(this.dictionaryProperties.font,s)),s.items.setValue(t.value,new Xt(e.element))}else if(e instanceof qs){let s;s=this.items.getValue(this.dictionaryProperties.xObject),null==s&&(s=new Be,this.items.setValue(this.dictionaryProperties.xObject,s)),s.items.setValue(t.value,new Xt(e.element))}else if(e instanceof bs){if(e instanceof ir||e instanceof Pn){let s=e.element;if(null!=s){let n=this.items.getValue(this.dictionaryProperties.pattern);null==n&&(n=new Be,this.items.setValue(this.dictionaryProperties.pattern,n)),n.items.setValue(t.value,new Xt(s))}}}else if(e instanceof $n){let s=e.element,n=null;n=this.items.getValue(this.dictionaryProperties.extGState),null==n&&(n=new Be,this.items.setValue(this.dictionaryProperties.extGState,n)),n.items.setValue(t.value,new Xt(s))}else{let n,s=this.Dictionary.items.getValue(this.dictionaryProperties.xObject);typeof this.pdfDocument<"u"&&(n=this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.getValue(this.dictionaryProperties.xObject)),this.Dictionary.items.values();let m,h=!1;if(typeof this.pdfDocument<"u"&&(void 0===typeof n||null==n))n=new Be,this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.setValue(this.dictionaryProperties.xObject,n);else if(typeof this.pdfDocument<"u"){let T=n.items.values();for(let V=0;V<T.length;V++)typeof T[V]<"u"&&typeof T[V].element<"u"&&T[V].element.data[0]===e.element.data[0]&&(m=T[V],h=!0)}if(null==s&&(s=new Be,this.Dictionary.items.setValue(this.dictionaryProperties.xObject,s)),h&&typeof m<"u")s.items.setValue(t.value,m);else{let T=new Xt(e.element);s.items.setValue(t.value,T),typeof this.pdfDocument<"u"&&n.items.setValue(t.value,T)}}}}class Pn extends bs{constructor(e,t){super(),this.mStroking=!1,this.mLocation=new hi(0,0),this.mDictionaryProperties=new de;let s=null;e instanceof As?s=e:e instanceof Ei&&(s=new As(0,0,e.width,e.height)),null!==t&&t instanceof wi&&(this.mPage=t),this.brushStream=new oi,this.mResources=new $r,this.brushStream.items.setValue(this.mDictionaryProperties.resources,this.mResources),this.setBox(s),this.setObligatoryFields(),null!==t&&t instanceof wi&&(this.mPage=t,this.graphics.colorSpace=t.document.colorSpace)}initialize(e,t,s,n){this.mPage=t,this.mLocation=s,this.mTransformationMatrix=n,this.tempBrushStream=this.brushStream,this.brushStream=new oi;let r=new $r;return this.brushStream.items.setValue(this.mDictionaryProperties.resources,r),this.setBox(e),this.setObligatoryFields(),this}get location(){return this.mLocation}set location(e){this.mLocation=e}setObligatoryFields(){if(this.brushStream.items.setValue(this.mDictionaryProperties.patternType,new ui(1)),this.brushStream.items.setValue(this.mDictionaryProperties.paintType,new ui(1)),this.brushStream.items.setValue(this.mDictionaryProperties.tilingType,new ui(1)),this.brushStream.items.setValue(this.mDictionaryProperties.xStep,new ui(this.mBox.right-this.mBox.left)),this.brushStream.items.setValue(this.mDictionaryProperties.yStep,new ui(this.mBox.bottom-this.mBox.top)),null!=this.mPage&&null!=this.mLocation)if(null==this.mTransformationMatrix&&typeof this.mTransformationMatrix>"u")this.brushStream.items.setValue(this.mDictionaryProperties.matrix,new Ut([1,0,0,1,this.mLocation.x,this.mPage.size.height%this.rectangle.size.height-this.mLocation.y]));else{let e=0,t=this.mTransformationMatrix.matrix.elements;e=this.mPage.size.height>this.rectangle.size.height?this.mTransformationMatrix.matrix.offsetY-this.mPage.size.height%this.rectangle.size.height:this.mPage.size.height%this.rectangle.size.height+this.mTransformationMatrix.matrix.offsetY,this.brushStream.items.setValue(this.mDictionaryProperties.matrix,new Ut([t[0],t[1],t[2],t[3],t[4],e]))}}setBox(e){this.mBox=e;let t=new Ui(this.mBox.left,this.mBox.top,this.mBox.right,this.mBox.bottom);this.brushStream.items.setValue(this.mDictionaryProperties.bBox,Ut.fromRectangle(t))}get rectangle(){return this.mBox}get size(){return this.mBox.size}get graphics(){if(null==this.mGraphics&&typeof this.mGraphics>"u"){let e=new xi(this),t=new ks(this.size,e,this.brushStream);this.mGraphics=t,this.mResources=this.getResources(),this.mGraphics.initializeCoordinates()}return this.mGraphics}getResources(){return this.mResources}get stroking(){return this.mStroking}set stroking(e){this.mStroking=e}clone(){let e=this.initialize(this.rectangle,this.mPage,this.location,this.mTransformationMatrix);return null!=this.mTransformationMatrix&&null!=this.mTransformationMatrix.matrix&&e.brushStream.items.setValue(this.mDictionaryProperties.matrix,new Ut(this.mTransformationMatrix.matrix.elements)),e.brushStream.data=this.tempBrushStream.data,e.mResources=new $r(this.mResources),e.brushStream.items.setValue(this.mDictionaryProperties.resources,e.mResources),e}monitorChanges(e,t,s,n,r){let h=!1;if(e!==this){t.setColorSpace("Pattern",this.mStroking);let T=s.getResources().getName(this);t.setColourWithPattern(null,T,this.mStroking),h=!0}else if(e instanceof Pn){t.setColorSpace("Pattern",this.mStroking);let T=s.getResources().getName(this);t.setColourWithPattern(null,T,this.mStroking),h=!0}return h}resetChanges(e){}get element(){return this.brushStream}}let ks=(()=>{class b{constructor(t,s,n){this.currentColorSpace=Oi.Rgb,this.previousTextRenderingMode=gs.Fill,this.previousCharacterSpacing=0,this.previousWordSpacing=0,this.previousTextScaling=100,this.procedureSets=new ln,this.isNormalRender=!0,this.isUseFontSize=!1,this.isItalic=!1,this.isEmfTextScaled=!1,this.isEmf=!1,this.isEmfPlus=!1,this.isBaselineFormat=!0,this.emfScalingFactor=new Ei(0,0),this.colorSpaceChanged=!1,this.dictionaryProperties=new de,this.isOverloadWithPosition=!1,this.isPointOverload=!1,this.currentColorSpaces=["RGB","CMYK","GrayScale","Indexed"],this.isImageOptimized=!1,this.graphicsState=[],this.istransparencySet=!1,this.internalAutomaticFields=null,this.startCutIndex=-1,this.getResources=s,this.canvasSize=t,this.pdfStreamWriter=n instanceof Rr?n:new Rr(n),this.initialize()}get stringLayoutResult(){return this.pdfStringLayoutResult}get size(){return this.canvasSize}get mediaBoxUpperRightBound(){return typeof this.internalMediaBoxUpperRightBound>"u"&&(this.internalMediaBoxUpperRightBound=0),this.internalMediaBoxUpperRightBound}set mediaBoxUpperRightBound(t){this.internalMediaBoxUpperRightBound=t}get clientSize(){return new Ei(this.clipBounds.width,this.clipBounds.height)}get colorSpace(){return this.currentColorSpace}set colorSpace(t){this.currentColorSpace=t}get streamWriter(){return this.pdfStreamWriter}get matrix(){return null==this.transformationMatrix&&(this.transformationMatrix=new hn),this.transformationMatrix}get layer(){return this.pageLayer}get page(){return this.pageLayer.page}get automaticFields(){return(null==this.internalAutomaticFields||typeof this.internalAutomaticFields>"u")&&(this.internalAutomaticFields=new gr),this.internalAutomaticFields}initialize(){this.bStateSaved=!1,this.currentPen=null,this.currentBrush=null,this.currentFont=null,this.currentColorSpace=Oi.Rgb,this.bCSInitialized=!1,this.transformationMatrix=null,this.previousTextRenderingMode=-1,this.previousCharacterSpacing=-1,this.previousWordSpacing=-1,this.previousTextScaling=-100,this.currentStringFormat=null,this.clipBounds=new Ui(new hi(0,0),this.size),this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf)}drawPdfTemplate(t,s,n){if(typeof n>"u"){if(null==t)throw Error("ArgumentNullException-template");this.drawPdfTemplate(t,s,t.size)}else{if(null==t)throw Error("ArgumentNullException-template");let r=t.width>0?n.width/t.width:1,h=t.height>0?n.height/t.height:1,m=!(1===r&&1===h),T=this.save(),V=new hn;null!=this.pageLayer&&this.getTranslateTransform(s.x,s.y+n.height,V),m&&this.getScaleTransform(r,h,V),this.pdfStreamWriter.modifyCtm(V);let se=this.getResources.getResources().getName(t);this.pdfStreamWriter.executeObject(se),this.restore(T);let ge=t.graphics;if(null!=ge)for(let ke=0;ke<ge.automaticFields.automaticFields.length;ke++){let qe=ge.automaticFields.automaticFields[ke],mt=new hi(qe.location.x+s.x,qe.location.y+s.y);this.automaticFields.add(new Cn(qe.field,mt,0==t.size.width?0:n.width/t.size.width,0==t.size.height?0:n.height/t.size.height)),this.page.dictionary.modify()}this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB),this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC),this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI),this.getResources.getResources().requireProcedureSet(this.procedureSets.text)}}drawString(t,s,n,r,h,m,T,V,Y){if("string"==typeof t&&s instanceof Rs&&(n instanceof rs||null===n)&&(r instanceof bs||null===r)&&"number"==typeof h&&"number"==typeof m&&(T instanceof In||null===T)&&typeof V>"u")this.isOverloadWithPosition=!0,this.drawString(t,s,n,r,h,m,this.clientSize.width-h,0,T);else{let se=n,ge=r,ke=h,qe=m,mt=T,Vt=V,Qt=Y,ki=(new Yt).layout(t,s,Qt,new Ei(mt,Vt),this.isOverloadWithPosition,this.clientSize);if(!ki.empty){let Qi=this.checkCorrectLayoutRectangle(ki.actualSize,ke,qe,Qt);mt<=0&&(ke=Qi.x,mt=Qi.width),Vt<=0&&(qe=Qi.y,Vt=Qi.height),this.drawStringLayoutResult(ki,s,se,ge,new Ui(ke,qe,mt,Vt),Qt),this.isEmfTextScaled=!1,this.emfScalingFactor=new Ei(0,0)}this.getResources.getResources().requireProcedureSet(this.procedureSets.text),this.isNormalRender=!0,this.pdfStringLayoutResult=ki,this.isUseFontSize=!1}}drawLine(t,s,n,r,h){if(s instanceof hi)this.drawLine(t,s.x,s.y,n.x,n.y);else{let m=s,T=n,V=r,Y=h;this.stateControl(t,null,null);let se=this.streamWriter;se.beginPath(m,T),se.appendLineSegment(V,Y),se.strokePath(),this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf)}}drawRectangle(t,s,n,r,h,m){if(t instanceof rs&&"number"==typeof s)this.drawRectangle(t,null,s,n,r,h);else if(t instanceof bs&&"number"==typeof s)this.drawRectangle(null,t,s,n,r,h);else{let T=n,V=r,Y=h,se=m;if(s instanceof Pn){let mt;this.bCSInitialized=!1,mt=null!=this.layer&&null!=this.layer.page?this.layer.page.size.height-this.matrix.matrix.offsetY+V:this.clientSize.height-this.matrix.matrix.offsetY+V,s.location=new hi(this.matrix.matrix.offsetX+T,mt),s.graphics.colorSpace=this.colorSpace}else s instanceof ir&&(s.colorSpace=this.colorSpace);s instanceof kt&&s.color.isEmpty&&(s=null);let ge=t,ke=s;this.stateControl(ge,ke,null),this.streamWriter.appendRectangle(T,V,Y,se),this.drawPathHelper(ge,ke,!1)}}drawPathHelper(t,s,n,r){if("boolean"==typeof n)this.drawPathHelper(t,s,li.Winding,n);else{let m=null!=t,T=null!=s,V=n===li.Alternate;m&&T?this.streamWriter.fillStrokePath(V):m||T?m?this.streamWriter.strokePath():this.streamWriter.fillPath(V):this.streamWriter.endPath()}}drawImage(t,s,n,r,h){if("number"==typeof s&&"number"==typeof n&&typeof r>"u"){let m=t.physicalDimension;this.drawImage(t,s,n,m.width,m.height)}else{let m=s,T=n,V=h;t.save();let Y=new hn;this.getTranslateTransform(m,T+V,Y),this.getScaleTransform(r,h,Y),this.pdfStreamWriter.write("q"),this.pdfStreamWriter.modifyCtm(Y);let se=this.getResources.getResources();typeof this.pageLayer<"u"&&null!=this.page&&(se.document=this.page.document);let ge=se.getName(t);typeof this.pageLayer<"u"&&this.page.setResources(se),this.pdfStreamWriter.executeObject(ge),this.pdfStreamWriter.write(B.restoreState),this.pdfStreamWriter.write(B.newLine);let ke=this.getResources.getResources();ke.requireProcedureSet(this.procedureSets.imageB),ke.requireProcedureSet(this.procedureSets.imageC),ke.requireProcedureSet(this.procedureSets.imageI),ke.requireProcedureSet(this.procedureSets.text)}}getLineBounds(t,s,n,r,h){let m;if(!s.empty&&t<s.lineCount&&t>=0){let T=s.lines[t],Y=this.getTextVerticalAlignShift(s.actualSize.height,r.height,h)+r.y+s.lineHeight*t,se=T.width,ge=this.getHorizontalAlignShift(se,r.width,h),ke=this.getLineIndent(T,h,r,0===t);ge+=this.rightToLeft(h)?0:ke;let qe=r.x+ge,mt=this.shouldJustify(T,r.width,h)?r.width-ke:se-ke;m=new Ui(qe,Y,mt,s.lineHeight)}else m=new Ui(0,0,0,0);return m}checkCorrectLayoutRectangle(t,s,n,r){let h=new Ui(s,n,t.width,t.width);if(null!=r){switch(r.alignment){case Ci.Center:h.x-=h.width/2;break;case Ci.Right:h.x-=h.width}switch(r.lineAlignment){case qt.Middle:h.y-=h.height/2;break;case qt.Bottom:h.y-=h.height}}return h}setLayer(t){this.pageLayer=t;let s=t.page;null!=s&&typeof s<"u"&&(s.beginSave=this.pageSave)}pageSave(t){if(null!=t.graphics.automaticFields)for(let s=0;s<t.graphics.automaticFields.automaticFields.length;s++){let n=t.graphics.automaticFields.automaticFields[s];n.field.performDraw(t.graphics,n.location,n.scalingX,n.scalingY)}}drawStringLayoutResult(t,s,n,r,h,m){if(t.empty)throw new Error("ArgumentNullException:result");{this.applyStringSettings(s,n,r,m,h);let T=null!=m?m.horizontalScalingFactor:100;T!==this.previousTextScaling&&!this.isEmfTextScaled&&(this.pdfStreamWriter.setTextScaling(T),this.previousTextScaling=T);let V=null==m||0===m.lineSpacing?s.height:m.lineSpacing+s.height,se=0;se=null!=m&&m.subSuperScript===Ti.SubScript?V-(s.height+s.metrics.getDescent(m)):V-s.metrics.getAscent(m),this.shift=se,this.pdfStreamWriter.startNextLine(h.x,h.y-se),this.pdfStreamWriter.setLeading(+V);let ge=0,ke="";for(let mt=0;mt<t.lines.length;mt++)if(ge+=t.lineHeight,h.y+ge>this.clientSize.height){this.startCutIndex=mt;break}for(let mt=this.startCutIndex;mt<t.lines.length&&mt>=0;mt++)ke+=t.lines[mt].text;let qe=new Ui(h.x,h.y,h.width,h.height);this.drawLayoutResult(t,s,m,h),this.underlineStrikeoutText(n,r,t,s,qe,m),this.isEmfPlus=!1,this.isUseFontSize=!1,-1!==this.startCutIndex&&this.getNextPage().graphics.drawString(ke,s,n,r,h.x,0,h.width,0,m)}}getNextPage(){let t=this.currentPage.section,s=null,n=t.indexOf(this.currentPage);return s=n===t.count-1?t.add():t.getPages()[n+1],s}setClip(t,s){typeof s>"u"?this.setClip(t,li.Winding):(this.pdfStreamWriter.appendRectangle(t),this.pdfStreamWriter.clipPath(s===li.Alternate))}applyStringSettings(t,s,n,r,h){n instanceof Pn?(this.bCSInitialized=!1,n.graphics.colorSpace=this.colorSpace):n instanceof ir&&(this.bCSInitialized=!1,n.colorSpace=this.colorSpace);let m=this.getTextRenderingMode(s,n,r);this.stateControl(s,n,t,r),this.pdfStreamWriter.beginText(),m!==this.previousTextRenderingMode&&(this.pdfStreamWriter.setTextRenderingMode(m),this.previousTextRenderingMode=m);let T=null!=r?r.characterSpacing:0;T!==this.previousCharacterSpacing&&!this.isEmfTextScaled&&(this.pdfStreamWriter.setCharacterSpacing(T),this.previousCharacterSpacing=T);let V=null!=r?r.wordSpacing:0;V!==this.previousWordSpacing&&(this.pdfStreamWriter.setWordSpacing(V),this.previousWordSpacing=V)}getTextVerticalAlignShift(t,s,n){let r=0;if(s>=0&&null!=n&&n.lineAlignment!==qt.Top)switch(n.lineAlignment){case qt.Middle:r=(s-t)/2;break;case qt.Bottom:r=s-t}return r}drawLayoutResult(t,s,n,r){let h=this.getTextVerticalAlignShift(t.actualSize.height,r.height,n);0!==h&&this.pdfStreamWriter.startNextLine(0,h);let T=null!=s&&s.isUnicode,Y=t.lines;for(let se=0,ge=Y.length;se<ge&&se!==this.startCutIndex;se++){let ke=Y[se],Vt=this.getHorizontalAlignShift(ke.width,r.width,n),Qt=this.getLineIndent(ke,n,r,0===se);Vt+=this.rightToLeft(n)?0:Qt,0!==Vt&&!this.isEmfTextScaled&&this.pdfStreamWriter.startNextLine(Vt,0),T?this.drawUnicodeLine(ke,r,s,n):this.drawAsciiLine(ke,r,s,n),0!==Vt&&!this.isEmfTextScaled&&this.pdfStreamWriter.startNextLine(-Vt,0),this.isOverloadWithPosition&&Y.length>1&&(this.pdfStreamWriter.startNextLine(-r.x,0),r.x=0,r.width=this.clientSize.width,this.isOverloadWithPosition=!1,this.isPointOverload=!0)}this.getResources.getResources().requireProcedureSet(this.procedureSets.text),0!==h&&this.pdfStreamWriter.startNextLine(0,-(h-t.lineHeight)),this.pdfStreamWriter.endText()}drawAsciiLine(t,s,n,r){this.justifyLine(t,s.width,r);let h="";if(-1!==t.text.indexOf("(")||-1!==t.text.indexOf(")"))for(let T=0;T<t.text.length;T++)h+="("===t.text[T]?"\\(":")"===t.text[T]?"\\)":t.text[T];""===h&&(h=t.text),this.pdfStreamWriter.showNextLineText(new et("("+h+")"))}drawUnicodeLine(t,s,n,r){let h=t.text,T=null!==r&&typeof r<"u"&&r.rightToLeft,V=null!==r&&typeof r<"u"&&(0!==r.wordSpacing||r.alignment===Ci.Justify),Y=n,se=this.justifyLine(t,s.width,r),ge=new vr;if(T||null!==r&&typeof r<"u"&&r.textDirection!==di.None){let ke=null,qe=null!==r&&typeof r<"u"&&r.alignment===Ci.Right;ke=ge.layout(h,Y,null!==r&&typeof r<"u"&&r.textDirection!==di.None?r.textDirection===di.RightToLeft:qe,V,r);let mt=null;mt=ke.length>1?ge.splitLayout(h,Y,null!==r&&typeof r<"u"&&r.textDirection!==di.None?r.textDirection===di.RightToLeft:qe,V,r):[h],this.drawUnicodeBlocks(ke,mt,Y,r,se)}else if(V){let ke=this.breakUnicodeLine(h,Y,null);this.drawUnicodeBlocks(ke.tokens,ke.words,Y,r,se)}else{let ke=this.convertToUnicode(h,Y),qe=this.getUnicodeString(ke);this.streamWriter.showNextLineText(qe)}}drawUnicodeBlocks(t,s,n,r,h){if(null==t)throw new Error("Argument Null Exception : blocks");if(null==s)throw new Error("Argument Null Exception : words");if(null==n)throw new Error("Argument Null Exception : font");this.streamWriter.startNextLine();let m=0,T=0,V=0,Y=0;try{null!==r&&typeof r<"u"&&(V=r.firstLineIndent,Y=r.paragraphIndent,r.firstLineIndent=0,r.paragraphIndent=0);let se=n.getCharWidth(js.whiteSpace,r)+h,ge=null!=r?r.characterSpacing:0;se+=ge+(null!==r&&typeof r<"u"&&0===h?r.wordSpacing:0);for(let qe=0;qe<t.length;qe++){let mt=t[qe],Vt=s[qe],Qt=0;if(0!==m&&this.streamWriter.startNextLine(m,0),Vt.length>0){Qt+=n.measureString(Vt,r).width,Qt+=ge;let ai=this.getUnicodeString(mt);this.streamWriter.showText(ai)}qe!==t.length-1&&(m=Qt+se,T+=m)}T>0&&this.streamWriter.startNextLine(-T,0)}finally{null!==r&&typeof r<"u"&&(r.firstLineIndent=V,r.paragraphIndent=Y)}}breakUnicodeLine(t,s,n){if(null===t)throw new Error("Argument Null Exception : line");n=t.split(null);let r=[];for(let h=0;h<n.length;h++){let T=this.convertToUnicode(n[h],s);r[h]=T}return{tokens:r,words:n}}getUnicodeString(t){if(null===t)throw new Error("Argument Null Exception : token");let s=new et(t);return s.converted=!0,s.encode=$i.ForceEncoding.Ascii,s}convertToUnicode(t,s){let n=null;if(null==t)throw new Error("Argument Null Exception : text");if(null==s)throw new Error("Argument Null Exception : ttfFont");if(s.fontInternal instanceof Bs){let r=s.fontInternal.ttfReader;s.setSymbols(t),n=r.convertString(t);let h=et.toUnicodeArray(n,!1);n=et.byteToString(h)}return n}justifyLine(t,s,n){let r=t.text,h=t.width,m=this.shouldJustify(t,s,n),T=null!=n&&0!==n.wordSpacing,Y=js.getCharsCount(r,js.spaces),se=0;return m?(T&&(h-=Y*n.wordSpacing),se=(s-h)/Y,this.pdfStreamWriter.setWordSpacing(se)):this.pdfStreamWriter.setWordSpacing(T?n.wordSpacing:0),se}reset(t){this.canvasSize=t,this.streamWriter.clear(),this.initialize(),this.initializeCoordinates()}shouldJustify(t,s,n){let r=t.text,m=null!=n&&n.alignment===Ci.Justify,T=s>=0&&t.width<s,se=js.getCharsCount(r,js.spaces)>0&&r[0]!==js.whiteSpace;return m&&T&&se&&((t.lineType&cr.LayoutBreak)>0||n.alignment===Ci.Justify)}underlineStrikeoutText(t,s,n,r,h,m){if(r.underline||r.strikeout){let T=this.createUnderlineStikeoutPen(t,s,r,m);if(null!=T){let V=this.getTextVerticalAlignShift(n.actualSize.height,h.height,m),Y=0;Y=h.y+V+r.metrics.getAscent(m)+1.5*T.width;let se=h.y+V+r.metrics.getHeight(m)/2+1.5*T.width,ge=n.lines;for(let ke=0,qe=n.lineCount;ke<qe;ke++){let mt=ge[ke],Qt=mt.width,ai=this.getHorizontalAlignShift(Qt,h.width,m),ki=this.getLineIndent(mt,m,h,0===ke);ai+=this.rightToLeft(m)?0:ki;let Qi=h.x+ai,fs=this.shouldJustify(mt,h.width,m)?Qi+h.width-ki:Qi+Qt-ki;r.underline&&(this.drawLine(T,Qi,Y,fs,Y),Y+=n.lineHeight),r.strikeout&&(this.drawLine(T,Qi,se,fs,se),se+=n.lineHeight),this.isPointOverload&&ge.length>1&&(h.x=0,h.width=this.clientSize.width)}this.isPointOverload=!1}}}createUnderlineStikeoutPen(t,s,n,r){let h=n.metrics.getSize(r)/20,m=null;return null!=t?m=new rs(t.color,h):null!=s&&(m=new rs(s,h)),m}getTextRenderingMode(t,s,n){let r=gs.None;return r=null!=t&&null!=s?gs.FillStroke:null!=t?gs.Stroke:gs.Fill,null!=n&&n.clipPath&&(r|=gs.ClipFlag),r}getLineIndent(t,s,n,r){let h=0;return null!=s&&(t.lineType&cr.FirstParagraphLine)>0&&(h=r?s.firstLineIndent:s.paragraphIndent,h=n.width>0?Math.min(n.width,h):h),h}getHorizontalAlignShift(t,s,n){let r=0;if(s>=0&&null!=n&&n.alignment!==Ci.Left)switch(n.alignment){case Ci.Center:r=(s-t)/2;break;case Ci.Right:r=s-t}return r}rightToLeft(t){let s=null!==t&&typeof t<"u"&&t.rightToLeft;return null!==t&&typeof t<"u"&&t.textDirection!==di.None&&typeof t.textDirection<"u"&&(s=!0),s}stateControl(t,s,n,r){if(typeof r>"u")this.stateControl(t,s,n,null);else{s instanceof ir&&(this.bCSInitialized=!1,s.colorSpace=this.colorSpace),s instanceof Pn&&(this.bCSInitialized=!1,s.graphics.colorSpace=this.colorSpace);let h=!1;null!==s?(typeof this.pageLayer<"u"&&null!=this.pageLayer&&!1===this.colorSpaceChanged&&(this.lastDocumentCS=this.pageLayer.page.document.colorSpace,this.lastGraphicsCS=this.pageLayer.page.graphics.colorSpace,this.colorSpace=this.pageLayer.page.document.colorSpace,this.currentColorSpace=this.pageLayer.page.document.colorSpace,this.colorSpaceChanged=!0),this.initCurrentColorSpace(this.currentColorSpace)):null!=t&&(typeof this.pageLayer<"u"&&null!=this.pageLayer&&(this.colorSpace=this.pageLayer.page.document.colorSpace,this.currentColorSpace=this.pageLayer.page.document.colorSpace),this.initCurrentColorSpace(this.currentColorSpace)),this.penControl(t,h),this.brushControl(s,h),this.fontControl(n,r,h)}}initCurrentColorSpace(t){this.getResources.getResources(),this.bCSInitialized||(this.currentColorSpace!=Oi.GrayScale?(this.pdfStreamWriter.setColorSpace("Device"+this.currentColorSpaces[this.currentColorSpace],!0),this.pdfStreamWriter.setColorSpace("Device"+this.currentColorSpaces[this.currentColorSpace],!1),this.bCSInitialized=!0):(this.pdfStreamWriter.setColorSpace("DeviceGray",!0),this.pdfStreamWriter.setColorSpace("DeviceGray",!1),this.bCSInitialized=!0))}penControl(t,s){null!=t&&(this.currentPen=t,t.monitorChanges(this.currentPen,this.pdfStreamWriter,this.getResources,s,this.colorSpace,this.matrix.clone()),this.currentPen=t.clone())}brushControl(t,s){if(null!=t&&typeof t<"u"){let n=t.clone(),r=n;if(null!==r&&typeof r<"u"&&!(t instanceof kt)&&!(t instanceof Pn)){let h=r.matrix,m=this.matrix.clone();null!=h&&(h.multiply(m),m=h),r.matrix=m}this.currentBrush=r,n.monitorChanges(this.currentBrush,this.pdfStreamWriter,this.getResources,s,this.colorSpace),this.currentBrush=t,t=null}}fontControl(t,s,n){if(null!=t){let r=null!=s?s.subSuperScript:Ti.None,h=null!=this.currentStringFormat?this.currentStringFormat.subSuperScript:Ti.None;if(n||t!==this.currentFont||r!==h){let m=this.getResources.getResources();this.currentFont=t,this.currentStringFormat=s;let T=t.metrics.getSize(s);this.isEmfTextScaled=!1;let V=m.getName(t);this.pdfStreamWriter.setFont(t,V,T)}}}setTransparency(t,s,n){if(typeof s>"u")this.istransparencySet=!0,this.setTransparency(t,t,Gt.Normal);else if("number"==typeof s&&typeof n>"u")this.setTransparency(t,s,Gt.Normal);else{null==this.trasparencies&&(this.trasparencies=new qn);let r=null,h=new M(t,s,n);this.trasparencies.containsKey(h)&&(r=this.trasparencies.getValue(h)),null==r&&(r=new $n(t,s,n),this.trasparencies.setValue(h,r));let T=this.getResources.getResources().getName(r);this.streamWriter.setGraphicsState(T)}}clipTranslateMargins(t,s,n,r,h,m){if(t instanceof Ui&&typeof s>"u")this.clipBounds=t,this.pdfStreamWriter.writeComment("Clip margins."),this.pdfStreamWriter.appendRectangle(t),this.pdfStreamWriter.closePath(),this.pdfStreamWriter.clipPath(!1),this.pdfStreamWriter.writeComment("Translate co-ordinate system."),this.translateTransform(t.x,t.y);else if("number"==typeof t){let T=new Ui(n,r,this.size.width-n-h,this.size.height-r-m);this.clipBounds=T,this.pdfStreamWriter.writeComment("Clip margins."),this.pdfStreamWriter.appendRectangle(T),this.pdfStreamWriter.closePath(),this.pdfStreamWriter.clipPath(!1),this.pdfStreamWriter.writeComment("Translate co-ordinate system."),this.translateTransform(t,s)}}updateY(t){return-t}translateTransform(t,s){let n=new hn;this.getTranslateTransform(t,s,n),this.pdfStreamWriter.modifyCtm(n),this.matrix.multiply(n)}getTranslateTransform(t,s,n){return n.translate(t,this.updateY(s)),n}scaleTransform(t,s){let n=new hn;this.getScaleTransform(t,s,n),this.pdfStreamWriter.modifyCtm(n),this.matrix.multiply(n)}getScaleTransform(t,s,n){return null==n&&(n=new hn),n.scale(t,s),n}rotateTransform(t){let s=new hn;this.getRotateTransform(t,s),this.pdfStreamWriter.modifyCtm(s),this.matrix.multiply(s)}initializeCoordinates(){this.pdfStreamWriter.writeComment("Change co-ordinate system to left/top."),this.mediaBoxUpperRightBound!==-this.size.height&&null==this.cropBox&&this.translateTransform(0,this.updateY(this.mediaBoxUpperRightBound===this.size.height||0===this.mediaBoxUpperRightBound?this.size.height:this.mediaBoxUpperRightBound))}getRotateTransform(t,s){return(null==s||typeof s>"u")&&(s=new hn),s.rotate(this.updateY(t)),s}save(){let t=new v(this,this.matrix.clone());return t.brush=this.currentBrush,t.pen=this.currentPen,t.font=this.currentFont,t.colorSpace=this.currentColorSpace,t.characterSpacing=this.previousCharacterSpacing,t.wordSpacing=this.previousWordSpacing,t.textScaling=this.previousTextScaling,t.textRenderingMode=this.previousTextRenderingMode,this.graphicsState.push(t),this.pdfStreamWriter.saveGraphicsState(),t}restore(t){if(typeof t>"u")this.graphicsState.length>0&&this.doRestoreState();else if(-1!==this.graphicsState.indexOf(t))for(;0!==this.graphicsState.length&&this.doRestoreState()!==t;);}doRestoreState(){let t=this.graphicsState.pop();return this.transformationMatrix=t.matrix,this.currentBrush=t.brush,this.currentPen=t.pen,this.currentFont=t.font,this.currentColorSpace=t.colorSpace,this.previousCharacterSpacing=t.characterSpacing,this.previousWordSpacing=t.wordSpacing,this.previousTextScaling=t.textScaling,this.previousTextRenderingMode=t.textRenderingMode,this.pdfStreamWriter.restoreGraphicsState(),t}drawPath(t,s,n){s instanceof Pn?(this.bCSInitialized=!1,s.graphics.colorSpace=this.colorSpace):s instanceof ir&&(this.bCSInitialized=!1,s.colorSpace=this.colorSpace),this.stateControl(t,s,null),this.buildUpPath(n.pathPoints,n.pathTypes),this.drawPathHelper(t,s,n.fillMode,!1)}drawArc(t,s,n,r,h,m,T){s instanceof Ui?this.drawArc(t,s.x,s.y,s.width,s.height,n,r):0!==T&&(this.stateControl(t,null,null),this.constructArcPath(s,n,s+r,n+h,m,T),this.drawPathHelper(t,null,!1))}buildUpPath(t,s){let n=t.length;for(let r=0;r<n;++r){let h=0,m=t[r];switch(s[r]&b.pathTypesValuesMask){case ur.Start:this.pdfStreamWriter.beginPath(m.x,m.y);break;case ur.Bezier3:let T=new hi(0,0),V=new hi(0,0),Y=this.getBezierPoints(t,s,r,T,V);this.pdfStreamWriter.appendBezierSegment(m,Y.p2,Y.p3),r=Y.i;break;case ur.Line:this.pdfStreamWriter.appendLineSegment(m);break;default:throw new Error("ArithmeticException - Incorrect path formation.")}h=s[r],this.checkFlags(h)}}getBezierPoints(t,s,n,r,h){if((s[++n]&b.pathTypesValuesMask)!==ur.Bezier3)throw new Error("ArgumentException : errorMsg");if(r=t[n],(s[++n]&b.pathTypesValuesMask)!==ur.Bezier3)throw new Error("ArgumentException : errorMsg");return{i:n,p2:r,p3:t[n]}}checkFlags(t){(t&ur.CloseSubpath)===ur.CloseSubpath&&this.pdfStreamWriter.closePath()}constructArcPath(t,s,n,r,h,m){let T=this.getBezierArc(t,s,n,r,h,m);if(0===T.length)return;let V=[T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7]];this.pdfStreamWriter.beginPath(V[0],V[1]);let Y=0;for(Y=0;Y<T.length;Y+=8)V=[T[Y],T[Y+1],T[Y+2],T[Y+3],T[Y+4],T[Y+5],T[Y+6],T[Y+7]],this.pdfStreamWriter.appendBezierSegment(V[2],V[3],V[4],V[5],V[6],V[7])}getBezierArc(t,s,n,r,h,m){if(t>n){let Qt;Qt=t,t=n,n=Qt}if(r>s){let Qt;Qt=s,s=r,r=Qt}let T,V;Math.abs(m)<=90?(T=m,V=1):(V=Math.ceil(Math.abs(m)/90),T=m/V);let Y=(t+n)/2,se=(s+r)/2,ge=(n-t)/2,ke=(r-s)/2,qe=T*(Math.PI/360),mt=Math.abs(4/3*(1-Math.cos(qe))/Math.sin(qe)),Vt=[];for(let Qt=0;Qt<V;Qt++){let ai=(h+Qt*T)*(Math.PI/180),ki=(h+(Qt+1)*T)*(Math.PI/180),Qi=Math.cos(ai),fs=Math.cos(ki),ps=Math.sin(ai),Nn=Math.sin(ki);T>0?Vt.push(Y+ge*Qi,se-ke*ps,Y+ge*(Qi-mt*ps),se-ke*(ps+mt*Qi),Y+ge*(fs+mt*Nn),se-ke*(Nn-mt*fs),Y+ge*fs,se-ke*Nn):Vt.push(Y+ge*Qi,se-ke*ps,Y+ge*(Qi+mt*ps),se-ke*(ps-mt*Qi),Y+ge*(fs-mt*Nn),se-ke*(Nn+mt*fs),Y+ge*fs,se-ke*Nn)}return Vt}}return b.pathTypesValuesMask=15,b.transparencyObject=!1,b})();class xi{getResources(){return this.sender.getResources()}constructor(e){this.sender=e}}class v{constructor(e,t){this.internalTextRenderingMode=gs.Fill,this.internalCharacterSpacing=0,this.internalWordSpacing=0,this.internalTextScaling=100,this.pdfColorSpace=Oi.Rgb,typeof e<"u"&&(this.pdfGraphics=e,this.transformationMatrix=t)}get graphics(){return this.pdfGraphics}get matrix(){return this.transformationMatrix}get characterSpacing(){return this.internalCharacterSpacing}set characterSpacing(e){this.internalCharacterSpacing=e}get wordSpacing(){return this.internalWordSpacing}set wordSpacing(e){this.internalWordSpacing=e}get textScaling(){return this.internalTextScaling}set textScaling(e){this.internalTextScaling=e}get pen(){return this.pdfPen}set pen(e){this.pdfPen=e}get brush(){return this.pdfBrush}set brush(e){this.pdfBrush=e}get font(){return this.pdfFont}set font(e){this.pdfFont=e}get colorSpace(){return this.pdfColorSpace}set colorSpace(e){this.pdfColorSpace=e}get textRenderingMode(){return this.internalTextRenderingMode}set textRenderingMode(e){this.internalTextRenderingMode=e}}class M{constructor(e,t,s){this.alphaPen=e,this.alphaBrush=t,this.blendMode=s}}class ${constructor(e,t){if(this.pdfColorSpace=Oi.Rgb,this.isVisible=!0,this.sublayer=!1,this.contentLength=0,this.dictionaryProperties=new de,null===e)throw new Error("ArgumentNullException:page");if(this.pdfPage=e,this.clipPageTemplates=!0,typeof t>"u")this.content=new oi;else if(t instanceof oi||null===t){if(null===t)throw new Error("ArgumentNullException:stream");this.content=t}else this.content=new oi,this.clipPageTemplates=t}get colorSpace(){return this.pdfColorSpace}set colorSpace(e){this.pdfColorSpace=e}get page(){return this.pdfPage}get layerId(){return this.layerid}set layerId(e){this.layerid=e}get name(){return this.layerName}set name(e){this.layerName=e}get visible(){return this.isVisible}set visible(e){this.isVisible=e}get graphics(){return null==this.pdfGraphics&&this.initializeGraphics(this.page),this.pdfGraphics}get layers(){return this.layer??(this.layer=new Ce(this.page),this.layer.sublayer=!0,this.layer)}add(){let e=new $(this.pdfPage);return e.name="",e}sign(e){return 0===e?0:e>0?1:-1}initializeGraphics(e){let t=e,s=new xi(this.page);if(this.pdfGraphics=new ks(e.size,s,this.content),this.pdfGraphics.mediaBoxUpperRightBound=0,null!=t){let m=t.section.parent;null!=m&&(this.pdfGraphics.colorSpace=m.document.colorSpace,this.colorSpace=m.document.colorSpace)}let n=this.sign(e.origin.y)===this.sign(e.origin.x);(e.origin.x>=0&&e.origin.y>=0||!n)&&this.pdfGraphics.initializeCoordinates();let r=t.section.getActualBounds(t,!0),h=t.section.pageSettings.margins;this.clipPageTemplates?e.origin.x>=0&&e.origin.y>=0&&this.pdfGraphics.clipTranslateMargins(r):this.graphics.clipTranslateMargins(r.x,r.y,h.left,h.top,h.right,h.bottom),this.pdfGraphics.setLayer(this)}get element(){return this.content}}class Ce extends class fe{constructor(){}get count(){return typeof this.collection>"u"&&(this.collection=[]),this.collection.length}get list(){return typeof this.collection>"u"&&(this.collection=[]),this.collection}}{constructor(e){super(),this.parentLayerCount=0,this.sublayer=!1,this.optionalContent=new Be,e instanceof pt&&(this.page=e,this.parseLayers(e))}items(e,t){if("number"==typeof e&&typeof t>"u")return this.list[e];if(null==t)throw new Error("ArgumentNullException: layer");if(t.page!==this.page)throw new Error("ArgumentException: The layer belongs to another page")}add(e,t){if(typeof e>"u"){let s=new $(this.page);return s.name="",this.add(s),s}if(e instanceof $){let s=this.list.push(e);return this.addLayer(s,e),s}return 0}addLayer(e,t){let s=new Xt(t);this.page.contents.add(s)}insert(e,t){let s=[],n=this.list.length;for(let r=e;r<n;r++)s.push(this.list.pop());this.list.push(t);for(let r=0;r<s.length;r++)this.list.push(s[r]);this.insertLayer(e,t)}insertLayer(e,t){if(null==t)throw new Error("ArgumentNullException:layer");let s=new Xt(t);this.page.contents.insert(e,s)}parseLayers(e){let t=this.page.contents,n=(this.page.getResources(),null);n=e.crossTable;let r=new oi,h=new oi,V=[];V.push("q"),r.data=V,t.insert(0,new Xt(r)),V=[],V.push("Q"),h.data=V,t.insert(t.count,new Xt(h))}indexOf(e){if(null==e)throw new Error("ArgumentNullException: layer");return this.list.indexOf(e)}}class pt{constructor(e){this.defLayerIndex=-1,this.modified=!1,this.dictionaryProperties=new de,this.pageDictionary=e}get section(){return this.pdfSection}set section(e){this.pdfSection=e}get dictionary(){return this.pageDictionary}get element(){return this.pageDictionary}get defaultLayer(){return this.layers.items(this.defaultLayerIndex)}get defaultLayerIndex(){if(0===this.layerCollection.count||-1===this.defLayerIndex){let e=this.layerCollection.add();this.defLayerIndex=this.layerCollection.indexOf(e)}return this.defLayerIndex}get layers(){return(null==this.layerCollection||typeof this.layerCollection>"u")&&(this.layerCollection=new Ce(this)),this.layerCollection}getResources(){return null==this.resources&&(this.resources=new $r,this.dictionary.items.setValue(this.dictionaryProperties.resources,this.resources)),this.resources}get contents(){let t=this.pageDictionary.items.getValue(this.dictionaryProperties.contents);return null==t&&(t=new Ut,this.pageDictionary.items.setValue(this.dictionaryProperties.contents,t)),t}set defaultLayerIndex(e){if(e<0||e>this.layers.count-1)throw new Error("ArgumentOutOfRangeException : value, Index can not be less 0 and greater Layers.Count - 1");this.defLayerIndex=e,this.modified=!0}setResources(e){this.resources=e,this.dictionary.items.setValue(this.dictionaryProperties.resources,this.resources),this.modified=!0}}class Mt{constructor(e){this.alreadyExistsAnnotationError="This annotatation had been already added to page",this.missingAnnotationException="Annotation is not contained in collection.",this.dictionaryProperties=new de,this.internalAnnotations=new Ut,this.lists=[],typeof e<"u"&&(this.page=e)}get annotations(){return this.internalAnnotations}set annotations(e){this.internalAnnotations=e}add(e){this.doAdd(e)}doAdd(e){if(!(typeof e.destination<"u"))return e.setPage(this.page),this.internalAnnotations.add(new Xt(e)),this.lists.push(e);{let s=(new Yt).layout(e.text,e.font,e.stringFormat,new Ei(e.bounds.width,0),!1,new Ei(0,0)),n=e.bounds.y;if(1===s.lines.length){let r=e.font.measureString(s.lines[0].text);e.bounds=new Ui(new hi(e.bounds.x,n),r),e.text=s.lines[0].text,this.page.graphics.drawString(e.text,e.font,null,e.brush,e.bounds.x,e.bounds.y,e.bounds.width,e.bounds.height,null),e.setPage(this.page),this.setColor(e),this.internalAnnotations.add(new Xt(e)),this.lists.push(e)}else for(let r=0;r<s.lines.length;r++){let h=e.font.measureString(s.lines[r].text);if(0===r)e.bounds=new Ui(e.bounds.x,n,h.width,h.height),e.text=s.lines[r].text,this.page.graphics.drawString(e.text,e.font,null,e.brush,e.bounds.x,n,h.width,h.height,null),e.setPage(this.page),this.setColor(e),this.internalAnnotations.add(new Xt(e)),this.lists.push(e),n+=e.bounds.height;else{let m=e.clone();m.bounds=new Ui(new hi(e.bounds.x,n),h),m.text=s.lines[r].text,this.page.graphics.drawString(m.text,m.font,null,m.brush,m.bounds.x,m.bounds.y,m.bounds.width,m.bounds.height,null),m.setPage(this.page),this.setColor(m),this.internalAnnotations.add(new Xt(m)),this.lists.push(m),n+=m.bounds.height}}}}setColor(e){let s=e.color.toArray(Oi.Rgb);e.dictionary.items.setValue(this.dictionaryProperties.c,s)}get element(){return this.internalAnnotations}}class wi extends pt{constructor(){super(new Be),this.annotationCollection=null,this.beginSave=null,this.initialize()}get document(){return null!==this.section&&null!==this.section.parent?this.section.parent.document:null}get graphics(){let e=this.defaultLayer.graphics;return e.currentPage=this,e}get crossTable(){if(null===this.section)throw new Error("PdfDocumentException : Page is not created");return null===this.section.parent?this.section.parentDocument.crossTable:this.section.parent.document.crossTable}get size(){return this.section.pageSettings.size}get origin(){return this.section.pageSettings.origin}get annotations(){return null==this.annotationCollection&&(this.annotationCollection=new Mt(this),this.dictionary.items.setValue(this.dictionaryProperties.annots,this.annotationCollection.element),this.annotationCollection.annotations=this.dictionary.items.getValue(this.dictionaryProperties.annots)),this.annotationCollection}initialize(){this.dictionary.items.setValue(this.dictionaryProperties.type,new Xe("Page")),this.dictionary.pageBeginDrawTemplate=new zi(this)}setSection(e){this.section=e,this.dictionary.items.setValue(this.dictionaryProperties.parent,new Xt(e))}resetProgress(){this.isProgressOn=!1}getClientSize(){let e=this.section.getActualBounds(this,!0);return new Ei(e.width,e.height)}pageBeginSave(){let e=this.document;void 0!==typeof e&&null!=e&&this.drawPageTemplates(e),null!=this.beginSave&&typeof this.beginSave<"u"&&this.beginSave(this)}drawPageTemplates(e){if(this.section.containsTemplates(e,this,!1)){let n=new $(this,!1);if(this.layers.insert(0,n),this.section.drawTemplates(this,n,e,!1),null!==n.graphics&&typeof n.graphics<"u")for(let r=0;r<n.graphics.automaticFields.automaticFields.length;r++){let h=n.graphics.automaticFields.automaticFields[r];h.field.performDraw(n.graphics,h.location,h.scalingX,h.scalingY)}}if(this.section.containsTemplates(e,this,!0)){let n=new $(this,!1);this.layers.add(n),this.section.drawTemplates(this,n,e,!0)}}}class Gi{get page(){return this.pdfPage}constructor(e){this.pdfPage=typeof e<"u"?e:null}}class Vi{constructor(e){if(this.pdfSection=null,null==e)throw Error('ArgumentNullException("section")');this.section=e}get section(){return this.pdfSection}set section(e){this.pdfSection=e}contains(e){return this.section.contains(e)}remove(e){this.section.remove(e)}add(){return this.section.add()}}class sn{get left(){return this.leftTemplate}set left(e){this.leftTemplate=this.checkElement(e,Cs.Left)}get top(){return this.topTemplate}set top(e){this.topTemplate=this.checkElement(e,Cs.Top)}get right(){return this.rightTemplate}set right(e){this.rightTemplate=this.checkElement(e,Cs.Right)}get bottom(){return this.bottomTemplate}set bottom(e){this.bottomTemplate=this.checkElement(e,Cs.Bottom)}get EvenLeft(){return this.evenLeft}set EvenLeft(e){this.evenLeft=this.checkElement(e,Cs.Left)}get EvenTop(){return this.evenTop}set EvenTop(e){this.evenTop=this.checkElement(e,Cs.Top)}get EvenRight(){return this.evenRight}set EvenRight(e){this.evenRight=this.checkElement(e,Cs.Right)}get EvenBottom(){return this.evenBottom}set EvenBottom(e){this.evenBottom=this.checkElement(e,Cs.Bottom)}get OddLeft(){return this.oddLeft}set OddLeft(e){this.oddLeft=this.checkElement(e,Cs.Left)}get OddTop(){return this.oddTop}set OddTop(e){this.oddTop=this.checkElement(e,Cs.Top)}get OddRight(){return this.oddRight}set OddRight(e){this.oddRight=this.checkElement(e,Cs.Right)}get OddBottom(){return this.oddBottom}set OddBottom(e){this.oddBottom=this.checkElement(e,Cs.Bottom)}constructor(){}getLeft(e){if(null==e)throw new Error("ArgumentNullException:page");let t=null;return t=this.isEven(e)?null!=this.EvenLeft?this.EvenLeft:this.left:null!=this.OddLeft?this.OddLeft:this.left,t}getTop(e){if(null==e)throw new Error("ArgumentNullException:page");let t=null;return t=this.isEven(e)?null!=this.EvenTop?this.EvenTop:this.top:null!=this.OddTop?this.OddTop:this.top,t}getRight(e){if(null==e)throw new Error("ArgumentNullException:page");let t=null;return t=this.isEven(e)?null!=this.EvenRight?this.EvenRight:this.right:null!=this.OddRight?this.OddRight:this.right,t}getBottom(e){if(null==e)throw new Error("ArgumentNullException:page");let t=null;return t=this.isEven(e)?null!=this.EvenBottom?this.EvenBottom:this.bottom:null!=this.OddBottom?this.OddBottom:this.bottom,t}isEven(e){let t=e.section.document.pages,s=0;return s=t.pageCollectionIndex.containsKey(e)?t.pageCollectionIndex.getValue(e)+1:t.indexOf(e)+1,s%2==0}checkElement(e,t){if(null!=e){if(typeof e.type<"u"&&e.type!==Cs.None)throw new Error("NotSupportedException:Can not reassign the template element. Please, create new one.");e.type=t}return e}}class ts extends sn{get applyDocumentLeftTemplate(){return this.leftValue}set applyDocumentLeftTemplate(e){this.leftValue=e}get applyDocumentTopTemplate(){return this.topValue}set applyDocumentTopTemplate(e){this.topValue=e}get applyDocumentRightTemplate(){return this.rightValue}set applyDocumentRightTemplate(e){this.rightValue=e}get applyDocumentBottomTemplate(){return this.bottomValue}set applyDocumentBottomTemplate(e){this.bottomValue=e}get applyDocumentStamps(){return this.stampValue}set applyDocumentStamps(e){this.stampValue=e}constructor(){super(),this.leftValue=this.topValue=this.rightValue=this.bottomValue=this.stampValue=!0}}class wn{constructor(e,t){this.pageAdded=new Gi,this.pdfPages=[],this.dictionaryProperties=new de,this.pdfDocument=e,typeof t>"u"?(this.settings=e.pageSettings.clone(),this.initialSettings=this.settings.clone()):(this.settings=t.clone(),this.initialSettings=this.settings.clone()),this.initialize()}get parent(){return this.sectionCollection}set parent(e){this.sectionCollection=e,this.section.items.setValue(this.dictionaryProperties.parent,new Xt(e))}get parentDocument(){return this.pdfDocument}get pageSettings(){return this.settings}set pageSettings(e){if(null==e)throw Error("Value can not be null.");this.settings=e}get element(){return this.section}get count(){return this.pagesReferences.count}get template(){return null==this.pageTemplate&&(this.pageTemplate=new ts),this.pageTemplate}set template(e){this.pageTemplate=e}get document(){return this.sectionCollection.document}get pages(){return(null==this.pagesCollection||typeof this.pagesCollection>"u")&&(this.pagesCollection=new Vi(this)),this.pagesCollection}getPages(){return this.pdfPages}pointToNativePdf(e,t){let s=this.getActualBounds(e,!0);return t.x+=s.x,t.y=this.pageSettings.height-t.y,t}setPageSettings(e){this.settings=e,this.state.orientation=e.orientation,this.state.rotate=e.rotate,this.state.size=e.size,this.state.origin=e.origin}initialize(){this.pagesReferences=new Ut,this.section=new Be,this.state=new Sn(this.pdfDocument),this.section.sectionBeginSave=new is(this,this.state),this.pageCount=new ui(0),this.section.items.setValue(this.dictionaryProperties.count,this.pageCount),this.section.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.pages)),this.section.items.setValue(this.dictionaryProperties.kids,this.pagesReferences)}containsTemplates(e,t,s){let n=this.getDocumentTemplates(e,t,s),r=this.getSectionTemplates(t,s);return n.length>0||r.length>0}getDocumentTemplates(e,t,s){let n=[];return this.template.applyDocumentTopTemplate&&null!=e.template.getTop(t)&&(!(e.template.getTop(t).foreground||s)||e.template.getTop(t).foreground&&s)&&n.push(e.template.getTop(t)),this.template.applyDocumentBottomTemplate&&null!=e.template.getBottom(t)&&(!(e.template.getBottom(t).foreground||s)||e.template.getBottom(t).foreground&&s)&&n.push(e.template.getBottom(t)),this.template.applyDocumentLeftTemplate&&null!=e.template.getLeft(t)&&(!(e.template.getLeft(t).foreground||s)||e.template.getLeft(t).foreground&&s)&&n.push(e.template.getLeft(t)),this.template.applyDocumentRightTemplate&&null!=e.template.getRight(t)&&(!(e.template.getRight(t).foreground||s)||e.template.getRight(t).foreground&&s)&&n.push(e.template.getRight(t)),n}getSectionTemplates(e,t){let s=[];if(null!=this.template.getTop(e)){let n=this.template.getTop(e);(!n.foreground&&!t||n.foreground&&t)&&s.push(n)}if(null!=this.template.getBottom(e)){let n=this.template.getBottom(e);(!n.foreground&&!t||n.foreground&&t)&&s.push(n)}if(null!=this.template.getLeft(e)){let n=this.template.getLeft(e);(!n.foreground&&!t||n.foreground&&t)&&s.push(n)}if(null!=this.template.getRight(e)){let n=this.template.getRight(e);(!n.foreground&&!t||n.foreground&&t)&&s.push(n)}return s}add(e){if(typeof e>"u"){let t=new wi;return this.add(t),t}{let t=this.checkPresence(e);this.pdfPages.push(e),this.pagesReferences.add(t),e.setSection(this),e.resetProgress(),this.pageAddedMethod(e)}}checkPresence(e){let t=new Xt(e),s=!1,n=this.parent;for(let r=0;r<n.section.length;r++){let h=n.section[r];s=s||h.contains(e)}return t}contains(e){return 0<=this.indexOf(e)}indexOf(e){for(let s=0;s<this.pdfPages.length;s++)if(this.pdfPages[s]===e)return this.pdfPages.indexOf(e);let t=new Xt(e);return this.pagesReferences.indexOf(t)}pageAddedMethod(e){let t=new Gi(e);this.onPageAdded(t),this.parent.document.pages.onPageAdded(t),this.pageCount.intValue=this.count}onPageAdded(e){}getActualBounds(e,t,s){if(e instanceof wi&&"boolean"==typeof t){let n;return n=this.getActualBounds(this.parent.document,e,t),n}{let n=new Ui(0,0,0,0);n.height=s?this.pageSettings.size.height:this.pageSettings.getActualSize().height,n.width=s?this.pageSettings.size.width:this.pageSettings.getActualSize().width;let r=this.getLeftIndentWidth(e,t,s),h=this.getTopIndentHeight(e,t,s),m=this.getRightIndentWidth(e,t,s),T=this.getBottomIndentHeight(e,t,s);return n.x+=r,n.y+=h,n.width-=r+m,n.height-=h+T,n}}getLeftIndentWidth(e,t,s){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");let n=s?this.pageSettings.margins.left:0,r=null!=this.template.getLeft(t)?this.template.getLeft(t).width:0,h=null!=e.template.getLeft(t)?e.template.getLeft(t).width:0;return n+=this.template.applyDocumentLeftTemplate?Math.max(r,h):r,n}getTopIndentHeight(e,t,s){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");let n=s?this.pageSettings.margins.top:0,r=null!=this.template.getTop(t)?this.template.getTop(t).height:0,h=null!=e.template.getTop(t)?e.template.getTop(t).height:0;return n+=this.template.applyDocumentTopTemplate?Math.max(r,h):r,n}getRightIndentWidth(e,t,s){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");let n=s?this.pageSettings.margins.right:0,r=null!=this.template.getRight(t)?this.template.getRight(t).width:0,h=null!=e.template.getRight(t)?e.template.getRight(t).width:0;return n+=this.template.applyDocumentRightTemplate?Math.max(r,h):r,n}getBottomIndentHeight(e,t,s){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");let n=s?this.pageSettings.margins.bottom:0,r=null!=this.template.getBottom(t)?this.template.getBottom(t).height:0,h=null!=e.template.getBottom(t)?e.template.getBottom(t).height:0;return n+=this.template.applyDocumentBottomTemplate?Math.max(r,h):r,n}remove(e){if(null==e)throw Error('ArgumentNullException("page")');let t=this.pdfPages.indexOf(e);this.pagesReferences.removeAt(t);let s=[];for(let n=0;n<t;n++)s.push(this.pdfPages[n]);for(let n=t+1;n<this.pdfPages.length;n++)s.push(this.pdfPages[n]);this.pdfPages=s}applyPageSettings(e,t,s){let n=new Ui(s.origin,s.size);e.items.setValue(this.dictionaryProperties.mediaBox,Ut.fromRectangle(n));let r=0;r=Ws.rotateFactor*s.rotate;let h=new ui(r);e.items.setValue(this.dictionaryProperties.rotate,h)}beginSave(e,t){this.applyPageSettings(this.section,t.document.pageSettings,e)}drawTemplates(e,t,s,n){let r=this.getDocumentTemplates(s,e,n),h=this.getSectionTemplates(e,n);this.drawTemplatesHelper(t,s,r),this.drawTemplatesHelper(t,s,h)}drawTemplatesHelper(e,t,s){if(null!=s&&s.length>0){let n=s.length;for(let r=0;r<n;r++)s[r].draw(e,t)}}}class Sn{get orientation(){return this.pageOrientation}set orientation(e){this.pageOrientation=e}get rotate(){return this.pageRotate}set rotate(e){this.pageRotate=e}get size(){return this.pageSize}set size(e){this.pageSize=e}get origin(){return this.pageOrigin}set origin(e){this.pageOrigin=e}constructor(e){this.pageOrientation=e.pageSettings.orientation,this.pageRotate=e.pageSettings.rotate,this.pageSize=e.pageSettings.size,this.pageOrigin=e.pageSettings.origin}}let Ws=(()=>{class b{constructor(t){this.sections=[],this.dictionaryProperties=new de,this.pdfDocument=t.clone(),this.initialize()}get section(){return this.sections}get document(){return this.pdfDocument}get count(){return this.sections.length}get element(){return this.pages}initialize(){this.sectionCount=new ui(0),this.sectionCollection=new Ut,this.pages=new Be,this.pages.beginSave=new Fe(this),this.pages.items.setValue(this.dictionaryProperties.type,new Xe("Pages")),this.pages.items.setValue(this.dictionaryProperties.kids,this.sectionCollection),this.pages.items.setValue(this.dictionaryProperties.count,this.sectionCount),this.pages.items.setValue(this.dictionaryProperties.resources,new Be),this.setPageSettings(this.pages,this.pdfDocument.pageSettings)}pdfSectionCollection(t){if(t<0||t>=this.count)throw new Error("IndexOutOfRangeException()");return this.sections[t]}setPageSettings(t,s){let n=new Ui(new hi,s.size);t.items.setValue(this.dictionaryProperties.mediaBox,Ut.fromRectangle(n))}add(t){if(typeof t>"u"){let s=new wn(this.pdfDocument);return this.add(s),s}{let s=this.checkSection(t);return this.sections.push(t),t.parent=this,this.sectionCollection.add(s),this.sections.indexOf(t)}}checkSection(t){let s=new Xt(t);return this.sectionCollection.contains(s),s}countPages(){let t=0;return this.sections.forEach(s=>t+=s.count),t}beginSave(){this.sectionCount.intValue=this.countPages()}}return b.rotateFactor=90,b})();class ht{constructor(e){this.pdfPageCollectionIndex=new lt,this.document=e}get count(){return this.countPages()}get pageCollectionIndex(){return this.pdfPageCollectionIndex}add(e){if(typeof e>"u"){let t=new wi;return this.add(t),t}this.getLastSection().add(e)}getLastSection(){let e=this.document.sections;return 0===e.section.length&&e.add(),e.section[e.section.length-1]}onPageAdded(e){}countPages(){let e=this.document.sections,t=0;for(let s=0;s<e.section.length;s++)t+=e.section[s].count;return t}getPageByIndex(e){return this.getPage(e)}getPage(e){if(e<0||e>=this.count)throw Error('ArgumentOutOfRangeException("index", "Value can not be less 0")');let t=null,s=0,n=0,r=0,h=this.document.sections.count;for(let m=0;m<h;m++){let T=this.document.sections.section[m];if(n=T.count,r=e-s,e>=s&&r<n){t=T.getPages()[r];break}s+=n}return t}indexOf(e){let t=-1;if(null==e)throw new Error("ArgumentNullException: page");{let s=0;for(let n=0,r=this.document.sections.count;n<r;n++){let h=this.document.sections.pdfSectionCollection(n);if(t=h.indexOf(e),t>=0){t+=s;break}t=-1,s+=h.count}}return t}remove(e){if(null==e)throw Error('ArgumentNullException("page")');let t=null;for(let s=0,n=this.document.sections.count;s<n;s++)if(t=this.document.sections.pdfSectionCollection(s),t.pages.contains(e)){t.pages.remove(e);break}return t}}class S{constructor(){this.referenceObjects=[],this.pdfFontCollection=new lt}search(e){let t=null,s=this.getGroup(e);return null==s?s=this.createNewGroup():s.length>0&&(t=s[0]),s.push(e),t}createNewGroup(){let e=[];return this.referenceObjects.push(e),e}getGroup(e){let t=null;if(null!==e){let s=this.referenceObjects.length;for(let n=0;n<s;n++){if(this.referenceObjects.length>0){let r=this.referenceObjects[n];if(r.length>0){if(e.equalsTo(r[0])){t=r;break}}else this.removeGroup(r)}s=this.referenceObjects.length}}return t}removeGroup(e){if(null!==e){let t=this.referenceObjects.indexOf(e);this.referenceObjects.slice(t,t+1)}}destroy(){this.pdfFontCollection=void 0,this.referenceObjects=void 0}}let I=(()=>{class b extends class ti{constructor(e){this.isStreamCopied=!1,e instanceof I&&(this.document=e)}get pdfObjects(){return this.objects}get crossTable(){return this.pdfCrossTable}get currentSavingObj(){return this.currentSavingObject}set currentSavingObj(e){this.currentSavingObject=e}get catalog(){return this.pdfCatalog}set catalog(e){this.pdfCatalog=e}setMainObjectCollection(e){this.objects=e}setCrossTable(e){this.pdfCrossTable=e}setCatalog(e){this.pdfCatalog=e}save(e){let t=new ue.ez(!0),s=new ue.LF(t);if(typeof e>"u"){let n=new ue.ez(!0),r=new ue.LF(n);return new Promise((h,m)=>{let T={};T.blobData=new Blob([this.document.docSave(r,!0)],{type:"application/pdf"}),h(T)})}this.document.docSave(s,e,!0)}clone(){return this.document}}{constructor(t){super(),this.defaultMargin=40,this.streamWriter=null,this.document=this;let s=!1;typeof t>"u"?(b.cacheCollection=new S,s=!1):s=t;let n=new Re;this.setMainObjectCollection(n);let r=new Fi;r.isMerging=s,r.document=this,this.setCrossTable(r);let h=new pi;this.setCatalog(h),n.add(h),h.position=-1,this.sectionCollection=new Ws(this),this.documentPageCollection=new ht(this),h.pages=this.sectionCollection}static get defaultFont(){return null==this.defaultStandardFont&&(this.defaultStandardFont=new oe(Ot.Helvetica,8)),this.defaultStandardFont}get sections(){return this.sectionCollection}get pageSettings(){return null==this.settings&&(this.settings=new Ln(this.defaultMargin)),this.settings}set pageSettings(t){this.settings=t}get pages(){return this.documentPageCollection}static get cache(){return typeof b.cacheCollection>"u"||null==b.cacheCollection?new S:b.cacheCollection}static set cache(t){this.cacheCollection=t}static get enableCache(){return this.isCacheEnabled}static set enableCache(t){this.isCacheEnabled=t}get colorSpace(){return this.pdfColorSpace===Oi.Rgb||this.pdfColorSpace===Oi.Cmyk||this.pdfColorSpace===Oi.GrayScale?this.pdfColorSpace:Oi.Rgb}set colorSpace(t){this.pdfColorSpace=t===Oi.Rgb||t===Oi.Cmyk||t===Oi.GrayScale?t:Oi.Rgb}get template(){return null==this.pageTemplate&&(this.pageTemplate=new sn),this.pageTemplate}set template(t){this.pageTemplate=t}docSave(t,s,n){if(this.checkPagesPresence(),null===t)throw new Error("ArgumentNullException : stream");this.streamWriter=t;let r=new gi(t);if(r.document=this,"boolean"==typeof s&&typeof n>"u")return this.crossTable.save(r);this.crossTable.save(r,s)}checkPagesPresence(){0===this.pages.count&&this.pages.add()}destroy(){this.catalog=void 0,this.colorSpace=void 0,this.currentSavingObj=void 0,this.documentPageCollection=void 0,this.isStreamCopied=void 0,this.pageSettings=void 0,this.pageTemplate=void 0,this.pdfColorSpace=void 0,this.sectionCollection=void 0,b.cache.destroy(),this.crossTable.pdfObjects.destroy(),b.cache=void 0,this.streamWriter.destroy()}}return b.defaultStandardFont=null,b.isCacheEnabled=!0,b})(),j=(()=>{class b{static getMetrics(t,s,n){let r=null;switch(t){case Ot.Helvetica:r=this.getHelveticaMetrics(t,s,n);break;case Ot.Courier:r=this.getCourierMetrics(t,s,n);break;case Ot.TimesRoman:r=this.getTimesMetrics(t,s,n);break;case Ot.Symbol:r=this.getSymbolMetrics(t,s,n);break;case Ot.ZapfDingbats:r=this.getZapfDingbatsMetrics(t,s,n);break;default:r=this.getHelveticaMetrics(Ot.Helvetica,s,n)}return r.name=t.toString(),r.subScriptSizeFactor=this.subSuperScriptFactor,r.superscriptSizeFactor=this.subSuperScriptFactor,r}static getHelveticaMetrics(t,s,n){let r=new oo;return(s&wt.Bold)>0&&(s&wt.Italic)>0?(r.ascent=this.helveticaBoldItalicAscent,r.descent=this.helveticaBoldItalicDescent,r.postScriptName=this.helveticaBoldItalicName,r.size=n,r.widthTable=new Yr(this.arialBoldWidth),r.height=r.ascent-r.descent):(s&wt.Bold)>0?(r.ascent=this.helveticaBoldAscent,r.descent=this.helveticaBoldDescent,r.postScriptName=this.helveticaBoldName,r.size=n,r.widthTable=new Yr(this.arialBoldWidth),r.height=r.ascent-r.descent):(s&wt.Italic)>0?(r.ascent=this.helveticaItalicAscent,r.descent=this.helveticaItalicDescent,r.postScriptName=this.helveticaItalicName,r.size=n,r.widthTable=new Yr(this.arialWidth),r.height=r.ascent-r.descent):(r.ascent=this.helveticaAscent,r.descent=this.helveticaDescent,r.postScriptName=this.helveticaName,r.size=n,r.widthTable=new Yr(this.arialWidth),r.height=r.ascent-r.descent),r}static getCourierMetrics(t,s,n){let r=new oo;return(s&wt.Bold)>0&&(s&wt.Italic)>0?(r.ascent=this.courierBoldItalicAscent,r.descent=this.courierBoldItalicDescent,r.postScriptName=this.courierBoldItalicName,r.size=n,r.widthTable=new Yr(this.fixedWidth),r.height=r.ascent-r.descent):(s&wt.Bold)>0?(r.ascent=this.courierBoldAscent,r.descent=this.courierBoldDescent,r.postScriptName=this.courierBoldName,r.size=n,r.widthTable=new Yr(this.fixedWidth),r.height=r.ascent-r.descent):(s&wt.Italic)>0?(r.ascent=this.courierItalicAscent,r.descent=this.courierItalicDescent,r.postScriptName=this.courierItalicName,r.size=n,r.widthTable=new Yr(this.fixedWidth),r.height=r.ascent-r.descent):(r.ascent=this.courierAscent,r.descent=this.courierDescent,r.postScriptName=this.courierName,r.size=n,r.widthTable=new Yr(this.fixedWidth),r.height=r.ascent-r.descent),r}static getTimesMetrics(t,s,n){let r=new oo;return(s&wt.Bold)>0&&(s&wt.Italic)>0?(r.ascent=this.timesBoldItalicAscent,r.descent=this.timesBoldItalicDescent,r.postScriptName=this.timesBoldItalicName,r.size=n,r.widthTable=new Yr(this.timesRomanBoldItalicWidths),r.height=r.ascent-r.descent):(s&wt.Bold)>0?(r.ascent=this.timesBoldAscent,r.descent=this.timesBoldDescent,r.postScriptName=this.timesBoldName,r.size=n,r.widthTable=new Yr(this.timesRomanBoldWidth),r.height=r.ascent-r.descent):(s&wt.Italic)>0?(r.ascent=this.timesItalicAscent,r.descent=this.timesItalicDescent,r.postScriptName=this.timesItalicName,r.size=n,r.widthTable=new Yr(this.timesRomanItalicWidth),r.height=r.ascent-r.descent):(r.ascent=this.timesAscent,r.descent=this.timesDescent,r.postScriptName=this.timesName,r.size=n,r.widthTable=new Yr(this.timesRomanWidth),r.height=r.ascent-r.descent),r}static getSymbolMetrics(t,s,n){let r=new oo;return r.ascent=this.symbolAscent,r.descent=this.symbolDescent,r.postScriptName=this.symbolName,r.size=n,r.widthTable=new Yr(this.symbolWidth),r.height=r.ascent-r.descent,r}static getZapfDingbatsMetrics(t,s,n){let r=new oo;return r.ascent=this.zapfDingbatsAscent,r.descent=this.zapfDingbatsDescent,r.postScriptName=this.zapfDingbatsName,r.size=n,r.widthTable=new Yr(this.zapfDingbatsWidth),r.height=r.ascent-r.descent,r}}return b.subSuperScriptFactor=1.52,b.helveticaAscent=931,b.helveticaDescent=-225,b.helveticaName="Helvetica",b.helveticaBoldAscent=962,b.helveticaBoldDescent=-228,b.helveticaBoldName="Helvetica-Bold",b.helveticaItalicAscent=931,b.helveticaItalicDescent=-225,b.helveticaItalicName="Helvetica-Oblique",b.helveticaBoldItalicAscent=962,b.helveticaBoldItalicDescent=-228,b.helveticaBoldItalicName="Helvetica-BoldOblique",b.courierAscent=805,b.courierDescent=-250,b.courierName="Courier",b.courierBoldAscent=801,b.courierBoldDescent=-250,b.courierBoldName="Courier-Bold",b.courierItalicAscent=805,b.courierItalicDescent=-250,b.courierItalicName="Courier-Oblique",b.courierBoldItalicAscent=801,b.courierBoldItalicDescent=-250,b.courierBoldItalicName="Courier-BoldOblique",b.timesAscent=898,b.timesDescent=-218,b.timesName="Times-Roman",b.timesBoldAscent=935,b.timesBoldDescent=-218,b.timesBoldName="Times-Bold",b.timesItalicAscent=883,b.timesItalicDescent=-217,b.timesItalicName="Times-Italic",b.timesBoldItalicAscent=921,b.timesBoldItalicDescent=-218,b.timesBoldItalicName="Times-BoldItalic",b.symbolAscent=1010,b.symbolDescent=-293,b.symbolName="Symbol",b.zapfDingbatsAscent=820,b.zapfDingbatsDescent=-143,b.zapfDingbatsName="ZapfDingbats",b.arialWidth=[278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,0,556,0,222,556,333,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,222,222,333,333,350,556,1e3,333,1e3,500,333,944,0,500,667,0,333,556,556,556,556,260,556,333,737,370,556,584,0,737,333,400,584,333,333,333,556,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,584,611,556,556,556,556,500,556,500],b.arialBoldWidth=[278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,0,556,0,278,556,500,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,278,278,500,500,350,556,1e3,333,1e3,556,333,944,0,500,667,0,333,556,556,556,556,280,556,333,737,370,556,584,0,737,333,400,584,333,333,333,611,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,584,611,611,611,611,611,556,611,556],b.fixedWidth=[600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600],b.timesRomanWidth=[250,333,408,500,500,833,778,180,333,333,500,564,250,333,250,278,500,500,500,500,500,500,500,500,500,500,278,278,564,564,564,444,921,722,667,667,722,611,556,722,722,333,389,722,611,889,722,722,556,722,667,556,611,722,722,944,722,722,611,333,278,333,469,500,333,444,500,444,500,444,333,500,500,278,278,500,278,778,500,500,500,500,333,389,278,500,500,722,500,500,444,480,200,480,541,0,500,0,333,500,444,1e3,500,500,333,1e3,556,333,889,0,611,0,0,333,333,444,444,350,500,1e3,333,980,389,333,722,0,444,722,0,333,500,500,500,500,200,500,333,760,276,500,564,0,760,333,400,564,300,300,333,500,453,250,333,300,310,500,750,750,750,444,722,722,722,722,722,722,889,667,611,611,611,611,333,333,333,333,722,722,722,722,722,722,722,564,722,722,722,722,722,722,556,500,444,444,444,444,444,444,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,564,500,500,500,500,500,500,500,500],b.timesRomanBoldWidth=[250,333,555,500,500,1e3,833,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,930,722,667,722,722,667,611,778,778,389,500,778,667,944,722,778,611,778,722,556,667,722,722,1e3,722,722,667,333,278,333,581,500,333,500,556,444,556,444,333,500,556,278,333,556,278,833,556,500,556,556,444,389,333,556,500,722,500,500,444,394,220,394,520,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,1e3,0,667,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,444,722,0,333,500,500,500,500,220,500,333,747,300,500,570,0,747,333,400,570,300,300,333,556,540,250,333,300,330,500,750,750,750,500,722,722,722,722,722,722,1e3,722,667,667,667,667,389,389,389,389,722,722,778,778,778,778,778,570,778,722,722,722,722,722,611,556,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,500,556,500],b.timesRomanItalicWidth=[250,333,420,500,500,833,778,214,333,333,500,675,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,675,675,675,500,920,611,611,667,722,611,611,722,722,333,444,667,556,833,667,722,611,722,611,500,556,722,611,833,611,556,556,389,278,389,422,500,333,500,500,444,500,444,278,500,500,278,278,444,278,722,500,500,500,500,389,389,278,500,444,667,444,444,389,400,275,400,541,0,500,0,333,500,556,889,500,500,333,1e3,500,333,944,0,556,0,0,333,333,556,556,350,500,889,333,980,389,333,667,0,389,556,0,389,500,500,500,500,275,500,333,760,276,500,675,0,760,333,400,675,300,300,333,500,523,250,333,300,310,500,750,750,750,500,611,611,611,611,611,611,889,667,611,611,611,611,333,333,333,333,722,667,722,722,722,722,722,675,722,722,722,722,722,556,611,500,500,500,500,500,500,500,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,675,500,500,500,500,500,444,500,444],b.timesRomanBoldItalicWidths=[250,389,555,500,500,833,778,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,832,667,667,667,722,667,667,722,778,389,500,667,611,889,722,722,611,722,667,556,611,722,667,889,667,611,611,333,278,333,570,500,333,500,500,444,500,444,333,500,556,278,278,500,278,778,556,500,500,500,389,389,278,556,444,667,500,444,389,348,220,348,570,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,944,0,611,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,389,611,0,389,500,500,500,500,220,500,333,747,266,500,606,0,747,333,400,570,300,300,333,576,500,250,333,300,300,500,750,750,750,500,667,667,667,667,667,667,944,667,667,667,667,667,389,389,389,389,722,722,722,722,722,722,722,570,722,722,722,722,722,611,611,500,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,444,500,444],b.symbolWidth=[250,333,713,500,549,833,778,439,333,333,500,549,250,549,250,278,500,500,500,500,500,500,500,500,500,500,278,278,549,549,549,444,549,722,667,722,612,611,763,603,722,333,631,722,686,889,722,722,768,741,556,592,611,690,439,768,645,795,611,333,863,333,658,500,500,631,549,549,494,439,521,411,603,329,603,549,549,576,521,549,549,521,549,603,439,576,713,686,493,686,494,480,200,480,549,750,620,247,549,167,713,500,753,753,753,753,1042,987,603,987,603,400,549,411,549,549,713,494,460,549,549,549,549,1e3,603,1e3,658,823,686,795,987,768,768,823,768,768,713,713,713,713,713,713,713,768,713,790,790,890,823,549,250,713,603,603,1042,987,603,987,603,494,329,790,790,786,713,384,384,384,384,384,384,494,494,494,494,329,274,686,686,686,384,384,384,384,384,384,494,494,494,-1],b.zapfDingbatsWidth=[278,974,961,974,980,719,789,790,791,690,960,939,549,855,911,933,911,945,974,755,846,762,761,571,677,763,760,759,754,494,552,537,577,692,786,788,788,790,793,794,816,823,789,841,823,833,816,831,923,744,723,749,790,792,695,776,768,792,759,707,708,682,701,826,815,789,789,707,687,696,689,786,787,713,791,785,791,873,761,762,762,759,759,892,892,788,784,438,138,277,415,392,392,668,668,390,390,317,317,276,276,509,509,410,410,234,234,334,334,732,544,544,910,667,760,760,776,595,694,626,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,894,838,1016,458,748,924,748,918,927,928,928,834,873,828,924,924,917,930,931,463,883,836,836,867,867,696,696,874,874,760,946,771,865,771,888,967,888,831,873,927,970,918],b})(),oe=(()=>{class b extends Rs{constructor(t,s,n){super(s,typeof n>"u"?t instanceof b?t.style:wt.Regular:n),this.dictionaryProperties=new de,this.encodings=["Unknown","StandardEncoding","MacRomanEncoding","MacExpertEncoding","WinAnsiEncoding","PDFDocEncoding","IdentityH"],this.pdfFontFamily=typeof t>"u"?Ot.Helvetica:t instanceof b?t.fontFamily:t,this.checkStyle(),this.initializeInternals()}get fontFamily(){return this.pdfFontFamily}checkStyle(){if(this.fontFamily===Ot.Symbol||this.fontFamily===Ot.ZapfDingbats){let t=this.style;t&=~(wt.Bold|wt.Italic),this.setStyle(t)}}getLineWidth(t,s){if(null==t)throw new Error("ArgumentNullException:line");let n=0;for(let m=0,T=(t=b.convert(t)).length;m<T;m++)n+=this.getCharWidthInternal(t[m],s);let h=this.metrics.getSize(s);return n*=Rs.charSizeMultiplier*h,n=this.applyFormatSettings(t,s,n),n}equalsToFont(t){let s=!1;if(null!=t){let h=~(wt.Underline|wt.Strikeout),m=(this.style&h)==(t.style&h);s=this.fontFamily===t.fontFamily&&m}return s}initializeInternals(){let t=null;t=I.cache.search(this);let s=null,n=j.getMetrics(this.pdfFontFamily,this.style,this.size);this.metrics=n,s=this.createInternals(),this.setInternals(s)}createInternals(){let t=new Be;return t.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.font)),t.items.setValue(this.dictionaryProperties.subtype,new Xe(this.dictionaryProperties.type1)),t.items.setValue(this.dictionaryProperties.baseFont,new Xe(this.metrics.postScriptName)),this.fontFamily!==Ot.Symbol&&this.fontFamily!==Ot.ZapfDingbats&&t.items.setValue(this.dictionaryProperties.encoding,new Xe(this.encodings[ns.WinAnsiEncoding])),t}getCharWidthInternal(t,s){let n=0,r=0;return r=t.charCodeAt(0),("0"===this.name||"1"===this.name||"2"===this.name||"3"===this.name||"4"===this.name)&&(r-=b.charOffset),r=r>=0&&128!==r?r:0,n=this.metrics.widthTable.items(r),n}static convert(t){return t}}return b.charOffset=32,b})();class Yi{constructor(e){this.layoutElement=e}get elements(){return this.layoutElement}getElement(){return this.layoutElement}layout(e){return this.layoutInternal(e)}Layouter(e){return this.layoutInternal(e)}getNextPage(e){return e.section.add()}getPaginateBounds(e){if(null==e)throw new Error("ArgumentNullException : param");return e.format.usePaginateBounds?e.format.paginateBounds:new Ui(e.bounds.x,0,e.bounds.width,e.bounds.height)}}class Ss{get layout(){return this.layoutType}set layout(e){this.layoutType=e}get break(){return this.breakType}set break(e){this.breakType=e}get paginateBounds(){return typeof this.layoutPaginateBounds>"u"&&null==this.layoutPaginateBounds&&(this.layoutPaginateBounds=new Ui(0,0,0,0)),this.layoutPaginateBounds}set paginateBounds(e){this.layoutPaginateBounds=e,this.boundsSet=!0}get usePaginateBounds(){return this.boundsSet}constructor(e){typeof e>"u"||(this.break=e.break,this.layout=e.layout,this.paginateBounds=e.paginateBounds,this.boundsSet=e.usePaginateBounds)}}class Ps{get page(){return this.pdfPage}set page(e){this.pdfPage=e}get bounds(){return new Ui(this.layoutBounds.x,this.layoutBounds.y,this.layoutBounds.width,this.layoutBounds.height)}set bounds(e){this.layoutBounds=e}get format(){return this.layoutFormat}set format(e){this.layoutFormat=e}}class un{get page(){return this.pdfPage}get bounds(){return this.layoutBounds}constructor(e,t){this.pdfPage=e,this.layoutBounds=t}}class Xs{get left(){return this.leftPen}set left(e){this.leftPen=e}get right(){return this.rightPen}set right(e){this.rightPen=e}get top(){return this.topPen}set top(e){this.topPen=e}get bottom(){return this.bottomPen}set bottom(e){this.bottomPen=e}set all(e){this.leftPen=this.rightPen=this.topPen=this.bottomPen=e}get isAll(){return this.leftPen===this.rightPen&&this.leftPen===this.topPen&&this.leftPen===this.bottomPen}static get default(){return new Xs}constructor(){let e=new rs(new ot(0,0,0));e.dashStyle=At.Solid;let t=new rs(new ot(0,0,0));t.dashStyle=At.Solid;let s=new rs(new ot(0,0,0));s.dashStyle=At.Solid;let n=new rs(new ot(0,0,0));n.dashStyle=At.Solid,this.leftPen=e,this.rightPen=t,this.topPen=s,this.bottomPen=n}}class Jn{constructor(e,t,s,n){this.hasLeftPad=!1,this.hasRightPad=!1,this.hasTopPad=!1,this.hasBottomPad=!1,typeof e>"u"?(this.leftPad=this.rightPad=5.76,this.bottomPad=this.topPad=.5):(this.leftPad=e,this.rightPad=t,this.topPad=s,this.bottomPad=n,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0)}get left(){return this.leftPad}set left(e){this.leftPad=e,this.hasLeftPad=!0}get right(){return this.rightPad}set right(e){this.rightPad=e,this.hasRightPad=!0}get top(){return this.topPad}set top(e){this.topPad=e,this.hasTopPad=!0}get bottom(){return this.bottomPad}set bottom(e){this.bottomPad=e,this.hasBottomPad=!0}set all(e){this.leftPad=this.rightPad=this.topPad=this.bottomPad=e,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0}}class Ar{get raiseBeginPageLayout(){return typeof this.beginPageLayout<"u"}get raiseEndPageLayout(){return typeof this.endPageLayout<"u"}onBeginPageLayout(e){this.beginPageLayout&&this.beginPageLayout(this,e)}onEndPageLayout(e){this.endPageLayout&&this.endPageLayout(this,e)}drawHelper(e,t,s,n){if(t instanceof hi&&typeof t.width>"u"&&typeof s>"u")return this.drawHelper(e,t.x,t.y);if("number"==typeof t&&"number"==typeof s&&typeof n>"u")return this.drawHelper(e,t,s,null);if(t instanceof Ui&&typeof t.width<"u"&&typeof s>"u")return this.drawHelper(e,t,null);if(t instanceof hi&&typeof t.width>"u"&&s instanceof Ss)return this.drawHelper(e,t.x,t.y,s);if("number"==typeof t&&"number"==typeof s&&(n instanceof Ss||null==n)){let h=new Ui(t,s,e.graphics.clientSize.width-t,0);return this.drawHelper(e,h,n)}if(t instanceof Ui&&typeof t.width<"u"&&"boolean"==typeof s)return this.bEmbedFonts=s,this.drawHelper(e,t,null);{let r=new Ps,h=t,m=s;if(r.page=e,r.bounds=h,null!=r){let V=r.bounds.x,Y=r.bounds.y;0===r.bounds.x&&(V=Xs.default.right.width/2),0===r.bounds.y&&(Y=Xs.default.top.width/2);let se=new Ui(V,Y,r.bounds.width,r.bounds.height);r.bounds=se}return r.format=m??new Ss,this.layout(r)}}}class En extends Yi{get element(){return super.getElement()}constructor(e){super(e)}layoutInternal(e){this.format=null!==this.element.stringFormat&&typeof this.element.stringFormat<"u"?this.element.stringFormat:null;let t=e.page,s=e.bounds,n=this.element.value,r=null,h=new Ie;for(h.page=t,h.remainder=n;;){h=this.layoutOnPage(n,t,s,e),r=this.getLayoutResult(h);break}return r}getLayoutResult(e){return new Ae(e.page,e.bounds,e.remainder,e.lastLineBounds)}layoutOnPage(e,t,s,n){let r=new Ie;r.remainder=e,r.page=t,s=this.checkCorrectBounds(t,s);let m=(new Yt).layout(e,this.element.font,this.format,s,t.getClientSize().height,!1,new Ei(0,0)),T=null==m.remainder,se=t.graphics,ge=this.element.getBrush();return this.element instanceof Ji&&(ge.color=new ot(0,0,255)),se.drawStringLayoutResult(m,this.element.font,this.element.pen,ge,s,this.format),r.lastLineBounds=se.getLineBounds(m.lineCount-1,m,this.element.font,s,this.format),r.bounds=this.getTextPageBounds(t,s,m),r.remainder=m.remainder,r.end=T,r}checkCorrectBounds(e,t){return t.height=t.height>0?t.height:e.graphics.clientSize.height-t.y,t}getTextPageBounds(e,t,s){let n=s.actualSize,r=t.x,h=t.y,m=t.width>0?t.width:n.width,T=n.height;return r=e.graphics.checkCorrectLayoutRectangle(n,t.x,t.y,this.format).x,h+=e.graphics.getTextVerticalAlignShift(n.height,t.height,this.format),new Ui(r,h,m,T)}}class Ie{}class Ae extends un{get remainder(){return this.remainderText}get lastLineBounds(){return this.lastLineTextBounds}constructor(e,t,s,n){super(e,t),this.remainderText=s,this.lastLineTextBounds=n}}class Le extends Ar{constructor(e,t,s,n,r){super(),this.content="",this.elementValue="",this.hasPointOverload=!1,this.isPdfTextElement=!1,typeof e>"u"||("string"==typeof e&&typeof t>"u"?(this.content=e,this.elementValue=e):"string"==typeof e&&t instanceof Rs&&typeof s>"u"?(this.content=e,this.elementValue=e,this.pdfFont=t):"string"==typeof e&&t instanceof Rs&&s instanceof rs&&typeof n>"u"?(this.content=e,this.elementValue=e,this.pdfFont=t,this.pdfPen=s):"string"==typeof e&&t instanceof Rs&&s instanceof bs&&typeof n>"u"?(this.content=e,this.elementValue=e,this.pdfFont=t,this.pdfBrush=s):(this.content=e,this.elementValue=e,this.pdfFont=t,this.pdfPen=s,this.pdfBrush=n,this.format=r))}get text(){return this.content}set text(e){this.elementValue=e,this.content=e}get value(){return this.elementValue}get pen(){return this.pdfPen}set pen(e){this.pdfPen=e}get brush(){return this.pdfBrush}set brush(e){this.pdfBrush=e}get font(){return this.pdfFont}set font(e){this.pdfFont=e,this.elementValue=this.pdfFont instanceof oe&&null!=this.content?oe.convert(this.content):this.content}get stringFormat(){return this.format}set stringFormat(e){this.format=e}getBrush(){return null==this.pdfBrush||typeof this.pdfBrush>"u"?new kt(new ot(0,0,0)):this.pdfBrush}layout(e){return new En(this).layout(e)}drawText(e,t,s,n){if(t instanceof hi&&typeof t.width>"u"&&typeof s>"u")return this.hasPointOverload=!0,this.drawText(e,t.x,t.y);if("number"==typeof t&&"number"==typeof s&&typeof n>"u")return this.hasPointOverload=!0,this.drawText(e,t,s,null);if(t instanceof Ui&&typeof t.width<"u"&&typeof s>"u")return this.drawText(e,t,null);if(t instanceof hi&&typeof t.width>"u"&&s instanceof Ss)return this.hasPointOverload=!0,this.drawText(e,t.x,t.y,s);if("number"==typeof t&&"number"==typeof s&&(n instanceof Ss||null==n)){this.hasPointOverload=!0;let h=new Ui(t,s,e.graphics.clientSize.width-t,0);return this.drawText(e,h,n)}if(t instanceof Ui&&typeof t.width<"u"&&"boolean"==typeof s)return this.drawText(e,t,null);{let r=new Yt;if(this.hasPointOverload){let m,h=r.layout(this.value,this.font,this.stringFormat,new Ei(e.graphics.clientSize.width-t.x,0),!0,e.graphics.clientSize),T=new Ps,V=t,Y=s;if(T.page=e,T.bounds=V,T.format=Y??new Ss,h.lines.length>1){if(this.text=h.layoutLines[0].text,T.bounds.y<=T.page.graphics.clientSize.height){let se=new hi(T.bounds.x,T.bounds.y);m=this.layout(T);let ge=new Ui(0,m.bounds.y+h.lineHeight,e.graphics.clientSize.width,h.lineHeight);for(let ke=1;ke<h.lines.length;ke++)if(T.page=m.page,T.bounds=new Ui(new hi(ge.x,ge.y),new Ei(ge.width,ge.height)),this.text=h.layoutLines[ke].text,ge.y+h.lineHeight>m.page.graphics.clientSize.height&&(T.page=T.page.graphics.getNextPage(),ge=new Ui(0,se.y>m.page.graphics.clientSize.height-m.bounds.height?m.bounds.height:0,m.page.graphics.clientSize.width,h.lineHeight),T.bounds=ge),m=this.layout(T),ke!==h.lines.length-1)ge=new Ui(0,m.bounds.y+h.lineHeight,m.page.graphics.clientSize.width,h.lineHeight);else{let qe=this.font.measureString(this.text,this.format).width;m=this.calculateResultBounds(m,qe,m.page.graphics.clientSize.width,0)}}return m}{let se=this.font.measureString(this.text,this.format);return T.bounds.y<=T.page.graphics.clientSize.height&&(m=this.layout(T),m=this.calculateResultBounds(m,se.width,m.page.graphics.clientSize.width,0)),m}}{let m,h=r.layout(this.value,this.font,this.stringFormat,new Ei(t.width,0),!1,e.graphics.clientSize),T=new Ps,V=t,Y=s;if(T.page=e,T.bounds=V,T.format=Y??new Ss,h.lines.length>1){if(this.text=h.layoutLines[0].text,T.bounds.y<=T.page.graphics.clientSize.height){let se=new hi(T.bounds.x,T.bounds.y);m=this.layout(T);let ge=new Ui(V.x,m.bounds.y+h.lineHeight,V.width,h.lineHeight);for(let ke=1;ke<h.lines.length;ke++)if(T.page=m.page,T.bounds=new Ui(ge.x,ge.y,ge.width,ge.height),this.text=h.layoutLines[ke].text,ge.y+h.lineHeight>m.page.graphics.clientSize.height&&(T.page=T.page.graphics.getNextPage(),ge=new Ui(V.x,se.y>m.page.graphics.clientSize.height-m.bounds.height?h.lineHeight:0,V.width,h.lineHeight),T.bounds=ge),m=this.layout(T),ke!==h.lines.length-1)ge=new Ui(V.x,m.bounds.y+h.lineHeight,V.width,h.lineHeight);else{let qe=this.font.measureString(this.text,this.format).width;m=this.calculateResultBounds(m,qe,V.width,V.x)}}return m}{let se=this.font.measureString(this.text,this.format);return T.bounds.y<=T.page.graphics.clientSize.height&&(m=this.layout(T),m=this.calculateResultBounds(m,se.width,V.width,V.x)),m}}}}calculateResultBounds(e,t,s,n){return null!=this.stringFormat&&typeof this.stringFormat<"u"&&this.stringFormat.alignment===Ci.Center?(e.bounds.x=n+(s-t)/2,e.bounds.width=t):null!=this.stringFormat&&typeof this.stringFormat<"u"&&this.stringFormat.alignment===Ci.Right?(e.bounds.x=n+(s-t),e.bounds.width=t):null!=this.stringFormat&&typeof this.stringFormat<"u"&&this.stringFormat.alignment===Ci.Justify?(e.bounds.x=n,e.bounds.width=s):(e.bounds.width=n,e.bounds.width=t),e}}class Et extends class Bt extends class dt extends class Ee{constructor(e){this.dictionaryProperties=new de,this.pdfColor=new ot(255,255,255),this.rectangle=new Ui(0,0,0,0),this.pdfPage=null,this.textBrush=new kt(new ot(0,0,0)),this.textFont=new oe(Ot.TimesRoman,10),this.format=new In(Ci.Left),this.content="",this.pdfDictionary=new Be,this.internalColor=new ot,this.darkness=1,typeof e>"u"?this.initialize():(this.initialize(),this.bounds=e)}get color(){return this.pdfColor}set color(e){this.pdfColor=e}get innerColor(){return this.internalColor}set innerColor(e){this.internalColor=e}get bounds(){return this.rectangle}set bounds(e){this.rectangle=e}get page(){return this.pdfPage}get font(){return this.textFont}set font(e){this.textFont=e}get stringFormat(){return this.format}set stringFormat(e){this.format=e}get brush(){return this.textBrush}set brush(e){this.textBrush=e}get text(){return this.content}set text(e){this.content=e,this.dictionary.items.setValue(this.dictionaryProperties.contents,new et(this.content))}get dictionary(){return this.pdfDictionary}set dictionary(e){this.pdfDictionary=e}initialize(){this.pdfDictionary.annotationBeginSave=new ji(this),this.pdfDictionary.items.setValue(this.dictionaryProperties.type,new Xe(this.dictionaryProperties.annot))}setPage(e){this.pdfPage=e,this.pdfDictionary.items.setValue(this.dictionaryProperties.p,new Xt(this.pdfPage))}beginSave(){this.save()}save(){let e=new Ui(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),s=e.height,n=this.pdfPage.section.pointToNativePdf(this.page,new hi(e.x,e.y));e.x=n.x,e.width=n.x+e.width,e.y=n.y-this.page.document.pageSettings.margins.top,e.height=e.y-s,this.pdfDictionary.items.setValue(this.dictionaryProperties.rect,Ut.fromRectangle(e)),this.dictionary.items.setValue(this.dictionaryProperties.ca,new ui(this.darkness))}get element(){return this.pdfDictionary}}{constructor(e){super(e)}initialize(){super.initialize(),this.dictionary.items.setValue(this.dictionaryProperties.subtype,new Xe(this.dictionaryProperties.link))}}{constructor(e){super(e),this.pdfAction=null}getSetAction(e){if(typeof e>"u")return this.pdfAction;this.pdfAction=e}}{get uriAction(){return typeof this.pdfUriAction>"u"&&(this.pdfUriAction=new ni),this.pdfUriAction}get uri(){return this.uriAction.uri}set uri(e){this.uriAction.uri!==e&&(this.uriAction.uri=e)}get action(){return this.getSetAction()}set action(e){this.getSetAction(e),this.uriAction.next=e}constructor(e,t){super(e),typeof t<"u"&&(this.uri=t)}initialize(){super.initialize(),this.dictionary.items.setValue(this.dictionaryProperties.subtype,new Xe(this.dictionaryProperties.link)),this.dictionary.items.setValue(this.dictionaryProperties.a,this.uriAction.element)}}class Ji extends Le{constructor(){super(),this.uniformResourceLocator="",this.uriAnnotation=null,this.recalculateBounds=!1,this.defaultBorder=new Ut;for(let e=0;e<3;e++)this.defaultBorder.add(new ui(0))}get url(){return this.uniformResourceLocator}set url(e){if(0===e.length)throw new Error("ArgumentException : Url - string can not be empty");this.uniformResourceLocator=e}draw(e,t){if(e instanceof wi){let s=new Yt,n=this.font.style;if(t instanceof hi){this.recalculateBounds=!0,this.font.style=wt.Underline;let r=s.layout(this.value,this.font,this.stringFormat,new Ei(e.graphics.clientSize.width-t.x,0),!0,e.graphics.clientSize);if(1===r.lines.length){let h=this.font.measureString(this.value),m=new Ui(t,h);m=this.calculateBounds(m,h.width,e.graphics.clientSize.width,t.x),this.uriAnnotation=new Et(m,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),e.annotations.add(this.uriAnnotation);let T=this.drawText(e,t);return this.font.style=n,T}{let h=this.drawMultipleLineWithPoint(r,e,t);return this.font.style=n,h}}{let r=s.layout(this.value,this.font,this.stringFormat,new Ei(t.width,0),!1,new Ei(0,0));if(this.font.style=wt.Underline,1===r.lines.length){let h=this.font.measureString(this.value),m=new Ui(new hi(t.x,t.y),h);m=this.calculateBounds(m,h.width,t.width,t.x),this.uriAnnotation=new Et(m,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),e.annotations.add(this.uriAnnotation);let T=this.drawText(e,t);return this.font.style=n,T}{let h=this.drawMultipleLineWithBounds(r,e,t);return this.font.style=n,h}}}{let s=new wi;return s=e.page,this.draw(s,t)}}drawMultipleLineWithPoint(e,t,s){let n;for(let r=0;r<e.layoutLines.length;r++){let h=this.font.measureString(e.lines[r].text),m=new Ui(s,h);if(0!==r&&(m.x=0),this.text=e.lines[r].text,m.y+h.height>t.graphics.clientSize.height){if(0===r)break;t=t.graphics.getNextPage(),m=new Ui(0,0,t.graphics.clientSize.width,h.height),s.y=0}m=this.calculateBounds(m,h.width,t.graphics.clientSize.width,m.x),this.uriAnnotation=new Et(m,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),t.annotations.add(this.uriAnnotation),n=0!==r?this.drawText(t,new hi(0,m.y)):this.drawText(t,m.x,m.y),s.y+=h.height}return n}drawMultipleLineWithBounds(e,t,s){let n;for(let r=0;r<e.layoutLines.length;r++){let h=this.font.measureString(e.lines[r].text),m=new Ui(new hi(s.x,s.y),h);if(m=this.calculateBounds(m,h.width,s.width,s.x),this.text=e.lines[r].text,s.y+h.height>t.graphics.clientSize.height){if(0===r)break;t=t.graphics.getNextPage(),s=new Ui(s.x,0,s.width,h.height),m.y=0}this.uriAnnotation=new Et(m,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),t.annotations.add(this.uriAnnotation),n=this.drawText(t,s),s.y+=h.height}return n}calculateBounds(e,t,s,n){return null!=this.stringFormat&&typeof this.stringFormat<"u"&&this.stringFormat.alignment===Ci.Center?(e.x=n+(s-t)/2,e.width=t):null!=this.stringFormat&&typeof this.stringFormat<"u"&&this.stringFormat.alignment===Ci.Right?(e.x=n+(s-t),e.width=t):null!=this.stringFormat&&typeof this.stringFormat<"u"&&this.stringFormat.alignment===Ci.Justify?(e.x=n,e.width=s):(e.width=n,e.width=t),e}}let _s=(()=>{class b{static convert(t,s){let n="";switch(s){case pn.None:n="";break;case pn.Numeric:n=t.toString();break;case pn.LowerLatin:n=this.arabicToLetter(t).toLowerCase();break;case pn.LowerRoman:n=this.arabicToRoman(t).toLowerCase();break;case pn.UpperLatin:n=this.arabicToLetter(t);break;case pn.UpperRoman:n=this.arabicToRoman(t)}return n}static arabicToRoman(t){let s="",n=this.generateNumber(t,1e3,"M");s+=n.returnValue;let r=this.generateNumber(t=n.intArabic,900,"CM");s+=r.returnValue;let h=this.generateNumber(t=r.intArabic,500,"D");s+=h.returnValue;let m=this.generateNumber(t=h.intArabic,400,"CD");s+=m.returnValue;let T=this.generateNumber(t=m.intArabic,100,"C");s+=T.returnValue;let V=this.generateNumber(t=T.intArabic,90,"XC");s+=V.returnValue;let Y=this.generateNumber(t=V.intArabic,50,"L");s+=Y.returnValue;let se=this.generateNumber(t=Y.intArabic,40,"XL");s+=se.returnValue;let ge=this.generateNumber(t=se.intArabic,10,"X");s+=ge.returnValue;let ke=this.generateNumber(t=ge.intArabic,9,"IX");s+=ke.returnValue;let qe=this.generateNumber(t=ke.intArabic,5,"V");s+=qe.returnValue;let mt=this.generateNumber(t=qe.intArabic,4,"IV");s+=mt.returnValue;let Vt=this.generateNumber(t=mt.intArabic,1,"I");return s+=Vt.returnValue,t=Vt.intArabic,s.toString()}static arabicToLetter(t){let s=this.convertToLetter(t),n="";for(;s.length>0;){let r=s.pop();n=this.appendChar(n,r)}return n.toString()}static generateNumber(t,s,n){let r="";for(;t>=s;)t-=s,r+=n;return{returnValue:r.toString(),intArabic:t}}static convertToLetter(t){if(t<=0)throw Error("ArgumentOutOfRangeException-arabic, Value can not be less 0");let s=[];for(;t>this.letterLimit;){let n=t%this.letterLimit;0===n?(t=t/this.letterLimit-1,n=this.letterLimit):t/=this.letterLimit,s.push(n)}return s.push(t),s}static appendChar(t,s){return t+String.fromCharCode(b.acsiiStartIndex+s)}}return b.letterLimit=26,b.acsiiStartIndex=64,b})();class _n{constructor(e,t){this.pdfTemplate=null,this.content="",typeof e>"u"||(this.template=e,this.value=t)}get template(){return this.pdfTemplate}set template(e){this.pdfTemplate=e}get value(){return this.content}set value(e){this.content=e}}class en extends mr{constructor(){super(),this.list=new qn}performDraw(e,t,s,n){super.performDrawHelper(e,t,s,n);let r=this.getValue(e),h=new qs(this.getSize());this.list.setValue(e,new _n(h,r));let m=this.getSize();h.graphics.drawString(r,this.getFont(),this.pen,this.getBrush(),0,0,m.width,m.height,this.stringFormat);let T=new hi(t.x+this.location.x,t.y+this.location.y);e.drawPdfTemplate(h,T,new Ei(h.width*s,h.height*n))}}class po extends en{constructor(e,t){super(),this.internalNumberStyle=pn.Numeric,typeof t>"u"?this.font=e:t instanceof bs?(this.font=e,this.brush=t):(this.font=e,this.bounds=t)}get numberStyle(){return this.internalNumberStyle}set numberStyle(e){this.internalNumberStyle=e}getValue(e){let t=null,s=this.getPageFromGraphics(e);return t=this.internalGetValue(s),t}internalGetValue(e){let s=e.document.pages.indexOf(e)+1;return _s.convert(s,this.numberStyle)}}class jo extends en{constructor(e,t,s,...n){super(),this.internalAutomaticFields=null,this.internalText="",this.font=e,this.brush=t,this.text=s,this.automaticFields=n}get text(){return this.internalText}set text(e){this.internalText=e}get automaticFields(){return this.internalAutomaticFields}set automaticFields(e){this.internalAutomaticFields=e}getValue(e){let t=this.text.toString();if(typeof this.automaticFields<"u"&&null!=this.automaticFields&&this.automaticFields.length>0)for(let s=0;s<this.automaticFields.length;s++)t=t.replace("{"+s+"}",this.automaticFields[s].getValue(e));return t}}class nr extends mr{constructor(){super(),this.list=new qn,this.painterGraphics=[]}performDraw(e,t,s,n){super.performDrawHelper(e,t,s,n);let h=this.getPageFromGraphics(e).document,m=this.getValue(e);if(this.list.containsKey(h)){let T=this.list.getValue(h),V=new hi(t.x+this.location.x,t.y+this.location.y);e.drawPdfTemplate(T.template,V,new Ei(T.template.width*s,T.template.height*n)),this.painterGraphics.push(e)}else{let T=this.getSize(),V=new qs(T);this.list.setValue(h,new _n(V,m)),V.graphics.drawString(m,this.getFont(),this.pen,this.getBrush(),0,0,T.width,T.height,this.stringFormat);let Y=new hi(t.x+this.location.x,t.y+this.location.y);e.drawPdfTemplate(V,Y,new Ei(V.width*s,V.height*n)),this.painterGraphics.push(e)}}}class hr extends nr{constructor(e,t){super(),this.internalNumberStyle=pn.Numeric,typeof t>"u"?this.font=e:t instanceof bs?(this.font=e,this.brush=t):(this.font=e,this.bounds=t)}get numberStyle(){return this.internalNumberStyle}set numberStyle(e){this.internalNumberStyle=e}getValue(e){let t=null,r=this.getPageFromGraphics(e).section.parent.document.pages.count;return t=_s.convert(r,this.numberStyle),t}}new lt;var w=(()=>{return(b=w||(w={}))[b.Overlap=0]="Overlap",b[b.Inside=1]="Inside",w;var b})();class k{get backgroundBrush(){return this.gridBackgroundBrush}set backgroundBrush(e){this.gridBackgroundBrush=e}get textBrush(){return this.gridTextBrush}set textBrush(e){this.gridTextBrush=e}get textPen(){return this.gridTextPen}set textPen(e){this.gridTextPen=e}get font(){return this.gridFont}set font(e){this.gridFont=e}get backgroundImage(){return this.gridBackgroundImage}set backgroundImage(e){this.gridBackgroundImage=e}}class N extends k{constructor(){super(),this.gridBorderOverlapStyle=w.Overlap,this.bAllowHorizontalOverflow=!1,this.gridHorizontalOverflowType=G.LastPage}get cellSpacing(){return typeof this.gridCellSpacing>"u"&&(this.gridCellSpacing=0),this.gridCellSpacing}set cellSpacing(e){this.gridCellSpacing=e}get horizontalOverflowType(){return this.gridHorizontalOverflowType}set horizontalOverflowType(e){this.gridHorizontalOverflowType=e}get allowHorizontalOverflow(){return this.bAllowHorizontalOverflow}set allowHorizontalOverflow(e){this.bAllowHorizontalOverflow=e}get cellPadding(){return typeof this.gridCellPadding>"u"&&(this.gridCellPadding=new Jn),this.gridCellPadding}set cellPadding(e){typeof this.gridCellPadding>"u"?(this.gridCellPadding=new Jn,this.gridCellPadding=e):this.gridCellPadding=e}get borderOverlapStyle(){return this.gridBorderOverlapStyle}set borderOverlapStyle(e){this.gridBorderOverlapStyle=e}}class R extends k{constructor(){super(),this.gridCellBorders=Xs.default}get stringFormat(){return this.format}set stringFormat(e){this.format=e}get borders(){return this.gridCellBorders}set borders(e){this.gridCellBorders=e}get cellPadding(){return this.gridCellPadding}set cellPadding(e){(null==this.gridCellPadding||typeof this.gridCellPadding>"u")&&(this.gridCellPadding=new Jn),this.gridCellPadding=e}}class K{get backgroundBrush(){return this.gridRowBackgroundBrush}setBackgroundBrush(e){if(this.gridRowBackgroundBrush=e,typeof this.parent<"u")for(let t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.backgroundBrush=e}get textBrush(){return this.gridRowTextBrush}setTextBrush(e){if(this.gridRowTextBrush=e,typeof this.parent<"u")for(let t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.textBrush=e}get textPen(){return this.gridRowTextPen}setTextPen(e){if(this.gridRowTextPen=e,typeof this.parent<"u")for(let t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.textPen=e}get font(){return this.gridRowFont}setFont(e){if(this.gridRowFont=e,typeof this.parent<"u")for(let t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.font=e}get border(){return typeof this.gridRowBorder>"u"&&this.setBorder(new Xs),this.gridRowBorder}setBorder(e){if(this.gridRowBorder=e,typeof this.parent<"u")for(let t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.borders=e}setParent(e){this.parent=e}get backgroundImage(){return this.gridRowBackgroundImage}setBackgroundImage(e){this.gridRowBackgroundImage=e}constructor(){}}var G=(()=>{return(b=G||(G={}))[b.NextPage=0]="NextPage",b[b.LastPage=1]="LastPage",G;var b})();class ye{constructor(e){this.cellWidth=0,this.cellHeight=0,this.tempval=0,this.fontSpilt=!1,this.finsh=!0,this.rowSpanRemainingHeight=0,this.hasRowSpan=!1,this.hasColSpan=!1,this.isFinish=!0,this.present=!1,this.gridRowSpan=1,this.colSpan=1,typeof e<"u"&&(this.gridRow=e)}get isCellMergeContinue(){return this.internalIsCellMergeContinue}set isCellMergeContinue(e){this.internalIsCellMergeContinue=e}get isRowMergeContinue(){return this.internalIsRowMergeContinue}set isRowMergeContinue(e){this.internalIsRowMergeContinue=e}get isCellMergeStart(){return this.internalIsCellMergeStart}set isCellMergeStart(e){this.internalIsCellMergeStart=e}get isRowMergeStart(){return this.internalIsRowMergeStart}set isRowMergeStart(e){this.internalIsRowMergeStart=e}get remainingString(){return this.remaining}set remainingString(e){this.remaining=e}get FinishedDrawingCell(){return this.isFinish}set FinishedDrawingCell(e){this.isFinish=e}get stringFormat(){return null==this.format&&(this.format=new In),this.format}set stringFormat(e){this.format=e}get row(){return this.gridRow}set row(e){this.gridRow=e}get value(){return this.objectValue}set value(e){if(this.objectValue=e,this.objectValue instanceof ii){this.row.grid.isSingleGrid=!1,this.objectValue.ParentCell=this,this.objectValue.isChildGrid=!0;let s=this.row.grid.rows.count;for(let n=0;n<s;n++){let r=this.row.grid.rows.getRow(n),h=r.cells.count;for(let m=0;m<h;m++)r.cells.getCell(m).parent=this}}}get rowSpan(){return this.gridRowSpan}set rowSpan(e){if(e<1)throw new Error("ArgumentException : Invalid span specified, must be greater than or equal to 1");this.gridRowSpan=e,this.row.rowSpanExists=!0,this.row.grid.hasRowSpanSpan=!0}get style(){return null==this.cellStyle&&(this.cellStyle=new R),this.cellStyle}set style(e){this.cellStyle=e}get height(){return 0===this.cellHeight&&(this.cellHeight=this.measureHeight()),this.cellHeight}set height(e){this.cellHeight=e}get columnSpan(){return this.colSpan}set columnSpan(e){if(e<1)throw Error("Invalid span specified, must be greater than or equal to 1");this.colSpan=e,this.row.columnSpanExists=!0}get width(){return(0===this.cellWidth||this.row.grid.isComplete)&&(this.cellWidth=this.measureWidth()),Math.round(this.cellWidth)}set width(e){this.cellWidth=e}measureWidth(){let e=0,t=new Yt;if("string"==typeof this.objectValue)e+=t.layout(this.objectValue,this.getTextFont(),this.stringFormat,new Ei(Number.MAX_VALUE,Number.MAX_VALUE),!1,new Ei(0,0)).actualSize.width,e+=2*(this.style.borders.left.width+this.style.borders.right.width);else if(this.objectValue instanceof ii)e=this.objectValue.size.width;else if(this.objectValue instanceof Vr||this.objectValue instanceof Zn)e+=this.objectValue.width;else if(this.objectValue instanceof Ji){let s=this.objectValue;e+=t.layout(s.text,s.font,s.stringFormat,new Ei(0,0),!1,new Ei(0,0)).actualSize.width,e+=2*(this.style.borders.left.width+this.style.borders.right.width)}return this.objectValue instanceof ii?null!=this.style.cellPadding||typeof this.style.cellPadding<"u"?(typeof this.style.cellPadding.left<"u"&&this.style.cellPadding.hasLeftPad&&(e+=this.style.cellPadding.left),typeof this.style.cellPadding.right<"u"&&this.style.cellPadding.hasRightPad&&(e+=this.style.cellPadding.right)):(typeof this.row.grid.style.cellPadding.left<"u"&&this.row.grid.style.cellPadding.hasLeftPad&&(e+=this.row.grid.style.cellPadding.left),typeof this.row.grid.style.cellPadding.right<"u"&&this.row.grid.style.cellPadding.hasRightPad&&(e+=this.row.grid.style.cellPadding.right)):e+=null!=this.style.cellPadding?this.style.cellPadding.left+this.style.cellPadding.right:this.row.grid.style.cellPadding.left+this.row.grid.style.cellPadding.right,e+=this.row.grid.style.cellSpacing,e}drawCellBackground(e,t){let s=this.getBackgroundBrush();null!=s&&(e.save(),e.drawRectangle(s,t.x,t.y,t.width,t.height),e.restore()),null!=this.style.backgroundImage&&(this.getBackgroundImage(),e.drawImage(this.style.backgroundImage,t.x,t.y,t.width,t.height))}adjustContentLayoutArea(e){let t=new Ui(e.x,e.y,e.width,e.height);return this.objectValue instanceof ii?(null==this.style.cellPadding||typeof this.style.cellPadding>"u"?(typeof this.gridRow.grid.style.cellPadding.left<"u"&&this.gridRow.grid.style.cellPadding.hasLeftPad&&(t.x+=this.gridRow.grid.style.cellPadding.left+this.cellStyle.borders.left.width,t.width-=this.gridRow.grid.style.cellPadding.left),typeof this.gridRow.grid.style.cellPadding.top<"u"&&this.gridRow.grid.style.cellPadding.hasTopPad&&(t.y+=this.gridRow.grid.style.cellPadding.top+this.cellStyle.borders.top.width,t.height-=this.gridRow.grid.style.cellPadding.top),typeof this.gridRow.grid.style.cellPadding.right<"u"&&this.gridRow.grid.style.cellPadding.hasRightPad&&(t.width-=this.gridRow.grid.style.cellPadding.right),typeof this.gridRow.grid.style.cellPadding.bottom<"u"&&this.gridRow.grid.style.cellPadding.hasBottomPad&&(t.height-=this.gridRow.grid.style.cellPadding.bottom)):(typeof this.style.cellPadding.left<"u"&&this.style.cellPadding.hasLeftPad&&(t.x+=this.style.cellPadding.left+this.cellStyle.borders.left.width,t.width-=this.style.cellPadding.left),typeof this.style.cellPadding.top<"u"&&this.style.cellPadding.hasTopPad&&(t.y+=this.style.cellPadding.top+this.cellStyle.borders.top.width,t.height-=this.style.cellPadding.top),typeof this.style.cellPadding.right<"u"&&this.style.cellPadding.hasRightPad&&(t.width-=this.style.cellPadding.right),typeof this.style.cellPadding.bottom<"u"&&this.style.cellPadding.hasBottomPad&&(t.height-=this.style.cellPadding.bottom)),t.width-=this.cellStyle.borders.left.width+this.cellStyle.borders.right.width,t.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width):typeof this.style.cellPadding>"u"||null==this.style.cellPadding?(t.x+=this.gridRow.grid.style.cellPadding.left+this.cellStyle.borders.left.width,t.y+=this.gridRow.grid.style.cellPadding.top+this.cellStyle.borders.top.width,t.width-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left,t.height-=this.gridRow.grid.style.cellPadding.bottom+this.gridRow.grid.style.cellPadding.top,t.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width):(t.x+=this.style.cellPadding.left+this.cellStyle.borders.left.width,t.y+=this.style.cellPadding.top+this.cellStyle.borders.top.width,t.width-=this.style.cellPadding.right+this.style.cellPadding.left,t.width-=this.cellStyle.borders.left.width+this.cellStyle.borders.right.width,t.height-=this.style.cellPadding.bottom+this.style.cellPadding.top,t.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width,1===this.rowSpan&&(t.width-=this.style.borders.left.width)),t}draw(e,t,s){let n=null;if(this.internalIsCellMergeContinue||this.internalIsRowMergeContinue){if(!this.internalIsCellMergeContinue||!this.row.grid.style.allowHorizontalOverflow)return n;if(this.row.rowOverflowIndex>0&&this.row.cells.indexOf(this)!=this.row.rowOverflowIndex+1||0==this.row.rowOverflowIndex&&this.internalIsCellMergeContinue)return n}t=this.adjustOuterLayoutArea(t,e),this.drawCellBackground(e,t);let r=this.getTextPen(),h=this.getTextBrush();typeof r>"u"&&typeof h>"u"&&(h=new kt(new ot(0,0,0)));let m=this.getTextFont(),T=this.getStringFormat(),V=t;if(V.height>=e.clientSize.height&&this.row.grid.allowRowBreakAcrossPages&&(V.height-=V.y),V=this.adjustContentLayoutArea(V),"string"==typeof this.objectValue||"string"==typeof this.remaining){let Y,se;if(se=V.height<m.height?new Ui(V.x,V.y,V.width,m.height):V,V.height<m.height&&this.row.grid.isChildGrid&&null!=this.row.grid.ParentCell){let ge=se.height-this.row.grid.ParentCell.row.grid.style.cellPadding.bottom-this.row.grid.style.cellPadding.bottom;-1!=this.row.grid.splitChildRowIndex&&(this.fontSpilt=!0,this.row.rowFontSplit=!0),ge>0&&ge<m.height&&(se.height=ge)}0!=this.gridRow.grid.style.cellSpacing&&(se.width-=this.gridRow.grid.style.cellSpacing,t.width-=this.gridRow.grid.style.cellSpacing),this.isFinish?(Y=""===this.remaining?this.remaining:this.objectValue,e.drawString(Y,m,r,h,se.x,se.y,se.width,se.height,T),-1!=this.row.grid.splitChildRowIndex&&!this.row.grid.isChildGrid&&typeof this.remaining>"u"&&(this.remaining="")):((typeof this.remaining>"u"||null===this.remaining)&&(this.remaining=""),this.row.repeatFlag&&e.drawString(this.remaining,m,r,h,se.x,se.y,se.width,se.height,T),this.isFinish=!0),n=e.stringLayoutResult}else if(this.objectValue instanceof ii){let se,Y=this.objectValue;Y.isChildGrid=!0,Y.ParentCell=this,se=V,0!=this.gridRow.grid.style.cellSpacing&&(t.width-=this.gridRow.grid.style.cellSpacing);let ge=new si(Y),ke=new qi;null!=this.row.grid.LayoutFormat?ke=this.row.grid.LayoutFormat:ke.layout=Qr.Paginate;let qe=new Ps;if(null!=e.layer){qe.page=e.page,qe.bounds=se,qe.format=ke,Y.setSpan(),Y.checkSpan();let mt=ge.Layouter(qe);this.value=Y,-1!==this.row.grid.splitChildRowIndex&&(this.height=this.row.rowBreakHeightValue),qe.page!=mt.page&&(mt.bounds.height=this.row.rowBreakHeightValue,0==this.row.rowBreakHeight?this.row.NestedGridLayoutResult=mt:this.row.rowBreakHeight=this.row.rowBreakHeightValue)}}else if(this.objectValue instanceof Vr||this.objectValue instanceof Zn){let Y;Y=this.objectValue.width<=V.width?new Ui(V.x,V.y,this.objectValue.width,V.height):V,e.drawImage(this.objectValue,Y.x,Y.y,Y.width,Y.height)}else this.objectValue instanceof Ji?this.objectValue.draw(e.currentPage,V):typeof this.objectValue>"u"&&(this.objectValue="",e.drawString(this.objectValue,m,r,h,V.x,V.y,V.width,V.height,T),null!=this.style.cellPadding&&0==this.style.cellPadding.bottom&&0==this.style.cellPadding.left&&0==this.style.cellPadding.right&&0==this.style.cellPadding.top&&(t.width-=this.style.borders.left.width+this.style.borders.right.width),0!=this.gridRow.grid.style.cellSpacing&&(t.width-=this.gridRow.grid.style.cellSpacing));return null!=this.style.borders&&(this.fontSpilt?-1!=this.row.grid.ParentCell.row.grid.splitChildRowIndex&&(this.row.rowFontSplit=!1,this.drawCellBorders(e,t)):this.drawCellBorders(e,t)),n}drawCellBorders(e,t){this.row.grid.style.borderOverlapStyle===w.Inside&&(t.x+=this.style.borders.left.width,t.y+=this.style.borders.top.width,t.width-=this.style.borders.right.width,t.height-=this.style.borders.bottom.width);let s=new hi(t.x,t.y+t.height),n=new hi(t.x,t.y),r=this.cellStyle.borders.left;this.cellStyle.borders.left.dashStyle===At.Solid&&(r.lineCap=Wt.Square),0!==r.width&&e.drawLine(r,s,n),s=new hi(t.x+t.width,t.y),n=new hi(t.x+t.width,t.y+t.height),r=this.cellStyle.borders.right,t.x+t.width>e.clientSize.width-r.width/2&&(s=new hi(e.clientSize.width-r.width/2,t.y),n=new hi(e.clientSize.width-r.width/2,t.y+t.height)),this.cellStyle.borders.right.dashStyle===At.Solid&&(r.lineCap=Wt.Square),0!==r.width&&e.drawLine(r,s,n),s=new hi(t.x,t.y),n=new hi(t.x+t.width,t.y),r=this.cellStyle.borders.top,this.cellStyle.borders.top.dashStyle===At.Solid&&(r.lineCap=Wt.Square),0!==r.width&&e.drawLine(r,s,n),s=new hi(t.x+t.width,t.y+t.height),n=new hi(t.x,t.y+t.height),r=this.cellStyle.borders.bottom,t.y+t.height>e.clientSize.height-r.width/2&&(s=new hi(t.x+t.width,e.clientSize.height-r.width/2),n=new hi(t.x,e.clientSize.height-r.width/2)),this.cellStyle.borders.bottom.dashStyle===At.Solid&&(r.lineCap=Wt.Square),0!==r.width&&e.drawLine(r,s,n)}adjustOuterLayoutArea(e,t){let s=!1,n=this.row.grid.style.cellSpacing;n>0&&(e=new Ui(e.x+n,e.y+n,e.width-n,e.height-n));let r=this.row.cells.indexOf(this);if(this.columnSpan>1||this.row.rowOverflowIndex>0&&r==this.row.rowOverflowIndex+1&&this.isCellMergeContinue){let h=this.columnSpan;if(1==h&&this.isCellMergeContinue)for(let T=r+1;T<this.row.grid.columns.count&&this.row.cells.getCell(T).isCellMergeContinue;T++)h++;let m=0;for(let T=r;T<r+h;T++){if(this.row.grid.style.allowHorizontalOverflow){let V,Y=this.row.grid.size.width<t.clientSize.width?this.row.grid.size.width:t.clientSize.width;if(V=this.row.grid.size.width>t.clientSize.width?e.x+m+this.row.grid.columns.getColumn(T).width:m+this.row.grid.columns.getColumn(T).width,V>Y)break}m+=this.row.grid.columns.getColumn(T).width}m-=this.row.grid.style.cellSpacing,e.width=m}if(this.rowSpan>1||this.row.rowSpanExists){let h=this.rowSpan,m=this.row.grid.rows.rowCollection.indexOf(this.row);-1==m&&(m=this.row.grid.headers.indexOf(this.row),-1!=m&&(s=!0));let T=0;for(let Y=m;Y<m+h;Y++){T+=s?this.row.grid.headers.getHeader(Y).height:this.row.grid.rows.getRow(Y).height;let se=this.row.grid.rows.getRow(Y);this.row.grid.rows.rowCollection.indexOf(se)}this.row.cells.indexOf(this),T-=this.row.grid.style.cellSpacing,e.height=T,this.row.rowMergeComplete||(e.height=T)}return e}getTextFont(){return typeof this.style.font<"u"&&null!=this.style.font?this.style.font:typeof this.row.style.font<"u"&&null!=this.row.style.font?this.row.style.font:typeof this.row.grid.style.font<"u"&&null!=this.row.grid.style.font?this.row.grid.style.font:I.defaultFont}getTextBrush(){return typeof this.style.textBrush<"u"&&null!=this.style.textBrush?this.style.textBrush:typeof this.row.style.textBrush<"u"&&null!=this.row.style.textBrush?this.row.style.textBrush:this.row.grid.style.textBrush}getTextPen(){return typeof this.style.textPen<"u"&&null!=this.style.textPen?this.style.textPen:typeof this.row.style.textPen<"u"&&null!=this.row.style.textPen?this.row.style.textPen:this.row.grid.style.textPen}getBackgroundBrush(){return typeof this.style.backgroundBrush<"u"&&null!=this.style.backgroundBrush?this.style.backgroundBrush:typeof this.row.style.backgroundBrush<"u"&&null!=this.row.style.backgroundBrush?this.row.style.backgroundBrush:this.row.grid.style.backgroundBrush}getBackgroundImage(){return typeof this.style.backgroundImage<"u"&&null!=this.style.backgroundImage?this.style.backgroundImage:typeof this.row.style.backgroundImage<"u"&&null!=this.row.style.backgroundImage?this.row.style.backgroundImage:this.row.grid.style.backgroundImage}getStringFormat(){return typeof this.style.stringFormat<"u"&&null!=this.style.stringFormat?this.style.stringFormat:this.stringFormat}measureHeight(){let e=this.calculateWidth();null==this.style.cellPadding||typeof this.style.cellPadding>"u"?e-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(e-=this.style.cellPadding.right+this.style.cellPadding.left,e-=this.style.borders.left.width+this.style.borders.right.width);let t=0,s=new Yt;if("string"==typeof this.objectValue||"string"==typeof this.remaining){let n=this.objectValue;this.isFinish||(n=null===this.remaining||""===this.remaining||typeof this.remaining>"u"?this.objectValue:this.remaining);let r=null,h=this.row.cells.indexOf(this);0!=this.gridRow.grid.style.cellSpacing&&(e-=2*this.gridRow.grid.style.cellSpacing),!this.row.cells.getCell(h).hasColSpan&&!this.row.cells.getCell(h).hasRowSpan&&(this.gridRow.grid.isChildGrid?(e<0?(this.tempval=e,null==this.style.cellPadding||typeof this.style.cellPadding>"u"?this.tempval+=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(this.tempval+=this.style.cellPadding.right+this.style.cellPadding.left,this.tempval+=this.style.borders.left.width+this.style.borders.right.width)):this.tempval=e,r=s.layout(n,this.getTextFont(),this.stringFormat,new Ei(this.tempval,0),!1,new Ei(0,0)),t+=r.actualSize.height):(r=s.layout(n,this.getTextFont(),this.stringFormat,new Ei(e,0),!1,new Ei(0,0)),t+=r.actualSize.height)),t+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}else if(this.objectValue instanceof ii){let n=this.row.cells.indexOf(this),r=0;null!=this.style.cellPadding||typeof this.style.cellPadding<"u"?(r=this.calculateWidth(),typeof this.style.cellPadding.left<"u"&&this.style.cellPadding.hasLeftPad&&(r-=this.style.cellPadding.left),typeof this.style.cellPadding.right<"u"&&this.style.cellPadding.hasRightPad&&(r-=this.style.cellPadding.right)):null!=this.row.grid.style.cellPadding||typeof this.row.grid.style.cellPadding<"u"?(r=this.calculateWidth(),typeof this.row.grid.style.cellPadding.left<"u"&&this.row.grid.style.cellPadding.hasLeftPad&&(r-=this.row.grid.style.cellPadding.left),typeof this.row.grid.style.cellPadding.right<"u"&&this.row.grid.style.cellPadding.hasRightPad&&(r-=this.row.grid.style.cellPadding.right)):r=this.calculateWidth(),this.objectValue.tempWidth=r,this.row.cells.getCell(n).hasColSpan||this.row.cells.getCell(n).hasRowSpan?t+=2*(this.style.borders.top.width+this.style.borders.bottom.width):t=this.objectValue.size.height,0!==this.gridRow.grid.style.cellSpacing&&(e-=2*this.gridRow.grid.style.cellSpacing),(null!=this.style.cellPadding||typeof this.style.cellPadding<"u")&&(typeof this.row.grid.style.cellPadding.top<"u"&&this.row.grid.style.cellPadding.hasTopPad&&(t+=this.row.grid.style.cellPadding.top),this.row.grid.style.cellPadding.hasBottomPad&&typeof this.row.grid.style.cellPadding.bottom<"u"&&(t+=this.row.grid.style.cellPadding.bottom)),t+=this.objectValue.style.cellSpacing}else if(this.objectValue instanceof Vr||this.objectValue instanceof Zn)t+=this.objectValue.height;else if(this.objectValue instanceof Ji){let n=this.objectValue;t+=s.layout(n.text,n.font,n.stringFormat,new Ei(e,0),!1,new Ei(0,0)).actualSize.height,t+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}else typeof this.objectValue>"u"&&(null==this.style.cellPadding||typeof this.style.cellPadding>"u"?e-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(e-=this.style.cellPadding.right+this.style.cellPadding.left,e-=this.style.borders.left.width+this.style.borders.right.width),t+=2*(this.style.borders.top.width+this.style.borders.bottom.width));return this.objectValue instanceof ii?null==this.style.cellPadding||typeof this.style.cellPadding>"u"?(typeof this.row.grid.style.cellPadding.top<"u"&&this.row.grid.style.cellPadding.hasTopPad&&(t+=this.row.grid.style.cellPadding.top),typeof this.row.grid.style.cellPadding.bottom<"u"&&this.row.grid.style.cellPadding.hasBottomPad&&(t+=this.row.grid.style.cellPadding.bottom)):(typeof this.style.cellPadding.top<"u"&&this.style.cellPadding.hasTopPad&&(t+=this.style.cellPadding.top),typeof this.style.cellPadding.bottom<"u"&&this.style.cellPadding.hasBottomPad&&(t+=this.style.cellPadding.bottom)):t+=null==this.style.cellPadding||typeof this.style.cellPadding>"u"?this.row.grid.style.cellPadding.top+this.row.grid.style.cellPadding.bottom:this.style.cellPadding.top+this.style.cellPadding.bottom,t+=this.row.grid.style.cellSpacing,t}calculateWidth(){let e=this.row.cells.indexOf(this),s=(this.row.grid.rows.rowCollection.indexOf(this.row),this.columnSpan),n=0;if(1===s)for(let r=0;r<s;r++)n+=this.row.grid.columns.getColumn(e+r).width;else if(s>1)for(let r=0;r<s;r++)n+=this.row.grid.columns.getColumn(e+r).width,r+1<s&&(this.row.cells.getCell(e+r+1).hasColSpan=!0);if(null!=this.parent&&this.parent.row.width>0&&this.row.grid.isChildGrid&&null!=this.parent&&this.row.width>this.parent.row.width){n=0;for(let r=0;r<this.parent.columnSpan;r++)n+=this.parent.row.grid.columns.getColumn(r).width;n/=this.row.cells.count}return n}}class ee{constructor(e){this.cells=[],this.gridRow=e}getCell(e){if(e<0||e>=this.count)throw new Error("IndexOutOfRangeException");return this.cells[e]}get count(){return this.cells.length}add(e){if(typeof e>"u"){let t=new ye;return this.add(t),e}e.row=this.gridRow,this.cells.push(e)}indexOf(e){return this.cells.indexOf(e)}}class te{constructor(e){this.columnWidth=0,this.grid=e}get width(){return this.columnWidth}set width(e){this.isCustomWidth=!0,this.columnWidth=e}get format(){return null==this.stringFormat&&(this.stringFormat=new In),this.stringFormat}set format(e){this.stringFormat=e}}class ie{constructor(e){this.internalColumns=[],this.columnWidth=0,this.grid=e,this.internalColumns=[]}add(e){for(let t=0;t<e;t++){this.internalColumns.push(new te(this.grid));for(let s=0;s<this.grid.rows.count;s++){let n=this.grid.rows.getRow(s),r=new ye;r.value="",n.cells.add(r)}}}get count(){return this.internalColumns.length}get width(){return 0===this.columnWidth&&(this.columnWidth=this.measureColumnsWidth()),0!==this.grid.initialWidth&&this.columnWidth!==this.grid.initialWidth&&!this.grid.style.allowHorizontalOverflow&&(this.columnWidth=this.grid.initialWidth,this.grid.isPageWidth=!0),this.columnWidth}get columns(){return this.internalColumns}getColumn(e){if(e>=0&&e<=this.columns.length)return this.columns[e];throw Error("can not get the column from the index: "+e)}measureColumnsWidth(){let e=0;this.grid.measureColumnsWidth();for(let t=0,s=this.internalColumns.length;t<s;t++)e+=this.internalColumns[t].width;return e}getDefaultWidths(e){let t=[],s=this.count;for(let n=0;n<this.count;n++)this.grid.isPageWidth&&e>=0&&!this.internalColumns[n].isCustomWidth?this.internalColumns[n].width=0:(t[n]=this.internalColumns[n].width,this.internalColumns[n].width>0&&this.internalColumns[n].isCustomWidth?(e-=this.internalColumns[n].width,s--):t[n]=0);for(let n=0;n<this.count;n++){let r=e/s;t[n]<=0&&(t[n]=r)}return t}}class xe{constructor(e){this.gridRowOverflowIndex=0,this.rowHeight=0,this.rowWidth=0,this.isrowFinish=!1,this.isRowSpanRowHeightSet=!1,this.noOfPageCount=0,this.isRowHeightSet=!1,this.isPageBreakRowSpanApplied=!1,this.isRowMergeComplete=!0,this.repeatFlag=!1,this.rowFontSplit=!1,this.isHeaderRow=!1,this.pdfGrid=e}get rowSpanExists(){return this.bRowSpanExists}set rowSpanExists(e){this.bRowSpanExists=e}get cells(){return null==this.gridCells&&(this.gridCells=new ee(this)),this.gridCells}get grid(){return this.pdfGrid}set grid(e){this.pdfGrid=e}get style(){return typeof this.rowStyle>"u"&&(this.rowStyle=new K,this.rowStyle.setParent(this)),this.rowStyle}set style(e){this.rowStyle=e;for(let t=0;t<this.cells.count;t++)this.cells.getCell(t).style.borders=e.border,typeof e.font<"u"&&(this.cells.getCell(t).style.font=e.font),typeof e.backgroundBrush<"u"&&(this.cells.getCell(t).style.backgroundBrush=e.backgroundBrush),typeof e.backgroundImage<"u"&&(this.cells.getCell(t).style.backgroundImage=e.backgroundImage),typeof e.textBrush<"u"&&(this.cells.getCell(t).style.textBrush=e.textBrush),typeof e.textPen<"u"&&(this.cells.getCell(t).style.textPen=e.textPen)}get rowBreakHeight(){return typeof this.gridRowBreakHeight>"u"&&(this.gridRowBreakHeight=0),this.gridRowBreakHeight}set rowBreakHeight(e){this.gridRowBreakHeight=e}get rowOverflowIndex(){return this.gridRowOverflowIndex}set rowOverflowIndex(e){this.gridRowOverflowIndex=e}get height(){return this.isRowHeightSet||(this.rowHeight=this.measureHeight()),this.rowHeight}set height(e){this.rowHeight=e,this.isRowHeightSet=!0}get width(){return(0===this.rowWidth||typeof this.rowWidth>"u")&&(this.rowWidth=this.measureWidth()),this.rowWidth}get NestedGridLayoutResult(){return this.gridResult}set NestedGridLayoutResult(e){this.gridResult=e}get columnSpanExists(){return this.bColumnSpanExists}set columnSpanExists(e){this.bColumnSpanExists=e}get rowMergeComplete(){return this.isRowMergeComplete}set rowMergeComplete(e){this.isRowMergeComplete=e}get rowIndex(){return this.grid.rows.rowCollection.indexOf(this)}measureHeight(){let t,e=0,s=0;t=this.cells.getCell(0).rowSpan>1?0:this.cells.getCell(0).height;for(let n=0;n<this.cells.count;n++){let r=this.cells.getCell(n);if(r.rowSpanRemainingHeight>e&&(e=r.rowSpanRemainingHeight),this.rowMergeComplete=!1,r.rowSpan>1){let h=n,m=this.isHeaderRow?this.grid.headers.indexOf(this):this.grid.rows.rowCollection.indexOf(this);for(let T=0;T<r.rowSpan;T++)T+1<r.rowSpan&&((this.isHeaderRow?this.grid.headers.getHeader(m+T+1):this.grid.rows.getRow(m+T+1)).cells.getCell(h).hasRowSpan=!0);s<r.height&&(s=r.height)}else t=Math.max(t,r.height)}return s>t&&(t=s),0===t?t=s:e>0&&(t+=e),t}measureWidth(){let e=0;for(let t=0;t<this.grid.columns.count;t++)e+=this.grid.columns.getColumn(t).width;return e}}class Ke{constructor(e){this.rows=[],this.grid=e}get count(){return this.rows.length}get rowCollection(){return this.rows}addRow(e){if(typeof e>"u"){let t=new xe(this.grid);return this.addRow(t),t}if(e.style.setBackgroundBrush(this.grid.style.backgroundBrush),e.style.setFont(this.grid.style.font),e.style.setTextBrush(this.grid.style.textBrush),e.style.setTextPen(this.grid.style.textPen),0===e.cells.count)for(let t=0;t<this.grid.columns.count;t++)e.cells.add(new ye);this.rows.push(e)}getRow(e){return this.rows[e]}}class ct{constructor(e){this.rows=[],this.grid=e,this.rows=[]}getHeader(e){return this.rows[e]}get count(){return this.rows.length}add(e){if("number"==typeof e){let t;for(let s=0;s<e;s++){t=new xe(this.grid),t.isHeaderRow=!0;for(let n=0;n<this.grid.columns.count;n++)t.cells.add(new ye);this.rows.push(t)}return this.rows}this.rows.push(e)}indexOf(e){return this.rows.indexOf(e)}}class ii extends Ar{constructor(){super(),this.gridSize=new Ei(0,0),this.isGridSplit=!1,this.isRearranged=!1,this.pageBounds=new Ui,this.listOfNavigatePages=[],this.parentCellIndex=0,this.tempWidth=0,this.breakRow=!0,this.splitChildRowIndex=-1,this.hasRowSpanSpan=!1,this.hasColumnSpan=!1,this.isSingleGrid=!0}get raiseBeginCellDraw(){return typeof this.beginCellDraw<"u"&&null!==typeof this.beginCellDraw}get raiseEndCellDraw(){return typeof this.endCellDraw<"u"&&null!==typeof this.endCellDraw}get repeatHeader(){return(null==this.bRepeatHeader||typeof this.bRepeatHeader>"u")&&(this.bRepeatHeader=!1),this.bRepeatHeader}set repeatHeader(e){this.bRepeatHeader=e}get allowRowBreakAcrossPages(){return this.breakRow}set allowRowBreakAcrossPages(e){this.breakRow=e}get columns(){return(null==this.gridColumns||typeof this.gridColumns>"u")&&(this.gridColumns=new ie(this)),this.gridColumns}get rows(){return null==this.gridRows&&(this.gridRows=new Ke(this)),this.gridRows}get headers(){return(null==this.gridHeaders||typeof this.gridHeaders>"u")&&(this.gridHeaders=new ct(this)),this.gridHeaders}get initialWidth(){return this.gridInitialWidth}set initialWidth(e){this.gridInitialWidth=e}get style(){return null==this.gridStyle&&(this.gridStyle=new N),this.gridStyle}set style(e){null==this.gridStyle&&(this.gridStyle=e)}get isPageWidth(){return this.ispageWidth}set isPageWidth(e){this.ispageWidth=e}get isChildGrid(){return this.ischildGrid}set isChildGrid(e){this.ischildGrid=e}get size(){return(0===this.gridSize.width||typeof this.gridSize.width>"u")&&0===this.gridSize.height&&(this.gridSize=this.measure()),this.gridSize}set size(e){this.gridSize=e}get ParentCell(){return this.parentCell}set ParentCell(e){this.parentCell=e}get LayoutFormat(){return this.layoutFormat}draw(e,t,s,n){if(t instanceof hi&&typeof t.width>"u"&&typeof s>"u")return this.drawHelper(e,t.x,t.y);if("number"==typeof t&&"number"==typeof s&&typeof n>"u")return this.drawHelper(e,t,s,null);if(t instanceof Ui&&typeof t.width<"u"&&typeof s>"u")return this.drawHelper(e,t,null);if(t instanceof hi&&typeof t.width>"u"&&s instanceof Ss)return this.drawHelper(e,t.x,t.y,s);if("number"==typeof t&&"number"==typeof s&&(n instanceof Ss||null==n)){let h=new Ui(t,s,e.graphics.clientSize.width-t,0);return this.drawHelper(e,h,n)}return this.drawHelper(e,t,t instanceof Ui&&typeof t.width<"u"&&"boolean"==typeof s?null:s)}measure(){let e=0,t=this.columns.width;for(let s=0;s<this.headers.count;s++)e+=this.headers.getHeader(s).height;for(let s=0;s<this.rows.count;s++)e+=this.rows.getRow(s).height;return new Ei(t,e)}onBeginCellDraw(e){this.raiseBeginCellDraw&&this.beginCellDraw(this,e)}onEndCellDraw(e){this.raiseEndCellDraw&&this.endCellDraw(this,e)}layout(e){let t=e.bounds.width,s=e.bounds.height,n=!1;if((typeof e.bounds.width>"u"||0===e.bounds.width)&&(t=e.page.getClientSize().width-e.bounds.x,n=!0),(typeof e.bounds.height>"u"||0===e.bounds.height)&&(s=e.page.getClientSize().height-e.bounds.y,n=!0),n&&(e.bounds=new Ui(e.bounds.x,e.bounds.y,t,s)),0!==this.rows.count){let m=this.rows.getRow(0).cells.getCell(0).style;if(null!=m.borders&&(null!=m.borders.left&&1!==m.borders.left.width||null!=m.borders.top&&1!==m.borders.top.width)){let T=m.borders.left.width/2,V=m.borders.top.width/2;if(e.bounds.x===Xs.default.right.width/2&&e.bounds.y===Xs.default.right.width/2){let Y=new Ui(T,V,this.gridSize.width,this.gridSize.height);e.bounds=Y}}}return this.setSpan(),this.checkSpan(),this.layoutFormat=e.format,this.gridLocation=e.bounds,new si(this).Layouter(e)}setSpan(){let e=1,t=1,s=0,n=0,r=0,h=this.headers.count;for(let m=0;m<h;m++){let T=this.headers.getHeader(m);r=0;let V=T.cells.count;for(let Y=0;Y<V;Y++){let se=T.cells.getCell(Y);if(r=Math.max(r,se.rowSpan),!se.isCellMergeContinue&&!se.isRowMergeContinue&&(se.columnSpan>1||se.rowSpan>1)){if(se.columnSpan+Y>T.cells.count)throw new Error("Invalid span specified at row "+Y.toString()+" column "+m.toString());if(se.rowSpan+m>this.headers.count)throw new Error("Invalid span specified at Header "+Y.toString()+" column "+m.toString());if(se.columnSpan>1&&se.rowSpan>1){for(e=se.columnSpan,t=se.rowSpan,s=Y,n=m,se.isCellMergeStart=!0,se.isRowMergeStart=!0;e>1;)s++,T.cells.getCell(s).isCellMergeContinue=!0,T.cells.getCell(s).isRowMergeContinue=!0,T.cells.getCell(s).rowSpan=t,e--;for(s=Y,e=se.columnSpan;t>1;){for(n++,this.headers.getHeader(n).cells.getCell(Y).isRowMergeContinue=!0,this.headers.getHeader(n).cells.getCell(s).isRowMergeContinue=!0,t--;e>1;)s++,this.headers.getHeader(n).cells.getCell(s).isCellMergeContinue=!0,this.headers.getHeader(n).cells.getCell(s).isRowMergeContinue=!0,e--;e=se.columnSpan,s=Y}}else if(se.columnSpan>1&&1===se.rowSpan)for(e=se.columnSpan,s=Y,se.isCellMergeStart=!0;e>1;)s++,T.cells.getCell(s).isCellMergeContinue=!0,e--;else if(1===se.columnSpan&&se.rowSpan>1)for(t=se.rowSpan,n=m;t>1;)n++,this.headers.getHeader(n).cells.getCell(Y).isRowMergeContinue=!0,t--}}T.maximumRowSpan=r}}checkSpan(){let e,n,t=1,s=0,r=0;if(e=t=1,n=r=0,this.hasRowSpanSpan||this.hasColumnSpan){let h=this.rows.count;for(let m=0;m<h;m++){let T=this.rows.getRow(m);s=0;let V=T.cells.count;for(let Y=0;Y<V;Y++){let se=T.cells.getCell(Y);if(s=Math.max(s,se.rowSpan),!se.isCellMergeContinue&&!se.isRowMergeContinue&&(se.columnSpan>1||se.rowSpan>1)){if(se.columnSpan+Y>T.cells.count)throw new Error("Invalid span specified at row  "+Y.toString()+" column "+m.toString());if(se.rowSpan+m>this.rows.count)throw new Error("Invalid span specified at row  "+Y.toString()+" column "+m.toString());if(se.columnSpan>1&&se.rowSpan>1){for(e=se.columnSpan,t=se.rowSpan,n=Y,r=m,se.isCellMergeStart=!0,se.isRowMergeStart=!0;e>1;)n++,T.cells.getCell(n).isCellMergeContinue=!0,T.cells.getCell(n).isRowMergeContinue=!0,e--;for(n=Y,e=se.columnSpan;t>1;){for(r++,this.rows.getRow(r).cells.getCell(Y).isRowMergeContinue=!0,this.rows.getRow(r).cells.getCell(n).isRowMergeContinue=!0,t--;e>1;)n++,this.rows.getRow(r).cells.getCell(n).isCellMergeContinue=!0,this.rows.getRow(r).cells.getCell(n).isRowMergeContinue=!0,e--;e=se.columnSpan,n=Y}}else if(se.columnSpan>1&&1===se.rowSpan)for(e=se.columnSpan,n=Y,se.isCellMergeStart=!0;e>1;)n++,T.cells.getCell(n).isCellMergeContinue=!0,e--;else if(1===se.columnSpan&&se.rowSpan>1)for(t=se.rowSpan,r=m;t>1;)r++,this.rows.getRow(r).cells.getCell(Y).isRowMergeContinue=!0,t--}}T.maximumRowSpan=s}}}measureColumnsWidth(e){if(typeof e<"u"){this.isPageWidth=!1;let t=this.columns.getDefaultWidths(e.width-e.x);for(let s=0,n=this.columns.count;s<n;s++)this.columns.getColumn(s).columnWidth=t[s],this.tempWidth=t[s];if(null!=this.ParentCell&&0==this.style.allowHorizontalOverflow&&0==this.ParentCell.row.grid.style.allowHorizontalOverflow){let s=0,n=0,r=this.columns.count,h=0;(null!=this.ParentCell.style.cellPadding||typeof this.ParentCell.style.cellPadding<"u")&&(typeof this.ParentCell.style.cellPadding.left<"u"&&this.ParentCell.style.cellPadding.hasLeftPad&&(s+=this.ParentCell.style.cellPadding.left),typeof this.ParentCell.style.cellPadding.right<"u"&&this.ParentCell.style.cellPadding.hasRightPad&&(s+=this.ParentCell.style.cellPadding.right));for(let m=0;m<this.ParentCell.columnSpan;m++)n+=this.ParentCell.row.grid.columns.getColumn(this.parentCellIndex+m).width;for(let m=0;m<this.columns.count;m++)this.gridColumns.getColumn(m).width>0&&this.gridColumns.getColumn(m).isCustomWidth&&(n-=this.gridColumns.getColumn(m).width,r--);if((null!=this.ParentCell.row.grid.style.cellPadding||typeof this.ParentCell.row.grid.style.cellPadding<"u")&&(typeof this.ParentCell.row.grid.style.cellPadding.top<"u"&&this.ParentCell.row.grid.style.cellPadding.hasTopPad&&(s+=this.ParentCell.row.grid.style.cellPadding.top),typeof this.ParentCell.row.grid.style.cellPadding.bottom<"u"&&this.ParentCell.row.grid.style.cellPadding.hasBottomPad&&(s+=this.ParentCell.row.grid.style.cellPadding.bottom)),0!=this.ParentCell.row.grid.style.cellSpacing&&(n-=2*this.ParentCell.row.grid.style.cellSpacing),n>s&&(h=(n-s)/r,this.tempWidth=h,null!=this.ParentCell))for(let m=0;m<this.columns.count;m++)this.columns.getColumn(m).isCustomWidth||(this.columns.getColumn(m).columnWidth=h)}}else{let t=[this.columns.count];for(let T=0;T<this.columns.count;T++)t[T]=0;let s=0;if((typeof this.isChildGrid>"u"&&typeof this.gridLocation<"u"||null===this.isChildGrid&&typeof this.gridLocation<"u")&&(this.initialWidth=this.gridLocation.width),this.headers.count>0){let T=this.headers.getHeader(0).cells.count,V=this.headers.count;for(let Y=0;Y<T;Y++){s=0;for(let se=0;se<V;se++){let ge=Math.min(this.initialWidth,this.headers.getHeader(se).cells.getCell(Y).width);s=Math.max(s,ge)}t[Y]=s}}s=0;for(let T=0,V=this.columns.count;T<V;T++){for(let Y=0,se=this.rows.count;Y<se;Y++)if(1==this.rows.getRow(Y).cells.getCell(T).columnSpan&&!this.rows.getRow(Y).cells.getCell(T).isCellMergeContinue||null!=this.rows.getRow(Y).cells.getCell(T).value){null==this.rows.getRow(Y).cells.getCell(T).value||this.rows.getRow(Y).grid.style.allowHorizontalOverflow||(this.rows.getRow(Y),this.rows.getRow(Y),this.rows.getRow(Y).cells.getCell(T));let ge=0;ge=this.initialWidth>0?Math.min(this.initialWidth,this.rows.getRow(Y).cells.getCell(T).width):this.rows.getRow(Y).cells.getCell(T).width,s=Math.max(t[T],Math.max(s,ge)),s=Math.max(this.columns.getColumn(T).width,s)}0!=this.rows.count&&(t[T]=s),s=0}for(let T=0,V=this.rows.count;T<V;T++)for(let Y=0,se=this.columns.count;Y<se;Y++)if(this.rows.getRow(T).cells.getCell(Y).columnSpan>1)for(let ge=1;ge<this.rows.getRow(T).cells.getCell(Y).columnSpan;ge++);for(let T=0,V=this.columns.count;T<V;T++)(this.columns.getColumn(T).width<=0||this.columns.getColumn(T).width>0&&!this.columns.getColumn(T).isCustomWidth)&&(this.columns.getColumn(T).columnWidth=t[T]);let n=0,r=0,h=this.columns.count,m=0;r=this.tempWidth;for(let T=0;T<this.columns.count;T++)this.gridColumns.getColumn(T).width>0&&this.gridColumns.getColumn(T).isCustomWidth&&(r-=this.gridColumns.getColumn(T).width,h--);if(r>0&&0!=this.ParentCell.row.grid.style.cellSpacing&&(r-=2*this.ParentCell.row.grid.style.cellSpacing),r>n&&(m=r/h,null!=this.ParentCell))for(let T=0;T<this.columns.count;T++)this.columns.getColumn(T).isCustomWidth||(this.columns.getColumn(T).columnWidth=m)}}}let si=(()=>{class b extends Yi{constructor(t){super(t),this.gridInitialWidth=0,this.gridSize=new Ei(0,0),this.parentCellIndex=0,this.tempWidth=0,this.childheight=0,this.isChildGrid=!1,this.hasRowSpanSpan=!1,this.isRearranged=!1,this.pageBounds=new Ui,this.listOfNavigatePages=[],this.flag=!0,this.columnRanges=[],this.currentLocation=new hi(0,0),this.breakRow=!0,this.slr=null,this.remainderText=null,this.isPaginate=!1,this.isOverloadWithPosition=!1}get Grid(){return this.elements}getFormat(t){return t}layoutInternal(t){let s=this.getFormat(t.format);if(this.gridLayoutFormat=this.getFormat(t.format),this.currentPage=t.page,null===this.currentPage)throw Error("Can not set page as null");this.currentPage.getClientSize(),this.currentPage.getClientSize(),this.currentPageBounds=this.currentPage.getClientSize(),this.currentGraphics=this.currentPage.graphics;let n=0;if(n=this.currentGraphics.page.section.indexOf(this.currentGraphics.page),this.listOfNavigatePages.push(n),this.currentBounds=new Ui(new hi(t.bounds.x,t.bounds.y),null!=s&&s.break===zs.FitColumnsToPage?new Ei(this.Grid.columns.width,this.currentGraphics.clientSize.height):this.currentGraphics.clientSize),0!==this.Grid.rows.count)this.currentBounds.width=t.bounds.width>0?t.bounds.width:this.currentBounds.width-this.Grid.rows.getRow(0).cells.getCell(0).style.borders.left.width/2;else{if(0===this.Grid.headers.count)throw Error("Please add row or header into grid");this.currentBounds.width=t.bounds.width}if(this.startLocation=new hi(t.bounds.x,t.bounds.y),t.bounds.height>0&&!this.Grid.isChildGrid&&(this.currentBounds.height=t.bounds.height),this.Grid.isChildGrid||(this.hType=this.Grid.style.horizontalOverflowType),this.Grid.style.allowHorizontalOverflow?(this.Grid.measureColumnsWidth(),this.determineColumnDrawRanges()):(this.columnRanges=[],this.Grid.measureColumnsWidth(typeof this.Grid.isChildGrid<"u"?this.currentBounds:new Ui(this.currentBounds.x,this.currentBounds.y,this.currentBounds.x+this.currentBounds.width,this.currentBounds.height)),this.columnRanges.push([0,this.Grid.columns.count-1])),this.Grid.hasRowSpanSpan)for(let h=0;h<this.Grid.rows.count;h++)-1!==this.Grid.rows.getRow(h).height&&!this.Grid.rows.getRow(h).isRowHeightSet&&(this.Grid.rows.getRow(h).isRowHeightSet=!0);return this.layoutOnPage(t)}determineColumnDrawRanges(){let t=0,s=0,n=0,r=this.currentGraphics.clientSize.width-this.currentBounds.x;for(let h=0;h<this.Grid.columns.count;h++)if(n+=this.Grid.columns.getColumn(h).width,n>=r){let m=0;for(let T=t;T<=h&&(m+=this.Grid.columns.getColumn(T).width,!(m>r));T++)s=T;this.columnRanges.push([t,s]),t=s+1,s=t,n=s<=h?this.Grid.columns.getColumn(h).width:0}this.columnRanges.push([t,this.Grid.columns.count-1])}layoutOnPage(t){this.pageBounds.x=t.bounds.x,this.pageBounds.y=t.bounds.y,this.pageBounds.height=t.bounds.height;let s=this.getFormat(t.format),n=null,r=null,h=new qn,m=t.page,T=!1,V=[];for(let Y=0;Y<this.columnRanges.length;Y++){let se=this.columnRanges[Y];this.cellStartIndex=se[0],this.cellEndIndex=se[1];let ke,ge=this.raiseBeforePageLayout(this.currentPage,this.currentBounds,this.currentRowIndex);this.currentBounds=ge.currentBounds,this.currentRowIndex=ge.currentRowIndex;for(let fs=0;fs<this.Grid.headers.count;fs++){let ps=this.Grid.headers.getHeader(fs),Nn=this.currentBounds.y;if(this.isHeader=!0,m!=this.currentPage)for(let rr=this.cellStartIndex;rr<=this.cellEndIndex;rr++)ps.cells.getCell(rr).isCellMergeContinue&&(ps.cells.getCell(rr).isCellMergeContinue=!1,ps.cells.getCell(rr).value="");let fr=this.drawRow(ps);Nn===this.currentBounds.y?(ke=!0,-1===b.repeatRowIndex&&(b.repeatRowIndex=fs)):ke=!1,!fr.isFinish&&null!==m&&s.layout!==Qr.OnePage&&ke&&(this.startLocation.x=this.currentBounds.x,this.currentPage=this.getNextPageformat(s),this.startLocation.y=this.currentBounds.y,typeof s.paginateBounds<"u"&&0===s.paginateBounds.x&&0===s.paginateBounds.y&&0===s.paginateBounds.width&&0===s.paginateBounds.height&&(this.currentBounds.x+=this.startLocation.x),this.drawRow(ps)),this.isHeader=!1}let Vt,qe=0,Qt=!0;V=[];for(let fs=0;fs<this.Grid.rows.count;fs++){let ps=this.Grid.rows.getRow(fs);qe++,this.currentRowIndex=qe-1;let Nn=this.currentBounds.y;m=this.currentPage,b.repeatRowIndex=-1,Qt&&ps.grid.isChildGrid&&(Qt=!1);let fr=null;if(-1==this.Grid.splitChildRowIndex)fr=this.drawRow(ps),ps.isrowFinish=!0;else{if(!(ps.grid.ParentCell.row.grid.isGridSplit&&this.Grid.splitChildRowIndex<=ps.rowIndex)){if(ps.isrowFinish)continue;break}fr=this.drawRow(ps),ps.isrowFinish=!0}for(V.push(fr.bounds.width),Nn===this.currentBounds.y?(Vt=!0,b.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(ps)):(Vt=!1,b.repeatRowIndex=-1);!fr.isFinish&&null!=m;){let rr=this.getLayoutResult();if(n=this.raisePageLayouted(rr),n.cancel||Vt)break;if(this.Grid.allowRowBreakAcrossPages){this.currentPage=this.getNextPageformat(s),Nn=this.currentBounds.y;let xr=new hi(Xs.default.right.width/2,Xs.default.top.width/2);if(0===s.paginateBounds.x&&0===s.paginateBounds.y&&0===s.paginateBounds.width&&0===s.paginateBounds.height&&this.startLocation.x===xr.x&&this.startLocation.y===xr.y&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y),this.isPaginate&&(this.startLocation.y=this.currentBounds.y,this.isPaginate=!1),this.Grid.isChildGrid&&null!=ps.grid.ParentCell&&null!=this.Grid.ParentCell.row.grid.style.cellPadding&&ps.rowBreakHeight+this.Grid.ParentCell.row.grid.style.cellPadding.top<this.currentBounds.height&&(this.currentBounds.y=this.Grid.ParentCell.row.grid.style.cellPadding.top),null!=ps.grid.ParentCell){ps.grid.ParentCell.row.isRowBreaksNextPage=!0,ps.grid.ParentCell.row.rowBreakHeightValue=ps.rowBreakHeight+this.Grid.ParentCell.row.grid.style.cellPadding.top+this.Grid.ParentCell.row.grid.style.cellPadding.bottom;for(let nn=ps.rowIndex+1;nn<ps.grid.rows.count;nn++)ps.grid.ParentCell.row.rowBreakHeightValue+=ps.grid.rows.getRow(nn).height}if(ps.grid.isChildGrid){ps.isrowFinish=!1,ps.grid.splitChildRowIndex=ps.rowIndex,ps.grid.ParentCell.row.grid.splitChildRowIndex=ps.grid.ParentCell.row.rowIndex,ps.grid.ParentCell.row.grid.isGridSplit&&(ps.grid.ParentCell.row.noOfPageCount+=1,ps.grid.ParentCell.row.grid.isGridSplit=!1);break}if(ps.noOfPageCount<1){if(-1!=ps.grid.splitChildRowIndex&&(ps.grid.isGridSplit=!0),null!=ps.style.border&&(null!=ps.style.border.left&&1!==ps.style.border.left.width||null!=ps.style.border.top&&1!==ps.style.border.top.width)){let nn=ps.style.border.left.width/2,Xo=ps.style.border.top.width/2;if(this.currentBounds.x===Xs.default.right.width/2&&this.currentBounds.y===Xs.default.right.width/2){let zo=new Ui(nn,Xo,this.currentBounds.width,this.currentBounds.height);this.currentBounds=zo}}if(this.Grid.repeatHeader)for(let nn=0;nn<this.Grid.headers.count;nn++){let Xo=this.Grid.headers.getHeader(nn);this.drawRow(Xo)}if(fr=this.drawRow(ps),ps.noOfPageCount>=1)for(let Xo=0;Xo<ps.noOfPageCount;Xo++){let zo=this.getLayoutResult();if(n=this.raisePageLayouted(zo),this.currentPage=this.getNextPageformat(s),Nn=this.currentBounds.y,-1!=ps.grid.splitChildRowIndex&&(ps.grid.isGridSplit=!0),this.currentBounds.y=.5,this.Grid.repeatHeader)for(let fl=0;fl<this.Grid.headers.count;fl++){let bl=this.Grid.headers.getHeader(fl);this.drawRow(bl)}this.drawRow(ps)}ps.grid.splitChildRowIndex=-1,ps.grid.isGridSplit=!1,fr.isFinish=this.checkIsFisished(ps);for(let nn=0;nn<ps.cells.count;nn++)ps.cells.getCell(nn).value instanceof ii&&(ps.cells.getCell(nn).value.splitChildRowIndex=-1)}}}if(!fr.isFinish&&null!==m&&s.layout!==Qr.OnePage&&Vt){if(this.startLocation.x=this.currentBounds.x,this.currentPage=this.getNextPageformat(s),this.raiseBeforePageLayout(this.currentPage,this.currentBounds,this.currentRowIndex).returnValue)break;if(null!==t.format&&!t.format.usePaginateBounds&&null!==t.bounds&&t.bounds.height>0&&!this.Grid.isChildGrid&&(this.currentBounds.height=t.bounds.height),typeof t.format<"u"&&null!=t.format&&typeof t.format.usePaginateBounds<"u"&&!t.format.usePaginateBounds&&(0!==t.format.paginateBounds.x||0!==t.format.paginateBounds.y||0!==t.format.paginateBounds.width||0!==t.format.paginateBounds.height)&&0===t.format.paginateBounds.y?this.currentBounds.y=Xs.default.top.width/2:(this.currentBounds.y=null==s?0:s.paginateBounds.y,null!=s&&(0!==s.paginateBounds.x||0!==s.paginateBounds.y||0!==s.paginateBounds.height||0!==s.paginateBounds.width)&&(this.currentBounds.x=s.paginateBounds.x,this.currentBounds.width=s.paginateBounds.width,this.currentBounds.height=s.paginateBounds.height)),typeof t.format<"u"&&null!==t.format&&typeof t.format.usePaginateBounds<"u"&&!t.format.usePaginateBounds&&null!==t.bounds&&t.bounds.y>0&&!this.Grid.isChildGrid&&(this.currentBounds.y=t.bounds.y),this.startLocation.y=this.currentBounds.y,s.paginateBounds.x===s.paginateBounds.y&&s.paginateBounds.y===s.paginateBounds.height&&s.paginateBounds.height===s.paginateBounds.width&&0===s.paginateBounds.width&&(this.currentBounds.x+=this.startLocation.x),this.currentBounds.x===Xs.default.left.width/2&&(this.currentBounds.y+=this.startLocation.x),this.Grid.repeatHeader)for(let rr=0;rr<this.Grid.headers.count;rr++){let xr=this.Grid.headers.getHeader(rr);this.drawRow(xr)}this.drawRow(ps),null!==this.currentPage&&!h.containsKey(this.currentPage)&&h.add(this.currentPage,se)}if(null!=ps.NestedGridLayoutResult){this.currentPage=ps.NestedGridLayoutResult.page,this.currentGraphics=this.currentPage.graphics,this.startLocation=new hi(ps.NestedGridLayoutResult.bounds.x,ps.NestedGridLayoutResult.bounds.y);let rr=this.ReCalculateHeight(ps,ps.NestedGridLayoutResult.bounds.height);if(this.currentBounds.y=rr,m!=this.currentPage){let xr=this.currentPage.section,nn=xr.indexOf(m)+1,Xo=xr.indexOf(this.currentPage);for(let zo=nn;zo<Xo+1;zo++){let fl=this.currentPage.graphics,bl=new hi(s.paginateBounds.x,s.paginateBounds.y),yl=zo==Xo?ps.NestedGridLayoutResult.bounds.height-t.bounds.y:this.currentBounds.height-bl.y;yl<=fl.clientSize.height&&(yl+=t.bounds.y),bl.y=null==s?.5:s.paginateBounds.y;for(let ya=0;ya<ps.cells.count;ya++){let Md=ps.cells.getCell(ya),Qf=0,Cl=0;if(Md.value instanceof ii)for(let kd=0;kd<Md.value.columns.count;kd++)Cl+=Md.value.columns.getColumn(kd).columnWidth;else Cl=Md.width;Qf=Math.max(Cl,ps.grid.columns.getColumn(ya).width),Md.drawCellBorders(fl,new Ui(bl,new Ei(Qf,yl))),bl.x+=Qf,ya+=Md.columnSpan-1}}m=this.currentPage}}}let ai=!1,ki=0;V.length>0&&(ki=V[0]);let Qi=[[1,2]];for(let fs=0;fs<this.Grid.rows.count;fs++)if(-1!=this.cellEndIndex&&this.Grid.rows.getRow(fs).cells.getCell(this.cellEndIndex).value instanceof ii){let ps=this.Grid.rows.getRow(fs).cells.getCell(this.cellEndIndex).value;this.rowLayoutBoundsWidth=ps.rowLayoutBoundsWidth,ai=!0}if(!ai&&V.length>0){for(let fs=0;fs<qe-1;fs++)ki<V[fs]&&(ki=V[fs]);this.rowLayoutBoundsWidth=ki}else this.rowLayoutBoundsWidth=Qi[0][1];this.columnRanges.indexOf(se)<this.columnRanges.length-1&&null!=m&&s.layout!=Qr.OnePage&&(T=this.Grid.isChildGrid,0!=Qi[0][0]?(this.currentPage.section.indexOf(this.currentPage),this.currentGraphics=this.currentPage.graphics,this.currentBounds=new Ui(new hi(0,0),this.currentPage.getClientSize()),this.currentGraphics.page.section.indexOf(this.currentGraphics.page)):this.currentPage=this.getNextPageformat(s)),this.columnRanges.length-1!==Y&&this.columnRanges.length>1&&s.layout!==Qr.OnePage&&(this.currentPage=this.getNextPageformat(s),s.paginateBounds.x===s.paginateBounds.y&&s.paginateBounds.y===s.paginateBounds.height&&s.paginateBounds.height===s.paginateBounds.width&&0===s.paginateBounds.width&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y))}return r=this.getLayoutResult(),this.Grid.style.allowHorizontalOverflow&&this.Grid.style.horizontalOverflowType==G.NextPage&&this.reArrangePages(h),this.raisePageLayouted(r),r}checkIsFisished(t){let s=!0;for(let n=0;n<t.cells.count;n++)t.cells.getCell(n).FinishedDrawingCell||(s=!1);return s}getNextPageformat(t){let s=this.currentPage.section,n=null,r=s.indexOf(this.currentPage);this.flag=!1,n=r===s.count-1?s.add():s.getPages()[r+1],this.currentGraphics=n.graphics;let h=this.currentGraphics.page.section.indexOf(this.currentGraphics.page);return-1===this.listOfNavigatePages.indexOf(h)&&this.listOfNavigatePages.push(h),this.currentBounds=new Ui(new hi(0,0),n.getClientSize()),typeof t<"u"&&null!=t&&t.usePaginateBounds&&typeof t.paginateBounds<"u"&&null!=t.paginateBounds&&t.paginateBounds.x!==t.paginateBounds.y&&t.paginateBounds.y!==t.paginateBounds.height&&t.paginateBounds.height!==t.paginateBounds.width&&0!==t.paginateBounds.width&&(this.currentBounds.x=t.paginateBounds.x,this.currentBounds.y=t.paginateBounds.y,this.currentBounds.height=t.paginateBounds.height),n}CheckIfDefaultFormat(t){let s=new In;return t.alignment===s.alignment&&t.characterSpacing===s.characterSpacing&&t.clipPath===s.clipPath&&t.firstLineIndent===s.firstLineIndent&&t.horizontalScalingFactor===s.horizontalScalingFactor&&t.lineAlignment===s.lineAlignment&&t.lineLimit===s.lineLimit&&t.lineSpacing===s.lineSpacing&&t.measureTrailingSpaces===s.measureTrailingSpaces&&t.noClip===s.noClip&&t.paragraphIndent===s.paragraphIndent&&t.rightToLeft===s.rightToLeft&&t.subSuperScript===s.subSuperScript&&t.wordSpacing===s.wordSpacing&&t.wordWrap===s.wordWrap}RaiseBeforeCellDraw(t,s,n,r,h,m){let T=null;return this.Grid.raiseBeginCellDraw&&(T=new es(t,s,n,r,h,m),this.Grid.onBeginCellDraw(T),m=T.style),m}raiseAfterCellDraw(t,s,n,r,h,m){let T=null;this.Grid.raiseEndCellDraw&&(T=new Gs(t,s,n,r,h,m),this.Grid.onEndCellDraw(T))}reArrangePages(t){let s=this.currentPage.document,n=[],r=t.keys();t.values();for(let m=0;m<r.length;m++){let T=r[m];T.section=null,n.push(T),s.pages.remove(T)}for(let m=0;m<t.size();m++)for(let T=m,V=t.size()/this.columnRanges.length;T<t.size();T+=V){let Y=n[T];typeof Y<"u"&&-1===s.pages.indexOf(Y)&&s.pages.add(Y)}}getLayoutResult(){if(this.Grid.isChildGrid&&this.Grid.allowRowBreakAcrossPages)for(let s=0;s<this.Grid.rows.count;s++){let n=this.Grid.rows.getRow(s);n.rowBreakHeight>0&&n.repeatFlag&&(this.startLocation.y=this.currentPage.origin.y)}let t;return this.isChanged||(t=new Ui(this.startLocation,new Ei(this.currentBounds.width,this.currentBounds.y-this.startLocation.y))),new Ri(this.currentPage,t)}ReCalculateHeight(t,s){let n=0;for(let r=this.cellStartIndex;r<=this.cellEndIndex;r++)null===t.cells.getCell(r).remainingString||""===t.cells.getCell(r).remainingString||typeof t.cells.getCell(r).remainingString>"u"||(n=Math.max(n,t.cells.getCell(r).measureHeight()));return Math.max(s,n)}raiseBeforePageLayout(t,s,n){let r=!1;if(this.Grid.raiseBeginPageLayout){let h=new Pr(s,t,n);this.Grid.onBeginPageLayout(h),r=!(typeof h.cancel>"u")&&h.cancel,s=h.bounds,n=h.startRowIndex}return{returnValue:r,currentBounds:s,currentRowIndex:n}}raisePageLayouted(t){let s=new Po(t);return this.Grid.raiseEndPageLayout&&this.Grid.onEndPageLayout(s),s}drawRow(t,s,n){if(typeof s>"u"){let r=new Ze,h=0,m=!1;if(t.rowSpanExists){let V=0,Y=this.Grid.rows.rowCollection.indexOf(t);-1===Y&&(Y=this.Grid.headers.indexOf(t),-1!==Y&&(m=!0));for(let se=0;se<t.cells.count;se++){let ge=t.cells.getCell(se);V=Math.max(V,ge.rowSpan)}for(let se=Y;se<Y+V;se++)h+=m?this.Grid.headers.getHeader(se).height:this.Grid.rows.getRow(se).height}let T=t.rowBreakHeight>0?t.rowBreakHeight:t.height;if(typeof this.Grid.isChildGrid<"u"&&this.Grid.isChildGrid&&typeof this.Grid.ParentCell<"u"&&null!=this.Grid.ParentCell)this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+T>this.currentPageBounds.height||this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+T>this.currentBounds.height||this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+h>this.currentPageBounds.height?(typeof this.Grid.ParentCell.row.grid.LayoutFormat<"u"&&this.Grid.ParentCell.row.grid.LayoutFormat.break===zs.FitPage&&(b.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(t),this.Grid.splitChildRowIndex=this.Grid.rows.rowCollection.indexOf(t)),b.repeatRowIndex>-1&&b.repeatRowIndex===t.rowIndex&&this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,r.bounds=this.currentBounds,this.drawRowWithBreak(r,t,T),t.repeatFlag=!0,t.repeatRowNumber=b.repeatRowIndex)):(r.isFinish=!0,t.grid.ParentCell.row.rowBreakHeightValue>0?t.repeatFlag=!0:(t.repeatFlag=!1,T=t.height),this.Grid.isChildGrid&&t.rowBreakHeight>0&&null!=this.Grid.ParentCell.row.grid.style.cellPadding&&(T+=this.Grid.ParentCell.row.grid.style.cellPadding.bottom),this.drawRow(t,r,T));else if(T>this.currentPageBounds.height)this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,this.drawRowWithBreak(r,t,T),t.isrowFinish=!0,t.repeatFlag=!0,-1!==t.grid.splitChildRowIndex&&(r.isFinish=!1));else if(this.currentBounds.y+T>this.currentPageBounds.height||this.currentBounds.y+T>this.currentBounds.height+this.startLocation.y||this.currentBounds.y+h>this.currentPageBounds.height){let V=!1;!this.Grid.allowRowBreakAcrossPages||this.Grid.repeatHeader||t.isRowHeightSet||t.rowMergeComplete?this.Grid.allowRowBreakAcrossPages&&null!=this.Grid.LayoutFormat&&this.Grid.LayoutFormat.layout==Qr.Paginate&&this.Grid.LayoutFormat.break!=zs.FitElement&&t.isRowHeightSet&&this.currentBounds.y+n>this.currentPageBounds.height&&(V=this.isFitToCell(this.currentPageBounds.height-this.currentBounds.y,this.Grid,t),V||(V=!(null!==this.slr&&0==this.slr.actualSize.height&&null!=this.slr.remainder&&this.slr.remainder.length>0&&this.remainderText==this.slr.remainder)),V&&null!=this.slr&&this.slr.lineCount>1&&(V=!1),this.remainderText=null):(V=this.isFitToCell(null!==this.Grid.LayoutFormat&&this.Grid.LayoutFormat.paginateBounds.height>0?this.currentBounds.height+this.startLocation.y-this.currentBounds.y:this.currentPageBounds.height-this.currentBounds.y,this.Grid,t),V&&(this.isPaginate=!0)),b.repeatRowIndex>-1&&b.repeatRowIndex===t.rowIndex||V?this.Grid.allowRowBreakAcrossPages?(r.isFinish=!0,this.drawRowWithBreak(r,t,T),t.repeatFlag=!0,t.repeatRowNumber=b.repeatRowIndex,-1!==t.grid.splitChildRowIndex&&(r.isFinish=!1)):(r.isFinish=!1,this.drawRow(t,r,T)):r.isFinish=!1}else r.isFinish=!0,this.drawRow(t,r,T),t.repeatFlag=!1;return r}{let r=!1,h=new hi(this.currentBounds.x,this.currentBounds.y);s.bounds=new Ui(h,new Ei(0,0)),n=this.ReCalculateHeight(t,n);for(let m=this.cellStartIndex;m<=this.cellEndIndex;m++){let T=m>this.cellEndIndex+1&&t.cells.getCell(m).columnSpan>1;if(!T)for(let ge=1;ge<t.cells.getCell(m).columnSpan;ge++)t.cells.getCell(m+ge).isCellMergeContinue=!0;let V=new Ei(this.Grid.columns.getColumn(m).width,n);!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(m).format)&&this.CheckIfDefaultFormat(t.cells.getCell(m).stringFormat)&&(t.cells.getCell(m).stringFormat=this.Grid.columns.getColumn(m).format);let Y=t.cells.getCell(m).style,se="string"==typeof t.cells.getCell(m).value&&null!==t.cells.getCell(m).value?t.cells.getCell(m).value:"";if(t.cells.getCell(m).style=this.RaiseBeforeCellDraw(this.currentGraphics,this.currentRowIndex,m,new Ui(h,V),se,Y),!r){t.cells.getCell(m).value instanceof ii&&(t.cells.getCell(m).value.parentCellIndex=m);let ge=t.cells.getCell(m).draw(this.currentGraphics,new Ui(h,V),T);t.grid.style.allowHorizontalOverflow&&(t.cells.getCell(m).columnSpan>this.cellEndIndex||m+t.cells.getCell(m).columnSpan>this.cellEndIndex+1)&&this.cellEndIndex<t.cells.count-1&&(t.rowOverflowIndex=this.cellEndIndex),t.grid.style.allowHorizontalOverflow&&t.rowOverflowIndex>0&&(t.cells.getCell(m).columnSpan>this.cellEndIndex||m+t.cells.getCell(m).columnSpan>this.cellEndIndex+1)&&t.cells.getCell(m).columnSpan-this.cellEndIndex+m-1>0&&(t.cells.getCell(t.rowOverflowIndex+1).value=null!==ge&&void 0!==ge.remainder?ge.remainder:"",t.cells.getCell(t.rowOverflowIndex+1).stringFormat=t.cells.getCell(m).stringFormat,t.cells.getCell(t.rowOverflowIndex+1).style=t.cells.getCell(m).style,t.cells.getCell(t.rowOverflowIndex+1).columnSpan=t.cells.getCell(m).columnSpan-this.cellEndIndex+m-1)}if(se="string"==typeof t.cells.getCell(m).value&&null!==t.cells.getCell(m).value?t.cells.getCell(m).value:"",T||this.raiseAfterCellDraw(this.currentGraphics,this.currentRowIndex,m,new Ui(h,V),se,t.cells.getCell(m).style),t.cells.getCell(m).value instanceof ii){let ge=t.cells.getCell(m).value;this.Grid.columns.getColumn(m).width>=this.currentGraphics.clientSize.width?(h.x=ge.rowLayoutBoundsWidth,h.x+=ge.style.cellSpacing):h.x+=this.Grid.columns.getColumn(m).width}else h.x+=this.Grid.columns.getColumn(m).width}(!t.rowMergeComplete||t.isRowHeightSet)&&(this.currentBounds.y+=n),s.bounds=new Ui(new hi(s.bounds.x,s.bounds.y),new Ei(h.x,h.y))}}isFitToCell(t,s,n){let r=!1,h=new Yt;for(let m=0;m<n.cells.count;m++){let T=n.cells.getCell(m);if(typeof T.value<"u"&&null!==T.value&&"string"==typeof T.value){let V=null;V=typeof T.style.font<"u"&&null!=T.style.font?T.style.font:typeof T.row.style.font<"u"&&null!=T.row.style.font?T.row.style.font:typeof T.row.grid.style.font<"u"&&null!=T.row.grid.style.font?T.row.grid.style.font:I.defaultFont,this.remainderText=n.cells.getCell(m).value;let Y=n.cells.getCell(m).width;s.columns.getColumn(m).isCustomWidth&&n.cells.getCell(m).width>s.columns.getColumn(m).width&&(Y=s.columns.getColumn(m).width),this.slr=h.layout(n.cells.getCell(m).value,V,n.cells.getCell(m).stringFormat,new Ei(Y,t),!1,this.currentPageBounds);let se=this.slr.actualSize.height;if(0==se){r=!1;break}if(null!=n.cells.getCell(m).style&&null!=n.cells.getCell(m).style.borders&&null!=n.cells.getCell(m).style.borders.top&&null!=n.cells.getCell(m).style.borders.bottom&&(se+=2*(n.cells.getCell(m).style.borders.top.width+n.cells.getCell(m).style.borders.bottom.width)),this.slr.lineCount>1&&null!=n.cells.getCell(m).stringFormat&&0!=n.cells.getCell(m).stringFormat.lineSpacing&&(se+=(this.slr.lineCount-1)*n.cells.getCell(m).style.stringFormat.lineSpacing),n.cells.getCell(m),se+=s.style.cellPadding.top+s.style.cellPadding.bottom,se+=s.style.cellSpacing,t>se||typeof this.slr.remainder<"u"&&null!==this.slr.remainder){r=!0;break}}}return r}drawRowWithBreak(t,s,n){let r=new hi(this.currentBounds.x,this.currentBounds.y);s.grid.isChildGrid&&s.grid.allowRowBreakAcrossPages&&this.startLocation.x!==this.currentBounds.x&&(r.x=this.startLocation.x),t.bounds=new Ui(r,new Ei(0,0)),this.gridHeight=s.rowBreakHeight>0?this.currentPageBounds.height:0,s.grid.style.cellPadding.top+this.currentBounds.y+s.grid.style.cellPadding.bottom<this.currentPageBounds.height&&(s.rowBreakHeight=this.currentBounds.y+n-this.currentPageBounds.height);for(let h=0;h<s.cells.count;h++){let m=s.cells.getCell(h);m.measureHeight()===n&&m.value instanceof ii&&(s.rowBreakHeight=0)}for(let h=this.cellStartIndex;h<=this.cellEndIndex;h++){let m=s.cells.getCell(h).columnSpan+h>this.cellEndIndex+1&&s.cells.getCell(h).columnSpan>1,T=new Ei(this.Grid.columns.getColumn(h).width,this.gridHeight>0?this.gridHeight:this.currentPageBounds.height),V=s.cells.getCell(h).style;s.cells.getCell(h).style=V;let se=null;if(se=s.cells.getCell(h).draw(this.currentGraphics,new Ui(r,T),m),s.rowBreakHeight>0&&null!=se&&typeof se.remainder<"u"&&(s.cells.getCell(h).FinishedDrawingCell=!1,s.cells.getCell(h).remainingString=se.remainder??" ",s.rowBreakHeight=n-se.actualSize.height),t.isFinish=t.isFinish?s.cells.getCell(h).FinishedDrawingCell:t.isFinish,s.cells.getCell(h).value instanceof ii){let ge=s.cells.getCell(h).value;this.rowBreakPageHeightCellIndex=h,this.Grid.columns.getColumn(h).width>=this.currentGraphics.clientSize.width?(r.x=this.rowLayoutBoundsWidth,r.x+=ge.style.cellSpacing):r.x+=this.Grid.columns.getColumn(h).width}else r.x+=this.Grid.columns.getColumn(h).width}this.currentBounds.y+=this.gridHeight>0?this.gridHeight:n,t.bounds=new Ui(new hi(t.bounds.x,t.bounds.y),new Ei(r.x,r.y))}}return b.repeatRowIndex=-1,b})();class Ri extends un{constructor(e,t){super(e,t)}}class qi extends Ss{constructor(e){super(e)}}class Mi{get rowIndex(){return this.gridRowIndex}get cellIndex(){return this.gridCellIndex}get value(){return this.internalValue}get bounds(){return this.gridBounds}get graphics(){return this.pdfGraphics}constructor(e,t,s,n,r){this.gridRowIndex=t,this.gridCellIndex=s,this.internalValue=r,this.gridBounds=n,this.pdfGraphics=e}}class es extends Mi{get skip(){return this.bSkip}set skip(e){this.bSkip=e}get style(){return this.cellStyle}set style(e){this.cellStyle=e}constructor(e,t,s,n,r,h){super(e,t,s,n,r),this.style=h}}class Gs extends Mi{get style(){return this.cellStyle}constructor(e,t,s,n,r,h){super(e,t,s,n,r),this.cellStyle=h}}class an{get cancel(){return this.isCancel}set cancel(e){this.isCancel=e}}class dr extends an{get bounds(){return this.cellBounds}set bounds(e){this.cellBounds=e}get page(){return this.pdfPage}constructor(e,t){super(),this.bounds=e,this.pdfPage=t}}class jr extends an{get result(){return this.layoutResult}get nextPage(){return this.nextPdfPage}set nextPage(e){this.nextPdfPage=e}constructor(e){super(),this.layoutResult=e}}class Pr extends dr{get startRowIndex(){return this.startRow}constructor(e,t,s){super(e,t),this.startRow=s}}class Po extends jr{constructor(e){super(e)}}class Ze{get isFinish(){return this.bIsFinished}set isFinish(e){this.bIsFinished=e}get bounds(){return this.layoutedBounds}set bounds(e){this.layoutedBounds=e}constructor(){this.layoutedBounds=new Ui(0,0,0,0)}}class Ks extends Rs{constructor(e,t,s){super(t),this.isEmbedFont=!1,this.isUnicode=!0,this.createFontInternal(e,void 0!==s?s:wt.Regular)}equalsToFont(e){return!1}getLineWidth(e,t){let s=0;s=null!==t&&typeof t<"u"&&t.textDirection!==di.None?this.getUnicodeLineWidth(e,s,t).width:this.fontInternal.getLineWidth(e);let n=this.metrics.getSize(t);return s*=Rs.charSizeMultiplier*n,s=this.applyFormatSettings(e,t,s),s}getCharWidth(e,t){let s=this.fontInternal.getCharWidth(e);return s*=.001*this.metrics.getSize(t),s}createFontInternal(e,t){this.fontInternal=new Bs(e,this.size),this.calculateStyle(t),this.initializeInternals()}calculateStyle(e){let t=this.fontInternal.ttfMetrics.macStyle;0!=(e&wt.Underline)&&(t|=wt.Underline),0!=(e&wt.Strikeout)&&(t|=wt.Strikeout),this.setStyle(t)}initializeInternals(){let e=null;I.enableCache&&(e=I.cache.search(this));let t=null;if(null!=e){t=e.getInternals();let s=e.metrics;s=s.clone(),s.size=this.size,this.metrics=s,this.fontInternal=e.fontInternal}else null==e&&(this.fontInternal instanceof Bs&&(this.fontInternal.isEmbed=this.isEmbedFont),this.fontInternal.createInternals(),t=this.fontInternal.getInternals(),this.metrics=this.fontInternal.metrics);this.metrics.isUnicodeFont=!0,this.setInternals(t)}setSymbols(e){this.fontInternal?.setSymbols(e)}get Unicode(){return this.isUnicode}getUnicodeLineWidth(e,t,s){t=0;let n=null,h=(new vr).getGlyphIndex(e,this,s.textDirection===di.RightToLeft,n,!0),m=h.success;if(n=h.glyphs,m&&null!==n){let T=this.fontInternal.ttfReader;for(let V=0,Y=n.length;V<Y;V++){let ge=T.getGlyph(n[V]);null!==ge&&typeof ge<"u"&&(t+=ge.width)}}return{success:m,width:t}}}class Qs{get dock(){return this.dockStyle}set dock(e){this.dockStyle=e,this.resetAlignment()}get alignment(){return this.alignmentStyle}set alignment(e){this.setAlignment(e)}get foreground(){return this.isForeground}set foreground(e){this.isForeground=e}get background(){return!this.isForeground}set background(e){this.isForeground=!e}get location(){return this.currentLocation}set location(e){this.type===Cs.None&&(this.currentLocation=e)}get x(){return typeof this.currentLocation<"u"?this.currentLocation.x:0}set x(e){this.type===Cs.None&&(this.currentLocation.x=e)}get y(){return typeof this.currentLocation<"u"?this.currentLocation.y:0}set y(e){this.type===Cs.None&&(this.currentLocation.y=e)}get size(){return this.template.size}set size(e){this.type===Cs.None&&this.template.reset(e)}get width(){return this.template.width}set width(e){if(this.template.width!==e&&this.type===Cs.None){let t=this.template.size;t.width=e,this.template.reset(t)}}get height(){return this.template.height}set height(e){if(this.template.height!==e&&this.type===Cs.None){let t=this.template.size;t.height=e,this.template.reset(t)}}get graphics(){return this.template.graphics}get template(){return this.pdfTemplate}get type(){return this.templateType}set type(e){this.updateDocking(e),this.templateType=e}get bounds(){return new Ui(new hi(this.x,this.y),this.size)}set bounds(e){this.type===Cs.None&&(this.location=new hi(e.x,e.y),this.size=new Ei(e.width,e.height))}constructor(e,t,s,n,r){e instanceof Ui&&typeof t>"u"?this.InitiateBounds(e.x,e.y,e.width,e.height,null):e instanceof Ui&&t instanceof wi&&typeof s>"u"?this.InitiateBounds(e.x,e.y,e.width,e.height,t):e instanceof hi&&t instanceof Ei&&typeof s>"u"?this.InitiateBounds(e.x,e.y,t.width,t.height,null):e instanceof hi&&t instanceof Ei&&s instanceof wi&&typeof n>"u"?this.InitiateBounds(e.x,e.y,t.width,t.height,s):e instanceof Ei&&typeof t>"u"?this.InitiateBounds(0,0,e.width,e.height,null):"number"==typeof e&&"number"==typeof t&&typeof s>"u"?this.InitiateBounds(0,0,e,t,null):"number"==typeof e&&"number"==typeof t&&s instanceof wi&&typeof n>"u"?this.InitiateBounds(0,0,e,t,s):this.InitiateBounds(e,t,s,n,null)}InitiateBounds(e,t,s,n,r){this.x=e,this.y=t,this.pdfTemplate=new qs(s,n)}updateDocking(e){if(e!==Cs.None){switch(e){case Cs.Top:this.dock=ms.Top;break;case Cs.Bottom:this.dock=ms.Bottom;break;case Cs.Left:this.dock=ms.Left;break;case Cs.Right:this.dock=ms.Right}this.resetAlignment()}}resetAlignment(){this.alignment=dn.None}setAlignment(e){if(this.dock===ms.None)this.alignmentStyle=e;else{let t=!1;switch(this.dock){case ms.Left:t=e===dn.TopLeft||e===dn.MiddleLeft||e===dn.BottomLeft||e===dn.None;break;case ms.Top:t=e===dn.TopLeft||e===dn.TopCenter||e===dn.TopRight||e===dn.None;break;case ms.Right:t=e===dn.TopRight||e===dn.MiddleRight||e===dn.BottomRight||e===dn.None;break;case ms.Bottom:t=e===dn.BottomLeft||e===dn.BottomCenter||e===dn.BottomRight||e===dn.None;break;case ms.Fill:t=e===dn.MiddleCenter||e===dn.None}t&&(this.alignmentStyle=e)}}draw(e,t){let n=this.calculateBounds(e.page,t);-0===n.x&&(n.x=0),e.graphics.drawPdfTemplate(this.template,new hi(n.x,n.y),new Ei(n.width,n.height))}calculateBounds(e,t){let s=this.bounds;return this.alignmentStyle!==dn.None?s=this.getAlignmentBounds(e,t):this.dockStyle!==ms.None&&(s=this.getDockBounds(e,t)),s}getAlignmentBounds(e,t){let s=this.bounds;return s=this.type===Cs.None?this.getSimpleAlignmentBounds(e,t):this.getTemplateAlignmentBounds(e,t),s}getSimpleAlignmentBounds(e,t){let s=this.bounds,r=e.section.getActualBounds(t,e,!1),h=this.x,m=this.y;switch(this.alignmentStyle){case dn.TopLeft:h=0,m=0;break;case dn.TopCenter:h=(r.width-this.width)/2,m=0;break;case dn.TopRight:h=r.width-this.width,m=0;break;case dn.MiddleLeft:h=0,m=(r.height-this.height)/2;break;case dn.MiddleCenter:h=(r.width-this.width)/2,m=(r.height-this.height)/2;break;case dn.MiddleRight:h=r.width-this.width,m=(r.height-this.height)/2;break;case dn.BottomLeft:h=0,m=r.height-this.height;break;case dn.BottomCenter:h=(r.width-this.width)/2,m=r.height-this.height;break;case dn.BottomRight:h=r.width-this.width,m=r.height-this.height}return s.x=h,s.y=m,s}getTemplateAlignmentBounds(e,t){let s=this.bounds,n=e.section,r=n.getActualBounds(t,e,!1),h=this.x,m=this.y;switch(this.alignmentStyle){case dn.TopLeft:this.type===Cs.Left?(h=-r.x,m=0):this.type===Cs.Top&&(h=-r.x,m=-r.y);break;case dn.TopCenter:h=(r.width-this.width)/2,m=-r.y;break;case dn.TopRight:this.type===Cs.Right?(h=r.width+n.getRightIndentWidth(t,e,!1)-this.width,m=0):this.type===Cs.Top&&(h=r.width+n.getRightIndentWidth(t,e,!1)-this.width,m=-r.y);break;case dn.MiddleLeft:h=-r.x,m=(r.height-this.height)/2;break;case dn.MiddleCenter:h=(r.width-this.width)/2,m=(r.height-this.height)/2;break;case dn.MiddleRight:h=r.width+n.getRightIndentWidth(t,e,!1)-this.width,m=(r.height-this.height)/2;break;case dn.BottomLeft:this.type===Cs.Left?(h=-r.x,m=r.height-this.height):this.type===Cs.Bottom&&(h=-r.x,m=r.height+n.getBottomIndentHeight(t,e,!1)-this.height);break;case dn.BottomCenter:h=(r.width-this.width)/2,m=r.height+n.getBottomIndentHeight(t,e,!1)-this.height;break;case dn.BottomRight:this.type===Cs.Right?(h=r.width+n.getRightIndentWidth(t,e,!1)-this.width,m=r.height-this.height):this.type===Cs.Bottom&&(h=r.width+n.getRightIndentWidth(t,e,!1)-this.width,m=r.height+n.getBottomIndentHeight(t,e,!1)-this.height)}return s.x=h,s.y=m,s}getDockBounds(e,t){let s=this.bounds;return s=this.type===Cs.None?this.getSimpleDockBounds(e,t):this.getTemplateDockBounds(e,t),s}getSimpleDockBounds(e,t){let s=this.bounds,r=e.section.getActualBounds(t,e,!1),h=this.x,m=this.y,T=this.width,V=this.height;switch(this.dockStyle){case ms.Left:h=0,m=0,T=this.width,V=r.height;break;case ms.Top:h=0,m=0,T=r.width,V=this.height;break;case ms.Right:h=r.width-this.width,m=0,T=this.width,V=r.height;break;case ms.Bottom:h=0,m=r.height-this.height,T=r.width,V=this.height;break;case ms.Fill:h=0,h=0,T=r.width,V=r.height}return s=new Ui(h,m,T,V),s}getTemplateDockBounds(e,t){let s=this.bounds,n=e.section,r=n.getActualBounds(t,e,!1),h=n.pageSettings.getActualSize(),m=this.x,T=this.y,V=this.width,Y=this.height;switch(this.dockStyle){case ms.Left:m=-r.x,T=0,V=this.width,Y=r.height;break;case ms.Top:m=-r.x,T=-r.y,V=h.width,Y=this.height,r.height<0&&(T=-r.y+h.height);break;case ms.Right:m=r.width+n.getRightIndentWidth(t,e,!1)-this.width,T=0,V=this.width,Y=r.height;break;case ms.Bottom:m=-r.x,T=r.height+n.getBottomIndentHeight(t,e,!1)-this.height,V=h.width,Y=this.height,r.height<0&&(T-=h.height);break;case ms.Fill:m=0,m=0,V=r.width,Y=r.height}return s=new Ui(m,T,V,Y),s}}class Wn{constructor(e){this.intl=new u.eC,(0,u.le)(e)||(this.intl.culture=e)}getFormatFunction(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)}getParserFunction(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)}fromView(e,t,s){return"date"!==s&&"datetime"!==s&&"number"!==s||(0,u.le)(t)?e:t(e)}toView(e,t){let s=e;return!(0,u.le)(t)&&!(0,u.le)(e)&&(s=t(e)),s}setCulture(e){(0,u.le)(e)||(0,u.VY)(e)}}class gn{constructor(e,t){this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=()=>this.editTemplateFn,this.getFilterTemplate=()=>this.filterTemplateFn,(0,u.TS)(this,e),this.parent=t,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),(0,u.le)(this.uid)&&(this.uid=Na("grid-column"));const s=new Wn;if(e.format&&(e.format.skeleton||e.format.format&&"string"==typeof e.format.format)&&(this.setFormatter(s.getFormatFunction((0,u.l7)({},e.format))),this.setParser(s.getParserFunction(e.format))),this.toJSON=()=>{const n={},r=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],h=Object.keys(this);for(let m=0;m<h.length;m++)if("columns"===h[m]){n[h[m]]=[];for(let T=0;T<this[h[m]].length;T++)n[h[m]].push(this[h[m]][T].toJSON())}else r.indexOf(h[m])<0&&(n[h[m]]=this[h[m]]);return n},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(n=>n.allowResizing))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=_o(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=_o(this.headerTemplate)),!(0,u.le)(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=_o(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=_o(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=_o(this.filterTemplate)),this.isForeignColumn()&&((0,u.le)(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=(0,u.l7)({dataSource:this.dataSource,query:new bt.AE,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){let n=this.sortComparer;this.sortComparer=(r,h,m,T)=>{if("string"==typeof n&&(n=mi(n,window)),"Descending"===this.sortDirection){const V=r;r=h,h=V;const Y=m;m=T,T=Y}return n(r,h,m,T)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=(n,r)=>(n=mi(this.foreignKeyValue,He(this,{},n)[0]),r=mi(this.foreignKeyValue,He(this,{},r)[0]),"Descending"===this.sortDirection?bt.j4.fnDescending(n,r):bt.j4.fnAscending(n,r)))}getSortDirection(){return this.sortDirection}setSortDirection(e){this.sortDirection=e}getFreezeTableName(){return this.freezeTable}setProperties(e){const t=Object.keys(e);for(let s=0;s<t.length;s++)this[t[s]]=e[t[s]],this.parent&&this.parent.isReact&&("template"===t[s]?this.parent.refreshReactColumnTemplateByUid(this.uid):"headerTemplate"===t[s]&&(this.headerTemplateFn=_o(e[t[s]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)))}isForeignColumn(){return!(!this.dataSource||!this.foreignKeyValue)}getFormatter(){return this.formatFn}setFormatter(e){this.formatFn=e}getParser(){return this.parserFn}setParser(e){this.parserFn=e}getColumnTemplate(){return this.templateFn}getHeaderTemplate(){return this.headerTemplateFn}getFilterItemTemplate(){return this.fltrTemplateFn}getDomSetter(){return this.disableHtmlEncode?"textContent":"innerHTML"}}const el="rowDataBound",wo="queryCellInfo",Sl="headerCellInfo",lr="actionBegin",vn="actionComplete",vl="actionFailure",Oo="dataBound",tl="rowSelecting",qr="rowSelected",Ho="rowDeselecting",kl="rowDeselected",Tn="cellSelecting",er="cellSelected",pr="cellDeselecting",Kr="cellDeselected",il="columnSelecting",Tl="columnSelected",Xr="columnDragStart",nl="columnDrag",To="columnDrop",D="beforePrint",O="printComplete",me="batchAdd",Te="batchCancel",Je="batchDelete",Zo="beforeDataBound",Vo="beforeOpenAdaptiveDialog",cl="resizeStop",$l="filterchoicerequest",ba="filterafteropen",Sc="filterbeforeopen",Ec="exportGroupCaption",fa="initial-load",it="initial-end",Qe="data-ready",F="content-ready",H="ui-update",U="on-empty",pe="inbound-model-changed",Me="model-changed",yt="colgroup-refresh",ei="header-refreshed",Dr="sorting-complete",So="filtering-complete",sa="searching-complete",Oh="grouping-complete",Dc="ungrouping-complete",Lh="group-aggregates",gl="refresh-footer-rendered",th="beforecellfocused",sd="cellfocused",Ko="key-pressed",Ll="click",Tr="destroy",Fl="column-visible-changed",Vl="column-width-changed",Ph="column-position-changed",Ha="rows-added",ih="rows-removed",Pd="header-drop",nd="datasource-modified",rd="dblclick",mh="toolbar-refresh",$u="bulk-save",sh="auto-col",Jh="tooltip-destroy",od="update-data",Ca="prevent-batch",Ju="dialog-destroy",du="crud-Action",ag="add-delete-Action",Qu="destroy-form",ef="double-tap",Nd="exportDetailDataBound",Xu="pdfExportComplete",wa="freezerender",Sa="filterOpen",xc="filterDialogCreated",Ea="filter-menu-close",_l="getForeignKeyData",ec="generateQuery",ip="showEmptyGrid",uu="foreignKeyData",Nh="dataStateChange",sp="dataSourceChanged",af="beforeFragAppend",Bh="frozenHeight",Vd="textWrapRefresh",ad="recordAdded",Ac="cancel-Begin",ja="editNextValCell",pu="hierarchyprint",xl="export-RowDataBound",Rc="partial-refresh",_h="columns-prepared",Mc="cbox-filter-begin",kc="cbox-filter-complete",tc="filter-Prevent",Hh="restore-Focus",Lc="detail-indentcell-info",Fc="virtual-scroll-edit-success",vh="get-virtual-data",jd="infinite-scroll-handler",cd="infinite-edit-handler",ic="close-filter-dialog",sc="pdfAggregateQueryCellInfo",Cu="group-collapse",rc="refreshResizeHandlers",Su="before-refresh-on-data-change",bh="filter-dialog-close",_c="refresh-cutsom-filter-ok-button",ud="refresh-cutsom-filter-clear-button",Hc="render-responsive-cmenu",pd="filter-cmenu-select",fd="custom-filter-close",Kl="set-fullscreen-dialog",Da="refresh-Expand-and-Collapse",oc="row-mode-change",zc="enter-key-handler",Tu="select-row-on-context-open",gf="pager-refresh",yf="close-edit",$d="create-virtual-validation-form",fp="refresh-infinite-persist-selection",lc="after-filter-column-menu-close";var Ys=(()=>{return(b=Ys||(Ys={}))[b.Data=0]="Data",b[b.Header=1]="Header",b[b.Summary=2]="Summary",b[b.GroupSummary=3]="GroupSummary",b[b.CaptionSummary=4]="CaptionSummary",b[b.Filter=5]="Filter",b[b.Indent=6]="Indent",b[b.GroupCaption=7]="GroupCaption",b[b.GroupCaptionEmpty=8]="GroupCaptionEmpty",b[b.Expand=9]="Expand",b[b.HeaderIndent=10]="HeaderIndent",b[b.StackedHeader=11]="StackedHeader",b[b.DetailHeader=12]="DetailHeader",b[b.DetailExpand=13]="DetailExpand",b[b.CommandColumn=14]="CommandColumn",b[b.DetailFooterIntent=15]="DetailFooterIntent",b[b.RowDragIcon=16]="RowDragIcon",b[b.RowDragHIcon=17]="RowDragHIcon",Ys;var b})(),dl=(()=>{return(b=dl||(dl={}))[b.Header=0]="Header",b[b.Content=1]="Content",b[b.Summary=2]="Summary",dl;var b})(),ao=(()=>{return(b=ao||(ao={}))[b.isEdit=0]="isEdit",b[b.isAdd=1]="isAdd",b[b.isSort=2]="isSort",b[b.isFilter=3]="isFilter",ao;var b})(),wh=(()=>{return(b=wh||(wh={}))[b.isInitial=0]="isInitial",b[b.isSearch=1]="isSearch",wh;var b})();class yd{constructor(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),!this.parent.isDestroyed&&"foreignKey"!==this.getModuleName()&&(this.parent.on(Ha,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(ih,this.removeRows,this),this.parent.on(nd,this.initDataManager,this),this.parent.on(Tr,this.destroy,this),this.parent.on(od,this.crudActions,this),this.parent.on(ag,this.getData,this),this.parent.on(sh,this.refreshFilteredCols,this),this.parent.on(_h,this.refreshFilteredCols,this))}reorderRows(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])}getModuleName(){return"data"}initDataManager(){const e=this.parent;this.dataManager=e.dataSource instanceof bt.hm?e.dataSource:(0,u.le)(e.dataSource)?new bt.hm:new bt.hm(e.dataSource),!e.isAngular||e.query instanceof bt.AE?(this.isQueryInvokedFromData=!0,e.query=e.query instanceof bt.AE?e.query:new bt.AE):e.setProperties({query:new bt.AE},!0)}generateQuery(e){const s=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)s.select(this.parent.getColumns().filter(n=>!(!0!==n.isPrimaryKey&&!1===n.visible||void 0===n.field)).map(n=>n.field));else if("Schema"===this.parent.columnQueryMode){const n=[],r=this.parent.columns;for(let h=0;h<r.length;h++)n.push(r[h].field);s.select(n)}return this.filterQuery(s),this.searchQuery(s),this.aggregateQuery(s),this.sortQuery(s),vt(this.parent)?this.virtualGroupPageQuery(s):this.pageQuery(s,e),this.groupQuery(s),s}aggregateQuery(e){const t=this.parent.aggregates;for(let s=0;s<t.length;s++){const n=t[s];for(let r=0;r<n.columns.length;r++){const h=n.columns[r],m=h.type instanceof Array?h.type:[h.type];for(let T=0;T<m.length;T++)e.aggregate(m[T].toLowerCase(),h.field)}}return e}virtualGroupPageQuery(e){if(e.queries.length)for(let s=0;s<e.queries.length;s++)"onPage"===e.queries[s].fn&&e.queries.splice(s,1);return e}pageQuery(e,t){const s=this.parent,r={query:e,skipPage:!1};if(s.notify("set-virtual-page-query",r),r.skipPage)return e;if((s.allowPaging||s.enableVirtualization||s.enableInfiniteScrolling)&&!0!==t){if(s.pageSettings.currentPage=Math.max(1,s.pageSettings.currentPage),s.pageSettings.pageCount<=0&&(s.pageSettings.pageCount=8),s.pageSettings.pageSize<=0&&(s.pageSettings.pageSize=12),e.queries.length)for(let h=0;h<e.queries.length;h++)"onPage"===e.queries[h].fn&&e.queries.splice(h,1);!(0,u.le)(s.infiniteScrollModule)&&s.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(s.pageSettings.currentPage,s.allowPaging&&s.pagerModule&&s.pagerModule.pagerObj.isAllPage&&!this.dataManager.dataSource.offline?null:s.pageSettings.pageSize)}return e}groupQuery(e){const t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});const s=t.groupSettings.columns;for(let n=0,r=s.length;n<r;n++){const h=this.getColumnByField(s[n]);h||this.parent.log("initial_action",{moduleName:"group",columnName:s[n]});const T=h.format;h.enableGroupByFormat?e.group(s[n],this.formatGroupColumn.bind(this),T):e.group(s[n],null)}}return e}sortQuery(e){const t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){const s=t.sortSettings.columns,n=[];for(let r=s.length-1;r>-1;r--){const h=this.getColumnByField(s[r].field);if(!h)return this.parent.log("initial_action",{moduleName:"sort",columnName:s[r].field}),e;h.setSortDirection(s[r].direction);let m=s[r].direction;h.sortComparer&&(this.parent.log("grid_sort_comparer"),m=this.isRemote()?s[r].direction:h.sortComparer.bind(h)),-1===t.groupSettings.columns.indexOf(s[r].field)?h.isForeignColumn()||h.sortComparer?e.sortByForeignKey(h.field,m,void 0,s[r].direction.toLowerCase()):e.sortBy(h.field,m):n.push({direction:m,field:h.field})}for(let r=0,h=n.length;r<h;r++)if("string"==typeof n[r].direction)e.sortBy(n[r].field,n[r].direction);else{const m=this.getColumnByField(n[r].field);e.sortByForeignKey(n[r].field,n[r].direction,void 0,m.getSortDirection().toLowerCase())}}return e}searchQuery(e,t,s){const n=this.parent.searchSettings;let r=n.fields.length?n.fields:this.getSearchColumnFieldNames(),h=[],m=!1;if(this.parent.searchSettings.key.length){m=this.parent.getForeignKeyColumns().some(V=>r.indexOf(V.field)>-1);const T=s?t.dataSource.adaptor:this.dataManager.adaptor;if(m||T.getModuleName&&"ODataV4Adaptor"===T.getModuleName()){r=s?[t.foreignKeyValue]:r;for(let Y=0;Y<r.length;Y++){const se=s?t:this.getColumnByField(r[Y]);se.isForeignColumn()&&!s?h=this.fGeneratePredicate(se,h):h.push(new bt.$G(r[Y],n.operator,n.key,n.ignoreCase,n.ignoreAccent))}const V=bt.$G.or(h);V.key=n.key,e.where(V)}else e.search(n.key,r,n.operator,n.ignoreCase,n.ignoreAccent)}return e}filterQuery(e,t,s){const n=this.parent;let r=[];const h=[],m=this.parent.getForeignKeyColumns();let T;if(n.allowFiltering&&n.filterSettings.columns.length){const V=t||n.filterSettings.columns,Y={};for(const ke of n.getColumns())Y[ke.field]=ke.filter.type?ke.filter.type:n.filterSettings.type;const se=[],ge=[];for(const ke of V){const qe=n.getColumnByField(ke.field);(0,u.le)(ke.type)&&qe&&("date"===qe.type||"datetime"===qe.type)&&(ke.type=n.getColumnByField(ke.field).type),ke.isForeignKey?se.push(ke):ge.push(ke)}if(ge.length){for(let qe=0,mt=ge.length;qe<mt;qe++)ge[qe].uid=ge[qe].uid||this.parent.grabColumnByFieldFromAllCols(ge[qe].field).uid;const ke=Gl.getPredicate(ge);for(const qe of Object.keys(ke))r.push(ke[qe])}if(se.length)for(const ke of se){ke.uid=ke.uid||this.parent.grabColumnByFieldFromAllCols(ke.field).uid;const qe=this.parent.grabColumnByUidFromAllCols(ke.uid);if(qe||this.parent.log("initial_action",{moduleName:"filter",columnName:ke.field}),qe.isForeignColumn()&&Ve(ke.field,m)&&!s)h.push(ke),qe.columnData.length||(T=!0),r=this.fGeneratePredicate(qe,r);else{const mt=Gl.getPredicate(V);for(const Vt of Object.keys(mt))r.push(mt[Vt])}}r.length&&!T?e.where(bt.$G.and(r)):this.parent.notify(ip,{})}return e}fGeneratePredicate(e,t){const s={};return e&&(this.parent.notify(ec,{predicate:s,column:e}),s.predicate.predicates.length&&t.push(s.predicate)),t}getData(e={requestType:""},t){const s=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,s).promise;{let n;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)n=this.dataManager.remove(s,e.data[0],t.fromTable,t);else{const m={addedRecords:[],deletedRecords:[],changedRecords:[]};m.deletedRecords=e.data,n=this.dataManager.saveChanges(m,s,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=(0,u.le)(e.index)?0:e.index,n=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=n,!n||Array.isArray(n)||n.hasOwnProperty("deletedRecords")?this.insert(t,e):n.then(()=>this.insert(t,e))}}insert(e,t){return"save"===t.requestType&&this.parent.notify(ad,t),this.executeQuery(e)}executeQuery(e){if(this.dataManager.ready){const t=new bt.BH;return this.dataManager.ready.then(()=>{this.dataManager.executeQuery(e).then(n=>{t.resolve(n)})}).catch(n=>{t.reject(n)}),t.promise}return this.dataManager.executeQuery(e)}formatGroupColumn(e,t){const s=this.serviceLocator,n=this.getColumnByField(t),r=e;return n.type||(n.type=r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof e),(0,u.le)(n.getFormatter())&&ae(s,n),Wn.prototype.toView(e,n.getFormatter())}crudActions(e){const t=this.generateQuery();let s=null;const n="promise",r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());"save"===(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,r),e.requestType)&&(s=this.dataManager.update(r,e.data,t.fromTable,t,e.previousData)),e[n]=s||e[n],this.parent.notify(du,e)}saveChanges(e,t,s,n=this.generateQuery()){if(n.requiresCount(),"result"in this.parent.dataSource){const r=new bt.BH,h={requestType:"batchsave",changes:e,key:t,query:n,endEdit:r.resolve};return this.setState({isPending:!0,resolver:r.resolve}),this.parent.trigger(sp,h),r.promise}return this.dataManager.saveChanges(e,t,n.fromTable,n,s)}getKey(e){if(e&&e.length)return e[0]}isRemote(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url}addRows(e){for(let t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])}removeRows(e){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(s=>-1===e.records.indexOf(s))}getColumnByField(e){let t;return this.parent.columnModel.some(s=>(t=s,s.field===e))&&t}destroy(){this.parent.isDestroyed||(this.parent.off(Ha,this.addRows),this.parent.off(ih,this.removeRows),this.parent.off(nd,this.initDataManager),this.parent.off(Tr,this.destroy),this.parent.off(od,this.crudActions),this.parent.off(ag,this.getData),this.parent.off(sh,this.refreshFilteredCols),this.parent.off(_h,this.refreshFilteredCols))}getState(){return this.dataState}setState(e){return this.dataState=e}getForeignKeyDataState(){return this.foreignKeyDataState}setForeignKeyDataState(e){this.foreignKeyDataState=e}getStateEventArgument(e){const t=new bt.lM,s=new bt.hm({url:"",adaptor:new bt.lM}),n=t.processQuery(s,e),r=JSON.parse(n.data);return(0,u.l7)(r,n.pvtData)}eventPromise(e,t,s){const n=e,r=this.getStateEventArgument(t),h=new bt.BH,m=new bt.BH;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(r.action=e,"save"===e.requestType||"delete"===e.requestType){const T=e;T.key=s,T.promise=m.promise,T.state=r,this.setState({isPending:!0,resolver:m.resolve}),n.endEdit=m.resolve,n.cancelEdit=m.reject,this.parent.trigger(sp,T),m.promise.then(()=>{this.setState({isPending:!0,resolver:h.resolve,group:r.group,aggregates:r.aggregates}),"save"===T.requestType&&this.parent.notify(ad,T),this.parent.trigger(Nh,r)}).catch(()=>{})}else this.setState({isPending:!0,resolver:h.resolve,group:r.group,aggregates:r.aggregates}),this.parent.trigger(Nh,r);else this.setState({}),h.resolve(this.parent.dataSource);return h}getSearchColumnFieldNames(){const e=[],t=this.parent.getColumns();for(const s of t)s.allowSearching&&!(0,u.le)(s.field)&&e.push(s.field);return e}refreshFilteredCols(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function Fr(b,e){for(let t=0;t<e.length;t++)e[t].uid=e[t].isForeignKey?Ve(e[t].field,b.getForeignKeyColumns()).uid:b.enableColumnVirtualization?Fm(b,e[t].field).uid:b.getColumnByField(e[t].field).uid}(this.parent,this.parent.filterSettings.columns)}}class Ta{constructor(e,t){(0,u.TS)(this,e),this.parent=t}clone(){const e=new Ta({});return(0,u.TS)(e,this),e.cells=this.cells.map(t=>t.clone()),e}setRowValue(e){if(!this.parent)return;const t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}setCellValue(e,t){if(this.parent&&this.data[e].toString()!==t.toString()){const n=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[n],e,t),this.makechanges(n,this.data)}}makechanges(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)}}class na{constructor(e){this.isSpanned=!1,this.isRowSpanned=!1,(0,u.TS)(this,e)}clone(){const e=new na({});return(0,u.TS)(e,this),e}}class vd{constructor(e,t){this.serviceLocator=e,this.parent=t}render(e,t,s,n){const h=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[s].cellType||Ys.Data);let m=t.cells[s].cellSpan?t.cells[s].cellSpan:e.colSpan+s<=t.cells.length?e.colSpan:t.cells.length-s;const T=e.rowSpan;let Y,V=0;if(t.index>0){const ge=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[t.index-1].isDataRow?this.parent.getRowsObject()[t.index].cells:this.parent.getRowsObject()[t.index-1].cells,ke=t.cells[s],qe="uid";Y=ge.filter(mt=>mt.column.uid===ke.column[qe])[0]}const se=Y&&Y.colSpanRange>1&&Y.rowSpanRange>1?Y.colSpanRange:m;for(let ge=s+1;ge<s+se&&ge<t.cells.length;ge++)!1===t.cells[ge].visible?V++:t.cells[ge].isSpanned=!0;if(V>0){for(let ge=s+m;ge<s+m+V&&ge<t.cells.length;ge++)t.cells[ge].isSpanned=!0;s+m+V>=t.cells.length&&(m-=s+m+V-t.cells.length)}return t.cells[s].cellSpan&&(t.data[e.column.field]=t.cells[s].spanText,n=h.render(t.cells[s],t.data,{index:(0,u.le)(t.index)?"":t.index.toString()})),m>1&&(0,u.Y4)(n,{colSpan:m.toString(),"aria-colSpan":m.toString()}),T>1&&((0,u.Y4)(n,{rowspan:T.toString(),"aria-rowspan":T.toString()}),t.cells[s].isRowSpanned=!0,t.cells[s].rowSpanRange=Number(T),m>1&&(t.cells[s].colSpanRange=Number(m))),t.index>0&&Y.rowSpanRange>1&&(t.cells[s].isSpanned=!0,t.cells[s].rowSpanRange=Number(Y.rowSpanRange-1),t.cells[s].colSpanRange=Y.rowSpanRange>0?Y.colSpanRange:1),this.parent.enableColumnVirtualization&&!t.cells[s].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),n}backupMergeCells(e,t,s){this.setMergeCells(this.generteKey(e,t),s)}generteKey(e,t){return e+"__"+t.toString()}splitKey(e){return e.split("__")}containsKey(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))}getMergeCells(){return this.parent.mergeCells}setMergeCells(e,t){this.parent.mergeCells[e]=t}updateVirtualCells(e){const t=this.getMergeCells();for(const s of Object.keys(t)){const n=t[s],r=this.splitKey(s),h=this.getIndexFromAllColumns(r[0]),m=this.parent.getColumnIndexesInView(),T=n-(m[0]-h);if(h<m[0]&&T>1)for(const V of e)if(V.data[r[0]].toString()===r[1].toString()){V.cells[0].cellSpan=T,V.cells[0].spanText=r[1];break}}return e}getIndexFromAllColumns(e){return Sd(this.parent.getVisibleColumns(),(s,n)=>{if(s.field===e)return n})[0]}}const Cr="e-rowcell",rl="e-gridheader",ll="e-gridcontent",ml="e-gridfooter",Lo="e-headercontent",Or="e-movablecontent",io="e-movableheader",ga="e-frozencontent",Wa="e-frozenheader",Jo="e-content",yo="e-table",Lr="e-row",Sh="e-gridchkbox",Nl="e-editedrow",ra="e-addedrow",Eh="changedRecords",Ua="addedRecords",ac="deletedRecords",fn="Left-Right",vo="frozen-right",Qo="frozen-left",go="aria-colindex",xn="aria-rowindex",vs="tbody",Qn="colgroup",xa="open",hc="change",Ga="focus",bd="created",cc="beforeOpen";class Wl{constructor(e,t,s){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=s,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}render(e,t,s,n,r){return this.refreshRow(e,t,s,n,r)}refresh(e,t,s,n,r){s&&(e.data=Hs({},e.changes),this.refreshMergeCells(e));const h=this.parent.element.querySelector("[data-uid="+e.uid+"]"),m=this.refreshRow(e,t,n,r,null,s),T=[].slice.call(m.cells);h.innerHTML="";for(const V of T)h.appendChild(V)}refreshRow(e,t,s,n,r,h){const m=(0,u.le)(r)?this.element.cloneNode():r,T={data:e.data},V={data:e.data},Y=this.parent.getColumns().filter(Vt=>"checkbox"===Vt.type&&Vt.field)[0];let se=!1;Y&&(se=mi(Y.field,T.data));const ge=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=ge.indexOf(e.index)>-1||se),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===ge.indexOf(e.index)&&ge.push(e.index)),this.buildAttributeFromRow(m,e),(0,u.Y4)(m,(0,u.l7)({},s,{})),Ql(m,e.attributes);const ke=this.serviceLocator.getService("cellRendererFactory");for(let Vt=0,Qt=e.cells.length;Vt<Qt;Vt++){const ai=e.cells[Vt];ai.isSelected=e.isSelected,ai.isColumnSelected=ai.column.isSelected;const ki=ke.getCellRenderer(e.cells[Vt].cellType||Ys.Data),Qi={index:(0,u.le)(e.index)?"":e.index.toString()};e.isExpand&&e.cells[Vt].cellType===Ys.DetailExpand&&(Qi.class=this.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");let fs=ki.render(e.cells[Vt],e.data,Qi,e.isExpand,h);if(e.cells[Vt].cellType!==Ys.Filter){if(e.cells[Vt].cellType===Ys.Data||e.cells[Vt].cellType===Ys.CommandColumn){this.parent.trigger(wo,(0,u.l7)(V,{cell:fs,column:ai.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[Vt].foreignKeyData,requestType:this.parent.requestTypeAction}));let ps=!1;if(e.index>0&&this.isSpan){const Nn=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,fr="uid",rr=Nn.filter(xr=>xr.column.uid===e.cells[Vt].column[fr])[0];ps=rr.isRowSpanned?rr.isRowSpanned:rr.rowSpanRange>1}(V.colSpan>1||e.cells[Vt].cellSpan>1||V.rowSpan>1||ps)&&(this.isSpan=!0,fs=new vd(this.serviceLocator,this.parent).render(V,e,Vt,fs))}e.cells[Vt].isSpanned||m.appendChild(fs)}}if(e.isDataRow&&(this.parent.trigger(el,(0,u.l7)(T,{row:m,rowHeight:this.parent.rowHeight})),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){const Vt=m.querySelectorAll(".e-rowcell:not(.e-hide)")[0];Vt&&Vt.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(T.rowHeight=this.parent.rowHeight),T.rowHeight?m.style.height=T.rowHeight+"px":this.parent.rowHeight&&(m.querySelector(".e-headercell")||m.querySelector(".e-groupcaption"))&&(m.style.height=this.parent.rowHeight+"px"),e.cssClass&&m.classList.add(e.cssClass),e.lazyLoadCssClass&&m.classList.add(e.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(let Vt=0;Vt<this.parent.aggregates.length;Vt++)if(this.parent.aggregates[Vt].properties.columns[0].footerTemplate){const ki=[].slice.call(m.getElementsByClassName("e-summarycell"));ki.length&&((0,u.cn)([ki[ki.length-1]],["e-lastsummarycell"]),(0,u.cn)([ki[0]],["e-firstsummarycell"]))}return m}refreshMergeCells(e){for(const t of e.cells)t.isSpanned=!1;return e}buildAttributeFromRow(e,t){const s={},r=[];t.isDataRow&&r.push(Lr),t.isAltRow&&r.push("e-altrow"),(0,u.le)(t.index)||(s["aria-rowindex"]=t.index),t.rowSpan&&(s.rowSpan=t.rowSpan),t.uid&&(s["data-uid"]=t.uid),t.isSelected&&(s["aria-selected"]=!0),!1===t.visible&&r.push("e-hide"),s.class=r,Ql(e,s)}}class oh{constructor(e){this.parent=e}generateRows(e,t){const s=[];let n=this.parent.enableVirtualization&&t?t.startIndex:0;n=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):n;for(let r=0,h=Object.keys(e).length;r<h;r++,n++)s[r]=this.generateRow(e[r],n);return s}ensureColumns(){const e=[];if(this.parent.detailTemplate||this.parent.childGrid){const t={};this.parent.notify(Lc,t),e.push(this.generateCell(t,null,Ys.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,Ys.RowDragIcon)),e}generateRow(e,t,s,n,r,h,m){const T={foreignKeyData:{}};T.uid=Na("grid-row"),T.data=e,T.index=t,T.indent=n,T.tIndex=h,T.isDataRow=!0,T.parentGid=r,T.parentUid=m,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?T.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(T.isExpand=this.parent.expandedRows[t].isExpand)),T.cssClass=s,T.isAltRow=!!this.parent.enableAltRow&&t%2!=0,T.isAltRow=!!this.parent.enableAltRow&&t%2!=0,T.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(T);const V=this.ensureColumns(),Y=new Ta(T,this.parent);return Y.cells="Right"===this.parent.getFrozenMode()?this.generateCells(T).concat(V):V.concat(this.generateCells(T)),Y}refreshForeignKeyRow(e){const t=this.parent.getForeignKeyColumns();for(let s=0;s<t.length;s++)(0,u.sO)(t[s].field,He(t[s],e.data),e.foreignKeyData)}generateCells(e){const t=this.parent.getColumns(),s=[];for(let n=0;n<t.length;n++)s.push(this.generateCell(t[n],e.uid,(0,u.le)(t[n].commands)?void 0:Ys.CommandColumn,null,n,e.foreignKeyData));return s}generateCell(e,t,s,n,r,h){const m={visible:e.visible,isDataCell:!(0,u.le)(e.field||e.template),isTemplate:!(0,u.le)(e.template),rowID:t,column:e,cellType:(0,u.le)(s)?Ys.Data:s,colSpan:n,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&(0,u.NA)(e.field,h)};return(m.isDataCell||"checkbox"===m.column.type||m.commands)&&(m.index=r),new na(m)}refreshRows(e){for(let t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e}getInfiniteIndex(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?e.startIndex:0}}class Kd{constructor(e){this.parent=e}getData(){const e=[],t=this.parent.aggregates.slice();for(let s=0;s<t.length;s++){const n=t[s].columns.filter(r=>!(r.footerTemplate||r.groupFooterTemplate||r.groupCaptionTemplate)||this.columnSelector(r));n.length&&e.push({columns:n})}return e}columnSelector(e){return void 0!==e.footerTemplate}getColumns(e,t){const s=[];if(this.parent.allowGrouping)for(let n=0;n<this.parent.groupSettings.columns.length;n++)s.push(new gn({}));return(this.parent.detailTemplate||!(0,u.le)(this.parent.childGrid))&&s.push(new gn({})),this.parent.isRowDragable()&&!e&&s.push(new gn({})),s.push(...this.parent.getColumns()),t=t&&!e?t+this.parent.getIndentCount():t,(0,u.le)(e)?s:s.slice(e,t)}generateRows(e,t,s,n,r){if(0===e.length&&(void 0===t||!t.count))return[];const h=this.buildSummaryData(e,t),m=[],T=this.getData();for(let V=0;V<T.length;V++)m.push(this.getGeneratedRow(T[V],h[V],t?t.level:void 0,s,n,t?t.parentUid:void 0,r));return m}getGeneratedRow(e,t,s,n,r,h,m){const T=[];let V=this.getIndentByLevel();const Y=!(0,u.le)(this.parent.childGrid),se=n?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!n&&(V=["e-indentcelltop"]);const ge=m||this.getColumns(n,r);for(let qe=0;qe<ge.length;qe++)T.push(this.getGeneratedCell(ge[qe],e,qe>=se?this.getCellType():qe<this.parent.groupSettings.columns.length?Ys.Indent:Ys.DetailFooterIntent,V[qe],Y));const ke=new Ta({data:t,attributes:{class:"e-summaryrow"}});return ke.cells=T,ke.uid=Na("grid-row"),ke.parentUid=h,ke.isAggregateRow=!0,ke.visible=T.some(qe=>qe.isDataCell&&qe.visible),ke}getGeneratedCell(e,t,s,n,r){const h=t.columns.filter(V=>V.columnName===e.field)[0],m={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};n&&(m.class=n),(0,u.le)(n)&&r&&(m.class="e-detailindentcelltop");const T={visible:e.visible,isDataCell:!(0,u.le)(h),isTemplate:h&&!(0,u.le)(h.footerTemplate||h.groupFooterTemplate||h.groupCaptionTemplate),column:h||{},attributes:m,cellType:s};return T.column.headerText=e.headerText,new na(T)}buildSummaryData(e,t){const s=[],n=this.getData();let r={};for(let h=0;h<n.length;h++){r={};const m=n[h].columns;for(let T=0;T<m.length;T++)r=this.setTemplate(m[T],t&&t.aggregates?t:e,r);s.push(r)}return s}getIndentByLevel(){return this.parent.groupSettings.columns.map(()=>"e-indentcelltop")}setTemplate(e,t,s){let n=e.type;const r={},h=e.getFormatter()||(T=>T),m=t;n instanceof Array||(n=[e.type]);for(let T=0;T<n.length;T++){const V=e.field+" - "+n[T].toLowerCase(),Y=e.columnName,se="Custom"!==n[T]&&m.aggregates&&V in m.aggregates?m.aggregates[V]:kf(n[T],m.aggregates?m:t,e,this.parent);s[Y]=s[Y]||{},s[Y][V]=se,s[Y][n[T]]=(0,u.le)(se)?" ":h(se),m.field&&(s[Y].field=m.field,s[Y].key=m.key)}return r.format=e.getFormatter(),e.setTemplate(r),s}getCellType(){return Ys.Summary}}class Ah extends Kd{columnSelector(e){return void 0!==e.groupFooterTemplate}getIndentByLevel(e=this.parent.groupSettings.columns.length){return this.parent.groupSettings.columns.map((t,s)=>s<=e-1?"":"e-indentcelltop")}getCellType(){return Ys.GroupSummary}}class Al extends Kd{columnSelector(e){return void 0!==e.groupCaptionTemplate}getData(){return[super.getData().reduce((t,s)=>(t.columns=[...t.columns,...s.columns],t),{columns:[]})]}isEmpty(){return 0===(this.getData()[0].columns||[]).length}getCellType(){return Ys.CaptionSummary}}class Jl extends oh{constructor(e){super(e),this.rows=[],this.index=0,this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.parent=e,this.summaryModelGen=new Ah(e),this.captionModelGen=new Al(e)}generateRows(e,t){if(0===this.parent.groupSettings.columns.length)return super.generateRows(e,t);this.isInfiniteScroll="infiniteScroll"===t.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(let s=0,n=e.length;s<n;s++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[s],e.level,s,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows}getGroupedRecords(e,t,s,n,r,h,m){const T=s;if((0,u.le)(t.items))if((0,u.le)(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,n,this.rows.length,m));else for(let V=0,Y=t.length;V<Y;V++)this.getGroupedRecords(e,t[V],t.level,n,e,this.rows.length,m);else{let V;const Y=this.generateCaptionRow(t,e,n,r,h,m);if(this.isInfiniteScroll&&(V=this.getPreCaption(e,Y.data.key)),V?Y.uid=V.uid:this.rows=this.rows.concat(Y),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,n,e+1,this.rows.length,Y.uid),this.parent.aggregates.length&&this.isRenderAggregate(Y)){const se=this.rows.length;this.rows.push(...this.summaryModelGen.generateRows(t,{level:T,parentUid:Y.uid}));for(let ge=se-1;ge>=0;ge--)if(this.rows[ge].isCaptionRow)this.rows[ge].aggregatesCount=this.rows.length-se;else if(!this.rows[ge].isCaptionRow&&!this.rows[ge].isDataRow)break}V&&this.setInfiniteRowVisibility(V)}}isRenderAggregate(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling}getPreCaption(e,t){const s=[...this.parent.getRowsObject(),...this.rows];let n;this.infiniteChildCount=0;let r=s.length;for(;r--&&(s[r].isCaptionRow&&s[r].indent===e&&s[r].data.key===t&&(n=s[r]),!(s[r].indent===e||s[r].indent<e));)s[r].indent===e+1&&this.infiniteChildCount++;return n}getCaptionRowCells(e,t,s){const n=[];let r=[],h=this.parent.getColumnByField(e);const m=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(h=this.parent.columns.filter(ge=>ge.field===e)[0]);const T=this.parent.groupSettings.columns.length,V=this.parent;if(!this.parent.enableColumnVirtualization||-1!==m.indexOf(t)){for(let ge=0;ge<t;ge++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,Ys.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+T+(V.detailTemplate||V.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){const ge=this.captionModelGen.generateRows(s)[0];(0,u.l7)(s,ge.data);let ke=0;ge.cells.some((qe,mt)=>(ke=mt,qe.visible&&qe.isDataCell)),r=ge.cells.slice(ke).filter(qe=>qe.visible),ge.visible&&r[0].column.field===this.parent.getVisibleColumns()[0].field&&(r=r.slice(1)),1===this.parent.getVisibleColumns().length&&(r=[]),t-=r.length}const Y=this.parent.enableColumnVirtualization?this.parent.getColumns():[h];let se=!0;for(let ge=0;ge<Y.length;ge++){const ke=se&&-1!==m.indexOf(t);ke&&(se=!1);const qe=!this.parent.enableColumnVirtualization||ke?Ys.GroupCaption:Ys.GroupCaptionEmpty;t=this.parent.enableColumnVirtualization&&qe===Ys.GroupCaption?t+T:t,V.isRowDragable()&&t++,n.push(this.generateCell(h,null,qe,t))}return n.push(...r),n}generateCaptionRow(e,t,s,n,r,h){const m={},T="records",V=this.parent.getColumnByField(e.field);m.data=(0,u.l7)({},e),V&&(m.data.field=e.field),m.isDataRow=!1,m.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),m.parentGid=s,m.childGid=n,m.tIndex=r,m.isCaptionRow=!0,m.parentUid=h,m.gSummary=(0,u.le)(e.items[T])?e.items.length:e.items[T].length,m.uid=Na("grid-row");const Y=new Ta(m);return Y.indent=t,this.getForeignKeyData(Y),Y.cells=this.getCaptionRowCells(e.field,t,Y.data),Y}getForeignKeyData(e){const t=e.data,s=this.parent.getColumnByField(t.field);if(s&&s.isForeignColumn&&s.isForeignColumn()){const n=(0,u.le)(t.key)?"":s.valueAccessor(s.foreignKeyValue,He(s,{},t.key)[0],s);(0,u.sO)("foreignKey",n,e.data)}}generateDataRows(e,t,s,n,r){const h=[],m=this.parent.getColumnIndexesInView();for(let T=0,V=e.length;T<V;T++,n++){h[T]=this.generateRow(e[T],this.index,T?void 0:"e-firstchildrow",t,s,n,r);for(let Y=0;Y<t;Y++)this.parent.enableColumnVirtualization&&-1===m.indexOf(t)||h[T].cells.unshift(this.generateIndentCell());this.index++}return h}generateIndentCell(){return this.generateCell({},null,Ys.Indent)}refreshRows(e){const t=this.parent.getColumnIndexesInView();for(let s=0;s<e.length;s++)if(e[s].isDataRow){e[s].cells=this.generateCells(e[s]);for(let n=0;n<e[s].indent;n++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[s].indent)||e[s].cells.unshift(this.generateIndentCell())}else{const n=this.generateCaptionRow(e[s].data,e[s].indent);e[s].cells=n.cells}return e}setInfiniteRowVisibility(e){if(!e.isExpand||!1===e.visible)for(const t of this.rows)t.parentUid===e.uid&&(t.visible=!1,t.isCaptionRow&&this.setInfiniteRowVisibility(t))}ensureRowVisibility(){for(let e=0;e<this.rows.length;e++){const t=this.rows[e];if(t.isCaptionRow)for(let s=e+1;s<this.rows.length;s++)t.uid===this.rows[s].parentUid&&(this.rows[s].visible=t.isExpand)}}}class Hl{constructor(e,t){this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=s=>{this.parent.notify(To,{target:s.target,droppedElement:s.droppedElement}),(0,u.Od)(s.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=s=>{const n=s;return()=>{if(this.parent.isFrozenGrid()&&this.parent.enableVirtualization){const h=s.tableName;if(this.isLoaded=this.parent.getFrozenMode()===fn?"frozen-right"===h:"movable"===h,this.parent.enableColumnVirtualization&&"virtualscroll"===s.requestType&&this.isLoaded){const m=[].slice.call(this.parent.getMovableVirtualHeader().getElementsByClassName(Lr)),T=[].slice.call(this.parent.getFrozenVirtualHeader().getElementsByClassName(Lr));this.isLoaded=m.length===T.length}}if(this.ariaService.setBusy(this.getPanel().querySelector("."+Jo),!1),this.parent.isDestroyed)return;let r=this.rows.slice(0);if(this.parent.enableInfiniteScrolling){r=this.parent.getRowsObject();const h=n.prevPage;if(this.parent.infiniteScrollSettings.enableCache&&h){const m=this.parent.infiniteScrollSettings.maxBlocks;r=[];const T=parseInt(this.rowElements[0].getAttribute("aria-rowindex"),10)+1;for(let Y=0,se=Math.ceil(T/this.parent.pageSettings.pageSize);Y<m;Y++,se++)this.infiniteCache[se]&&(r=[...r,...this.infiniteCache[se]])}}if(this.parent.isFrozenGrid()&&(r=s.isFrozen?this.freezeRows:s.renderFrozenRightContent?this.parent.getFrozenRightRowsObject():this.movableRows),this.parent.notify(F,{rows:r,args:n}),this.isLoaded&&(this.parent.isManualRefresh=!1,this.parent.trigger(Oo,{},()=>{this.parent.allowTextWrap&&this.parent.notify(wa,{case:"textwrap"})})),n){const h=(n.requestType||"").toLowerCase()+"-complete";this.parent.notify(h,n),"batchsave"===s.requestType&&(s.cancel=!1,this.parent.trigger(vn,s))}this.isLoaded&&this.parent.hideSpinner()}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(Fl,this.setVisible,this),this.parent.on(yt,this.colGroupRefresh,this),this.parent.on(H,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(th,this.beforeCellFocused,this),this.parent.on(Tr,this.droppableDestroy,this))}beforeCellFocused(e){this.pressedKey=!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?void 0:e.keyArgs.action}renderPanel(){const e=this.parent;let t=this.parent.element.querySelector("."+ll);if(t)return this.ariaService.setOptions(this.parent.element.querySelector("."+Jo),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:ll});const s=this.parent.createElement("div",{className:Jo});this.ariaService.setOptions(s,{busy:!1}),t.appendChild(s),this.setPanel(t),e.element.appendChild(t)}renderTable(){const e=this.getPanel(),t=e.querySelector(".e-virtualtable"),s=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!(0,u.le)(t)&&!(0,u.le)(s)&&((0,u.Od)(t),(0,u.Od)(s)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+yo)),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")}createContentTable(e){const t=this.getPanel().firstElementChild;this.getTable()&&(0,u.Od)(this.getTable());const s=t.querySelector("."+yo)?t.querySelector("."+yo):this.parent.createElement("table",{className:yo,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Qn).cloneNode(!0)),s.appendChild(this.getColGroup()),s.appendChild(this.parent.createElement(vs)),t.appendChild(s),t}refreshContentRows(e={}){const t=this.parent;if(0===t.currentViewData.length)return;const s=this.currentMovableRows||t.currentViewData,n=this.parent.contentModule,r=t.isReact&&!(0,u.le)(t.rowTemplate);let h=r?t.createElement(vs):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=(0,u.l7)([],s));const m=r?t.createElement(vs):document.createDocumentFragment(),T=t.getColumns();let V,Y;const se=t.getFrozenColumns(),ge=this.parent.isFrozenGrid();let ke;const qe=new Wl(this.serviceLocator,null,this.parent),mt=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;t.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];const Vt=this.getPanel().querySelector("."+ga),Qt=this.getPanel().querySelector("."+Or),ai=this.getPanel().querySelector("."+Jo);let ki,Qi,fs;vt(t)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(nn=>e.requestType===nn)&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis&&(fs=this.parent.contentModule.generateRows(s,e),e.renderMovableContent=!0),fs=this.parent.contentModule.generateRows(s,e)):(fs=this.checkCache(fs,e),!this.isAddRows&&!this.useGroupCache&&(fs=this.generator.generateRows(s,e))),this.setGroupCache(fs,e),this.parent.notify("set-infinite-cache",{isInfiniteScroll:mt,modelData:fs,args:e});const ps=fs[0].cells[0].index;ge&&(Qi=n.setTbody(fs,e),ki=n.getTbody(Qi));const Nn=this.parent.getFrozenMode()===fn&&Qi===vo;if("infiniteScroll"!==e.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen&&!Nn){const nn=[];for(let Xo=0;Xo<this.parent.registeredTemplate.template.length;Xo++)for(let zo=0;zo<this.parent.registeredTemplate.template[Xo].rootNodes.length;zo++)(0,u.le)(this.parent.registeredTemplate.template[Xo].rootNodes[zo].parentNode)&&nn.push(this.parent.registeredTemplate.template[Xo]);this.parent.destroyTemplate(["template"],nn)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===e.requestType||e.isFrozen||Pp(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new vd(this.serviceLocator,this.parent).updateVirtualCells(fs),ge||(this.tbody=this.getTable().querySelector(vs));let fr=0,rr=!0;if(vt(t)&&t.vcRows.length){const nn="top",Xo=(0,u.le)(e.virtualInfo.offsets)?(0,u.le)(e.scrollTop)?0:e.scrollTop[nn]:e.virtualInfo.offsets.top;if(0!==Xo){const zo=t.vGroupOffsets,fl=t.pageSettings.pageSize/2,bl=Object.keys(zo).map(yl=>zo[yl]);for(let yl=0;yl<bl.length;yl++)if(Xo<bl[yl]){if((0,u.le)(e.virtualInfo)||"up"!==e.virtualInfo.direction){fr=yl*fl,(this.parent.contentModule.isEndBlock(yl)||this.parent.contentModule.isEndBlock(yl+1))&&(e.virtualInfo.blockIndexes=[yl,yl+1]);break}fr=yl>0?(yl-1)*fl:yl*fl;break}Math.round(Xo+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(rr=!1)}}const xr=t.frozenRows&&!t.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(t.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||xr){const nn=e.virtualInfo.blockIndexes,Xo=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],xr&&(e.virtualInfo.page=1);const fl=this.vgenerator.generateRows(xr?this.initialPageRecords:s,e);fl.splice(this.parent.frozenRows);for(let bl=0;bl<this.parent.frozenRows;bl++)fl[bl].cells.splice(0,this.parent.getFrozenColumns()),V=qe.render(fl[bl],T),m.appendChild(V);e.virtualInfo.blockIndexes=nn,e.virtualInfo.page=Xo,xr&&1===e.virtualInfo.page&&fs.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(m,fs,qe,e,s,T);for(let nn=fr,Xo=fs.length;nn<Xo;nn++)if(this.rows.push(fs[nn]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.setRowsInLazyGroup(fs[nn],nn),!(0,u.le)(fs[nn].indent))){if(this.setInfiniteVisibleRows(e,fs[nn],Qi),vt(t)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&this.rowElements.length>=e.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&rr){this.parent.currentViewData.records=this.rows.map(zo=>zo.data);break}if(t.rowTemplate){const zo=t.element.id+"rowTemplate";let fl;if(t.isReact){const yl=t.frozenRows&&nn<t.frozenRows,ya=(0,u.l7)({index:nn},s[nn]);t.getRowTemplate()(ya,t,"rowTemplate",zo,null,null,yl?m:h),t.renderTemplates()}else fl=t.getRowTemplate()((0,u.l7)({index:nn},s[nn]),t,"rowTemplate",zo);if(t.isReact||"TBODY"!==fl[0].tagName)t.frozenRows&&nn<t.frozenRows?V=t.isReact?m.lastElementChild:Dl(m,fl):(t.isReact||(V=Dl(h,fl)),ke=t.isReact?h.lastElementChild:V.lastElementChild);else{for(let yl=0;yl<fl.length;yl++){const ya="tr"===fl[yl].nodeName.toLowerCase();(ya||fl[yl].querySelectorAll&&fl[yl].querySelectorAll("tr").length)&&(V=ya?fl[yl]:fl[yl].querySelector("tr"))}t.frozenRows&&nn<t.frozenRows?m.appendChild(V):h.appendChild(V)}this.parent.trigger(el,{data:fs[nn].data,row:ke||V})}else{V=qe.render(fs[nn],T);const zo=this.ensureFrozenHeaderRender(e);t.frozenRows&&nn<t.frozenRows&&!mt&&"virtualscroll"!==e.requestType&&zo&&this.ensureVirtualFrozenHeaderRender(e)?m.appendChild(V):h.appendChild(V),fs[nn].isExpand&&t.notify("expandchildgrid",V.cells[t.groupSettings.columns.length])}fs[nn].isDataRow&&this.rowElements.push(V),this.ariaService.setOptions(this.getTable(),{colcount:t.getColumns().length.toString()})}if(ge&&n.splitRows(Qi),t.frozenRows&&"virtualscroll"!==e.requestType&&!mt&&this.ensureVirtualFrozenHeaderRender(e)||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)if(Y=ge?n.getFrozenHeader(Qi):t.getHeaderTable().querySelector(vs),r){const nn=Y.parentElement;(0,u.Od)(Y),nn.appendChild(m)}else Y.innerHTML="",Y.appendChild(m);!t.enableVirtualization&&t.frozenRows&&0===ps&&ai.offsetHeight===Number(t.height)&&(ai.style.height=ai.offsetHeight-Y.offsetHeight+"px"),e.rows=this.rows.slice(0),ge&&n.setIsFrozen(e,Qi),this.index=ps,Rf(()=>{this.parent.notify(af,e);const nn=this.parent.enableVirtualization&&this.parent.isFrozenGrid();if(!this.parent.enableVirtualization&&!mt&&(this.parent.isFrozenGrid()?((0,u.Od)(n.getTbody(Qi)),ki=this.parent.createElement(vs)):(this.tbody.innerHTML="",(0,u.Od)(this.tbody),this.tbody=this.parent.createElement(vs))),!ge||nn||this.parent.enableInfiniteScrolling)if(t.rowTemplate&&(0,u.tx)(t.element.id+"rowTemplate","RowTemplate",t),nn){if(e.renderFrozenRightContent){const Xo=t.getContent().querySelector(".e-frozen-right-content").querySelector(vs);this.appendContent(Xo,h,e)}else e.renderMovableContent?(this.appendContent(Qt.querySelector(vs),h,e),e.renderMovableContent=!1):this.appendContent(Vt.querySelector(vs),h,e);this.parent.getFrozenColumns()||n.renderNextFrozentPart(e,Qi)}else!(0,u.le)(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling?(this.isAddRows=!1,this.parent.notify("remove-infinite-rows",{args:e}),this.parent.notify("append-infinite-content",{tbody:ki||this.tbody,frag:h,args:e,rows:this.rows,rowElements:this.rowElements,visibleRows:this.visibleRows,tableName:Qi}),!se&&ge&&(t.getFrozenMode()!==fn&&(Qi===Qo||Qi===vo)||t.getFrozenMode()===fn&&(Qi===Qo||"movable"===Qi))&&this.refreshContentRows((0,u.l7)({},e))):(this.useGroupCache=!1,this.appendContent(this.tbody,h,e));else this.appendContent(ki,h,e,Qi);se&&n.renderNextFrozentPart(e,Qi),h=null},this.rafCallback((0,u.l7)({},e)))}emptyVcRows(){this.parent.vcRows=[],this.parent.vRows=[]}appendContent(e,t,s,n){this.parent.isReact&&!(0,u.le)(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e))}setRowsInLazyGroup(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(e,t)}setGroupCache(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:t,data:e})}ensureFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)}ensureVirtualFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)}checkCache(e,t){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType){const s=t.isFrozen?1:0,n=this.parent.isFrozenGrid();if(this.isAddRows=!(0,u.le)(this.infiniteCache[this.parent.pageSettings.currentPage]),n&&!(0,u.le)(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][s].length),this.isAddRows){const r=n?this.infiniteCache[this.parent.pageSettings.currentPage][s]:this.infiniteCache[this.parent.pageSettings.currentPage];e=1===this.parent.pageSettings.currentPage?r.slice(this.parent.frozenRows):r}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null}setInfiniteVisibleRows(e,t,s){const n=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(n?s===Qo||"Right"===this.parent.getFrozenMode()&&s===vo?this.visibleFrozenRows.push(t):"movable"===s?this.visibleRows.push(t):this.rightFreezeRows.push(t):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(t))}getCurrentBlockInfiniteRecords(e){let t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];const s=this.parent.isFrozenGrid(),n=this.parent.getRows();let r=parseInt(n[this.parent.frozenRows].getAttribute(xn),10);const h=Math.ceil((r+1)/this.parent.pageSettings.pageSize);r=parseInt(n[n.length-1].getAttribute(xn),10);const m=Math.ceil(r/this.parent.pageSettings.pageSize);if(s){const T=e?0:1;for(let V=h;V<=m;V++)t=t.length?t.concat(this.infiniteCache[V][T]):this.infiniteCache[V][T];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1][T].slice(0,this.parent.frozenRows).concat(t))}else{for(let T=h;T<=m;T++)t=t.length?t.concat(this.infiniteCache[T]):this.infiniteCache[T];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}}return t}getReorderedVFRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}getReorderedRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}virtualFrozenHdrRefresh(e,t,s,n,r,h){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===n.requestType||"refresh"===n.requestType)){let m,T=[];this.parent.isFrozenGrid()?(this.currentMovableRows=r,T=this.getReorderedVFRows(n)):T=this.getReorderedRows(n);for(let V=0;V<T.length;V++)m=s.render(T[V],h),e.appendChild(m);1===n.virtualInfo.page&&t.splice(0,this.parent.frozenRows),n.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}}getInfiniteRows(){let e=[];const t=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache){const s=Object.keys(this.infiniteCache);for(let n=0;n<s.length;n++)e=t?[...e,...this.infiniteCache[s[n]][0]]:[...e,...this.infiniteCache[s[n]]]}else e=t?this.visibleFrozenRows:this.visibleRows;return e}getInfiniteMovableRows(){const e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]}getPanel(){return this.contentPanel}setPanel(e){this.contentPanel=e}getTable(){return this.contentTable}setTable(e){this.contentTable=e}getRows(){const e=this.getInfiniteRows();return e.length?e:this.parent.getFrozenColumns()?this.freezeRows:this.rows}getMovableRows(){const e=this.getInfiniteMovableRows();return e.length?e:this.movableRows}getRowElements(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements}getMovableRowElements(){return this.rowElements}setRowElements(e){this.rowElements=e}getColGroup(){return this.colgroup}setColGroup(e){return(0,u.le)(e)||(e.id="content-"+e.id),this.colgroup=e}setVisible(e){const t=this.parent,s=this.parent.isFrozenGrid(),n=t.getFrozenColumns();let h,r=[];if(s){const ge=this.freezeRows,ke=this.movableRows,qe=ge.length;let mt,Vt=[];t.getFrozenMode()===fn&&(Vt=t.getFrozenRightRowsObject());for(let ai,Qt=0;Qt<qe;Qt++){mt=ke[Qt].cells.length;const ki=Vt.length?Vt[Qt].cells.length:0;ai=ge[Qt].clone();for(let Qi=0;Qi<mt;Qi++)ai.cells.push(ke[Qt].cells[Qi]);for(let Qi=0;Qi<ki;Qi++)ai.cells.push(Vt[Qt].cells[Qi]);r.push(ai)}}else r=this.getRows();r.some(ge=>(ge.isDataRow&&(h=ge),ge.isDataRow));let m=!0;!t.groupSettings.columns.length&&h&&(m=!1);let T=t.getDataRows(),se=this.infiniteRowVisibility()||this.rows.filter(ge=>!ge.isDetailRow);for(let ge=0,ke=e.length;ge<ke;ge++){const qe=e[ge];let mt=this.parent.getNormalizedColumnIndex(qe.uid),Vt=this.parent.getColumnIndexByUid(qe.uid);const Qt=!0===qe.visible?"":"none";if(-1!==mt&&h&&mt<h.cells.length)if(s)if("movable"!==qe.getFreezeTableName())if(qe.getFreezeTableName()===vo){Vt=mt-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount();const Qi=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(Qn);(0,u.V7)(Qi.childNodes[mt],{display:Qt}),se=t.getFrozenRightRowsObject(),T=t.getFrozenRightDataRows()}else(0,u.V7)(this.getColGroup().childNodes[mt],{display:Qt}),se=this.infiniteRowVisibility(!0)||this.freezeRows,T=t.getDataRows();else{const ai=t.getContent().querySelector("."+Or).querySelector(Qn);Vt=mt=mt-n-this.parent.getFrozenLeftColumnsCount(),(0,u.V7)(ai.childNodes[mt],{display:Qt}),T=t.getMovableDataRows(),se=this.infiniteRowVisibility()||this.movableRows}else(0,u.V7)(this.getColGroup().childNodes[mt],{display:Qt});m||(this.setDisplayNone(T,Vt,Qt,se),se[0].cells[Vt].isTemplate&&(m=!0)),!this.parent.invokedFromMedia&&qe.hideAtMedia&&this.parent.updateMediaColumns(qe),this.parent.invokedFromMedia=!1}m?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(Rc,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(Rc,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(Rc,{rows:se,args:{}})}setDisplayNone(e,t,s,n){(function Lm(b,e,t,s,n,r){const h=Object.keys(b);for(let m=0;m<h.length;m++){const T=b[h[m]].querySelectorAll("td.e-rowcell")[e];if(b[h[m]].querySelectorAll("td.e-rowcell").length&&T)if((0,u.V7)(b[h[m]].querySelectorAll("td.e-rowcell")[e],{display:t}),b[h[m]].querySelectorAll("td.e-rowcell")[e].classList.contains("e-hide")&&(0,u.IV)([b[h[m]].querySelectorAll("td.e-rowcell")[e]],["e-hide"]),r&&n.isRowDragable()){const V=n.getFrozenColumns()?e:e+1;s[h[m]].cells[V].visible=""===t}else s[h[m]].cells[e].visible=""===t}})(e,t,s,n,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:s,index:t,isFreeze:this.isInfiniteFreeze})}infiniteRowVisibility(e){let t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?e?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t}colGroupRefresh(){if(this.getColGroup()){let e;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(Qn).cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}}getHeaderColGroup(){return this.parent.element.querySelector("."+rl).querySelector(Qn).cloneNode(!0)}initializeContentDrop(){this.droppable=new u.bK(this.parent.element,{accept:".e-dragclone",drop:this.drop})}droppableDestroy(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()}canSkip(e,t,s){return(0,u.le)(t)||(0,u.le)(e.visible)||t.cells[s].visible===e.visible}getModelGenerator(){return this.generator=this.parent.allowGrouping?new Jl(this.parent):new oh(this.parent)}renderEmpty(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(vs).innerHTML="")}setSelection(e,t,s){this.parent.notify("set-freeze-selection",{uid:e,set:t,clearAll:s});const n=this.parent.isFrozenGrid();if(n&&this.parent.enableVirtualization)return;if(n){const h=this.getMovableRows().filter(m=>s||e===m.uid);for(let m=0;m<h.length;m++)h[m].isSelected=t}const r=this.getRows().filter(h=>s||e===h.uid);for(let h=0;h<r.length;h++){r[h].isSelected=t;const m=r[h].cells;for(let T=0;T<m.length;T++)m[T].isSelected=t}}getRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getDataRows()[e]}getInfiniteRowIndex(e){if(this.parent.infiniteScrollSettings.enableCache){const t=this.parent.frozenRows,s=t>e?0:t,n=parseInt(this.parent.getRows()[s].getAttribute(xn),10);e=t>e?e:e-n+t}return e}getVirtualRowIndex(e){return e}getMovableRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getMovableDataRows()[e]}enableAfterRender(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())}setRowObjects(e){this.rows=e}immutableModeRendering(e={}){const t=this.parent;t.hideSpinner();const s=t.getPrimaryKeyFieldNames()[0],n={},r={},h=[],m={},T=t.getRowsObject().slice(),V=this.getBatchEditedRecords(s,T),Y={},se=0!==Object.keys(V).length;if(t.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(0===t.currentViewData.length)return;const ge={},ke=t.createElement(vs),qe=t.currentViewData,mt=[].slice.call(this.getTable().querySelector(vs).children);if(this.prevCurrentView.length){const Vt=this.prevCurrentView.length,Qt=qe.length;if(Vt===Qt)for(let ai=0;ai<Qt;ai++)"Batch"===this.parent.editSettings.mode&&mt[ai].classList.contains("e-insertedrow")?(mt.splice(ai,1),--ai):(r[qe[ai][s]]=n[this.prevCurrentView[ai][s]]=ai,Y[ai]=qe[ai][s],ge[T[ai].uid]=mt[ai],m[ai]=this.prevCurrentView[ai][s]);else{for(let ai=0;ai<Qt;ai++)r[qe[ai][s]]=ai,Y[ai]=qe[ai][s];for(let ai=0;ai<Vt;ai++)"Batch"===this.parent.editSettings.mode&&mt[ai].classList.contains("e-insertedrow")?(mt.splice(ai,1),--ai):(ge[T[ai].uid]=mt[ai],n[this.prevCurrentView[ai][s]]=ai,m[ai]=this.prevCurrentView[ai][s])}}for(let Vt=0;Vt<qe.length;Vt++){const Qt=n[qe[Vt][s]];if((0,u.le)(Qt)){const ai=new Wl(this.serviceLocator,null,t),ki=this.generator.generateRows([qe[Vt]]);h.push(ki[0]);const Qi=ai.render(ki[0],t.getColumns());ke.appendChild(Qi),this.refreshImmutableContent(Vt,Qi,h[Vt])}else{let ai=!1;this.parent.enableDeepCompare&&(ai=this.objectEqualityChecker(this.prevCurrentView[Qt],qe[Vt]));const ki=ge[T[Qt].uid];if(h.push(T[Qt]),this.rowElements[Qt]&&this.rowElements[Qt].getAttribute("data-uid")===h[Vt].uid&&(se&&(0,u.le)(V[Y[Vt]])||!se&&(ai||this.prevCurrentView[Qt]===qe[Vt]))){Qt!==Vt&&this.refreshImmutableContent(Vt,ki,h[Vt]),ke.appendChild(ki);continue}(se&&!(0,u.le)(V[Y[Vt]])||!this.parent.enableDeepCompare&&qe[Vt]!==this.prevCurrentView[Qt]||this.parent.enableDeepCompare&&!ai)&&T[Qt].setRowValue(qe[Vt]),ke.appendChild(ki),this.refreshImmutableContent(Vt,ki,h[Vt])}}if(this.rows=h,this.rowElements=[].slice.call(ke.children),(0,u.Od)(this.getTable().querySelector(vs)),this.getTable().appendChild(ke),this.parent.trigger(Oo,{},()=>{this.parent.allowTextWrap&&this.parent.notify(wa,{case:"textwrap"})}),e){const Vt=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(Vt,e)}}}objectEqualityChecker(e,t){const s=Object.keys(e);let n=!0;for(let r=0;r<s.length;r++)if(!(e[s[r]]===t[s[r]]||e[s[r]]instanceof Date&&t[s[r]]instanceof Date&&e[s[r]].getTime()===t[s[r]].getTime())){n=!1;break}return n}getBatchEditedRecords(e,t){const s={},n=this.parent.getBatchChanges();let r=[],h=[];Object.keys(n).length&&(r=n.changedRecords,h=n.addedRecords);const m={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:t,args:m}),h.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,h.length):m.cancel||t.splice(0,h.length));for(let T=0;T<r.length;T++)s[r[T][e]]=T;return s}refreshImmutableContent(e,t,s){s.isAltRow=!!this.parent.enableAltRow&&e%2!=0,s.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),s.index=e,s.edit=void 0,s.isDirty=!1,t.setAttribute(xn,e.toString()),this.updateCellIndex(t,e)}updateCellIndex(e,t){for(let s=0;s<e.cells.length;s++)e.cells[s].setAttribute("index",t.toString())}}class Ul{constructor(e,t){this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=s=>{const n=this.parent,r=this.draggable.currentStateTarget,h=Zi(r,"e-headercell");if(!n.allowReordering&&!n.allowGrouping||!(0,u.le)(h)&&h.getElementsByClassName("e-checkselectall").length>0)return!1;const m=this.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),T=r.classList.contains("e-headercell")?r:h;if(!T||!n.allowReordering&&T.classList.contains("e-stackedheadercell"))return!1;const V=T.offsetHeight,Y=T.querySelector(".e-headercelldiv")||T.querySelector(".e-stackedheadercelldiv");let se;if(Y){if(se=T.querySelector(".e-stackedheadercelldiv")?n.getStackedHeaderColumnByHeaderText(Y.innerText.trim(),n.columns):n.getColumnByUid(Y.getAttribute("e-mappinguid")),this.column=se,this.column.lockColumn)return!1;m.setAttribute("e-mappinguid",this.column.uid)}if(se&&!(0,u.le)(se.headerTemplate))if((0,u.le)(se.headerTemplate))m.innerHTML=se.headerTemplate;else{const ge=n.getColumnIndexByField(se.field);Dl(m,se.getHeaderTemplate()((0,u.l7)({index:ge},se),n,"headerTemplate"))}else m.innerHTML=Y?se.headerText:T.firstElementChild.innerHTML;return m.style.width=T.offsetWidth+"px",m.style.height=T.offsetHeight+"px",m.style.lineHeight=(V-6).toString()+"px",n.element.appendChild(m),m},this.dragStart=s=>{const n=this.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify(Xr,{target:this.draggable.currentStateTarget,column:this.column,event:s.event})},this.drag=s=>{const n=this.parent,r=s.target;if(r){const h=(0,u.oq)(r,".e-grid"),m=this.parent.element.querySelector(".e-cloneproperties");if(!(h&&h.getAttribute("id")===n.element.getAttribute("id")||((0,u.s1)(m,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),n.groupSettings.allowReordering)))return;n.notify(nl,{target:s.target,column:this.column,event:s.event})}},this.dragStop=s=>{const n=this.parent;let r;n.element.querySelector(".e-gridpopup").style.display="none",(!Zi(s.target,"e-headercell")&&!Zi(s.target,"e-groupdroparea")||!n.allowReordering&&Zi(s.target,"e-headercell")||!s.helper.getAttribute("e-mappinguid")&&Zi(s.target,"e-groupdroparea"))&&((0,u.Od)(s.helper),r=!0),n.notify("column-drag-stop",{target:s.target,event:s.event,column:this.column,cancel:r})},this.drop=s=>{const n=this.parent,r=s.droppedElement.getAttribute("e-mappinguid"),h=(0,u.oq)(s.target,".e-grid");(0,u.Od)(s.droppedElement),!(h&&h.getAttribute("id")!==n.element.getAttribute("id")||!n.allowReordering&&!n.allowGrouping)&&n.notify(Pd,{target:s.target,uid:r,droppedElement:s.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.getFrozenLeftColumnsCount()&&!this.parent.getFrozenRightColumnsCount()&&this.parent.on(Fl,this.setVisible,this),this.parent.on(Ph,this.colPosRefresh,this),this.parent.on(it,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(H,this.updateCustomResponsiveToolbar,this))}renderPanel(){let e=this.parent.element.querySelector("."+rl);const t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});const s=t?e.querySelector("."+Lo):this.parent.createElement("div",{className:Lo});this.toggleStackClass(e),e.appendChild(s),this.setPanel(e),t||this.parent.element.appendChild(e)}renderTable(){const e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+yo)),!this.parent.getFrozenColumns()&&!this.parent.getFrozenRightColumnsCount()&&!this.parent.getFrozenLeftColumnsCount()&&(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(ei,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})}getPanel(){return this.headerPanel}setPanel(e){this.headerPanel=e}getTable(){return this.headerTable}setTable(e){this.headerTable=e}getColGroup(){return this.colgroup}setColGroup(e){return this.colgroup=e}getRows(){return this.getTable().tHead.rows}createHeaderTable(){const e=this.createTable(),t=this.getPanel().querySelector("."+Lo);return t.appendChild(e),t}createHeader(e=null,t){const s=this.parent,n=s.isFrozenGrid();this.getTable()&&!n&&(0,u.Od)(this.getTable());const r=this.parent.createElement("table",{className:yo,attrs:{cellspacing:"0.25px",role:"grid"}}),h=t||(s.getFrozenLeftCount()?"frozen-left":"frozen-right"),m=this.createHeaderContent(h),T=m.thead,V=this.parent.createElement(vs,{className:this.parent.frozenRows?"":"e-hide"});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});const Y=this.parent.createElement(Qn),se=this.parent.createElement("tr");let ge;const ke=this.rows=m.rows;for(let qe=0,mt=ke.length;qe<mt;qe++)for(let Vt=0,Qt=ke[qe].cells.length;Vt<Qt;Vt++)ge=this.parent.createElement("td"),se.appendChild(ge);return(s.allowFiltering||s.allowSorting||s.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(Y),V.appendChild(se),r.appendChild(this.setColGroup(Y)),r.appendChild(T),r.appendChild(V),r.appendChild(this.caption),this.ariaService.setOptions(r,{colcount:s.getColumns().length.toString()}),r}createTable(e=null){return this.createHeader(e)}createHeaderContent(e){const t=this.parent;let s=1;const n=t.getFrozenMode(),r=t.getColumns(),h=this.parent.createElement("thead"),m=this.parent.createElement("tr",{className:"e-columnheader"}),T=new Wl(this.serviceLocator,Ys.Header,t);T.element=m;let Y,V=[];this.colDepth=Fn(t.columns);for(let ke=0,qe=this.colDepth;ke<qe;ke++)V[ke]=this.generateRow(ke),V[ke].cells=[];"Right"!==n&&(V=this.ensureColumns(V)),V=this.getHeaderCells(V,e),"Right"===n&&(s=0,V=this.ensureColumns(V));const se=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&V[0].cells[s]){const ke=V[0].cells[s].column.getFreezeTableName();"movable"===ke||n===fn&&ke===vo?"Right"===n?V[0].cells.pop():V[0].cells.shift():se||ke!==Qo?"Right"===n&&ke===vo&&(V[0].cells[V[0].cells.length-1].column.freeze="Right"):V[0].cells[0].column.freeze=ke===Qo?"Left":"Right"}for(let ke=0,qe=this.colDepth;ke<qe;ke++)Y=T.render(V[ke],r),this.parent.rowHeight&&Y.querySelector(".e-headercell")&&(Y.style.height=this.parent.rowHeight+"px"),h.appendChild(Y);return{thead:h,rows:V}}updateColGroup(e){let s,t=this.parent.getColumns();const n=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(t=(0,u.l7)([],this.parent.getColumns()),t.splice(0,this.parent.getFrozenColumns())),e.id=this.parent.element.id+Qn,this.parent.allowGrouping)for(let r=0,h=this.parent.groupSettings.columns.length;r<h;r++)this.parent.enableColumnVirtualization&&-1===n.indexOf(r)||(s=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(s));(this.parent.detailTemplate||this.parent.childGrid)&&(s=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(s)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(s=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(s));for(let r=0,h=t.length;r<h;r++)s=this.parent.createElement("col"),!1===t[r].visible&&(0,u.V7)(s,{display:"none"}),e.appendChild(s);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(s=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(s)),e}ensureColumns(e){const t=this.parent,s=this.parent.getColumnIndexesInView();for(let n=0,r=e.length;n<r;n++){if(t.allowGrouping)for(let h=0,m=t.groupSettings.columns.length;h<m;h++)this.parent.enableColumnVirtualization&&-1===s.indexOf(h)||e[n].cells.push(this.generateCell({},Ys.HeaderIndent));if(t.detailTemplate||t.childGrid){const h={};this.parent.notify(Lc,h),e[n].cells.push(this.generateCell(h,Ys.DetailHeader))}t.isRowDragable()&&e[n].cells.push(this.generateCell({},Ys.RowDragHIcon))}return e}getHeaderCells(e,t){const s=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),n=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(let r=0;r<n.length;r++)this.lockColsRendered=!1,e=this.appendCells(n[r],e,0,0===r,!1,r===n.length-1,s,t,!1);for(let r=0,h=n.length;r<h;r++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(n[r],e,0,0===r,!1,r===h-1,s,t,!1);return e}appendCells(e,t,s,n,r,h,m,T,V){const Y=h?V?"e-laststackcell":"e-lastcell":"",se=this.parent.isFrozenGrid(),ge=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,ke=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,qe=this.parent.getContent().querySelector(".e-movablescrollbar");let mt;if(se&&qe&&this.parent.enableColumnVirtualization&&(mt=qe.scrollLeft),e.columns){this.isFirstCol=!1;const Vt=this.getCellCnt(e,0);if(Vt){const Qt=this.getStackedLockColsCount(e,0),ai=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==Qt||this.lockColsRendered&&Vt-Qt!=0,ki=se&&this.ensureStackedFrozen(e.columns,T,!1);(!se&&ai||ki)&&t[s].cells.push(new na({cellType:Ys.StackedHeader,column:e,colSpan:this.getColSpan(Vt,Qt,e.columns,T,se),className:n?"":r?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(let Qt=0;Qt<e.columns.length;Qt++)t=this.appendCells(e.columns[Qt],t,s+1,n,0===Qt,Qt===e.columns.length-1&&h,m,T,!1);if(this.lockColsRendered)for(let Qt=0,ai=e.columns.length;Qt<ai;Qt++){n=n&&0===Qt;const ki=this.isFirstCol=e.columns[Qt].visible&&!n,Qi=Qt===ai-1&&h;t=this.appendCells(e.columns[Qt],t,s+1,n,ki&&!Qi,Qi,m,T,!0)}}else(mt&&mt>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===e.getFreezeTableName()||!se&&ge||se&&e.getFreezeTableName()===T&&ke)&&t[s].cells.push(this.generateCell(e,Ys.Header,this.colDepth-s,(n?"":r?"e-firstcell":"")+Y,s,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t}ensureStackedFrozen(e,t,s){const n=e.length;for(let r=0;r<n;r++)if(e[r].columns)s=this.ensureStackedFrozen(e[r].columns,t,s);else if(e[r].getFreezeTableName()===t){s=!0;break}return s}getStackedLockColsCount(e,t){if(e.columns)for(let s=0;s<e.columns.length;s++)t=this.getStackedLockColsCount(e.columns[s],t);else e.lockColumn&&t++;return t}getColSpan(e,t,s,n,r){return r?e=this.getFrozenColSpan(s,n,0):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-t:t),e}getFrozenColSpan(e,t,s){const n=e.length;for(let r=0;r<n;r++)e[r].columns?s=this.getFrozenColSpan(e[r].columns,t,s):e[r].getFreezeTableName()===t&&e[r].visible&&s++;return s}generateRow(e){return new Ta({})}generateCell(e,t,s,n,r,h){const m={visible:e.visible,isDataCell:!1,isTemplate:!(0,u.le)(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:s,className:n,index:r,colIndex:h};return(!m.rowSpan||m.rowSpan<2)&&delete m.rowSpan,new na(m)}setVisible(e){const t=this.parent;let s,n;const r=t.getFrozenColumns();for(let h=0,m=e.length;h<m;h++){const T=e[h];if(n=t.getNormalizedColumnIndex(T.uid),s=T.visible?"":"none",r){const V=this.parent.isRowDragable()?r+1:r;if(n<V)(0,u.V7)(this.getColGroup().children[n],{display:s});else{const Y=t.getHeaderContent().querySelector("."+io).querySelector(Qn);(0,u.V7)(Y.children[n-V],{display:s})}}else(0,u.V7)(this.getColGroup().children[n],{display:s})}this.refreshUI()}colPosRefresh(){this.refreshUI()}refreshUI(){const e=this.parent.isFrozenGrid(),t=this.parent.enableColumnVirtualization&&e,s=this.getPanel();this.toggleStackClass(s);let n=this.freezeReorder?this.headerPanel.querySelector("."+io).querySelector("."+yo):this.getTable(),r=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(t&&(n=this.parent.contentModule.getVirtualFreezeHeader(),r=this.parent.contentModule.isXaxis()?"movable":r),n){(0,u.Od)(n),n.removeChild(n.firstChild),n.removeChild(n.childNodes[0]);const h=this.parent.createElement(Qn),m=this.createHeaderContent(r);this.rows=m.rows,n.insertBefore(m.thead,n.firstChild),this.updateColGroup(h),n.insertBefore(this.setColGroup(h),n.firstChild),t||this.setTable(n),this.appendContent(n),this.parent.notify(yt,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();const T=[].slice.call(s.querySelectorAll("tr.e-columnheader"));for(const V of T){const Y=[].slice.call(V.getElementsByClassName("e-grouptopleftcell"));Y.length&&Y[Y.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify(ei,{rows:this.rows,args:{isFrozen:e}}),this.parent.enableColumnVirtualization&&Zi(n,io)&&this.parent.notify(ei,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&aa(T,!0)}}toggleStackClass(e){this.parent.columns.some(n=>!(0,u.le)(n.columns))?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")}appendContent(e){this.getPanel().querySelector("."+Lo).appendChild(e)}getCellCnt(e,t){if(e.columns)for(let s=0,n=e.columns.length;s<n;s++)t=this.getCellCnt(e.columns[s],t);else e.visible&&t++;return t}initializeHeaderDrag(){!(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)||(this.draggable=new u._l(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))}initializeHeaderDrop(){new u.bK(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})}renderCustomToolbar(){const e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){const t=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),s=e.createElement("div",{className:"e-toolbar-items"}),n=e.createElement("div",{className:"e-toolbar-left"}),r=this.parent.allowFiltering&&this.parent.allowSorting?2:1;for(let h=0;h<r;h++){const m=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),T=1===r?this.parent.allowSorting?"sort":"filter":1===h?"sort":"filter",V=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),Y=e.createElement("span",{className:"e-btn-icon e-res"+T+"-icon e-icons"});V.appendChild(Y),new z.zx({}).appendTo(V),V.onclick=ge=>{ge.target.classList.contains("e-ressort-btn")||ge.target.classList.contains("e-ressort-icon")?this.parent.showResponsiveCustomSort():this.parent.showResponsiveCustomFilter()},m.appendChild(V),n.appendChild(m)}s.appendChild(n),t.appendChild(s),e.element.insertBefore(t,this.parent.element.querySelector("."+rl))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")}updateCustomResponsiveToolbar(e){const t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?(0,u.Od)(t):this.renderCustomToolbar())}}class Uo{constructor(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:Cr,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":"checkbox"}})}getGui(){return""}format(e,t,s){return(0,u.le)(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),t=this.formatter.toView(t,e.getFormatter())),(0,u.le)(t)?"":t.toString()}evaluate(e,t,s,n,r,h){let m;if(t.column.template){const T=this.parent.isReact&&"string"!=typeof t.column.template,V=["index"],Y=Hs({},s,{[uu]:r,column:t.column}),se=this.parent.element.id+t.column.uid,ge="isStringTemplate";if(T){const ke={index:n[V[0]]};t.column.getColumnTemplate()((0,u.l7)(ke,Y),this.parent,"columnTemplate",se,this.parent[ge],null,e),this.parent.renderTemplates()}else m=t.column.getColumnTemplate()((0,u.l7)({index:n[V[0]]},Y),this.parent,"template",se,this.parent[ge]);return T||Dl(e,m),this.parent.notify("template-result",{template:m}),m=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0}invokeFormatter(e,t,s){return(0,u.le)(e.formatter)||(t=function If(b,e){return b.prototype&&e in b.prototype}(e.formatter,"getValue")?(new(0,e.formatter)).getValue(e,s):"function"==typeof e.formatter?e.formatter(e,s):e.formatter.getValue(e,s)),t}render(e,t,s,n,r){return this.refreshCell(e,t,s,r)}refreshTD(e,t,s,n){const r="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){e.innerHTML="";const h=e.cellIndex,m=e.parentElement;(0,u.Od)(e);const T=this.refreshCell(t,s,n,r);this.cloneAttributes(T,e),m.cells.length!==h-1?m.insertBefore(T,m.cells[h]):m.appendChild(T)}else{const h=this.refreshCell(t,s,n,r);e.innerHTML="",e.setAttribute("aria-label",h.getAttribute("aria-label"));const m=[].slice.call(h.childNodes);for(const T of m)e.appendChild(T)}}cloneAttributes(e,t){const s=t.attributes;let r,n=s.length;for(;n--;)r=s[n],e.setAttribute(r.name,r.value)}refreshCell(e,t,s,n){const r=this.element.cloneNode(),h=e.column;let m;e.isForeignKey&&(m=e.foreignKeyData[0]||{[h.foreignKeyValue]:h.format?null:""});let T=this.getGui(),V=e.isForeignKey?this.getValue(h.foreignKeyValue,m,h):this.getValue(h.field,t,h);if(("date"===h.type||"datetime"===h.type)&&!(0,u.le)(V)&&(V=new Date(V)),V=this.format(h,V,t),T=V.toString(),"boolean"===h.type&&!h.displayAsCheckBox){const se="true"!==V&&"false"!==V?null:"true"===V?"True":"False";T=se?this.localizer.getConstant(se):T}const Y=this.invokeFormatter(h,V,t);if(T=(0,u.le)(h.formatter)?T:(0,u.le)(Y)?"":Y.toString(),r.setAttribute("aria-label",T+" column header "+e.column.headerText),this.evaluate(r,e,t,s,m,n)&&"checkbox"!==h.type)this.appendHtml(r,T,h.getDomSetter?h.getDomSetter():"innerHTML");else if("checkbox"===h.type){r.classList.add(Sh),r.setAttribute("aria-label","checkbox"),V=!!this.parent.selectionSettings.persistSelection&&"true"===V;const se=(0,z.eE)(this.parent.createElement,!1,{checked:V,label:" "});this.rowChkBox.id="checkbox-"+e.rowID,se.insertBefore(this.rowChkBox.cloneNode(),se.firstChild),r.appendChild(se)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(r,e,s),"boolean"===h.type&&h.displayAsCheckBox){const se=isNaN(parseInt(V.toString(),10))?"true"===V:parseInt(V.toString(),10)>0,ge=(0,z.eE)(this.parent.createElement,!1,{checked:se,label:" "});r.innerHTML="",ge.classList.add("e-checkbox-disabled"),r.appendChild(ge),r.setAttribute("aria-label",se+" column header "+e.column.headerText)}return r}appendHtml(e,t,s="innerHTML"){return e[s]=t,e}setAttributes(e,t,s){const n=t.column;this.buildAttributeFromCell(e,t,"checkbox"===n.type),Ql(e,s),Ql(e,t.attributes),n.customAttributes&&Ql(e,n.customAttributes),"Vertical"===this.parent.rowRenderingMode&&Ql(e,{"data-cell":n.headerText}),n.textAlign&&(e.style.textAlign=n.textAlign),"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===n.clipMode||!n.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==n.type&&e.classList.add("e-ellipsistooltip")}buildAttributeFromCell(e,t,s){const n={},h=[];t.colSpan&&(n.colSpan=t.colSpan),t.rowSpan&&(n.rowSpan=t.rowSpan),t.isTemplate&&h.push("e-templatecell"),t.isSelected&&(h.push("e-selectionbackground","e-active"),s&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&h.push("e-columnselection"),t.cellType===Ys.Header?n["aria-colindex"]=t.colIndex:(0,u.le)(t.index)||(n["aria-colindex"]=t.index),t.visible||h.push("e-hide"),n.class=h,Ql(e,n)}getValue(e,t,s){return s.valueAccessor(e,t,s)}}class Ya{setOptions(e,t){const s=Object.keys(t);for(let n=0;n<s.length;n++)La(e,Ml[s[n]],t[s[n]])}setExpand(e,t){La(e,Ml.expand,t)}setSort(e,t){La(e,Ml.sort,t,"boolean"==typeof t)}setBusy(e,t){La(e,Ml.busy,t),La(e,Ml.invalid,null,!0)}setGrabbed(e,t,s){La(e,Ml.grabbed,t,s)}setDropTarget(e,t){La(e,Ml.dropeffect,"copy",!t)}}function La(b,e,t,s){s&&b?b.removeAttribute(e):b&&b.setAttribute(e,t)}const Ml={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"};class oa extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),this.ariaService=new Ya,this.hTxtEle=this.parent.createElement("span",{className:"e-headertext"}),this.sortEle=this.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),this.gui=this.parent.createElement("div"),this.chkAllBox=this.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":"checkbox"}})}getGui(){return this.gui.cloneNode()}render(e,t,s){const n=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,n,r)}refresh(e,t){this.clean(t);const s=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,s)}clean(e){e.innerHTML=""}prepareHeader(e,t,s){const n=e.column,r={},h=this.getGui();let m,T;if((0,u.Y4)(h,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),(0,u.le)(n.headerValueAccessor)||(m=this.getValue(n.headerText,n)),"checkbox"!==n.type){let se=n.headerText;(0,u.le)(m)||(se=m);const ge=this.hTxtEle.cloneNode();ge[n.getDomSetter()]=se,h.appendChild(ge)}else{n.editType="booleanedit";const se=(0,z.eE)(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,se.insertBefore(this.chkAllBox.cloneNode(),se.firstChild),h.appendChild(se),h.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,h),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&n.allowFiltering&&!(0,u.le)(n.field)&&(!this.parent.showColumnMenu||!n.showColumnMenu)){(0,u.Y4)(s,{"e-mappinguid":"e-flmenu-"+n.uid}),t.classList.add("e-fltr-icon");const se=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==se.length){const ge=this.parent.getForeignKeyColumns();for(let ke=0;ke<this.parent.columns.length;ke++)for(let qe=0;qe<this.parent.filterSettings.columns.length;qe++)if(this.parent.filterSettings.columns[qe].field===n.field||ge.length&&n.foreignKeyValue===this.parent.filterSettings.columns[qe].field){s.classList.add("e-filtered"),se.push(n.field);break}}t.appendChild(s.cloneNode())}e.className&&t.classList.add(e.className),n.customAttributes&&Ql(t,n.customAttributes),n.allowSorting&&(r.sort="none"),n.allowGrouping&&(r.grabbed=!1),t=this.extendPrepareHeader(n,t);const V=this.parent,Y=V.getColumnIndexByField(n.field);if(!(0,u.le)(n.headerTemplate)){const se=V.element.id+n.uid+"headerTemplate",ge="isStringTemplate",ke=n;if(this.parent.isReact&&"string"!=typeof n.headerTemplate){const mt={index:Y};t.firstElementChild.innerHTML="",n.getHeaderTemplate()((0,u.l7)(mt,ke),V,"headerTemplate",se,this.parent[ge],null,t.firstElementChild),this.parent.renderTemplates()}else T=n.getHeaderTemplate()((0,u.l7)({index:Y},ke),V,"headerTemplate",se,this.parent[ge]),t.firstElementChild.innerHTML="",Dl(t.firstElementChild,T)}if(this.ariaService.setOptions(t,r),!(0,u.le)(n.headerTextAlign)||!(0,u.le)(n.textAlign)){const se=n.headerTextAlign||n.textAlign;h.style.textAlign=se,"Right"===se||"Left"===se?t.classList.add("Right"===se?"e-rightalign":"e-leftalign"):"Center"===se&&t.classList.add("e-centeralign")}return"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===n.clipMode||!n.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==n.type&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",((0,u.le)(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger(Sl,{cell:e,node:t}),t}getValue(e,t){return t.headerValueAccessor(e,t)}extendPrepareHeader(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!(0,u.le)(e.field)){const s=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length)for(let r=0;r<this.parent.columns.length;r++)for(let h=0;h<this.parent.filterSettings.columns.length;h++)if(this.parent.filterSettings.columns[h].field===e.field){s.classList.add("e-filtered"),n.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(s)}if(this.parent.allowResizing){const s=this.parent.createElement("div");s.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(s)}return t}appendHtml(e,t){return e.appendChild(t),e}}class yp extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}})}render(e,t,s){const n=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),h=e.column;if(n.appendChild(r),(0,u.le)(h.headerTemplate)?this.appendHtml(r,h.headerText,h.getDomSetter()):Dl(r,h.getHeaderTemplate()(h,this.parent,"headerTemplate")),e.column.toolTip&&n.setAttribute("title",e.column.toolTip),"Clip"===h.clipMode||!h.clipMode&&"Clip"===this.parent.clipMode?n.classList.add("e-gridclip"):("EllipsisWithTooltip"===h.clipMode||!h.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&n.classList.add("e-ellipsistooltip"),(0,u.le)(e.column.textAlign)||(r.style.textAlign=e.column.textAlign),e.column.customAttributes&&Ql(n,e.column.customAttributes),n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-colspan",e.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){const m=this.parent.createElement("div");m.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(m)}return e.className&&n.classList.add(e.className),this.parent.trigger(Sl,{cell:e,node:n}),n}}class kn extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-indentcell"})}render(e,t){const s=this.element.cloneNode();return Ql(s,e.attributes),s}}class vp extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:this.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}})}render(e,t){const s=this.element.cloneNode(),n=this.parent;let r,h;t.headerText=e.column.headerText,e.isForeignKey&&(h=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));const m=e.isForeignKey?h:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));if((0,u.le)(n.groupSettings.captionTemplate))s.innerHTML=n.groupSettings.enableLazyLoading?e.column.headerText+": "+m:e.column.headerText+": "+m+" - "+t.count+" "+this.localizer.getConstant(t.count<2?"Item":"Items");else{const T=this.parent.isReact&&"string"!=typeof n.groupSettings.captionTemplate;if(T){const V=n.element.id+"captionTemplate";_o(n.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",V,null,null,s),this.parent.renderTemplates()}else r=this.parent.isVue?_o(n.groupSettings.captionTemplate)(t,this.parent):_o(n.groupSettings.captionTemplate)(t);T||Dl(s,r)}return s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-label",s.innerHTML+" is groupcaption cell"),s.setAttribute("title",s.innerHTML),s}}class Cd extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption"})}render(e,t){const s=this.element.cloneNode();return s.innerHTML="&nbsp;",s.setAttribute("colspan",e.colSpan.toString()),s}}class Cg extends kn{render(e,t,s,n){const r=this.element.cloneNode();return r.className=n?"e-recordplusexpand":"e-recordpluscollapse",r.setAttribute("ej-mappingname",t.field),r.setAttribute("ej-mappingvalue",t.key),r.setAttribute("aria-expanded",n?"true":"false"),r.setAttribute("tabindex","-1"),r.appendChild(this.parent.createElement("div",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),r}}class Uh extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-grouptopleftcell"})}render(e,t){const s=this.element.cloneNode();return s.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),s}}class wd extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-detailheadercell"})}render(e,t){const s=this.element.cloneNode();return s.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),s}}class Cf extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}})}render(e,t,s){const n=this.element.cloneNode();return s&&!(0,u.le)(s.class)?(n.className="",n.className=s.class,n.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):n.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),n}}class Am extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}})}render(e,t){const s=this.element.cloneNode();return s.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),e.isSelected&&(s.classList.add("e-selectionbackground"),s.classList.add("e-active")),s}}class Jd extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-rowdragheader"})}render(e,t){const s=this.element.cloneNode();return s.appendChild((0,u.az)("div",{className:"e-emptycell"})),s}}class Iu{constructor(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new yd(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}render(){const e=this.parent;this.headerRenderer=this.renderer.getRenderer(dl.Header),this.contentRenderer=this.renderer.getRenderer(dl.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()}refresh(e={requestType:"refresh"}){const t=this.parent;t.notify(`${e.requestType}-begin`,e),t.trigger(lr,e,(s={requestType:"refresh"})=>{if(s.cancel)t.notify(Ac,s);else{if("delete"===s.requestType&&t.allowPaging){const n=s.data.length,r=t.pageSettings.totalRecordsCount-n;!(t.getCurrentViewRecords().length-n)&&r&&(t.pageSettings.currentPage-1)*t.pageSettings.pageSize===r&&(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:r,currentPage:Math.ceil(r/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=r)}"reorder"===s.requestType&&this.parent.dataSource&&"result"in this.parent.dataSource||("paging"===s.requestType||"columnstate"===s.requestType||"reorder"===s.requestType)&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?this.contentRenderer.refreshContentRows(s):this.refreshDataManager(s)}})}resetTemplates(){const e=this.parent,t=e.getColumns();if(e.detailTemplate){const n=e.element.id+"detailTemplate";u.ep[n]=[],(0,u.oL)(n,"DetailTemplate")}e.groupSettings.captionTemplate&&(0,u.oL)(e.element.id+"captionTemplate","CaptionTemplate"),e.rowTemplate&&(0,u.oL)(e.element.id+"rowTemplate","RowTemplate"),e.toolbarTemplate&&(0,u.oL)(e.element.id+"toolbarTemplate","ToolbarTemplate"),e.pageSettings.template&&(0,u.oL)(e.element.id+"_template","pageSettings");for(let n=0;n<t.length;n++)t[n].template&&(u.ep[e.element.id+t[n].uid]=[],(0,u.oL)(e.element.id+t[n].uid,"Template")),t[n].headerTemplate&&(0,u.oL)(e.element.id+t[n].uid+"headerTemplate","HeaderTemplate"),t[n].filterTemplate&&(0,u.oL)(e.element.id+t[n].uid+"filterTemplate","FilterTemplate");const s="guid";for(let n=0;n<e.aggregates.length;n++)for(let r=0;r<e.aggregates[n].columns.length;r++)e.aggregates[n].columns[r].footerTemplate&&(0,u.oL)(e.element.id+e.aggregates[n].columns[r][s]+"footerTemplate","FooterTemplate"),e.aggregates[n].columns[r].groupFooterTemplate&&(0,u.oL)(e.element.id+e.aggregates[n].columns[r][s]+"groupFooterTemplate","GroupFooterTemplate"),e.aggregates[n].columns[r].groupCaptionTemplate&&(0,u.oL)(e.element.id+e.aggregates[n].columns[r][s]+"groupCaptionTemplate","GroupCaptionTemplate")}refreshComplete(e){this.parent.trigger(vn,e)}refreshDataManager(e={}){let t;"virtualscroll"!==e.requestType&&!e.isCaptionCollapse&&this.parent.showSpinner(),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;const s=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+Jo),!0),s){const n=new bt.BH;t=this.getFData(n,e)}if(t=t?t.then(n=>{const r=this.data.generateQuery().requiresCount();if(this.emptyGrid){const h=new bt.BH;return h.resolve({result:[],count:0}),h.promise}return this.data.getData(e,r)}):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!s||this.parent.searchSettings.key.length)){const n=new bt.BH;t=t.then(r=>(this.parent.notify(_l,{dataManager:t,result:r,promise:n,action:e}),n.promise))}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then(n=>this.validateGroupRecords(n))),t.then(n=>this.dataManagerSuccess(n,e)).catch(n=>this.dataManagerFailure(n,e))}getFData(e,t){return this.parent.notify(_l,{isComplex:!0,promise:e,action:t}),e.promise}isNeedForeignAction(){const e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())}foreignKey(e){return e.some(t=>{let s=!1;return s=this.parent.filterSettings.columns.some(n=>t.uid===n.uid),!(!s&&!this.parent.searchSettings.key.length)})}sendBulkRequest(e){e.requestType="batchsave";const t=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),s=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):t.then(n=>{this.data.getData(e,s).then(r=>this.dmSuccess(r,e)).catch(r=>this.dmFailure(r,e))}).catch(n=>this.dmFailure(n,e))}dmSuccess(e,t){this.dataManagerSuccess(e,t)}dmFailure(e,t){this.dataManagerFailure(e,t)}renderEmptyRow(){this.emptyRow(!0)}emptyRow(e){const t=this.parent;let s=this.contentRenderer.getTable().querySelector(vs);(0,u.le)(s)||(0,u.Od)(s),s=this.parent.createElement(vs);let n=0;(t.detailTemplate||t.childGrid)&&++n;const r=this.parent.createElement("tr",{className:"e-emptyrow"});r.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+n+t.groupSettings.columns.length).toString()}})),s.appendChild(r),this.contentRenderer.renderEmpty(s),e&&(this.parent.trigger(Oo,{}),this.parent.notify(U,{rows:[new Ta({isDataRow:!0,cells:[new na({isDataCell:!0,visible:!0})]})]}))}dynamicColumnChange(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])}updateColumnType(e){const t=this.parent.getColumns();let s;const n="customFormat",r="equalTo",h=e&&e.items?e.items[0]:e,m=this.locator.getService("valueFormatter");for(let T=0,V=t.length;T<V;T++){s=mi(t[T].field||"",h),(0,u.le)(t[T][n])||(t[T].format=t[T][n]),!(0,u.le)(t[T].validationRules)&&!(0,u.le)(t[T].validationRules[r])&&(t[T].validationRules[r][0]=this.parent.element.id+t[T].validationRules[r][0]),t[T].isForeignColumn()&&t[T].columnData&&(s=mi(t[T].foreignKeyValue||"",t[T].columnData[0])),(0,u.le)(s)?t[T].type=t[T].type||null:(this.isColTypeDef=!0,t[T].type||(t[T].type=s.getDay?s.getHours()>0||s.getMinutes()>0||s.getSeconds()>0||s.getMilliseconds()>0?"datetime":"date":typeof s));const Y=new Wn;t[T].format&&(t[T].format.skeleton||t[T].format.format&&"string"==typeof t[T].format.format)&&(t[T].setFormatter(Y.getFormatFunction((0,u.l7)({},t[T].format))),t[T].setParser(Y.getParserFunction(t[T].format))),"string"==typeof t[T].format?ae(this.locator,t[T]):!t[T].format&&"number"===t[T].type&&t[T].setParser(m.getParserFunction({format:"n2"}))}}dataManagerSuccess(e,t){const s=this.parent;this.contentRenderer=this.renderer.getRenderer(dl.Content),this.headerRenderer=this.renderer.getRenderer(dl.Header),e.actionArgs=t;const n=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&("delete"===t.requestType||"save"===t.requestType&&"add"===this.parent.infiniteScrollModule.requestType);s.trigger(Zo,e,r=>{if(r.cancel)return;r.result=(0,u.le)(r.result)?[]:r.result;const h=Object.keys(r.result).length;if(!this.parent.isDestroyed){if(!(s.getColumns().length||h||s.columns.length&&s.columns[0]instanceof gn))return void s.hideSpinner();if(this.isInfiniteEnd(t)&&!h)return void this.parent.notify(cd,{e:t,result:e.result,count:e.count,agg:e.aggregates});if(this.parent.isEdit=!1,this.parent.notify("edit-reset",{}),this.parent.notify(Jh,{}),this.contentRenderer.prevCurrentView=this.parent.currentViewData.slice(),s.currentViewData=r.result,s.notify("refresh-infinite-current-view-data",{args:t,data:r.result}),!h&&r.count&&s.allowPaging&&t&&"delete"!==t.requestType)return this.parent.groupSettings.enableLazyLoading&&("grouping"===t.requestType||"ungrouping"===t.requestType)&&this.parent.notify(Oh,t),s.prevPageMoving=!0,s.pageSettings.totalRecordsCount=r.count,"paging"!==t.requestType&&(s.pageSettings.currentPage=Math.ceil(r.count/s.pageSettings.pageSize)),void s.dataBind();if((!s.getColumns().length&&h||!this.isLayoutRendered)&&!vt(s)&&this.updatesOnInitialRender(r),!this.isColTypeDef&&s.getCurrentViewRecords()&&this.updateColumnType(this.data.dataManager.dataSource.offline&&s.dataSource&&s.dataSource.length?s.dataSource[0]:s.getCurrentViewRecords()[0]),!this.parent.isInitialLoad&&this.parent.groupSettings.disablePageWiseAggregates&&!this.parent.groupSettings.columns.length&&(r.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),(this.parent.isReact||this.parent.isVue)&&!(0,u.le)(t)&&"infiniteScroll"!==t.requestType&&!t.isFrozen&&Pp(this.parent,["footerTemplate"]),this.parent.notify(Qe,(0,u.l7)({count:r.count,result:r.result,aggregates:r.aggregates},t)),(s.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&this.headerRenderer.refreshUI(),h)vt(s)&&(t.scrollTop={top:this.contentRenderer.content.scrollTop}),n?this.parent.notify(cd,{e:t,result:e.result,count:e.count,agg:e.aggregates}):this.parent.enableImmutableMode?this.contentRenderer.immutableModeRendering(t):this.contentRenderer.refreshContentRows(t);else{if(t&&t.isCaptionCollapse)return;if(!s.getColumns().length)return s.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));if(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().querySelector("."+Jo),!1),this.renderEmptyRow(),t){const m=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(m,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==this.parent.getFrozenColumns()&&!t.isFrozen,this.parent.trigger(vn,t))}this.parent.hideSpinner()}this.parent.notify(mh,{}),this.setRowCount(this.parent.getCurrentViewRecords().length),this.parent.getDataModule().isQueryInvokedFromData=!1}})}dataManagerFailure(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector("."+Jo),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger(vl,{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))}setRowCount(e){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:e?e.toString():"1"})}isInfiniteEnd(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType}updatesOnInitialRender(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),Yh(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(sh,{})}iterateComplexColumns(e,t,s){const n=Object.keys(e);for(let r=0;r<n.length;r++)("object"!=typeof e[n[r]]||!e[n[r]]||e[n[r]]instanceof Date?[]:Object.keys(e[n[r]])).length?this.iterateComplexColumns(e[n[r]],t+(n[r]+"."),s):(s[this.counter]=t+n[r],this.counter++)}buildColumns(e){const t=[],s={};this.iterateComplexColumns(e,"",s);const n=Object.keys(s).filter(r=>"BlazId"!==s[r]).map(r=>s[r]);for(let r=0,h=n.length;r<h;r++)t[r]={field:n[r]},this.parent.enableColumnVirtualization&&(t[r].width=(0,u.le)(t[r].width)?200:t[r].width);this.parent.setProperties({columns:t},!0)}instantiateRenderer(){this.renderer.addRenderer(dl.Header,new Ul(this.parent,this.locator)),this.renderer.addRenderer(dl.Content,new Hl(this.parent,this.locator));const e=this.locator.getService("cellRendererFactory");e.addCellRenderer(Ys.Header,new oa(this.parent,this.locator)),e.addCellRenderer(Ys.Data,new Uo(this.parent,this.locator)),e.addCellRenderer(Ys.StackedHeader,new yp(this.parent,this.locator)),e.addCellRenderer(Ys.Indent,new kn(this.parent,this.locator)),e.addCellRenderer(Ys.GroupCaption,new vp(this.parent,this.locator)),e.addCellRenderer(Ys.GroupCaptionEmpty,new Cd(this.parent,this.locator)),e.addCellRenderer(Ys.Expand,new Cg(this.parent,this.locator)),e.addCellRenderer(Ys.HeaderIndent,new Uh(this.parent,this.locator)),e.addCellRenderer(Ys.StackedHeader,new yp(this.parent,this.locator)),e.addCellRenderer(Ys.DetailHeader,new wd(this.parent,this.locator)),e.addCellRenderer(Ys.RowDragHIcon,new Jd(this.parent,this.locator)),e.addCellRenderer(Ys.DetailExpand,new Cf(this.parent,this.locator)),e.addCellRenderer(Ys.DetailFooterIntent,new kn(this.parent,this.locator)),e.addCellRenderer(Ys.RowDragIcon,new Am(this.parent,this.locator))}addEventListener(){this.parent.isDestroyed||(this.parent.on(fa,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(Me,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on($u,this.sendBulkRequest,this),this.parent.on(ip,()=>{this.emptyGrid=!0},this),this.parent.on(sh,this.dynamicColumnChange,this))}validateGroupRecords(e){const t=e.result.length-1;if(t<0)return Promise.resolve(e);const s=e.result[0],n=e.result[t],r=[],h=ke=>{const qe=[s,n];for(let mt=0;mt<qe.length;mt++)r.push(new bt.$G("field","==",qe[mt].field).and(this.getPredicate("key","equal",qe[mt].key)));ke.where(bt.$G.or(r))},m=new bt.AE;h(m);const V=new bt.hm(e.result).executeLocal(m),Y=this.data.generateQuery(!0),se=[];if(this.data.isRemote()){const ke=[s,n];for(let qe=0;qe<ke.length;qe++)se.push(this.getPredicate(ke[qe].field,"equal",ke[qe].key));Y.where(bt.$G.or(se))}else h(Y);const ge=new bt.BH;return this.data.getData({},Y).then(ke=>{this.updateGroupInfo(V,ke.result),ge.resolve(e)}).catch(ke=>ge.reject(ke)),ge.promise}getPredicate(e,t,s){return s instanceof Date?nt({field:e,operator:t,value:s}):new bt.$G(e,t,s)}updateGroupInfo(e,t){const s=new bt.hm(t),n=e;for(let r=0;r<n.length;r++){const h=s.executeLocal((new bt.AE).where(new bt.$G("field","==",n[r].field).and(this.getPredicate("key","equal",n[r].key))))[0];n[r].count=h.count;const m=n[r].items,T=h.items;m.GroupGuid&&(n[r].items=this.updateGroupInfo(n[r].items,h.items));const V=this.parent.aggregates;for(let Y=0;Y<V.length;Y++){const se=V[Y];for(let ge=0;ge<se.columns.length;ge++){const ke=se.columns[ge].type instanceof Array?se.columns[ge].type:[se.columns[ge].type];for(let qe=0;qe<ke.length;qe++){const mt=se.columns[ge].field+" - "+ke[qe].toLowerCase(),Vt=m.level?T.records:h.items,Qt=this.parent;if("Custom"===ke[qe]){const ai=m.level?T:h;let ki=se.columns[ge].customAggregate;"string"==typeof ki&&(ki=(0,u.NA)(ki,window)),n[r].aggregates[mt]=ki?ki.call(Qt,ai,se.columns[ge]):""}else n[r].aggregates[mt]=bt.j4.aggregates[ke[qe].toLowerCase()](Vt,se.columns[ge].field)}}}}return e}}class wf{constructor(){this.cellRenderMap={}}addCellRenderer(e,t){e="string"==typeof e?e:(0,u.I$)(Ys,e),(0,u.le)(this.cellRenderMap[e])&&(this.cellRenderMap[e]=t)}getCellRenderer(e){if(e="string"==typeof e?e:(0,u.I$)(Ys,e),(0,u.le)(this.cellRenderMap[e]))throw`The cellRenderer ${e} is not found`;return this.cellRenderMap[e]}}class bp{constructor(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}addEventListener(){this.evtHandlers=[{event:bh,handler:this.closeCustomDialog},{event:_c,handler:this.refreshCustomFilterOkBtn},{event:Hc,handler:this.renderResponsiveContextMenu},{event:pd,handler:this.renderCustomFilterDiv},{event:fd,handler:this.customExFilterClose},{event:ud,handler:this.refreshCustomFilterClearBtn}],pl(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(vn,this.onActionCompleteFn)}customExFilterClose(){this.isCustomDlgRender=!1}renderCustomFilterDiv(){const e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),s=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",s.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");const n=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),n.appendChild(this.customExcelFilterParent)}renderResponsiveContextMenu(e){if(this.action===ao.isFilter){const t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),s=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),n=s.querySelector(".e-dlg-closeicon-btn"),r=s.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),n.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",r.innerHTML=e.header;const h=this.parent.createElement("button"),m=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});h.appendChild(m),this.backBtn=new z.zx({cssClass:"e-res-back-btn"}),this.backBtn.appendTo(h),r.parentElement.insertBefore(h,r)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",(0,u.Od)(this.backBtn.element),n.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),r.innerHTML=this.getHeaderTitle({action:ao.isFilter},e.col))}}refreshCustomFilterClearBtn(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")}refreshCustomFilterOkBtn(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled)}renderResponsiveContent(e){const t=this.parent;if(e)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:e.uid+"-main-filter"}),this.filterParent;{const s=t.getColumns();this.customColumnDiv=t.createElement("div",{className:"columndiv",styles:"width: 100%"});const n=t.createElement("div",{className:"e-ressortbutton-parent"}),r=[],h=this.action===ao.isSort,m=this.action===ao.isFilter;if(m)for(let T=0;T<t.filterSettings.columns.length;T++)r.push(t.filterSettings.columns[T].field);for(let T=0;T<s.length;T++){if(!s[T].visible||!s[T].allowSorting&&h||!s[T].allowFiltering&&m)continue;const V=t.createElement("div",{className:"e-responsivecoldiv"});V.setAttribute("data-e-mappingname",s[T].field),V.setAttribute("data-e-mappinguid",s[T].uid);const Y=t.createElement("span",{innerHTML:s[T].headerText,className:"e-res-header-text"});if(V.appendChild(Y),this.customColumnDiv.appendChild(V),h){const ge=this.getSortedFieldsAndDirections("field").indexOf(s[T].field),ke=t.createElement("button",{id:t.element.id+s[T].field+"sortbutton"}),qe=n.cloneNode();qe.appendChild(ke),V.appendChild(qe),new z.zx({cssClass:"e-ressortbutton"}).appendTo(ke),ke.innerHTML=ge>-1?this.parent.sortSettings.columns[ge].direction:"None",ke.onclick=Vt=>{this.sortButtonClickHandler(Vt.target)}}if(m&&r.indexOf(s[T].field)>-1){const se=t.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),ge=t.createElement("span",{className:"e-icons e-res-icon e-filterset"});ge.setAttribute("colType",s[T].type),se.appendChild(ge),V.appendChild(se)}}return u.bi.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv}}getSortedFieldsAndDirections(e){const t=[];for(let s=0;s<this.parent.sortSettings.columns.length;s++)t.push(this.parent.sortSettings.columns[s][e]);return t}sortButtonClickHandler(e){if(e){const s=Zi(e,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));const n=e.textContent,r="None"===n?"Ascending":"Ascending"===n?"Descending":"None";e.innerHTML=r,this.setSortedCols(s,r)}}resetSortButtons(e){const t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton"));for(let s=0;s<t.length;s++)t[s]!==e&&(t[s].innerHTML="None")}setSortedCols(e,t){const n=this.getCurrentSortedFields().indexOf(e);this.parent.allowMultiSorting&&n>-1&&(this.sortedCols.splice(n,1),this.sortPredicate.splice(n,1)),this.isSortApplied=!0,"None"!==t&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))}getCurrentSortedFields(){const e=[];for(let t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[t]);return e}customFilterColumnClickHandler(e){if(this.action!==ao.isFilter)return;const t=this.parent,s=e.target;if("FilterBar"!==t.filterSettings.type)if(s.classList.contains("e-responsivecoldiv")||s.parentElement.classList.contains("e-responsivecoldiv")){let n=s.getAttribute("data-e-mappingname");if(n||(n=s.parentElement.getAttribute("data-e-mappingname")),n){const r=t.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(r)}}else if(s.classList.contains("e-filterset")||s.parentElement.classList.contains("e-filtersetdiv")){const n=Zi(s,"e-responsivecoldiv");if(n){const r=n.getAttribute("data-e-mappingname"),h=t.getColumnByField(r);("Menu"===h.filter.type||!h.filter.type&&"Menu"===t.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(h),this.removeCustomDlgFilterEle(s)}}}showResponsiveDialog(e){if(this.isCustomDialog&&this.action===ao.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===ao.isSort){const t={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(Vo,t),t.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}}setTopToChildDialog(e){const t=e.querySelector(".e-dialog");if(t){const s=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=s+"px"}}renderCustomFilterDialog(e){const t=this.parent;if(this.action===ao.isFilter&&"FilterBar"===t.filterSettings.type)return;const s=this.parent.createElement("div",{id:t.element.id+"customfilter",className:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(s),this.customFilterDlg=this.getDialogOptions(e,!0);const n={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(Vo,n),!n.cancel&&(this.customFilterDlg.appendTo(s),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}getDialogOptions(e,t,s){const n=new Rt.Vq({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"}});return n.isStringTemplate=!0,t?(n.header=this.renderResponsiveHeader(e,void 0,!0),n.cssClass="e-customfilter"):(n.header=this.renderResponsiveHeader(e),n.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===ao.isFilter?"e-res"+s+" e-row-responsive-filter":"e-res"+s),n}renderResponsiveDialog(e){const t=this.parent;if(this.action===ao.isFilter&&"FilterBar"===t.filterSettings.type)return;const s=this.action===ao.isFilter?"filter":"sort",n=this.parent.createElement("div",{id:t.element.id+"responsive"+s,className:"e-res"+s+"div e-responsive-dialog"});this.parent.element.appendChild(n),this.customResponsiveDlg=this.getDialogOptions(e,!1,s),this.customResponsiveDlg.appendTo(n)}dialogCreated(){Pg(this.parent)}dialogOpen(){if(this.action===ao.isSort&&this.parent.allowMultiSorting)for(let e=0;e<this.parent.sortSettings.columns.length;e++)this.sortedCols.push(this.parent.sortSettings.columns[e].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[e].field,direction:this.parent.sortSettings.columns[e].direction})}beforeDialogClose(e){this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===ao.isFilter?e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===ao.isSort&&this.closeCustomDialog(),this.parent.off(zc,this.keyHandler)}sortColumn(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(let e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[e].field,this.sortPredicate[e].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()}getHeaderTitle(e,t){const s=this.parent;let n;return this.action===ao.isEdit?n=s.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===ao.isAdd?n=s.localeObj.getConstant("AddFormTitle"):this.action===ao.isFilter?n=t?t.headerText||t.field:s.localeObj.getConstant("FilterButton"):this.action===ao.isSort&&(n=s.localeObj.getConstant("Sort")),n}getDialogName(e){let t;return e===ao.isAdd||e===ao.isEdit?t="dialogEdit_wrapper_title":e===ao.isFilter&&(t="responsive_filter_dialog_wrapper"),t}getButtonText(e){let t;return e===ao.isAdd||e===ao.isEdit?t="Save":(e===ao.isFilter||this.action===ao.isSort)&&(t="OKButton"),t}renderResponsiveHeader(e,t,s){const n=this.parent;n.on(zc,this.keyHandler,this);const r=n.element.id+this.getDialogName(this.action),h=n.createElement("div",{className:"e-res-custom-element"}),m=n.createElement("div",{className:"e-dlg-custom-header",id:r});m.innerHTML=this.getHeaderTitle(t,e),h.appendChild(m);const T=n.createElement("button");s||(this.saveBtn=new z.zx({cssClass:"e-primary e-flat e-res-apply-btn"}),T.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(T),T.onclick=se=>{this.dialogHdrBtnClickHandler()});const V=this.action===ao.isSort,Y=this.action===ao.isFilter;if(Y||V){const se=V?"sort":"filter",ge=n.createElement("button");if(this.filterClearBtn=new z.zx({cssClass:"e-primary e-flat e-res-"+se+"-clear-btn"}),Y){const ke=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});ge.appendChild(ke)}else ge.innerHTML=n.localeObj.getConstant("Clear");h.appendChild(ge),this.filterClearBtn.appendTo(ge),ge.onclick=ke=>{Zi(ke.target,"e-customfilter")?(this.parent.filterModule.clearFiltering(),this.removeCustomDlgFilterEle()):Y?this.filterClear():(this.resetSortButtons(),this.sortedCols=[],this.sortPredicate=[],this.isSortApplied=!0)},h.appendChild(ge)}return s||h.appendChild(T),h}filterClear(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()}dialogHdrBtnClickHandler(){this.action===ao.isEdit||this.action===ao.isAdd?this.parent.endEdit():this.action===ao.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===ao.isSort&&this.sortColumn()}closeCustomDialog(){if(this.isCustomDlgRender){const e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");(0,u.Od)(e)}else this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()}destroyCustomFilterDialog(){if(!this.customResponsiveDlg)return;const e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),(0,u.Od)(e)),this.closeCustomFilter(),this.action===ao.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}closeCustomFilter(){if(!this.isDialogClose&&this.customFilterDlg){const e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),(0,u.Od)(e))}this.isCustomDialog=!1,this.isDialogClose=!1}removeCustomDlgFilterEle(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?(0,u.Od)(e.parentElement):(0,u.Od)(e);else{const t=this.customColumnDiv.children;for(let s=0;s<t.length;s++)(e=t[s].querySelector(".e-filtersetdiv"))&&((0,u.Od)(e),s--)}}keyHandler(e){13===e.keyCode&&(this.action===ao.isFilter&&e.target.classList.contains("e-searchinput")||this.action===ao.isEdit||this.action===ao.isAdd)&&this.dialogHdrBtnClickHandler()}editComplate(e){("save"===e.requestType||"cancel"===e.requestType)&&this.parent.off(zc,this.keyHandler)}removeEventListener(){this.customColumnDiv&&u.bi.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),pl(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(vn,this.onActionCompleteFn)}}class Cp{constructor(){this.services={}}register(e,t){(0,u.le)(this.services[e])&&(this.services[e]=t)}getService(e){if((0,u.le)(this.services[e]))throw`The service ${e} is not registered`;return this.services[e]}registerAdaptiveService(e,t,s){t?(e.responsiveDialogRenderer=new bp(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=s):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)}}class Ru{constructor(){this.rendererMap={}}addRenderer(e,t){const s=(0,u.I$)(dl,e);(0,u.le)(this.rendererMap[s])&&(this.rendererMap[s]=t)}getRenderer(e){const t=(0,u.I$)(dl,e);if((0,u.le)(this.rendererMap[t]))throw`The renderer ${t} is not found`;return this.rendererMap[t]}}class qc{constructor(e){this.parent=e}setWidthToColumns(){let e=0;const t=this.parent.getColumnIndexesInView();let s=!0,n=0;if(this.parent.allowGrouping)for(let h=this.parent.groupSettings.columns.length;e<h;e++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e)?s=!1:this.setColumnWidth(new gn({width:"30px"}),e);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new gn({width:"30px"}),e),e++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new gn({width:"30px"}),e),e++);const r=this.parent.getColumns();for(let h=0;h<r.length;h++)this.setColumnWidth(r[h],s&&this.parent.enableColumnVirtualization?void 0:h+e);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new gn({width:"30px"}),r.length),n=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(n)}setMinwidthBycalculation(e){let t=0;const s=this.parent.getColumns().filter(n=>(0,u.le)(n.width)||"auto"===n.width);if(s.length){t=(0,u.le)(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e;let n=0;for(const r of s)n+=(0,u.le)(r.minWidth)?0:"string"==typeof r.minWidth?parseInt(r.minWidth,10):r.minWidth;for(let r=0;r<s.length;r++){0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&r!==s.length-1&&this.setUndefinedColumnWidth(s);const h=this.parent.getColumnIndexByField(s[r].field)+this.parent.getIndentCount();0!==e&&t<n?this.setWidth(s[r].minWidth,h):0!==e&&t>n&&this.setWidth("",h,!0)}}}setUndefinedColumnWidth(e){for(let t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))}setColumnWidth(e,t,s){if(this.parent.getColumns().length<1)return;const n=(0,u.le)(t)?this.parent.getNormalizedColumnIndex(e.uid):t,r=this.getWidth(e),h=this.getTableWidth(this.parent.getColumns());null!==r&&(this.setWidth(r,n),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(h),(this.parent.allowResizing&&"resize"===s||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(Vl,{index:n,width:r,column:e,module:s}))}setWidth(e,t,s){this.parent.groupSettings.columns.length>t&&Op(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");const n=this.parent.getHeaderTable(),r=this.parent.getContentTable(),h=(0,u.Ac)(e);let m,T=this.parent.getFrozenColumns();const V=this.parent.isRowDragable();T=T&&V?T+1:T;const Y=this.parent.getHeaderContent().querySelector("."+io),se=this.parent.getContent().querySelector("."+Or),ge=this.parent.getFrozenLeftColumnsCount(),ke=this.parent.getFrozenRightColumnsCount(),qe=this.parent.getMovableColumnsCount(),mt=0!==ge||0!==ke;if(T&&t>=T){if(!Y||!Y.querySelector(Qn))return;m=Y.querySelector(Qn).children[t-T]}else if(this.parent.enableColumnVirtualization&&T&&this.parent.contentModule.isXaxis()&&Y.scrollLeft>0){const Qt=Y.querySelector(Qn);m=Qt.children[Qt.children.length-1-t]}else if(mt){let Qt;if(ge&&!ke)Qt=(t=V?t-1:t)<ge?n:Y;else if(!ge&&ke)Qt=t>=qe?n:Y;else if(ge&&ke){t=V?t-1:t;const ai=this.parent.getFrozenRightHeader();Qt=t<ge?n:t<ge+qe?Y:ai}if(m=this.getColumnLevelFrozenColgroup(t,ge,qe,Qt),!m)return}else m=n.querySelector(Qn).children[t];let Vt;if(m&&!s?m.style.width=h:m&&s&&(m.style.width=""),T&&t>=T)Vt=this.parent.getContent().querySelector("."+Or).querySelector(Qn).children[t-T];else if(this.parent.enableColumnVirtualization&&T&&this.parent.contentModule.isXaxis()&&se.scrollLeft>0){const Qt=this.parent.getContent().querySelector("."+Or).querySelector(Qn);Vt=Qt.children[Qt.children.length-1-t]}else if(mt){let Qt;if(ge&&!ke&&(Qt=t<ge?r:se),!ge&&ke&&(Qt=t>=qe?r:se),ge&&ke){const ai=this.parent.getContent().querySelector(".e-frozen-right-content");Qt=t<ge?r:t<ge+qe?se:ai}Vt=this.getColumnLevelFrozenColgroup(t,ge,qe,Qt)}else Vt=r.querySelector(Qn).children[t];if(Vt&&!s?Vt.style.width=h:Vt&&s&&(Vt.style.width=""),!this.parent.enableColumnVirtualization){const Qt=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),ai=[];for(let ki=0;ki<Qt.length;ki++)if(Zi(Qt[ki],"e-grid").id===this.parent.element.id)for(let Qi=0;Qi<Qt[ki].querySelector("colgroup").children.length;Qi++)ai.push(Qt[ki].querySelector("colgroup").children[Qi]);Qt.length&&ai.length&&(ai[t].style.width=h)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()}getColumnLevelFrozenColgroup(e,t,s,n){if(!n||!n.querySelector(Qn))return null;const r=this.parent.getColumns(),h=this.parent.isRowDragable(),m=this.parent.getFrozenMode();let T;const V=[].slice.call(n.querySelector(Qn).children);return T="Right"===m&&h&&e===s+this.parent.getFrozenRightColumnsCount()?V[V.length-1]:h&&-1===e?V[0]:"Left"===r[e].freeze?V[h?e+1:e]:"Right"===r[e].freeze?V[e-(t+s)]:V[e-t],T}refreshFrozenScrollbar(){const e={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",e),e.cancel)return;const t=gc(),s=this.parent.element.querySelector(".e-frozenscrollbar"),n=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().querySelector("."+ga),h=this.parent.getContent().querySelector("."+Or);let m=r.firstElementChild.getBoundingClientRect().width,T=h.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(m+=t),s.style.width=m+"px",this.parent.getFrozenMode()===fn){const V=this.parent.element.querySelector(".e-frozen-right-scrollbar");let Y=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(Y+=t),V.style.width=Y+"px"}else{if(this.parent.enableColumnVirtualization){const V=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");V&&(T=V.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(T+=t)}n.firstElementChild.style.width=T+"px"}getSiblingsHeight(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")}getHeightFromDirection(e,t){let s=e[t+"ElementSibling"],n=0;const r=[rl,ml,"e-groupdroparea","e-gridpager","e-toolbar"];for(;s;)r.some(h=>s.classList.contains(h))&&(n+=s.offsetHeight),s=s[t+"ElementSibling"];return n}isWidthUndefined(){const e=this.parent.getColumns().filter(t=>(0,u.le)(t.width)&&(0,u.le)(t.minWidth)).length;return this.parent.getColumns().length===e}getWidth(e){if((0,u.le)(e.width)&&this.parent.allowResizing&&(0,u.le)(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.isFrozenGrid()&&(0,u.le)(e.width)&&(e.getFreezeTableName()===Qo||e.getFreezeTableName()===vo)&&(e.width=200),!e.width)return null;const t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width}getTableWidth(e){let t=0;for(const s of e){let n=this.getWidth(s);"auto"===s.width&&(n=0),!1!==s.visible&&null!==n&&(t+=parseInt(n.toString(),10))}return t}calcMovableOrFreezeColWidth(e){const t=this.parent.getColumns().slice(),s=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),n=this.parent.getMovableColumnsCount(),r=this.parent.getFrozenRightColumnsCount();return"movable"===e?(r&&t.splice(s+n,t.length),s&&t.splice(0,s)):"freeze-left"===e?t.splice(s,t.length):"freeze-right"===e&&t.splice(0,s+n),(0,u.Ac)(this.getTableWidth(t))}setWidthToFrozenRightTable(){let e=this.calcMovableOrFreezeColWidth("freeze-right");e=this.isAutoResize()?"100%":e;const t=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("."+yo),s=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+yo);t.style.width=e,s.style.width=e}setWidthToFrozenLeftTable(){let e=this.calcMovableOrFreezeColWidth("freeze-left");e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e}setWidthToMovableTable(){let e="";const t=this.parent.getColumns().filter(n=>(0,u.le)(n.width)).length>=1,s=this.parent.getColumns().filter(n=>"auto"===n.width).length>=1;"number"!=typeof this.parent.width||t||s?!t&&!s&&(e=this.calcMovableOrFreezeColWidth("movable")):e=(0,u.Ac)(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),e=this.isAutoResize()?"100%":e,this.parent.getHeaderContent().querySelector("."+io).firstElementChild&&(this.parent.getHeaderContent().querySelector("."+io).firstElementChild.style.width=e),this.parent.getContent().querySelector("."+Or).firstElementChild.style.width=e}setWidthToFrozenEditTable(){let e=this.calcMovableOrFreezeColWidth("freeze");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e}setWidthToMovableEditTable(){let e=this.calcMovableOrFreezeColWidth("movable");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e}setWidthToTable(){let e=(0,u.Ac)(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new gn({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);const t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)}isAutoResize(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode}}class Mu{constructor(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=e,this.rowModelGen=new oh(this.parent),this.addEventListener()}focusCheck(e){const t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")}onFocus(e){if(this.parent.isDestroyed||u.AR.isDevice||this.parent.enableVirtualization)return;this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&("Batch"!==this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&!this.parent.editModule.getBatchChanges()[Ua].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new Ta({isDataRow:!0})]}),this.getContent().selector,!1);const t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&(this.focus(e),this.skipFocus=!1)}passiveFocus(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,(0,u.cn)([this.currentInfo.element],["e-focused","e-focus"]))}onBlur(e){(this.parent.isEdit||e&&(!e.relatedTarget||(0,u.oq)(e.relatedTarget,".e-grid")))&&(!(0,u.le)(e.relatedTarget)||0!==parseInt(e.target.getAttribute("aria-colindex"),10)||0!==parseInt(e.target.getAttribute("index"),10))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.parent.element.tabIndex=0)}onClick(e,t){if(Zi(e.target,"e-filterbarcell")&&(Zi(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))return;let s=!(0,u.le)((0,u.oq)(e.target,"."+ll));const n=!(0,u.le)((0,u.oq)(e.target,"."+rl));s=s&&n?!s:s;let r=!(0,u.le)((0,u.oq)(e.target,"."+ga))||!(0,u.le)((0,u.oq)(e.target,"."+Wa)),h=!1;if(this.parent.getFrozenMode()===fn&&(h=!(0,u.le)((0,u.oq)(e.target,".e-frozen-right-content"))||!(0,u.le)((0,u.oq)(e.target,".e-frozen-right-header")),r=r&&!h),!s&&(0,u.le)((0,u.oq)(e.target,"."+rl))||e.target.classList.contains(Jo)||!(0,u.le)((0,u.oq)(e.target,".e-unboundcell")))return;if(this.setActive(s,r,h),!s&&(0,u.le)((0,u.oq)(e.target,"."+rl)))return void this.clearOutline();const m={cancel:!1,byKey:!1,byClick:!(0,u.le)(e.target),clickArgs:e};if(this.parent.notify(th,m),!m.cancel&&!(0,u.oq)(e.target,".e-inline-edit")&&(this.setActive(s,r,h),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}onKeyPress(e){if(this.skipOn(e))return;this.activeKey=e.action;const t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(th,t),t.cancel)return;const s=this.getContent().matrix.current;this.currentInfo.outline=!0;const n=this.getContent().jump(e.action,s);if(this.swap=n,n.swap&&(this.setActive(!n.toHeader,n.toFrozen,n.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(s,n,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1===(!this.content.lastIdxCell&&this.getContent().onKeyPress(e)))return this.clearIndicator(),void("shiftTab"===e.action&&s.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1));e.preventDefault(),this.focus(e)}skipOn(e){const t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;const s=(0,u.oq)(t,"th")&&!(0,u.oq)(t,"th").tabIndex;e.target.classList.contains("e-filterbaroperator")&&(13===e.keyCode||27===e.keyCode)&&(0,u.oq)(e.target,".e-filterbarcell").querySelector("input").focus(),s&&null!==(0,u.oq)(document.activeElement,".e-filterbarcell")&&this.removeFocus();let n=null!==(0,u.oq)(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&n){const r=this.active.matrix,h=r.current;n=r.matrix[h[0]].lastIndexOf(1)!==h[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||n||null!==(0,u.oq)(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===(0,u.oq)(t,"."+ll)&&null===(0,u.oq)(t,"."+rl)||"space"===e.action&&!t.classList.contains(Sh)&&null===(0,u.oq)(t,"."+Sh)&&null===(0,u.oq)(t,".e-headerchkcelldiv")||null!==(0,u.oq)(t,".e-filter-popup")}focusVirtualElement(e){if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){const t={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(vh,t);const s=this.actions.some(r=>r===this.activeKey),n=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;t.isAdd||Object.keys(t.virtualData).length||s||t.isCancel||n?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),t.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,s&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1}getFocusedElement(){return this.currentInfo.elementToFocus}getContent(){return this.active||this.content}setActive(e,t,s){this.active=e?t?this.fContent:s?this.frContent:this.content:t?this.fHeader:s?this.frHeader:this.header}setFocusedElement(e,t){this.currentInfo.elementToFocus=e,setTimeout(()=>{(0,u.le)(this.currentInfo.elementToFocus)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.focusVirtualElement(t):this.currentInfo.elementToFocus.focus())},0)}focus(e){this.parent.notify("virtaul-cell-focus",e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)}removeFocus(e){!this.currentInfo.element||((0,u.IV)([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)}addOutline(){const e=this.getContent().getFocusInfo();e.element&&((0,u.cn)([e.element],["e-focused"]),(0,u.cn)([e.elementToFocus],["e-focus"]))}focusHeader(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()}focusContent(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()}resetFocus(){const e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()}addFocus(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!(0,u.le)(t),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!e.element)return;const s=e.elementToFocus.classList.contains("e-focus");if(s)return;this.currentInfo.outline&&(0,u.cn)([e.element],["e-focused"]),(0,u.cn)([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,s||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(sd,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!(0,u.le)(t),byClick:(0,u.le)(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!(0,u.le)(t),swapInfo:this.swap});const[n,r]=this.getContent().matrix.current;this.prevIndexes={rowIndex:n,cellIndex:r},this.focusedColumnUid=this.parent.getColumnByIndex(r).uid,this.focusByClick=!1}refreshMatrix(e){return t=>{e&&t.args&&t.args.isFrozen&&!this.fContent?this.fContent=new Ef(this.parent):e&&!this.frContent&&t.args&&t.args.renderFrozenRightContent?this.frContent=new wg(this.parent):e&&!this.content&&(this.content=new Wc(this.parent)),!e&&t.args&&t.args.isFrozen&&!this.fHeader?this.fHeader=new Df(this.parent):!e&&t.args&&t.args.renderFrozenRightContent&&!this.frHeader?this.frHeader=new Tf(this.parent):!e&&!this.header&&(this.header=new dc(this.parent));const s=e?t.args&&t.args.isFrozen?this.fContent:t.args&&t.args.renderFrozenRightContent?this.frContent:this.content:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header;let n=e?t.rows.slice(this.parent.frozenRows):t.rows;const r=e?t.rows.slice(0,this.parent.frozenRows):t.rows;this.parent.isCollapseStateEnabled()&&e&&(n=n.filter(T=>!1!==T.visible));const h=!(0,u.le)(this.parent.rowTemplate),m=s.matrix.generate(r,s.selector,h);if("batchAdd"===t.name&&this.parent.isFrozenGrid()){const V=this.parent.getMovableRowsObject().map(se=>se.clone()),Y=n.map(se=>se.clone());if(this.fContent.matrix.generate(Y,this.fContent.selector,h),this.content.matrix.generate(V,this.content.selector,h),this.parent.getFrozenMode()===fn){const ge=this.parent.getFrozenRightRowsObject().map(ke=>ke.clone());this.frContent.matrix.generate(ge,this.frContent.selector,h)}}else s.matrix.generate(n,s.selector,h);if(s.generateRows(r,{matrix:m,handlerInstance:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header}),!u.AR.isDevice&&t&&t.args&&(!this.focusByClick&&"paging"===t.args.requestType&&(this.skipFocus=!1,this.parent.element.focus()),"grouping"===t.args.requestType&&(this.skipFocus=!0)),t&&t.args&&"virtualscroll"===t.args.requestType)if(this.currentInfo.uid){let T;if(t.rows.some((Y,se)=>(T=se,Y.uid===this.currentInfo.uid))){this.content.matrix.current[0]=T,this.content.matrix.current[1]=this.parent.getColumnIndexByUid(this.focusedColumnUid)||0;const Y=this.getContent().getFocusInfo().elementToFocus;if(Y){const se=Y.getBoundingClientRect(),ge=this.parent.element.getBoundingClientRect();se.top>=0&&se.left>=0&&se.right<=Math.min(ge.right,window.innerWidth||document.documentElement.clientWidth)&&se.bottom<=Math.min(ge.bottom,window.innerHeight||document.documentElement.clientHeight)&&(this.isVirtualScroll=!0,this.focus())}}}else if(t.args.focusElement&&t.args.focusElement.classList.contains("e-filtertext")){const T=this.parent.element.querySelector("#"+t.args.focusElement.id);T&&T.focus()}}}addEventListener(){this.parent.isDestroyed||(u.bi.add(this.parent.element,"mousedown",this.focusCheck,this),u.bi.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=e=>this.passiveFocus(e),!0),u.bi.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Ko,handler:this.onKeyPress},{event:Ll,handler:this.onClick},{event:F,handler:this.refMatrix},{event:Rc,handler:this.refMatrix},{event:Da,handler:this.refMatrix},{event:ei,handler:this.refreshMatrix()},{event:yf,handler:this.restoreFocus},{event:Hh,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:me,handler:this.refMatrix},{event:Te,handler:this.refMatrix},{event:Je,handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:U,handler:this.refMatrix},{event:sd,handler:this.internalCellFocus}],pl(this.parent,this.evtHandlers,!0,this))}filterfocus(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()}removeEventListener(){this.parent.isDestroyed||(u.bi.remove(this.parent.element,"mousedown",this.focusCheck),u.bi.remove(this.parent.element,"focus",this.onFocus),u.bi.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),pl(this.parent,this.evtHandlers,!1))}destroy(){this.removeEventListener()}restoreFocus(){this.addFocus(this.getContent().getFocusInfo())}restoreFocusWithAction(e){if(!this.parent.enableInfiniteScrolling){const t=this.getContent().matrix,s=t.current;switch(e.requestType){case"grouping":case"ungrouping":s[1]=!s.length||this.parent.groupSettings.showGroupedColumn||(0,u.le)(t.matrix[s[0]])?"grouping"===e.requestType?s[1]+1:s[1]-1:t.matrix[s[0]].indexOf(1)}this.getContent().matrix.current=s,this.addFocus(this.getContent().getFocusInfo())}}clearOutline(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()}clearIndicator(){!this.currentInfo.element||!this.currentInfo.elementToFocus||(0,u.IV)([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])}getPrevIndexes(){const e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes}forgetPrevious(){this.forget=!0}setActiveByKey(e,t){if(!this.parent.isFrozenGrid()&&0===this.parent.frozenRows)return;let s;const n={home:()=>({toHeader:!s.isContent,toFrozen:!0}),end:()=>({toHeader:!s.isContent,toFrozen:!1}),ctrlHome:()=>({toHeader:!0,toFrozen:this.parent.isFrozenGrid()}),ctrlEnd:()=>({toHeader:!1,toFrozen:!1})};if(!(e in n))return;s=t.getInfo();const r=n[e]();this.setActive(!r.toHeader,r.toFrozen),this.getContent().matrix.current=t.matrix.current}internalCellFocus(e){if(!(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))))return;this.clearIndicator();const t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}}class Sf{constructor(){this.matrix=[],this.current=[]}set(e,t,s){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=s?1:0}get(e,t,s,n,r){const h=t;if(e+s[0]<0)return[e,t];e=Math.max(0,Math.min(e+s[0],this.rows));let m=!0;if((0,u.le)(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+s[1],this.matrix[e].length-1)),h+s[1]>this.matrix[e].length-1&&r(e,t,n))return[e,h];const T=this.first(this.matrix[e],t,s,!0,n),V=(0,u.NA)(`${e}.${t=null===T?h:T}`,this.matrix);if(e===this.rows&&("downArrow"===n||"enter"===n)&&(s[0]=-1),null===T){for(let Y=0;Y<this.rows;Y++)if(this.matrix[Y].some(se=>1===se)){m=!1;break}if(m)return[e=this.current[0],t]}return this.inValid(V)||!r(e,t,n)?this.get(e,h,s,n,r):[e,t]}first(e,t,s,n,r){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==r&&"downArrow"!==r||!e.some(h=>1===h)?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(r)?n?0:++t:t+s[1],s,!1,r):t}select(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]}generate(e,t,s){this.rows=e.length-1,this.matrix=[];for(let n=0;n<e.length;n++){const r=e[n].cells.filter(h=>!0!==h.isSpanned);this.columns=Math.max(r.length-1,0|this.columns);for(let h=0;h<r.length;h++)this.set(n,h,!1!==e[n].visible&&t(e[n],r[h],s))}return this.matrix}inValid(e){return 0===e||void 0===e}}class Wc{constructor(e){this.matrix=new Sf,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=t=>({home:[this.matrix.current[0],-1,0,1],end:[this.matrix.current[0],this.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[this.matrix.rows,this.matrix.columns+1,0,-1]}[t]||null)}getTable(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()}onKeyPress(e){let s=this.getCurrentFromAction(e.action,this.keyActions[e.action],e.action in this.keyActions,e);if(s){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===s.toString()){if(s.toString()===[this.matrix.rows,this.matrix.columns].toString()||s.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===s.toString())return!1;s=this.editNextRow(s[0],s[1],e.action)}this.matrix.select(s[0],s[1])}}editNextRow(e,t,s){const n=this.parent,r=n.editSettings.allowNextRowEdit&&(n.isEdit||n.isLastCellPrimaryKey),h=n.getColumnIndexByField(n.getVisibleColumns()[0].field),m=this.getTable().rows[e].cells[t];return"tab"===s&&r&&(e++,t=h+(this.getTable().rows[e].getElementsByClassName("e-indentcell").length+this.getTable().rows[e].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===s&&r&&(e--,t=n.getColumnIndexByField(n.getVisibleColumns()[n.getVisibleColumns().length-1].field)),m.classList.contains(Cr)||m.classList.contains("e-headercell")||m.classList.contains("e-groupcaption")?[e,t]:this.editNextRow(e,t,s)}getCurrentFromAction(e,t=[0,0],s,n){if(!s&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(n))return this.matrix.current;const[r,h,m,T]=this.indexesByKey(e)||[...this.matrix.current,...t];return this.matrix.get(r,h,[m,T],e,this.validator())}onClick(e,t){let s=e.target;if(this.target=s,s=s.classList.contains(Cr)?s:(0,u.oq)(s,"td"),s=s||(0,u.oq)(e.target,"td.e-detailrowcollapse")||(0,u.oq)(e.target,"td.e-detailrowexpand"),s=(0,u.oq)(e.target,"td.e-detailcell")&&(0,u.le)((0,u.oq)((0,u.oq)(e.target,".e-grid"),"td.e-detailcell"))?null:s,s=s&&(0,u.oq)(s,"table").classList.contains(yo)?s:null,!s)return!1;const[n,r]=[s.parentElement.rowIndex,s.cellIndex],[h,m]=this.matrix.current,T=(0,u.NA)(`${n}.${r}`,this.matrix.matrix);if(this.matrix.inValid(T)||!t&&h===n&&m===r||!Zi(e.target,Cr)&&!Zi(e.target,"e-groupcaption"))return!1;this.matrix.select(n,r)}getFocusInfo(){const e={},[t=0,s=0]=this.matrix.current;return this.matrix.current=[t,s],e.element=(0,u.le)(this.getTable().rows[t])?null:this.getTable().rows[t].cells[s],e.element&&(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e}getFocusable(e){let t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';const s=!(0,u.le)((0,u.oq)(e,".e-templatecell"));this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');const n=[].slice.call(e.querySelectorAll(t));return n.length?s&&n.length>1?this.target:n[0]:e}selector(e,t,s){const n=[Ys.Expand,Ys.GroupCaption,Ys.CaptionSummary,Ys.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===Ys.DetailExpand&&(0,u.le)(t.visible)||!e.isDataRow&&n.indexOf(t.cellType)>-1||t.column&&t.visible&&"checkbox"===t.column.type||t.cellType===Ys.CommandColumn||e.isDataRow&&s)&&!("delete"===e.edit&&e.isDirty)}nextRowFocusValidate(e){const t=e;for(let s=e,n=this.matrix.rows;s<=n;s++){if(-1!==this.matrix.matrix[e].indexOf(1))return e;e+=1}return this.lastIdxCell=!0,t}previousRowFocusValidate(e){const t=e;for(let s=e,n=0;s>=n;s--){if(-1!==this.matrix.matrix[e].indexOf(1))return e;if((e-=1)<0)return this.lastIdxCell=!0,t}return t}jump(e,t){let s=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftTab"===e)&&0===t[1];const n=("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,r=this.parent.getFrozenMode()===fn&&n;"Right"===this.parent.getFrozenMode()&&(s=n),this.lastIdxCell=!1;const h=0!==this.parent.frozenRows&&"shiftEnter"===e;"tab"===e&&!this.parent.isEdit&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==t[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,s=this.parent.isFrozenGrid()),"shiftTab"===e&&!this.parent.isEdit&&0!==t[0]&&this.matrix.matrix[t[0]].indexOf(1)===t[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);let m=!1;const T=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&T.classList.contains(Lr)&&(m=parseInt(T.getAttribute(xn),10)>0),{swap:!m&&(("upArrow"===e||h)&&0===t[0]||s||r),toHeader:("upArrow"===e||h)&&0===t[0],toFrozen:s,toFrozenRight:r}}getNextCurrent(e=[],t,s,n){const r=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===fn?(("leftArrow"===n||"shiftTab"===n)&&(r[0]=e[0],r[1]=s.matrix.columns+1),this.parent.getFrozenMode()===fn&&("rightArrow"===n||"tab"===n)&&(r[0]=e[0],r[1]=-1)):("rightArrow"===n||"tab"===n)&&(r[0]=e[0],r[1]=-1),("downArrow"===n||"enter"===n)&&(r[0]=-1,r[1]=e[1]),r}generateRows(e,t){const{matrix:s,handlerInstance:n}=t,r=n.matrix.matrix.length,h=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?r+1:r;n.matrix.matrix=n.matrix.matrix.slice(0,h),n.matrix.rows=h,n.matrix.matrix.push(...s),n.matrix.rows+=s.length}getInfo(e){const t=this.getFocusInfo(),[s,n]=this.matrix.current,r=t.element.classList.contains(Cr),h=r||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),[m,T]=[Math.min(parseInt(t.element.parentElement.getAttribute(xn),10),s),Math.min(parseInt(t.element.getAttribute(go),10),n)];return{isContent:!0,isDataCell:r,indexes:[m,T],isSelectable:h}}validator(){const e=this.getTable();return(t,s,n)=>{if(!(0,u.le)(e.rows[t])){let r;s=e.querySelector(".e-emptyrow")?0:s,r=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[s]:e.rows[t].cells[s];const h=0!==r.getBoundingClientRect().width;if("enter"===n||"shiftEnter"===n)return h&&r.classList.contains(Cr);if(("shiftUp"===n||"shiftDown"===n)&&r.classList.contains(Cr))return h;if("shiftUp"!==n&&"shiftDown"!==n)return h}return!1}}shouldFocusChange(e){const[t=-1,s=-1]=this.matrix.current;if(t<0||s<0)return!0;const n=(0,u.NA)(`${t}.cells.${s}`,this.getTable().rows);return!n||"enter"!==e.action&&"shiftEnter"!==e.action||n.classList.contains(Cr)&&!n.classList.contains("e-unboundcell")&&(!n.classList.contains("e-templatecell")||n.classList.contains("e-editedbatchcell"))&&!n.classList.contains("e-detailcell")}getGridSeletion(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection}}class dc extends Wc{constructor(e){super(e)}getTable(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()}onClick(e){let t=e.target;if(this.target=t,t=t.classList.contains("e-headercell")?t:(0,u.oq)(t,"th"),!t&&0!==this.parent.frozenRows&&(t=e.target.classList.contains(Cr)?e.target:(0,u.oq)(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(!t)return;const[s,n]=[t.parentElement.rowIndex,t.cellIndex],r=(0,u.NA)(`${s}.${n}`,this.matrix.matrix);if(this.matrix.inValid(r))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}getFocusInfo(){const e={},[t=0,s=0]=this.matrix.current;return e.element=this.getTable().rows[t].cells[s],(0,u.le)(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e}selector(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate||!(0,u.le)(t.column.template))||"checkbox"===t.column.type||t.cellType===Ys.StackedHeader}jump(e,t){let s=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];const n=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,r=this.parent.getFrozenMode()===fn&&n;"Right"===this.parent.getFrozenMode()&&(s=n);const h=0!==this.parent.frozenRows&&"enter"===e;let m,T,V=s||r;const Y=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,se=Y&&!(0,u.le)(Y[t[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(T=this.matrix.matrix.length-1===t[0],m=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),m&&(this.matrix.current[0]=T?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&T&&m&&(s=!0,V=!1)),{swap:("downArrow"===e||h)&&t[0]===this.matrix.matrix.length-1||se&&(s||r)||"tab"===e&&T&&m,toHeader:V,toFrozen:s,toFrozenRight:r}}getNextCurrent(e=[],t,s,n){const r=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===fn?(("leftArrow"===n||"shiftLeft"===n&&this.getGridSeletion()||"shiftTab"===n)&&(r[0]=e[0],r[1]=s.matrix.columns+1),this.parent.getFrozenMode()===fn&&("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(r[0]=e[0],r[1]=-1)):("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(r[0]=e[0],r[1]=-1),("upArrow"===n||"shiftEnter"===n)&&(r[0]=this.matrix.matrix.length,r[1]=e[1]),r}generateRows(e){const t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;const s=e[0].cells;for(let n=0;n<s.length;n++)this.matrix.set(t,n,s[n].visible&&!1!==s[n].column.allowFiltering)}}getInfo(e){return(0,u.l7)(super.getInfo(e),{isContent:!1,isHeader:!0})}validator(){return()=>!0}shouldFocusChange(e){const[t,s]=this.matrix.current;if(t<0||s<0)return!0;const n=(0,u.NA)(`${t}.cells.${s}`,this.getTable().rows);return!n||"enter"!==e.action&&"altDownArrow"!==e.action||!n.classList.contains("e-headercell")}}class Ef extends Wc{getTable(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")}jump(e,t){const n=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return"Right"===this.parent.getFrozenMode()?{swap:n||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:n,toFrozen:n}:{swap:n||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:n,toFrozen:n}}getNextCurrent(e=[],t,s,n){const r=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===n||"tab"===n)&&(r[0]=e[0],r[1]=-1):("tab"===n&&this.parent.enableHeaderFocus&&(r[0]=e[0],r[1]=-1),("leftArrow"===n||"shiftTab"===n)&&(r[0]=e[0],r[1]=s.matrix.columns+1)),("downArrow"===n||"enter"===n)&&(r[0]=-1,r[1]=e[1]),r}}class Df extends dc{jump(e,t){const s=0!==this.parent.frozenRows&&"enter"===e,n=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,r=n&&!(0,u.le)(n[t[0]]);if("Right"===this.parent.getFrozenMode()){const h=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||s)&&t[0]===this.matrix.matrix.length-1||r&&h,toHeader:h,toFrozen:("downArrow"===e||s)&&t[0]===this.matrix.matrix.length-1}}return{swap:("downArrow"===e||s)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns&&r,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||s)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")}getNextCurrent(e=[],t,s,n){const r=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(r[0]=e[0],r[1]=-1):("leftArrow"===n||"shiftLeft"===n&&this.getGridSeletion()||"shiftTab"===n)&&(r[0]=e[0],r[1]=s.matrix.columns+1),("upArrow"===n||"shiftEnter"===n)&&(r[0]=this.matrix.matrix.length,r[1]=e[1]),r}}class wp{constructor(e){this.searchBox=e}searchFocus(e){e.target.parentElement.classList.add("e-input-focus")}searchBlur(e){e.target.parentElement.classList.remove("e-input-focus")}wireEvent(){this.searchBox&&(u.bi.add(this.searchBox,"focus",this.searchFocus,this),u.bi.add(this.searchBox,"blur",this.searchBlur,this))}unWireEvent(){this.searchBox&&(u.bi.remove(this.searchBox,"focus",this.searchFocus),u.bi.remove(this.searchBox,"blur",this.searchBlur))}}class wg extends Wc{getTable(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")}jump(e,t){const n=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return{swap:n||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:n,toFrozenRight:n}}getNextCurrent(e=[],t,s,n){const r=[];return("rightArrow"===n||"tab"===n)&&(r[0]=e[0],r[1]=-1),("downArrow"===n||"enter"===n)&&(r[0]=-1,r[1]=e[1]),r}}class Tf extends dc{jump(e,t){const s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,n=s&&!(0,u.le)(s[t[0]]),r=0!==this.parent.frozenRows&&"enter"===e,h=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1||n&&h,toHeader:h,toFrozenRight:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")}getNextCurrent(e=[],t,s,n){const r=[];return("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(r[0]=e[0],r[1]=0),("upArrow"===n||"shiftEnter"===n)&&(r[0]=this.matrix.matrix.length,r[1]=e[1]),r}}var Uc=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class uc extends u.rt{}Uc([(0,u.Z9)(12)],uc.prototype,"pageSize",void 0),Uc([(0,u.Z9)(8)],uc.prototype,"pageCount",void 0),Uc([(0,u.Z9)(1)],uc.prototype,"currentPage",void 0),Uc([(0,u.Z9)()],uc.prototype,"totalRecordsCount",void 0),Uc([(0,u.Z9)(!1)],uc.prototype,"enableQueryString",void 0),Uc([(0,u.Z9)(!1)],uc.prototype,"pageSizes",void 0),Uc([(0,u.Z9)(null)],uc.prototype,"template",void 0);var pc=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class $a extends u.rt{}pc([(0,u.Z9)("startsWith")],$a.prototype,"operator",void 0),pc([(0,u.Z9)(!1)],$a.prototype,"ignoreAccent",void 0);class Sp{constructor(e,t,s){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=s.getService("rendererFactory"),this.focus=s.getService("focus"),this.addEventListener(),this.wireEvents()}initializeSelection(){this.parent.log("selection_key_missing"),this.render()}onActionBegin(e,t){this.parent.trigger(t,this.fDataUpdate(e))}fDataUpdate(e){if(!(this.isMultiSelection||(0,u.le)(e.cellIndex)&&(0,u.le)(e.rowIndex))){const t=this.getRowObj((0,u.le)(e.rowIndex)?(0,u.le)(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e}onActionComplete(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1}getModuleName(){return"selection"}destroy(){const e=this.parent.element;!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),u.bi.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),u.bi.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))}isEditing(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection}getSelectedMovableRow(e){const t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector("."+Or)?t.getMovableRowByIndex(e):null}getSelectedFrozenRightRow(e){const t=this.parent;return t.isFrozenGrid()&&t.getFrozenMode()===fn&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null}getCurrentBatchRecordChanges(){const e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){let t=Ed(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges()[Ua]):this.parent.editModule.getBatchChanges()[Ua].concat(t);const s=this.parent.editModule.getBatchChanges()[ac],n=this.parent.getPrimaryKeyFieldNames()[0];for(let r=0;r<s.length;r++)for(let h=0;h<t.length;h++)if(s[r][n]===t[h][n]){t.splice(h,1);break}return t}return e.getCurrentViewRecords()}selectRow(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)return void this.addRowsToSelection([e]);const s=this.parent,n=s.getRowByIndex(e),r=this.getSelectedMovableRow(e),h=this.getSelectedFrozenRightRow(e);let m;if(s.enableVirtualization&&e>-1){const ge={selectedIndex:e,isAvailable:!0};this.parent.notify("select-virtual-Row",ge);const ke=s.isFrozenGrid()?s.contentModule.getRowObjectByIndex(e):null;if(!n||!s.getRowObjectFromUID(n.getAttribute("data-uid"))&&!ke)return void(ge.isAvailable&&!s.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());m=ke||s.getRowObjectFromUID(n.getAttribute("data-uid")).data}else m=this.getRowObj(e).data;if(!this.isRowType()||!n||this.isEditing())return;const V=n.hasAttribute("aria-selected");let Y;this.activeTarget(),t=t&&!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length)&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&e===this.selectedRowIndexes[0],this.isKeyAction=!1,t?this.rowSelectingCallBack(Y,t,e,m,!1,V,"cancel")(Y):(Y={data:m,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:s.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},Y=this.addMovableArgs(Y,r,h),this.parent.trigger(tl,this.fDataUpdate(Y),this.rowSelectingCallBack(Y,t,e,m,!1,V,"cancel")))}rowSelectingCallBack(e,t,s,n,r,h,m){return T=>{(0,u.le)(T)||!0!==T[m]?(this.index=s,this.toggle=t,this.data=n,this.removed=r,h&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?(this.clearSelectedRow(s),this.selectRowCallBack()):!h&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&this.selectRowCallBack(),"ResetOnRowClick"===this.selectionSettings.checkboxMode&&this.clearSelection(),(!this.selectionSettings.persistSelection||"ResetOnRowClick"===this.selectionSettings.checkboxMode||!this.parent.isCheckBoxSelection&&this.selectionSettings.persistSelection)&&(this.selectRowCheck=!0,this.clearRow())):this.disableInteracted()}}selectRowCallBack(){const e=this.parent;let t;const s=this.index,n=this.toggle,r=this.data,h=this.removed,m=e.getRowByIndex(s),T=this.getSelectedMovableRow(s),V=this.getSelectedFrozenRightRow(s);!n&&!h&&(this.selectedRowIndexes.indexOf(s)<=-1&&(this.updateRowSelection(m,s),this.selectMovableRow(T,V,s)),this.selectRowIndex(s)),n||(t={data:r,rowIndex:s,row:m,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},t=this.addMovableArgs(t,T,V),this.onActionComplete(t,qr)),this.isInteracted=!1,this.updateRowProps(s)}selectMovableRow(e,t,s){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,s),this.parent.getFrozenMode()===fn&&t&&this.updateRowSelection(t,s))}addMovableArgs(e,t,s){if(this.parent.isFrozenGrid()){const n={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]},r="frozenRightRow",h="previousFrozenRightRow";this.parent.getFrozenMode()===fn&&s&&(n[r]=s,n[h]=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=Object.assign({},e,n)}return e}selectRowsByRange(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)}selectedDataUpdate(e,t,s,n){for(let r=0,h=n.length;r<h;r++){const m=this.parent.getDataRows()[n[r]],T=this.getRowObj(m);T&&(e.push(T.data),s.push(m),t.push(T.foreignKeyData))}}selectRows(e){const t=this.parent,s=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;const n=[],r=[],h=this.getSelectedMovableRow(s),m=this.getSelectedFrozenRightRow(s),V=[];if(!this.isRowType()||this.isEditing())return;this.selectedDataUpdate(V,r,n,e),this.activeTarget();let Y={cancel:!1,rowIndexes:e,row:n,rowIndex:s,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:V,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:r};Y=this.addMovableArgs(Y,h,m),this.parent.trigger(tl,this.fDataUpdate(Y),se=>{if(!(0,u.le)(se)&&!0===se.cancel)return void this.disableInteracted();this.clearRow(),this.selectRowIndex(e.slice(-1)[0]);const ge=ke=>{if(this.updateRowSelection(t.getRowByIndex(ke),ke),t.isFrozenGrid()){const qe=this.parent.getFrozenMode()===fn?t.getFrozenRightRowByIndex(ke):void 0;this.selectMovableRow(t.getMovableRowByIndex(ke),qe,ke)}this.updateRowProps(s)};if(this.isSingleSel())ge(s);else for(const ke of e)ge(ke);se={rowIndexes:e,row:n,rowIndex:s,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,data:this.getSelectedRecords(),isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:r},se=this.addMovableArgs(se,h,m),this.isRowSelected&&this.onActionComplete(se,qr),this.isInteracted=!1})}addRowsToSelection(e){const t=this.parent,n=this.target;this.isMultiSelection=!0;const r=[],h=[],m=[],T=t.getSelectedRowIndexes().concat(e),V=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),Y=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),se=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)return;let ge;const ke=this.parent.getColumns().filter(qe=>"checkbox"===qe.type);this.isMultiCtrlRequest&&!ke.length&&this.selectedDataUpdate(m,h,r,T);for(const qe of e){const mt=this.getRowObj(qe),Vt=this.selectedRowIndexes.indexOf(qe)>-1;if(this.selectRowIndex(qe),Vt&&(ke.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(Ho,[qe],[mt.data],[V],[mt.foreignKeyData],n),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(qe),1),this.selectedRecords.splice(this.selectedRecords.indexOf(V),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),V.removeAttribute("aria-selected"),this.addRemoveClassesForRow(V,!1,null,"e-selectionbackground","e-active"),Y&&(this.selectedRecords.splice(this.selectedRecords.indexOf(Y),1),Y.removeAttribute("aria-selected"),this.addRemoveClassesForRow(Y,!1,null,"e-selectionbackground","e-active")),se&&(this.selectedRecords.splice(this.selectedRecords.indexOf(se),1),se.removeAttribute("aria-selected"),this.addRemoveClassesForRow(se,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(kl,[qe],[mt.data],[V],[mt.foreignKeyData],n,[Y],void 0,[se]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1}else{if(this.activeTarget(),ge={cancel:!1,data:m.length?m:mt.data,rowIndex:qe,row:r.length?r:V,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:h.length?h:mt.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:T},ge=this.addMovableArgs(ge,Y,se),this.parent.trigger(tl,this.fDataUpdate(ge)),!(0,u.le)(ge)&&!0===ge.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(V,qe),this.selectMovableRow(Y,se,qe)}if(Vt||(ge={data:m.length?m:mt.data,rowIndex:qe,row:r.length?r:V,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:h.length?h:mt.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:T},ge=this.addMovableArgs(ge,Y,se),this.onActionComplete(ge,qr)),this.isInteracted=!1,this.updateRowProps(qe),this.isSingleSel())break}}getCollectionFromIndexes(e,t){const s=[];let{i:n,max:r}=e<=t?{i:e,max:t}:{i:t,max:e};for(;n<=r;n++)s.push(n);return e>t&&s.reverse(),s}clearRow(){this.clearRowCheck=!0,this.clearRowSelection()}clearRowCallBack(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))}clearSelectedRow(e){if(this.toggle){const t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}}updateRowProps(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0}updatePersistCollection(e,t){if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!(0,u.le)(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();const s=this.getRowObj(e),n=s.data?s.data[this.primaryKey]:null;if(null===n)return;s.isSelected=t,t?(this.selectedRowState[n]=t,this.persistSelectedData.some(r=>r[this.primaryKey]===n)||this.persistSelectedData.push(s.data)):this.updatePersistDelete(n)}}updatePersistDelete(e){let t;delete this.selectedRowState[e],this.persistSelectedData.some((n,r)=>(t=r,n[this.primaryKey]===e))&&this.persistSelectedData.splice(t,1)}updateCheckBoxes(e,t,s){if(!(0,u.le)(e)){const n=e.querySelector(".e-checkselect");(0,u.le)(n)||(X(n.nextElementSibling,t),L(n,t),((0,u.le)(this.checkedTarget)||!(0,u.le)(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(s))}}updateRowSelection(e,t){if(!e)return;this.selectedRowIndexes.push(t);const s=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&s>1&&this.selectedRowIndexes[s-2]===this.selectedRowIndexes[s-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){let n=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(n=this.parent.contextMenuModule.cell),!n)return;this.focus.onClick({target:n},!0)}}clearSelection(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=Ed(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!(0,u.le)(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){const e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1}}clearRowSelection(){if(this.isRowSelected){const e=this.parent,t=this.parent.getDataRows(),s=[],n=[],r=[],h=[],m=[],T=[],V=this.target;for(let Y=0,se=this.selectedRowIndexes.length;Y<se;Y++){const ge="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[Y]]:this.parent.getDataRows()[this.selectedRowIndexes[Y]],ke=this.getRowObj(ge);if(ke&&(s.push(ke.data),n.push(ge),m.push(this.selectedRowIndexes[Y]),T.push(ke.foreignKeyData)),e.isFrozenGrid()){const qe=e.getMovableRows();if(qe&&qe.length&&r.push(qe[this.selectedRowIndexes[Y]]),e.getFrozenMode()===fn){const mt=e.getFrozenRightRows();mt&&mt.length&&h.push(mt[this.selectedRowIndexes[Y]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(Ho,m,s,n,T,V,r,()=>{if(this.isCancelDeSelect&&(this.isRowClicked||this.checkSelectAllClicked||this.isInteracted&&!this.parent.isPersistSelection)){if(this.parent.isPersistSelection)if("Intermediate"===this.getCheckAllStatus(this.parent.element.querySelector(".e-checkselectall")))for(let se=0;se<this.selectedRecords.length;se++)this.updatePersistCollection(this.selectedRecords[se],!0);else this.parent.checkAllRows="Check",this.updatePersistSelectedData(!0);return void(this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1)))}const Y=[].slice.call(t.filter(se=>se.hasAttribute("aria-selected")));for(let se=0;se<Y.length;se++)this.disableUI||(Y[se].removeAttribute("aria-selected"),this.addRemoveClassesForRow(Y[se],!1,!0,"e-selectionbackground","e-active")),this.isPrevRowSelection||this.updatePersistCollection(Y[se],!1),this.updateCheckBoxes(Y[se]);for(let se=0,ge=this.selectedRowIndexes.length;se<ge;se++){const ke=this.getSelectedMovableRow(this.selectedRowIndexes[se]);ke&&(this.disableUI||(ke.removeAttribute("aria-selected"),this.addRemoveClassesForRow(ke,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(ke),this.isPrevRowSelection||this.updatePersistCollection(ke,!1));const qe=this.getSelectedFrozenRightRow(this.selectedRowIndexes[se]);qe&&(this.disableUI||(qe.removeAttribute("aria-selected"),this.addRemoveClassesForRow(qe,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(qe),this.isPrevRowSelection||this.updatePersistCollection(qe,!1))}this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1),this.isPrevRowSelection=!1,this.rowDeselect(kl,m,s,n,T,V,r,void 0,h),this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},h)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))}rowDeselect(e,t,s,n,r,h,m,T,V){if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked)||!this.selectionSettings.persistSelection){const Y="cancel",se=1===t.length&&1===this.deSelectedData.length,ge={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!se&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:s,foreignKeyData:r,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete ge.cancel;const ke="row",qe="target",mt="rowIndex",Vt="rowIndexes",Qt="data",ai="foreignKeyData";ge[ke]=n,ge[qe]=this.actualTarget,this.actualTarget&&!(0,u.le)((0,u.oq)(this.actualTarget,"thead"))||t.length>1?(ge[mt]=t[0],ge[Vt]=t):1===t.length&&(ge[Qt]=ge[Qt][0],ge[ke]=ge[ke][0],ge[ai]=ge[ai][0],this.isAddRowsToSelection&&(ge[Vt]=t)),this.parent.trigger(e,this.parent.isFrozenGrid()?Object.assign({},ge,{mRow:m,frozenRightRow:V}):ge,Qi=>{this.isCancelDeSelect=Qi[Y],(!this.isCancelDeSelect||!this.isRowClicked&&!this.isInteracted&&!this.checkSelectAllClicked)&&(this.updatePersistCollection(n[0],!1),this.updateCheckBoxes(n[0],void 0,t[0]),m&&this.updateCheckBoxes(m[0],void 0,t[0]),V&&this.updateCheckBoxes(V[0],void 0,t[0])),void 0!==T&&T()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==T&&T()}getRowObj(e=this.currentIndex){return(0,u.le)(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})}getSelectedMovableCell(e){const t=this.parent,s=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===s.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null}selectCell(e,t){if(!this.isCellType())return;const s=this.parent;let r,n=this.getSelectedMovableCell(e);n||(n=s.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;const h=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isCellType()||!n||this.isEditing())return;const m=n.classList.contains("e-cellselectionbackground");(t=t&&!(0,u.o8)(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&m)?this.successCallBack(r,t,e,n,h)(r):(r={data:h,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},r.currentCell=n,r.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(Tn,this.fDataUpdate(r),this.successCallBack(r,t,e,n,h)),this.cellselected=!0)}successCallBack(e,t,s,n,r){return h=>{const T="currentCell";if(((0,u.le)(h)||!0!==h.cancel)&&(t||(h[T]=h[T]?h[T]:n),this.clearCell(),t||this.updateCellSelection(n,s.rowIndex,s.cellIndex),!t)){const V={data:r,cellIndex:s,currentCell:n,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};V.previousRowCellIndex=this.prevECIdxs,this.updateCellProps(s,s),this.onActionComplete(V,er)}}}getCellIndex(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)}selectCellsByRange(e,t){if(!this.isCellType())return;const s=this.parent;let n=this.getSelectedMovableCell(e);const r=s.getFrozenColumns();let h,m;n||(n=s.getCellFromIndex(e.rowIndex,e.cellIndex));const T=e,V=t=t||e;let Y;this.currentIndex=e.rowIndex;const ge=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const ke={data:ge,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};ke.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(Tn,this.fDataUpdate(ke),mt=>{if(!(0,u.le)(mt)&&!0===mt.cancel)return;if(this.clearCell(),e.rowIndex>t.rowIndex){const ai=e;e=t,t=ai}for(let ai=e.rowIndex;ai<=t.rowIndex;ai++){this.selectionSettings.cellSelectionMode.indexOf("Box")<0?(h=ai===e.rowIndex?e.cellIndex:0,m=ai===t.rowIndex?t.cellIndex:this.getLastColIndex(ai)):(h=e.cellIndex,m=t.cellIndex),Y=[];for(let ki=h<m?h:m,Qi=h>m?h:m;ki<=Qi;ki++)n=r?ki<r?s.getCellFromIndex(ai,ki):s.getMovableCellFromIndex(ai,ki):s.getCellFromIndex(ai,ki),n&&(Y.push(ki),this.updateCellSelection(n),this.addAttribute(n));this.selectedRowCellIndexes.push({rowIndex:ai,cellIndexes:Y})}const Vt={data:ge,cellIndex:V,currentCell:s.getCellFromIndex(V.rowIndex,V.cellIndex),selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};Vt.previousRowCellIndex=this.prevECIdxs,this.isDragged||(this.onActionComplete(Vt,er),this.cellselected=!0),this.updateCellProps(T,V)})}selectCells(e){if(!this.isCellType())return;const t=this.parent;let s=this.getSelectedMovableCell(e[0]);const n=t.getFrozenColumns();s||(s=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;const r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const h={data:r,cellIndex:e[0].cellIndexes[0],currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};h.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(h,Tn);for(let Y=0,se=e.length;Y<se;Y++)for(let ge=0,ke=e[Y].cellIndexes.length;ge<ke;ge++)s=n?e[Y].cellIndexes[ge]<n?t.getCellFromIndex(e[Y].rowIndex,e[Y].cellIndexes[ge]):t.getMovableCellFromIndex(e[Y].rowIndex,e[Y].cellIndexes[ge]):t.getCellFromIndex(e[Y].rowIndex,e[Y].cellIndexes[ge]),s&&(this.updateCellSelection(s),this.addAttribute(s),this.addRowCellIndex({rowIndex:e[Y].rowIndex,cellIndex:e[Y].cellIndexes[ge]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});const T={data:r,cellIndex:e[0].cellIndexes[0],currentCell:s,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};T.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(T,er)}addCellsToSelection(e){if(!this.isCellType())return;const t=this.parent;let s,n;this.currentIndex=e[0].rowIndex;const h=this.getCurrentBatchRecordChanges()[this.currentIndex],m=t.getFrozenLeftCount(),T=t.getMovableColumnsCount();if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;this.hideAutoFill();const V=t.getColumnByIndex(e[0].cellIndex);let Y;tu(this.parent,(ge,ke)=>{Y=ke[e[0].rowIndex]},[V.getFreezeTableName()&&V.getFreezeTableName()!==Qo?[]:t.getRowsObject(),"movable"===V.getFreezeTableName()?t.getMovableRowsObject():[],V.getFreezeTableName()===vo?t.getFrozenRightRowsObject():[]]);const se=[];for(const ge of e){for(let Qt=0,ai=this.selectedRowCellIndexes.length;Qt<ai;Qt++)if(this.selectedRowCellIndexes[Qt].rowIndex===ge.rowIndex){n=Qt;break}s=this.getSelectedMovableCell(ge),s||(s=t.getCellFromIndex(ge.rowIndex,this.getColIndex(ge.rowIndex,ge.cellIndex)));const ke="movable"===V.getFreezeTableName()?ge.cellIndex-m:V.getFreezeTableName()===vo?ge.cellIndex-(m+T):ge.cellIndex;se.push(Y.cells[ke].foreignKeyData);const qe={cancel:!1,data:h,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},mt="previousRowCellIndex";qe[mt]=this.prevECIdxs;let Vt=n>-1;if(Vt){const Qt=this.selectedRowCellIndexes[n].cellIndexes;Qt.indexOf(ge.cellIndex)>-1?(this.cellDeselect(pr,[{rowIndex:ge.rowIndex,cellIndexes:[ge.cellIndex]}],h,[s],se),Qt.splice(Qt.indexOf(ge.cellIndex),1),0===Qt.length&&this.selectedRowCellIndexes.splice(n,1),s.classList.remove("e-cellselectionbackground"),s.removeAttribute("aria-selected"),this.cellDeselect(Kr,[{rowIndex:ge.rowIndex,cellIndexes:[ge.cellIndex]}],h,[s],se)):(Vt=!1,this.onActionBegin(qe,Tn),this.addRowCellIndex({rowIndex:ge.rowIndex,cellIndex:ge.cellIndex}),this.updateCellSelection(s),this.addAttribute(s))}else{if(this.onActionBegin(qe,Tn),!(0,u.le)(qe)&&!0===qe.cancel)return;this.updateCellSelection(s,ge.rowIndex,ge.cellIndex)}if(!Vt){const Qt={data:h,cellIndex:e[0],currentCell:s,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};Qt[mt]=this.prevECIdxs,this.onActionComplete(Qt,er),this.cellselected=!0}this.updateCellProps(ge,ge)}}getColIndex(e,t){const s=this.parent.isFrozenGrid(),n=this.parent.getColumnByIndex(t),r=V0(this.parent,n,e);if(r)for(let h=0;h<r.length;h++)if(parseInt(r[h].getAttribute(go),10)===t)return s&&("movable"===n.getFreezeTableName()?h+=this.parent.getFrozenLeftCount():n.getFreezeTableName()===vo&&(h+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),h;return-1}getLastColIndex(e){const t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(go),10)}clearCell(){this.clearCellSelection()}cellDeselect(e,t,s,n,r){n[0]&&n[0].classList.contains(Sh)&&this.updateCheckBoxes((0,u.oq)(n[0],"tr"));const m={cells:n,data:s,cellIndexes:t,foreignKeyData:r,cancel:!1};this.parent.trigger(e,m),this.isPreventCellSelect=m.cancel}updateCellSelection(e,t,s){(0,u.le)(t)||this.addRowCellIndex({rowIndex:t,cellIndex:s}),e.classList.add("e-cellselectionbackground"),e.classList.contains(Sh)&&this.updateCheckBoxes((0,u.oq)(e,"tr"),!0),this.addAttribute(e)}addAttribute(e){this.target=e,(0,u.le)(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))}updateCellProps(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0}addRowCellIndex(e){let t,s;for(let n=0,r=this.selectedRowCellIndexes.length;n<r;n++)if(this.selectedRowCellIndexes[n].rowIndex===e.rowIndex){t=!0,s=n;break}t?this.selectedRowCellIndexes[s].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[s].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})}clearCellSelection(){if(this.isCellSelected){const e=this.parent,t=this.getSelectedCellsElement(),s=this.selectedRowCellIndexes,n=[],r=[],h=[],m=this.getCurrentBatchRecordChanges(),T=e.isFrozenGrid();this.hideAutoFill();for(let V=0,Y=s.length;V<Y;V++){n.push(m[s[V].rowIndex]);const se=this.getRowObj(s[V].rowIndex);for(let ge=0,ke=s[V].cellIndexes.length;ge<ke;ge++)if(T){const qe=e.getColumnByIndex(s[V].cellIndexes[ge]);r.push(km(this.parent,qe,s[V].rowIndex,s[V].cellIndexes[ge]))}else se.cells&&h.push(se.cells[s[V].cellIndexes[ge]].foreignKeyData),r.push(e.getCellFromIndex(s[V].rowIndex,s[V].cellIndexes[ge]))}if(this.cellDeselect(pr,s,n,r,h),!0===this.isPreventCellSelect)return;for(let V=0,Y=t.length;V<Y;V++)t[V].classList.remove("e-cellselectionbackground"),t[V].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(Kr,s,n,r,h)}}getSelectedCellsElement(){const e=this.parent;let s,t=e.getDataRows();e.isFrozenGrid()&&(s=e.getMovableDataRows(),t=e.addMovableRows(t,s),e.getFrozenMode()===fn&&(t=e.addMovableRows(t,e.getFrozenRightDataRows())));let n=[];for(let r=0,h=t.length;r<h;r++)n=n.concat([].slice.call(t[r].getElementsByClassName("e-cellselectionbackground")));return n}mouseMoveHandler(e){e.preventDefault();const t=this.parent.element.getBoundingClientRect();let s=this.x,n=this.y;const r=Pa(e);let T,h=r.x-t.left,m=r.y-t.top,V=(0,u.oq)(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(V||(V=(0,u.oq)(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),s>h&&(T=h,h=s,s=T),n>m&&(T=m,m=n,n=T),this.element.style.left=s+"px",this.element.style.top=n+"px",this.element.style.width=h-s+"px",this.element.style.height=m-n+"px"),V&&!e.ctrlKey&&!e.shiftKey){const Y=parseInt(V.getAttribute(xn),10);if(this.isCellDrag){const se=Zi(e.target,Cr);se&&(this.startAFCell=this.startCell,this.endAFCell=Zi(e.target,Cr),this.selectLikeExcel(e,Y,parseInt(se.getAttribute(go),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,Y),this.isRowDragSelected=!0}}selectLikeExcel(e,t,s){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:s}),this.drawBorders())}drawBorders(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")}isLastCell(e){const t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e}isLastRow(e){const t=[].slice.call((0,u.oq)(e,vs).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]}isFirstRow(e){const t=[].slice.call((0,u.oq)(e,vs).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]}isFirstCell(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e}setBorders(e,t,s){const n=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(r=>""===r.style.display);if(n.length){const r=this.parent.isFrozenGrid(),h=n[0],m=n[n.length-1],T=h.getBoundingClientRect(),V=m.getBoundingClientRect(),Y=h.offsetParent.getBoundingClientRect(),se=!this.isLastRow(m)||"1"!==s&&"2"!==s&&"5"!==s?0:2,ge=this.parent.frozenRows&&("1"===s||"2"===s)&&this.isFirstRow(h)?1.5:0,ke=r&&("2"===s||"4"===s)&&this.isFirstCell(h)?1:0,qe=("Right"!==this.parent.getFrozenMode()||"1"!==s&&"3"!==s)&&(this.parent.getFrozenMode()!==fn||"5"!==s&&"6"!==s)||!this.isFirstCell(h)?0:1;this.parent.enableRtl?(t.style.right=Y.right-T.right-ke+"px",t.style.width=T.right-V.left+ke+1+"px"):(t.style.left=T.left-Y.left-ke-qe+"px",t.style.width=V.right-T.left+ke-qe+1+"px"),t.style.top=T.top-Y.top-ge+"px",t.style.height=V.top-T.top>0?V.top-Y.top+V.height+1-(T.top-Y.top)-se+ge+"px":V.height+ge-se+1+"px",this.selectDirection+=s}else t.style.display="none"}positionBorders(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===fn&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===fn&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))}applyBothFrozenBorders(e){const t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}}applyBorders(e){const t=this.parent.enableRtl;if(this.parent.getFrozenMode()===fn)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}}createBorders(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild((0,u.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild((0,u.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===fn&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild((0,u.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild((0,u.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild((0,u.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===fn&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild((0,u.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))}showHideBorders(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,this.parent.getFrozenMode()===fn&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,this.parent.getFrozenMode()===fn&&(this.frhBdrElement.style.display=e)))}drawAFBorders(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()}positionAFBorders(){if(!this.startCell||!this.bdrAFLeft)return;const e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),s=t.top-e.top>0?1:0,n=t.top-e.top>=0&&(Zi(this.startAFCell,Or)||Zi(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,r=(Zi(this.startAFCell,Or)||Zi(this.startAFCell,io))&&this.isFirstCell(this.startAFCell)?1:0,h=this.isLastRow(this.endAFCell)&&(Zi(this.endAFCell,Or)||Zi(this.endAFCell,"e-frozencontent"))?2:0,m=this.startAFCell.offsetParent.getBoundingClientRect(),T=this.parent.element.getBoundingClientRect();let se=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,ge=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft;const ke=this.parent.element.clientHeight,qe=this.parent.element.clientWidth;se=se>0?Math.floor(se)-1:0,ge=ge>0?ge:0;const mt=e.left-T.left;if(this.parent.enableRtl){const Vt=Zi(this.startAFCell,Or)||Zi(this.startAFCell,io)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-T.left:0;this.bdrAFLeft.style.right=T.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=qe<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=T.right-e.right-r+Vt-1+"px",this.bdrAFTop.style.left=t.left-T.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-r+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=mt-r+ge-1+"px",this.bdrAFRight.style.left=t.left-T.left-2+t.width+"px",this.bdrAFRight.style.width=qe<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=mt+ge-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-r+1+"px",qe<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){const Vt=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-qe;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-Vt+"px"}if(this.bdrAFLeft.style.top=e.top-T.top-n+se+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-m.top+t.height+1-(e.top-m.top)+n-h-se+"px":t.height+n-h-se+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-s-1+"px",this.bdrAFBottom.style.width=ke<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,ke<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){const Vt=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-ke;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-Vt+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}createAFBorders(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild((0,u.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild((0,u.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild((0,u.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild((0,u.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))}showAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")}hideAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")}updateValue(e,t,s){const n=this.createBeforeAutoFill(e,t,s);if(!n.cancel){const r=this.parent.getColumnByIndex(t);this.parent.editModule&&s&&this.parent.editModule.updateCell(e,r.field,"number"===r.type?parseFloat(n.value):n.value)}}createBeforeAutoFill(e,t,s){const r={column:this.parent.getColumnByIndex(t),value:s.innerText};return this.parent.trigger("beforeAutoFill",r),r}getAutoFillCells(e,t){const s=".e-cellselectionbackground";let n=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(s));return this.parent.isFrozenGrid()&&(n=n.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(s))),this.parent.getFrozenMode()===fn&&(n=n.concat([].slice.call(this.parent.getFrozenRightDataRows()[e].querySelectorAll(s))))),n}selectLikeAutoFill(e,t){const s=parseInt(Zi(this.startAFCell,Lr).getAttribute(xn),10),n=parseInt(this.startAFCell.getAttribute(go),10);let r=parseInt(Zi(this.endAFCell,Lr).getAttribute(xn),10),h=parseInt(this.endAFCell.getAttribute(go),10);const m=this.selectedRowCellIndexes.length-1,T=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!Zi(e.target,Cr):this.startAFCell=this.parent.getCellFromIndex(s,n),this.endAFCell=this.parent.getCellFromIndex(s+m,n+T),this.drawAFBorders();break;case this.autoFillRLselection&&n+T<h&&h-n-T+1>r-s-m&&h-n-T+1>s-r:if(this.endAFCell=this.parent.getCellFromIndex(s+m,h),r=parseInt(Zi(this.endAFCell,Lr).getAttribute(xn),10),h=parseInt(this.endAFCell.getAttribute(go),10),t){const V=parseInt(this.endCell.getAttribute(go),10);for(let Y=s;Y<=r;Y++){const se=this.getAutoFillCells(Y,n);let ge=0;for(let ke=V+1;ke<=h;ke++)ge>T&&(ge=0),this.updateValue(Y,ke,se[ge]),ge++}this.selectCellsByRange({rowIndex:s,cellIndex:this.startCellIndex},{rowIndex:r,cellIndex:h})}else this.drawAFBorders();break;case this.autoFillRLselection&&n>h&&n-h+1>r-s-m&&n-h+1>s-r:if(this.startAFCell=this.parent.getCellFromIndex(s,h),this.endAFCell=this.endCell,t){for(let V=s;V<=s+m;V++){const Y=this.getAutoFillCells(V,n);Y.reverse();let se=0;for(let ge=this.startCellIndex-1;ge>=h;ge--)se>T&&(se=0),this.updateValue(V,ge,Y[se]),se++}this.selectCellsByRange({rowIndex:s,cellIndex:h},{rowIndex:s+m,cellIndex:this.startCellIndex+T})}else this.drawAFBorders();break;case s>r:if(this.startAFCell=this.parent.getCellFromIndex(r,n),this.endAFCell=this.endCell,t){const V=parseInt(this.endCell.parentElement.getAttribute(xn),10);let Y=V;for(let se=s-1;se>=r;se--){Y===this.startIndex-1&&(Y=V);const ge=this.getAutoFillCells(Y,n);let ke=0;Y--;for(let qe=this.startCellIndex;qe<=this.startCellIndex+T;qe++)this.updateValue(se,qe,ge[ke]),ke++}this.selectCellsByRange({rowIndex:r,cellIndex:n+T},{rowIndex:s+m,cellIndex:n})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(r,n+T),t){const V=parseInt(this.endCell.parentElement.getAttribute(xn),10);let Y=this.startIndex;for(let se=V+1;se<=r;se++){Y===V+1&&(Y=this.startIndex);const ge=this.getAutoFillCells(Y,n);Y++;let ke=0;for(let qe=this.startCellIndex;qe<=this.startCellIndex+T;qe++)this.updateValue(se,qe,ge[ke]),ke++}this.selectCellsByRange({rowIndex:V-m,cellIndex:n},{rowIndex:r,cellIndex:n+T})}else this.drawAFBorders()}}mouseUpHandler(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&(0,u.Od)(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?Zi(e.target,Cr):null,this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e.target.classList.contains(Cr)){const t=e.target,s=parseInt(t.parentElement.getAttribute(xn),10),n=parseInt(t.getAttribute(go),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:s,cellIndex:n})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){const t=Zi(e.target,Cr);this.endAFCell=t||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}u.bi.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&u.bi.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),u.bi.remove(document,"mouseup",this.mouseUpHandler)}hideAutoFill(){this.autofill&&(this.autofill.style.display="none")}updateAutoFillPosition(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){const e=parseInt(this.target.getAttribute(go),10),t=parseInt(this.target.getAttribute("index"),10),n=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,e).filter(Y=>""===Y.style.display),r=this.parent.getColumnByIndex(e),h="movable"===r.getFreezeTableName(),m=t<this.parent.frozenRows,T=this.parent.getFrozenMode()===fn&&r.getFreezeTableName()===vo;(0,u.Ys)("#"+this.parent.element.id+"_autofill",Zi(this.target,yo))||((0,u.Ys)("#"+this.parent.element.id+"_autofill",this.parent.element)&&(0,u.Ys)("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=(0,u.az)("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",m?h?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):h?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),T&&(m?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));const V=n[n.length-1];if(V&&V.offsetParent){const Y=V.getBoundingClientRect(),se=V.offsetParent.getBoundingClientRect(),ge=this.isLastCell(V)?4:0,ke=this.isLastRow(V)?3:0;this.parent.enableRtl?this.autofill.style.right=se.right-Y.right+Y.width-4-ge+"px":this.autofill.style.left=Y.left-se.left+Y.width-4-ge+"px",this.autofill.style.top=Y.top-se.top+Y.height-5-ke+"px"}this.autofill.style.display=""}else this.hideAutoFill()}mouseDownHandler(e){this.mouseButton=e.button;const t=e.target,s=this.parent;let n;const r=Zi(t,"e-grid");if(!(r&&r.id!==s.element.id||Zi(t,Lo)&&!this.parent.frozenRows||Zi(t,"e-editedbatchcell")||Zi(t,Nl))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),Zi(t,Cr)&&!e.shiftKey&&!e.ctrlKey){if(s.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,n=!0;else if(s.allowRowDragAndDrop&&!s.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||(0,u.oq)(t,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);n=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),s.getContent().appendChild(this.element)}n&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}}updateStartEndCells(){const e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(xn),10),this.startCellIndex=parseInt(Zi(this.startCell,Cr).getAttribute(go),10))}updateStartCellsIndex(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(xn),10),this.startCellIndex=parseInt(Zi(this.startCell,Cr).getAttribute(go),10))}enableDrag(e,t){const s=this.parent;if(t){const h=(0,u.oq)(e.target,"tr");this.startDIndex=parseInt(h.getAttribute(xn),10),this.startDCellIndex=parseInt(Zi(e.target,Cr).getAttribute(go),10)}document.body.classList.add("e-disableuserselect");const n=s.element.getBoundingClientRect(),r=Pa(e);this.x=r.x-n.left,this.y=r.y-n.top,u.bi.add(s.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&u.bi.add(s.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),u.bi.add(document,"mouseup",this.mouseUpHandler,this)}clearSelAfterRefresh(e){"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==e.requestType)&&this.clearSelection()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:H,handler:this.enableAfterRender},{event:it,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:pe,handler:this.onPropertyChanged},{event:sd,handler:this.onCellFocused},{event:af,handler:this.clearSelAfterRefresh},{event:Ph,handler:this.columnPositionChanged},{event:F,handler:this.initialEnd},{event:ih,handler:this.rowsRemoved},{event:ei,handler:this.refreshHeader},{event:Tr,handler:this.destroy}],pl(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(lr,this.actionBeginFunction),this.parent.addEventListener(vn,this.actionCompleteFunction),this.addEventListener_checkbox())}removeEventListener(){this.parent.isDestroyed||(pl(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(lr,this.actionBeginFunction),this.parent.removeEventListener(vn,this.actionCompleteFunction),this.removeEventListener_checkbox())}wireEvents(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS&&(u.bi.add(this.parent.element,"keydown",this.keyDownHandler,this),u.bi.add(this.parent.element,"keyup",this.keyUpHandler,this))}unWireEvents(){this.isMacOS&&(u.bi.remove(this.parent.element,"keydown",this.keyDownHandler),u.bi.remove(this.parent.element,"keyup",this.keyUpHandler))}columnPositionChanged(){this.parent.isPersistSelection||this.clearSelection()}refreshHeader(){this.setCheckAllState()}rowsRemoved(e){for(let t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()}beforeFragAppend(e){"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&this.clearSelection()}getCheckAllBox(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())}render(e){u.bi.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),u.bi.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=this.parent;!(0,u.le)(e.properties.type)&&"Single"===this.selectionSettings.type&&(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(!(0,u.le)(e.properties.mode)||!(0,u.le)(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(n=>"checkbox"===n.type).length&&(t.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}hidePopUp(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")}initialEnd(e){const t=this.parent.isFrozenGrid(),s=this.parent.getFrozenMode()===fn;(!t||t&&!s&&!e.args.isFrozen||s&&e.args.renderFrozenRightContent)&&!this.selectedRowIndexes.length&&(this.parent.off(F,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))}checkBoxSelectionChanged(){const e=this.parent;e.off(F,this.checkBoxSelectionChanged);const t=e.getColumns().filter(s=>"checkbox"===s.type);t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,(0,u.le)(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())}initPerisistSelection(){const e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})}ensureCheckboxFieldSelection(){const e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){const t=this.parent.getDataModule(),s=(new bt.AE).where(this.chkField,"equal",!0);s.params||(s.params=this.parent.query.params);const n=t.getData({},s),r=this;this.parent.showSpinner(),n.then(h=>{r.dataSuccess(h.result),r.refreshPersistSelection(),r.parent.hideSpinner()})}}dataSuccess(e){for(let t=0;t<e.length;t++)(0,u.le)(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e}setRowSelection(e){if(!this.parent.getDataModule().isRemote())if(e)if(this.parent.groupSettings.columns.length)for(const t of this.getData().records)this.selectedRowState[t[this.primaryKey]]=!0;else for(const t of this.getData())this.selectedRowState[t[this.primaryKey]]=!0;else this.selectedRowState={}}getData(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))}refreshPersistSelection(){let e=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),this.parent.getFrozenMode()===fn&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==e&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){const t=[];for(let s=0;s<e.length;s++){const n=this.getRowObj(e[s]),r=n&&n.data?n.data[this.primaryKey]:null;if(null===r)return;let h;const m=e[s].querySelector(".e-checkselect");this.selectedRowState[r]||"Check"===this.parent.checkAllRows&&this.selectedRowState[r]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(r)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(r)>0||"Intermediate"===this.parent.checkAllRows&&!(0,u.le)(this.chkField)&&n.data[this.chkField]?(t.push(parseInt(e[s].getAttribute(xn),10)),h=!0):(h=!1,this.checkedTarget!==m&&this.parent.isCheckBoxSelection&&m&&X(m.nextElementSibling,h)),this.updatePersistCollection(e[s],h)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()}actionBegin(e){if("save"===e.requestType&&this.parent.isPersistSelection){const t=this.parent.element.querySelector(".e-edit-checkselect");if(!(0,u.le)(t)){let s=(0,u.oq)(t,"."+Nl);if(s){"Dialog"===this.parent.editSettings.mode&&(s=this.parent.element.querySelector(".e-dlgeditrow"));const n=this.getRowObj(s);if(!n)return;this.selectedRowState[n.data[this.primaryKey]]=n.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}}actionComplete(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){const t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){const s=e.data.slice();for(let n=0;n<s.length;n++)(0,u.le)(s[n][this.primaryKey])||this.updatePersistDelete(s[n][this.primaryKey]);this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)}onDataBound(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&(this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.refreshPersistSelection()),this.parent.enableVirtualization&&this.setCheckAllState(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){const e=this.parent.getRowsObject(),t=[];for(let s=0;s<e.length;s++)e[s].isSelected&&t.push(s);t.length&&this.selectRows(t),this.initialRowSelection=!0}}updatePersistSelectedData(e){if(this.parent.isPersistSelection){const t=this.parent.getRows();for(let s=0;s<t.length;s++)this.updatePersistCollection(t[s],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}}checkSelectAllAction(e){const t=this.getRenderer(),s=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!(0,u.le)(s)){const n=s.querySelector(".e-edit-checkselect");(0,u.le)(n)||X(n.nextElementSibling,e)}}checkSelectAll(e){const t=this.getCheckAllStatus(e);let s="Check"===t;this.isHeaderCheckboxClicked=!0,"Intermediate"===t&&(s=this.getCurrentBatchRecordChanges().some(n=>n[this.primaryKey]in this.selectedRowState)),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!s),this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!s)}getCheckAllStatus(e){const t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;let s;return s=t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None",s}checkSelect(e){const t=(0,u.oq)(this.checkedTarget,"."+Cr),s=this.parent;this.isMultiCtrlRequest=!0;let n=0;if(this.isHeaderCheckboxClicked=!1,vt(s)){const r=t.parentElement.getAttribute("data-uid");n=s.getRows().map(h=>h.getAttribute("data-uid")).indexOf(r)}else n=parseInt(t.parentElement.getAttribute(xn),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(ra).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++n,this.rowCellSelectionHandler(n,parseInt(t.getAttribute(go),10)),this.moveIntoUncheckCollection((0,u.oq)(t,"."+Lr)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))}moveIntoUncheckCollection(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){const t=this.getRowObj(e),s=t&&t.data?t.data[this.primaryKey]:null;if(!s)return;this.chkAllCollec.indexOf(s)<0?this.chkAllCollec.push(s):this.chkAllCollec.splice(this.chkAllCollec.indexOf(s),1)}}triggerChkChangeEvent(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)}updateSelectedRowIndex(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote())if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];const t=this.getData().length;for(let s=0;s<t;s++)this.selectedRowIndexes.push(s)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{const t=this.parent.getRowByIndex(e);if(e&&t&&"false"===t.getAttribute("aria-selected")){const s=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(s,1)}}}isAllSelected(){const e=this.getData();for(let t=0;t<e.length;t++)if(!this.selectedRowState[e[t][this.primaryKey]])return!1;return!0}setCheckAllState(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){let s=!0,n=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!this.parent.getDataModule().isRemote()&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(s=this.isAllSelected());const r=this.getCheckAllBox();if(r){const h=r.nextElementSibling;(0,u.IV)([h],["e-check","e-stop","e-uncheck"]),L(r,!1),r.indeterminate=!1,s&&n===this.totalRecordsCount&&this.totalRecordsCount||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.getData().length&&n===this.getData().length?((0,u.cn)([h],["e-check"]),L(r,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):!this.selectedRowIndexes.length||0===n&&0===this.getCurrentBatchRecordChanges().length?((0,u.cn)([h],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===n&&0===this.getCurrentBatchRecordChanges().length?(0,u.cn)([h.parentElement],["e-checkbox-disabled"]):(0,u.IV)([h.parentElement],["e-checkbox-disabled"])):((0,u.cn)([h],["e-stop"]),this.parent.checkAllRows="Intermediate",r.indeterminate=!0),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.updateSelectedRowIndex(e)}}}keyDownHandler(e){(("chrome"===u.AR.info.name||"safari"===u.AR.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===u.AR.info.name&&17===e.keyCode||"mozilla"===u.AR.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0)}keyUpHandler(e){(("chrome"===u.AR.info.name||"safari"===u.AR.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===u.AR.info.name&&17===e.keyCode||"mozilla"===u.AR.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)}clickHandler(e){let t=e.target;this.actualTarget=t,this.selectionSettings.persistSelection&&(this.deSelectedData=Ed(this.persistSelectedData)),(Zi(t,Lr)||Zi(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);let n,s=!1;this.preventFocus=!0;const r=Zi(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(r&&r.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&Zi(t,Lr)),r&&r.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(n=r.querySelector('input[type="checkbox"]'),s=!0),this.drawBorders(),this.updateAutoFillPosition(),t=Zi(t,Cr),(t&&t.parentElement.classList.contains(Lr)&&!this.parent.selectionSettings.checkboxOnly||s)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,(0,u.le)(n)){const h=this.parent;let m=0;if(vt(h)){const T=t.parentElement.getAttribute("data-uid");m=h.getRows().map(V=>V.getAttribute("data-uid")).indexOf(T)}else m=parseInt(t.parentElement.getAttribute(xn),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(ra).length>0&&++m,(!this.mUPTarget||!this.mUPTarget.isEqualNode(t))&&this.rowCellSelectionHandler(m,parseInt(t.getAttribute(go),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection((0,u.oq)(t,"."+Lr)),this.setCheckAllState())}else this.checkedTarget=n,n.classList.contains("e-checkselectall")?this.checkSelectAll(n):this.checkSelect(n);!this.parent.isCheckBoxSelection&&u.AR.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){const h=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(h))}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,(0,u.le)((0,u.oq)(e.target,".e-unboundcell"))&&(this.preventFocus=!1)}popUpClickHandler(e){const t=e.target;(0,u.oq)(t,".e-headercell")||e.target.classList.contains(Cr)||(0,u.oq)(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"}showPopup(e){this.selectionSettings.enableSimpleMultiRowSelection||Ap(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))}rowCellSelectionHandler(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!(0,u.oq)(this.target,"."+Cr).classList.contains(Sh)?this.selectRowsByRange((0,u.o8)(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange((0,u.o8)(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1}onCellFocused(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)e.isJump=this.parent.allowFiltering?"INPUT"===e.element.tagName:"TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){const T=Number(e.element.parentElement.getAttribute(xn));e.isJump=0===T}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);const t=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),s=e.container.isHeader&&"TD"!==e.element.tagName&&!(0,u.oq)(e.element,"."+Cr)&&!(e.byKey&&"space"===e.keyArgs.action);if(!e.byKey||t)return void(t&&!this.parent.isCheckBoxSelection&&this.clearSelection());let[n,r]=e.container.isContent?e.container.indexes:e.indexes;const h=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||(0,u.oq)(e.element,"."+Cr))){const T=this.parent.getHeaderTable().querySelector("thead").childElementCount;n-=T,h.rowIndex=(0,u.le)(h.rowIndex)?null:h.rowIndex-T}else n+=this.parent.frozenRows,h.rowIndex=0!==h.rowIndex&&(0,u.le)(h.rowIndex)?null:h.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){const T=Number(e.element.getAttribute(go)),V=this.parent.getSelectedRowCellIndexes();V.length&&0===h.cellIndex&&(h.cellIndex=V[V.length-1].cellIndexes[0]),h.cellIndex=(0,u.le)(h.cellIndex)?null:h.cellIndex===r?T:T-1,r=T}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(n=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)),(s||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&n===h.rowIndex&&r===h.cellIndex)&&!this.selectionSettings.allowColumnSelection)return;this.preventFocus=!0;const m=this.getKeyColIndex(e);switch(this.needColumnSelection&&(r=m),e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(n,r);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(n,r);break;case"shiftDown":case"shiftUp":this.shiftDownKey(n,r);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(n,r);break;case"home":case"end":r="end"===e.keyArgs.action?this.getLastColIndex(n):0,this.applyHomeEndKey(n,r);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(n,r);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(n)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}getKeyColIndex(e){let t,s=null;const n=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&Zi(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,n){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return s;t=n.getAttribute("e-mappinguid");const r=this.getstackedColumns(this.parent.getColumnByUid(t).columns),h=this.parent.getColumnIndexByUid(r[r.length-1].uid),m=this.parent.getColumnIndexByUid(r[0].uid);s=this.prevColIndex>=h?m:h}else s=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return s}ctrlPlusA(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})}applySpaceSelection(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))}applyDownUpKey(e,t){const s=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.selectRow(e,!0),this.applyUpDown(s.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)}applyUpDown(e){if(e<0)return;this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);const t=parseInt(this.target.getAttribute(go),10),s=this.parent.getFrozenColumns();if(s)this.target=t>=s?this.contentRenderer.getMovableRowByIndex(e).getElementsByClassName(Cr)[t-s]:this.contentRenderer.getRowByIndex(e).getElementsByClassName(Cr)[t];else{const n=this.contentRenderer.getRowByIndex(e);n&&(this.target=n.getElementsByClassName(Cr)[t])}this.addAttribute(this.target)}applyRightLeftKey(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))}applyHomeEndKey(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))}shiftDownKey(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&((0,u.o8)(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}applyShiftLeftRightKey(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}getstackedColumns(e){const t=[];for(let s=0,n=e.length;s<n;s++)e[s].columns?this.getstackedColumns(e[s].columns):t.push(e[s]);return t}applyCtrlHomeEndKey(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)}addRemoveClassesForRow(e,t,s,...n){if(e){const r=[].slice.call(e.getElementsByClassName(Cr)),h=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),m=e.querySelector(".e-rowdragdrop");h&&r.push(h),m&&r.push(m),o(r,t,...n)}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,s)}isRowType(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isCellType(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isSingleSel(){return"Single"===this.selectionSettings.type}getRenderer(){return(0,u.le)(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(dl.Content)),this.contentRenderer}getSelectedRecords(){let e=[];return e=this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter(t=>t.isSelected).map(t=>t.data),e}selectColumn(e){const t=this.parent;if((0,u.le)(t.getColumns()[e]))return;const s=t.getColumnByIndex(e),n=t.getColumnHeaderByUid(s.uid),r=n.classList.contains("e-columnselection");if(!t.selectionSettings.allowColumnSelection)return;const h=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!r||!this.selectionSettings.enableToggle||h){const m={columnIndex:e,headerCell:n,column:s,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(m,il),m.cancel)return void this.disableInteracted();(!t.selectionSettings.enableToggle||e!==this.prevColIndex||!r||h)&&this.updateColSelection(n,e),this.onActionComplete({columnIndex:e,headerCell:n,column:s,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},Tl)}this.updateColProps(e)}selectColumnsByRange(e,t){const s=this.parent;if((0,u.le)(s.getColumns()[e]))return;const n=[];if("Single"===s.selectionSettings.type||(0,u.le)(t))n[0]=e;else{const r=e<t;for(let h=e;r?h<=t:h>=t;r?h++:h--)n.push(h)}this.selectColumns(n)}selectColumns(e){const t=this.parent;let s=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),!t.selectionSettings.allowColumnSelection)return;this.clearColDependency();const n={columnIndex:e[0],headerCell:s,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,il),n.cancel)return void this.disableInteracted();for(let h=0,m=e.length;h<m;h++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[h]).uid),e[h]);s=this.getselectedCols();const r={columnIndex:e[0],headerCell:s,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(r,Tl),this.updateColProps(e[0])}selectColumnWithExisting(e){const t=this.parent;if((0,u.le)(t.getColumns()[e]))return;const s=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid);let n=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{const r={columnIndex:e,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,il),r.cancel)return void this.disableInteracted();this.updateColSelection(s,e),n=this.getselectedCols();const h={columnIndex:e,headerCell:n,column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(h,Tl)}this.updateColProps(e)}}clearColumnSelection(e){if(this.isColumnSelected){const t=this.parent;if(!(0,u.le)(e)&&-1===this.selectedColumnsIndexes.indexOf(e))return;const s=(0,u.le)(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,n=t.getColumnByIndex(s);let r;const h=t.getColumnByIndex(s);r=n.getFreezeTableName()===vo?t.getFrozenRightColumnHeaderByIndex(s):"movable"===n.getFreezeTableName()?t.getMovableColumnHeaderByIndex(s):t.getColumnHeaderByUid(h.uid);const m={columnIndex:s,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:h,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(m,"columnDeselecting"))return void this.disableInteracted();const V=(0,u.le)(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[r],Y=this.getSelectedColumnCells(e);for(let se=0,ge=V.length;se<ge;se++)o([V[se]],!1,"e-columnselection");for(let se=0,ge=Y.length;se<ge;se++)o([Y[se]],!1,"e-columnselection");(0,u.le)(e)?(this.columnDeselect(m,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(se=>se.isSelected=!1)):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[e].isSelected=!1)}}getselectedCols(){const e=this.parent;let t;if(this.selectedColumnsIndexes.length>1){t=[];for(let s=0;s<this.selectedColumnsIndexes.length;s++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[s]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t}getSelectedColumnCells(e){const t=this.parent,s=!(0,u.le)(this.parent.rowTemplate);let r,h,n=s?t.getRows():t.getDataRows();t.isFrozenGrid()&&t.getContent().querySelector("."+Or)&&(r=s?t.getMovableRows():t.getMovableDataRows(),n=t.addMovableRows(n,r),t.getFrozenMode()===fn&&(h=s?t.getFrozenRightRows():t.getFrozenRightDataRows(),n=t.addMovableRows(n,h)));let m=[];const T=(0,u.le)(e)?".e-columnselection":'[aria-colindex="'+e+'"]';for(let V=0,Y=n.length;V<Y;V++)m=m.concat([].slice.call(n[V].querySelectorAll(T)));return m}columnDeselect(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel}updateColProps(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0}clearColDependency(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]}updateColSelection(e,t){if((0,u.le)(this.parent.getColumns()[t]))return;const s=this.parent.getFrozenLeftCount(),n=this.parent.getMovableColumnsCount(),r=this.parent.getColumnByIndex(t),h=!(0,u.le)(this.parent.rowTemplate);let m;this.selectedColumnsIndexes.push(t),this.parent.getColumns()[t].isSelected=!0,r.getFreezeTableName()===vo?(t-=s+n,m=h?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===r.getFreezeTableName()?(t-=s,m=h?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),m=h?this.parent.getRows():this.parent.getDataRows()),o([e],!0,"e-columnselection");for(let T=0,V=m.length;T<V;T++)m[T].classList.contains(Lr)&&(!m[T].classList.contains(Nl)&&!m[T].classList.contains(ra)||"Normal"!==this.parent.editSettings.mode||(0,u.le)(m[T].querySelector("tr").childNodes[t])?(0,u.le)(m[T].childNodes[t])||o([m[T].childNodes[t]],!0,"e-columnselection"):o([m[T].querySelector("tr").childNodes[t]],!0,"e-columnselection"))}headerSelectionHandler(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange((0,u.o8)(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)}addEventListener_checkbox(){this.parent.on(Qe,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Oo,this.onDataBoundFunction),this.parent.on(fp,this.onDataBoundFunction),this.parent.on(F,this.checkBoxSelectionChanged,this),this.parent.on(Su,this.initPerisistSelection,this),this.parent.on(U,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(vn,this.actionCompleteFunc),this.parent.on(Ll,this.clickHandler,this),this.resizeEndFn=()=>{this.updateAutoFillPosition(),this.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(cl,this.resizeEndFn)}removeEventListener_checkbox(){this.parent.off(Qe,this.dataReady),this.parent.removeEventListener(Oo,this.onDataBoundFunction),this.parent.removeEventListener(vn,this.actionCompleteFunc),this.parent.off(fp,this.onDataBoundFunction),this.parent.off(U,this.setCheckAllForEmptyGrid),this.parent.off(Ll,this.clickHandler),this.parent.off(Su,this.initPerisistSelection)}setCheckAllForEmptyGrid(){const e=this.getCheckAllBox();e&&(this.parent.isCheckBoxSelection=!0,(0,u.IV)([e.nextElementSibling],["e-check","e-stop","e-uncheck"]))}dataReady(e){this.isHeaderCheckboxClicked=!1,"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==e.requestType)&&(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)}actionCompleteHandler(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()}selectRowIndex(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e}disableInteracted(){this.isInteracted=!1}activeTarget(){this.actualTarget=this.isInteracted?this.actualTarget:null}}class Ep{constructor(e){this.parent=e,this.addEventListener()}search(e){const t=this.parent;e=(0,u.le)(e)?"":e,Rh(t)?t.notify(Ca,{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()}addEventListener(){this.parent.isDestroyed||(this.parent.on(pe,this.onPropertyChanged,this),this.parent.on(sa,this.onSearchComplete,this),this.parent.on(Tr,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(vn,this.actionCompleteFunc),this.parent.on(Ac,this.cancelBeginEvent,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(pe,this.onPropertyChanged),this.parent.off(sa,this.onSearchComplete),this.parent.off(Tr,this.destroy),this.parent.removeEventListener(vn,this.actionCompleteFunc),this.parent.off(Ac,this.cancelBeginEvent))}destroy(){this.removeEventListener()}onPropertyChanged(e){e.module===this.getModuleName()&&((0,u.le)(e.properties.key)?this.parent.notify(Me,{requestType:"searching",type:lr}):this.parent.notify(Me,{requestType:"searching",type:lr,searchString:this.parent.searchSettings.key}))}onSearchComplete(e){this.parent.trigger(vn,(0,u.l7)(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:vn}))}onActionComplete(e){this.refreshSearch="searching"!==e.requestType}cancelBeginEvent(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)}getModuleName(){return"search"}}class Im{constructor(e){this.parent=e}show(e,t){const s=this.getToggleFields(e),n=this.getColumns(s,t);this.parent.notify(Jh,{module:"edit"});for(let r=0;r<n.length;r++)n[r].visible=!0;this.setVisible(n)}hide(e,t){const s=this.getToggleFields(e),n=this.getColumns(s,t);this.parent.notify(Jh,{module:"edit"});for(let r=0;r<n.length;r++)n[r].visible=!1;this.setVisible(n)}getToggleFields(e){let t=[];return t="string"==typeof e?[e]:e,t}getColumns(e,t){return Sd(e,n=>Sd(this.parent.columnModel,r=>{if(r[t]===n)return r})[0])}setVisible(e,t=[]){this.parent.trigger(lr,{requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:e},r=>{const h=this.parent.getColumns();if(e=(0,u.le)(e)?h:e,r.cancel)return this.parent.notify("reset-columns",{showHideArgs:r}),void(e.length>0&&(e[0].visible=!0));vt(this.parent)&&this.parent.contentModule.emptyVcRows(),this.parent.allowSelection&&this.parent.getSelectedRecords().length&&!this.parent.selectionSettings.persistSelection&&this.parent.clearSelection(),this.parent.enableColumnVirtualization?e.filter(V=>h.some(Y=>V.field===Y.field)).length&&this.parent.notify(Fl,e):this.parent.notify(Fl,e),this.parent.trigger(vn,{requestType:"columnstate",columns:t}),"All"!==this.parent.columnQueryMode&&this.parent.refresh()})}}class Qd{constructor(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new qc(e),this.addEventListener()}getModuleName(){return"scroll"}setWidth(e){this.parent.element.style.width=(0,u.Ac)(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()}setHeight(){let e=0;const t=this.parent.getContent().querySelector("."+Jo);let s=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(s=parseInt(s,10)-Qd.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){const n=this.parent.getHeaderContent().querySelector(vs);e=n?n.offsetHeight:0,n&&e&&(e-=n.getElementsByClassName(ra).length*this.parent.getRowHeight()),t.style.height=(0,u.Ac)(s-e)}else t.style.height=(0,u.Ac)(s);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()}setPadding(){const e=this.parent.getHeaderContent(),t=Qd.getScrollBarWidth()-this.getThreshold(),s=this.getCssProperties(),n="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===fn?"0.5px":"1px";e.querySelector("."+Lo).style[s.border]=t>0?n:"0px",e.style[s.padding]=t>0?t+"px":"0px"}removePadding(e){const t=this.getCssProperties(e),s=this.parent.getHeaderContent().querySelector("."+Lo);s.style[t.border]="",s.parentElement.style[t.padding]="";const n=this.parent.getFooterContent();n&&n.classList.contains("e-footerpadding")&&n.classList.remove("e-footerpadding")}refresh(){if("100%"!==this.parent.height)return;const e=this.parent.getContent();this.parent.element.style.height="100%";const t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)",this.parent.isFrozenGrid()&&(e.firstElementChild.style.height="calc(100% - "+gc()+"px)")}getThreshold(){return"mozilla"===u.AR.info.name?.5:1}addEventListener(){this.parent.isDestroyed||(this.parent.on(U,this.wireEvents,this),this.parent.on(F,this.wireEvents,this),this.parent.on(H,this.onPropertyChanged,this),this.parent.on(Vd,this.wireEvents,this),this.parent.on(ei,this.setScrollLeft,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(U,this.wireEvents),this.parent.off(F,this.wireEvents),this.parent.off(H,this.onPropertyChanged),this.parent.off(Vd,this.wireEvents),this.parent.off(ei,this.setScrollLeft))}setScrollLeft(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+Lo).scrollLeft=this.previousValues.left}onFrozenContentScroll(){return e=>{null===this.content.querySelector(vs)||this.parent.isPreventScrollEvent||(!(0,u.le)(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(jd,e),this.previousValues.top=e.target.scrollTop)}}onContentScroll(e){const t=e,s=t.classList.contains(Lo);return n=>{if(null===this.content.querySelector(vs)||this.parent.isPreventScrollEvent)return;const r=n.target,h=r.scrollLeft;if(!(0,u.le)(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(jd,{target:n.target,isLeft:this.previousValues.left!==h}),this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading){const T=this.previousValues.top<this.parent.getContent().firstElementChild.scrollTop;this.parent.notify("lazy-load-scroll-handler",{scrollDown:T})}this.parent.notify("virtual-scroll-edit",{});const m=r.classList.contains("e-summarycontent");this.previousValues.left!==h?(this.parent.notify(ic,n),t.scrollLeft=h,m&&(this.header.scrollLeft=h),this.previousValues.left=h,this.parent.notify("scroll",{left:h})):this.previousValues.top=s?r.scrollTop:this.previousValues.top}}onCustomScrollbarScroll(e,t){const s=e,n=t;return r=>{if(null===this.content.querySelector(vs))return;const m=r.target.scrollLeft;this.previousValues.left!==m&&(s.scrollLeft=m,n.scrollLeft=m,this.previousValues.left=m,this.parent.notify("scroll",{left:m}))}}onTouchScroll(e){const t=e;return s=>{if("mouse"===s.pointerType)return;const n=this.parent.isFrozenGrid(),r=this.getPointXY(s),h=t.scrollLeft+(this.pageXY.x-r.x),m=n?this.parent.getHeaderContent().querySelector("."+io):this.parent.getHeaderContent().querySelector("."+Lo),T=n?this.parent.getContent().querySelector("."+Or):this.parent.getContent().querySelector("."+Jo);this.previousValues.left===h||h<0||m.scrollWidth-m.clientWidth<h||(s.preventDefault(),m.scrollLeft=h,T.scrollLeft=h,n&&(this.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=h),this.pageXY.x=r.x,this.previousValues.left=h)}}setPageXY(){return e=>{"mouse"!==e.pointerType&&(this.pageXY=this.getPointXY(e))}}getPointXY(e){const t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t}getScrollbleParent(e){if(null===e)return null;const t=(0,u.le)(e.tagName)?e.scrollingElement:e,s=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==s&&"visible"!==s||"HTML"===e.tagName||"BODY"===e.tagName?e:this.getScrollbleParent(e.parentNode)}addStickyListener(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e?this.parentElement&&u.bi.add("HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,"scroll",this.makeStickyHeader,this):u.bi.remove(this.parentElement,"scroll",this.makeStickyHeader)}wireEvents(){if(this.oneTimeReady){const r=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+Jo),this.header=this.parent.getHeaderContent().querySelector("."+Lo);const h=this.content.querySelector("."+Or),m=this.header.querySelector("."+io),T=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(u.bi.add(r?m:this.header,"touchstart pointerdown",this.setPageXY(),this),u.bi.add(r?m:this.header,"touchmove pointermove",this.onTouchScroll(r?h:this.content),this)),this.parent.isFrozenGrid()?(u.bi.add(T,"scroll",this.onCustomScrollbarScroll(h,m),this),u.bi.add(h,"scroll",this.onCustomScrollbarScroll(T,m),this),u.bi.add(m,"scroll",this.onCustomScrollbarScroll(T,h),this),u.bi.add(this.content,"scroll",this.onFrozenContentScroll(),this),u.bi.add(m,"touchstart pointerdown",this.setPageXY(),this),u.bi.add(m,"touchmove pointermove",this.onTouchScroll(h),this),u.bi.add(h,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(u.AR.userAgent.toLowerCase())&&u.AR.isDevice||u.bi.add(h,"touchmove pointermove",this.onTouchScroll(m),this)):(u.bi.add(this.content,"scroll",this.onContentScroll(this.header),this),u.bi.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&u.bi.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}const e=this.parent.getContentTable();let t,s,n;Rf(()=>{t=this.header.scrollLeft,s=e.scrollHeight,n=this.parent.getContent().clientHeight},()=>{const r={cancel:!1};this.parent.notify("check-scroll-reset",r),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(s<n&&((0,u.cn)(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isFrozenGrid()&&((0,u.cn)(this.parent.getContent().querySelector("."+Or).querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.getFrozenRightColumnsCount()&&(0,u.cn)(this.parent.getContent().querySelector(".e-frozen-right-content").querySelectorAll("tr:last-child td"),"e-lastrowcell"))),r.cancel||((this.parent.frozenRows>0||this.parent.isFrozenGrid())&&this.header.querySelector("."+io)?this.header.querySelector("."+io).scrollLeft=this.previousValues.left:this.header.scrollLeft=this.previousValues.left,this.content.scrollLeft=this.previousValues.left,this.content.scrollTop=this.previousValues.top)),this.parent.enableColumnVirtualization||(this.content.scrollLeft=t),this.parent.isFrozenGrid()&&this.header.querySelector("."+io)&&(this.header.querySelector("."+io).scrollLeft=this.content.querySelector("."+Or).scrollLeft)}),this.parent.isPreventScrollEvent=!1}getCssProperties(e){const t={},s=(0,u.le)(e)?this.parent.enableRtl:e;return t.border=s?"borderLeftWidth":"borderRightWidth",t.padding=s?"paddingLeft":"paddingRight",t}ensureOverflow(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"}onPropertyChanged(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!(0,u.le)(e.properties.width)))}makeStickyHeader(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){const e=this.parent.getContent().getClientRects()[0];if(e){const t=this.parent.getHeaderContent(),s=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),r=t.offsetHeight+(s?s.offsetHeight:0)+(n?n.offsetHeight:0),h=this.parentElement.getClientRects()[0].top,T=e.left;if(e.top-(h<0?0:h)<r&&e.bottom>0){t.classList.add("e-sticky");let V=0;n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,V,e.width,T,!0),V+=n.getClientRects()[0].height),s&&(this.setSticky(s,V,e.width,T,!0),V+=s.getClientRects()[0].height),this.setSticky(t,V,e.width,T,!0)}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),s&&this.setSticky(s,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1);const V=this.parent.element.querySelector(".e-ccdlg");V&&V.classList.remove("e-sticky")}this.parent.notify("sticky-scroll-complete",{})}}}setSticky(e,t,s,n,r){r?(e.style.width=s+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t+"px":"",e.style.left=null!==n?parseInt(e.style.left,10)!==n?n+"px":e.style.left:""}destroy(){const e=this.parent.element;if(!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll))return;this.removeEventListener();const t=this.parent.getContent().querySelector("."+Jo);u.bi.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),(0,u.IV)([this.parent.getHeaderContent().querySelector("."+Lo)],Lo),(0,u.IV)([t],Jo),t.style.height="",this.parent.element.style.width=""}static getScrollBarWidth(){return gc()}}var lh=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class Gh extends u.rt{constructor(){super(...arguments),this.templateFn={}}setFormatter(e){this.formatFn=e}getFormatter(){return this.formatFn}setTemplate(e={}){void 0!==this.footerTemplate&&(this.templateFn[(0,u.I$)(Ys,Ys.Summary)]={fn:(0,u.MY)(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[(0,u.I$)(Ys,Ys.GroupSummary)]={fn:(0,u.MY)(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[(0,u.I$)(Ys,Ys.CaptionSummary)]={fn:(0,u.MY)(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})}getTemplate(e){return this.templateFn[(0,u.I$)(Ys,e)]}setPropertiesSilent(e){this.setProperties(e,!0)}}lh([(0,u.Z9)()],Gh.prototype,"type",void 0),lh([(0,u.Z9)()],Gh.prototype,"field",void 0),lh([(0,u.Z9)()],Gh.prototype,"columnName",void 0),lh([(0,u.Z9)()],Gh.prototype,"format",void 0),lh([(0,u.Z9)()],Gh.prototype,"footerTemplate",void 0),lh([(0,u.Z9)()],Gh.prototype,"groupFooterTemplate",void 0),lh([(0,u.Z9)()],Gh.prototype,"groupCaptionTemplate",void 0),lh([(0,u.Z9)()],Gh.prototype,"customAggregate",void 0);class ku extends u.rt{}lh([(0,u.FE)([],Gh)],ku.prototype,"columns",void 0);class Sg{constructor(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(F,this.initialEnd,this),this.parent.on(Ko,this.keyDownHandler,this),this.parent.on(Ll,this.clickHandler,this),u.bi.add(this.parent.element,"keydown",this.pasteHandler,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Ko,this.keyDownHandler),this.parent.off(F,this.initialEnd),this.parent.off(Ll,this.clickHandler),u.bi.remove(this.parent.element,"keydown",this.pasteHandler))}clickHandler(e){let t=e.target;t=Zi(t,"e-rowcell")}pasteHandler(e){const t=this.parent,s=/(Mac)/i.test(navigator.platform);if(67===e.keyCode&&s&&e.metaKey&&!t.isEdit&&this.copy(),86===e.keyCode&&(e.ctrlKey||s&&e.metaKey)&&!t.isEdit){if(!(0,u.oq)(document.activeElement,"."+Cr)||!t.editSettings.allowEditing||"Batch"!==t.editSettings.mode||"Cell"!==t.selectionSettings.mode||"Flow"===t.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";const r=window.scrollX,h=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(()=>{this.activeElement.focus(),window.scrollTo(r,h),this.paste(this.clipBoardTextArea.value,this.parent.getSelectedRowCellIndexes()[0].rowIndex,this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}}paste(e,t,s){const n=this.parent;let m,T,V,r=s,h=t;if(!n.editSettings.allowEditing||"Batch"!==n.editSettings.mode||"Cell"!==n.selectionSettings.mode||"Flow"===n.selectionSettings.cellSelectionMode)return;const Y=e.split("\n");let se;const ge=n.getDataRows();let ke,qe;const mt=this.parent.isFrozenGrid();mt&&(ke=n.getMovableDataRows(),n.getFrozenRightColumnsCount()&&(qe=n.getFrozenRightDataRows()));for(let Qt=0;Qt<Y.length;Qt++){if(se=Y[Qt].split("\t"),r=s,Qt===Y.length-1&&""===Y[Qt]||(0,u.o8)(n.getRowByIndex(h))){r++;break}for(let ai=0;ai<se.length;ai++){if(V=n.getCellFromIndex(h,r),mt){const Qi=ke[h];V=!!ge[h].querySelector('[aria-colindex="'+r+'"]')||Qi.querySelector('[aria-colindex="'+r+'"]'),qe&&!V&&(V=qe[h].querySelector('[aria-colindex="'+r+'"]'))}if(!V){r++;break}if(m=n.getColumnByIndex(r),T=m.getParser()?m.getParser()(se[ai]):se[ai],m.allowEditing&&!m.isPrimaryKey&&!m.template){const ki={column:m,data:T,rowIndex:h};this.parent.trigger("beforePaste",ki),h=ki.rowIndex,ki.cancel||n.editModule&&("number"===m.type?this.parent.editModule.updateCell(h,m.field,parseFloat(ki.data)):n.editModule.updateCell(h,m.field,ki.data))}r++}h++}n.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:s},{rowIndex:h-1,cellIndex:r-1});const Vt=this.parent.getCellFromIndex(h-1,r-1);Vt&&(0,u.s1)(Vt,["e-focus","e-focused"],[])}initialEnd(){this.parent.off(F,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)}keyDownHandler(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)}setCopyData(e){if(""===window.getSelection().toString()){const t=this.parent.isFrozenGrid();let s,n;this.clipBoardTextArea.value=this.copyContent="";const r=this.parent.getRows();if(t&&(s=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===fn&&(n=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){const m=this.parent.getSelectedRowIndexes().sort((T,V)=>T-V);if(e){const T=[];for(let V=0;V<this.parent.getVisibleColumns().length;V++)T[V]=this.parent.getVisibleColumns()[V].headerText;this.getCopyData(T,!1,"\t",e),this.copyContent+="\n"}for(let T=0;T<m.length;T++){T>0&&(this.copyContent+="\n");const V=[].slice.call(r[m[T]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&(V.push(...[].slice.call(s[m[T]].querySelectorAll(".e-rowcell:not(.e-hide)"))),n&&V.push(...[].slice.call(n[m[T]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(V,!1,"\t",e)}}else{const m=this.checkBoxSelection();if(m.status){if(e){const T=[];for(let V=0;V<m.colIndexes.length;V++)T.push(this.parent.getColumnHeaderByIndex(m.colIndexes[V]));this.getCopyData(T,!1,"\t",e),this.copyContent+="\n"}for(let T=0;T<m.rowIndexes.length;T++){T>0&&(this.copyContent+="\n");const V=[].slice.call(r[m.rowIndexes[T]].getElementsByClassName("e-cellselectionbackground"));t&&(V.push(...[].slice.call(s[m.rowIndexes[T]].getElementsByClassName("e-cellselectionbackground"))),n&&V.push(...[].slice.call(n[m.rowIndexes[T]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(V,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",e)}const h={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",h),h.cancel)return;this.clipBoardTextArea.value=this.copyContent=h.data,u.AR.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}}getCopyData(e,t,s,n){const r="string"!=typeof e[0];for(let h=0;h<e.length;h++){if(n&&t){const m=parseInt(e[h].getAttribute(go),10);this.copyContent+=this.parent.getColumns()[m].headerText+"\n"}r?e[h].classList.contains("e-hide")||(this.copyContent+=e[h].innerText):this.copyContent+=e[h],h<e.length-1&&(this.copyContent+=s)}}copy(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)}getModuleName(){return"clipboard"}destroy(){this.removeEventListener(),this.clipBoardTextArea&&(0,u.Od)(this.clipBoardTextArea)}checkBoxSelection(){const e=this.parent;let t={status:!1};if("Cell"===e.selectionSettings.mode){const s=e.getSelectedRowCellIndexes();let n;const r=[];let h;for(h=0;h<s.length&&(s[h].cellIndexes.length&&r.push(s[h].rowIndex),!s[h].cellIndexes.length||(n||(n=JSON.stringify(s[h].cellIndexes.sort())),n===JSON.stringify(s[h].cellIndexes.sort())));h++);r.sort((m,T)=>m-T),h===s.length&&r[r.length-1]-r[0]==r.length-1&&(t={status:!0,rowIndexes:r,colIndexes:s[0].cellIndexes})}return t}}var Dp,_i=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class Xd extends u.rt{}_i([(0,u.Z9)()],Xd.prototype,"field",void 0),_i([(0,u.Z9)()],Xd.prototype,"direction",void 0),_i([(0,u.Z9)(!1)],Xd.prototype,"isFromGroup",void 0);class Tp extends u.rt{}_i([(0,u.FE)([],Xd)],Tp.prototype,"columns",void 0),_i([(0,u.Z9)(!0)],Tp.prototype,"allowUnsort",void 0);class Fa extends u.rt{}_i([(0,u.Z9)()],Fa.prototype,"field",void 0),_i([(0,u.Z9)()],Fa.prototype,"operator",void 0),_i([(0,u.Z9)()],Fa.prototype,"value",void 0),_i([(0,u.Z9)()],Fa.prototype,"matchCase",void 0),_i([(0,u.Z9)(!1)],Fa.prototype,"ignoreAccent",void 0),_i([(0,u.Z9)()],Fa.prototype,"predicate",void 0),_i([(0,u.Z9)({})],Fa.prototype,"actualFilterValue",void 0),_i([(0,u.Z9)({})],Fa.prototype,"actualOperator",void 0),_i([(0,u.Z9)()],Fa.prototype,"type",void 0),_i([(0,u.Z9)()],Fa.prototype,"ejpredicate",void 0),_i([(0,u.Z9)()],Fa.prototype,"uid",void 0),_i([(0,u.Z9)()],Fa.prototype,"isForeignKey",void 0);class Aa extends u.rt{}_i([(0,u.Z9)(!1)],Aa.prototype,"enableCache",void 0),_i([(0,u.Z9)(3)],Aa.prototype,"maxBlocks",void 0),_i([(0,u.Z9)(3)],Aa.prototype,"initialBlocks",void 0);class Ih extends u.rt{}_i([(0,u.FE)([],Fa)],Ih.prototype,"columns",void 0),_i([(0,u.Z9)("FilterBar")],Ih.prototype,"type",void 0),_i([(0,u.Z9)()],Ih.prototype,"mode",void 0),_i([(0,u.Z9)(!0)],Ih.prototype,"showFilterBarStatus",void 0),_i([(0,u.Z9)(1500)],Ih.prototype,"immediateModeDelay",void 0),_i([(0,u.Z9)()],Ih.prototype,"operators",void 0),_i([(0,u.Z9)(!1)],Ih.prototype,"ignoreAccent",void 0),_i([(0,u.Z9)(!1)],Ih.prototype,"enableCaseSensitivity",void 0),_i([(0,u.Z9)(!1)],Ih.prototype,"showFilterBarOperator",void 0);class ah extends u.rt{}_i([(0,u.Z9)("Row")],ah.prototype,"mode",void 0),_i([(0,u.Z9)("Flow")],ah.prototype,"cellSelectionMode",void 0),_i([(0,u.Z9)("Single")],ah.prototype,"type",void 0),_i([(0,u.Z9)(!1)],ah.prototype,"checkboxOnly",void 0),_i([(0,u.Z9)(!1)],ah.prototype,"persistSelection",void 0),_i([(0,u.Z9)("Default")],ah.prototype,"checkboxMode",void 0),_i([(0,u.Z9)(!1)],ah.prototype,"enableSimpleMultiRowSelection",void 0),_i([(0,u.Z9)(!0)],ah.prototype,"enableToggle",void 0),_i([(0,u.Z9)(!1)],ah.prototype,"allowColumnSelection",void 0);class ua extends u.rt{}_i([(0,u.Z9)([])],ua.prototype,"fields",void 0),_i([(0,u.Z9)("")],ua.prototype,"key",void 0),_i([(0,u.Z9)("contains")],ua.prototype,"operator",void 0),_i([(0,u.Z9)(!0)],ua.prototype,"ignoreCase",void 0),_i([(0,u.Z9)(!1)],ua.prototype,"ignoreAccent",void 0);class Za extends u.rt{}_i([(0,u.Z9)()],Za.prototype,"targetID",void 0);class xf extends u.rt{}_i([(0,u.Z9)("Both")],xf.prototype,"wrapMode",void 0);class Af extends u.rt{}_i([(0,u.Z9)("Normal")],Af.prototype,"mode",void 0);class hh extends u.rt{}_i([(0,u.Z9)(!0)],hh.prototype,"showDropArea",void 0),_i([(0,u.Z9)(!1)],hh.prototype,"allowReordering",void 0),_i([(0,u.Z9)(!1)],hh.prototype,"showToggleButton",void 0),_i([(0,u.Z9)(!1)],hh.prototype,"showGroupedColumn",void 0),_i([(0,u.Z9)(!0)],hh.prototype,"showUngroupButton",void 0),_i([(0,u.Z9)(!1)],hh.prototype,"disablePageWiseAggregates",void 0),_i([(0,u.Z9)([])],hh.prototype,"columns",void 0),_i([(0,u.Z9)()],hh.prototype,"captionTemplate",void 0),_i([(0,u.Z9)(!1)],hh.prototype,"enableLazyLoading",void 0);class Ia extends u.rt{}_i([(0,u.Z9)(!1)],Ia.prototype,"allowAdding",void 0),_i([(0,u.Z9)(!1)],Ia.prototype,"allowEditing",void 0),_i([(0,u.Z9)(!1)],Ia.prototype,"allowDeleting",void 0),_i([(0,u.Z9)("Normal")],Ia.prototype,"mode",void 0),_i([(0,u.Z9)(!0)],Ia.prototype,"allowEditOnDblClick",void 0),_i([(0,u.Z9)(!0)],Ia.prototype,"showConfirmDialog",void 0),_i([(0,u.Z9)(!1)],Ia.prototype,"showDeleteConfirmDialog",void 0),_i([(0,u.Z9)("")],Ia.prototype,"template",void 0),_i([(0,u.Z9)("")],Ia.prototype,"headerTemplate",void 0),_i([(0,u.Z9)("")],Ia.prototype,"footerTemplate",void 0),_i([(0,u.Z9)("Top")],Ia.prototype,"newRowPosition",void 0),_i([(0,u.Z9)({})],Ia.prototype,"dialog",void 0),_i([(0,u.Z9)(!1)],Ia.prototype,"allowNextRowEdit",void 0);let ys=Dp=class extends u.wA{constructor(e,t){super(e,t),this.isPreventScrollEvent=!1,this.inViewIndexes=[],this.keyA=!1,this.frozenRightCount=0,this.frozenLeftCount=0,this.tablesCount=1,this.movableCount=0,this.visibleFrozenLeft=0,this.visibleFrozenRight=0,this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.media={},this.isFreezeRefresh=!1,this.tableIndex=0,this.componentRefresh=u.wA.prototype.refresh,this.isVirtualAdaptive=!1,this.vRows=[],this.vcRows=[],this.vGroupOffsets={},this.rowUid=0,this.currentViewData=[],this.isManualRefresh=!1,this.isAutoFitColumns=!1,this.enableDeepCompare=!1,this.lockcolPositionCount=0,this.prevPageMoving=!1,this.pageTemplateChange=!1,this.isAutoGen=!1,this.mediaBindInstance={},this.commandDelIndex=void 0,this.asyncTimeOut=50,this.isExportGrid=!1,this.enableLogger=!0,this.needsID=!0,Dp.Inject(Sp),(0,u.sO)("mergePersistData",this.mergePersistGridData,this)}getPersistData(){const e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]};for(let h=0;h<e.length;h++){const m=this[e[h]];for(const T of t[e[h]])delete m[T]}const s=this.pageSettings.template,n=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:n},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!(0,u.le)(this.pagerTemplate);const r=this.addOnPersist(e);return n.template=s,this.setProperties({pageSettings:n},!0),r}requiredModules(){this.setFrozenCount(),this.enableInfiniteAggrgate();const e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e}extendRequiredModules(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]})}preRender(){this.serviceLocator=new Cp,this.initProperties(),this.initializeServices()}initProperties(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=u.wA.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}}render(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),(0,Rt.rj)({target:this.element},this.createElement),this.renderModule=new Iu(this,this.serviceLocator),this.searchModule=new Ep(this),this.scrollModule=new Qd(this),this.notify(fa,{}),(!0===this.getDataModule().dataManager.dataSource.offline||void 0===this.getDataModule().dataManager.dataSource.url)&&(this.isVirtualAdaptive=!0),this.trigger("load"),Yh(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(_h,{}),this.getMediaColumns(),Gc(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify(it,{}),this.refreshing&&this.trigger("created")}showSpinner(){this.isExportGrid||(0,Rt.yh)(this.element)}hideSpinner(){this.isExportGrid||(0,Rt.v3)(this.element)}updateStackedFilter(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")}getMediaColumns(){if(!this.enableColumnVirtualization){const e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!(0,u.le)(e))for(let t=0;t<e.length;t++)!(0,u.le)(e[t].hideAtMedia)&&((0,u.le)(e[t].visible)||e[t].visible)&&this.pushMediaColumn(e[t],t)}}pushMediaColumn(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])}updateMediaColumns(e){if(!this.enableColumnVirtualization){const t=this.getColumnIndexByUid(e.uid);for(let s=0;s<this.mediaCol.length;s++)if(e.uid===this.mediaCol[s].uid)return void this.mediaCol.splice(s,1);this.pushMediaColumn(e,t)}}mediaQueryUpdate(e,t){const s=this.getColumns()[e];this.mediaCol.some(n=>n.uid===s.uid)&&(s.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,s.visible?this.showHider.show(s.headerText,"headerText"):this.showHider.hide(s.headerText,"headerText")))}refreshMediaCol(){this.isInitialLoad=!0;const e=this.element.querySelector("."+ml);this.aggregates.length&&this.element.scrollHeight>this.height&&e&&(0,u.cn)([e],["e-footerpadding"]),this.getColumns().filter(s=>"checkbox"===s.type).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),(0,u.IV)([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()}removeMediaListener(){for(let e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])}eventInitializer(){}destroy(){const e=this.element;if(!e)return;const t=!(!e.querySelector("."+rl)||!e.querySelector("."+ll));t&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(Tr,{}),this.destroyDependentModules(),(this.isReact||this.isVue)&&this.destroyTemplate(["template"]),t&&super.destroy(),this.toolTipObj.destroy();const s=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"];for(let n=0;n<s.length;n++)this[s[n]]&&(this[s[n]]=null);this.element.innerHTML="",(0,u.s1)(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}destroyDependentModules(){const e=this.element;!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())}getModuleName(){return"grid"}enableBoxSelection(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")}onPropertyChanged(e,t){let h,s=!1,n=!1,r=!1;if(this.isDestroyed)return;this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();const T=Object.keys(e);T.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),n=!0);for(const V of T)switch(V){case"allowPaging":this.notify(H,{module:"pager",enable:this.allowPaging}),s=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(pe,{module:"pager",properties:e.pageSettings});break}this.notify(pe,{module:"pager",properties:e.pageSettings}),((0,u.le)(e.pageSettings.currentPage)&&(0,u.le)(e.pageSettings.pageSize)&&(0,u.le)(e.pageSettings.totalRecordsCount)||!(0,u.le)(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(s=!0);break;case"allowSorting":this.notify(H,{module:"sort",enable:this.allowSorting}),s=!0,h=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(H,{module:"filter",enable:this.allowFiltering}),s=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(H,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),h=!0;break;case"allowRowDragAndDrop":this.notify(H,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(H,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=_o(this.rowTemplate),s=!0;break;case"detailTemplate":this.detailTemplateFn=_o(this.detailTemplate),s=!0;break;case"allowGrouping":this.notify(H,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),s=!0,h=!0;break;case"enableInfiniteScrolling":case"childGrid":s=!0;break;case"toolbar":this.notify(H,{module:"toolbar"});break;case"groupSettings":this.notify(pe,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(s=!0),this.notify(H,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),r=!0,n=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(s=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(V,e,n)}h&&this.updateDefaultCursor(),n?r||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():s&&(this.notify(Me,{requestType:"refresh"}),s=!1,this.maintainSelection(e.selectedRowIndex))}extendedPropertyChange(e,t,s){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?(0,u.cn)([this.element],"e-grid-min-height"):(0,u.IV)([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(H,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(H,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(H,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(H,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(pe,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(pe,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(pe,{module:"sort"});break;case"selectionSettings":this.notify(pe,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(pe,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(wa,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":const n=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch){const h=this.getPrimaryKeyFieldNames()[0];for(let m=0,T=Object.keys(t.dataSource);m<T.length;m++)this.setRowData((0,u.NA)(h,this.dataSource[T[m]]),this.dataSource[T[m]])}else if(n.isPending){let h=(0,u.le)(this.dataSource)?[]:this.dataSource.result;const m=n.group||[];for(let T=0;T<m.length;T++)h=bt.j4.group(h,m[T],n.aggregates||[]);this.dataSource={result:h,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),n.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(nd,{}),s||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Su,{}));this.scrollRefresh();break;case"enableHover":(t.enableHover?u.cn:u.IV)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(Kl,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(oc,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(t.enableStickyHeader)}}maintainSelection(e){if(-1!==e){const t=()=>{this.selectRow(e),this.off(F,t)};this.on(F,t,this)}}setProperties(e,t){super.setProperties(e,t),e.filterSettings&&this.filterModule&&t&&this.filterModule.refreshFilter()}setTablesCount(){const e=this.getFrozenColumns(),t=this.getFrozenLeftColumnsCount(),s=this.getFrozenRightColumnsCount();!e||t||s?!e&&(t||s)&&(t&&!s||s&&!t?this.tablesCount=2:t&&s&&(this.tablesCount=3)):this.tablesCount=2}getTablesCount(){return this.tablesCount}updateDefaultCursor(){let e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)"));const t=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),s=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){const n=this.contentModule.getHeaderCells();e=n.length?n:e}for(let n=0;n<e.length;n++){const r=e[n];(this.allowGrouping||this.allowReordering||this.allowSorting)&&r.classList.add(s[n].allowReordering&&s[n].allowSorting&&s[n].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(let n=0;n<t.length;n++)this.allowReordering&&t[n].classList.add("e-mousepointer")}updateColumnModel(e){for(let t=0,s=e.length;t<s;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns()}updateColumnLevelFrozen(){const e=this.columnModel,t=[],s=[],n=[];if(this.frozenLeftCount||this.frozenRightCount){for(let r=0,h=e.length;r<h;r++){const m=e[r];"Left"===m.freeze?(m.freezeTable=Qo,t.push(m)):"Right"===m.freeze?(m.freezeTable=vo,s.push(m)):(m.freezeTable="movable",n.push(m))}this.columnModel=t.concat(n).concat(s)}}updateFrozenColumns(){if(this.frozenLeftCount||this.frozenRightCount)return;const e=this.columnModel,t=this.frozenColumns,s=this.getFrozenColumns();let n=0;for(let r=0,h=e.length;r<h;r++){const m=e[r];t&&(m.freezeTable=r<t?Qo:"movable"),m.isFrozen&&r>=t?(m.freezeTable=Qo,e.splice(this.frozenColumns+n,0,e.splice(r,1)[0]),n++):s&&!t&&(m.freezeTable="movable")}}getFrozenLeftCount(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()}isFrozenGrid(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()}getFrozenMode(){return this.frozenName}updateLockableColumns(){const e=this.columnModel;let t=0,s=0;const n=this.getFrozenColumns();for(let r=0;r<e.length;r++)e[r].lockColumn&&(r<n?(e.splice(t,0,e.splice(r,1)[0]),t++):(e.splice(n+s,0,e.splice(r,1)[0]),s++))}checkLockColumns(e){for(let t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++}getColumns(e){const t=this.inViewIndexes.map(r=>r-this.groupSettings.columns.length).filter(r=>r>-1),s=t.length;(!this.enableColumnVirtualization||(0,u.le)(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));let n=0===s?this.columnModel:this.columnModel.slice(t[0],t[s-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&t.length&&t[0]>0&&(n=this.contentModule.ensureFrozenCols(n)),n}getStackedHeaderColumnByHeaderText(e,t){for(let s=0;s<t.length;s++){const n=t[s];if(n.field===e||n.headerText===e){this.stackedColumn=n;break}n.columns&&this.getStackedHeaderColumnByHeaderText(e,n.columns)}return this.stackedColumn}getColumnIndexesInView(){return this.inViewIndexes}getQuery(){return this.query}getLocaleConstants(){return this.defaultLocale}setColumnIndexesInView(e){this.inViewIndexes=e}getVisibleColumns(){return this.getCurrentVisibleColumns()}getHeaderContent(){return this.headerModule.getPanel()}setGridHeaderContent(e){this.headerModule.setPanel(e)}getContentTable(){return this.contentModule.getTable()}setGridContentTable(e){this.contentModule.setTable(e)}getContent(){return this.contentModule.getPanel()}setGridContent(e){this.contentModule.setPanel(e)}getHeaderTable(){return this.headerModule.getTable()}setGridHeaderTable(e){this.headerModule.setTable(e)}getFooterContent(){return this.footerElement=this.element.getElementsByClassName(ml)[0],this.footerElement}getFooterContentTable(){return this.footerElement=this.element.getElementsByClassName(ml)[0],this.footerElement.firstChild.firstChild}getPager(){return this.gridPager}setGridPager(e){this.gridPager=e}getRowByIndex(e){return this.contentModule.getRowByIndex(e)}getMovableRowByIndex(e){return this.contentModule.getMovableRowByIndex(e)}getFrozenRowByIndex(e){return this.getFrozenDataRows()[e]}getRows(){return this.contentModule.getRowElements()}getFrozenRightRowByIndex(e){return this.contentModule.getFrozenRightRowByIndex(e)}getRowInfo(e){const t=e;let s={target:e};if(!(0,u.le)(e)&&(0,u.le)(Zi(t,"e-detailrowcollapse")&&(0,u.le)(Zi(t,"e-recordplusexpand")))){const n=(0,u.oq)(t,"."+Cr);if(!n){const h=(0,u.oq)(t,"."+Lr);if(!(0,u.le)(h)&&!h.classList.contains("e-addedrow")){const m=this.getRowObjectFromUID(h.getAttribute("data-uid")),T=parseInt(h.getAttribute(xn),10);s={row:h,rowData:m.data,rowIndex:T}}return s}const r=parseInt(n.getAttribute(go),10);if(!(0,u.le)(n)&&!isNaN(r)){const h=(0,u.oq)(n,"."+Lr),m=parseInt(h.getAttribute(xn),10),T=this.getFrozenColumns(),V=this.columnModel[r].getFreezeTableName();let Y=this.contentModule.getRows(),se=r+this.getIndentCount();this.isFrozenGrid()&&(V===Qo?Y=this.contentModule.getRows():"movable"===V?(se=r-T-this.frozenLeftCount,Y=this.contentModule.getMovableRows()):V===vo&&(se=r-(this.frozenLeftCount+this.movableCount),Y=this.contentModule.getFrozenRightRows()));const ge=Y.filter(mt=>mt.uid===h.getAttribute("data-uid"));let qe,ke={};Object.keys(ge).length&&(ke=ge[0].data,qe=ge[0].cells[se].column),s={cell:n,cellIndex:r,row:h,rowIndex:m,rowData:ke,column:qe,target:e}}}return s}getMovableRows(){return this.contentModule.getMovableRowElements()}getFrozenRightRows(){return this.contentModule.getFrozenRightRowElements()}getDataRows(){return this.getAllDataRows()}getAllDataRows(e){if((0,u.le)(this.getContentTable().querySelector(vs)))return[];const t=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(vs);let s=[].slice.call(t.children);if(this.frozenRows){const r=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+Wa).querySelector(vs):this.getHeaderTable().querySelector(vs),h=[].slice.call(r.children);s=this.addMovableRows(h,s)}return this.generateDataRows(s,e)}addMovableRows(e,t){for(let s=0,n=t.length;s<n;s++)e.push(t[s]);return e}generateDataRows(e,t){const s=[];for(let n=0,r=e.length;n<r;n++)e[n].classList.contains(Lr)&&(!e[n].classList.contains("e-hiddenrow")||t)&&(this.isCollapseStateEnabled()?s[parseInt(e[n].getAttribute("aria-rowindex"),10)]=e[n]:s.push(e[n]));return s}getMovableDataRows(){return this.getAllMovableDataRows()}getAllMovableDataRows(e){if(!this.isFrozenGrid())return[];let t=[].slice.call(this.getContent().querySelector("."+Or).querySelector(vs).children);if(this.frozenRows){const n=[].slice.call(this.getHeaderContent().querySelector("."+io).querySelector(vs).children);t=this.addMovableRows(n,t)}return this.generateDataRows(t,e)}getFrozenDataRows(){return this.getAllFrozenDataRows()}getAllFrozenDataRows(e){let t=[].slice.call(this.getContent().querySelector("."+ga).querySelector(vs).children);if(this.frozenRows){const n=[].slice.call(this.getHeaderContent().querySelector("."+Wa).querySelector(vs).children);t=this.addMovableRows(n,t)}return this.generateDataRows(t,e)}getFrozenRightDataRows(){return this.getAllFrozenRightDataRows()}getAllFrozenRightDataRows(e){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];let t=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(vs).children);if(this.frozenRows){const n=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(vs).children);t=this.addMovableRows(n,t)}return this.generateDataRows(t,e)}setCellValue(e,t,s){const r="data",h="index",T="Right"===this.getFrozenMode(),V=this.getPrimaryKeyFieldNames()[0],Y=new Uo(this,this.serviceLocator);let se=this.getColumnIndexByField(t);const ge=this.getColumnByField(t),qe=("movable"===ge.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===ge.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(Vt=>(0,u.NA)(V,Vt.data)===e)[0],mt=qe?this.element.querySelector("[data-uid="+qe.uid+"]"):null;if(!(0,u.le)(mt)){(0,u.sO)(t,s,qe[r]);let Vt=this.getFrozenLeftColumnsCount()||this.getFrozenColumns();const Qt=this.getMovableColumnsCount();this.isRowDragable()&&!T&&Vt++;const ai=Vt+Qt,ki=this.getCellFromIndex(qe[h],se);if(!(0,u.le)(ki)){const Qi="movable"===ge.getFreezeTableName()?Vt:"frozen-right"===ge.getFreezeTableName()?ai:0;this.groupSettings.columns.length&&(se+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&se++,this.isRowDragable()&&!T&&se++,Y.refreshTD(ki,qe.cells[se-Qi],qe[r],{index:qe[h]}),this.aggregates.length>0&&(this.notify(gl,{}),this.groupSettings.columns.length>0&&this.notify(Lh,{})),!(0,u.le)(qe)&&!(0,u.le)(qe.changes)&&(qe.changes[t]=s),this.trigger(wo,{cell:ki,column:ge,data:qe[r]})}}}refreshReactColumnTemplateByUid(e){this.isReact&&this.clearTemplate(["columnTemplate"],void 0,()=>{const n=this.getDataRows(),r=this.getIndentCount(),h=this.getNormalizedColumnIndex(e);for(let m=0;m<n.length;m++){const T=this.getRowObjectFromUID(n[m].getAttribute("data-uid"));if(T.isDataRow&&!(0,u.le)(T.index)){const V=T.cells[h],Y=new Uo(this,this.serviceLocator),se=this.getCellFromIndex(m,h-r);Y.refreshTD(se,V,T.data,{index:T.index})}}})}refreshReactHeaderTemplateByUid(e){if(this.isReact){const t="cells",s=this.headerModule.rows,n=this.getNormalizedColumnIndex(e);for(let r=0;r<s.length;r++){const h=s[r][t][n];if(h&&h.column.uid===e){const m=new oa(this,this.serviceLocator),T=Zi(this.element.querySelectorAll("[e-mappinguid="+e+"]")[0],"e-templatecell");m.refresh(h,T)}}}}setRowData(e,t){let n=this.contentModule.getRows();const r=this.getPrimaryKeyFieldNames()[0],h=new Wl(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(n=n.filter(T=>T.isDataRow));const m=n.filter(T=>(0,u.NA)(r,T.data)===e)[0];!(0,u.le)(m)&&this.element.querySelectorAll("[data-uid="+m.uid+"]").length&&(m.changes=t,he(m,this.getForeignKeyColumns(),m.changes),h.refresh(m,this.getColumns(),!0),this.aggregates.length>0&&(this.notify(gl,{}),this.groupSettings.columns.length>0&&this.notify(Lh,{})))}getCellFromIndex(e,t){return km(this,this.getColumnByIndex(t),e,t)}getMovableCellFromIndex(e,t){if("Left-Right"===this.frozenName&&t>=this.movableCount)return;const s=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].getElementsByClassName(Cr)[t-s]}getFrozenRightCellFromIndex(e,t){const s=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),n=this.getFrozenRightDataRows();return n[e]&&n[e].getElementsByClassName(Cr)[t-s]}getColumnHeaderByIndex(e){return this.getHeaderTable().getElementsByClassName("e-headercell")[e]}getMovableColumnHeaderByIndex(e){const t=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenRightColumnHeaderByIndex(e){const t=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenLeftColumnHeaderByIndex(e){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[e]}getRowObjectFromUID(e,t,s){const n=this.contentModule.getRows();let r=this.rowObject(n,e);return this.isFrozenGrid()&&(!r||t||s)?(r=this.rowObject(this.contentModule.getMovableRows(),e),(!r&&"Left-Right"===this.getFrozenMode()||s)&&(r=this.rowObject(this.contentModule.getFrozenRightRows(),e)),r):((0,u.le)(r)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(r=this.rowObject(this.vRows,e)),r)}rowObject(e,t){for(const s of e)if(s.uid===t)return s;return null}getRowsObject(){return this.contentModule.getRows()}getMovableRowsObject(){let e=[];return this.isFrozenGrid()&&(e=this.contentModule.getMovableRows()),e}getFrozenRightRowsObject(){let e=[];return("Right"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode())&&(e=this.contentModule.getFrozenRightRows()),e}getColumnHeaderByField(e){const t=this.getColumnByField(e);return t?this.getColumnHeaderByUid(t.uid):void 0}getColumnHeaderByUid(e){const t=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return t?t.parentElement:void 0}getColumnByIndex(e){let t;return this.getColumns().some((s,n)=>(t=s,n===e)),t}getColumnByField(e){return Sd(this.getColumns(),t=>{if(t.field===e)return t})[0]}getColumnIndexByField(e){const t=this.getColumns();for(let s=0;s<t.length;s++)if(t[s].field===e)return s;return-1}getColumnByUid(e){return Sd([...this.getColumns(),...this.getStackedColumns(this.columns)],t=>{if(t.uid===e)return t})[0]}getStackedColumns(e,t=[]){for(const s of e)s.columns&&(t.push(s),this.getStackedColumns(s.columns,t));return t}getColumnIndexByUid(e){const t=Sd(this.getColumns(),(s,n)=>{if(s.uid===e)return n})[0];return(0,u.le)(t)?-1:t}getUidByColumnField(e){return Sd(this.getColumns(),t=>{if(t.field===e)return t.uid})[0]}getNormalizedColumnIndex(e){return this.getColumnIndexByUid(e)+this.getIndentCount()}getIndentCount(){let e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&(0,u.le)(this.rowDropSettings.targetID)&&e++,e}getColumnFieldNames(){const e=[];let t;for(let s=0,n=this.getColumns().length;s<n;s++)t=this.getColumns()[s],t.visible&&e.push(t.field);return e}getRowTemplate(){return this.rowTemplateFn}getDetailTemplate(){return this.detailTemplateFn}getEditTemplate(){return this.editTemplateFn}getEditHeaderTemplate(){return this.editHeaderTemplateFn}getEditFooterTemplate(){return this.editFooterTemplateFn}getPrimaryKeyFieldNames(){const e=[];for(let t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e}refresh(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())}refreshHeader(){this.headerModule.refreshUI()}getSelectedRows(){return this.selectionModule?this.selectionModule.selectedRecords:[]}getSelectedRowIndexes(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]}getSelectedRowCellIndexes(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]}getSelectedRecords(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]}getSelectedColumnsUid(){const e=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(t=>e.push(this.getColumns()[t].uid)),e}getDataModule(){return this.renderModule.data}showColumns(e,t){this.showHider.show(e,t=t||"headerText")}hideColumns(e,t){this.showHider.hide(e,t=t||"headerText")}getFrozenColumns(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)}getFrozenRightColumnsCount(){return this.frozenRightCount}getFrozenLeftColumnsCount(){return this.frozenLeftCount}getMovableColumnsCount(){return this.movableCount}setFrozenCount(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount&&(this.frozenName="Left-Right")}getVisibleFrozenLeftCount(){return this.visibleFrozenLeft}getVisibleFrozenRightCount(){return this.visibleFrozenRight}getVisibleMovableCount(){return this.visibleMovable}getFrozenRightColumns(){return this.frozenRightColumns}getFrozenLeftColumns(){return this.frozenLeftColumns}getMovableColumns(){return this.movableColumns}splitFrozenCount(e){for(let t=0;t<e.length;t++)e[t].columns?this.splitFrozenCount(e[t].columns):"Right"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[t]),this.frozenRightCount++):"Left"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[t]),this.frozenLeftCount++):(!1!==e[t].visible&&this.visibleMovable++,this.movableColumns.push(e[t]),this.movableCount++)}getVisibleFrozenColumns(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)}getFilterUIInfo(){return this.filterModule?this.filterModule.getFilterUIInfo():{}}getVisibleFrozenColumnsCount(){let e=0;const t=this.columnModel;for(let s=0;s<this.frozenColumns;s++)t[s].visible&&e++;if(this.frozenLeftCount||this.frozenRightCount)for(let s=0;s<t.length;s++)t[s].visible&&("Left"===t[s].freeze||"Right"===t[s].freeze)&&e++;return e}getVisibleFrozenCount(e,t){if(!this.frozenLeftCount&&!this.frozenRightCount)for(let s=0,n=e.length;s<n;s++)e[s].columns?t=this.getVisibleFrozenCount(e[s].columns,t):e[s].isFrozen&&e[s].visible&&t++;return t}getFrozenCount(e,t,s){for(let n=0,r=e.length;n<r;n++)e[n].columns?t=this.getFrozenCount(e[n].columns,t,s):(e[n].isFrozen&&s>this.frozenColumns-1&&t++,s++);return t}goToPage(e){this.pagerModule&&this.pagerModule.goToPage(e)}updateExternalMessage(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)}sortColumn(e,t,s){this.sortModule&&this.sortModule.sortColumn(e,t,s)}clearSorting(){this.sortModule&&this.sortModule.clearSorting()}removeSortColumn(e){this.sortModule&&this.sortModule.removeSortColumn(e)}clearGridActions(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()}filterByColumn(e,t,s,n,r,h,m,T){this.filterModule&&this.filterModule.filterByColumn(e,t,s,n,r,h,m,T)}clearFiltering(e){this.filterModule&&this.filterModule.clearFiltering(e)}removeFilteredColsByField(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)}selectRow(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)}selectRows(e){this.selectionModule&&this.selectionModule.selectRows(e)}clearSelection(){this.selectionModule&&this.selectionModule.clearSelection()}selectCell(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)}selectCellsByRange(e,t){this.selectionModule.selectCellsByRange(e,t)}search(e){this.searchModule&&this.searchModule.search(e)}print(){this.printModule&&this.printModule.print()}deleteRecord(e,t){this.editModule&&this.editModule.deleteRecord(e,t)}startEdit(){this.editModule&&this.editModule.startEdit()}endEdit(){this.editModule&&this.editModule.endEdit()}closeEdit(){this.editModule&&this.editModule.closeEdit()}addRecord(e,t){this.editModule&&this.editModule.addRecord(e,t)}deleteRow(e){this.editModule&&this.editModule.deleteRow(e)}editCell(e,t){this.editModule&&this.editModule.editCell(e,t)}saveCell(){this.editModule&&this.editModule.saveCell()}updateCell(e,t,s){this.editModule&&this.editModule.updateCell(e,t,s)}updateRow(e,t){this.editModule&&this.editModule.updateRow(e,t)}getBatchChanges(){return this.editModule?this.editModule.getBatchChanges():{}}enableToolbarItems(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)}copy(e){this.clipboardModule&&this.clipboardModule.copy(e)}recalcIndentWidth(){if(!this.getHeaderTable().querySelector(".e-emptycell")||!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())return;let e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth;const t=[].slice.call(this.getHeaderTable().querySelector(Qn).childNodes),s=[].slice.call(this.getContentTable().querySelector(Qn).childNodes),n=e/30;let r="Right"===this.getFrozenMode()?this.frozenRightCount:0;const h=this.element.offsetWidth,m=(T,V)=>{if(Op(this)){const Y=(V/h*100).toFixed(1)+"%";t[T].style.width=Y,s[T].style.width=Y}else t[T].style.width=V+"px",s[T].style.width=V+"px";this.notify(Vl,{index:T,width:V})};for(n>=1&&(e=30/n),e<1&&(e=1),(this.enableColumnVirtualization||this.isAutoGen)&&(e=30);r<this.groupSettings.columns.length;)m(r,e),r++;this.isDetail()&&(m(r,e),r++),this.isRowDragable()&&m(r,e),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}resetIndentWidth(){if(Op(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(e=>(!e.width||"auto"===e.width)&&e.minWidth).length>0){const e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(rc,{})}isRowDragable(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID}reorderColumns(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)}reorderColumnByIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)}reorderColumnByTargetIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)}reorderRows(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)}refreshDataSource(e){this.notify("refreshdataSource",e)}disableRowDD(e){const t=this.getHeaderTable(),s=this.getContentTable(),n=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),r=this.getRows(),h=e?"none":"";(0,u.V7)(t.querySelector(Qn).childNodes[0],{display:h}),(0,u.V7)(s.querySelector(Qn).childNodes[0],{display:h});for(let m=0;m<this.getRows().length;m++){const T=r[m].firstElementChild;e?(0,u.cn)([T],"e-hide"):(0,u.IV)([T],["e-hide"])}for(let m=0;m<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;m++){const T=n[m];e?(0,u.cn)([T],"e-hide"):(0,u.IV)([T],["e-hide"])}}autoFitColumns(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)}createColumnchooser(e,t,s){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,s)}initializeServices(){this.serviceLocator.register("widthService",this.widthService=new qc(this)),this.serviceLocator.register("cellRendererFactory",new wf),this.serviceLocator.register("rendererFactory",new Ru),this.serviceLocator.register("localization",this.localeObj=new u.E7(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Wn(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Im(this)),this.serviceLocator.register("ariaService",this.ariaService=new Ya),this.serviceLocator.register("focus",this.focusModule=new Mu(this))}processModel(){const e=this.groupSettings.columns,t=this.sortSettings.columns;let s,n;if(this.allowGrouping)for(let r=0,h=e.length;r<h;r++){n=0;for(let m=t.length;n<m;n++)if(t[n].field===e[r]){s=!0;break}if(s?this.allowSorting?this.sortedColumns.push(t[n].field):t[n].direction="Ascending":t.push({field:e[r],direction:"Ascending",isFromGroup:!0}),!this.groupSettings.showGroupedColumn){const m=this.enableColumnVirtualization?this.columns.filter(T=>T.field===e[r])[0]:this.getColumnByField(e[r]);m?m.visible=!1:this.log("initial_action",{moduleName:"group",columnName:e[r]})}}if(!e.length)for(let r=0;r<t.length;r++)this.sortedColumns.push(t[r].field);if(this.rowTemplateFn=_o(this.rowTemplate),this.detailTemplateFn=_o(this.detailTemplate),this.editTemplateFn=_o(this.editSettings.template),this.editHeaderTemplateFn=_o(this.editSettings.headerTemplate),this.editFooterTemplateFn=_o(this.editSettings.footerTemplate),!(0,u.le)(this.parentDetails)){const r=(0,u.le)(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",r,!0)}this.initForeignColumn()}initForeignColumn(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())}enableVerticalRendering(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")}gridRender(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),u.AR.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),(0,u.s1)(this.element,["e-responsive","e-default"],[]);const e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(dl.Header),this.contentModule=e.getRenderer(dl.Content),this.printModule=new so(this,this.scrollModule),this.clipboardModule=new Sg(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()}dataReady(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()}updateRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}createGridPopUpElement(){const e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:Jo,attrs:{tabIndex:"-1"}});(0,u.R3)([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),(0,u.R3)([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)}updateGridLines(){switch((0,u.s1)(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()}updateResizeLines(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")}applyTextWrap(){if(this.allowTextWrap){const e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":aa(this.element,!1),aa(this.getContent(),!1),aa(e,!0);break;case"Content":aa(this.getContent(),!0),aa(this.element,!1),aa(e,!1);break;default:aa(this.element,!0),aa(this.getContent(),!1),aa(e,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(rc,{})}}removeTextWrap(){aa(this.element,!1),aa([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),aa(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(rc,{})}createTooltip(){this.toolTipObj=new Rt.u({opensOn:"custom",content:""},this.element)}freezeRefresh(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()}getTooltipStatus(e){const t=this.getHeaderTable(),s="e-gridheader",n=this.createTable(t,s,"header"),r=this.createTable(t,s,"content"),h=e.classList.contains("e-headercell")?n:r,m=e.classList.contains("e-headercell")?"th":"tr";h.querySelector(m).className=e.className,h.querySelector(m).innerHTML=e.innerHTML;const T=h.querySelector(m).getBoundingClientRect().width;return document.body.removeChild(n),document.body.removeChild(r),T>e.getBoundingClientRect().width}mouseMoveHandler(e){if(this.isEllipsisTooltip()){const t=Zi(e.target,"e-ellipsistooltip");(this.prevElement!==t||"mouseout"===e.type)&&this.toolTipObj.close();const s=e.target.tagName,n=["A","BUTTON","INPUT"];if(t&&"mouseout"!==e.type&&(!u.AR.isDevice||-1===n.indexOf(s))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(this.toolTipObj.content=t.getElementsByClassName("e-headertext").length?t.getElementsByClassName("e-headertext")[0].innerText:t.innerText,this.prevElement=t,this.getColumns()[parseInt(t.getAttribute(go),10)].disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(t))}}this.hoverFrozenRows(e)}hoverFrozenRows(e){if(this.isFrozenGrid()){const t=Zi(e.target,Lr);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===e.type){const s=[].slice.call(this.element.getElementsByClassName("e-frozenhover"));for(let n=0;n<s.length;n++)s[n].classList.remove("e-frozenhover")}else if(t){const s=[].slice.call(this.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute(xn)+'"]'));s.splice(s.indexOf(t),1);for(let n=0;n<s.length;n++)"true"!==t.getAttribute("aria-selected")&&s[n]?s[n].classList.add("e-frozenhover"):s[n]&&s[n].classList.remove("e-frozenhover")}}}isEllipsisTooltip(){const e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(let t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1}scrollHandler(){this.isEllipsisTooltip()&&this.toolTipObj.close()}createTable(e,t,s){const n=this.createElement("div");n.className=this.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";const r=this.createElement("div");r.className=t;const h=this.createElement("table");h.className=e.className,h.style.cssText="table-layout: auto;width: auto";const m="header"===s?"th":"td",T=this.createElement("tr"),V=this.createElement(m);return T.appendChild(V),h.appendChild(T),r.appendChild(h),n.appendChild(r),document.body.appendChild(n),n}onKeyPressed(e){("tab"===e.action||"shiftTab"===e.action)&&this.toolTipObj.close()}wireEvents(){u.bi.add(this.element,"click",this.mouseClickHandler,this),u.bi.add(this.element,"touchend",this.mouseClickHandler,this),u.bi.add(this.element,"focusout",this.focusOutHandler,this),u.bi.add(this.element,"dblclick",this.dblClickHandler,this),u.bi.add(this.element,"keydown",this.keyPressHandler,this),u.bi.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new u.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),u.bi.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),u.bi.add(this.element,"mousemove",this.mouseMoveHandler,this),u.bi.add(this.element,"mouseout",this.mouseMoveHandler,this),u.bi.add(this.getContent(),"touchstart",this.tapEvent,this),u.bi.add(document.body,"keydown",this.keyDownHandler,this)}unwireEvents(){u.bi.remove(this.element,"click",this.mouseClickHandler),u.bi.remove(this.element,"touchend",this.mouseClickHandler),u.bi.remove(this.element,"focusout",this.focusOutHandler),u.bi.remove(this.element,"dblclick",this.dblClickHandler),u.bi.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),u.bi.remove(this.element,"mousemove",this.mouseMoveHandler),u.bi.remove(this.element,"mouseout",this.mouseMoveHandler),u.bi.remove(this.element,"keydown",this.keyPressHandler),u.bi.remove(this.getContent(),"touchstart",this.tapEvent),u.bi.remove(document.body,"keydown",this.keyDownHandler),u.bi.remove(window,"resize",this.resetIndentWidth)}addListener(){this.isDestroyed||(this.on(Qe,this.dataReady,this),this.on(F,this.recalcIndentWidth,this),this.on(ei,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Oo,this.dataBoundFunction),this.on(Ko,this.onKeyPressed,this))}removeListener(){this.isDestroyed||(this.off(Qe,this.dataReady),this.off(F,this.recalcIndentWidth),this.off(ei,this.recalcIndentWidth),this.removeEventListener(Oo,this.dataBoundFunction),this.off(Ko,this.onKeyPressed))}getCurrentViewRecords(){return vt(this)?(0,u.le)(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData}mouseClickHandler(e){if(this.isChildGrid(e)||Zi(e.target,"e-gridpopup")&&e.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(e)||(!this.allowRowDragAndDrop&&(Zi(e.target,ll)||"TD"===e.target.tagName)||!this.allowGrouping&&!this.allowReordering&&Zi(e.target,"e-gridheader"))&&e.touches)return;Zi(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!Zi(e.target,"e-filterbarcell")&&e.preventDefault();const t=this.getRowInfo(e.target);t.cancel=!1;let n=!1;const r=(0,u.oq)(e.target,"tr");if(r&&r.getAttribute("data-uid")){const h=this.getRowObjectFromUID(r.getAttribute("data-uid"));n=!!h&&h.isDataRow}n&&this.trigger("recordClick",t),this.notify(Ll,e)}checkEdit(e){const t=Zi(e.target,Lr),s="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains(Nl)||t.classList.contains(ra));return!Zi(e.target,"e-unboundcelldiv")&&(s||Zi(e.target,Cr)&&Zi(e.target,Cr).classList.contains("e-editedbatchcell"))}dblClickHandler(e){const t=Zi(e.target,"e-grid");if((0,u.le)(t)||t.id!==this.element.id||(0,u.oq)(e.target,".e-unboundcelldiv"))return;let s=!1;const n=(0,u.oq)(e.target,"tr");if(n&&n.getAttribute("data-uid")){const h=this.getRowObjectFromUID(n.getAttribute("data-uid"));s=!!h&&h.isDataRow}const r=this.getRowInfo(e.target);r.target=e.target,s&&this.trigger("recordDoubleClick",r),this.notify(rd,e)}focusOutHandler(e){if(this.isChildGrid(e))return;Zi(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");const t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");const s=e.relatedTarget,n=s?s.getAttribute("aria-owns"):null;(!s||!Zi(s,"e-grid")&&(!(0,u.le)(n)&&n)!==e.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!u.AR.isDevice&&("Batch"===this.editSettings.mode&&!((Zi(s,"e-ddl")||Zi(s,"e-ddt"))&&Zi(s,"e-input-group"))&&(this.editModule.saveCell(),this.notify(ja,{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}isChildGrid(e){const t=Zi(e.target,"e-grid");return!!(t&&t.id!==this.element.id||Zi(e.target,"e-unboundcelldiv")&&(0,u.le)(t))}mergePersistGridData(e){const t=this.getLocalData();if(!(0,u.le)(t)&&""!==t||!(0,u.le)(e)){const s=(0,u.le)(e)?JSON.parse(t):e;this.enableVirtualization&&(s.pageSettings.currentPage=1);const n=Object.keys(s);this.isProtectedOnChange=!0;for(const r of n)"object"!=typeof this[r]||(0,u.le)(this[r])?this[r]=s[r]:Array.isArray(this[r])&&"columns"===r?(Gc(this[r]),this.mergeColumns(s[r],this[r]),this[r]=s[r]):(0,u.l7)(this[r],s[r]);this.isProtectedOnChange=!1}}mergeColumns(e,t){const s=e;for(let n=0;n<s.length;n++){const r=t.filter(h=>h.index===s[n].index)[0];(0,u.le)(r)||(r.columns&&r.columns.length?(this.mergeColumns(s[n].columns,r.columns),s[n]=(0,u.l7)(r,s[n],{},!0)):s[n]=(0,u.l7)(r,s[n],{},!0))}}isDetail(){return!(0,u.le)(this.detailTemplate)||!(0,u.le)(this.childGrid)}isCommandColumn(e){return e.some(t=>t.columns?this.isCommandColumn(t.columns):!(!t.commands&&!t.commandsTemplate))}isForeignKeyEnabled(e){return e.some(t=>t.columns?this.isForeignKeyEnabled(t.columns):!(!t.dataSource||!t.foreignKeyValue))}keyPressHandler(e){const t=(0,u.l7)(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()}keyDownHandler(e){e.altKey&&(74===e.keyCode&&(this.keyA?(this.notify(Cu,{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule.focusHeader(),this.focusModule.addOutline())),87===e.keyCode&&(this.focusModule.focusContent(),this.focusModule.addOutline()),65===e.keyCode&&(this.keyA=!0),72===e.keyCode&&this.keyA&&(this.notify(Cu,{target:e.target,collapse:!0}),this.keyA=!1)),13===e.keyCode&&this.notify(zc,e)}keyActionHandler(e){this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(Ko,e)))}setInjectedModules(e){this.injectedModules=e}updateColumnObject(){Yh(this.columns,this.enableColumnVirtualization,this),Gc(this.columns),this.initForeignColumn(),this.notify(sh,{})}getForeignKeyColumns(){return this.getColumns().filter(e=>e.isForeignColumn())}getRowHeight(){return this.rowHeight?this.rowHeight:function Rg(b){if(void 0!==Fu)return Fu;const e=(0,u.az)("table",{className:yo,styles:"visibility: hidden"});e.innerHTML='<tr><td class="e-rowcell">A<td></tr>',b.appendChild(e);const t=e.querySelector("td").getBoundingClientRect();return b.removeChild(e),Fu=Math.ceil(t.height),Fu}(this.element)}refreshColumns(){this.setFrozenCount();const e=this.getContent().querySelector(".e-frozen-left-content"),t=this.getContent().querySelector(".e-frozen-right-content"),s=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!e&&this.frozenLeftCount||!t&&this.frozenRightCount||e&&!this.frozenLeftCount||t&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(s&&(1===this.getFrozenColumns()&&!e||0===this.getFrozenColumns()&&e))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){const r=this.contentModule.getMovableContent().querySelector("."+yo);(0,u.Od)(r.querySelector(Qn));const h=this.getHeaderContent().querySelector("."+io).querySelector(Qn).cloneNode(!0);if(r.insertBefore(h,r.querySelector(vs)),"Left-Right"===this.getFrozenMode()){const m=this.contentModule.getFrozenRightContent().querySelector("."+yo);(0,u.Od)(m.querySelector(Qn));const T=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Qn).cloneNode(!0);m.insertBefore(T,m.querySelector(vs))}}if(this.isFrozenGrid()){const r=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=r,this.contentModule.getMovableContent().scrollLeft=r}}excelExport(e,t,s,n){return this.excelExportModule?this.excelExportModule.Map(this,e,t,s,!1,n):null}csvExport(e,t,s,n){return this.excelExportModule?this.excelExportModule.Map(this,e,t,s,!0,n):null}pdfExport(e,t,s,n){return this.pdfExportModule?this.pdfExportModule.Map(this,e,t,s,n):null}groupColumn(e){this.groupModule&&this.groupModule.groupColumn(e)}groupExpandAll(){this.groupModule&&this.groupModule.expandAll()}groupCollapseAll(){this.groupModule&&this.groupModule.collapseAll()}clearGrouping(){this.groupModule&&this.groupModule.clearGrouping()}ungroupColumn(e){this.groupModule&&this.groupModule.ungroupColumn(e)}openColumnChooser(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)}scrollRefresh(){const e=()=>{this.scrollModule.refresh(),this.off(F,e)};this.on(F,e,this)}detailCollapseAll(){this.detailRowModule&&this.detailRowModule.collapseAll()}detailExpandAll(){this.detailRowModule&&this.detailRowModule.expandAll()}clearCellSelection(){this.selectionModule&&this.selectionModule.clearCellSelection()}clearRowSelection(){this.selectionModule&&this.selectionModule.clearRowSelection()}selectCells(e){this.selectionModule&&this.selectionModule.selectCells(e)}selectRowsByRange(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)}isContextMenuOpen(){return this.contextMenuModule&&this.contextMenuModule.isOpen}ensureModuleInjected(e){return this.getInjectedModules().indexOf(e)>=0}destroyTemplate(e,t){this.clearTemplate(e,t)}log(e,t){this.loggerModule&&this.loggerModule.log(e,t)}applyBiggerTheme(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")}getPreviousRowData(){return this.getRowsObject()[this.getRows().length-1].data}hideScroll(){const e=this.getContent().querySelector("."+Jo),t=this.getContent().querySelector(".e-scrollbar");if(e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto"),this.isFrozenGrid()&&t){const s=this.getContent().querySelector(".e-movablescrollbar"),n=this.getContent().querySelector(".e-movablechild");t.style.display="flex",s.offsetWidth>=n.offsetWidth&&(t.style.display="none",this.notify(Bh,0))}}getRowIndexByPrimaryKey(e){const t=this.getPrimaryKeyFieldNames()[0];e="object"==typeof e?e[t]:e;const s=this.getRowsObject();for(let n=0;n<s.length;n++){if(s[n].isDetailRow||s[n].isCaptionRow)continue;let r=s[n].data[t];if(t.split(".").length>1&&(r=Fp(t,s[n].data)),r===e)return s[n].index}return-1}grabColumnByFieldFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const s=this.columnModel;for(let n=0;n<s.length;n++)e===s[n].field&&(t=s[n]);return t}grabColumnByUidFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const s=this.columnModel;for(let n=0;n<s.length;n++)e===s[n].uid&&(t=s[n]);return t}getFilteredRecords(){if(this.allowFiltering&&this.filterSettings.columns.length){const e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof bt.hm?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof bt.hm?this.dataSource.executeLocal(e):new bt.hm(this.dataSource,e).executeLocal(e)}return[]}getUserAgent(){const e=u.AR.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)}tapEvent(e){this.getUserAgent()&&(lo.timer?(clearTimeout(lo.timer),lo.timer=null,this.dblClickHandler(e),this.notify(ef,e)):lo.timer=setTimeout(()=>{lo.timer=null},300))}getRowUid(e){return`${e}${this.rowUid++}`}getMovableVirtualContent(){return this.getContent().querySelector("."+Or)}getFrozenVirtualContent(){return this.getContent().querySelector("."+ga)}getMovableVirtualHeader(){return this.getHeaderContent().querySelector("."+io)}getFrozenVirtualHeader(){return this.getHeaderContent().querySelector("."+Wa)}getRowElementByUID(e){let t,s=[];if(this.isFrozenGrid()){const n=[].slice.call(this.getFrozenVirtualContent().querySelector(vs).children),r=[].slice.call(this.getMovableVirtualContent().querySelector(vs).children);let h=[];if(3===this.tablesCount&&(h=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(vs).children)),this.frozenRows){if(s=[].slice.call(this.getFrozenVirtualHeader().querySelector(vs).children),s=s.concat([].slice.call(this.getMovableVirtualHeader().querySelector(vs).children)),3===this.tablesCount){const m=this.getHeaderContent().querySelector(".e-frozen-right-header");s=s.concat([].slice.call(m.querySelector(vs).children)).concat(h)}s=s.concat(n).concat(r)}else s=n.concat(r).concat(h)}else{const n=[].slice.call(this.getContent().querySelector(vs).children);this.frozenRows?(s=[].slice.call(this.getHeaderContent().querySelector(vs).children),s=s.concat(n)):s=n}for(const n of s)if(n.getAttribute("data-uid")===e){t=n;break}return t}getHiddenColumns(){const e=[];for(const t of this.columnModel)!1===t.visible&&e.push(t);return e}calculatePageSizeByParentHeight(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){let t=0;if(-1!==e.indexOf("%")&&(e=parseInt(e,10)/100*this.element.clientHeight),e>this.getNoncontentHeight()+this.getRowHeight()){let n=0;n=e-this.getNoncontentHeight(),t=n/this.getRowHeight()}if(t>0)return Math.floor(t)}return 0}getNoncontentHeight(){let e=0;if((0,u.le)(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!(0,u.le)(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!(0,u.le)(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!(0,u.le)(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!(0,u.le)(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!(0,u.le)(this.element.querySelector(".e-summaryrow").clientHeight))for(let t=0;t<this.element.getElementsByClassName("e-summaryrow").length;t++)e+=this.element.getElementsByClassName("e-summaryrow")[t].clientHeight;return e}getSummaryValues(e,t){return bt.j4.aggregates[e.type.toLowerCase()](t,e.field)}serverExcelExport(e){this.isExcel=!0,this.exportGrid(e)}serverPdfExport(e){this.isExcel=!1,this.exportGrid(e)}serverCsvExport(e){this.isExcel=!0,this.exportGrid(e)}exportGrid(e){const s=this.getDataModule().generateQuery(!0),n=(new bt.lM).processQuery(new bt.hm({url:""}),s),r=JSON.parse(n.data),h=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));h.filterSettings.columns=r.where,h.searchSettings.fields=r.search&&r.search[0].fields||[],h.sortSettings.columns=r.sorted,h.columns=this.setHeaderText(h.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);const T=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),V=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});V.value=JSON.stringify(h),T.method="POST",T.action=e,T.appendChild(V),document.body.appendChild(T),T.submit(),T.remove()}setHeaderText(e,t){for(let s=0;s<e.length;s++){const n=this.getColumnByUid(e[s].uid);e[s].headerText=n.headerText,(0,u.le)(n.template)||(e[s].template="true"),e[s].format&&(e[s].format=Fg(this.getFormat(e[s].format),e[s].type,this.isExcel)),e[s].columns&&this.setHeaderText(e[s].columns,t);const r=Object.keys(e[s]);for(let h=0;h<r.length;h++)t.indexOf(r[h])<0&&delete e[s][r[h]]}return e}getFormat(e){return"object"==typeof e?(0,u.le)(e.format)?e.skeleton:e.format:e}isCollapseStateEnabled(){return!1===this.isExpanded}updateRowValue(e,t){const s={requestType:"save",data:t};this.showSpinner(),this.notify(od,s),this.refresh()}setForeignKeyData(){this.dataBind();const e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())}resetFilterDlgPosition(e){const t=this.getColumnHeaderByField(e);if(t){const s=t.querySelector(".e-filtermenudiv"),n=this.element.querySelector(".e-filter-popup");if(s&&n){const r=this.element.getBoundingClientRect(),h=s.getBoundingClientRect();n&&(n.style.left=n.offsetWidth+h.right>r.right?(h.right-n.offsetWidth-r.left).toString()+"px":(h.right-r.left).toString()+"px")}}}renderTemplates(){this.notify("reactTemplateRender",this.portals),this.renderReactTemplates()}batchUpdate(e){this.processRowChanges(e)}batchAsyncUpdate(e){this.processBulkRowChanges(e)}processBulkRowChanges(e){if(this.dataToBeUpdated){const t=[Ua,Eh,ac],s=this.getPrimaryKeyFieldNames()[0];for(let n=0;n<t.length;n++)e[t[n]]&&mv(this,e,t[n],s)}else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout(()=>{this.processRowChanges(this.dataToBeUpdated),this.dataToBeUpdated=null},this.asyncTimeOut)}processRowChanges(e){const t=this.getPrimaryKeyFieldNames()[0];e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e);const s=this.getDataModule().saveChanges(e,t,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?s.then(()=>{this.setNewData()}):this.setNewData()}setNewData(){const e=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(s=>{this.bulkRefresh(s.result,e,s.count)})}deleteRowElement(e){const t=this.getRowElementByUID(e.uid),s=parseInt(t.getAttribute(xn),10);if((0,u.Od)(t),this.getFrozenColumns()){const n=this.getMovableRows()[s];(0,u.Od)(n)}}bulkRefresh(e,t,s){const n=this.getRowsObject(),r=this.getPrimaryKeyFieldNames()[0];for(let m=0;m<n.length;m++)e.filter(T=>T[r]===n[m].data[r]).length||(this.deleteRowElement(n[m]),n.splice(m,1),m--);for(let m=0;m<e.length;m++){let T;t.filter(V=>{V[r]===e[m][r]&&(V!==e[m]&&this.setRowData(e[m][r],e[m]),T=!0)}),T||this.renderRowElement(e[m],m)}this.currentViewData=e;const h=[].slice.call(this.getContentTable().getElementsByClassName(Lr));(function Lf(b,e,t,s){let n=s||0;for(let r=0;r<e.length;r++)if(e[r].isDataRow){e[r].index=n,e[r].isAltRow=!!b.enableAltRow&&n%2!=0,t[r].setAttribute(xn,n.toString()),e[r].isAltRow?t[r].classList.add("e-altrow"):t[r].classList.remove("e-altrow");for(let h=0;h<t[r].cells.length;h++)t[r].cells[h].setAttribute("index",n.toString());n++}e.length||b.renderModule.emptyRow(!0)})(this,this.getRowsObject(),h),function Lp(b){if(b.isFrozenGrid()){b.contentModule.rowElements=[].slice.call(b.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));const e=b.getFrozenMode()===fn?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";b.contentModule.freezeRowElements=[].slice.call(b.element.querySelectorAll(e)),b.getFrozenMode()===fn&&(b.contentModule.frozenRightRowElements=[].slice.call(b.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else b.contentModule.rowElements=[].slice.call(b.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(pe,{module:"pager",properties:{totalRecordsCount:s}})}renderRowElement(e,t){const s=new Wl(this.serviceLocator,null,this),r=new oh(this).generateRows([e]),h=s.render(r[0],this.getColumns());let m,T;this.addRowObject(r[0],t);let V=this.getContentTable().querySelector(vs);if(V.querySelector(".e-emptyrow")){const Y=V.querySelector(".e-emptyrow");if(Y.parentNode.removeChild(Y),this.getFrozenColumns()){const se=this.getContent().querySelector("."+Or).querySelector(vs);se.firstElementChild.parentNode.removeChild(se.firstElementChild)}}this.getFrozenColumns()&&(m=function It(b,e,t){e=e&&t&&t.isRowDragable()?e+1:e;const s=b.cloneNode(!0);for(let n=0;n<e;n++)s.removeChild(s.children[0]);for(let n=e,r=b.childElementCount;n<r;n++)b.removeChild(b.children[b.childElementCount-1]);return s}(h,this.getFrozenColumns(),this),T=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector("."+io).querySelector(vs):this.getContent().querySelector("."+Or).querySelector(vs),T.appendChild(m),"auto"===this.height&&this.notify(Bh,{})),V=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector(vs):this.getContent().querySelector(vs),V=this.getContent().querySelector(vs),V.appendChild(h)}addRowObject(e,t){const s=this.getFrozenColumns();if(s){const n=this.getMovableRowsObject(),r=e.clone();r.cells=r.cells.slice(s),e.cells=e.cells.slice(0,s),n.splice(t,1,r)}this.getRowsObject().splice(t,1,e)}updateVisibleExpandCollapseRows(){const e=this.getRowsObject();for(let t=0,s=e.length;t<s;t++)e[t].visible=!e[t].isDataRow&&!e[t].isAggregateRow||"none"!==this.getRowElementByUID(e[t].uid).style.display}getHeight(e){return Number.isInteger(e)||-1===e.indexOf("%")?Number.isInteger(e)||"auto"===this.height?this.height:parseInt(e,10):parseInt(e,10)/100*this.element.clientHeight}getFrozenRightContent(){return this.getContent().querySelector(".e-frozen-right-content")}getFrozenRightHeader(){return this.getHeaderContent().querySelector(".e-frozen-right-header")}getMovableHeaderTbody(){return this.getMovableVirtualHeader().querySelector(vs)}getMovableContentTbody(){return this.getMovableVirtualContent().querySelector(vs)}getFrozenHeaderTbody(){return this.getFrozenVirtualHeader().querySelector(vs)}getFrozenLeftContentTbody(){return this.getFrozenVirtualContent().querySelector(vs)}getFrozenRightHeaderTbody(){return this.getFrozenRightHeader().querySelector(vs)}getFrozenRightContentTbody(){let t;return this.getFrozenRightContent()&&(t=this.getFrozenRightContent().querySelector(vs)),t}showResponsiveCustomFilter(e){this.filterModule&&this.filterModule.showCustomFilter(e||"Vertical"===this.rowRenderingMode)}showResponsiveCustomSort(e){this.sortModule&&this.sortModule.showCustomSort(e||"Vertical"===this.rowRenderingMode)}showAdaptiveFilterDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)}showAdaptiveSortDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)}getCurrentVisibleColumns(e){const t=[],s=e?this.getColumns():this.columnModel;for(const n of s)n.visible&&t.push(n);return t}enableInfiniteAggrgate(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)}};_i([(0,u.Z9)()],ys.prototype,"parentDetails",void 0),_i([(0,u.Z9)([])],ys.prototype,"columns",void 0),_i([(0,u.Z9)(!0)],ys.prototype,"enableAltRow",void 0),_i([(0,u.Z9)(!0)],ys.prototype,"enableHover",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableAutoFill",void 0),_i([(0,u.Z9)(!0)],ys.prototype,"allowKeyboard",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableStickyHeader",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowTextWrap",void 0),_i([(0,u.Zz)({},xf)],ys.prototype,"textWrapSettings",void 0),_i([(0,u.Zz)({},Af)],ys.prototype,"resizeSettings",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowPaging",void 0),_i([(0,u.Zz)({},uc)],ys.prototype,"pageSettings",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableVirtualization",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableColumnVirtualization",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableInfiniteScrolling",void 0),_i([(0,u.Zz)({},ua)],ys.prototype,"searchSettings",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowSorting",void 0),_i([(0,u.Z9)("Ellipsis")],ys.prototype,"clipMode",void 0),_i([(0,u.Z9)(!0)],ys.prototype,"allowMultiSorting",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowExcelExport",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowPdfExport",void 0),_i([(0,u.Zz)({},Tp)],ys.prototype,"sortSettings",void 0),_i([(0,u.Zz)({},Aa)],ys.prototype,"infiniteScrollSettings",void 0),_i([(0,u.Z9)(!0)],ys.prototype,"allowSelection",void 0),_i([(0,u.Z9)(-1)],ys.prototype,"selectedRowIndex",void 0),_i([(0,u.Zz)({},ah)],ys.prototype,"selectionSettings",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowFiltering",void 0),_i([(0,u.Z9)("Horizontal")],ys.prototype,"rowRenderingMode",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableAdaptiveUI",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowReordering",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowResizing",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowRowDragAndDrop",void 0),_i([(0,u.Zz)({},Za)],ys.prototype,"rowDropSettings",void 0),_i([(0,u.Zz)({},Ih)],ys.prototype,"filterSettings",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"allowGrouping",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableImmutableMode",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"showColumnMenu",void 0),_i([(0,u.Zz)({},hh)],ys.prototype,"groupSettings",void 0),_i([(0,u.Zz)({},Ia)],ys.prototype,"editSettings",void 0),_i([(0,u.FE)([],ku)],ys.prototype,"aggregates",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"showColumnChooser",void 0),_i([(0,u.Zz)({},$a)],ys.prototype,"columnChooserSettings",void 0),_i([(0,u.Z9)(!1)],ys.prototype,"enableHeaderFocus",void 0),_i([(0,u.Z9)("auto")],ys.prototype,"height",void 0),_i([(0,u.Z9)("auto")],ys.prototype,"width",void 0),_i([(0,u.Z9)("Default")],ys.prototype,"gridLines",void 0),_i([(0,u.Z9)()],ys.prototype,"rowTemplate",void 0),_i([(0,u.Z9)()],ys.prototype,"detailTemplate",void 0),_i([(0,u.Z9)()],ys.prototype,"childGrid",void 0),_i([(0,u.Z9)()],ys.prototype,"queryString",void 0),_i([(0,u.Z9)("AllPages")],ys.prototype,"printMode",void 0),_i([(0,u.Z9)("Expanded")],ys.prototype,"hierarchyPrintMode",void 0),_i([(0,u.Z9)([])],ys.prototype,"dataSource",void 0),_i([(0,u.Z9)(null)],ys.prototype,"rowHeight",void 0),_i([(0,u.Z9)()],ys.prototype,"query",void 0),_i([(0,u.Z9)("USD")],ys.prototype,"currencyCode",void 0),_i([(0,u.Z9)()],ys.prototype,"toolbar",void 0),_i([(0,u.Z9)()],ys.prototype,"contextMenuItems",void 0),_i([(0,u.Z9)()],ys.prototype,"columnMenuItems",void 0),_i([(0,u.Z9)()],ys.prototype,"toolbarTemplate",void 0),_i([(0,u.Z9)()],ys.prototype,"pagerTemplate",void 0),_i([(0,u.Z9)(0)],ys.prototype,"frozenRows",void 0),_i([(0,u.Z9)(0)],ys.prototype,"frozenColumns",void 0),_i([(0,u.Z9)("All")],ys.prototype,"columnQueryMode",void 0),_i([(0,u.Z9)({})],ys.prototype,"currentAction",void 0),_i([(0,u.Z9)("19.4.56")],ys.prototype,"ej2StatePersistenceVersion",void 0),_i([(0,u.ju)()],ys.prototype,"created",void 0),_i([(0,u.ju)()],ys.prototype,"destroyed",void 0),_i([(0,u.ju)()],ys.prototype,"load",void 0),_i([(0,u.ju)()],ys.prototype,"rowDataBound",void 0),_i([(0,u.ju)()],ys.prototype,"queryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"headerCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"actionBegin",void 0),_i([(0,u.ju)()],ys.prototype,"actionComplete",void 0),_i([(0,u.ju)()],ys.prototype,"actionFailure",void 0),_i([(0,u.ju)()],ys.prototype,"dataBound",void 0),_i([(0,u.ju)()],ys.prototype,"recordDoubleClick",void 0),_i([(0,u.ju)()],ys.prototype,"recordClick",void 0),_i([(0,u.ju)()],ys.prototype,"rowSelecting",void 0),_i([(0,u.ju)()],ys.prototype,"rowSelected",void 0),_i([(0,u.ju)()],ys.prototype,"rowDeselecting",void 0),_i([(0,u.ju)()],ys.prototype,"rowDeselected",void 0),_i([(0,u.ju)()],ys.prototype,"cellSelecting",void 0),_i([(0,u.ju)()],ys.prototype,"cellSelected",void 0),_i([(0,u.ju)()],ys.prototype,"cellDeselecting",void 0),_i([(0,u.ju)()],ys.prototype,"cellDeselected",void 0),_i([(0,u.ju)()],ys.prototype,"columnSelecting",void 0),_i([(0,u.ju)()],ys.prototype,"columnSelected",void 0),_i([(0,u.ju)()],ys.prototype,"columnDeselecting",void 0),_i([(0,u.ju)()],ys.prototype,"columnDeselected",void 0),_i([(0,u.ju)()],ys.prototype,"columnDragStart",void 0),_i([(0,u.ju)()],ys.prototype,"columnDrag",void 0),_i([(0,u.ju)()],ys.prototype,"columnDrop",void 0),_i([(0,u.ju)()],ys.prototype,"printComplete",void 0),_i([(0,u.ju)()],ys.prototype,"beforePrint",void 0),_i([(0,u.ju)()],ys.prototype,"pdfQueryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"pdfHeaderQueryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"pdfAggregateQueryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"excelAggregateQueryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"exportDetailDataBound",void 0),_i([(0,u.ju)()],ys.prototype,"excelQueryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"excelHeaderQueryCellInfo",void 0),_i([(0,u.ju)()],ys.prototype,"beforeExcelExport",void 0),_i([(0,u.ju)()],ys.prototype,"excelExportComplete",void 0),_i([(0,u.ju)()],ys.prototype,"beforePdfExport",void 0),_i([(0,u.ju)()],ys.prototype,"pdfExportComplete",void 0),_i([(0,u.ju)()],ys.prototype,"rowDragStartHelper",void 0),_i([(0,u.ju)()],ys.prototype,"detailDataBound",void 0),_i([(0,u.ju)()],ys.prototype,"rowDragStart",void 0),_i([(0,u.ju)()],ys.prototype,"rowDrag",void 0),_i([(0,u.ju)()],ys.prototype,"rowDrop",void 0),_i([(0,u.ju)()],ys.prototype,"toolbarClick",void 0),_i([(0,u.ju)()],ys.prototype,"beforeOpenColumnChooser",void 0),_i([(0,u.ju)()],ys.prototype,"beforeOpenAdaptiveDialog",void 0),_i([(0,u.ju)()],ys.prototype,"batchAdd",void 0),_i([(0,u.ju)()],ys.prototype,"batchDelete",void 0),_i([(0,u.ju)()],ys.prototype,"batchCancel",void 0),_i([(0,u.ju)()],ys.prototype,"beforeBatchAdd",void 0),_i([(0,u.ju)()],ys.prototype,"beforeBatchDelete",void 0),_i([(0,u.ju)()],ys.prototype,"beforeBatchSave",void 0),_i([(0,u.ju)()],ys.prototype,"beginEdit",void 0),_i([(0,u.ju)()],ys.prototype,"commandClick",void 0),_i([(0,u.ju)()],ys.prototype,"cellEdit",void 0),_i([(0,u.ju)()],ys.prototype,"cellSave",void 0),_i([(0,u.ju)()],ys.prototype,"cellSaved",void 0),_i([(0,u.ju)()],ys.prototype,"resizeStart",void 0),_i([(0,u.ju)()],ys.prototype,"resizing",void 0),_i([(0,u.ju)()],ys.prototype,"resizeStop",void 0),_i([(0,u.ju)()],ys.prototype,"keyPressed",void 0),_i([(0,u.ju)()],ys.prototype,"beforeDataBound",void 0),_i([(0,u.ju)()],ys.prototype,"contextMenuOpen",void 0),_i([(0,u.ju)()],ys.prototype,"contextMenuClick",void 0),_i([(0,u.ju)()],ys.prototype,"columnMenuOpen",void 0),_i([(0,u.ju)()],ys.prototype,"columnMenuClick",void 0),_i([(0,u.ju)()],ys.prototype,"checkBoxChange",void 0),_i([(0,u.ju)()],ys.prototype,"beforeCopy",void 0),_i([(0,u.ju)()],ys.prototype,"beforePaste",void 0),_i([(0,u.ju)()],ys.prototype,"beforeAutoFill",void 0),_i([(0,u.ju)()],ys.prototype,"columnDataStateChange",void 0),_i([(0,u.ju)()],ys.prototype,"dataStateChange",void 0),_i([(0,u.ju)()],ys.prototype,"dataSourceChanged",void 0),_i([(0,u.ju)()],ys.prototype,"exportGroupCaption",void 0),_i([(0,u.ju)()],ys.prototype,"lazyLoadGroupExpand",void 0),_i([(0,u.ju)()],ys.prototype,"lazyLoadGroupCollapse",void 0),ys=Dp=_i([u.Zl],ys);class so{constructor(e,t){this.isAsyncPrint=!1,this.defered=new bt.BH,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(F,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(lr,this.actionBeginFunction),this.parent.on(U,this.onEmpty.bind(this)),this.parent.on(pu,this.hierarchyPrint,this),this.scrollModule=t)}isContentReady(){return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?()=>{this.defered.promise.then(()=>{this.contentReady()}),this.isPrintGrid()&&this.hierarchyPrint()}:this.contentReady}hierarchyPrint(){this.removeColGroup(this.parent);const e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()}print(){this.renderPrintGrid()}onEmpty(){this.isPrintGrid()&&this.contentReady()}actionBegin(){this.isPrintGrid()&&(this.isAsyncPrint=!0)}renderPrintGrid(){const e=this.parent,t=(0,u.az)("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);const s=new ys(Ts(e,e.hierarchyPrintMode));for(let h=0;h<s.columns.length;h++)s.columns[h]=(0,u.l7)({},s.columns[h]),e.isFrozenGrid()&&!e.getFrozenColumns()&&(s.columns[h].freeze=void 0);this.parent.isAngular&&(s.viewContainerRef=this.parent.viewContainerRef),s.load=()=>{},s.query=e.getQuery().clone(),window.printGridObj=s,s.isPrinting=!0;const n=s.getInjectedModules(),r=e.getInjectedModules();(!n||n.length!==r.length)&&s.setInjectedModules(r),e.notify("printGrid-Init",{element:t,printgrid:s}),this.parent.log("exporting_begin",this.getModuleName()),s.registeredTemplate=this.parent.registeredTemplate,s.isVue=this.parent.isVue,s.appendTo(t),s.trigger=e.trigger}contentReady(){if(this.isPrintGrid()){const e=this.parent;if(this.isAsyncPrint)return void this.printGrid();const t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(D,t),t.cancel)return void(0,u.og)(e.element);this.isAsyncPrint||this.printGrid()}}printGrid(){const e=this.parent;if("auto"!==e.height){const n=this.scrollModule.getCssProperties(),r=e.element.querySelector("."+Jo),h=e.element.querySelector("."+rl);r.style.height="auto",r.style.overflowY="auto",h.style[n.padding]="",h.firstElementChild.style[n.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(const n of[].slice.call(e.element.getElementsByClassName(Jo)))n.style.overflowX="hidden";const t=[].slice.call(e.element.getElementsByClassName("e-spin-show"));for(const n of[].slice.call(t))(0,u.s1)(n,["e-spin-hide"],["e-spin-show"]);this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj,e.trigger(O,{element:e.element}),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())}printGridElement(e){(0,u.s1)(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&(0,u.og)(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=(0,u.S0)(e.element,this.printWind)}removeColGroup(e){const t=e.groupSettings.columns.length,s=e.element,n="#"+e.element.id;if(!t)return;const r=(0,u.td)(`${n}captioncell.e-groupcaption`,s),h=r[t-1].getAttribute("colspan");for(let V=0;V<r.length;V++)r[V].setAttribute("colspan",h);const m=(0,u.td)(`colgroup${n}colgroup`,s),T=(0,u.td)(".e-content colgroup",s);this.hideColGroup(m,t),this.hideColGroup(T,t)}hideColGroup(e,t){for(let s=0;s<e.length;s++)for(let n=0;n<t;n++)e[s].children[n].style.display="none"}isPrintGrid(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting}destroy(){this.parent.isDestroyed||(this.parent.off(F,this.contentReady.bind(this)),this.parent.removeEventListener(lr,this.actionBeginFunction),this.parent.off(U,this.onEmpty.bind(this)),this.parent.off(pu,this.hierarchyPrint))}getModuleName(){return"print"}}function xp(b,e,t){return(0,u.le)(b)||""===b?"":bt.j4.getObject(b,e)}function Rf(b,e){requestAnimationFrame(()=>{try{e(null,b())}catch(t){e(t)}})}function Ou(b){return!(0,u.le)(b)&&!(0,u.le)(b.columns)&&b.columns.length>0}function Lu(b,e){const t=b.columns,s=e.columns;for(let n=0;n<t.length;n++)if(s.length-1>=n)if(s[n].columns)for(let r=0;r<s[n].columns.length;r++)t[n].columns[r].type=s[n].columns[r].type;else t[n].type=s[n].type}so.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound",D,O,"load"];let al=0;function la(b,e){al=0;const t="gSummary",n=e.groupSettings.columns.length,r="records",h="items",m=b[t];let T=0;const V="aggregatesCount";if(m===b.data.count)return e.groupSettings.columns.length&&!(0,u.le)(b[V])&&b[V]?1!==e.groupSettings.columns.length?al+=0!==b.indent&&m<2?b[t]*(n-b.indent+(n-b.indent)*b[V]):b[t]*(n-b.indent+(n-b.indent-1)*b[V])+b[V]:1===e.groupSettings.columns.length&&(al+=b[t]*(n-b.indent)+b[V]):e.groupSettings.columns.length&&(al+=1!==e.groupSettings.columns.length?b[t]*(e.groupSettings.columns.length-b.indent):b[t]),al;for(let Y=0,se=b.data[h].length;Y<se;Y++){const ge=b.data[h][Y];al+=ge[h].length+(n===e.columns.length||(0,u.le)(ge[h][r])?0:ge[h][r].length),T+=(0,u.le)(ge[h][r])||(0,u.le)(b[V])?ge[h].length:ge[h][r].length,ge[h].GroupGuid&&0!==ge[h].childLevels&&xg(ge)}return al+=b.data[h].length,(0,u.le)(b[V])||b[V]&&al&&0!==T&&(al+=(al-T)*b[V]+b[V]),al}function xg(b){const e="items";for(let s=0,n=b[e].length;s<n;s++){const r=b[e][s];al+=r.count,0!==r[e].childLevels&&xg(r)}}function Sd(b,e){const t=[];for(let s=0,n=b.length;s<n;s++){const r=e(b[s],s);(0,u.le)(r)||t.push(r)}return t}function Ed(b){const e=[];for(let t=0;t<b.length;t++)e.push((0,u.l7)({},eu(b[t]),{},!0));return e}function _o(b){if(b)try{return document.querySelectorAll(b).length?(0,u.MY)(document.querySelector(b).innerHTML.trim()):(0,u.MY)(b)}catch{return(0,u.MY)(b)}}function Ql(b,e){const t={},s=["style","class"];(0,u.l7)(t,e,{}),"style"in t&&((0,u.V7)(b,t[s[0]]),delete t[s[0]]),"class"in t&&((0,u.cn)([b],t[s[1]]),delete t[s[1]]),(0,u.Y4)(b,t)}function fc(b,e,t,s){const n=(0,u.l7)(b,e,t),r=Object.keys(n);for(let h=0;h<r.length;h++)s&&-1!==s.indexOf(r[h])&&delete n[r[h]];return n}function Gc(b,e=0){for(let t=0,s=b.length;t<s;t++)b[t].columns?(b[t].index=(0,u.le)(b[t].index)?e:b[t].index,e++,e=Gc(b[t].columns,e)):(b[t].index=(0,u.le)(b[t].index)?e:b[t].index,e++);return e}function Yh(b,e,t){for(let s=0,n=b.length;s<n;s++){let r;"string"==typeof b[s]?r=new gn({field:b[s]},t):b[s]instanceof gn&&!b[s].columns?r=b[s]:b[s].columns?(b[s].columns=Yh(b[s].columns,null,t),r=new gn(b[s],t)):r=new gn(b[s],t),r.type&&"checkbox"===r.type.toLowerCase()&&(r.allowReordering=!1),r.headerText=(0,u.le)(r.headerText)?r.foreignKeyValue||r.field||"":r.headerText,r.foreignKeyField=r.foreignKeyField||r.field,r.valueAccessor=("string"==typeof r.valueAccessor?(0,u.NA)(r.valueAccessor,window):r.valueAccessor)||xp,r.width=e&&(0,u.le)(r.width)?200:r.width,(0,u.le)(r.visible)&&(r.visible=!0),b[s]=r}return b}function Ap(b,e,t){const s=b.querySelector("span"),n=b.parentElement.getBoundingClientRect(),r=e.target.getBoundingClientRect();s.className=t,b.style.display="";const h=((0,u.le)(e.clientY)?e.changedTouches[0].clientY:e.clientY)>b.offsetHeight+10;b.style.top=r.top-n.top+(h?-(b.offsetHeight+10):b.offsetHeight+10)+"px",b.style.left=function Rm(b,e,t,s){const n=b.offsetWidth/2,r=Pa(e).x;return r-t.left<n?t.left-s:t.right-r<n?t.right-s-2*n:r-s-n}(b,e,r,n.left)+"px",h?(b.querySelector(".e-downtail").style.display="",b.querySelector(".e-uptail").style.display="none"):(b.querySelector(".e-downtail").style.display="none",b.querySelector(".e-uptail").style.display="")}function eu(b){return b instanceof u.rt?(0,u.NA)("properties",b):b}function Zi(b,e,t){let s=b;for(;s&&!(t?s.id===e:s.classList.contains(e));)s=s.parentElement;return s}function Mf(b){const e=[];for(let t=0,s=b.length;t<s;t++)b[t].hasOwnProperty("properties")?e.push(b[t].properties):e.push(b[t]);return e}function Pa(b){const e={};return e.x=(0,u.le)(b.clientX)?b.changedTouches[0].clientX:b.clientX,e.y=(0,u.le)(b.clientY)?b.changedTouches[0].clientY:b.clientY,e}let Ag=0;function Na(b){return b+Ag++}function Dl(b,e){for(let t=0,s=e.length;t<s;t++)b.appendChild(s===e.length?e[t]:e[0]);return b}function kf(b,e,t,s){if("Custom"===b){let n=t.customAggregate;return"string"==typeof n&&(n=(0,u.NA)(n,window)),n?n.call(s,e,t):""}return t.field in e||e instanceof Array?bt.j4.aggregates[b.toLowerCase()](e,t.field):null}let Fu,Mp=null;function gc(){if(null!==Mp)return Mp;const b=document.createElement("div");let e=0;return b.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(b),e=b.offsetWidth-b.clientWidth|0,document.body.removeChild(b),Mp=e}function ch(b){return b.split(".").length>1}function Il(b=""){return b.replace(/\./g,"___")}function mc(b=""){return b.replace(/___/g,".")}function Ka(b,e,t){const s=Zi(t,Lr),n=!s||s&&!s.classList.contains("e-insertedrow");return"beginEdit"===e&&n?!(b.isIdentity||b.isPrimaryKey||!b.allowEditing):!("add"===e&&b.isIdentity||n&&!b.allowEditing&&!b.isIdentity&&!b.isPrimaryKey)}function Rh(b){const e=(0,u.Ys)("#"+b.element.id+"EditConfirm",b.element);return"Batch"===b.editSettings.mode&&(0,u.td)(".e-updatedtd",b.element).length&&b.editSettings.showConfirmDialog&&(!e||e.classList.contains("e-popup-close"))}function aa(b,e){const t="e-wrap";b=b instanceof Array?b:[b];for(let s=0;s<b.length;s++)e?b[s].classList.add(t):b[s].classList.remove(t)}function ae(b,e){const t=b.getService("valueFormatter");let n;switch(("date"===e.type||"datetime"===e.type)&&(n={type:e.type,skeleton:e.format},"string"==typeof e.format&&"yMd"!==e.format&&(n.format=e.format)),e.type){case"date":case"datetime":e.setFormatter(t.getFormatFunction(n)),e.setParser(t.getParserFunction(n));break;case"number":e.setFormatter(t.getFormatFunction({format:e.format})),e.setParser(t.getParserFunction({format:e.format}))}}function o(b,e,...t){for(let s=0,n=b.length;s<n;s++)e?((0,u.s1)(b[s],[...t],[]),b[s].setAttribute("aria-selected","true")):((0,u.s1)(b[s],[],[...t]),b[s].removeAttribute("aria-selected"))}function d(b,e){const t=e.element.style.display;e.element.style.display="block";const s=e.width,n=(0,Rt.Or)(b,e.element);e.element.style.display=t,e.element.style.top=n.top+b.getBoundingClientRect().height-5+"px";const r=n.left-s+b.clientWidth;e.element.style.left=r<1?s+r-16+"px":r+-4+"px"}function y(b,e){b.popup.element.style.zIndex=(e.zIndex+1).toString()}function L(b,e){b.checked=e}function q(b,e,t){const s=(0,u.az)("div",{className:t});return s.appendChild(e),s.setAttribute("uid",b),s}function X(b,e){(0,u.IV)([b],["e-check","e-stop","e-uncheck"]),b.classList.add(e?"e-check":"e-uncheck")}function he(b,e,t){for(let n=0;n<e.length;n++)(0,u.sO)(e[n].field,He(e[n],t),b.foreignKeyData);const s=b.cells;for(let n=0;n<s.length;n++)s[n].isForeignKey&&(0,u.sO)("foreignKeyData",(0,u.NA)(s[n].column.field,b.foreignKeyData),s[n])}function He(b,e,t,s){const n=b.foreignKeyField;let r=(0,u.le)(t)?xp(b.field,e):t;r=(0,u.le)(r)?"":r;const h=new bt.AE,m=s||(b.dataSource instanceof bt.hm&&b.dataSource.dataSource.json.length?b.dataSource.dataSource.json:b.columnData);return r.getDay?h.where(nt({field:n,operator:"equal",value:r,matchCase:!1})):h.where(n,"==",r,!1),new bt.hm(m).executeLocal(h)}function Ve(b,e){let t;return e.some(s=>(t=s,s.foreignKeyValue===b))&&t}function nt(b,e){let t,s,n;const r=(0,u.l7)({},eu(b)),h=(0,u.l7)({},eu(b));if((0,u.le)(b.value))return t=new bt.$G(r.field,r.operator,r.value,!1),t;const m=new Date(b.value);if("equal"===b.operator||"notequal"===b.operator){"datetime"===e?(s=new Date(m.setSeconds(m.getSeconds()-1)),n=new Date(m.setSeconds(m.getSeconds()+2)),b.value=new Date(m.setSeconds(n.getSeconds()-1))):(s=new Date(m.setHours(0)-1),n=new Date(m.setHours(24))),r.value=s,h.value=n,"equal"===b.operator?(r.operator="greaterthan",h.operator="lessthan"):"notequal"===b.operator&&(r.operator="lessthanorequal",h.operator="greaterthanorequal");const T=new bt.$G(r.field,r.operator,r.value,!1),V=new bt.$G(h.field,h.operator,h.value,!1);t="equal"===b.operator?T.and(V):T.or(V)}else"date"===e&&("lessthanorequal"===b.operator||"greaterthan"===b.operator)&&(r.value=new Date(m.setHours(24)-1)),"string"==typeof r.value&&(r.value=new Date(r.value)),t=new bt.$G(r.field,r.operator,r.value,!1);return b.setProperties?b.setProperties({ejpredicate:t},!0):b.ejpredicate=t,t}function vt(b){return b.enableVirtualization&&b.groupSettings.columns.length>0&&b.isVirtualAdaptive}function mi(b="",e){if(b){let t=e;const s=b.split(".");for(let n=0;n<s.length&&!(0,u.le)(t);n++)t=t[s[n]];return t}}function Ni(b,e){let s;const n="format",r="type";return s=(new u.eC).getDatePattern("date"===e?"object"==typeof b?{type:b[r]?b[r]:"date",format:b[n]}:{type:"dateTime",skeleton:b}:"object"==typeof b?{type:b[r]?b[r]:"dateTime",format:b[n]}:{type:"dateTime",skeleton:b},!1),s}function Ts(b,e="Expanded"){const t={};if(!b)return t;const s=b.isFrozenGrid()&&!b.getFrozenColumns();for(const n of so.printGridProp)t[n]="columns"===n?Mf(s?b.getColumns():b[n]):"allowPaging"===n?"CurrentPage"===b.printMode:eu(b[n]);return t.enableHover=!1,b.childGrid&&"None"!==e&&(t.expandedRows=function Ki(b,e){const t=b.getRowsObject(),s={};for(const n of t)if(n.isExpand&&!n.isDetailRow){const r=b.allowPaging&&"AllPages"===b.printMode?n.index+b.pageSettings.currentPage*b.pageSettings.pageSize-b.pageSettings.pageSize:n.index;s[r]={},s[r].isExpand=!0,s[r].gridModel=Ts(n.childGrid,e),s[r].gridModel.query=b.childGrid.query}return s}(b,e)),t}function Hs(b,e,t,s){const n=b||{};let r=arguments.length;s&&(r-=1);for(let h=1;h<r;h++){if(!arguments[h])continue;const m=arguments[h],T=Object.keys(Object.getPrototypeOf(m)).length?Object.keys(m).concat(Js(m)):Object.keys(m);for(let V=0;V<T.length;V++){const Y=n[T[V]],se=m[T[V]];let ge;s&&((0,u.Kn)(se)||Array.isArray(se))?(0,u.Kn)(se)?(ge=Y||{},n[T[V]]=(0,u.l7)({},ge,se,s)):(ge=Y||[],n[T[V]]=(0,u.l7)([],ge,se,s)):n[T[V]]=se}}return n}function Js(b){let e=[];for(;Object.getPrototypeOf(b)&&Object.keys(Object.getPrototypeOf(b)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(b))),b=Object.getPrototypeOf(b);return e}function Fn(b){let e=0;for(let t=0;t<b.length;t++){const s=Hn(b[t],0);e<s&&(e=s)}return e+1}function Hn(b,e){let t=e;const s=[];if(b.columns){e++;for(let n=0;n<b.columns.length;n++)s[n]=Hn(b.columns[n],e);for(let n=0;n<s.length;n++)t<s[n]&&(t=s[n]);e=t}return e}var lo=(()=>((lo||(lo={})).timer=null,lo))();function Mo(b,e){b.classList.contains("e-bigger")&&e.classList.add("e-bigger")}function ul(b,e){if(b&&e){const t=(0,u.oq)(b,"."+Lr).getBoundingClientRect().height,s=(0,u.oq)(e,"."+Lr).getBoundingClientRect().height;t>s?e.style.height=t+"px":b.style.height=s+"px"}}function Td(b,e){const t=function kp(b){const e=new bt.lM,t=new bt.hm({url:"",adaptor:new bt.lM}),s=e.processQuery(t,b);return JSON.parse(s.data)}(e),s=new bt.BH;return t.dataSource=s.resolve,t.action=b,{state:t,deffered:s}}function Op(b){const e=b.getVisibleColumns();let t=0,s=0;for(let n=0;n<e.length;n++)(0,u.o8)(e[n].width)?s++:-1!==e[n].width.toString().indexOf("%")&&t++;return("auto"===b.width||"string"==typeof b.width&&-1!==b.width.indexOf("%"))&&!b.groupSettings.showGroupedColumn&&b.groupSettings.columns.length&&t&&!s}function mv(b,e,t,s){const n=b.dataToBeUpdated[t].concat(e[t]).reduce((r,h)=>(r[h[s]]=void 0===r[h[s]]?h:Object.assign(r[h[s]],h),r),{});b.dataToBeUpdated[t]=Object.keys(n).map(r=>n[r])}function tu(b,e,t,s,n){(t[0].length||s)&&(n?e(Qo,t[0],n[0]):e(Qo,t[0])),b.isFrozenGrid()&&(t[1].length||s)&&(n?e("movable",t[1],n[1]):e("movable",t[1])),(b.getFrozenMode()===fn||"Right"===b.getFrozenMode())&&(t[2].length||s)&&(n?e(vo,t[2],n[2]):e(vo,t[2]))}function Og(b){return["Right"!==b.getFrozenMode()?b.getRowsObject():[],b.getMovableRowsObject(),b.getFrozenRightRowsObject()]}function Mm(b,e,t){const n=b.children.length;let r=0;for(let h=0;h<n;h++,r++)h>=e&&h<t||(b.removeChild(b.children[r]),r--)}function V0(b,e,t){return"movable"===e.getFreezeTableName()?[].slice.call(b.getMovableDataRows()[t].getElementsByClassName(Cr)):e.getFreezeTableName()===vo?[].slice.call(b.getFrozenRightDataRows()[t].getElementsByClassName(Cr)):[].slice.call(b.getDataRows()[t].getElementsByClassName(Cr))}function km(b,e,t,s){const n=b.getFrozenLeftCount(),r=b.getMovableColumnsCount();return s="movable"===e.getFreezeTableName()?s-n:e.getFreezeTableName()===vo?s-(n+r):s,V0(b,e,t)[s]}function Yc(b,e,t,s,n,r,h){h||b.getFreezeTableName()===Qo||!e&&b.getFreezeTableName()===vo||1===r?t[Il(b.field)]=b.validationRules:"movable"!==b.getFreezeTableName()&&b.getFreezeTableName()?b.getFreezeTableName()===vo&&(n[Il(b.field)]=b.validationRules):s[Il(b.field)]=b.validationRules}function Ff(b){let e;return b.isFrozenGrid()&&(e=b.frozenRows&&"Top"===b.editSettings.newRowPosition?b.getMovableHeaderTbody():b.getMovableContentTbody()),e}function Om(b){let e;return b.getFrozenMode()===fn&&(e=b.frozenRows&&"Top"===b.editSettings.newRowPosition?b.getFrozenRightHeaderTbody():b.getFrozenRightContentTbody()),e}function Fg(b,e,t){let s;const n=new u.eC;if("number"===e)try{s=n.getNumberPattern({format:b,currency:this.currency,useGrouping:!0},!0)}catch{s=b}else if("date"===e||"time"===e||"datetime"===e)try{if(s=n.getDatePattern({skeleton:b,type:e},t),(0,u.le)(s))throw"error"}catch{try{s=n.getDatePattern({format:b,type:e},t)}catch{s=b}}else s=b;if("number"!==e){const h={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};s=s.replace(/G|H|c|'| a|yy|y|EEEE|E/g,m=>h[m])}return s}function Pg(b){if(b.enableAdaptiveUI){const e=document.getElementsByClassName("e-responsive-dialog");for(let t=0;t<e.length;t++)e[t].classList.add("e-bigger")}}function Fp(b,e){let t;const s=b.split(".").length,n=b.split(".");let r=e;for(let h=0;h<s;h++)t=r[n[h]],r=t;return t}function pl(b,e,t,s){for(const n of e)t?b.on(n.event,n.handler,s):b.off(n.event,n.handler)}function Pu(b,e,t,s){const n=Il(e.field);return s=Object.assign(s,{id:b.element.id+n,name:n,"e-mappinguid":e.uid}),b.createElement("input",{className:t,attrs:s})}function Fm(b,e){let t;b.columnModel||b.getColumns();for(const s of b.columnModel)if(s.field===e){t=s;break}return t}function Ng(b,e,t,s){s.eventHandlers[b]={};for(let n=0;n<e.length;n++)s.eventHandlers[b][e[n]]=t[e[n]]}function Pm(b,e,t){for(let s=0;s<e.length&&!b.isDestroyed;s++)b.removeEventListener(e[s],t.eventHandlers[b.element.id][e[s]])}function Pp(b,e){b.destroyTemplate(e),b.isReact&&b.renderTemplates()}class Gl{constructor(e){this.existingPredicate={},this.foreignKeyQuery=new bt.AE,this.filterState=!0,this.values={},this.renderEmpty=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new Wn(this.parent.locale),this.cBoxTrue=(0,z.eE)(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=(0,z.eE)(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&(0,u.cn)([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}destroy(){this.closeDialog()}wireEvents(){u.bi.add(this.dlg,"click",this.clickHandler,this),u.bi.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=(0,u.Ds)(this.searchBoxKeyUp,200);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&u.bi.add(e,"keyup",this.searchHandler,this)}unWireEvents(){u.bi.remove(this.dlg,"click",this.clickHandler),u.bi.remove(this.dlg,"keyup",this.keyupHandler);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&u.bi.remove(e,"keyup",this.searchHandler)}foreignKeyFilter(e,t,s){const n={},r=[],h=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(h.where(s)).then(m=>{this.options.column.columnData=m.result,this.parent.notify(ec,{predicate:n,column:this.options.column}),e.ejpredicate=n.predicate.predicates;const T=n.predicate.predicates;for(let V=0;V<T.length;V++)r.push({field:T[V].field,predicate:"or",matchCase:T[V].ignoreCase,ignoreAccent:T[V].ignoreAccent,operator:T[V].operator,value:T[V].value,type:this.options.type});e.filterCollection=r.length?r:t.filter(V=>V.field=this.options.field),this.options.handler(e)})}foreignFilter(e,t){const n=new bt.$G(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],n)}searchBoxClick(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())}searchBoxKeyUp(e){this.refreshCheckboxes(),this.updateSearchIcon()}updateSearchIcon(){this.sInput.value.length?(0,u.s1)(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):(0,u.s1)(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])}getLocalizedLabel(e){return this.localeObj.getConstant(e)}updateDataSource(){const e=this.options.dataSource;if(!(e instanceof bt.hm))for(let s=0;s<e.length;s++)if("object"!=typeof e){const n={};n[this.options.field]=e[s],e[s]=n}}updateModel(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new bt.AE,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length}getAndSetChkElem(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);const t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};J.II.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox}showDialog(e){const t={requestType:Sc,columnName:this.options.field,columnType:this.options.type,cancel:!1};t.filterModel=this,this.parent.notify(Mc,t),t.cancel?e.cancel=t.cancel:(this.dialogObj=new Rt.Vq({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!(0,u.le)(Zi(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),e.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),(0,Rt.rj)({target:this.spinner},this.parent.createElement),(0,Rt.yh)(this.spinner),this.getAllData())}renderResponsiveFilter(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")}dialogCreated(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":u.AR.isDevice?this.dialogObj.position={X:"center",Y:"center"}:d(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(xc,e)}openDialog(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)}closeDialog(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;const e=this.options.columns.filter(s=>s.getFilterItemTemplate()),t=this.parent.registeredTemplate;e.length&&!(0,u.le)(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Pp(this.parent,["filterItemTemplate"]),this.parent.notify(Ea,{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),(0,u.Od)(this.dlg),this.dlg=null,this.parent.notify(bh,{})}}clearFilter(e){const t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(tc,t),!t.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})}btnClick(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")||13===e.keyCode)this.fltrBtnHandler();else{const t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(lc,{})}fltrBtnHandler(){let e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)"));const t=e;let s="equal";const n=this.dialogObj.element.querySelector(".e-dropdownlist");let r;n&&(this.options.operator=s=n.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(r=this.searchBox.querySelector(".e-searchinput"));const m={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:s,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},T=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;T&&r&&""===r.value&&(s=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),m.predicate=this.isMenuNotEqual?"or":"and",m.operator=s);let V,Y,se,ge,ke=[];if(e.length!==this.itemsCnt||r&&r.value&&""!==r.value){for(let qe=0;qe<e.length;qe++){V=this.values[Zi(e[qe],"e-ftrchk").getAttribute("uid")],ge=(0,u.l7)({},{value:V},m),V&&!V.toString().length&&(ge.operator=T?"notequal":"equal"),""===V||(0,u.le)(V)?ke=ke.concat(Gl.generateNullValuePredicates(m)):ke.push(ge);const mt={instance:this,handler:this.fltrBtnHandler,arg1:ge.field,arg2:ge.predicate,arg3:ge.operator,arg4:ge.matchCase,arg5:ge.ignoreAccent,arg6:ge.value,cancel:!1};if(this.parent.notify(tc,mt),mt.cancel)return}("date"===this.options.type||"datetime"===this.options.type)&&(se=t.length-1,Y=this.values[Zi(t[se],"e-ftrchk").getAttribute("uid")],(0,u.le)(Y)&&T&&ke.push({field:m.field,matchCase:m.matchCase,operator:"equal",predicate:"and",value:null})),this.initiateFilter(ke)}else this.options.filteredColumns.some(mt=>this.options.field===mt.field)&&this.clearFilter()}static generateNullValuePredicates(e){const t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t}initiateFilter(e){const t=e[0];let s;if(!(0,u.le)(t)){s=t.ejpredicate?t.ejpredicate:new bt.$G(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(let r=1;r<e.length;r++)s=void 0!==e[r].ejpredicate?s[e[r].predicate](e[r].ejpredicate):s[e[r].predicate](e[r].field,e[r].operator,e[r].value,!e[r].matchCase,e[r].ignoreAccent);const n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:bt.$G.or(s)};this.options.handler(n)}}isForeignColumn(e){return!!e.isForeignColumn&&e.isForeignColumn()}refreshCheckboxes(){const e=this.sInput.value,t=this.options.column,s=this.isForeignColumn(t)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),r=s.queries.filter(Vt=>Vt&&"onWhere"===Vt.fn)[0];s.queries=[],n.queries=[];let h="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,m=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal";const T=!0,V=this.options.ignoreAccent,Y=this.isForeignColumn(t)?t.foreignKeyValue:t.field;h=""===h||void 0===h?void 0:h;let se=[];const ge={field:Y,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:T,ignoreAccent:V};let ke;const qe=this.options.dataManager.adaptor.getModuleName;if("boolean"===this.options.type&&(void 0!==h&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(h.toLowerCase())?h="true":void 0!==h&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(h.toLowerCase())&&(h="false"),void 0!==h&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(h.toLowerCase())&&qe?(qe(),h=!0):void 0!==h&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(h.toLowerCase())&&qe&&(qe(),h=!1),m="equal"),("date"===this.options.type||"datetime"===this.options.type)&&this.options.format){const Vt=new u.eC,Qt="string"==typeof this.options.format?this.options.format:this.options.format.format;h=Qt&&Vt.parseDate(e,{format:Qt})||new Date(e)}this.addDistinct(s),this.parent.trigger(lr,{requestType:"filtersearchbegin",filterModel:this,columnName:Y,column:t,operator:m,matchCase:T,ignoreAccent:V,filterChoiceCount:null,query:s,value:h},Vt=>{if(Vt.operator=Vt.operator,ke=new bt.$G(Y,Vt.operator,h,Vt.matchCase,Vt.ignoreAccent),"date"===this.options.type||"datetime"===this.options.type){m="equal";const ai={field:Y,operator:m,value:h,matchCase:T,ignoreAccent:V};(0,u.le)(h)||(ke=nt(ai,this.options.type))}if(e&&"string"==typeof e&&this.isBlanks&&this.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){se=se.concat(Gl.generateNullValuePredicates(ge));const ai=Gl.generatePredicate(se);ai.predicates.push(ke),s.where(ai)}else e.length?(ke=(0,u.le)(r)?ke:ke.and(r.e),s.where(ke)):(0,u.le)(r)||s.where(r.e);Vt.filterChoiceCount=(0,u.le)(Vt.filterChoiceCount)?1e3:Vt.filterChoiceCount;const Qt={};(0,Rt.yh)(this.spinner),this.renderEmpty=!1,this.isForeignColumn(t)&&e.length?("result"in t.dataSource?new bt.hm(t.dataSource.result):t.dataSource).executeQuery(s).then(ki=>{const Qi=this.options.column.columnData;this.options.column.columnData=ki.result,this.parent.notify(ec,{predicate:Qt,column:t}),Qt.predicate.predicates.length?n.where(Qt.predicate):this.renderEmpty=!0,this.options.column.columnData=Qi,n.take(Vt.filterChoiceCount),this.search(Vt,n)}):(s.take(Vt.filterChoiceCount),this.search(Vt,s))})}search(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)}getPredicateFromCols(e){const t=Gl.getPredicate(e),s=[],n={},r=void 0!==this.parent.getForeignKeyColumns,h=r?this.parent.getForeignKeyColumns():[];for(const m of Object.keys(t)){let T;r&&this.parent.getColumnByField(m).isForeignColumn()&&(T=Ve(m,h)),T?(this.parent.notify(ec,{predicate:n,column:T}),n.predicate.predicates.length&&s.push(bt.$G.or(n.predicate.predicates))):s.push(t[m])}return s.length&&bt.$G.and(s)}getQuery(){return this.parent.getQuery?this.parent.getQuery().clone():new bt.AE}getAllData(){const e=this.getQuery();e.requiresCount(),this.addDistinct(e);const t={requestType:$l,query:e,filterChoiceCount:null};t.filterModel=this,this.parent.trigger(lr,t,n=>{n.filterChoiceCount=(0,u.le)(n.filterChoiceCount)?1e3:n.filterChoiceCount,e.take(n.filterChoiceCount),this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(n,e):this.processDataOperation(e,!0)})}addDistinct(e){let t=bt.j4.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e}filterEvent(e,t){const s=Td(e,t);this.parent.trigger(Nh,s.state),s.deffered.promise.then(r=>{this.dataSuccess(r)})}processDataOperation(e,t){this.options.dataSource=this.options.dataSource instanceof bt.hm?this.options.dataSource:new bt.hm(this.options.dataSource);const s=[],n=[];if(this.isForeignColumn(this.options.column)&&t){const h="result"in this.options.column.dataSource?new bt.hm(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,s.push(h.executeQuery(this.foreignKeyQuery)),n.push(m=>this.foreignKeyData=m)}s.push(this.options.dataSource.executeQuery(e)),n.push(this.dataSuccess.bind(this));let r=0;Promise.all(s).then(h=>{for(let m=0;m<h.length;m++)n[r++](h[m].result)})}dataSuccess(e){this.fullData=e;const t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",t),t.executeQuery){const h=new bt.AE;if(this.parent.searchSettings&&this.parent.searchSettings.key.length){const V=this.parent.searchSettings,Y=V.fields.length?V.fields:this.options.columns.map(se=>se.field);h.search(V.key,Y,V.operator,V.ignoreCase,V.ignoreAccent)}if(this.options.filteredColumns.length){const V=[];for(let se=0;se<this.options.filteredColumns.length;se++){const ge=this.options.filteredColumns[se];this.options.uid?(ge.uid=ge.uid||this.parent.getColumnByField(ge.field).uid,ge.uid!==this.options.uid&&V.push(this.options.filteredColumns[se])):ge.field!==this.options.field&&V.push(this.options.filteredColumns[se])}const Y=this.getPredicateFromCols(V);Y&&h.where(Y)}const m=new bt.hm(t.dataSource).executeLocal(h);this.filteredData=Gl.getDistinct(m,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,t.executeQuery?this.filteredData:t.dataSource,t),this.sInput&&this.sInput.focus();const n={requestType:ba,columnName:this.options.field,columnType:this.options.type};n.filterModel=this,this.parent.notify(kc,n)}processDataSource(e,t,s,n){(0,Rt.yh)(this.spinner),this.updateResult(),this.createFilterItems(s,t,n)}processSearch(e){this.processDataOperation(e)}updateResult(){this.result={};const e=this.getPredicateFromCols(this.options.filteredColumns),t=new bt.AE;e&&t.where(e),this.parent.notify("before-checkbox-renderer-query",{query:t});const s=new bt.hm(this.fullData).executeLocal(t);for(const n of s)this.result[mi(this.options.field,n)]=!0}clickHandler(e){const t=e.target,s=Zi(t,"e-checkbox-wrapper");if(Zi(t,"e-searchbox")&&this.searchBoxClick(e),s){const n=s.querySelector(".e-selectall");n?this.updateAllCBoxes(!n.classList.contains("e-check")):function C(b){const e=b.querySelector(".e-frame"),t=e.previousSibling;e.classList.contains("e-check")?(t.checked=!1,(0,u.s1)(e,["e-uncheck"],["e-check"])):(t.checked=!0,(0,u.s1)(e,["e-check"],["e-uncheck"]))}(s.parentElement),this.updateIndeterminatenBtn(),s.querySelector(".e-chk-hidden").focus()}this.setFocus(Zi(s,"e-ftrchk"))}keyupHandler(e){this.setFocus(Zi(e.target,"e-ftrchk"))}setFocus(e){const t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e.classList.add("e-chkfocus")}updateAllCBoxes(e){const t=[].slice.call(this.cBox.getElementsByClassName("e-frame"));for(const s of t)X(s,e),L(s.previousSibling,e)}dialogOpen(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())}createCheckbox(e,t,s){const n=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);L(n.querySelector("input"),t);const r=n.querySelector(".e-label"),h=Hs({},s,{column:this.options.column,parent:this.parent});return r.innerHTML=!(0,u.le)(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),r.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof e&&(r.innerHTML=this.getLocalizedLabel(!0===e?"FilterTrue":"FilterFalse")),(0,u.cn)([r],["e-checkboxfiltertext"]),this.options.template&&s[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(r.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate?(this.options.template(h,this.parent,"filterItemTemplate",null,null,null,r),this.parent.renderTemplates()):Dl(r,this.options.template(h,this.parent,"filterItemTemplate"))),n}updateIndeterminatenBtn(){const e=this.cBox.children.length-1;let t=[],s=!1;const n=this.cBox.querySelector(".e-selectall"),r=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;let h;this.options.isResponsiveFilter||(h=this.dialogObj.btnObj[0],h.disabled=!1);const m=n.previousSibling;L(m,!1),m.indeterminate=!1,e===r?(t=["e-check"],L(m,!0)):r?(t=["e-stop"],m.indeterminate=!0):(t=["e-uncheck"],s=!0,h&&(h.disabled=!0)),h&&(this.filterState=!h.disabled,h.dataBind()),(0,u.IV)([n],["e-check","e-stop","e-uncheck"]),(0,u.cn)([n],t),this.parent.notify(_c,{disabled:s})}createFilterItems(e,t,s){const n=this.parent.createElement("div");let r,h=!1;this.options.isResponsiveFilter||(r=this.dialogObj.btnObj[0]);let m=-1,T="ejValue";s.executeQuery||(T=s.field);for(let se=0;se<e.length;se++){const ge=(0,u.NA)(T,e[se]);(""===ge||(0,u.le)(ge))&&(m+=1)}if(this.itemsCnt=-1!==m?e.length-m:e.length,e.length&&!this.renderEmpty){const se=this.getLocalizedLabel("SelectAll"),ge=this.cBox.querySelector(".e-checkfltrnmdiv");ge&&ge.classList.remove("e-checkfltrnmdiv");const ke=this.createCheckbox(se,!1,{[this.options.field]:se}),qe=q(Na("cbox"),ke,"e-ftrchk");qe.querySelector(".e-frame").classList.add("e-selectall"),n.appendChild(qe);let mt=new bt.$G("field","equal",this.options.field);this.options.foreignKeyValue&&(mt=mt.or("field","equal",this.options.foreignKeyValue));const Vt=new bt.hm(this.options.filteredColumns).executeLocal((new bt.AE).where(mt)).length;let Qt;for(let ai=0;ai<e.length;ai++){const ki=Na("cbox");this.values[ki]=(0,u.NA)(T,e[ai]);let Qi=(0,u.NA)(this.options.field,e[ai]);this.options.formatFn&&(Qi=this.valueFormatter.toView(Qi,this.options.formatFn));const fs={value:Qi,column:this.options.column,data:e[ai]};if(this.parent.notify("filter-cbox-value",fs),Qi=fs.value,""===Qi||(0,u.le)(Qi)){if(Qt)continue;Qt=!0}const ps=this.createCheckbox(Qi,this.getCheckedState(Vt,this.values[ki]),(0,u.NA)("dataObj",e[ai]));n.appendChild(q(ki,ps,"e-ftrchk"))}this.cBox.innerHTML="",Dl(this.cBox,[].slice.call(n.children)),this.updateIndeterminatenBtn(),r&&(r.disabled=!1),h=!1}else n.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),Dl(this.cBox.children[0],[].slice.call(n.children)),r&&(r.disabled=!0),h=!0;r&&(this.filterState=!r.disabled,r.dataBind());const V={requestType:$l,dataSource:this.renderEmpty?[]:e};V.filterModel=this,this.parent.notify(kc,V),this.parent.notify(_c,{disabled:h}),(0,Rt.v3)(this.spinner)}getCheckedState(e,t){if(!this.isFiltered||!e)return!0;{const s=this.result[t];return"notequal"===this.options.operator?!s:s}}static getDistinct(e,t,s,n){let r=e.length;const h=[];let m;const V={},Y=!(!s||!s.isForeignColumn)&&s.isForeignColumn();for(;r--;)if(m=e[r],m=mi(t,m),!(m in V)){const se={};if(se.ejValue=m,V[m]=!0,Y){const ge=He(s,{},m,n)[0];(0,u.sO)(uu,ge,e[r]),m=(0,u.NA)(s.foreignKeyValue,ge)}(0,u.sO)(t,(0,u.le)(m)?null:m,se),(0,u.sO)("dataObj",e[r],se),h.push(se)}return bt.j4.group(bt.j4.sort(h,t,bt.j4.fnAscending),"ejValue")}static getPredicate(e){const t=bt.j4.distinct(e,"field",!0)||[];let s=[];const n={};for(let r=0;r<t.length;r++)s=new bt.hm(e).executeLocal((new bt.AE).where("field","equal",t[r].field)),0!==s.length&&(n[t[r].field]=Gl.generatePredicate(s));return n}static generatePredicate(e){const t=e?e.length:0;let s;const r=Gl.updateDateFilter(e[0]);r.ignoreAccent=!(0,u.le)(r.ignoreAccent)&&r.ignoreAccent,s="date"===r.type||"datetime"===r.type?nt(r,r.type):r.ejpredicate?r.ejpredicate:new bt.$G(r.field,r.operator,r.value,!Gl.getCaseValue(r),r.ignoreAccent);for(let h=1;h<t;h++)e[h]=Gl.updateDateFilter(e[h]),t>2&&h>1&&"or"===e[h].predicate?s.predicates.push("date"===e[h].type||"datetime"===e[h].type?nt(e[h],e[h].type):new bt.$G(e[h].field,e[h].operator,e[h].value,!Gl.getCaseValue(e[h]),e[h].ignoreAccent)):s="date"===e[h].type||"datetime"===e[h].type?"and"===e[h].predicate&&"equal"===e[h].operator?s.or(nt(e[h],e[h].type),e[h].type,e[h].ignoreAccent):s[e[h].predicate](nt(e[h],e[h].type),e[h].type,e[h].ignoreAccent):e[h].ejpredicate?s[e[h].predicate](e[h].ejpredicate):s[e[h].predicate](e[h].field,e[h].operator,e[h].value,!Gl.getCaseValue(e[h]),e[h].ignoreAccent);return s||null}static getCaseValue(e){return(0,u.le)(e.matchCase)?!("string"===e.type||(0,u.le)(e.type)&&"string"==typeof e.value):e.matchCase}static updateDateFilter(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e}}class Nf extends Gl{constructor(e,t){super(e),this.childRefs=[],this.eventHandlers={},this.isDevice=!1,this.customFilterOperators=t,this.isExcel=!0}getCMenuDS(e,t){const s={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","","CustomFilter"]};s.date=s.number,s.datetime=s.number;const n=[];for(let r=0;r<s[e].length;r++)n.push(s[e][r].length?t?{text:this.getLocalizedLabel(s[e][r])+"...",iconCss:"e-icons e-icon-check "+(t===s[e][r].toLowerCase()?"":"e-emptyicon")}:{text:this.getLocalizedLabel(s[e][r])+"..."}:{separator:!0});return n}destroy(){if(this.dlg&&(this.unwireExEvents(),super.closeDialog()),!this.isDevice&&this.menuObj){const e=this.menuObj.element.querySelector("li.e-focused");e&&Zi(e,"e-excel-menu")||this.destroyCMenu()}this.dlgObj&&!this.dlgObj.isDestroyed&&this.removeDialog()}createMenu(e,t,s,n){this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl");const h=this.parent.createElement("ul"),m=t?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";if(this.parent.allowSorting&&"grid"===this.parent.getModuleName()&&!this.options.isResponsiveFilter){const T=this.parent.getColumnHeaderByUid(n.uid).getAttribute("aria-sort"),V=this.parent.getColumnByField(n.field).allowSorting,Y=V&&"ascending"!==T?"e-excel-ascending":"e-disabled e-excel-ascending",se=V&&"descending"!==T?"e-excel-descending":"e-disabled e-excel-descending",ge=this.getLocalizedLabel("string"===e?"SortAtoZ":"datetime"===e||"date"===e?"SortByOldest":"SortSmallestToLargest"),ke=this.getLocalizedLabel("string"===e?"SortZtoA":"datetime"===e||"date"===e?"SortByNewest":"SortLargestToSmallest");h.appendChild(this.createMenuElem(ge,Y,"e-sortascending")),h.appendChild(this.createMenuElem(ke,se,"e-sortdescending"));const qe=this.parent.createElement("li",{className:"e-separator e-menu-item e-excel-separator"});h.appendChild(qe)}this.options.isResponsiveFilter||h.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),t?"":"e-disabled",m)),"boolean"!==e&&h.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[e]),"e-submenu",s&&this.ensureTextFilter()?"e-icon-check":m+" e-emptyicon",!0)),this.menu.appendChild(h),this.parent.notify("before-filter-cmenu-open",{element:this.menu}),this.parent.notify(ud,{isFiltered:t})}createMenuElem(e,t,s,n){const r=this.parent.createElement("li",{className:t+" e-menu-item"});return r.innerHTML=e,r.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+s}),r.firstChild),n&&r.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),r}wireExEvents(){u.bi.add(this.dlg,"mouseover",this.hoverHandler,this),u.bi.add(this.dlg,"click",this.clickExHandler,this)}unwireExEvents(){u.bi.remove(this.dlg,"mouseover",this.hoverHandler),u.bi.remove(this.dlg,"click",this.clickExHandler)}clickExHandler(e){const s=Zi(e.target,"e-menu-item");s&&(this.getLocalizedLabel("ClearFilter")===s.innerText.trim()?(this.clearFilter(),this.closeDialog()):this.options.isResponsiveFilter&&this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type])===s.innerText.trim()&&this.hoverHandler(e))}destroyCMenu(){this.isCMenuOpen=!1,this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),(0,u.Od)(this.cmenu),this.parent.notify(Hc,{target:null,header:"",isOpen:!1,col:this.options.column}))}hoverHandler(e){if(this.options.isResponsiveFilter&&"mouseover"===e.type)return;const t=e.target.querySelector(".e-contextmenu"),s=Zi(e.target,"e-menu-item"),n=this.menu.querySelector(".e-focused");let r;if(n&&n.classList.remove("e-focused"),s&&(s.classList.add("e-focused"),r=s.classList.contains("e-submenu")),t)return;if(!r){const m=this.menu.querySelector(".e-submenu");(0,u.le)(m)||m.classList.remove("e-selected"),this.destroyCMenu()}const h=this.ensureTextFilter();if(!this.isCMenuOpen&&r){s.classList.add("e-selected"),this.isCMenuOpen=!0;const m={items:this.getCMenuDS(this.options.type,h?h.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,beforeClose:this.preventClose.bind(this),cssClass:this.options.isResponsiveFilter?"e-res-contextmenu-wrapper":""};this.parent.element.appendChild(this.cmenu),this.menuObj=new ce.xV(m,this.cmenu);const T=this.menu.querySelector(".e-submenu").getBoundingClientRect(),V={top:0,left:0};if(this.options.isResponsiveFilter){const Y={string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"},ge=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4;this.menuObj.element.style.height="calc(100% - "+ge+"px)",this.menuObj.open(ge,0,document.body);const ke=this.getLocalizedLabel(Y[this.options.type]);this.parent.notify(Hc,{target:this.menuObj.element.parentElement,header:ke,isOpen:!0})}else{if(u.AR.isDevice){this.isDevice=!0;const Y=this.getContextBounds();V.top=(window.innerHeight-Y.height)/2,V.left=(window.innerWidth-Y.width)/2,this.closeDialog(),this.isDevice=!1}else V.top=u.AR.isIE?window.pageYOffset+T.top:window.scrollY+T.top,V.left=this.getCMenuYPosition(this.dlg);this.menuObj.open(V.top,V.left,e.target)}Mo(this.parent.element,this.menuObj.element.parentElement)}}ensureTextFilter(){let e;const t=this.existingPredicate[this.options.field];return t&&2===t.length?e="greaterthanorequal"===t[0].operator&&"lessthanorequal"===t[1].operator?"between":"customfilter":t&&1===t.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],e=t[0].operator),e}preventClose(e){if(this.options&&this.options.isResponsiveFilter&&e.event){const t=e.event.target,s=t.classList.contains("e-resfilterback")||t.classList.contains("e-res-back-btn")||t.classList.contains("e-menu-item");e.cancel=!s}else e.event instanceof MouseEvent&&e.event.target.classList.contains("e-submenu")&&(e.cancel=!0)}getContextBounds(){return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()}getCMenuYPosition(e){const t=this.getContextBounds().width,s=e.getBoundingClientRect();let r=e.offsetWidth-e.clientWidth;return r=r?r+1:0,s.right+t-this.parent.element.clientWidth<1?s.right+1-r:s.left-t-1+r}openDialog(e){if(this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e),e.cancel)return;this.dialogObj.dataBind();const t=this.existingPredicate[e.field]&&this.existingPredicate[e.field].length||this.options.filteredColumns.filter(s=>this.options.field===s.field).length;this.createMenu(e.type,t>0,1===t||2===t,e),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"}),e.column.showColumnMenu&&this.parent.notify(xc,{}),this.wireExEvents()}closeDialog(){this.destroy()}selectHandler(e){e.item&&(this.parent.notify(pd,{}),this.menuItem=e.item,this.renderDialogue(e))}renderDialogue(e){const t=e?e.element:void 0,s=this.options.field,n=!(0,u.le)(s)&&ch(s),r=!(0,u.le)(s)&&Il(s),h=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:n?r+"-xlflmenu":s+"-xlflmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:n?r+"-xlfldlg":s+"-xlfldlg"}),this.options.isResponsiveFilter?document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv").appendChild(this.dlgDiv):this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new Rt.Vq({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,closeOnEscape:!1,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:()=>{const T=this.dlgObj.element.querySelector("table.e-xlfl-table>tr");this.options.column.filterTemplate&&T.querySelector("#"+this.options.column.field+"-xlfl-frstvalue").focus()},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,t,s),buttons:[{click:this.filterBtnClick.bind(this,s),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:"e-xlfl-cancelbtn"}}],content:h,width:430,animationSettings:{effect:"None"}}),this.dlgObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.childRefs.push(this.dlgObj),this.dlgObj.appendTo(this.dlgDiv)}renderResponsiveDialog(){if(this.options.isResponsiveFilter){const e=document.querySelector(".e-row-responsive-filter");e&&e.classList.remove("e-row-responsive-filter"),this.dlgObj.buttons=[{}],this.dlgObj.header=void 0,this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.showCloseIcon=!1}}removeDialog(){this.parent.notify(fd,{}),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Pp(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),(0,u.Od)(this.dlgDiv),this.parent.notify(bh,{})}createdDialog(e,t){if(this.renderCustomFilter(e,t),this.dlgObj.element.style.left="0px",this.options.isResponsiveFilter){const n=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4;this.dlgObj.element.style.top=n+"px"}else this.dlgObj.element.style.top="0px";!this.options.isResponsiveFilter&&u.AR.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify("beforeCustomFilterOpen",{column:t,dialog:this.dialogObj}),this.dlgObj.show(),Mo(this.parent.element,this.dlgObj.element.parentElement)}renderCustomFilter(e,t){const s=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),n=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});s.appendChild(n);const r=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});s.appendChild(r),this.renderFilterUI(t,s)}filterBtnClick(e){const t=!(0,u.le)(e)&&ch(e),s=!(0,u.le)(e)&&Il(e),n=t?s:e,r=this.dlgDiv.querySelector("#"+n+"-xlfl-frstvalue").ej2_instances[0],h=this.dlgDiv.querySelector("#"+n+"-xlfl-frstoptr").ej2_instances[0],m=this.dlgDiv.querySelector("#"+n+"-xlfl-secndvalue").ej2_instances[0],T=this.dlgDiv.querySelector("#"+n+"-xlfl-secndoptr").ej2_instances[0];let V;"string"===this.options.type&&(V=this.dlgDiv.querySelector("#"+n+"-xlflmtcase").ej2_instances[0].checked);let se=this.dlgDiv.querySelector("#"+n+"e-xlfl-frstpredicate").ej2_instances[0].checked?"and":"or";null===m.value&&(se="or"),this.filterByColumn(this.options.field,h.value,r.value,se,V,this.options.ignoreAccent,T.value,m.value),this.removeDialog()}filterByColumn(e,t,s,n,r,h,m,T){const V=this.parent.getColumnByField?this.parent.getColumnByField(e):this.options.column,Y=this.isForeignColumn(V)?V.foreignKeyValue:e,se=[];let ge;se.push({field:Y,predicate:n,matchCase:r,ignoreAccent:h,operator:t,value:s,type:this.options.type});const ke={instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:s,arg4:n,arg5:r,arg6:h,arg7:m,arg8:T,cancel:!1};if(this.parent.notify(tc,ke),ke.cancel)return;ge=new bt.$G(Y,t.toLowerCase(),s,!r,h),!(0,u.le)(T)&&!(0,u.le)(m)&&(se.push({field:Y,predicate:n,matchCase:r,ignoreAccent:h,operator:m,value:T,type:this.options.type}),ge=ge[n](Y,m.toLowerCase(),T,!r,h));const qe={action:"filtering",filterCollection:se,field:this.options.field,ejpredicate:ge,actualPredicate:se};this.isForeignColumn(V)?this.foreignKeyFilter(qe,se,ge):this.options.handler(qe)}renderOperatorUI(e,t,s,n,r){const h=this.parent.createElement("tr",{className:"e-xlfl-fields"});t.appendChild(h);const m=this.parent.createElement("td",{className:"e-xlfl-optr"});h.appendChild(m);const T=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),V=!(0,u.le)(e)&&ch(e),Y=!(0,u.le)(e)&&Il(e),se=this.parent.createElement("input",{id:V?Y+s:e+s});T.appendChild(se),m.appendChild(T);const ke=this.customFilterOperators[this.options.type+"Operator"];this.optrData=ke;let qe=this.dropSelectedVal(this.options.column,n,r),mt="";this.menuItem&&(mt=this.menuItem.text.slice(0,-3),mt!==this.getLocalizedLabel("CustomFilter")&&(qe=r?mt:void 0),mt===this.getLocalizedLabel("Between")&&(qe=this.getLocalizedLabel(r?"GreaterThanOrEqual":"LessThanOrEqual")));const Qt=new ve.NB(fc({dataSource:ke,fields:{text:"text",value:"value"},text:qe,enableRtl:this.parent.enableRtl},this.options.column.filter.params));this.childRefs.push(Qt);const ai={open:this.dropDownOpen.bind(this),change:this.dropDownValueChange.bind(this)};return Ng(se.id,[xa,hc],ai,this),Qt.addEventListener(xa,this.eventHandlers[se.id][xa]),Qt.addEventListener(hc,this.eventHandlers[se.id][hc]),Qt.appendTo(se),{fieldElement:h,operator:this.getSelectedValue(qe)}}removeHandlersFromComponent(e){e.element.classList.contains("e-dropdownlist")?Pm(e,[xa,hc],this):e.element.classList.contains("e-autocomplete")&&Pm(e,[vn,Ga],this)}dropDownOpen(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()}dropDownValueChange(e){e.element.id.includes("-xlfl-frstoptr")?this.firstOperator=e.value.toString():this.secondOperator=e.value.toString()}getFilterUIInfo(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}}getSelectedValue(e){const t=new bt.hm(this.optrData).executeLocal((new bt.AE).where("text","equal",e));return(0,u.le)(t[0])?"":t[0].value}dropSelectedVal(e,t,s){let n;return n=t&&t.length>0?2===t.length?s?t[0].operator:t[1].operator:s?t[0].operator:void 0:s&&"string"===e.type&&!e.filter.operator?"startswith":s?e.filter.operator||"equal":void 0,this.getSelectedText(n)}getSelectedText(e){const t=new bt.hm(this.optrData).executeLocal((new bt.AE).where("value","equal",e));return(0,u.le)(t[0])?"":t[0].text}renderFilterUI(e,t){const s=this.existingPredicate[e],n=this.parent.createElement("table",{className:"e-xlfl-table"});t.appendChild(n);const r=this.parent.createElement(Qn);r.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',n.appendChild(r);let h=this.renderOperatorUI(e,n,"-xlfl-frstoptr",s,!0);this.firstOperator=h.operator,this.renderFlValueUI(e,h,"-xlfl-frstvalue",s,!0);const m=this.parent.createElement("tr",{className:"e-xlfl-predicate"});n.appendChild(m),this.renderRadioButton(e,m,s),h=this.renderOperatorUI(e,n,"-xlfl-secndoptr",s,!1),this.secondOperator=h.operator,this.renderFlValueUI(e,h,"-xlfl-secndvalue",s,!1)}renderRadioButton(e,t,s){const n=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}});t.appendChild(n);const r=this.parent.createElement("div",{className:"e-xlfl-radiodiv",attrs:{style:"display: inline-block"}}),h=!(0,u.le)(e)&&ch(e),m=!(0,u.le)(e)&&Il(e),T=this.parent.createElement("input",{id:h?m+"e-xlfl-frstpredicate":e+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),V=this.parent.createElement("input",{id:h?m+"e-xlfl-secndpredicate":e+"e-xlfl-secndpredicate",attrs:{type:"radio"}});r.appendChild(T),r.appendChild(V),n.appendChild(r),"string"===this.options.type&&this.renderMatchCase(e,t,n,"-xlflmtcase",s);const Y=new z.EU({label:this.getLocalizedLabel("AND"),name:"default",checked:!0,enableRtl:this.parent.enableRtl});this.childRefs.push(Y);const se=new z.EU({label:this.getLocalizedLabel("OR"),name:"default",enableRtl:this.parent.enableRtl});this.childRefs.push(se),"and"===(s&&2===s.length?s[1].predicate:"and")?(Y.checked=!0,se.checked=!1):(se.checked=!0,Y.checked=!1),Y.appendTo(T),se.appendTo(V),Y.element.nextElementSibling.classList.add("e-xlfl-radio-and"),se.element.nextElementSibling.classList.add("e-xlfl-radio-or")}removeObjects(e){for(const t of e)t&&!t.isDestroyed&&(this.removeHandlersFromComponent(t),t.destroy())}renderFlValueUI(e,t,s,n,r){const h=this.parent.createElement("td",{className:"e-xlfl-value"});t.fieldElement.appendChild(h);const m=!(0,u.le)(e)&&ch(e),T=!(0,u.le)(e)&&Il(e),V=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),Y=this.options.filteredColumns.some(ge=>e===ge.field),se=this.options.filteredColumns.filter(ge=>ge.field===e);if(this.options.column.filterTemplate){let ge={};const ke=this.options.column;Y&&s&&(ge=this.getExcelFilterData(s,ge,ke,n,se));const mt=this.parent.element.id+ke.uid+"filterTemplate";this.parent.isReact&&"string"!=typeof this.options.column.filterTemplate?(this.options.column.getFilterTemplate()(ge,this.parent,"filterTemplate",mt,null,null,V),this.parent.renderTemplates()):Dl(V,this.options.column.getFilterTemplate()(ge,this.parent,"filterTemplate",mt)),(this.parent.isAngular?V.children[0]:V.querySelector("input")).id=m?T+s:e+s,h.appendChild(V)}else{const ge=this.parent.createElement("input",{id:m?T+s:e+s});let ke,qe;V.appendChild(ge),h.appendChild(V),n&&n.length>0&&(qe=2===n.length?r?n[0]:n[1]:r?n[0]:void 0,ke=qe&&qe.operator===t.operator?qe.value:void 0,(0,u.le)(ke)&&(ke=void 0)),{string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)}[this.options.type](this.options,e,ge,ke,this.parent.enableRtl)}}getExcelFilterData(e,t,s,n,r){const h="-xlfl-frstvalue"===e?0:1;if("-xlfl-frstvalue"===e||r.length>1){const m=this.options.column.columnData&&r.length>1?1===this.options.column.columnData.length?0:1:h;(t={column:n instanceof Array?n[h]:n})[this.options.field]=s.foreignKeyValue?this.options.column.columnData[m][s.foreignKeyValue]:r[m].value,this.options.foreignKeyValue&&(t[this.options.foreignKeyValue]=this.options.column.columnData[m][s.foreignKeyValue])}return t}renderMatchCase(e,t,s,n,r){const h=this.parent.createElement("div",{className:"e-xlfl-matchcasediv",attrs:{style:"display: inline-block"}}),m=!(0,u.le)(e)&&ch(e),T=!(0,u.le)(e)&&Il(e),V=this.parent.createElement("input",{id:m?T+n:e+n,attrs:{type:"checkbox"}});h.appendChild(V),s.appendChild(h);const Y=!!(r&&r.length>0)&&(r&&2===r.length?r[1].matchCase:r[0].matchCase),se=new z.Jg({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:Y});this.childRefs.push(se),se.appendTo(V)}renderDate(e,t,s,n,r){const h=Ni(e.format,e.type)||e.format,m=new Ne.Mt(fc({format:h,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:r,value:new Date(n),locale:this.parent.locale},e.column.filter.params));this.childRefs.push(m),m.appendTo(s)}renderDateTime(e,t,s,n,r){const h=Ni(e.format,e.type),m=new Ne.xZ(fc({format:h,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:r,value:new Date(n),locale:this.parent.locale},e.column.filter.params));this.childRefs.push(m),m.appendTo(s)}completeAction(e){e.result=function l(b){const e={},t=[];for(let s=0;s<b.length;s++)b[s]in e||(t.push(b[s].toString()),e[b[s]]=1);return t}(e.result)}renderNumericTextBox(e,t,s,n,r){const h=new J.No(fc({format:e.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:r,value:n,locale:this.parent.locale},e.column.filter.params));this.childRefs.push(h),h.appendTo(s)}renderAutoComplete(e,t,s,n,r){const h=this.options.column,m=this.isForeignColumn(h),T=m?h.dataSource:e.dataSource,V={value:m?h.foreignKeyValue:t},Y=new ve.Qc(fc({dataSource:T instanceof bt.hm?T:new bt.hm(T),fields:V,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:"e-popup-flmenu",autofill:!0,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:r,text:n},h.filter.params));if(T&&"result"in T){const ge=Td({requestType:"stringfilterrequest"},this.getQuery());this.parent.trigger(Nh,ge.state),ge.deffered.promise.then(qe=>{Y.dataSource=new bt.hm(qe)})}this.childRefs.push(Y);const se={actionComplete:this.acActionComplete(Y,t),focus:this.acFocus(Y,t,e,s)};Ng(s.id,[vn,Ga],se,this),Y.addEventListener(Ga,this.eventHandlers[s.id][Ga]),Y.addEventListener(vn,this.eventHandlers[s.id][vn]),Y.appendTo(s)}acActionComplete(e,t){return s=>{const n=!(0,u.le)(t)&&ch(t);s.result=s.result.filter((r,h,m)=>m.map(T=>n?Fp(e.fields.value,T):T[e.fields.value]).indexOf(n?Fp(e.fields.value,r):r[e.fields.value])===h)}}acFocus(e,t,s,n){return()=>{const r=!(0,u.le)(t)&&ch(t),h=!(0,u.le)(t)&&Il(t),m=r?h:t;e.filterType=this.dlgDiv.querySelector("#"+m+(n.id===m+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,e.ignoreCase="string"!==s.type||!this.dlgDiv.querySelector("#"+m+"-xlflmtcase").ej2_instances[0].checked,e.filterType=(0,u.le)(e.filterType)?"equal":e.filterType}}}class su{constructor(e,t,s,n){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new Ya,this.currentTarget=null,this.parent=e,this.sortSettings=t,this.sortedColumns=s,this.serviceLocator=n,this.focus=n.getService("focus"),this.addEventListener(),this.setFullScreenDialog()}updateModel(){const e={field:this.columnName,direction:this.direction};let t;const s=this.parent.groupSettings.columns;let n=!1;if(this.isMultiSort)t=this.getSortedColsIndexByField(this.columnName),t>-1&&this.sortSettings.columns.splice(t,1),this.sortSettings.columns.push(e),this.sortSettings.columns=this.sortSettings.columns;else if(s.length){const r=[];for(let h=0,m=s.length;h<m;h++)if(t=this.getSortedColsIndexByField(s[h],r),this.columnName===s[h])n=!0,r.push(e);else{const T=this.getSortColumnFromField(s[h]);r.push({field:T.field,direction:T.direction,isFromGroup:T.isFromGroup})}n||r.push(e),this.sortSettings.columns=r}else this.sortSettings.columns=[e];this.parent.dataBind(),this.lastSortedCol=this.columnName}onActionComplete(e){const t=this.isRemove?{requestType:"sorting",type:vn}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:vn};this.isRemove=!1,this.parent.trigger(vn,(0,u.l7)(e,t))}sortColumn(e,t,s){const n=this.parent;!1===this.parent.getColumnByField(e).allowSorting||this.parent.isContextMenuOpen()?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:e}):(n.allowMultiSorting||(s=n.allowMultiSorting),this.isActionPrevent()?n.notify(Ca,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:s}):(this.backupSettings(),this.columnName=e,this.direction=t,this.isMultiSort=s,this.removeSortIcons(),this.updateSortedCols(e,s),this.updateModel()))}setFullScreenDialog(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,ao.isSort)}backupSettings(){this.lastSortedCols=Ed(this.sortSettings.columns),this.lastCols=this.sortedColumns}restoreSettings(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0}updateSortedCols(e,t){if(!t)if(this.parent.allowGrouping)for(let s=0,n=this.sortedColumns.length;s<n;s++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[s])<0&&(this.sortedColumns.splice(s,1),n--,s--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)}onPropertyChanged(e){e.module===this.getModuleName()&&(this.contentRefresh&&this.parent.notify(Me,this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:lr,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:lr,cancel:!1,target:this.currentTarget}),this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons())}refreshSortSettings(){this.sortedColumns.length=0;const e=this.sortSettings.columns;for(let t=0;t<e.length;t++)e[t].isFromGroup||this.sortedColumns.push(e[t].field)}clearSorting(){const e=Mf(this.sortSettings.columns);if(this.isActionPrevent())this.parent.notify(Ca,{instance:this,handler:this.clearSorting});else for(let t=0,s=e.length;t<s;t++)this.removeSortColumn(e[t].field)}isActionPrevent(){return Rh(this.parent)}removeSortColumn(e){const t=this.parent,s=this.sortSettings.columns;if(0===s.length&&this.sortedColumns.indexOf(e)<0)return;if(this.isActionPrevent())return void this.parent.notify(Ca,{instance:this,handler:this.removeSortColumn,arg1:e});this.backupSettings(),this.removeSortIcons();const n={requestType:"sorting",type:lr,target:this.currentTarget};for(let r=0,h=s.length;r<h;r++)if(s[r].field===e){if(t.allowGrouping&&t.groupSettings.columns.indexOf(s[r].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(s[r].field),1),s.splice(r,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(Me,n);break}n.cancel||this.addSortIcons()}getSortedColsIndexByField(e,t){const s=t||this.sortSettings.columns;for(let n=0,r=s.length;n<r;n++)if(s[n].field===e)return n;return-1}getModuleName(){return"sort"}initialEnd(){if(this.parent.off(F,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){const e=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(const t of e.sortSettings.columns.slice())this.sortedColumns.indexOf(t.field)>-1&&this.sortColumn(t.field,t.direction,!0);this.isMultiSort=!1,this.contentRefresh=!0}}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Kl,handler:this.setFullScreenDialog},{event:F,handler:this.initialEnd},{event:Dr,handler:this.onActionComplete},{event:pe,handler:this.onPropertyChanged},{event:Ll,handler:this.clickHandler},{event:ei,handler:this.refreshSortIcons},{event:Ko,handler:this.keyPressed},{event:Ac,handler:this.cancelBeginEvent},{event:Tr,handler:this.destroy}],pl(this.parent,this.evtHandlers,!0,this))}removeEventListener(){this.parent.isDestroyed||pl(this.parent,this.evtHandlers,!1)}destroy(){this.isModelChanged=!1;const e=this.parent.element;!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll)||(this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowSorting)&&this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())}cancelBeginEvent(e){"sorting"===e.requestType&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)}clickHandler(e){const t=this.parent;this.currentTarget=null,this.popUpClickHandler(e);const s=(0,u.oq)(e.target,".e-headercell");if(s&&!e.target.classList.contains("e-grptogglebtn")&&!s.classList.contains("e-resized")&&!e.target.classList.contains("e-rhandler")&&!e.target.classList.contains("e-columnmenu")&&!e.target.classList.contains("e-filtermenudiv")&&!Zi(e.target,"e-stackedheadercell")&&!(t.allowSelection&&t.selectionSettings.allowColumnSelection&&e.target.classList.contains("e-headercell"))){const r=this.parent.getColumnByUid(s.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));"checkbox"!==r.type&&(this.initiateSort(s,e,r),u.AR.isDevice&&this.showPopUp(e))}if(s&&s.classList.remove("e-resized"),Zi(e.target,"e-excel-ascending")||Zi(e.target,"e-excel-descending")){const n=(0,u.oq)(e.target,".e-filter-popup").getAttribute("uid"),r=(0,u.le)(Zi(e.target,"e-excel-descending"))?"Ascending":"Descending";this.sortColumn(t.getColumnByUid(n).field,r,!1)}}keyPressed(e){if(!this.parent.isEdit&&("enter"===e.action||"ctrlEnter"===e.action||"shiftEnter"===e.action)&&(0,u.oq)(e.target,".e-headercell")){const s=this.focus.getFocusedElement();if((0,u.le)(s)||!s.classList.contains("e-headercell")||!s.querySelector(".e-headercelldiv"))return;const n=this.parent.getColumnByUid(s.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.initiateSort(s,e,n)}}initiateSort(e,t,s){const n=this.parent,r=s.field;this.currentTarget=t.target;const h=e.getElementsByClassName("e-ascending").length?"Descending":"Ascending";this.isMultiSort=t.ctrlKey||this.enableSortMultiTouch||-1!==navigator.userAgent.indexOf("Mac OS")&&t.metaKey,t.shiftKey||this.sortSettings.allowUnsort&&e.getElementsByClassName("e-descending").length&&!(n.groupSettings.columns.indexOf(r)>-1)?this.removeSortColumn(r):this.sortColumn(r,h,this.isMultiSort)}showPopUp(e){const t=(0,u.oq)(e.target,".e-headercell");this.parent.allowMultiSorting&&(!(0,u.le)(t)||this.parent.isContextMenuOpen())&&Ap(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))}popUpClickHandler(e){const t=e.target;(0,u.oq)(t,".e-headercell")||e.target.classList.contains(Cr)||(0,u.oq)(t,".e-gridpopup")?t.classList.contains("e-sortdirect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"}addSortIcons(){const e=this.parent;let t,s;const n=this.sortSettings.columns,r=this.parent.getColumns().map(h=>h.field);for(let h=0,m=n.length;h<m;h++)t=e.getColumnHeaderByField(n[h].field),-1!==r.indexOf(n[h].field)&&!(0,u.le)(t)&&(this.aria.setSort(t,n[h].direction.toLowerCase()),n.length>1&&t.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(h+1).toString()}),t.querySelector(".e-headertext")),s=t.querySelector(".e-sortfilterdiv"),(0,u.s1)(s,"Ascending"===n[h].direction?["e-ascending","e-icon-ascending"]:["e-descending","e-icon-descending"],[]))}removeSortIcons(e){const t=this.parent;let s;const n=this.sortSettings.columns,r=this.parent.getColumns().map(h=>h.field);for(let h=e||0,m=(0,u.le)(e)?n.length:e+1;h<m;h++)s=t.getColumnHeaderByField(n[h].field),!((0,u.le)(s)||t.allowGrouping&&t.groupSettings.columns.indexOf(n[h].field)>-1&&!s.querySelector(".e-sortfilterdiv"))&&-1!==r.indexOf(n[h].field)&&(this.aria.setSort(s,"none"),(0,u.s1)(s.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),s.querySelector(".e-sortnumber")&&s.querySelector(".e-headercelldiv").removeChild(s.querySelector(".e-sortnumber")))}getSortColumnFromField(e){for(let t=0,s=this.sortSettings.columns.length;t<s;t++)if(this.sortSettings.columns[t].field===e)return this.sortSettings.columns[t];return!1}updateAriaAttr(){const e=this.parent.getColumns().map(t=>t.field);for(const t of this.sortedColumns){if(-1===e.indexOf(t))continue;const s=this.parent.getColumnHeaderByField(t);this.aria.setSort(s,this.getSortColumnFromField(t).direction)}}refreshSortIcons(e={args:{isFrozen:!1}}){e.args.isFrozen||(this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr())}showCustomSort(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog()}}class Nm{constructor(e){this.pagerModule=e}render(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()}refresh(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()}refreshNumericLinks(){let e;const t=this.pagerModule,s=t.element.querySelector(".e-numericcontainer"),n=document.createDocumentFragment();s.innerHTML="";for(let r=1;r<=t.pageCount;r++)e=(0,u.az)("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+r,href:"javascript:void(0);",name:"Goto page"+r}}),t.currentPage===r&&(0,u.s1)(e,["e-currentitem","e-active"],["e-pager-default"]),n.appendChild(e);s.appendChild(n),this.links=[].slice.call(s.childNodes)}wireEvents(){u.bi.add(this.pagerElement,"click",this.clickHandler,this)}unwireEvents(){u.bi.remove(this.pagerModule.element,"click",this.clickHandler)}destroy(){this.unwireEvents()}renderNumericContainer(){this.element=(0,u.az)("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild((0,u.az)("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)}renderFirstNPrev(e){this.first=(0,u.az)("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=(0,u.az)("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),(0,u.R3)([this.first,this.prev],e)}renderPrevPagerSet(e){const t=(0,u.az)("div");this.PP=(0,u.az)("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)}renderNextPagerSet(e){const t=(0,u.az)("div");this.NP=(0,u.az)("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)}renderNextNLast(e){this.next=(0,u.az)("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=(0,u.az)("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),(0,u.R3)([this.next,this.last],e)}clickHandler(e){const t=this.pagerModule,s=e.target;return t.previousPageNo=t.currentPage,!s.classList.contains("e-disable")&&!(0,u.le)(s.getAttribute("index"))&&(t.currentPage=parseInt(s.getAttribute("index"),10),t.dataBind()),!1}updateLinksHtml(){const e=this.pagerModule;let t,s;e.currentPage=1===e.totalPages?1:e.currentPage,e.currentPage>e.totalPages&&e.totalPages&&(e.currentPage=e.totalPages),t=parseInt((e.currentPage/e.pageCount).toString(),10),e.currentPage%e.pageCount==0&&t>0&&(t-=1);for(let n=0;n<e.pageCount;n++)s=t*e.pageCount+1+n,s<=e.totalPages?(this.links[n].style.display="",this.links[n].setAttribute("index",s.toString()),this.links[n].innerHTML=e.customText?e.customText+s:s.toString(),e.currentPage!==s?this.links[n].classList.add("e-pager-default"):this.links[n].classList.remove("e-pager-default")):(this.links[n].innerHTML=e.customText?e.customText+s:s.toString(),this.links[n].style.display="none"),(0,u.s1)(this.links[n],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",e.totalPages.toString()),this.prev.setAttribute("index",(e.currentPage-1).toString()),this.next.setAttribute("index",(e.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",e.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(e.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(e.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-e.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())}updateStyles(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&(0,u.s1)(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])}updateFirstNPrevStyles(){const e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],s=["e-prevpage","e-pager-default"],n=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?((0,u.s1)(this.prev,s,n),(0,u.s1)(this.first,e,t),(0,u.s1)(this.pagerElement.querySelector(".e-mfirst"),e,t),(0,u.s1)(this.pagerElement.querySelector(".e-mprev"),s,n)):((0,u.s1)(this.prev,n,s),(0,u.s1)(this.first,t,e),(0,u.s1)(this.pagerElement.querySelector(".e-mprev"),n,s),(0,u.s1)(this.pagerElement.querySelector(".e-mfirst"),t,e))}updatePrevPagerSetStyles(){this.pagerModule.currentPage>this.pagerModule.pageCount?(0,u.s1)(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):(0,u.s1)(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])}updateNextPagerSetStyles(){const e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?(0,u.s1)(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):(0,u.s1)(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])}updateNextNLastStyles(){const e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],s=["e-nextpage","e-pager-default"],n=["e-nextpagedisabled","e-disable"],r=this.pagerModule;r.currentPage===r.totalPages||0===r.totalRecordsCount?((0,u.s1)(this.last,t,e),(0,u.s1)(this.next,n,s),(0,u.s1)(this.pagerElement.querySelector(".e-mlast"),t,e),(0,u.s1)(this.pagerElement.querySelector(".e-mnext"),n,s)):((0,u.s1)(this.last,e,t),(0,u.s1)(this.next,s,n),(0,u.s1)(this.pagerElement.querySelector(".e-mlast"),e,t),(0,u.s1)(this.pagerElement.querySelector(".e-mnext"),s,n))}}class Bg{constructor(e){this.pagerModule=e}render(){const e=(0,u.az)("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=(0,u.az)("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=(0,u.az)("span",{className:"e-pagecountmsg",styles:"textalign:right"}),(0,u.R3)([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()}refresh(){const e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)}hideMessage(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")}showMessage(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""}destroy(){}format(e,t){let s;for(let n=0;n<t.length;n++)s=new RegExp("\\{"+n+"\\}","gm"),e=e.replace(s,t[n].toString());return e}}var ma=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};let Xl=class extends u.wA{constructor(e,t){super(e,t),this.hasParent=!1,this.pageRefresh="pager-refresh"}requiredModules(){const e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e}preRender(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager",PreviousPagerTooltip:"Go to previous pager",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All"},this.containerModule=new Nm(this),this.pagerMessageModule=new Bg(this)}render(){this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))}getPersistData(){return this.addOnPersist(["currentPage","pageSize"])}destroy(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["template"])),super.destroy(),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))}destroyTemplate(e,t){this.clearTemplate(e,t)}getModuleName(){return"pager"}onPropertyChanged(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(const s of Object.keys(e))switch(s){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}}getLocalizedLabel(e){return this.localeObj.getConstant(e)}goToPage(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())}setPageSize(e){this.pageSize=e,this.dataBind()}checkpagesizes(){return!(!0!==this.pageSizes&&!this.pageSizes.length)}checkGoToPage(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),(0,u.le)(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages}currentPageChanged(e,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==t.currentPage||e.pageSize!==t.pageSize){const s={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1};this.trigger("click",s),s.cancel||this.refresh()}}pagerTemplate(){if(this.isReactTemplate()&&this.hasParent)return;let e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);const t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},s=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(t,this,"template",s,null,null,this.element),this.renderReactTemplates()):(e=this.isVue?this.getPagerTemplate()(t,this,"template"):this.getPagerTemplate()(t),Dl(this.element,e))}updateTotalPages(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1}getPagerTemplate(){return this.templateFn}compile(e){if(e)try{document.querySelectorAll(e).length&&(this.templateFn=(0,u.MY)(document.querySelector(e).innerHTML.trim()))}catch{this.templateFn=(0,u.MY)(e)}}refresh(){this.template?this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())}updateRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}initLocalization(){this.localeObj=new u.E7(this.getModuleName(),this.defaultConstants,this.locale)}updateQueryString(e){const t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)}getUpdatedURL(e,t,s){const n=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(n))return e.replace(n,"$1"+t+"="+s+"$2");{let r="";return-1!==e.indexOf("#")&&(r=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+s+r}}renderFirstPrevDivForDevice(){this.element.appendChild((0,u.az)("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild((0,u.az)("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))}renderNextLastDivForDevice(){this.element.appendChild((0,u.az)("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild((0,u.az)("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))}addAriaLabel(){const e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!u.AR.isDevice)for(let t=0;t<e.length;t++){const s=this.element.querySelector(e[t]);s.setAttribute("aria-label",s.getAttribute("title"))}}isReactTemplate(){return(this.isReact||this.isVue)&&this.template&&"string"!=typeof this.template}};ma([(0,u.Z9)(!1)],Xl.prototype,"enableQueryString",void 0),ma([(0,u.Z9)(!1)],Xl.prototype,"enableExternalMessage",void 0),ma([(0,u.Z9)(!0)],Xl.prototype,"enablePagerMessage",void 0),ma([(0,u.Z9)(12)],Xl.prototype,"pageSize",void 0),ma([(0,u.Z9)(10)],Xl.prototype,"pageCount",void 0),ma([(0,u.Z9)(1)],Xl.prototype,"currentPage",void 0),ma([(0,u.Z9)()],Xl.prototype,"totalRecordsCount",void 0),ma([(0,u.Z9)()],Xl.prototype,"externalMessage",void 0),ma([(0,u.Z9)(!1)],Xl.prototype,"pageSizes",void 0),ma([(0,u.Z9)()],Xl.prototype,"template",void 0),ma([(0,u.Z9)("")],Xl.prototype,"customText",void 0),ma([(0,u.ju)()],Xl.prototype,"click",void 0),ma([(0,u.ju)()],Xl.prototype,"dropDownChanged",void 0),ma([(0,u.ju)()],Xl.prototype,"created",void 0),Xl=ma([u.Zl],Xl);class Vg{constructor(e){this.pagerModule=e}getModuleName(){return"pagerdropdown"}render(){const e=this.pagerModule;this.pagerDropDownDiv=(0,u.az)("div",{className:"e-pagesizes"});const t=(0,u.az)("div",{className:"e-pagerdropdown"}),s=(0,u.az)("div",{className:"e-pagerconstant"}),n=(0,u.az)("input",{attrs:{type:"text",tabindex:"1"}});this.pagerCons=(0,u.az)("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(n),s.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(s),this.pagerModule.element.appendChild(this.pagerDropDownDiv);const r=this.pagerModule.pageSizes,h=r.length?this.convertValue(r):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],m=this.pagerModule.pageSize;this.dropDownListObject=new ve.NB({dataSource:h,value:m.toString(),change:this.onChange.bind(this),cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(n),r.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=m,e.dataBind(),e.trigger("dropDownChanged",{pageSize:m}),this.addEventListener()}onChange(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})}refresh(){this.pagerCons&&(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel(this.pagerModule.pageSize===this.pagerModule.totalRecordsCount?"pagerAllDropDown":"pagerDropDown"))}beforeValueChange(e){if("number"==typeof e.newProp.value){const t=e.newProp.value.toString();e.newProp.value=t}}convertValue(e){const t=e;for(let s=0;s<t.length;s++)t[s]=parseInt(t[s],10)?t[s].toString():""!==this.pagerModule.getLocalizedLabel(t[s])?this.pagerModule.getLocalizedLabel(t[s]):t[s];return t}setDropDownValue(e,t){this.dropDownListObject&&(this.dropDownListObject[e]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t)}addEventListener(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)}removeEventListener(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)}destroy(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),(0,u.Od)(this.pagerDropDownDiv))}}class H0{constructor(e){this.pagerModule=e}getModuleName(){return"externalMessage"}render(){this.element=(0,u.az)("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":"Pager external message"}}),this.pagerModule.element.appendChild(this.element),this.refresh()}refresh(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()}hideMessage(){(0,u.le)(this.element)||(this.element.style.display="none")}showMessage(){this.element.style.display=""}destroy(){(0,u.Od)(this.element)}}class Bf{constructor(e,t){this.isInitialRender=!0,this.isCancel=!1,Xl.Inject(H0,Vg),this.parent=e,this.pageSettings=t,this.addEventListener()}getModuleName(){return"pager"}render(){const e=this.parent;this.pagerDestroy(),(0,u.le)(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"});const t=fc({},(0,u.l7)({},eu(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:e.enableRtl,locale:e.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);this.pagerObj=new Xl(t),this.pagerObj.hasParent=!0,this.pagerObj.on(gf,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1}onSelect(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)}addAriaAttr(){if(!this.pageSettings.template){const e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),s=document.createDocumentFragment(),n=this.element.querySelector(".e-numericcontainer"),r=n.querySelectorAll("a");for(let m=0;m<r.length;m++){this.parent.getContentTable()?r[m].setAttribute("aria-owns",this.parent.getContentTable().id):r[m].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table");const T=this.parent.createElement("div");T.appendChild(r[m]),s.appendChild(T)}e.appendChild(s),t.replaceChild(e,n);const h=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"];for(let m=0;m<h.length;m++){const T=this.element.querySelector(h[m]);this.parent.getContentTable()&&T.setAttribute("aria-owns",this.parent.getContentTable().id)}}}dataReady(e){this.updateModel(e)}refresh(){this.pagerObj.refresh()}goToPage(e){this.pagerObj.goToPage(e)}setPageSize(e){this.pagerObj.setPageSize(e)}updateModel(e){this.parent.pageSettings.totalRecordsCount=e.count,this.parent.dataBind()}onActionComplete(e){this.parent.trigger(vn,(0,u.l7)(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:vn}))}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=e.properties;for(const s of Object.keys(t))this.pagerObj[s]=t[s];this.pagerObj.dataBind()}clickHandler(e){const t=this.parent;if(this.isForceCancel||Rh(t)&&!t.prevPageMoving&&!this.isCancel)return this.isForceCancel?this.isForceCancel=!1:((0,u.le)(e.newProp)||(0,u.le)(e.newProp.pageSize)?e.currentPage&&(t.notify(Ca,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage):(t.notify(Ca,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.pageSize=e.oldProp.pageSize,t.pageSettings.pageSize=e.newProp.pageSize),this.isForceCancel=!0,this.pagerObj.dataBind()),void(e.cancel=!0);t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;const s=this.pageSettings.currentPage;this.pageSettings.currentPage=e.currentPage;const n={cancel:!1,requestType:"paging",previousPage:s,currentPage:e.currentPage,type:lr};if(this.isCancel||this.parent.notify(Me,n),n.cancel)return e.cancel=!0,this.pagerObj.currentPage=s,void(this.isCancel=!0);this.isCancel=!1,this.parent.requestTypeAction="paging"}keyPressHandler(e){e.action in Bm&&(e.preventDefault(),this.element.querySelector(Bm[e.action]).click())}updateExternalMessage(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()}appendToElement(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))}addEventListener(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},!this.parent.isDestroyed&&((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(bd,this.handlers.created.bind(this)),this.evtHandlers=[{event:fa,handler:this.handlers.load},{event:it,handler:this.handlers.end},{event:Qe,handler:this.handlers.ready},{event:"paging-complete",handler:this.handlers.complete},{event:H,handler:this.handlers.updateLayout},{event:pe,handler:this.handlers.inboundChange},{event:Ko,handler:this.handlers.keyPress},{event:Tr,handler:this.destroy}],pl(this.parent,this.evtHandlers,!0,this))}created(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())}isReactTemplate(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&"string"!=typeof this.pagerObj.template}renderReactPagerTemplate(){if(!this.isInitialRender&&this.isReactTemplate()){let e;this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);const t=this.parent.pageSettings,s={currentPage:t.currentPage,pageSize:t.pageSize,pageCount:t.pageCount,totalRecordsCount:t.totalRecordsCount,totalPages:this.pagerObj.totalPages},n=this.parent.id+"_pagertemplate";this.parent.isReact?(this.pagerObj.templateFn(s,this.parent,"pagerTemplate",n,null,null,this.pagerObj.element),this.parent.renderTemplates()):(e=this.pagerObj.templateFn(s,this.parent,"pagerTemplate"),Dl(this.pagerObj.element,e))}}removeEventListener(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(bd,this.handlers.created),this.parent.off(gf,this.renderReactPagerTemplate),pl(this.parent,this.evtHandlers,!1))}destroy(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()}pagerDestroy(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),(0,u.Od)(this.element))}}const Bm={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"};class Vm extends Uo{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-filterbarcell"})}getGui(){return this.parent.createElement("div")}render(e,t){const s=this.parent.element.querySelector(".e-filterbar"),n=this.element.cloneNode(),r=this.getGui();let h;const m=e.column;if(s.appendChild(n),n.setAttribute("e-mappinguid",m.uid),m.filterTemplate){const T={};if(t&&(T[m.field]=t[m.field]),T.column=m,m.visible){const se=this.parent.element.id+m.uid+"filterTemplate";this.parent.isReact&&"string"!=typeof m.filterTemplate?(m.getFilterTemplate()(T,this.parent,"filterTemplate",se,null,null,n),this.parent.renderTemplates()):Dl(n,m.getFilterTemplate()(T,this.parent,"filterTemplate",se))}else n.classList.add("e-hide")}else if("checkbox"!==m.type){if(!(0,u.le)(m.allowFiltering)&&!m.allowFiltering||(0,u.le)(m.filterBarTemplate))(0,u.Y4)(r,{class:"e-filterdiv e-fltrinputdiv"}),h=this.parent.createElement("input",{id:m.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:m.headerText+e.attributes.title,value:t[e.column.field]?t[e.column.field]:"",role:"search"}}),r.appendChild(h),J.II.createInput({element:h,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0}},this.parent.createElement);else if(n.classList.add("e-fltrtemp"),(0,u.Y4)(r,{class:"e-fltrtempdiv"}),(0,u.le)(m.filterBarTemplate.create))h=this.parent.createElement("input",{id:m.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:m.headerText}}),r.appendChild(h);else{const T={column:m,node:Element};let V=m.filterBarTemplate.create;if("string"==typeof V&&(V=(0,u.NA)(V,window)),h=V(T),"string"==typeof h){const Y=this.parent.createElement("div");Y.innerHTML=h,h=Y.firstChild}(0,u.Y4)(r,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:m.headerText,id:m.field+"_filterBarcell"}),r.appendChild(h)}if((!1===m.allowFiltering||""===m.field||(0,u.le)(m.field))&&(h.setAttribute("disabled","true"),h.classList.add("e-disable")),m.visible||n.classList.add("e-hide"),this.appendHtml(n,r),this.parent.filterSettings.showFilterBarOperator&&"FilterBar"===this.parent.filterSettings.type&&!this.parent.isPrinting&&(0,u.le)(m.filterTemplate)&&(0,u.le)(m.filterBarTemplate)&&this.operatorIconRender(r,m,e),((0,u.le)(m.allowFiltering)||m.allowFiltering)&&!(0,u.le)(m.filterBarTemplate)){let T=m.filterBarTemplate.write;const V={element:h,column:m};"string"==typeof T&&(T=(0,u.NA)(T,window)),T.call(this,V)}}return n}appendHtml(e,t){return e.appendChild(t),e}operatorIconRender(e,t,s){const n=this.parent,r=this.parent.createElement("input",{className:" e-filterbaroperator e-icons e-icon-filter",id:s.column.uid});e.querySelector("span").appendChild(r);let h=t.filter&&t.filter.operator?t.filter.operator:"equal";(0,u.le)(n.filterModule.operators[t.field])||(h=n.filterModule.operators[t.field]),this.dropOptr=new ve.NB({fields:{text:"text",value:"value"},popupHeight:"auto",value:h,width:"0px",enabled:t.allowFiltering,popupWidth:"auto",enableRtl:this.parent.enableRtl,change:this.internalEvent.bind(this),beforeOpen:function(){this.dataSource=n.filterModule.customOperators[n.getColumnByUid(this.element.id).type+"Operator"];for(let V=0;V<this.dataSource.length;V++)t.filter&&t.filter.operator&&(0,u.le)(n.filterModule.operators[t.field])&&this.dataSource[V].value===t.filter.operator&&(this.value=t.filter.operator)}}),this.dropOptr.appendTo(r);const m=(0,u.oq)(this.dropOptr.element,"span");m.classList.add("e-filterbardropdown"),m.removeAttribute("tabindex")}internalEvent(e){const t=this.parent,s=t.getColumnByUid(e.element.getAttribute("id"));e.column=s,t.filterModule.operators[s.field]=e.value,t.notify("get-filterbar-operator",e)}}class z0{constructor(e,t,s,n){this.ddOpen=this.dropDownOpen.bind(this),this.parent=e,this.serviceLocator=s,this.filterSettings=n,this.customFilterOperators=t,this.parent&&(this.parent.on(Ea,this.destroyDropDownList,this),this.parent.on(Tr,this.destroyDropDownList,this))}renderOperatorUI(e,t,s,n,r){this.dialogObj=n;const h=s.type+"Operator";this.optrData=this.customOptr=(0,u.le)(r)?(0,u.le)(this.parent.filterSettings.operators)||(0,u.le)(this.parent.filterSettings.operators[h])?this.customFilterOperators[h]:this.parent.filterSettings.operators[h]:r;const m=this.customOptr,T=this.dropSelectedVal(s,h),V=this.parent.createElement("div",{className:"e-flm_optrdiv"});e.appendChild(V);const Y=this.parent.createElement("input",{id:s.uid+"-floptr"});V.appendChild(Y),this.dropOptr=new ve.NB({dataSource:m,fields:{text:"text",value:"value"},cssClass:"e-popup-flmenu",enableRtl:this.parent.enableRtl,text:T}),this.dropOptr.addEventListener(xa,this.ddOpen),this.dropOptr.appendTo("#"+s.uid+"-floptr")}renderResponsiveDropDownList(e){e.popup.element.style.width="100%"}dropDownOpen(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString(),this.parent.enableAdaptiveUI&&this.renderResponsiveDropDownList(e)}dropSelectedVal(e,t){let s="";const n=this.parent.filterSettings.columns;for(const r of n)if(e.field===r.field||e.isForeignColumn()&&e.foreignKeyValue===r.field){const h=new bt.hm(this.optrData).executeLocal((new bt.AE).where("value","equal",r.operator));s=(0,u.le)(h[0])?"":h[0].text}if(""===s)if(e.filter.operator){const r=Object.keys(this.optrData).length;for(let h=0;h<r;h++)this.optrData[h].value===e.filter.operator&&(s=this.optrData[h].text)}else s=this.optrData[0].text;return s}getFlOperator(){return this.dropOptr.value}destroyDropDownList(){this.dropOptr.isDestroyed||(this.dropOptr.removeEventListener(xa,this.ddOpen),this.dropOptr.destroy(),this.parent.off(Ea,this.destroyDropDownList),this.parent.off(Tr,this.destroyDropDownList))}}class _m{constructor(e,t,s){this.parent=e,this.serLocator=t,this.filterSettings=s,this.parent&&(this.parent.on(Ea,this.destroy,this),this.parent.on(Tr,this.destroy,this))}create(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+e.column.uid}),e.target.appendChild(this.instance),this.dialogObj=e.dialogObj,this.actObj=this.getAutoCompleteOptions(e),this.actObj.appendTo(this.instance)}getAutoCompleteOptions(e){const t=e.column.isForeignColumn();let s;t&&(s=new bt.AE,s.params=this.parent.query.params);const n=t?e.column.dataSource:this.parent.dataSource,r={value:t?e.column.foreignKeyValue:e.column.field},h=new ve.Qc((0,u.l7)({dataSource:n instanceof bt.hm?n:new bt.hm(n),fields:r,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:t?s:this.parent.query.clone(),sortOrder:"Ascending",cssClass:"e-popup-flmenu",autofill:!0,placeholder:e.localizeText.getConstant("EnterValue")},e.column.filter.params));if(this.acFocus=this.focus(h,e),this.acComplete=this.actionComplete(h),this.acOpen=this.openPopup.bind(this),h.addEventListener(Ga,this.acFocus),h.addEventListener(xa,this.acOpen),h.addEventListener(vn,this.acComplete),n&&"result"in n){const T=Td({requestType:"stringfilterrequest"},this.parent.getQuery?this.parent.getQuery().clone():new bt.AE);this.parent.trigger(Nh,T.state),T.deffered.promise.then(Y=>{h.dataSource=new bt.hm(Y)})}return h}write(e){""===e.filteredValue||(0,u.le)(e.filteredValue)||(document.querySelector("#strui-"+e.column.uid).ej2_instances[0].value=e.filteredValue)}read(e,t,s,n){const r=document.querySelector("#strui-"+t.uid).ej2_instances[0];u.AR.isDevice&&(r.hidePopup(),r.focusOut());let h=r.value;((0,u.le)(h)||""===h)&&(h=null),n.filterByColumn(t.field,s,h,"and",this.parent.filterSettings.enableCaseSensitivity)}openPopup(e){y(e,this.dialogObj)}focus(e,t){return()=>{e.filterType=t.getOptrInstance.getFlOperator()}}actionComplete(e){return t=>{t.result=t.result.filter((s,n,r)=>r.map(h=>(0,u.NA)(e.fields.value,h)).indexOf((0,u.NA)(e.fields.value,s))===n)}}destroy(){!this.actObj||this.actObj.isDestroyed||(this.actObj.removeEventListener(Ga,this.acFocus),this.actObj.removeEventListener(xa,this.acOpen),this.actObj.removeEventListener(vn,this.acComplete),this.actObj.destroy(),this.parent.off(Ea,this.destroy),this.parent.off(Tr,this.destroy))}}class Hm{constructor(e,t,s){this.filterSettings=s,this.parent=e,this.serviceLocator=t,this.parent&&(this.parent.on(Ea,this.destroy,this),this.parent.on(Tr,this.destroy,this))}keyEventHandler(e){if(13===e.keyCode||9===e.keyCode){const t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}}create(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+e.column.uid}),e.target.appendChild(this.instance),this.numericTxtObj=new J.No((0,u.l7)({format:"string"==typeof e.column.format||(0,u.o8)(e.column.format)?e.column.format:e.column.format.format,locale:this.parent.locale,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},e.column.filter.params)),this.numericTxtObj.appendTo(this.instance)}write(e){const t=document.querySelector("#numberui-"+e.column.uid).ej2_instances[0];t.element.addEventListener("keydown",this.keyEventHandler),t.value=e.filteredValue}read(e,t,s,n){const h=document.querySelector("#numberui-"+t.uid).ej2_instances[0].value;n.filterByColumn(t.field,s,h,"and",!0)}destroy(){!this.numericTxtObj||this.numericTxtObj.isDestroyed||(this.numericTxtObj.destroy(),this.parent.off(Ea,this.destroy),this.parent.off(Tr,this.destroy))}}class j0{constructor(e,t,s){this.parent=e,this.serviceLocator=t,this.filterSettings=s,this.parent&&(this.parent.on(Ea,this.destroy,this),this.parent.on(Tr,this.destroy,this))}create(e){const t=e.column.isForeignColumn(),s=t?e.column.dataSource:this.parent.dataSource,n=t?e.column.foreignKeyValue:e.column.field;this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+e.column.uid}),e.target.appendChild(this.elem),this.dialogObj=e.dialogObj,this.dropInstance=new ve.NB((0,u.l7)({dataSource:s instanceof bt.hm?s:new bt.hm(s),query:(new bt.AE).select(n),fields:{text:n,value:n},placeholder:e.localizeText.getConstant("SelectValue"),cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params)),this.ddOpen=this.openPopup.bind(this),this.ddComplete=this.actionComplete(n),this.dropInstance.addEventListener(xa,this.ddOpen),this.dropInstance.addEventListener(vn,this.ddComplete),this.dropInstance.appendTo(this.elem)}write(e){const t=document.querySelector("#bool-ui-"+e.column.uid).ej2_instances[0];(0,u.le)(e.filteredValue)||(t.text=e.filteredValue)}read(e,t,s,n){const h=document.querySelector("#bool-ui-"+t.uid).ej2_instances[0].value;n.filterByColumn(t.field,s,h,"and",!1)}openPopup(e){y(e,this.dialogObj)}actionComplete(e){return t=>{t.result=bt.j4.distinct(t.result,e,!0)}}destroy(){!this.dropInstance||this.dropInstance.isDestroyed||(this.dropInstance.removeEventListener(xa,this.ddOpen),this.dropInstance.removeEventListener(vn,this.ddComplete),this.dropInstance.destroy(),this.parent.off(Ea,this.destroy),this.parent.off(Tr,this.destroy))}}class Qa{constructor(e,t,s){this.dpOpen=this.openPopup.bind(this),this.parent=e,this.locator=t,this.fltrSettings=s,this.parent&&(this.parent.on(Ea,this.destroy,this),this.parent.on(Tr,this.destroy,this))}create(e){const t=Ni(e.column.format,e.column.type);this.dialogObj=e.dialogObj,this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+e.column.uid}),e.target.appendChild(this.inputElem),"date"===e.column.type?this.datePickerObj=new Ne.Mt((0,u.l7)({format:t,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params)):"datetime"===e.column.type&&(this.datePickerObj=new Ne.xZ((0,u.l7)({format:t,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params))),this.datePickerObj.addEventListener(xa,this.dpOpen),this.datePickerObj.appendTo(this.inputElem)}write(e){document.querySelector("#dateui-"+e.column.uid).ej2_instances[0].value=(0,u.le)(e.filteredValue)?null:new Date(e.filteredValue)}read(e,t,s,n){let h=document.querySelector("#dateui-"+t.uid).ej2_instances[0].value;h=(0,u.le)(h)?null:h,n.filterByColumn(t.field,s,h,"and",!0)}openPopup(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()}destroy(){this.parent.off(Ea,this.destroy),this.parent.off(Tr,this.destroy),!(0,u.le)(this.datePickerObj)&&!this.datePickerObj.isDestroyed&&(this.datePickerObj.removeEventListener(xa,this.dpOpen),this.datePickerObj.destroy())}}class zm{constructor(e,t,s,n,r){this.isDialogOpen=!1,this.maxHeight="350px",this.isMenuCheck=!1,this.colTypes={string:_m,number:Hm,date:Qa,boolean:j0,datetime:Qa},this.parent=e,this.filterSettings=t,this.serviceLocator=s,this.customFilterOperators=n,this.filterObj=r,this.flMuiObj=new z0(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization"),this.menuFilterBase=new Gl(e)}clearCustomFilter(e){this.clearBtnClick(e)}applyCustomFilter(e){this.filterBtnClick(e.col)}openDialog(e){this.options=e,this.col=this.parent.getColumnByField(e.field),((0,u.le)(this.col.filter)||(0,u.le)(this.col.filter.type)||"Menu"===this.col.filter.type)&&this.renderDlgContent(e.target,this.col)}closeDialog(e){if(!this.dlgObj)return;(this.parent.isReact||this.parent.isVue)&&Pp(this.parent,["filterTemplate"]);const t=document.getElementById(this.dlgObj.element.id);if(this.dlgObj&&!this.dlgObj.isDestroyed&&t){const s={cancel:!1,column:this.col,target:e,element:t};if(this.parent.notify(Ea,s),s.cancel)return;this.isDialogOpen=!1,this.isMenuCheck&&(this.menuFilterBase.unWireEvents(),this.parent.off(kc,this.actionComplete),this.isMenuCheck=!1),this.dlgObj.destroy(),(0,u.Od)(t)}this.parent.notify(bh,{})}renderDlgContent(e,t){const s={requestType:Sc,columnName:t.field,columnType:t.type};s.filterModel=this,this.parent.trigger(lr,s);const r=this.parent.createElement("div",{className:"e-flmenu-maindiv",id:t.uid+"-flmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:t.uid+"-flmdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA")),this.parent.enableAdaptiveUI?document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlgDiv):this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new Rt.Vq({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,e,t),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:"e-flmenu-cancelbtn"}}],content:r,width:!(0,u.le)(Zi(e,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:"e-filter-popup"}),this.dlgObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dlgObj.appendTo(this.dlgDiv)}renderResponsiveDialog(){this.parent.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.buttons=[{}])}dialogCreated(e,t){!u.AR.isDevice&&e&&d(e,this.dlgObj),this.renderFilterUI(e,t),t.showColumnMenu&&this.parent.notify(xc,{}),this.parent.enableAdaptiveUI?(this.dlgObj.element.style.left="0px",this.dlgObj.element.style.maxHeight="none"):this.dlgObj.element.style.maxHeight=this.maxHeight,this.dlgObj.show(),t.filterTemplate||this.writeMethod(t,this.dlgObj.element.querySelector("#"+t.uid+"-flmenu"));const s={requestType:ba,columnName:t.field,columnType:t.type};s.filterModel=this,this.isDialogOpen=!0,this.isMenuCheck||this.parent.trigger(vn,s)}renderFilterUI(e,t){const s=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:t}),this.renderOperatorUI(s,e,t),this.renderFlValueUI(s,e,t)}renderOperatorUI(e,t,s){this.flMuiObj.renderOperatorUI(e,t,s,this.dlgObj,this.filterObj.menuOperator)}renderFlValueUI(e,t,s){const n=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),r=this.filterObj;e.appendChild(n);const h=new this.colTypes[s.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(s.filterTemplate){const m={};m[s.field]=m.value=r.values[s.field],s.foreignKeyValue&&(m[s.foreignKeyValue]=r.values[s.field],m[s.field]=void 0),m.column=s;const se=this.parent.element.id+s.uid+"filterTemplate";this.parent.isReact&&"string"!=typeof s.filterTemplate?(s.getFilterTemplate()(m,this.parent,"filterTemplate",se,null,null,n),this.parent.renderTemplates()):Dl(n,s.getFilterTemplate()(m,this.parent,"filterTemplate",se)),this.isMenuCheck&&(this.menuFilterBase.cBox=this.dlgObj.element.querySelector(".e-checkboxlist.e-fields"),this.menuFilterBase.wireEvents(),this.parent.on(kc,this.actionComplete,this),this.menuFilterBase.getAllData())}else if((0,u.le)(s.filter)||(0,u.le)(s.filter.ui)||(0,u.le)(s.filter.ui.create))h.create({column:s,target:n,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj});else{let m=s.filter.ui.create;"string"==typeof m&&(m=(0,u.NA)(m,window)),m({column:s,target:n,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})}}writeMethod(e,t){let s;const n=t.querySelector(".e-flmenu-valinput"),r=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings),h=this.filterSettings.columns;for(const m of h)e.uid===m.uid&&(s=m.value);if((0,u.le)(e.filter)||(0,u.le)(e.filter.ui)||(0,u.le)(e.filter.ui.write))r.write({column:e,target:n,parent:this.parent,filteredValue:s});else{let m=e.filter.ui.write;"string"==typeof m&&(m=(0,u.NA)(m,window)),m({column:e,target:n,parent:this.parent,filteredValue:s})}}filterBtnClick(e){let t;const s=this.dlgObj.element.querySelector(".e-flmenu-valuediv input"),n=this.flMuiObj.getFlOperator(),r=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(e.filterTemplate){const h=this.dlgDiv.querySelector(".e-flmenu-valuediv");let m;if(h.children[0].value)m=h.children[0].value;else if((0,u.le)(h.children[0].ej2_instances)){const T=h.querySelector(".e-control");m="boolean"===e.type?T.checked:(0,u.le)(T.ej2_instances)?T.value:T.ej2_instances[0].value}else m=(this.parent.isAngular?h.children[0]:h.querySelector("input")).ej2_instances[0].value;this.filterObj.filterByColumn(e.field,n,m)}else if((0,u.le)(e.filter)||(0,u.le)(e.filter.ui)||(0,u.le)(e.filter.ui.read))r.read(s,e,n,this.filterObj);else{let h=e.filter.ui.read;"string"==typeof h&&(h=(0,u.NA)(h,window)),t=h({element:s,column:e,operator:n,fltrObj:this.filterObj})}this.closeDialog(),this.parent.showColumnMenu&&this.parent.notify(lc,{})}closeResponsiveDialog(){this.closeDialog()}clearBtnClick(e){this.filterObj.removeFilteredColsByField(e.field),this.closeDialog();const t=this.parent.showColumnMenu&&e.showColumnMenu?".e-columnmenu":".e-icon-filter",n=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(t);n&&n.classList.remove("e-filtered")}destroy(){this.closeDialog()}getFilterUIInfo(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}}renderCheckBoxMenu(){return this.isMenuCheck=!0,this.menuFilterBase.updateModel(this.options),this.menuFilterBase.getAndSetChkElem(this.options),this.dlgObj.buttons=[{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{content:this.menuFilterBase.getLocalizedLabel("FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{cssClass:"e-flat",content:this.menuFilterBase.getLocalizedLabel("ClearButton")}}],this.menuFilterBase.dialogObj=this.dlgObj,this.menuFilterBase.dlg=this.dlgObj.element,this.menuFilterBase.dlg.classList.add("e-menucheckbox"),this.menuFilterBase.dlg.classList.remove("e-checkboxfilter"),this.maxHeight="800px",this.menuFilterBase.sBox.innerHTML}actionComplete(e){this.isMenuCheck&&this.parent.trigger(vn,e)}}class jm{constructor(e,t,s){this.parent=e,this.isresetFocus=!0,this.checkBoxBase=new Gl(e),this.addEventListener()}destroy(){this.removeEventListener(),this.checkBoxBase.closeDialog()}openDialog(e){this.checkBoxBase.openDialog(e),this.parent.log("column_type_missing",{column:e.column})}closeDialog(){this.destroy(),this.isresetFocus&&this.parent.notify(Hh,{})}closeResponsiveDialog(){this.checkBoxBase.closeDialog()}getModuleName(){return"checkboxFilter"}actionBegin(e){this.parent.trigger(lr,e)}actionComplete(e){this.parent.trigger(vn,e)}actionPrevent(e){Rh(this.parent)&&(this.parent.notify(Ca,e),e.cancel=!0)}clearCustomFilter(e){this.checkBoxBase.clearFilter(e)}applyCustomFilter(){this.checkBoxBase.fltrBtnHandler(),this.checkBoxBase.closeDialog()}addEventListener(){this.parent.isDestroyed||(this.parent.on(Mc,this.actionBegin,this),this.parent.on(kc,this.actionComplete,this),this.parent.on(tc,this.actionPrevent,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Mc,this.actionBegin),this.parent.off(kc,this.actionComplete),this.parent.off(tc,this.actionPrevent))}}class vv extends jm{constructor(e,t,s,n){super(e,t,s),this.parent=e,this.isresetFocus=!0,this.excelFilterBase=new Nf(e,n)}destroy(){this.excelFilterBase.closeDialog()}openDialog(e){this.excelFilterBase.openDialog(e)}closeDialog(){this.excelFilterBase.closeDialog(),this.isresetFocus&&this.parent.notify(Hh,{})}clearCustomFilter(e){this.excelFilterBase.clearFilter(e)}closeResponsiveDialog(e){e?this.excelFilterBase.removeDialog():this.closeDialog()}applyCustomFilter(e){e.isCustomFilter?this.excelFilterBase.filterBtnClick(e.col.field):(this.excelFilterBase.fltrBtnHandler(),this.excelFilterBase.closeDialog())}filterByColumn(e,t,s,n,r,h,m,T){this.excelFilterBase.filterByColumn(e,t,s,n,r,h,m,T)}getFilterUIInfo(){return this.excelFilterBase.getFilterUIInfo()}getModuleName(){return"excelFilter"}}const _a_header="th.e-headercell";class Np{constructor(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,!this.parent.isDestroyed&&(this.widthService=new qc(e),this.addEventListener())}autoFitColumns(e){const t=null==e||e.length<=0?this.parent.getColumns().map(s=>s.field):"string"==typeof e?[e]:e;this.parent.isAutoFitColumns=!0,this.findColumn(t)}autoFit(){const e=this.parent.getColumns().filter(t=>!0===t.autoFit).map(t=>t.field||t.headerText);e.length>0&&this.autoFitColumns(e),"Auto"===this.parent.resizeSettings.mode&&this.widthService.setWidthToTable()}resizeColumn(e,t,s){const n=this.parent;let h,m,T,r=0,ge=0;const ke=s||this.parent.getUidByColumnField(e),qe=this.parent.getNormalizedColumnIndex(ke);let mt,Vt,Qt;const ai=this.parent.getColumnIndexByField(e),ki=n.getFrozenColumns()||n.getFrozenLeftColumnsCount(),Qi=n.getMovableColumnsCount();if((0,u.le)(n.getFooterContent())||(T=n.getFooterContentTable()),n.isFrozenGrid()){const Cl=n.getColumnByField(e);Cl.getFreezeTableName()===Qo?(h=n.getHeaderTable(),m=n.getContentTable(),mt=h.querySelector('[e-mappinguid="'+ke+'"]').parentElement.cloneNode(!0),Vt=m.querySelectorAll(`td:nth-child(${qe+1})`),T&&(Qt=T.querySelectorAll(`td:nth-child(${qe+1})`))):"movable"===Cl.getFreezeTableName()?(h=n.getHeaderContent().querySelector("."+io).children[0],m=n.getContent().querySelector("."+Or).children[0],mt=h.querySelector('[e-mappinguid="'+ke+'"]').parentElement.cloneNode(!0),Vt=m.querySelectorAll(`td:nth-child(${qe-ki+1})`),T&&(T=n.getFooterContent().querySelector(".e-movablefootercontent").children[0],Qt=T.querySelectorAll(`td:nth-child(${qe-ki+1})`))):Cl.getFreezeTableName()===vo&&(h=n.getHeaderContent().querySelector(".e-frozen-right-header").children[0],m=n.getContent().querySelector(".e-frozen-right-content").children[0],mt=h.querySelector('[e-mappinguid="'+ke+'"]').parentElement.cloneNode(!0),Vt=m.querySelectorAll(`td:nth-child(${qe-(ki+Qi)+1})`),T&&(T=n.getFooterContent().querySelector(".e-movablefootercontent").children[0],Qt=T.querySelectorAll(`td:nth-child(${qe-(ki+Qi)+1})`)))}else h=n.getHeaderTable(),m=n.getContentTable(),mt=h.querySelector('[e-mappinguid="'+ke+'"]').parentElement.cloneNode(!0),Vt=m.querySelectorAll(`td:nth-child(${qe+1}):not(.e-groupcaption)`),T&&(Qt=T.querySelectorAll(`td:nth-child(${qe+1}):not(.e-groupcaption)`));const fs=[].slice.call(h.querySelector("tr").getElementsByClassName("e-grouptopleftcell"));if(fs.length>0)for(let Cl=0;Cl<fs.length;Cl++)ge+=fs[Cl].offsetWidth;const ps=m.querySelector(".e-detailrowcollapse")||m.querySelector(".e-detailrowexpand");(this.parent.detailTemplate||this.parent.childGrid)&&ps&&(ge+=ps.offsetWidth);const Nn=[mt],fr=[],rr=[];if(T)for(let Cl=0;Cl<Qt.length;Cl++)rr[Cl]=Qt[Cl].cloneNode(!0);for(let Cl=0;Cl<Vt.length;Cl++)fr[Cl]=Vt[Cl].cloneNode(!0);const xr=this.createTable(h,Nn,"e-gridheader");let nn=null,Xo=null;n.getCurrentViewRecords().length&&(Xo=this.createTable(m,fr,"e-gridcontent")),rr.length&&(nn=this.createTable(T,rr,"e-gridfooter"));const zo=n.getColumns()[ai],fl=zo.width=(0,u.Ac)(Math.max(xr,Xo,nn)),bl=zo.maxWidth&&parseFloat(zo.maxWidth.toString());if(parseInt(fl,10)>bl&&(zo.width=bl),this.widthService.setColumnWidth(n.getColumns()[ai]),!1===n.getColumns().some(Cl=>null==Cl.width||Cl.width.length<=0)){const Cl=n.getColumns();for(let kd=0;kd<Cl.length;kd++)Cl[kd].visible&&(r+=parseFloat(Cl[kd].width))}let ya=r+ge;r>0&&!n.isFrozenGrid()&&((this.parent.detailTemplate||this.parent.childGrid)&&this.widthService.setColumnWidth(new gn({width:"30px"})),"Auto"===this.parent.resizeSettings.mode&&(ya="100%"),h.style.width=(0,u.Ac)(ya),m.style.width=(0,u.Ac)(ya),(0,u.le)(T)||(T.style.width=(0,u.Ac)(ya))),n.isFrozenGrid()&&this.widthService.refreshFrozenScrollbar();const Md=h.offsetWidth;n.getContent().scrollWidth>Md?(h.classList.add("e-tableborder"),m.classList.add("e-tableborder")):(h.classList.remove("e-tableborder"),m.classList.remove("e-tableborder")),(0,u.le)(T)||T.classList.add("e-tableborder")}destroy(){const e=this.parent.element;!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll)||(this.widthService=null,this.unwireEvents(),this.removeEventListener())}getModuleName(){return"resize"}findColumn(e){for(let t=0;t<e.length;t++){const s=e[t],n=this.parent.getColumnIndexByField(s),r=this.parent.getColumns()[n];n>-1&&!(0,u.le)(r)&&!0===r.visible&&this.resizeColumn(s,n)}}createTable(e,t,s){const n=this.parent.createElement("div");n.className=this.parent.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";const r=this.parent.createElement("div");r.className=s;const h=this.parent.createElement("table");h.className=e.className,h.classList.add("e-resizetable"),h.style.cssText="table-layout: auto;width: auto";const m=this.parent.createElement("tr");for(let V=0;V<t.length;V++){const Y=m.cloneNode();Y.className=e.querySelector("tr").className,Y.appendChild(t[V]),h.appendChild(Y)}r.appendChild(h),n.appendChild(r),document.body.appendChild(n);const T=h.getBoundingClientRect().width;return document.body.removeChild(n),Math.ceil(T)}addEventListener(){this.parent.isDestroyed||(this.parent.on(ei,this.refreshHeight,this),this.parent.on(it,this.wireEvents,this),this.parent.on(F,this.autoFit,this),this.parent.on(rc,this.refreshHeight,this),this.parent.on(Tr,this.destroy,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(ei,this.refreshHeight),this.parent.off(it,this.wireEvents),this.parent.off(rc,this.refreshHeight),this.parent.off(Tr,this.destroy))}render(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()}refreshHeight(){if(this.parent.getHeaderTable()){const e=this.getResizeHandlers();for(let t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()}}wireEvents(){u.bi.add(this.parent.getHeaderContent(),u.AR.touchStartEvent,this.touchResizeStart,this),u.bi.add(this.parent.getHeaderContent(),rd,this.callAutoFit,this)}unwireEvents(){u.bi.remove(this.parent.getHeaderContent(),u.AR.touchStartEvent,this.touchResizeStart),u.bi.remove(this.parent.getHeaderContent(),rd,this.callAutoFit)}getResizeHandlers(){return this.parent.isFrozenGrid()?[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler")):[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-rhandler"))}setHandlerHeight(){const e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-rsuppress"));for(let t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"}callAutoFit(e){if(e.target.classList.contains("e-rhandler")){const t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),(0,u.oq)(e.target,_a_header).classList.add("e-resized")}}touchResizeStart(e){if(!lo.timer)return lo.timer=setTimeout(()=>{lo.timer=null},300),this.resizeStart(e);clearTimeout(lo.timer),lo.timer=null,this.callAutoFit(e)}resizeStart(e){if(e.target.classList.contains("e-rhandler")){if(!this.helper){if(0===this.getScrollBarWidth()){if(this.parent.allowGrouping)for(let t=0;t<this.parent.groupSettings.columns.length;t++)this.widthService.setColumnWidth(new gn({width:"30px"}),t);for(const t of this.refreshColumnWidth())this.widthService.setColumnWidth(t);this.widthService.setWidthToTable()}if(this.refreshStackedColumnWidth(),this.element=e.target,this.parent.getVisibleFrozenColumns()){const t=this.parent.getMovableContentTbody(),s=this.parent.getFrozenLeftContentTbody(),n=this.parent.getFrozenRightContentTbody(),r=[].slice.call(t.querySelectorAll("tr")),h=[].slice.call(s.querySelectorAll("tr"));let m=[];this.parent.getFrozenMode()===fn&&n&&(m=[].slice.call(n.querySelectorAll("tr")));for(let T=0;T<r.length;T++)tu(this.parent,(V,Y)=>{this.parent.rowHeight?Y[T].style.height=this.parent.rowHeight+"px":Y[T].style.removeProperty("height")},[h,r,m])}this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.minMove=this.column.getFreezeTableName()===vo?this.parent.enableRtl?(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat((0,u.le)(this.column.width)?"":this.column.width.toString()):parseFloat((0,u.le)(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.enableRtl?parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat((0,u.le)(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}u.AR.isDevice&&!this.helper.classList.contains("e-ricon")?(this.helper.classList.add("e-ricon"),u.bi.add(document,u.AR.touchStartEvent,this.removeHelper,this),u.bi.add(this.helper,u.AR.touchStartEvent,this.resizeStart,this)):this.parent.trigger("resizeStart",{e,column:this.column},s=>{s.cancel||this.parent.isEdit?this.cancelResizeAction():(u.bi.add(document,u.AR.touchEndEvent,this.resizeEnd,this),u.bi.add(this.parent.element,u.AR.touchMoveEvent,this.resizing,this),this.updateCursor("add"))})}}cancelResizeAction(e){e&&(u.bi.remove(this.parent.element,u.AR.touchMoveEvent,this.resizing),u.bi.remove(document,u.AR.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),u.AR.isDevice&&(u.bi.remove(document,u.AR.touchStartEvent,this.removeHelper),u.bi.remove(this.helper,u.AR.touchStartEvent,this.resizeStart)),(0,u.og)(this.helper),this.refresh()}getWidth(e,t,s){return t&&e<t?t:s&&e>s?s:e}updateResizeEleHeight(){const e=[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler"));for(let t=0;t<e.length;t++)e[t].style.height=this.element.parentElement.offsetHeight+"px"}getColData(e,t){return{width:parseFloat((0,u.le)(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}}resizing(e){if((0,u.le)(this.column))return;let t=0;(0,u.le)(this.column)&&(t=Zi(this.element,"th").offsetWidth),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());let s=this.getPointX(e),n=this.parent.enableRtl?-(s-this.pageX):s-this.pageX;this.column.getFreezeTableName()===vo&&(n=this.parent.enableRtl?s-this.pageX:this.pageX-s);const r=this.getColData(this.column,n);r.width||(r.width=(0,u.oq)(this.element,"th").offsetWidth);let h=this.getWidth(r.width,r.minWidth,r.maxWidth);if(this.parent.log("resize_min_max",{column:this.column,width:h}),this.column.getFreezeTableName()===vo&&(this.parent.enableRtl&&this.minMove>=s||!this.parent.enableRtl&&this.minMove<=s)&&(h=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=s=this.minMove),(this.column.getFreezeTableName()!==vo&&(!this.parent.enableRtl&&this.minMove>=s||this.parent.enableRtl&&this.minMove<=s)||this.column.getFreezeTableName()===vo&&(this.parent.enableRtl&&this.minMove>=s||!this.parent.enableRtl&&this.minMove<=s))&&(h=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=s=this.minMove),h!==parseFloat((0,u.le)(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=s,this.column.width=(0,u.Ac)(h);const m={e,column:this.column};if(this.parent.trigger("resizing",m),m.cancel)return void this.cancelResizeAction(!0);let T=[this.column],V=[this.column];this.column.columns&&(T=this.getSubColumns(this.column,[]),T=this.calulateColumnsWidth(T,!1,n),V=this.calulateColumnsWidth(T,!0,n));for(const Y of V)this.widthService.setColumnWidth(Y,null,"resize");this.updateHelper()}this.isDblClk=!1}calulateColumnsWidth(e,t,s){const n=[];for(const r of e){let h=0;for(let V=0;V<e.length;V++)h+=parseFloat(e[V].width.toString());const m=this.getColData(r,parseFloat(r.width)*s/h),T=this.getWidth(m.width,m.minWidth,m.maxWidth);T!==parseFloat(r.width.toString())&&(t&&(r.width=(0,u.Ac)(T<1?1:T)),n.push(r))}return n}getSubColumns(e,t){for(const s of e.columns)!1!==s.visible&&s.allowResizing&&(s.columns?this.getSubColumns(s,t):t.push(s));return t}resizeEnd(e){if(!this.helper||this.parent.isDestroyed)return;u.bi.remove(this.parent.element,u.AR.touchMoveEvent,this.resizing),u.bi.remove(document,u.AR.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),(0,u.og)(this.helper);const t={e,column:this.column},s=this.parent.getContent().querySelector("."+Jo),n=s.querySelector("."+Or)?s.querySelector("."+Or):s;n.scrollHeight>n.clientHeight&&(this.parent.scrollModule.setPadding(),n.style.overflowY="scroll"),this.parent.trigger(cl,t),(0,u.oq)(this.element,".e-headercell").classList.add("e-resized"),this.isFrozenColResized=!!Zi(this.element,"e-frozenheader"),this.parent.isFrozenGrid()&&this.parent.notify(wa,{case:"textwrap"}),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.parent.notify(Vd,{case:"textwrap"})),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}getPointX(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX}refreshColumnWidth(){const e=this.parent.getColumns();for(const t of[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell")))for(const s of e)if(t.querySelector("[e-mappinguid]")&&t.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===s.uid&&s.visible){s.width=t.getBoundingClientRect().width;break}return e}refreshStackedColumnWidth(){for(const e of this.parent.getStackedColumns(this.parent.columns))e.width=this.getStackedWidth(e,0)}getStackedWidth(e,t){for(const s of e.columns)!1!==s.visible&&(s.columns?this.getStackedWidth(s,t):t+=s.width);return t}getTargetColumn(e){let t=(0,u.oq)(e.target,_a_header);t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv");const s=t.getAttribute("e-mappinguid");return this.parent.getColumnByUid(s)}updateCursor(e){const t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(const s of t)s.classList[e]("e-rcursor")}refresh(){this.column=null,this.pageX=null,this.element=null,this.helper=null}appendHelper(){this.helper=this.parent.createElement("div",{className:"e-rhelper"}),this.parent.element.appendChild(this.helper),this.setHelperHeight()}setHelperHeight(){const e=this.parent.isFrozenGrid();let t=e?this.parent.getContent().querySelector("."+Jo).offsetHeight:this.parent.getContent().offsetHeight-this.getScrollBarWidth();const s=(0,u.oq)(this.element,_a_header);let n=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr"));const r=this.parent.getFrozenRightColumnsCount();e&&(n=Zi(s,io)?[].slice.call(this.parent.getHeaderContent().querySelector("."+io).querySelectorAll("tr")):r&&Zi(s,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr")));for(let m=n.indexOf(s.parentElement);m<n.length&&m>-1;m++)t+=n[m].offsetHeight;const h=this.calcPos(s);Zi(s,"e-frozen-right-header")?h.left+=this.parent.enableRtl?s.offsetWidth-2:-1:h.left+=this.parent.enableRtl?-1:s.offsetWidth-2,this.helper.style.cssText="height: "+t+"px; top: "+h.top+"px; left:"+Math.floor(h.left)+"px;",this.parent.enableVirtualization&&this.helper.classList.add("e-virtual-rhandler")}getScrollBarWidth(e){const t=this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?gc():0}removeHelper(e){const t=e.target.classList;!t.contains("e-rhandler")&&!t.contains("e-ricon")&&this.helper&&(u.bi.remove(document,u.AR.touchStartEvent,this.removeHelper),u.bi.remove(this.helper,u.AR.touchStartEvent,this.resizeStart),(0,u.og)(this.helper),this.refresh())}updateHelper(){const e=(0,u.oq)(this.element,_a_header);let t;if(t=Zi(e,"e-frozen-right-header")?Math.floor(this.calcPos(e).left+(this.parent.enableRtl?e.offsetWidth-2:-1)):Math.floor(this.calcPos(e).left+(this.parent.enableRtl?-1:e.offsetWidth-2)),t>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.isFrozenGrid()){const r=(0,u.oq)(e,"."+yo).offsetLeft;t<r&&(t=r)}this.helper.style.left=t+"px"}calcPos(e){let t={top:0,left:0};const s=e.getBoundingClientRect(),n=e.ownerDocument;let r=Zi(e,"e-grid")||n.documentElement;for(;r&&(r===n.body||r===n.documentElement)&&"static"===r.style.position;)r=r.parentNode;return r&&r!==e&&1===r.nodeType&&(t=r.getBoundingClientRect()),{top:s.top-t.top,left:s.left-t.left}}doubleTapEvent(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(()=>{this.tapped=null},300))}getUserAgent(){const e=u.AR.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)}timeoutHandler(){this.tapped=null}}class xd{constructor(e,t,s,n){this.sortRequired=!0,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=(0,u.az)("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=r=>{const h=this.parent,m=r.sender.target,T=m.classList.contains("e-groupheadercell")?m:Zi(m,"e-groupheadercell");return!(!T||!m.classList.contains("e-drag")&&this.groupSettings.allowReordering)&&(this.column=h.getColumnByField(T.firstElementChild.getAttribute("ej-mappingname")),this.visualElement.textContent=T.textContent,this.visualElement.style.width=T.offsetWidth+2+"px",this.visualElement.style.height=T.offsetHeight+2+"px",this.visualElement.setAttribute("e-mappinguid",this.column.uid),h.element.appendChild(this.visualElement),this.visualElement)},this.dragStart=r=>{this.parent.element.classList.add("e-ungroupdrag")},this.drag=r=>{this.groupSettings.allowReordering&&this.animateDropper(r);const h=r.target,m=this.parent.element.querySelector(".e-cloneproperties");this.parent.trigger(nl,{target:h,draggableType:"headercell",column:this.column}),this.groupSettings.allowReordering||((0,u.s1)(m,["e-defaultcur"],["e-notallowedcur"]),Zi(h,ll)||Zi(h,"e-headercell")||(0,u.s1)(m,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=r=>{this.parent.element.classList.remove("e-ungroupdrag");const h=!(Zi(r.target,ll)||Zi(r.target,"e-gridheader"));if(this.groupSettings.allowReordering&&h){if((0,u.Od)(r.helper),Zi(r.target,"e-groupdroparea"))this.rearrangeGroup();else if(!Zi(r.target,"e-grid")){const m=this.parent.getColumnByUid(r.helper.getAttribute("e-mappinguid")).field;-1!==this.groupSettings.columns.indexOf(m)&&this.ungroupColumn(m)}}else h&&(0,u.Od)(r.helper)},this.animateDropper=r=>{const h=this.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),m=this.parent.getColumnByUid(h).field,T=Zi(r.target,"e-groupdroparea"),V=Zi(r.target,"e-group-animator"),Y=[].slice.call(this.element.getElementsByClassName("e-groupheadercell")).map(ge=>ge.querySelector("div").getAttribute("ej-mappingname")),se=JSON.parse(JSON.stringify(Y));if(V||T){if(V){const ge=V.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),ke=+V.getAttribute("index");if(ge!==m){const qe=se.indexOf(m);-1!==qe&&se.splice(qe,1),se.splice(ke+(-1!==ke&&qe===ke?1:0),0,m)}}else T&&-1===se.indexOf(m)&&se.push(m);this.element.innerHTML="",se.length&&!this.element.classList.contains("e-grouped")&&this.element.classList.add("e-grouped"),this.reorderingColumns=se;for(let ge=0;ge<se.length;ge++)this.addColToGroupDrop(se[ge])}else this.addLabel(),this.removeColFromGroupDrop(m)},this.drop=r=>{const h=this.parent,m=h.getColumnByUid(r.droppedElement.getAttribute("e-mappinguid"));this.element.classList.remove("e-hover"),(0,u.Od)(r.droppedElement),this.aria.setDropTarget(this.parent.element.querySelector(".e-groupdroparea"),!1),this.aria.setGrabbed(this.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),(0,u.le)(m)||!1===m.allowGrouping||Zi(h.getColumnHeaderByUid(m.uid),"e-grid").getAttribute("id")!==h.element.getAttribute("id")?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:m.headerText}):this.groupColumn(m.field)},this.contentRefresh=!0,this.aria=new Ya,this.parent=e,this.groupSettings=t,this.serviceLocator=n,this.sortedColumns=s,this.focus=n.getService("focus"),this.addEventListener(),this.groupGenerator=new Jl(this.parent)}addLabel(){if(!this.element.getElementsByClassName("e-group-animator").length){const e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}}rearrangeGroup(){this.sortRequired=!1,this.updateModel()}columnDrag(e){this.groupSettings.allowReordering&&e.column.allowGrouping&&this.animateDropper(e);const t=this.parent.element.querySelector(".e-cloneproperties");(0,u.s1)(t,["e-defaultcur"],["e-notallowedcur"]),!Zi(e.target,"e-groupdroparea")&&!(this.parent.allowReordering&&Zi(e.target,"e-headercell"))&&(0,u.s1)(t,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")}columnDragStart(e){if(e.target.classList.contains("e-stackedheadercell"))return;const t=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(t,e.column.allowGrouping);const s=e.target.classList.contains("e-headercell")?e.target:Zi(e.target,"e-headercell");this.aria.setGrabbed(s,!0,!e.column.allowGrouping)}columnDrop(e){const t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){const s=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if((0,u.le)(s)||!1===s.allowGrouping||Zi(t.getColumnHeaderByUid(s.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;this.ungroupColumn(s.field)}}addEventListener(){this.parent.isDestroyed||(this.parent.on(H,this.enableAfterRender,this),this.parent.on(Oh,this.onActionComplete,this),this.parent.on(Dc,this.onActionComplete,this),this.parent.on(pe,this.onPropertyChanged,this),this.parent.on(Ll,this.clickHandler,this),this.parent.on(nl,this.columnDrag,this),this.parent.on(Xr,this.columnDragStart,this),this.parent.on(Pd,this.columnDrop,this),this.parent.on(To,this.columnDrop,this),this.parent.on(ei,this.refreshSortIcons,this),this.parent.on(Dr,this.refreshSortIcons,this),this.parent.on(Ko,this.keyPressHandler,this),this.parent.on(F,this.initialEnd,this),this.parent.on(U,this.initialEnd,this),this.parent.on(it,this.render,this),this.parent.on(Lh,this.onGroupAggregates,this),this.parent.on(Tr,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(it,this.render),this.parent.off(H,this.enableAfterRender),this.parent.off(Oh,this.onActionComplete),this.parent.off(Dc,this.onActionComplete),this.parent.off(pe,this.onPropertyChanged),this.parent.off(Ll,this.clickHandler),this.parent.off(nl,this.columnDrag),this.parent.off(Xr,this.columnDragStart),this.parent.off(To,this.columnDrop),this.parent.off(Pd,this.columnDrop),this.parent.off(ei,this.refreshSortIcons),this.parent.off(Dr,this.refreshSortIcons),this.parent.off(Ko,this.keyPressHandler),this.parent.off(Lh,this.onGroupAggregates),this.parent.off(Tr,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))}initialEnd(){const e=this.parent;if(this.parent.off(F,this.initialEnd),this.parent.off(U,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(const t of e.groupSettings.columns)this.groupColumn(t);this.contentRefresh=!0}}keyPressHandler(e){const t=this.parent;if("ctrlSpace"===e.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(e.action))switch(e.preventDefault(),e.action){case"altDownArrow":case"altUpArrow":const s=t.allowSelection?t.getSelectedRowIndexes():[];if(s.length){const m=t.getContentTable().querySelector(vs).children;let V;for(let Y=t.getDataRows()[s[s.length-1]].rowIndex;Y>=0;Y--)if(!m[Y].classList.contains(Lr)&&!m[Y].classList.contains("e-detailrow")){V=m[Y];break}this.expandCollapseRows(V.querySelector("altUpArrow"===e.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(this.parent.isEdit||null!==(0,u.oq)(e.target,"#"+this.parent.element.id+"_searchbar"))return;const n=this.focus.getFocusedElement(),r=n?n.parentElement.querySelector('[class^="e-record"]'):null;if(!r)break;this.expandCollapseRows(r);break;case"ctrlSpace":const h=t.focusModule.currentInfo.element;if(h&&h.classList.contains("e-headercell")){const m=t.getColumnByUid(h.firstElementChild.getAttribute("e-mappinguid"));m.field&&t.groupSettings.columns.indexOf(m.field)<0?this.groupColumn(m.field):this.ungroupColumn(m.field)}}}clickHandler(e){this.expandCollapseRows(e.target),this.applySortFromTarget(e.target),this.unGroupFromTarget(e.target),this.toogleGroupFromHeader(e.target)}unGroupFromTarget(e){e.classList.contains("e-ungroupbutton")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname"))}toogleGroupFromHeader(e){this.groupSettings.showToggleButton&&(e.classList.contains("e-grptogglebtn")?e.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):e.classList.contains("e-toggleungroup")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname")))}applySortFromTarget(e){const t=this.parent,s=(0,u.oq)(e,".e-groupheadercell");if(t.allowSorting&&s&&!e.classList.contains("e-ungroupbutton")&&!e.classList.contains("e-toggleungroup")){const n=s.firstElementChild.getAttribute("ej-mappingname");t.getColumnHeaderByField(n).getElementsByClassName("e-ascending").length?t.sortColumn(n,"Descending",!0):t.sortColumn(n,"Ascending",!0)}}expandCollapseRows(e){const t=Zi(e,"e-recordplusexpand")||Zi(e,"e-recordpluscollapse");if(t){const s=this.parent.getContentTable().querySelector(vs).children;let n,r,h;const m=this.parent,T=t.parentElement.getElementsByClassName("e-indentcell").length,V=t.parentElement.getAttribute("data-uid"),Y=m.getRowObjectFromUID(V);let se=!1;if(t.classList.contains("e-recordpluscollapse")?((0,u.cn)([t],"e-recordplusexpand"),(0,u.IV)([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",se=!0,Y.isExpand=!0,vt(m)&&this.updateVirtualRows(m,e,se,h,r),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionExpand(t.parentElement)):(n=!0,Y.isExpand=!1,(0,u.IV)([t],"e-recordplusexpand"),(0,u.cn)([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",vt(m)&&this.updateVirtualRows(m,e,!n,h,r),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionCollapse(t.parentElement)),this.aria.setExpand(t,se),!vt(m)&&!this.parent.groupSettings.enableLazyLoading){const ge=m.getRowsObject(),ke=ge.indexOf(Y),qe={};for(let mt=ke;mt<ge.length&&!(mt>ke&&ge[mt].indent===T);mt++){if(ge[mt].isDetailRow)s[mt].style.display=ge[mt-1].isExpand&&ge[mt-1].visible?"":"none";else if(!1===qe[ge[mt].parentUid])ge[mt].visible=!1,s[mt].style.display="none";else{if(!(ge[mt].isDataRow||ge[mt].isCaptionRow||ge[mt].isDetailRow||ge[mt].isAggregateRow)&&ge[mt].cells.some(Qt=>Qt.isDataCell&&Qt.visible)===ge[mt].visible)continue;ge[mt].visible=!0,s[mt].style.display="",s[mt].classList.remove("e-hide")}ge[mt].isCaptionRow&&(qe[ge[mt].uid]=ge[mt].isExpand&&ge[mt].visible)}this.parent.notify(Da,{rows:this.parent.getRowsObject()})}this.parent.notify("infinite-group-collapse",{isCollapse:n,parentUid:V})}}updateVirtualRows(e,t,s,n,r){const h=e.getRowObjectFromUID(t.closest("tr").getAttribute("data-uid"));h.isExpand=s,function Tg(b){const e=[],t=b.vRows;for(let s=0;s<t.length;s++)t[s].isDataRow?e.push(t[s]):t[s].isDataRow||(e.push(t[s]),!t[s].isExpand&&t[s].isCaptionRow&&(s+=la(t[s],b)));b.vcRows=e}(e),this.parent.notify("refresh-virtual-max-page",{}),(n=e.getDataModule().generateQuery(!1)).queries=e.getDataModule().aggregateQuery(e.getQuery().clone()).queries;const m={requestType:"virtualscroll",rowObject:h};e.contentModule&&(m.virtualInfo=e.contentModule.prevInfo),e.getDataModule().getData(m,n.requiresCount()).then(T=>e.renderModule.dataManagerSuccess(T,m))}expandCollapse(e){if(!this.parent.groupSettings.columns.length)return;e||this.parent.notify("initial-collapse",e);const t=this.parent.getContentTable().querySelector(vs).children,s=this.parent.getRowsObject();let n;for(let r=0,h=t.length;r<h;r++)t[r].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?(n=t[r].querySelector(e?".e-recordpluscollapse":".e-recordplusexpand"),n&&(n.className=e?"e-recordplusexpand":"e-recordpluscollapse",n.firstElementChild.className=e?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"),t[r].firstElementChild.classList.contains("e-recordplusexpand")||t[r].firstElementChild.classList.contains("e-recordpluscollapse")||(t[r].style.display=e?"":"none")):t[r].style.display=e?"":"none",s[r].isCaptionRow&&(s[r].isExpand=!!e);this.parent.updateVisibleExpandCollapseRows(),this.parent.notify(Da,{rows:this.parent.getRowsObject()})}expandAll(){this.expandCollapse(!0)}collapseAll(){this.expandCollapse(!1)}render(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn()}renderGroupDropArea(){const e=this.parent.element.querySelector(".e-groupdroparea");e&&(0,u.Od)(e),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")}updateGroupDropArea(e){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){const t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||e)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")}initDragAndDrop(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()}initializeGHeaderDrag(){new u._l(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})}initializeGHeaderDrop(){new u.bK(this.element,{accept:".e-dragclone",drop:this.drop})}groupColumn(e){const t=this.parent,s=t.getColumnByField(e);(0,u.le)(s)||!1===s.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(e)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:s.headerText}):Rh(t)?t.notify(Ca,{instance:this,handler:this.groupColumn,arg1:e}):(s.visible=t.groupSettings.showGroupedColumn,this.colName=e,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(e),this.updateGroupDropArea(),this.isAppliedGroup=!1)}ungroupColumn(e){const t=this.parent,s=this.parent.enableColumnVirtualization?this.parent.columns.filter(r=>r.field===e)[0]:t.getColumnByField(e);if((0,u.le)(s)||!1===s.allowGrouping||this.groupSettings.columns.indexOf(e)<0)return;if(Rh(t))return void t.notify(Ca,{instance:this,handler:this.ungroupColumn,arg1:e});s.visible=!0,this.colName=s.field;const n=JSON.parse(JSON.stringify(this.groupSettings.columns));if(n.splice(n.indexOf(this.colName),1),this.sortedColumns.indexOf(e)<0)for(let r=0,h=t.sortSettings.columns.length;r<h;r++)if(e===t.sortSettings.columns[r].field){t.sortSettings.columns.splice(r,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=n),this.groupSettings.columns=n,t.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}updateModel(){let e=JSON.parse(JSON.stringify(this.groupSettings.columns));e=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):e,this.sortRequired&&(-1===e.indexOf(this.colName)&&e.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=e,this.parent.dataBind()}onActionComplete(e){"grouping"===e.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);const t=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:vn}:{requestType:"ungrouping",type:vn};this.parent.trigger(vn,(0,u.l7)(e,t)),this.colName=null}groupAddSortingQuery(e){let t=0;for(;t<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[t].field!==e;)t++;this.parent.sortSettings.columns.length===t?this.parent.sortSettings.columns.push({field:e,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[t].direction="Ascending")}createElement(e){const t=this.parent;let s="Ascending";const n=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"});let r=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"});const h=this.parent.createElement("div",{attrs:{"ej-mappingname":e}});ch(e)&&h.setAttribute("ej-complexname",Il(e));const m=this.parent.getColumnByField(e),T=t.getColumnHeaderByUid(m.uid);return this.groupSettings.allowReordering&&h.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":"Drag the grouped column"}})),h.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:m.headerText,attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),this.groupSettings.showToggleButton&&h.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"ungroup button"}})),T.querySelectorAll(".e-ascending,.e-descending").length&&(s=T.querySelector(".e-ascending")?"Ascending":"Descending"),h.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+s.toLowerCase()+" e-icon-"+s.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),h.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":"ungroup the grouped column"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),r.appendChild(h),this.groupSettings.allowReordering&&(n.appendChild(r),n.appendChild(this.createSeparator()),r=n),r}addColToGroupDrop(e){const t=ch(e)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+Il(e)+"]"):this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+e+"]");if(this.groupSettings.allowReordering&&t)return;const s=this.parent.getColumnByField(e);if((0,u.le)(s))return;const n=this.createElement(e);if(this.groupSettings.allowReordering){const r=this.element.getElementsByClassName("e-group-animator").length;n.setAttribute("index",r.toString())}this.element.appendChild(n)}createSeparator(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"Separator for the grouped columns"},styles:this.groupSettings.showUngroupButton?"":"display:none"})}refreshToggleBtn(e){if(this.groupSettings.showToggleButton){const t=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv"));for(let s=0,n=t.length;s<n;s++)if(!t[s].classList.contains("e-emptycell")&&!t[s].classList.contains("e-headerchkcelldiv")){const r=this.parent.getColumnByUid(t[s].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!r.showColumnMenu)&&(t[s].getElementsByClassName("e-grptogglebtn").length&&(0,u.Od)(t[s].querySelectorAll(".e-grptogglebtn")[0]),e||t[s].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(r.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":"Group button"}})))}}}removeColFromGroupDrop(e){if(!(0,u.le)(this.getGHeaderCell(e))){const t=this.getGHeaderCell(e);if(this.groupSettings.allowReordering){const s=Zi(t,"e-group-animator");(0,u.Od)(s)}else(0,u.Od)(t);this.updateGroupDropArea()}this.isAppliedUnGroup=!1}onPropertyChanged(e){if(e.module===this.getModuleName())for(const t of Object.keys(e.properties))switch(t){case"columns":let s;if(this.contentRefresh){if(this.isAppliedUnGroup)s={columnName:this.colName,requestType:"ungrouping",type:lr};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(let n=0;n<this.parent.sortSettings.columns.length;n++)this.parent.sortSettings.columns[n].isFromGroup&&(this.parent.sortSettings.columns.splice(n,1),n--);for(let n=0;n<this.groupSettings.columns.length;n++)this.colName=this.groupSettings.columns[n],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),n<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[n])}s={columnName:this.colName,requestType:e.properties[t].length?"grouping":"ungrouping",type:lr}}if(!this.groupSettings.showGroupedColumn){const n=e.oldProperties[t];for(let r=0;r<n.length;r++)-1===e.properties[t].indexOf(n[r])&&(this.parent.getColumnByField(n[r]).visible=!0)}this.parent.notify(Me,s)}break;case"showDropArea":this.updateGroupDropArea(),this.element.style.display=this.groupSettings.showDropArea?"":"none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(Me,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}updateGroupedColumn(e){for(let t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[t]).visible=e}updateButtonVisibility(e,t){const s=[].slice.call(this.element.getElementsByClassName(t));for(let n=0;n<s.length;n++)s[n].style.display=e?"":"none"}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&this.render()}destroy(){const e=this.parent.element;!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll)||((this.parent.isDestroyed||!this.parent.allowGrouping)&&!this.parent.refreshing&&this.clearGrouping(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode&&(0,u.Od)(this.element))}clearGrouping(){const e=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(let t=0,s=e.length;t<s;t++)t===s-1&&(this.contentRefresh=!0),this.ungroupColumn(e[t]);this.contentRefresh=!0}getModuleName(){return"group"}refreshSortIcons(){const e=this.parent;let t;const s=e.sortSettings.columns,n=e.groupSettings.columns,r=this.parent.getColumns().map(h=>h.field);this.refreshToggleBtn();for(let h=0,m=s.length;h<m;h++)-1!==r.indexOf(s[h].field)&&(t=e.getColumnHeaderByField(s[h].field),!e.allowSorting&&(this.sortedColumns.indexOf(s[h].field)>-1||this.groupSettings.columns.indexOf(s[h].field)>-1)?((0,u.s1)(t.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),s.length>1&&t.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(h+1).toString()}))):this.getGHeaderCell(s[h].field)&&this.getGHeaderCell(s[h].field).getElementsByClassName("e-groupsort").length&&("Ascending"===s[h].direction?(0,u.s1)(this.getGHeaderCell(s[h].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):(0,u.s1)(this.getGHeaderCell(s[h].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(let h=0,m=n.length;h<m;h++)-1!==r.indexOf(n[h])&&e.getColumnHeaderByField(n[h]).setAttribute("aria-grouped","true")}getGHeaderCell(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null}onGroupAggregates(e){const t=this.iterateGroupAggregates(e),s=this.groupGenerator.generateRows(t,{}),n=this.parent.getRowsObject().filter(h=>!h.isDataRow),r=s.filter(h=>!h.isDataRow);(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(let h=0;h<r.length;h++){const m=r[h],V={cells:m.cells.filter(Y=>Y.isDataCell),data:m.data,dataUid:n[h]?n[h].uid:""};this.parent.notify("refresh-aggregate-cell",V)}}iterateGroupAggregates(e){const t=e instanceof Array?e:[],s=this.parent.getRowsObject(),n=this.parent.getCurrentViewRecords(),r=[];let h=s.map(mt=>("delete"===mt.edit&&r.push(mt.data),mt.changes instanceof Object?mt.changes:mt.data));const m=this.parent.getPrimaryKeyFieldNames()[0];h=0===t.length?h:t;const T=n.map(mt=>{const Vt=bt.j4.getObject(m,mt);let Qt;return h.some(ki=>(Qt=ki,Vt===bt.j4.getObject(m,ki)))?Qt:mt});if((!e.type||"cancel"!==e.type)&&r.length>0)for(let mt=0;mt<r.length;mt++){const Vt=T.indexOf(r[mt]);T.splice(Vt,1)}const Y=[],se=this.parent.aggregates;for(let mt=0;mt<se.length;mt++){const Vt=se[mt];for(let Qt=0;Qt<Vt.columns.length;Qt++){let ai={};ai={type:Vt.columns[Qt].type.toString().toLowerCase(),field:Vt.columns[Qt].field},Y.push(ai)}}let ge,ke;const qe=this.parent.groupSettings.columns;for(let mt=0;mt<qe.length;mt++)ke=ge||T,ge=bt.j4.group(ke,qe[mt],Y,null,null);return ge}updateExpand(e){const t=e.uid,s=e.isExpand,n=this.parent.getRowsObject();for(let r=0;r<n.length;r++){const h=n[r];if(h.uid===t||(0,u.le)(t)){h.isExpand=s;for(let m=r+1;m<n.length;m++){const T=n[m];let V;if(T.parentUid!==h.uid&&(V=n.filter(Y=>Y.uid===T.parentUid)[0]),T.parentUid===h.uid?T.visible=h.isExpand:!(0,u.le)(V)&&T.parentUid===V.uid&&(V.isExpand&&!0===V.visible?T.visible=!0:V.isExpand&&!1===V.visible&&(T.visible=!1)),(0,u.le)(t))break}}}this.parent.notify(F,{rows:n,args:{isFrozen:!1,rows:n}})}}class Z0{constructor(e){this.parent=e}addNew(e,t){let s;this.isEdit=!1;const n=Ff(this.parent),r=Om(this.parent),h=this.parent.isFrozenGrid(),m=h&&this.parent.enableColumnVirtualization&&t.isScroll;if(s=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?m?this.parent.getMovableHeaderTbody():this.parent.getHeaderTable().querySelector(vs):m?this.parent.getMovableContentTbody():this.parent.getContentTable().querySelector(vs),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),s.querySelector(".e-emptyrow")){const T=s.querySelector(".e-emptyrow");if(T.parentNode.removeChild(T),h&&!m){const V=this.parent.getContent().querySelector("."+Or).querySelector(vs);if(V.firstElementChild.parentNode.removeChild(V.firstElementChild),this.parent.getFrozenMode()===fn){const Y=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(vs);Y.firstElementChild.parentNode.removeChild(Y.firstElementChild)}}}if("Top"===this.parent.editSettings.newRowPosition?s.insertBefore(t.row,s.firstChild):s.appendChild(t.row),t.row.appendChild(this.getEditElement(e,!1,void 0,t,!0)),this.parent.editModule.checkLastRow(t.row,t),h&&!m){const T=this.renderMovableform(t.row,t);if("Top"===this.parent.editSettings.newRowPosition?n.insertBefore(T,n.firstChild):n.appendChild(T),t.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),T.setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),r){const V=this.renderFrozenRightForm(t.row,t);"Top"===this.parent.editSettings.newRowPosition?r.insertBefore(V,r.firstChild):r.appendChild(V);const Y=this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount();t.row.querySelector(".e-normaledit").setAttribute("colspan",Y+""),V.querySelector(".e-normaledit").setAttribute("colspan",""+this.parent.getFrozenRightColumnsCount())}"auto"===this.parent.height&&this.parent.notify(Bh,{})}}renderFrozenRightForm(e,t){const s=e.cloneNode(!0),n=t.frozenRightForm=s.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,t.rowData,!1),s):(this.renderRightFrozen(e,s),s.querySelector(Qn).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Qn).innerHTML,s)}renderMovableform(e,t){const s=e.cloneNode(!0),n=t.movableForm=s.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,t.rowData,!1),s):(this.renderMovable(e,s),s.querySelector(Qn).innerHTML=this.parent.getHeaderContent().querySelector("."+io).querySelector(Qn).innerHTML,s)}updateFreezeEdit(e,t){return t=t.concat([].slice.call(this.getFreezeRow(e).querySelectorAll("td.e-rowcell"))),this.parent.getFrozenMode()===fn&&(t=t.concat([].slice.call(this.getFreezeRightRow(e).querySelectorAll("td.e-rowcell")))),t}getFreezeRightRow(e){const t=parseInt(e.getAttribute(xn),10),s=this.parent.getFrozenLeftContentTbody(),n=this.parent.getFrozenHeaderTbody(),r=this.parent.getFrozenRightHeaderTbody(),h=this.parent.getFrozenRightContentTbody();return s.contains(e)||n.contains(e)?this.parent.getFrozenRightRowByIndex(t):h.contains(e)||r.contains(e)?this.parent.getRowByIndex(t):e}getFreezeRow(e){if(this.parent.isFrozenGrid()){const t=parseInt(e.getAttribute(xn),10),s=this.parent.getFrozenLeftContentTbody(),n=this.parent.getMovableContentTbody(),r=this.parent.getFrozenHeaderTbody(),h=this.parent.getMovableHeaderTbody();if(s.contains(e)||r.contains(e))return this.parent.getMovableRowByIndex(t);if(n.contains(e)||h.contains(e))return this.parent.getRowByIndex(t)}return e}update(e,t){this.isEdit=!0;const s=t.isCustomFormValidation,n=t.isScroll;!n&&((0,u.oq)(t.row,"."+Or)||(0,u.oq)(t.row,"."+io))&&(t.row=this.getFreezeRow(t.row)),((0,u.oq)(t.row,".e-frozen-right-content")||(0,u.oq)(t.row,".e-frozen-right-header"))&&(t.row=this.getFreezeRightRow(t.row));const r=this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&n;let h=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",!r&&!s&&(h=this.updateFreezeEdit(t.row,h)),t.row.appendChild(this.getEditElement(e,!0,h,t,!0)),t.row.classList.add(Nl),this.parent.editModule.checkLastRow(t.row,t),!r&&!s&&this.refreshFreezeEdit(t.row,t)}refreshFreezeEdit(e,t){const s=e.firstChild;let n,r;this.parent.getVisibleFrozenColumns()&&this.parent.editSettings.template&&(s.querySelector(Qn).innerHTML=this.parent.getHeaderContent().querySelector("."+Wa).querySelector(Qn).innerHTML);const h=parseInt(e.getAttribute(xn),10);if(this.parent.isFrozenGrid()){h<this.parent.frozenRows?(r=this.parent.getHeaderContent(),n="."+Wa):(r=this.parent.getContent(),n="."+ga);const m=s.cloneNode(!0),T=s.cloneNode(!0),V=t.movableForm=m.querySelector("form");let Y,se;this.parent.editSettings.template&&this.refreshEditForm(V,t.rowData),r.querySelector(n).contains(e)?(Y=this.parent.getMovableRowByIndex(h),this.updateFrozenCont(Y,s,m),this.parent.getFrozenMode()===fn&&(t.frozenRightForm=T.querySelector("form"),this.refreshEditForm(t.frozenRightForm,t.rowData),se=this.parent.getFrozenRightRowByIndex(h),this.updateFrozenRightCont(se,s,T))):(Y=this.parent.getRowByIndex(h),this.updateFrozenCont(Y,m,s),this.parent.getFrozenMode()===fn&&(t.frozenRightForm=T.querySelector("form"),this.refreshEditForm(t.frozenRightForm,t.rowData),se=this.parent.getFrozenRightRowByIndex(h),this.updateFrozenRightCont(se,T,s))),Y.appendChild(m),Y.classList.add(Nl),this.parent.getFrozenMode()===fn&&(se.appendChild(T),se.classList.add(Nl),ul(t.frozenRightForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))),ul(t.movableForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))}}refreshEditForm(e,t){this.parent.editSettings.template&&(e.innerHTML="",this.appendChildren(e,t,!1))}updateFrozenRightCont(e,t,s){e.innerHTML="",this.renderRightFrozen(t,s),s.querySelector(Qn).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Qn).innerHTML,t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount()+""),s.setAttribute("colspan",this.parent.getFrozenRightColumnsCount()+"")}updateFrozenCont(e,t,s){e.innerHTML="",this.renderMovable(t,s),s.querySelector(Qn).innerHTML=this.parent.getHeaderContent().querySelector("."+io).querySelector(Qn).innerHTML,t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),s.setAttribute("colspan",this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-this.parent.getVisibleFrozenColumns()+"")}renderRightFrozen(e,t){t.querySelector("tr").innerHTML="";const s=this.parent.getColumns();let n=0;for(let r=0;r<s.length;r++,n++)if(s[r].getFreezeTableName()===vo){const h=n-this.parent.getMovableColumnsCount();t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[h])),n--}}renderMovable(e,t){t.querySelector("tr").innerHTML="";const s=this.parent.getColumns();let n=this.parent.isRowDragable()?1:0;for(let r=0;r<s.length;r++,n++)"movable"===s[r].getFreezeTableName()&&(t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[n])),n--)}getEditElement(e,t,s,n,r){const h=this.parent;let m=0;const T=(0,u.le)(h.detailTemplate)&&(0,u.le)(h.childGrid)?0:1;h.allowGrouping&&(m=h.groupSettings.columns.length);const V=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(h.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-h.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),Y=n.form=this.parent.createElement("form",{id:h.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(Y,n.rowData,r),V.appendChild(Y),V;const se=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25"}});se.appendChild(h.getContentTable().querySelector(Qn).cloneNode(!0));const ge=this.parent.createElement(vs),ke=this.parent.createElement("tr");let qe=0;for(T&&ke.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),ke.firstChild),h.isRowDragable()&&ke.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));qe<m;)ke.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),qe++;let mt=0;qe=0;const Vt=h.isFrozenGrid()&&h.enableColumnVirtualization&&n.isScroll,Qt=n.isCustomFormValidation?this.parent.columnModel:h.getColumns();for(;t&&mt<s.length&&qe<Qt.length||qe<Qt.length;){const ai=t?s[mt].getAttribute("colspan"):null,ki=Qt[qe];if(Vt&&"movable"!==ki.getFreezeTableName()||n.isCustomFormValidation&&(ki.commands||ki.commandsTemplate||!ki.field)){qe++;continue}const Qi=this.parent.createElement("td",{className:Cr,attrs:{style:"text-align:"+(ki.textAlign?ki.textAlign:""),colspan:ai||""}});ki.visible?(Qi.appendChild(e[ki.uid]),"Vertical"===this.parent.rowRenderingMode&&(Ql(Qi,{"data-cell":ki.headerText}),0===qe&&Qi.classList.add("e-responsive-editcell")),"booleanedit"===ki.editType?Qi.classList.add("e-boolcell"):(ki.commands||ki.commandsTemplate)&&(0,u.cn)([Qi],"e-unboundcell")):Qi.classList.add("e-hide"),ke.appendChild(Qi),qe=ai?qe+parseInt(ai,10):qe+1,mt++}return ge.appendChild(ke),se.appendChild(ge),Y.appendChild(se),V.appendChild(Y),V}removeEventListener(){}appendChildren(e,t,s){const n=(0,u.l7)({},t,{isAdd:!this.isEdit,isFrozen:s},!0),r=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",r,null,null,e),this.parent.renderTemplates()):Dl(e,this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",r))}}class $m{constructor(e){this.parent=e}update(e,t){if(this.parent.isReact&&t.columnObject&&t.columnObject.template){const s=t.cell.parentElement,n=t.cell.cloneNode(!0);s.insertBefore(n,t.cell),n.focus(),t.cell.remove(),t.cell=n}t.cell.innerHTML="",t.cell.appendChild(this.getEditElement(e,t)),t.cell.classList.remove("e-ellipsistooltip"),t.cell.classList.add("e-editedbatchcell"),(0,u.s1)(t.row,[Nl,"e-batchrow"],[])}getEditElement(e,t){const n=this.parent.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-gridform"});return n.appendChild(e[t.columnObject.uid]),"booleanedit"===t.columnObject.editType&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),n}removeEventListener(){}}class K0{constructor(e,t){this.parent=e,this.serviceLocator=t,!this.parent.isDestroyed&&(this.parent.on(Ju,this.destroy,this),this.parent.on(Tr,this.destroy,this))}setLocaleObj(){this.l10n=this.serviceLocator.getService("localization")}addNew(e,t){this.isEdit=!1,this.createDialog(e,t)}update(e,t){this.isEdit=!0,this.createDialog(e,t)}createDialogHeader(e){const t=this.parent;let s;if(this.parent.enableAdaptiveUI){const n=new bp(this.parent,this.serviceLocator);return n.action=this.isEdit?ao.isEdit:ao.isAdd,n.renderResponsiveHeader(void 0,e)}return s=t.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",e):this.isEdit?this.l10n.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle"),s}createDialog(e,t){const s=this.parent;this.dialog=this.parent.createElement("div",{id:s.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),s.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),this.dialog.setAttribute("aria-label","Dialog edit"),s.element.appendChild(this.dialog),this.setLocaleObj(),this.dialogObj=new Rt.Vq((0,u.l7)({header:this.createDialogHeader(t),isModal:!0,visible:!0,cssClass:"e-edit-dialog",content:this.getEditElement(e,t),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:s.editSettings.template?"auto":"330px",target:t.target?t.target:document.body,animationSettings:{effect:"None"},footerTemplate:s.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",t):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},s.editSettings.dialog&&s.editSettings.dialog.params||{})),t.dialog=this.dialogObj,this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),Mo(this.parent.element,this.dialogObj.element.parentElement),s.enableAdaptiveUI&&this.dialogObj.show(!0)}dialogCreated(){Pg(this.parent)}renderResponsiveDialog(){this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=()=>{this.dialogObj.element.style.maxHeight="100%"})}btnClick(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()}dialogClose(){this.parent.closeEdit()}destroy(e){const t=["template","headerTemplate","footerTemplate"];for(let s=0;s<t.length;s++)if(this.parent.editSettings[t[s]]){const n=t[s].charAt(0).toUpperCase()+t[s].slice(1);(0,u.tx)(this.parent.element.id+"editSettings"+n,n,this.parent.editSettings)}this.parent.notify(Qu,{}),this.parent.isEdit=!1,this.parent.notify(mh,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),(0,u.Od)(this.dialog))}getDialogEditTemplateElement(e,t){const s=this.parent.createElement("div",{className:"e-dialog"+e}),n=(0,u.l7)({},t.rowData,{isAdd:!this.isEdit},!0),r=this.parent.element.id+"editSettings"+e;return Dl(s,("HeaderTemplate"===e?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(n,this.parent,"editSettings"+e,r)),(0,u.tx)(r,e,this.parent.editSettings),s}getEditElement(e,t){const s=this.parent,n=this.parent.createElement("div",{className:this.isEdit?Nl:"e-insertedrow"}),r=t.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){const V=this.parent.element.id+"editSettingsTemplate",Y=(0,u.l7)({},t.rowData,{isAdd:!this.isEdit},!0);return this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(Y,this.parent,"editSettingsTemplate",V,null,null,r),this.parent.renderTemplates()):Dl(r,this.parent.getEditTemplate()(Y,this.parent,"editSettingsTemplate",V)),(0,u.tx)(V,"Template",this.parent.editSettings,!0,()=>{const ke=this.parent.getColumns();for(let qe=0;qe<ke.length;qe++)ke[qe].validationRules&&(this.parent.editModule.formObj.rules[ke[qe].field]=ke[qe].validationRules)}),n.appendChild(r),n}const h=this.parent.createElement("table",{className:yo,attrs:{cellspacing:"6px"}}),m=this.parent.createElement(vs),T=s.getColumns();for(let V=0;V<T.length;V++){if(this.parent.editModule.checkColumnIsGrouped(T[V])||T[V].commands||T[V].commandsTemplate||"checkbox"===T[V].type)continue;const Y=this.parent.createElement("tr"),se=this.parent.createElement("td",{className:Cr,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});e[T[V].uid].classList.remove("e-input"),se.appendChild(e[T[V].uid]),Y.appendChild(se),m.appendChild(Y)}return h.appendChild(m),r.appendChild(h),n.appendChild(r),n}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Ju,this.destroy),this.parent.off(Tr,this.destroy))}}class J0{constructor(e,t){this.editType={Inline:Z0,Normal:Z0,Batch:$m,Dialog:K0},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}addNew(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)}update(e){this.renderer.update(this.getEditElements(e),e),e.isCustomFormValidation||(this.parent.notify("edit-form",e),this.convertWidget(e))}convertWidget(e){const t=this.parent;let s,n,r,h,m;const T=t.isFrozenGrid(),V="Right"===t.getFrozenMode()&&"Normal"===t.editSettings.mode?1:0,Y="Dialog"===t.editSettings.mode?(0,u.Ys)("#"+t.element.id+"_dialogEdit_wrapper .e-gridform",document):t.element.getElementsByClassName("e-gridform")[V],se=T&&this.parent.enableColumnVirtualization&&e.isScroll;if(T&&"Normal"===t.editSettings.mode){const ke=parseInt(e.row.getAttribute(xn),10);t.frozenRows&&("add"===e.requestType&&"Top"===t.editSettings.newRowPosition||ke<t.frozenRows)?(h=t.element.querySelector("."+io).querySelector(".e-gridform"),this.parent.getFrozenMode()===fn&&(m=e.frozenRightForm)):(h=t.element.querySelector("."+Or).querySelector(".e-gridform"),this.parent.getFrozenMode()===fn&&(m=e.frozenRightForm))}const ge="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];for(const ke of ge){if(se&&"movable"!==ke.getFreezeTableName())continue;if(this.parent.editSettings.template&&!(0,u.le)(ke.field)){const mt=(0,u.l7)({},e);mt.element=Y.querySelector("[name="+Il(ke.field)+"]"),(0,u.le)(mt.element)&&T&&(mt.element=h.querySelector("[name="+Il(ke.field)+"]")),"string"==typeof ke.edit.write?mi(ke.edit.write,window)(mt):ke.edit.write(mt);continue}if(this.parent.editModule.checkColumnIsGrouped(ke)||ke.commands)continue;r=ke.valueAccessor(ke.field,e.rowData,ke),n="movable"===ke.getFreezeTableName()&&"Normal"===t.editSettings.mode?h.querySelector("[e-mappinguid="+ke.uid+"]"):m&&ke.getFreezeTableName()===vo&&"Normal"===t.editSettings.mode?m.querySelector("[e-mappinguid="+ke.uid+"]"):Y.querySelector("[e-mappinguid="+ke.uid+"]");let qe=ke.edit.write;(0,u.le)(n)||("string"==typeof qe?(qe=mi(qe,window),qe({rowData:e.rowData,element:n,column:ke,requestType:e.requestType,row:e.row,foreignKeyData:ke.isForeignColumn()&&mi(ke.field,e.foreignKeyData)})):ke.edit.write({rowData:e.rowData,element:n,column:ke,requestType:e.requestType,row:e.row,foreignKeyData:ke.isForeignColumn()&&mi(ke.field,e.foreignKeyData)}),!s&&!n.getAttribute("disabled")&&!Zi(n,"e-checkbox-disabled")&&(this.focusElement(n,e.type),s=!0))}if(T&&!this.parent.allowTextWrap&&("add"===e.requestType||"beginEdit"===e.requestType)&&"Dialog"!==this.parent.editSettings.mode&&!(0,u.le)(Y)&&!(0,u.le)(h)){const ke=h.querySelector("tr").children[0],qe=Y.querySelector("tr").children[0];qe.offsetHeight>ke.offsetHeight?(ke.style.height=qe.offsetHeight+"px",m&&(h.querySelector("tr").children[0].style.height=qe.offsetHeight+"px")):(qe.style.height=ke.offsetHeight+"px",m&&(h.querySelector("tr").children[0].style.height=ke.offsetHeight+"px"))}}focusElement(e,t){const s=this.parent.element.querySelector(".e-edit-checkselect");(0,u.le)(s)||s.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:(0,u.oq)(e,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&Zi(e,ra)?e.focus():e.focus({preventScroll:!0}),e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)}getEditElements(e){const t=this.parent,s={};let n="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];if(e.isCustomFormValidation&&(n=this.parent.columnModel),this.parent.editSettings.template)return{};const r=t.isFrozenGrid()&&t.enableColumnVirtualization&&e.isScroll;for(let h=0,m=n.length;h<m;h++){const T=n[h];if(this.parent.editModule.checkColumnIsGrouped(T)||r&&"movable"!==n[h].getFreezeTableName()||e.isCustomFormValidation&&(T.commands||T.commandsTemplate||!T.field))continue;if(T.commands||T.commandsTemplate){const ke=this.serviceLocator.getService("cellRendererFactory"),qe=new oh(this.parent),mt=ke.getCellRenderer(Ys.CommandColumn),Qt=qe.generateRows(e.rowData)[0].cells.filter(Qi=>Qi.rowID),ai=mt.render(Qt[h],e.rowData,{index:e.row?e.row.getAttribute(xn):0},this.parent.enableVirtualization),ki=ai.firstElementChild;ki.setAttribute("textAlign",ai.getAttribute("textAlign")),s[T.uid]=ki;continue}const V=T.valueAccessor(T.field,e.rowData,T),Y={column:T,value:V,type:e.requestType,data:e.rowData};let ge,se=T.edit.create;if(T.editTemplate){ge=this.parent.createElement("span",{attrs:{"e-mappinguid":T.uid}});const ke=this.parent.element.id+T.uid+"editTemplate",qe=Hs({},e.rowData,{column:T});this.parent.isReact&&"string"!=typeof T.editTemplate?(T.getEditTemplate()((0,u.l7)({index:e.rowIndex},qe),this.parent,"editTemplate",ke,null,null,ge),this.parent.renderTemplates()):Dl(ge,T.getEditTemplate()((0,u.l7)({index:e.rowIndex},qe),this.parent,"editTemplate",ke))}else{if("string"==typeof se?(se=mi(se,window),ge=se(Y)):ge=T.edit.create(Y),"string"==typeof ge){const mt=this.parent.createElement("div");mt.innerHTML=ge,ge=mt.firstChild}const ke="input"!==ge.tagName&&ge.querySelectorAll("input").length,qe=Il(T.field);(0,u.Y4)(ke?ge.querySelector("input"):ge,{name:qe,"e-mappinguid":T.uid,id:t.element.id+qe}),(0,u.s1)(ge,["e-input","e-field"],[]),"Right"===T.textAlign&&ge.classList.add("e-ralign"),((T.isPrimaryKey||T.isIdentity)&&"beginEdit"===e.requestType||T.isIdentity&&"add"===e.requestType)&&ge.setAttribute("disabled","")}s[T.uid]=ge}return s}destroy(){this.renderer.removeEventListener()}}class Hf{constructor(e){this.parent=e}create(e){return Pu(this.parent,e.column,"e-field",{type:"text"})}read(e){return e.ej2_instances[0].value}destroy(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())}}class Hg extends Hf{constructor(){super(...arguments),this.activeClasses=["e-selectionbackground","e-active"]}create(e){let s="e-field e-boolcell";return"checkbox"===e.column.type&&(s="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,Pu(this.parent,e.column,s,{type:"checkbox",value:e.value})}read(e){return e.checked}write(e){let t,s;if((0,u.le)(e.row)||(t=e.row.querySelector(".e-edit-checkselect")),mi(e.column.field,e.rowData)&&(s=JSON.parse(mi(e.column.field,e.rowData).toString().toLowerCase())),!(0,u.le)(t)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){const n=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));s=!!n&&n.isSelected}o([].slice.call(e.row.getElementsByClassName(Cr)),s,...this.activeClasses)}this.obj=new z.Jg((0,u.l7)({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:s,disabled:!Ka(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)}addEventListener(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener(hc,this.cbChange)}removeEventListener(){this.obj.isDestroyed||this.obj.removeEventListener(hc,this.cbChange)}checkBoxChange(e){if(this.editRow&&"Dialog"!==this.editType){let t=!1;e.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected"),o([].slice.call(this.editRow.getElementsByClassName(Cr)),t,...this.activeClasses)}}}class Q0 extends Hf{constructor(e){super(),this.parent=e,this.flag=!1,this.removeEventHandler=this.removeEventListener}write(e){const t="Dialog"!==this.parent.editSettings.mode;this.column=e.column;const s=new bt.$G(e.column.field,"notequal",null,!0,!1),n={};if(e.column.edit.params){const r=Object.keys(e.column.edit.params);for(let h=0;h<r.length;h++)n[r[h]]="query"===r[h]?e.column.edit.params[r[h]].clone():e.column.edit.params[r[h]]}this.obj=new ve.NB((0,u.l7)({dataSource:this.parent.dataSource instanceof bt.hm?this.parent.dataSource:new bt.hm(this.parent.dataSource),query:(new bt.AE).where(s).select(e.column.field),enabled:Ka(e.column,e.requestType,e.element),fields:{value:e.column.field},value:mi(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",sortOrder:"Ascending"},n)),this.parent.enableVirtualization&&(this.obj.dataSource=e.column.isForeignColumn()?[e.foreignKeyData[0]]:[e.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",Il(e.column.field))}addEventListener(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(bd,this.ddCreated),this.obj.addEventListener(xa,this.ddOpen),this.obj.addEventListener(cc,this.ddBeforeOpen),this.obj.addEventListener(vn,this.ddComplete)}removeEventListener(){this.obj.isDestroyed||(this.obj.removeEventListener(bd,this.ddCreated),this.obj.removeEventListener(xa,this.ddOpen),this.obj.removeEventListener(cc,this.ddBeforeOpen),this.obj.removeEventListener(vn,this.ddComplete))}dropdownCreated(e){this.flag=!0}dropdownBeforeOpen(){this.parent.enableVirtualization&&(this.obj.dataSource=this.column.isForeignColumn()?this.column.dataSource instanceof bt.hm?this.column.dataSource:new bt.hm(this.column.dataSource):this.parent.dataSource instanceof bt.hm?this.parent.dataSource:new bt.hm(this.parent.dataSource))}ddActionComplete(e){e.result=bt.j4.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&!this.column.edit.params.ddEditedData&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof bt.hm&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1}dropDownOpen(e){const t=Zi(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!(0,u.le)(t)){const s=(0,u.Ys)("#"+t.id,document).ej2_instances[0];e.popup.element.style.zIndex=(s.zIndex+1).toString()}}}class X0{constructor(e){this.parent=e}keyEventHandler(e){if(13===e.keyCode||9===e.keyCode){const t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}}create(e){return this.instances=new u.eC(this.parent.locale),Pu(this.parent,e.column,"e-field",{})}read(e){return this.obj.value}write(e){const t=e.column,s="Dialog"!==this.parent.editSettings.mode;this.obj=new J.No((0,u.l7)({value:parseFloat(mi(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:s?"":e.column.headerText,enabled:Ka(e.column,e.requestType,e.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale},t.edit.params)),e.element.setAttribute("name",Il(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)}destroy(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())}}class zf extends Hf{create(e){const t={type:"text",value:(0,u.le)(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return Pu(this.parent,e.column,"e-field e-input e-defaultcell",t)}read(e){return e.value}write(e){const t=e.column,s="Dialog"!==this.parent.editSettings.mode;this.obj=new J.zC((0,u.l7)({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:Ka(e.column,e.requestType,e.element),placeholder:s?"":e.column.headerText},t.edit.params)),this.obj.appendTo(e.element)}}class jf{constructor(e,t,s){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=s,this.serviceLocator=t,this.addEventListener()}clickHandler(e){const t=e.target,s=this.parent;(Zi(t,ll)&&Zi(Zi(t,ll),"e-grid").id===s.element.id||s.frozenRows&&Zi(t,Lo))&&!Zi(t,"e-unboundcelldiv")&&(this.rowIndex=Zi(t,Cr)?parseInt(t.parentElement.getAttribute(xn),10):-1,s.isEdit&&s.editModule.endEdit())}dblClickHandler(e){Zi(e.target,Cr)&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(Zi(e.target,Lr))}editComplete(e){switch(this.parent.isEdit=!1,e.requestType){case"save":(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection)&&"edit"!==e.action&&this.parent.selectRow(0),this.parent.trigger(vn,(0,u.l7)(e,{requestType:"save",type:vn}));break;case"delete":this.parent.trigger(vn,(0,u.l7)(e,{requestType:"delete",type:vn})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}}getEditArgs(e,t,s){const n=this.parent.getPrimaryKeyFieldNames(),r=[];for(let m=0;m<n.length;m++)r.push(mi(n[m],e));return{primaryKey:n,primaryKeyValue:r,requestType:"beginEdit",rowData:e,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:t&&t.foreignKeyData,target:void 0,isScroll:s}}startEdit(e){const t=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(e.getAttribute(xn),10),(t.enableVirtualization||t.enableInfiniteScrolling)&&!this.parent.element.querySelector('.e-row[aria-rowindex="'+this.rowIndex+'"]'))return;const s={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify("virtual-scroll-edit-action-begin",s),vt(t)){const m=t.getRowObjectFromUID(e.getAttribute("data-uid"));this.previousData=m.data}else this.previousData||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling?this.parent.enableVirtualization||(this.previousData=(0,u.l7)({},{},t.getCurrentViewRecords()[this.rowIndex],!0)):this.previousData=s.data;const n=(0,u.l7)({},{},s.data||this.previousData,!0);this.uid=e.getAttribute("data-uid");const r=t.getRowObjectFromUID(this.uid),h=this.getEditArgs(n,r,s.isScroll);h.row=e,h.isScroll?this.inlineEditHandler(h,e):(this.parent.notify($d,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),t.trigger("beginEdit",h,m=>{m.type="actionBegin",t.trigger(lr,m,T=>{T.cancel||this.inlineEditHandler(T,e)})}))}inlineEditHandler(e,t){const s=this.parent;s.isEdit=!0,e.row=e.row?e.row:t,"Dialog"!==s.editSettings.mode&&s.clearSelection(),"Dialog"===s.editSettings.mode&&s.selectionModule&&(s.selectionModule.preventFocus=!0,e.row.classList.add("e-dlgeditrow")),this.renderer.update(e),this.uid=t.getAttribute("data-uid"),s.editModule.applyFormValidation(),e.type="actionComplete",s.trigger(vn,e),this.args=e,this.parent.allowTextWrap&&this.parent.notify(wa,{case:"textwrap"})}updateRow(e,t){const s=this.parent;this.editRowIndex=e;const n={requestType:"save",action:"edit",type:lr,data:t,cancel:!1,previousData:s.getCurrentViewRecords()[e],row:s.getRowByIndex(e)};if(s.showSpinner(),s.enableInfiniteScrolling){this.uid=n.row.getAttribute("data-uid");const r=parseInt(n.row.getAttribute("aria-rowindex"));this.parent.notify("refresh-infinite-editrowindex",{index:r})}s.notify(od,n),n.promise?n.promise.then(()=>s.refresh()).catch(r=>this.edFail(r)):s.enableInfiniteScrolling||s.refresh()}editFormValidate(){const e=this.parent,t=e.editModule.editFormValidate(),s={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return e.notify("validate-virtual-form",s),t&&s.isValid}endEdit(){const e=this.parent;if(!this.parent.isEdit||!this.editFormValidate())return;let t=(0,u.l7)({},{},this.previousData,!0);const s=(0,u.l7)(this.args,{requestType:"save",type:lr,data:t,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),n="Right"===e.getFrozenMode()?1:0,r="Dialog"===e.editSettings.mode,h=(0,u.Ys)("#"+e.element.id+"_dialogEdit_wrapper",document),m=r?h.querySelector(".e-gridform"):e.element.getElementsByClassName("e-gridform")[n],T={virtualData:(0,u.l7)({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(vh,T),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(T.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=t=s.data=T.virtualData):t=e.editModule.getCurrentEditedData(m,t),e.isFrozenGrid()&&"Normal"===e.editSettings.mode){const Y=e.getMovableVirtualHeader().querySelector(".e-gridform"),se=e.getMovableVirtualContent().querySelector(".e-gridform"),ge=[Y||se];let ke,qe,mt=[];e.getFrozenMode()===fn&&(ke=e.getFrozenRightHeader().querySelector(".e-gridform"),qe=e.getFrozenRightContent().querySelector(".e-gridform"),mt=[ke||qe]),tu(this.parent,(Vt,Qt)=>{for(const ai of Qt)ai&&(t=e.editModule.getCurrentEditedData(ai,t))},[[],ge,mt])}let V=[].slice.call(e.element.getElementsByClassName(Nl)).length;if(!T.isAdd&&Object.keys(this.currentVirtualData).length&&!V&&(V=1),r?h.getElementsByClassName(Nl).length:V)s.action="edit",e.trigger(lr,s,Y=>{Y.cancel||(e.showSpinner(),e.notify(od,Y))});else if(s.action="add",s.selectedRow=0,s.index=this.addedRowIndex,e.notify(Fc,{}),e.notify(Me,s),this.addedRowIndex=null,s.cancel)return}destroyElements(){const e=this.parent;e.editModule.destroyWidgets(),e.editModule.destroyForm(),this.parent.notify(Ju,{})}editHandler(e){e.promise?e.promise.then(t=>this.edSucc(t,e)).catch(t=>this.edFail(t)):this.editSuccess(e.data,e)}edSucc(e,t){this.editSuccess(e,t)}edFail(e){this.editFailure(e)}updateCurrentViewData(e){!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)}requestSuccess(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==e.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))}editSuccess(e,t){(0,u.le)(e)||e instanceof Array||(t.data=(0,u.l7)({},(0,u.l7)({},t.rowData,t.data),e)),this.requestSuccess(t),this.parent.trigger(Zo,t),t.type=vn,this.parent.isEdit=!1,this.refreshRow(t.data),this.parent.notify(Fc,t),this.parent.editModule.checkLastRow(t.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(t.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.trigger(vn,t),(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.hideSpinner()}closeForm(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.isFrozenGrid()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))}blazorTemplate(){const e=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&(0,u.tx)(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings);for(let t=0;t<e.length;t++){const s=e[t];s.template&&(0,u.tx)(this.parent.element.id+s.uid,"Template",s,!1),s.editTemplate&&(0,u.tx)(this.parent.element.id+s.uid+"editTemplate","EditTemplate",s)}}editFailure(e){this.parent.trigger(vl,{error:e}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})}needRefresh(){let e=!0;const t=this.parent.element.querySelector(".e-gridform");return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&"Normal"===this.parent.editSettings.mode&&!t&&(e=!1),e}refreshRow(e){const t=this.parent.isFrozenGrid(),s=new Wl(this.serviceLocator,null,this.parent);let n=this.parent.getRowObjectFromUID(this.uid);if(n){n.changes=e,this.parent.notify("refresh-virtual-cache",{data:e}),he(n,this.parent.getForeignKeyColumns(),n.changes),this.needRefresh()&&s.refresh(n,this.parent.getColumns(),!0);const r=[].slice.call(this.parent.element.querySelectorAll('[aria-rowindex="'+n.index+'"]'));if(t&&r.length)for(let h=0;h<r.length;h++){const m=r[h].getAttribute("data-uid");m!==this.uid&&(n=this.parent.getRowObjectFromUID(m),n.changes=e,s.refresh(n,this.parent.getColumns(),!0),this.parent.editModule.checkLastRow(r[h]))}}}closeEdit(){if(!this.parent.isEdit)return;const e=this.parent,t=(0,u.l7)(this.args,{requestType:"cancel",type:lr,cancel:!1,data:this.previousData,selectedRow:e.selectedRowIndex});e.notify("virtual-scroll-edit-cancel",t),this.blazorTemplate(),e.trigger(lr,t,s=>{if(s.cancel)return;"Dialog"===this.parent.editSettings.mode&&this.parent.notify(Ju,{}),e.isEdit=!1,this.stopEditStatus(),s.type=vn,"Dialog"!==e.editSettings.mode&&this.refreshRow(s.data);const n=e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length&&!e.getContentTable().querySelector("tr.e-emptyrow");!e.getContentTable().querySelector("tr.e-emptyrow")&&!e.getContentTable().querySelector("tr.e-row")&&!n&&e.renderModule.emptyRow(),"Dialog"!==e.editSettings.mode&&e.selectRow(this.rowIndex),e.trigger(vn,s)})}addRecord(e,t){const s=this.parent;if(this.addedRowIndex=t=(0,u.le)(t)?0:t,e)return void s.notify(Me,{requestType:"save",type:lr,data:e,selectedRow:0,action:"add",index:t});if(s.isEdit)return;this.previousData={},this.uid="";const n=s.getColumns(),r={virtualData:{},isScroll:!1};this.parent.notify(vh,r);for(let m=0;m<n.length;m++)r.isScroll&&"movable"!==n[m].getFreezeTableName()||n[m].field&&bt.j4.setValue(n[m].field,n[m].defaultValue,this.previousData);const h={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:lr,index:t,rowData:this.previousData,target:void 0,isScroll:r.isScroll};(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(r.virtualData).length&&(h.data=h.rowData=r.virtualData),h.isScroll?this.inlineAddHandler(h):(this.parent.notify($d,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),s.trigger(lr,h,m=>{m.cancel||this.inlineAddHandler(m)}))}inlineAddHandler(e){const t=this.parent;t.isEdit=!0,"Dialog"!==t.editSettings.mode&&t.clearSelection(),this.renderer.addNew(e),t.editModule.applyFormValidation(),e.type=vn,e.row=t.element.querySelector("."+ra),t.trigger(vn,e),this.args=e}deleteRecord(e,t){if(this.editRowIndex=this.parent.selectedRowIndex,t){t=t instanceof Array?t:[t];const n=this.parent,r=Object.keys(t).length;e=e||this.parent.getPrimaryKeyFieldNames()[0];for(let h=0;h<r;h++){let m;const T=n.currentViewData.some(V=>(m=V,t[h]===mi(e,V)||t[h]===V));t[h]=T?m:t[h][e]?t[h]:{[e]:t[h]}}}const s={requestType:"delete",type:lr,foreignKeyData:{},data:t||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if((0,u.le)(this.parent.commandDelIndex)||(s.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&s.data.length>1){const n=this.parent.getSelectedRows()[0].getAttribute("data-uid");s.data=[this.parent.getRowObjectFromUID(n).data]}this.parent.notify(Me,s)}stopEditStatus(){const e=this.parent,t=[].slice.call(e.element.getElementsByClassName(ra)),s=[].slice.call(e.element.getElementsByClassName(Nl));for(let n=0;n<t.length;n++)(0,u.Od)(t[n]);for(let n=0;n<s.length;n++)s[n].classList.remove(Nl)}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:du,handler:this.editHandler},{event:ef,handler:this.dblClickHandler},{event:Ll,handler:this.clickHandler},{event:ad,handler:this.requestSuccess},{event:rd,handler:this.dblClickHandler},{event:"delete-complete",handler:this.editComplete},{event:"save-complete",handler:this.editComplete},{event:oc,handler:this.closeEdit},{event:"closeinline",handler:this.closeForm}],pl(this.parent,this.evtHandlers,!0,this))}removeEventListener(){this.parent.isDestroyed||pl(this.parent,this.evtHandlers,!1)}destroy(){this.removeEventListener(),this.renderer.destroy()}}class Bp extends jf{constructor(e,t,s){super(e,t),this.parent=e,this.serviceLocator=t,this.renderer=s}closeEdit(){super.closeEdit()}addRecord(e,t){super.addRecord(e,t)}endEdit(){super.endEdit()}updateRow(e,t){super.updateRow(e,t)}deleteRecord(e,t){super.deleteRecord(e,t)}startEdit(e){super.startEdit(e)}}class bv{constructor(e,t,s){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=s,this.focus=t.getService("focus"),this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ll,handler:this.clickHandler},{event:rd,handler:this.dblClickHandler},{event:th,handler:this.onBeforeCellFocused},{event:sd,handler:this.onCellFocused},{event:ef,handler:this.dblClickHandler},{event:Ko,handler:this.keyDownHandler},{event:ja,handler:this.editNextValCell},{event:"closebatch",handler:this.closeForm},{event:Tr,handler:this.destroy}],pl(this.parent,this.evtHandlers,!0,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(Oo,this.dataBoundFunction),this.parent.addEventListener(Te,this.batchCancelFunction))}removeEventListener(){this.parent.isDestroyed||(pl(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Oo,this.dataBoundFunction),this.parent.removeEventListener(Te,this.batchCancelFunction))}batchCancel(){this.parent.focusModule.restoreFocus()}dataBound(){this.parent.notify(mh,{})}destroy(){this.removeEventListener()}clickHandler(e){Zi(e.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&(0,u.oq)(this.form,"td")!==(0,u.oq)(e.target,"td")&&(this.saveCell(),this.editNextValCell()),Zi(e.target,Cr)&&!this.parent.isEdit&&this.setCellIdx(e.target))}dblClickHandler(e){const t=Zi(e.target,Cr),s=Zi(e.target,Lr),n=s&&parseInt(s.getAttribute(xn),10),r=t&&parseInt(t.getAttribute(go),10);!(0,u.le)(t)&&!(0,u.le)(n)&&!isNaN(r)&&!t.parentElement.classList.contains(Nl)&&this.editCell(n,this.parent.getColumns()[r].field,this.isAddRow(n))}onBeforeCellFocused(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())}onCellFocused(e){const t=this.parent.getFrozenLeftCount(),s=this.parent.getFrozenRightColumnsCount(),n=this.parent.getContent().querySelector("."+Or),r=this.parent.getHeaderContent().querySelector("."+io),h=!(e.container.isContent&&e.container.isDataCell||this.parent.frozenRows&&e.container.isHeader);if(!e.byKey||h)return void(this.parent.isEdit&&h&&this.saveCell());let[m,T]=e.container.indexes;if(t&&(n.contains(e.element)||this.parent.frozenRows&&r.contains(e.element))&&(T+=t),s){const Y=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");(this.parent.getContent().querySelector(".e-frozen-right-content").contains(e.element)||this.parent.frozenRows&&Y.contains(e.element))&&(T+=t+this.parent.getMovableColumnsCount())}this.parent.frozenRows&&e.container.isContent&&(m+=this.parent.frozenRows);let V=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(V=V&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":const Y=this.parent.getColumns()[e.indexes[1]];Y&&!this.parent.isEdit&&this.editCell(e.indexes[0],Y.field),(V||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(m,T);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault();const se={cancel:!1,keyArgs:e.keyArgs};this.parent.notify("beforeFocusCellEdit",se),!se.cancel&&V&&this.editCell(m,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(m,T),this.focus.focus()}}isAddRow(e){return this.parent.getDataRows()[e].classList.contains("e-insertedrow")}editCellFromIndex(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[t].field,this.isAddRow(e))}closeEdit(){const e=this.parent,t=this.parent.getRowsObject(),s={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",s),s.cancel)return;e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();const n=Og(this.parent);for(let h=0;h<t.length;h++){let m=!1;const T=t[h].isDirty;tu(this.parent,(V,Y)=>{m=this.removeBatchElementChanges(Y[h],T),m&&Y.splice(h,1)},n),m&&h--}e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();let r={requestType:"batchCancel",rows:this.parent.getRowsObject()};e.notify(Te,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new Ta({isDataRow:!0,cells:[new na({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(mh,{}),this.parent.notify(Jh,{}),r={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(Te,r)}removeBatchElementChanges(e,t){const s=this.parent,n=new Wl(this.serviceLocator,null,this.parent);let r=!1;if(t){e.isDirty=t;const h=s.getRowElementByUID(e.uid);if(h&&(h.classList.contains("e-insertedrow")?((0,u.Od)(h),r=!0):(he(e,this.parent.getForeignKeyColumns(),e.data),delete e.changes,delete e.edit,e.isDirty=!1,(0,u.s1)(h,[],["e-hiddenrow","e-updatedtd"]),n.refresh(e,s.getColumns(),!1)),this.parent.aggregates.length>0)){const T=[];T.type="cancel",this.parent.notify(gl,T),this.parent.groupSettings.columns.length>0&&this.parent.notify(Lh,T)}}return r}removeHideAndSelection(e){if(e.classList.contains("e-hiddenrow")){e.removeAttribute("aria-selected");const t=[].slice.call(e.getElementsByClassName("e-selectionbackground"));for(let s=0;s<t.length;s++)(0,u.IV)([t[s]],["e-selectionbackground","e-active"])}(0,u.s1)(e,[],["e-hiddenrow","e-updatedtd"])}deleteRecord(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),this.parent.aggregates.length>0&&(this.parent.notify(gl,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(Lh,{}))}addRecord(e){this.bulkAddRow(e)}endEdit(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()}closeForm(){for(let e=0;e<Object.keys(this.originalCell).length;e++)for(let t=0;t<Object.keys(this.cloneCell).length;t++)Object.keys(this.originalCell)[e]===Object.keys(this.cloneCell)[t]&&(this.cloneCell[Object.keys(this.cloneCell)[t]].replaceWith(this.originalCell[Object.keys(this.originalCell)[e]]),this.originalCell[Object.keys(this.originalCell)[e]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[e]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}}validateFormObj(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()}batchSave(){const e=this.parent,t="deletedRecords";if(e.isCheckBoxSelection){const h=e.element.querySelector(".e-checkselectall").parentElement;h.classList.contains("e-checkbox-disabled")&&e.pageSettings.totalRecordsCount>e.currentViewData.length&&(0,u.IV)([h],["e-checkbox-disabled"])}if(this.saveCell(),e.isEdit||this.editNextValCell()||e.isEdit)return;const s=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&s[t].length&&this.parent.selectionSettings.persistSelection&&(s[t]=this.removeSelectedData,this.removeSelectedData=[]);const n={changedRecords:this.parent.getRowsObject().filter(h=>h.isDirty&&-1===["add","delete"].indexOf(h.edit)).map(h=>h.data)};e.trigger("beforeBatchSave",{batchChanges:s,cancel:!1},h=>{h.cancel||(e.showSpinner(),e.notify($u,{changes:s,original:n}))})}getBatchChanges(){const e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=this.parent.getRowsObject();for(const s of t)if(s.isDirty)switch(s.edit){case"add":e.addedRecords.push(s.changes);break;case"delete":e.deletedRecords.push(s.data);break;default:e.changedRecords.push(s.changes)}return e}removeRowObjectFromUID(e){const t=this.parent.getRowsObject();let s=0;for(let n=t.length;s<n&&t[s].uid!==e;s++);tu(this.parent,(n,r)=>{r.splice(s,1)},Og(this.parent))}addRowObject(e){const t=this.parent,s="Top"===t.editSettings.newRowPosition;tu(this.parent,(n,r)=>{const h=e.clone();h.cells=function kg(b,e,t){const s=b.getFrozenLeftCount(),n=b.getMovableColumnsCount(),r=b.getFrozenRightColumnsCount(),h=b.getFrozenMode(),m=b.isRowDragable()?1:0,T="Right"===h?s+n:s+n+m,V="Right"===h?s:s+m,Y="Right"===h?e.length-r-m:r?e.length-r:e.length;return t===Qo?e=e.slice(0,s?s+m:e.length):t===vo?e=e.slice(T,e.length):"movable"===t&&(e=e.slice(V,Y)),e}(t,h.cells,n),s?r.unshift(h):r.push(h)},Og(this.parent),!0)}bulkDelete(e,t){this.removeSelectedData=[];const s=this.parent;let n=s.selectedRowIndex,r=s.getSelectedRows();const h={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:n,rowData:t||s.getSelectedRecords()[0],cancel:!1};h.row=t?s.editModule.deleteRowUid?s.getRowElementByUID(s.editModule.deleteRowUid):s.getRows()[s.getCurrentViewRecords().indexOf(t)]:t?s.getRows()[n]:r[0],h.row&&s.trigger("beforeBatchDelete",h,m=>{if(!m.cancel){if(this.removeSelectedData=s.getSelectedRecords(),s.clearSelection(),m.row=m.row?m.row:t?s.getRows()[n]:r[0],this.parent.isFrozenGrid()){t&&(n=parseInt(m.row.getAttribute(xn),10),r=[],r.push(s.getRowByIndex(n)),r.push(s.getMovableRowByIndex(n)),s.getFrozenMode()===fn&&r.push(s.getFrozenRightRowByIndex(n)));for(let T=0;T<r.length;T++){const V=r[T].getAttribute("data-uid");if(r[T].classList.contains("e-insertedrow"))this.removeRowObjectFromUID(V),(0,u.Od)(r[T]);else{const Y=s.getRowObjectFromUID(V);Y.isDirty=!0,Y.edit="delete",(0,u.s1)(r[T],["e-hiddenrow","e-updatedtd"],[]),s.frozenRows&&n<s.frozenRows&&s.getMovableDataRows().length>=s.frozenRows&&(s.getMovableHeaderTbody().appendChild(s.getMovableRowByIndex(s.frozenRows-1)),s.getFrozenHeaderTbody().appendChild(s.getRowByIndex(s.frozenRows-1)),s.getFrozenMode()===fn&&s.getFrozenRightHeaderTbody().appendChild(s.getFrozenRightRowByIndex(s.frozenRows-1))),s.frozenRows&&n<s.frozenRows&&s.getDataRows().length>=s.frozenRows&&s.getHeaderTable().querySelector(vs).appendChild(s.getRowByIndex(s.frozenRows-1))}delete r[T]}}else if(this.parent.isFrozenGrid()||1!==r.length&&!t)for(let T=0;T<r.length;T++){const V=r[T].getAttribute("data-uid");if(r[T].classList.contains("e-insertedrow"))this.removeRowObjectFromUID(V),(0,u.Od)(r[T]);else{(0,u.s1)(r[T],["e-hiddenrow","e-updatedtd"],[]);const Y=s.getRowObjectFromUID(V);Y.isDirty=!0,Y.edit="delete",delete r[T]}}else{let T=m.row.getAttribute("data-uid");if(T=t&&this.parent.editModule.deleteRowUid?T=this.parent.editModule.deleteRowUid:T,m.row.classList.contains("e-insertedrow"))this.removeRowObjectFromUID(T),(0,u.Od)(m.row);else{const V=s.getRowObjectFromUID(T);V.isDirty=!0,V.edit="delete",(0,u.s1)(m.row,["e-hiddenrow","e-updatedtd"],[])}delete m.row}this.refreshRowIdx(),t&&(s.editModule.deleteRowUid=void 0,s.getSelectedRows().length&&(n=parseInt(s.getSelectedRows()[0].getAttribute(xn),10))),s.isCheckBoxSelection||s.selectRow(n),s.trigger(Je,m),s.notify(Je,{rows:this.parent.getRowsObject()}),s.notify(mh,{})}})}refreshRowIdx(){const t=this.parent.getAllDataRows(!0),s=function yv(b){return["Right"!==b.getFrozenMode()?b.getAllDataRows(!0):[],b.getAllMovableDataRows(!0),b.getAllFrozenRightDataRows(!0)]}(this.parent),n=Og(this.parent);for(let r=0,h=0,m=t.length;r<m;r++)t[r].classList.contains(Lr)&&!t[r].classList.contains("e-hiddenrow")?(tu(this.parent,(T,V,Y)=>{V[r].setAttribute(xn,h.toString()),Y[r].index=h},s,null,n),h++):tu(this.parent,(T,V,Y)=>{V[r].removeAttribute(xn),Y[r].index=-1},s,null,n)}getIndexFromData(e){return function Dd(b,e){for(let t=0,s=e.length;t<s;t++)if(e[t]===b)return t;return-1}(e,this.parent.getCurrentViewRecords())}bulkAddRow(e){const t=this.parent;if(!t.editSettings.allowAdding||(t.isEdit&&(this.saveCell(),this.parent.notify(ja,{})),t.isEdit))return;this.parent.element.classList.add("e-editing");const n={defaultData:e||this.getDefaultData(),primaryKey:t.getPrimaryKeyFieldNames(),cancel:!1};t.trigger("beforeBatchAdd",n,r=>{if(r.cancel)return;let h,m;this.isAdded=!0,t.clearSelection();const T=new Wl(this.serviceLocator,null,this.parent),Y=new oh(this.parent).generateRows([r.defaultData]);let ge,ke,se=T.render(Y[0],t.getColumns());for(let ai=0;ai<this.parent.groupSettings.columns.length;ai++)se.insertBefore(this.parent.createElement("td",{className:"e-indentcell"}),se.firstChild),Y[0].cells.unshift(new na({cellType:Ys.Indent}));let qe=t.getContentTable().querySelector(vs);if(se.classList.add("e-insertedrow"),qe.querySelector(".e-emptyrow")){const ai=qe.querySelector(".e-emptyrow");ai.parentNode.removeChild(ai),this.removeFrozenTbody()}t.isFrozenGrid()&&(m=se.cloneNode(!0),h=this.renderMovable(se,m),se="Right"===t.getFrozenMode()?m:se,this.renderFrozenAddRow(se,h,m)),qe=t.frozenRows&&"Top"===t.editSettings.newRowPosition?t.getHeaderTable().querySelector(vs):t.getContentTable().querySelector(vs),"Top"===this.parent.editSettings.newRowPosition?qe.insertBefore(se,qe.firstChild):qe.appendChild(se),(0,u.cn)([].slice.call(se.getElementsByClassName(Cr)),["e-updatedtd"]),Y[0].isDirty=!0,Y[0].changes=(0,u.l7)({},{},Y[0].data,!0),Y[0].edit="add",this.addRowObject(Y[0]),this.refreshRowIdx(),this.focus.forgetPrevious(),t.notify(me,{rows:this.parent.getRowsObject(),args:{isFrozen:this.parent.isFrozenGrid()}});const mt=this.getBatchChanges(),Vt=this.getBottomIndex();t.selectRow("Top"===this.parent.editSettings.newRowPosition?0:Vt),e||(ke=this.findNextEditableCell(0,!0),ge=t.getColumns()[ke],this.editCell("Top"===this.parent.editSettings.newRowPosition?0:Vt,ge.field,!0)),this.parent.aggregates.length>0&&(e||mt[Ua].length)&&this.parent.notify(gl,{}),t.trigger(me,{defaultData:r.defaultData,row:se,columnObject:ge,columnIndex:ke,primaryKey:r.primaryKey,cell:se.cells[ke]}),t.isFrozenGrid()&&ul(h.querySelector("td:not(.e-hide)"),se.querySelector("td:not(.e-hide)"))})}renderFrozenAddRow(e,t,s){const n=this.parent,r=Ff(this.parent),h=Om(this.parent);"Top"===n.editSettings.newRowPosition?r.insertBefore(t,r.firstChild):r.appendChild(t),(0,u.cn)([].slice.call(t.getElementsByClassName(Cr)),["e-updatedtd"]),h&&s&&("Top"===n.editSettings.newRowPosition?h.insertBefore(s,h.firstChild):h.appendChild(s),(0,u.cn)([].slice.call(s.getElementsByClassName(Cr)),["e-updatedtd"]),ul(s.querySelector("td:not(.e-hide)"),e.querySelector("td:not(.e-hide)"))),"auto"===n.height&&n.notify(Bh,{})}removeFrozenTbody(){const e=this.parent;if(e.isFrozenGrid()){const t=e.getContent().querySelector("."+Or).querySelector(vs);if(t.firstElementChild.parentNode.removeChild(t.firstElementChild),e.getFrozenMode()===fn){const s=e.getContent().querySelector(".e-frozen-right-content").querySelector(vs);s.firstElementChild.parentNode.removeChild(s.firstElementChild)}}}renderMovable(e,t){const s=e.cloneNode(!0),n=this.parent.getMovableColumnsCount(),r=this.parent.getFrozenLeftCount(),h=this.parent.getFrozenRightColumnsCount();return Mm(e,0,r),Mm(s,r,h?s.children.length-h:s.children.length),Mm(t,r+n,t.children.length),s}findNextEditableCell(e,t,s){const n=this.parent.getColumns(),r=n.length;let h;for(let m=e;m<r;m++){if(h=!!s&&(0,u.le)(n[m].validationRules),!t&&this.checkNPCell(n[m]))return m;if(t&&!n[m].template&&n[m].visible&&n[m].allowEditing&&(!n[m].isIdentity||!n[m].isPrimaryKey)&&!h)return m}return-1}checkNPCell(e){return!e.template&&e.visible&&!e.isPrimaryKey&&!e.isIdentity&&e.allowEditing}getDefaultData(){const e=this.parent,t={},s={number:0,string:null,boolean:!1,date:null,datetime:null};for(const n of e.columnModel)n.field&&(0,u.sO)(n.field,Object.keys(n).indexOf("defaultValue")>=0?n.defaultValue:s[n.type],t);return t}setCellIdx(e){let t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)}editCell(e,t,s){const n=this.parent,r=n.getColumnByField(t);this.index=e,this.field=t,this.isAdd=s;const h=n.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e);n.editSettings.allowEditing&&(!h&&r.allowEditing?this.editCellExtend(e,t,s):h&&(this.editNext=!0,this.saveCell()))}editCellExtend(e,t,s){const n=this.parent,r=n.getColumnByField(t),h=n.getPrimaryKeyFieldNames();if(n.isEdit)return;let m,T,V=(0,u.l7)({},{},this.getDataByIndex(e),!0);if("movable"===r.getFreezeTableName()||r.getFreezeTableName()===vo?(m="movable"===r.getFreezeTableName()?n.getMovableDataRows()[e]:n.getFrozenRightDataRows()[e],T=this.parent.getRowObjectFromUID(m.getAttribute("data-uid")),V=T.changes?(0,u.l7)({},{},T.changes,!0):V):(m=n.getDataRows()[e],V=(0,u.l7)({},{},this.getDataByIndex(e),!0)),h[0]===r.field&&!m.classList.contains("e-insertedrow")||r.columns||r.isPrimaryKey&&r.isIdentity)return void(this.parent.isLastCellPrimaryKey=!0);this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");const Y=n.getRowObjectFromUID(m.getAttribute("data-uid")),se=[].slice.apply(m.cells),ge={columnName:r.field,isForeignKey:!(0,u.le)(r.foreignKeyValue),primaryKey:h,rowData:V,validationRules:(0,u.l7)({},r.validationRules?r.validationRules:{}),value:mi(r.field,V),type:s?"add":"edit",cancel:!1,foreignKeyData:Y&&Y.foreignKeyData};ge.cell=se[this.getColIndex(se,this.getCellIdx(r.uid))],ge.row=m,ge.columnObject=r,ge.cell&&n.trigger("cellEdit",ge,ke=>{ke.cancel||(ke.cell=ke.cell?ke.cell:se[this.getColIndex(se,this.getCellIdx(r.uid))],ke.row=ke.row?ke.row:m,ke.columnObject=ke.columnObject?ke.columnObject:r,ke.columnObject.index=(0,u.le)(ke.columnObject.index)?0:ke.columnObject.index,this.cellDetails={rowData:V,column:r,value:ke.value,isForeignKey:ke.isForeignKey,rowIndex:e,cellIndex:parseInt(ke.cell.getAttribute(go),10),foreignKeyData:ke.foreignKeyData},ke.cell.classList.contains("e-updatedtd")&&(this.isColored=!0,ke.cell.classList.remove("e-updatedtd")),n.isEdit=!0,n.clearSelection(),(!n.isCheckBoxSelection||!n.isPersistSelection)&&n.selectRow(this.cellDetails.rowIndex,!0),this.renderer.update(ke),this.parent.notify("batcheditform-rendered",ke),this.form=(0,u.Ys)("#"+n.element.id+"EditForm",n.element),n.editModule.applyFormValidation([r]),this.parent.element.querySelector(".e-gridpopup").style.display="none")})}updateCell(e,t,s){const n=this.parent,r=n.getColumnByField(t),h=n.getColumnIndexByField(t);if(r&&!r.isPrimaryKey&&r.allowEditing){const m=km(this.parent,r,e,h),T="movable"===r.getFreezeTableName()?this.parent.getMovableRowsObject()[e]:r.getFreezeTableName()===vo?n.getFrozenRightRowsObject()[e]:n.getRowObjectFromUID(m.parentElement.getAttribute("data-uid"));this.refreshTD(m,r,T,s),this.parent.trigger(wo,{cell:this.newReactTd||m,column:r,data:T.changes})}}setChanges(e,t,s){let n;if(this.parent.isFrozenGrid()){const r=this.parent.getRowElementByUID(e.uid),h=parseInt(r.getAttribute(xn),10);n=this.parent.getRowsObject()[h],n.changes||(n.changes=(0,u.l7)({},{},e.data,!0)),(0,u.le)(t)||(0,u.sO)(t,s,n.changes);const m=this.parent.getMovableRowsObject()[h];if(m.changes=(0,u.l7)({},{},n.changes,!0),e.data[t]!==s&&(m.isDirty=!0,n.isDirty=!0),this.parent.getFrozenMode()===fn){const T=this.parent.getFrozenRightRowsObject()[h];T.changes=(0,u.l7)({},{},n.changes,!0),e.data[t]!==s&&(T.isDirty=!0)}}else if(e.changes||(e.changes=(0,u.l7)({},{},e.data,!0)),(0,u.le)(t)||bt.j4.setValue(t,s,e.changes),e.data[t]!==s){const r=this.parent.getColumnByField(t).type;"date"===r||"datetime"===r?new Date(e.data[t]).toString()!==new Date(s).toString()&&(e.isDirty=!0):e.isDirty=!0}}updateRow(e,t){const s=Object.keys(t);for(const n of s)this.updateCell(e,n,t[n])}getCellIdx(e){let t=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return(!(0,u.le)(this.parent.detailTemplate)||!(0,u.le)(this.parent.childGrid))&&t++,this.parent.isRowDragable()&&t++,t}refreshTD(e,t,s,n){const r=new Uo(this.parent,this.serviceLocator);let h;n="number"!==t.type||(0,u.le)(n)?n:parseFloat(n),this.setChanges(s,t.field,n);let T,V,m=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();m=m&&this.parent.isRowDragable()?m+1:m,he(s,this.parent.getForeignKeyColumns(),s.changes),h=m&&"movable"===t.getFreezeTableName()&&this.parent.getColumns().length===s.cells.length?s.cells.slice(m,s.cells.length):s.cells,this.parent.isReact&&(T=e.parentElement,V=e.cellIndex);let Y=0;m&&(Y="movable"===t.getFreezeTableName()&&"Right"!==this.parent.getFrozenMode()?m:t.getFreezeTableName()===vo?this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount():Y),r.refreshTD(e,h[this.getCellIdx(t.uid)-Y],s.changes,{index:this.getCellIdx(t.uid)}),this.parent.isReact?(this.newReactTd=T.cells[V],T.cells[V].classList.add("e-updatedtd")):e.classList.add("e-updatedtd"),e.classList.add("e-updatedtd"),this.parent.notify(mh,{})}getColIndex(e,t){let s=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(s=this.parent.groupSettings.columns.length),(!(0,u.le)(this.parent.detailTemplate)||!(0,u.le)(this.parent.childGrid))&&s++,this.parent.isRowDragable()&&s++;for(let n=0;n<e.length;n++)if(parseInt(e[n].getAttribute(go),10)===t-s)return n;return-1}editNextValCell(){const e=this.parent,t=this.getBottomIndex();if(this.isAdded&&!e.isEdit){for(let s=this.cellDetails.cellIndex;s<e.getColumns().length;s++){if(e.isEdit)return;const n=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),r=e.getColumns()[n];if(r){if("Bottom"===this.parent.editSettings.newRowPosition)this.editCell(t,r.field,!0);else{const h={index:0,column:r};this.parent.notify("next-cell-index",h),this.editCell(h.index,r.field,!0)}this.saveCell()}}e.isEdit||(this.isAdded=!1)}}escapeCellEdit(){const e=this.generateCellArgs();e.value=e.previousValue,this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)}generateCellArgs(){const e=this.parent;this.parent.element.classList.remove("e-editing");const t=this.cellDetails.column,s={};s[t.field]=mi(t.field,this.cellDetails.rowData);let n=e.editModule.getCurrentEditedData(this.form,s);const r=(0,u.l7)({},n);n=(0,u.l7)({},n,this.cellDetails.rowData);const h=mi(t.field,r);!(0,u.le)(t.field)&&!(0,u.o8)(h)&&(0,u.sO)(t.field,h,n);const m={columnName:t.field,value:mi(t.field,n),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return m.cell=this.form.parentElement,m.columnObject=t,m}saveCell(e){if(this.preventSaveCell||!this.form)return;const t=this.parent;if(!e&&(!t.isEdit||this.validateFormObj()))return;this.preventSaveCell=!0;const s=this.generateCellArgs(),n=s.cell.parentElement,r=s.column;e?this.successCallBack(s,n,r)(s):(t.trigger("cellSave",s,this.successCallBack(s,n,r)),t.notify("batchedit-form",{formObj:this.form}))}successCallBack(e,t,s,n){return r=>{const h=this.parent;if(r.cell=r.cell?r.cell:this.form.parentElement,r.columnObject=r.columnObject?r.columnObject:s,r.columnObject.index=(0,u.le)(r.columnObject.index)?0:r.columnObject.index,r.cancel){if(this.preventSaveCell=!1,this.editNext){if(this.editNext=!1,this.cellDetails.rowIndex===this.index&&this.cellDetails.column.field===this.field)return;this.editCellExtend(this.index,this.field,this.isAdd)}return}h.editModule.destroyWidgets([s]),h.isEdit=!1,h.editModule.destroyForm(),this.parent.notify(Jh,{});let m=Zi(r.cell,Or)||Zi(r.cell,io)?h.getRowObjectFromUID(t.getAttribute("data-uid"),!0):h.getRowObjectFromUID(t.getAttribute("data-uid"));if(h.getFrozenMode()===fn&&(Zi(r.cell,"e-frozen-right-header")||Zi(r.cell,"e-frozen-right-content"))&&(m=h.getRowObjectFromUID(t.getAttribute("data-uid"),!1,!0)),this.refreshTD(r.cell,s,m,r.value),this.parent.isReact&&(r.cell=this.newReactTd),(0,u.IV)([t],[Nl,"e-batchrow"]),(0,u.IV)([r.cell],["e-editedbatchcell","e-boolcell"]),(!(0,u.le)(r.value)&&r.value.toString()===((0,u.le)(this.cellDetails.value)?"":this.cellDetails.value).toString()&&!this.isColored||(0,u.le)(r.value)&&(0,u.le)(m.data[s.field])&&(0,u.le)(this.cellDetails.value)&&!r.cell.parentElement.classList.contains("e-insertedrow"))&&r.cell.classList.remove("e-updatedtd"),(0,u.le)(n)&&h.trigger("cellSaved",r),h.notify(mh,{}),this.isColored=!1,this.parent.aggregates.length>0&&(this.parent.notify(gl,{}),this.parent.groupSettings.columns.length>0&&!this.isAddRow(this.cellDetails.rowIndex)&&this.parent.notify(Lh,{})),this.preventSaveCell=!1,this.editNext){if(this.editNext=!1,this.cellDetails.rowIndex===this.index&&this.cellDetails.column.field===this.field)return;const T=h.getColumnByField(this.field);T&&T.allowEditing&&this.editCellExtend(this.index,this.field,this.isAdd)}n&&h.notify(Hh,{})}}getDataByIndex(e){const t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[e].getAttribute("data-uid"));return t.changes?t.changes:t.data}keyDownHandler(e){if(("tab"===e.action||"shiftTab"===e.action)&&this.parent.isEdit){const t=this.parent,s=this.getBottomIndex(),n=Zi(e.target,Cr);if(n){const r=n.querySelector(".e-field");if(r){const h=this.parent.getVisibleColumns();h["tab"===e.action?h.length-1:0].field===r.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===s&&"tab"===e.action?"Top"===t.editSettings.newRowPosition?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}}addCancelWhilePaging(){this.validateFormObj()&&(this.parent.notify(Qu,{}),this.parent.isEdit=!1,this.isColored=!1)}getBottomIndex(){const e=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+e[Ua].length-e[ac].length-1}}class zg extends jf{constructor(e,t,s){super(e,t),this.parent=e,this.serviceLocator=t,this.renderer=s}closeEdit(){super.closeEdit()}addRecord(e,t){super.addRecord(e,t)}endEdit(){super.endEdit()}updateRow(e,t){super.updateRow(e,t)}deleteRecord(e,t){super.deleteRecord(e,t)}startEdit(e){super.startEdit(e)}}class ey extends Hf{write(e){"datepickeredit"===e.column.editType?this.obj=new Ne.Mt((0,u.l7)(jg(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new Ne.xZ((0,u.l7)(jg(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params))),this.obj.appendTo(e.element)}}function jg(b,e,t){const s="Dialog"!==e,n=Ni(b.column.format,b.column.type);let r=mi(b.column.field,b.rowData);return r=r?new Date(r):null,{floatLabelType:s?"Never":"Always",value:r,format:n,placeholder:s?"":b.column.headerText,enableRtl:t,enabled:Ka(b.column,b.requestType,b.element)}}class Zm{constructor(e){this.parent=e}read(e,t){return t}write(){}destroy(){}}let Km=(()=>{class b{constructor(t,s){this.editType={Inline:Bp,Normal:Bp,Batch:bv,Dialog:zg},this.parent=t,this.serviceLocator=s,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}updateColTypeObj(){const t=this.parent.columnModel;for(let s=0;s<t.length;s++)t[s].edit=(0,u.l7)(this.parent.editSettings.template||t[s].editTemplate?new b.editCellType.templateedit(this.parent):new b.editCellType[t[s].editType&&b.editCellType[t[s].editType]?t[s].editType:"defaultedit"](this.parent,this.serviceLocator),t[s].edit||{});this.parent.log("primary_column_missing")}getModuleName(){return"edit"}onPropertyChanged(t){if(t.module!==this.getModuleName())return;const s=this.parent;for(const n of Object.keys(t.properties))switch(n){case"allowAdding":case"allowDeleting":case"allowEditing":(s.editSettings.allowAdding||s.editSettings.allowEditing||s.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),s.isEdit=!1,s.refresh()}}updateEditObj(){this.editModule&&this.editModule.destroy(),this.renderer=new J0(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)}initialEnd(){this.updateColTypeObj()}startEdit(t){const s=this.parent;if(s.editSettings.allowEditing&&!s.isEdit&&"Batch"!==s.editSettings.mode){if(this.parent.element.classList.add("e-editing"),s.getSelectedRows().length)t||(t=s.getSelectedRows()[0]);else if(!t)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=t.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==t.style.display&&(this.editModule.startEdit(t),this.refreshToolbar(),s.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}}checkLastRow(t,s){const n=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&s&&"add"===s.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?(0,u.cn)([].slice.call(t.getElementsByClassName(Cr)),"e-lastrowadded"):n&&t&&t.classList&&(0,u.cn)([].slice.call(t.getElementsByClassName(Cr)),"e-lastrowcell")}closeEdit(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(yf,{}))}refreshToolbar(){this.parent.notify(mh,{})}addRecord(t,s){if(!this.parent.editSettings.allowAdding)return;const n={startEdit:!0};t||this.parent.notify("virtual-scroll-add-action-begin",n),n.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(t,s),this.refreshToolbar(),this.parent.notify("start-add",{}))}deleteRecord(t,s){const n=this.parent;if(n.editSettings.allowDeleting){if(!s&&!n.getSelectedRecords().length&&(0,u.le)(n.commandDelIndex))return void this.showDialog("DeleteOperationAlert",this.alertDObj);if(n.editSettings.showDeleteConfirmDialog)return void this.showDialog("ConfirmDelete",this.dialogObj);this.editModule.deleteRecord(t,s)}}deleteRow(t){this.deleteRowUid=t.getAttribute("data-uid");const s=this.parent.getRowObjectFromUID(this.deleteRowUid);(0,u.le)(s)||this.deleteRecord(null,s.data)}endEdit(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&((0,u.le)(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(ja,{}),(0,u.le)(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()}updateCell(t,s,n){this.editModule.updateCell(t,s,n)}updateRow(t,s){this.editModule.updateRow(t,s)}batchCancel(){this.closeEdit()}batchSave(){this.endEdit()}editCell(t,s){this.editModule.editCell(t,s)}editFormValidate(){const t=!this.formObj||this.formObj.validate(),s=!this.mFormObj||this.mFormObj.validate(),n=!this.frFormObj||this.frFormObj.validate();return t&&s&&n}getBatchChanges(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}}getCurrentEditCellData(){const t=this.getCurrentEditedData(this.formObj.element,{});return t[Object.keys(t)[0]]}saveCell(){this.editModule.saveCell()}endEditing(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()}showDialog(t,s){s.content="<div>"+this.l10n.getConstant(t)+"</div>",s.dataBind(),s.show()}getValueFromType(t,s){let n=s;switch(t.type){case"number":n=isNaN(parseFloat(s))?null:parseFloat(s);break;case"boolean":"booleanedit"!==t.editType&&(n=s===this.l10n.getConstant("True")||!0===s);break;case"date":case"datetime":"datepickeredit"!==t.editType&&"datetimepickeredit"!==t.editType&&s&&s.length?n=new Date(s):""===s&&(n=null)}return n}destroyToolTip(){const t=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));for(const s of t)(0,u.Od)(s);this.parent.getContent().firstElementChild.style.position="relative"}createConfirmDlg(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")}createAlertDlg(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-flat",isPrimary:!0}}],"EditAlert")}alertClick(){this.alertDObj.hide()}dlgWidget(t,s){const n=this.parent.createElement("div",{id:this.parent.element.id+s});this.parent.element.appendChild(n);const r={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"}};r.buttons=t;const h=new Rt.Vq(r);return h.isStringTemplate=!0,h.appendTo(n),h}dlgCancel(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide()}dlgOk(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.executeAction()}this.dlgCancel()}destroyEditComponents(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()}addEventListener(){this.parent.isDestroyed||(this.eventDetails=[{event:pe,handler:this.onPropertyChanged},{event:it,handler:this.initialEnd},{event:Ko,handler:this.keyPressHandler},{event:sh,handler:this.updateColTypeObj},{event:Jh,handler:this.destroyToolTip},{event:Ca,handler:this.preventBatch},{event:Qu,handler:this.destroyForm},{event:Tr,handler:this.destroyEditComponents}],pl(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(lr,this.actionBeginFunction),this.parent.addEventListener(vn,this.actionCompleteFunction))}removeEventListener(){this.parent.isDestroyed||(pl(this.parent,this.eventDetails,!1),this.parent.removeEventListener(vn,this.actionCompleteFunction),this.parent.removeEventListener(lr,this.actionBeginFunction))}actionComplete(t){["add","beginEdit","save","delete","cancel"].indexOf(t.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===t.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()}getCurrentEditedData(t,s){const n=this.parent;if(n.editSettings.template){const m=[].slice.call(t.elements);for(let T=0;T<m.length;T++)if((m[T].hasAttribute("name")&&"e-multi-hidden"!==m[T].className||m[T].classList.contains("e-multiselect"))&&("hidden"!==m[T].type||!Zi(m[T],"e-switch-wrapper")&&!Zi(m[T],"e-checkbox-wrapper"))){const V=m[T].hasAttribute("name")?mc(m[T].getAttribute("name")):mc(m[T].getAttribute("id")),Y=n.getColumnByField(V)||{field:V,type:m[T].getAttribute("type")};let se;"checkbox"===Y.type||"boolean"===Y.type?se=m[T].checked:m[T].value?(se=m[T].value,m[T].ej2_instances&&m[T].ej2_instances.length&&!(0,u.le)(m[T].ej2_instances[0].value)&&(m[T].blur(),se=m[T].ej2_instances[0].value)):m[T].ej2_instances&&(se=m[T].ej2_instances[0].value),Y.edit&&"string"==typeof Y.edit.read?se=(0,u.NA)(Y.edit.read,window)(m[T],se):Y.edit&&Y.edit.read&&(se=Y.edit.read(m[T],se)),se=n.editModule.getValueFromType(Y,se),"radio"===m[T].type?m[T].checked&&bt.j4.setValue(Y.field,se,s):bt.j4.setValue(Y.field,se,s)}return s}const r=n.columnModel.filter(m=>m.editTemplate);for(let m=0;m<r.length;m++)if(t[Il(r[m].field)]){let T=[].slice.call(t[Il(r[m].field)]);T=T.length?T:[t[Il(r[m].field)]];let V=T.filter(Y=>!(0,u.le)(Y.ej2_instances));0===V.length&&(V=T.filter(Y=>Y.hasAttribute("name")));for(let Y=0;Y<V.length;Y++){const se=this.getValue(r[m],V[Y],s);bt.j4.setValue(r[m].field,se,s)}}const h=[].slice.call(t.getElementsByClassName("e-field"));for(let m=0,T=h.length;m<T;m++){const V=n.getColumnByUid(h[m].getAttribute("e-mappinguid"));if(V&&V.field){const Y=this.getValue(V,h[m],s);bt.j4.setValue(V.field,Y,s)}}return s}getValue(t,s,n){let r=s.ej2_instances?s.ej2_instances[0].value:s.value;const h=this.parent;let m=t.edit.read;return("checkbox"===t.type||"boolean"===t.type)&&(r=s.checked),"string"==typeof m?(m=(0,u.NA)(m,window),r=h.editModule.getValueFromType(t,m(s,r))):r=h.editModule.getValueFromType(t,t.edit.read(s,r)),(0,u.le)(n[t.field])&&""===r&&(r=n[t.field]),r}onActionBegin(t){if("columnstate"===t.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{const s=this.parent.element.querySelector("."+Nl),n=this.parent.element.querySelector("."+ra);if(s&&this.parent.frozenRows&&"virtualscroll"===t.requestType&&parseInt(Zi(s,Lr).getAttribute(xn),10)<this.parent.frozenRows)return;const h=-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll","virtualscroll"].indexOf(t.requestType),m=this.parent.enableVirtualization&&this.formObj&&!this.formObj.isDestroyed&&(s||n||"cancel"===t.requestType)&&h;(!this.parent.enableVirtualization&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&h&&!t.cancel||m)&&(this.destroyWidgets(),this.destroyForm())}}destroyWidgets(t){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(t=t||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(r=>!(0,u.le)(r.editTemplate))&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(const r of t){let h=r.edit.destroy;r.edit.destroy&&("string"==typeof h?(h=(0,u.NA)(h,window),h()):r.edit.destroy())}const n=[].slice.call(this.formObj.element.elements);for(let r=0;r<n.length;r++)n[r].hasAttribute("name")&&n[r].ej2_instances&&n[r].ej2_instances.length&&!n[r].ej2_instances[0].isDestroyed&&n[r].ej2_instances[0].destroy()}destroyForm(){this.destroyToolTip();const t=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj];for(let s=0;s<t.length;s++)t[s]&&t[s].element&&!t[s].isDestroyed&&t[s].destroy();this.destroyToolTip()}destroy(){const t=this.parent.element;if(!t)return;const s=!(!t.querySelector("."+rl)||!t.querySelector("."+ll));s&&this.destroyForm(),this.removeEventListener();let n=this.dialogObj.element;n.childElementCount>0&&(this.dialogObj.destroy(),(0,u.Od)(n)),n=this.alertDObj.element,n.childElementCount>0&&(this.alertDObj.destroy(),(0,u.Od)(n)),s&&this.editModule&&this.editModule.destroy()}keyPressHandler(t){switch(t.action){case"insert":this.addRecord();break;case"delete":("INPUT"!==t.target.tagName||t.target.classList.contains("e-checkselect"))&&!document.querySelector(".e-popup-open")&&this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":!Zi(t.target,"e-unboundcelldiv")&&"Batch"!==this.parent.editSettings.mode&&(Zi(t.target,ll)||this.parent.frozenRows&&Zi(t.target,Lo))&&!document.getElementsByClassName("e-popup-open").length&&(t.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.closeEdit())}}preventBatch(t){this.preventObj=t,this.showDialog("BatchSaveLostChanges",this.dialogObj)}executeAction(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)}applyFormValidation(t){const s=this.parent,n=s.isFrozenGrid(),r="Normal"===this.parent.editSettings.mode,h="Right"===this.parent.getFrozenMode()&&r?1:0,m="Dialog"!==this.parent.editSettings.mode?s.element.getElementsByClassName("e-gridform")[h]:(0,u.Ys)("#"+s.element.id+"_dialogEdit_wrapper .e-gridform",document),T="Right"===this.parent.getFrozenMode()&&r?0:1,V=s.element.getElementsByClassName("e-gridform")[T];let Y={};const se={},ge={};t=t||s.getColumns();for(let ke=0;ke<t.length;ke++)!t[ke].visible&&("Dialog"!==s.editSettings.mode||-1===s.groupSettings.columns.indexOf(t[ke].field)&&"Dialog"===s.editSettings.mode)||t[ke].validationRules&&Yc(t[ke],T,Y,se,ge,t.length);if(n&&"Dialog"!==this.parent.editSettings.mode){if(this.parent.editModule.mFormObj=this.createFormObj(V,se),this.parent.getFrozenMode()===fn){const ke=s.element.getElementsByClassName("e-gridform")[2];this.parent.editModule.frFormObj=this.createFormObj(ke,ge)}}else Y=(0,u.l7)(Y,se,ge);this.parent.editModule.formObj=this.createFormObj(m,Y)}createFormObj(t,s){return new J.Tl(t,{rules:s,locale:this.parent.locale,validationComplete:n=>{this.validationComplete(n)},customPlacement:(n,r)=>{const h=n.getAttribute("e-mappinguid"),m={column:this.parent.getColumnByUid(h),error:r,inputElement:n,value:n.value};this.valErrorPlacement(n,r),this.parent.notify("validation-custom-placement",m)}})}valErrorPlacement(t,s){if(this.parent.isEdit){const n=s.getAttribute("for"),r=this.getElemTable(t).querySelector("#"+n+"_Error");r?r.querySelector(".e-tip-content").innerHTML=s.outerHTML:this.createTooltip(t,s,n,"")}}getElemTable(t){let s;const n=this.parent;let r;if("Dialog"!==n.editSettings.mode){s=n.frozenRows&&n.frozenRows>(parseInt((0,u.oq)(t,"."+Lr).getAttribute(xn),10)||0);const h=t.name;let m;h&&(m=Fm(this.parent,mc(h))),m&&n.isFrozenGrid()?"frozen-left"===m.getFreezeTableName()?r=s?n.getFrozenVirtualHeader().querySelector("table"):n.getFrozenVirtualContent().querySelector("table"):"frozen-right"===m.getFreezeTableName()?r=s?n.getFrozenRightHeader().querySelector("table"):n.getFrozenRightContent().querySelector("table"):"movable"===m.getFreezeTableName()&&(r=s?n.getMovableVirtualHeader().querySelector("table"):n.getMovableVirtualContent().querySelector("table")):r=s?n.getHeaderTable():n.getContentTable()}else r=(0,u.Ys)("#"+n.element.id+"_dialogEdit_wrapper",document);return r}resetElemPosition(t,s){const n=Zi(s.element,Cr);if(n){const r=n.getBoundingClientRect().right,h=t.getBoundingClientRect().right;h>r&&(t.style.left=t.offsetLeft-(h-r)+"px")}}validationComplete(t){if(this.parent.isEdit){const s=this.getElemTable(t.element).querySelector("#"+t.inputName+"_Error");s&&("failure"===t.status?(s.style.display="",this.resetElemPosition(s,t)):s.style.display="none")}}createTooltip(t,s,n,r){const h=this.parent.getColumnByField(n);let m=this.parent.getFrozenMode()===fn&&"Normal"===this.parent.editSettings.mode&&h.getFreezeTableName()===vo?this.frFormObj.element:this.formObj.element;const T=Zi(t,"e-virtual-validation");T&&(m=this.virtualFormObj.element);let V=this.parent.getContent().firstElementChild;const Y=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();Y&&(V=this.parent.getMovableVirtualContent());const se=V.scrollHeight>V.clientHeight||V.scrollWidth>V.clientWidth,ge="Dialog"!==this.parent.editSettings.mode,ke=(0,u.oq)(t,"."+Cr),qe=(0,u.oq)(t,"."+Lr),mt=this.parent.getContent().querySelector("."+ga);let Vt,ai,Qt=!1,ki=!1;const Qi=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,fs=[].slice.call(mt?this.parent.getFrozenVirtualContent().getElementsByClassName(Lr):this.parent.getContent().getElementsByClassName(Lr));if("Batch"===this.parent.editSettings.mode&&Qi>1&&fs.length>=Qi&&fs[fs.length-1].getAttribute(xn)===qe.getAttribute(xn)&&(ki=!0),ge){if(this.parent.frozenRows){const bl=Y?this.parent.getFrozenVirtualHeader().querySelector(vs).children:this.parent.getHeaderTable().querySelector(vs).children;Vt=bl.length>(parseInt(qe.getAttribute(xn),10)||0),Qt=Vt&&parseInt(qe.getAttribute(xn),10)===bl.length-1}(Qt||Qi>1&&fs.length>=Qi&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||ke.classList.contains("e-lastrowcell")&&!qe.classList.contains(ra))||ki)&&(ai=!0)}const ps=ge?Vt?this.parent.getHeaderTable():this.parent.getContentTable():(0,u.Ys)("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),Nn=ps.getBoundingClientRect(),fr=ge?this.parent.element.getBoundingClientRect().left:Nn.left,rr=(0,u.oq)(t,"td"),xr=rr?rr.getBoundingClientRect():t.parentElement.getBoundingClientRect(),nn=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:n+"_Error",styles:"display:"+r+";top:"+((Vt?xr.top+xr.height:xr.bottom-Nn.top-(Y?mt.scrollTop:0))+ps.scrollTop+9)+"px;left:"+(xr.left-fr+ps.scrollLeft+xr.width/2)+"px;max-width:"+xr.width+"px;text-align:center;"});ge&&Nn.left<fr&&(nn.style.left=parseInt(nn.style.left,10)-Nn.left+fr+"px");const Xo=this.parent.createElement("div",{className:"e-tip-content"});let zo;Xo.appendChild(s),ai?(zo=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"}),zo.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),zo.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):(zo=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"}),zo.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),zo.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),nn.appendChild(Xo),nn.appendChild(zo),T||!Y&&!this.parent.frozenRows||"Dialog"===this.parent.editSettings.mode?T?this.virtualFormObj.element.appendChild(nn):this.formObj.element.appendChild(nn):((0,u.oq)(t,"Normal"===this.parent.editSettings.mode?".e-editcell":"."+yo).style.position="relative",nn.style.position="absolute","Batch"===this.parent.editSettings.mode||(0,u.oq)(t,"."+ga)||(0,u.oq)(t,"."+Wa)||this.parent.frozenRows&&!Y?m.appendChild(nn):this.mFormObj.element.appendChild(nn)),!ai&&ge&&V.getBoundingClientRect().bottom<xr.bottom+xr.height&&(V.scrollTop=V.scrollTop+nn.offsetHeight+zo.scrollHeight);const fl=parseInt(document.defaultView.getComputedStyle(nn,null).getPropertyValue("font-size"),10);if(nn.getBoundingClientRect().width<xr.width&&nn.querySelector("label").getBoundingClientRect().height/(1.2*fl)>=2&&(nn.style.width=nn.style.maxWidth),nn.style.left=(Y||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode?rr.offsetLeft+(rr.offsetWidth/2-nn.offsetWidth/2)+"px":parseInt(nn.style.left,10)-nn.offsetWidth/2+"px",ge&&!se&&!this.parent.allowPaging||Y||this.parent.frozenRows){V.style.position="static";const bl=(0,Rt.Or)(rr,nn);nn.style.top=bl.top+xr.height+9+"px"}if(ai){if(!se||Y||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)nn.style.bottom=xr.height+9+"px";else{const bl=V.scrollWidth>V.offsetWidth?gc():0;nn.style.bottom=this.parent.height-V.querySelector("table").offsetHeight-bl+xr.height+9+"px"}if(fs.length<Qi&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){const yl=(this.parent.frozenRows?this.parent.frozenRows+(fs.length-1):fs.length-1)*this.parent.getRowHeight(),ya=this.parent.getContent().clientHeight-yl;nn.style.bottom=ya+9+"px"}nn.style.top=null}}checkColumnIsGrouped(t){return!(t.visible||this.parent.groupSettings.columns.indexOf(t.field)>-1)}static AddEditors(t){b.editCellType=(0,u.l7)(b.editCellType,t)}}return b.editCellType={dropdownedit:Q0,numericedit:X0,datepickeredit:ey,datetimepickeredit:ey,booleanedit:Hg,defaultedit:zf,templateedit:Zm},b})();class $c{constructor(e,t){this.hideColumnInclude=!1,this.foreignKeyData={},this.parent=e,!e.parentDetails&&t&&(this.foreignKeyData=t)}static getQuery(e,t){const s=t.generateQuery(!0).requiresCount();return t.isRemote()&&(e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length?s.lazyLoad=[]:s.take(e.pageSettings.totalRecordsCount)),s}getFData(e,t){return He(t,{},e,this.foreignKeyData[t.field])[0]}getGridRowModel(e,t,s,n=0){const r=[],h=t.length;if(h){for(let m=0;m<h;m++,n++){const T={isExpand:!1};T.data=t[m],T.index=n,s.childGrid&&("All"===s.hierarchyPrintMode?T.isExpand=!0:"Expanded"===s.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[n]&&(T.isExpand=s.expandedRows[n].isExpand));const V=new Ta(T);V.cells=this.generateCells(e,s),r.push(V)}this.processColumns(r)}return r}generateCells(e,t){const s=[];if(t.childGridLevel){const n=t.childGridLevel;for(let r=0;n>r;r++)s.push(this.generateCell({},Ys.Indent))}for(const n of e)s.push(this.generateCell(n,Ys.Data));return s}getColumnData(e){const t=[];let s;const n=e.getForeignKeyColumns();if(n.length){for(let r=0;r<n.length;r++){const h="result"in n[r].dataSource?new bt.hm(n[r].dataSource.result):n[r].dataSource;t.push(h.executeQuery(new bt.AE))}s=Promise.all(t).then(r=>{for(let h=0;h<n.length;h++)this.foreignKeyData[n[h].field]=r[h].result})}return s}getHeaders(e,t){this.hideColumnInclude=!!t,this.colDepth=Fn(e);let s=[];for(let n=0;n<this.colDepth;n++)s[n]=new Ta({}),s[n].cells=[];return s=this.processColumns(s),s=this.processHeaderCells(s,e),{rows:s,columns:this.generateActualColumns(e)}}getConvertedWidth(e){const t=parseFloat(e);return-1!==e.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t}generateActualColumns(e,t=[]){for(const s of e)s.commands||(s.columns?(s.visible||this.hideColumnInclude)&&0!==this.getCellCount(s,0)&&this.generateActualColumns(s.columns,t):(s.visible||this.hideColumnInclude)&&t.push(s));return t}processHeaderCells(e,t){const s=t;for(let n=0;n<s.length;n++)s[n].commands||(e=this.appendGridCells(s[n],e,0));return e}appendGridCells(e,t,s){if(e.columns||!1===e.visible&&!this.hideColumnInclude||e.commands){if(e.columns){const n=this.getCellCount(e,0);let r;n&&t[s].cells.push(new na({cellType:Ys.StackedHeader,column:e,colSpan:n}));for(let h=0,m=e.columns.length;h<m;h++)e.columns[h].visible&&!r&&(r=!0),t=this.appendGridCells(e.columns[h],t,s+1)}}else t[s].cells.push(this.generateCell(e,Ys.Header,this.colDepth-s,s));return t}generateCell(e,t,s,n){const r={visible:e.visible,isDataCell:t===Ys.Data,column:e,cellType:t,rowSpan:s,index:n};return(!r.rowSpan||r.rowSpan<2)&&delete r.rowSpan,new na(r)}processColumns(e){const t=this.parent;let s=[];t.enableColumnVirtualization&&(s=t.getColumnIndexesInView());for(let n=0,r=e.length;n<r;n++)if(t.allowGrouping)for(let h=0,m=t.groupSettings.columns.length-1;h<m;h++)t.enableColumnVirtualization&&-1===s.indexOf(h)||e[n].cells.splice(0,0,this.generateCell({},Ys.HeaderIndent));return e}getCellCount(e,t){if(e.columns)for(let s=0;s<e.columns.length;s++)t=this.getCellCount(e.columns[s],t);else(e.visible||this.hideColumnInclude)&&t++;return t}checkAndExport(e,t){Object.keys(e).some(n=>!e[n])||t()}failureHandler(e,t,s){return()=>{e[t.id]=!0,this.checkAndExport(e,s)}}createChildGrid(e,t,s,n){const r=new ys(this.parent.detailRowModule.getGridModel(e,t,s));e.isPrinting=!1,r.parentDetails={parentID:e.element.id,parentPrimaryKeys:e.getPrimaryKeyFieldNames(),parentKeyField:e.childGrid.queryString,parentKeyFieldValue:(0,u.NA)(r.queryString,t.data),parentRowData:t.data};const m=Na("child-grid"),T=(0,u.az)("div",{id:m,styles:"display: none"});return document.body.appendChild(T),r.id=m,n[m]=!1,r.isExportGrid=!0,{childGrid:r,element:T}}getGridExportColumns(e){const t=[];for(let s=0,n=e;s<n.length;s++)"checkbox"!==n[s].type&&t.push(n[s]);return t}getForeignKeyData(){return this.foreignKeyData}}class vc{constructor(e){this.valueFormatter=new Wn(e),this.internationalization=new u.eC(e)}returnFormattedValue(e,t){return!(0,u.le)(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""}formatCellValue(e){if(e.isForeignKey&&(e.value=(0,u.NA)(e.column.foreignKeyValue,He(e.column,{},e.value)[0])),"number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format)return e.value||0===e.value?this.internationalization.getNumberFormat({format:e.column.format})(e.value):"";if("boolean"===e.column.type&&""!==e.value)return e.value?"true":"false";if("date"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format)return((0,u.le)(e.column.type)||(0,u.le)(e.value))&&(0,u.le)(e.value)?"":e.value.toString();if("string"==typeof e.value&&(e.value=new Date(e.value)),"string"==typeof e.column.format){let t;const s=e.column.format;return t="date"===e.column.type?{type:"date",skeleton:s}:"time"===e.column.type?{type:"time",skeleton:s}:{type:"dateTime",skeleton:s},this.returnFormattedValue(e,t)}if(e.column.format instanceof Object&&void 0===e.column.format.type)return e.value.toString();{let t;return t="date"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,t)}}}class Nu{constructor(e,t){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isElementIdChanged=!1,this.gridPool={},this.sheet={},this.parent=e,this.helper=new $c(e),this.locator=t,this.l10n=this.locator.getService("localization")}getModuleName(){return"ExcelExport"}init(e){null!==e.element&&""===e.element.id&&(e.element.id=(new Date).toISOString(),this.isElementIdChanged=!0),this.parent=e,!this.parent.isDestroyed&&(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new vc(e.locale),e.id=Na("main-grid"),this.gridPool[e.id]=!1)}Map(e,t,s,n,r,h){const m=e,Y="isCsv";this.gridPool={},e.childGrid&&((0,u.le)(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Ts(e).expandedRows);const ke={requestType:"beforeExcelExport",gridObject:m,cancel:!1,isMultipleExport:s,workbook:n,isCsv:r,isBlob:h};return m.trigger("beforeExcelExport",ke),ke.cancel?new Promise(qe=>qe()):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new yd(m),this.isExporting=!0,this.isBlob=ke.isBlob,this.isCsvExport=!!ke[Y]&&ke[Y],Ou(t)&&Lu(t,m),this.processRecords(m,t,ke.isMultipleExport,ke.workbook))}exportingSuccess(e){this.isExporting=!1,this.parent.trigger("excelExportComplete",this.isBlob?{promise:this.blobPromise}:{}),this.parent.log("exporting_complete",this.getModuleName()),e(this.book),this.sheet.images=[]}processRecords(e,t,s,n){if(!(0,u.le)(t)&&!(0,u.le)(t.dataSource)&&t.dataSource instanceof bt.hm){const r=t.query?t.query:new bt.AE;return((0,u.le)(r.isCountRequired)||e.aggregates)&&(r.isCountRequired=!0),new Promise(h=>{t.dataSource.executeQuery(r).then(T=>{this.init(e),this.processInnerRecords(e,t,s,n,T).then(()=>{this.exportingSuccess(h)})})})}if(!(0,u.le)(t)&&"CurrentPage"===t.exportType)return new Promise(r=>{this.init(e),this.processInnerRecords(e,t,s,n,this.parent.getCurrentViewRecords()),this.exportingSuccess(r)});{const r=[];return r.push(this.data.getData({},$c.getQuery(e,this.data))),r.push(this.helper.getColumnData(e)),new Promise((h,m)=>{Promise.all(r).then(T=>{this.init(e),this.processInnerRecords(e,t,s,n,T[0]).then(()=>{this.exportingSuccess(h)})}).catch(T=>{m(this.book),this.parent.trigger(vl,T)})})}}processInnerRecords(e,t,s,n,r){this.groupedColLength=e.groupSettings.columns.length;let m,h=5,T=[];const V=Fn(e.columns),Y=!(0,u.le)(t);return Y&&!(0,u.le)(t.multipleExport)&&(this.expType=(0,u.le)(t.multipleExport.type)?"AppendToSheet":t.multipleExport.type,(0,u.le)(t.multipleExport.blankRows)||(h=t.multipleExport.blankRows)),(0,u.le)(n)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[]):"NewSheet"===this.expType?(this.workSheet=n.worksheets,this.rows=[],this.columns=[],this.styles=n.styles):(this.workSheet=[],this.rows=n.worksheets[0].rows,this.columns=n.worksheets[0].columns,this.styles=n.styles,this.rowLength=this.rows[this.rows.length-1].index+h,this.rowLength++),Y&&((0,u.le)(s)?((0,u.le)(t.header)||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),(0,u.le)(t.footer)||(this.footer=JSON.parse(JSON.stringify(t.footer)))):(!(0,u.le)(t.header)&&(s||"NewSheet"===this.expType)&&this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),(0,u.le)(t.footer)||"AppendToSheet"===this.expType&&s||(this.footer=JSON.parse(JSON.stringify(t.footer))))),this.includeHiddenColumn=!!Y&&t.includeHiddenColumn,new Promise((se,ge)=>{e.childGridLevel=0,T=this.processGridExport(e,t,r),this.globalResolve=se,this.gridPool[e.id]=!0,this.helper.checkAndExport(this.gridPool,this.globalResolve)}).then(()=>{const se=[];if(this.organiseRows(T,T[0].index,se),this.rows=this.rows.concat(se),(0,u.le)(this.footer)||("AppendToSheet"===this.expType&&!s||"NewSheet"===this.expType)&&this.processExcelFooter(this.footer),this.columns.length>0&&(this.sheet.columns=this.columns),this.sheet.rows=this.rows,this.sheet.enableRtl=this.parent.enableRtl,this.parent.allowFiltering&&e.getVisibleColumns().length&&Y&&t.enableFilter&&(this.sheet.autoFilters={row:V+(t.header?t.header.headerRows||t.header.rows.length:0),column:this.groupedColLength?this.groupedColLength+1:this.sheet.columns[0].index,lastRow:this.sheet.rows.length,lastColumn:this.sheet.columns.length}),this.workSheet.push(this.sheet),this.book.worksheets=this.workSheet,this.book.styles=this.styles,e.notify("finalPageSetup",this.book),!s){if(this.isCsvExport){Y&&!(0,u.le)(t.separator)&&","!==t.separator&&(m=t.separator);const ge=new be.IE(this.book,"csv",e.locale,e.currencyCode,m);this.isBlob?this.blobPromise=ge.saveAsBlob("text/csv"):ge.save(Y&&t.fileName?t.fileName:"Export.csv")}else{const ge=new be.IE(this.book,"xlsx",e.locale,e.currencyCode);this.isBlob?this.blobPromise=ge.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):ge.save(Y&&t.fileName?t.fileName:"Export.xlsx")}this.isElementIdChanged&&(e.element.id=""),delete e.expandedRows}return n})}organiseRows(e,t,s){if(!e.length)return t;for(let n=0;n<e.length;n++){const r=e[n],h=r.childRows;h?(r.index=t++,delete r.childRows,s.push(r),t=this.organiseRows(h,t,s)):(r.index=t++,s.push(r))}return t}processGridExport(e,t,s){let n=[];const r=this.parent.isFrozenGrid()&&!this.parent.getFrozenColumns();!(0,u.le)(t)&&!(0,u.le)(t.theme)&&(this.theme=t.theme),e.childGrid&&!(0,u.le)(t)&&(e.hierarchyPrintMode=t.hierarchyExportMode||"Expanded");const h=new $c(e,this.helper.getForeignKeyData()),m=Ou(t)?Yh(t.columns,e.enableColumnVirtualization):h.getGridExportColumns(r?e.getColumns():e.columns),T=h.getHeaders(m,this.includeHiddenColumn);return n=this.processHeaderContent(e,T,e.groupSettings.columns.length?e.groupSettings.columns.length-1:0,n),n=(0,u.le)(t)||(0,u.le)(t.dataSource)||t.dataSource instanceof bt.hm?(0,u.le)(t)||"CurrentPage"!==t.exportType?this.processRecordContent(e,s,T,t,void 0,n,h):this.processRecordContent(e,s,T,t,e.currentViewData,n,h):this.processRecordContent(e,s,T,t,t.dataSource,n,h),e.notify("export-DataBound",{excelRows:n,type:"excel"}),n}processRecordContent(e,t,s,n,r,h,m){let T;return T=!(0,u.le)(r)&&r.length?r:t.result,(0,u.le)(T.level)?this.processRecordRows(e,T,s,0,0,n,h,m):this.processGroupedRows(e,T,s,T.level,0,n,h,m),(0,u.le)(t.aggregates)||((0,u.le)(r)?this.processAggregates(e,t.result.GroupGuid?t.result.records:t.result,h):this.processAggregates(e,t.result,h,r)),h}processGroupedRows(e,t,s,n,r,h,m,T){for(const V of t){const Y=[],ge={};ge.index=1+n-1;const ke=e.getColumnByField(V.field),qe={value:V.key,column:ke,style:void 0,isForeignKey:ke.isForeignColumn()};let mt=e.getColumnByField(V.field).headerText+": "+(ke.enableGroupByFormat?V.key:this.exportValueFormatter.formatCellValue(qe))+" - ";mt+=V.count>1?V.count+" items":V.count+" item";const Vt={captionText:mt,type:this.isCsvExport?"CSV":"Excel",data:V};this.parent.trigger(Ec,Vt),ge.value=Vt.captionText,ge.style=this.getCaptionThemeStyle(this.theme);const ai=new Al(e).generateRows(V);if(this.fillAggregates(e,ai,t.level+t.childLevels-1,m,this.rowLength),Y.push(ge),m[m.length-1].cells.length>0){let ki=t.level+t.childLevels+ai[0].cells.length,Qi=0;for(const fs of m[m.length-1].cells)fs.index<ki&&(ki=fs.index),fs.index>Qi&&(Qi=fs.index),Y[Y.length-1].index!==fs.index&&Y.push(fs);for(ki-ge.index>1&&(ge.colSpan=ki-ge.index);Qi<s.columns.length+n+t.childLevels;){const fs={};fs.index=Qi+1,fs.style=this.getCaptionThemeStyle(this.theme),Y.push(fs),Qi++}}else{let ki=0;for(const Qi of s.columns)Qi.visible&&ki++;ge.colSpan=t.childLevels+ki}m[m.length-1].cells=Y,this.rowLength++,this.groupedColLength<8&&n>1&&(m[m.length-1].grouping={outlineLevel:n-1,isCollapsed:!0}),!(0,u.le)(t.childLevels)&&t.childLevels>0?(this.processGroupedRows(e,V.items,s,V.items.level,r,h,m,T),this.processAggregates(e,V,m,void 0,n-1+t.childLevels,!0)):(r=this.processRecordRows(e,V.items,s,n-1,r,h,m,T),this.processAggregates(e,V,m,void 0,n-1,!0))}}processRecordRows(e,t,s,n,r,h,m,T){let V=1,Y=[];const ge=T.getGridRowModel(s.columns,t,e,r);for(const ke of ge){let qe;Y=[],r++,V=1;for(let Vt=0,Qt=ke.cells.length;Vt<Qt;Vt++){const ai=ke.cells[Vt];if(ai.cellType!==Ys.Data)continue;const ki=ai.column,Qi=ki.field,fs=(0,u.le)(Qi)?"":ki.valueAccessor(Qi,ke.data,ki);let Nn,ps=(0,u.le)(fs)?"":fs;if(ki.isForeignColumn&&ki.isForeignColumn()&&(Nn=T.getFData(ps,ki),ps=(0,u.NA)(ki.foreignKeyValue,Nn)),!(0,u.le)(ps)){let fr={};const rr=V+n+e.childGridLevel;let xr={data:ke.data,column:ki,foreignKeyData:Nn,value:ps,style:void 0,colSpan:1,cell:fr};if(e.trigger("excelQueryCellInfo",xr),!(0,u.le)(xr.image)&&!(0,u.le)(xr.image.base64)&&(qe=this.setImage(xr,rr)),(0,u.le)(xr.hyperLink)||(xr.cell.hyperlink={target:xr.hyperLink.target},xr.value=xr.hyperLink.displayText||xr.value),fr=xr.cell,fr.index=rr,fr.value=xr.value,""===xr.data&&e.childGridLevel&&1===V){xr={style:{hAlign:"left"}},fr.colSpan=e.getVisibleColumns().length,fr.value=this.l10n.getConstant("EmptyRecord")}if(xr.colSpan>1&&(fr.colSpan=xr.colSpan),(0,u.le)(xr.style))fr.style={name:e.element.id+"column"+(V+n)};else{const nn=this.getColumnStyle(e,V+n);fr.style=this.mergeOptions(this.styles[nn],xr.style)}Y.push(fr)}V++}const mt={index:this.rowLength++,cells:Y};if((0,u.le)(qe)||(mt.height=qe),this.groupedColLength&&this.groupedColLength<8&&n+1>0&&(mt.grouping={outlineLevel:n+1,isCollapsed:!0}),m.push(mt),ke.isExpand&&!(0,u.le)(e.childGrid)){e.isPrinting=!0;const Vt=!(0,u.le)(h)&&h.exportType?h.exportType:"AllPages",Qt=this.helper.createChildGrid(e,ke,Vt,this.gridPool),ai=Qt.childGrid,ki=Qt.element;ai.actionFailure=T.failureHandler(this.gridPool,ai,this.globalResolve),ai.childGridLevel=e.childGridLevel+1,this.parent.trigger(Nd,{childGrid:ai,row:ke,exportProperties:h}),ai.beforeDataBound=this.childGridCell(mt,ai,h,ke),ai.appendTo(ki)}e.notify(xl,{rowObj:ke,type:"excel",excelRows:m})}return r}setImage(e,t){return(0,u.le)(this.sheet.images)&&(this.sheet.images=[]),this.sheet.images.push({image:e.image.base64,row:this.rowLength,column:t,lastRow:this.rowLength,lastColumn:t}),this.columns[t-1].width=e.image.width||this.columns[t-1].width,e.image.height||50}childGridCell(e,t,s,n){return r=>{t.beforeDataBound=null,r.cancel=!0,0===r.result.length&&(r.result=[""]),e.childRows=this.processGridExport(t,s,r);const h=this.parent.groupSettings.columns.length,m=e.childRows;for(let T=0;T<m.length;T++)m[T].grouping={outlineLevel:h+t.childGridLevel,isCollapsed:!n.isExpand,isHidden:!n.isExpand};return t.destroy(),(0,u.og)(t.element),this.gridPool[t.id]=!0,this.helper.checkAndExport(this.gridPool,this.globalResolve),e}}processAggregates(e,t,s,n,r,h){const m=new Kd(e);let V,T=m.getColumns();if(T=T.filter(Y=>(0,u.le)(Y.commands)&&"checkbox"!==Y.type),e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),V=(0,u.le)(n)?t:n,void 0===r&&(r=0),e.groupSettings.columns.length>0&&h){const se=new Ah(e).generateRows(V,{level:V.level});se.length>0&&(s=this.fillAggregates(e,se,r,s))}else{r=e.groupSettings.columns.length>0&&!h?e.groupSettings.columns.length:r;const Y=m.generateRows(V,t.aggregates,null,null,T);Y.length>0&&!h&&(s=this.fillAggregates(e,Y,r=e.groupSettings.columns.length?r-1:r,s))}return s}fillAggregates(e,t,s,n,r){for(const h of t){const m=[];let T=!0,V=0;for(const Y of h.cells){const se={};if(Y.cellType!==Ys.DetailFooterIntent&&(Y.visible||this.includeHiddenColumn))if(V++,Y.isDataCell){T=!1;const ge=!(0,u.le)(Y.column.footerTemplate),ke=!(0,u.le)(Y.column.groupFooterTemplate),qe=!(0,u.le)(Y.column.groupCaptionTemplate);if(se.index=V+s+e.childGridLevel,ge)se.value=this.getAggreateValue(Ys.Summary,Y.column.footerTemplate,Y,h);else if(ke)se.value=this.getAggreateValue(Ys.GroupSummary,Y.column.groupFooterTemplate,Y,h);else if(qe)se.value=this.getAggreateValue(Ys.CaptionSummary,Y.column.groupCaptionTemplate,Y,h);else for(const Qt of Object.keys(h.data[Y.column.field]))Qt===Y.column.type&&((0,u.le)(h.data[Y.column.field].Sum)?(0,u.le)(h.data[Y.column.field].Average)?(0,u.le)(h.data[Y.column.field].Max)?(0,u.le)(h.data[Y.column.field].Min)?(0,u.le)(h.data[Y.column.field].Count)?(0,u.le)(h.data[Y.column.field].TrueCount)?(0,u.le)(h.data[Y.column.field].FalseCount)?(0,u.le)(h.data[Y.column.field].Custom)||(se.value=h.data[Y.column.field].Custom):se.value=h.data[Y.column.field][`${Y.column.field} - falsecount`]:se.value=h.data[Y.column.field][`${Y.column.field} - truecount`]:se.value=h.data[Y.column.field][`${Y.column.field} - count`]:se.value=h.data[Y.column.field][`${Y.column.field} - min`]:se.value=h.data[Y.column.field][`${Y.column.field} - max`]:se.value=h.data[Y.column.field][`${Y.column.field} - average`]:se.value=h.data[Y.column.field][`${Y.column.field} - sum`]);se.style=this.getCaptionThemeStyle(this.theme),this.aggregateStyle(Y.column,se.style,Y.column.field);const mt=Y.attributes.style;mt.textAlign&&(se.style.hAlign=mt.textAlign.toLowerCase()),this.parent.trigger("excelAggregateQueryCellInfo",{row:h,type:ge?"Footer":ke?"GroupFooter":"GroupCaption",style:se}),m.push(se)}else void 0===r&&(se.index=V+s+e.childGridLevel,se.style=this.getCaptionThemeStyle(this.theme),m.push(se))}if((0,u.le)(r)){let Y={};if(this.groupedColLength<8&&this.groupedColLength>0){const qe={outlineLevel:n[n.length-1].grouping.outlineLevel,isCollapsed:!0};Y={index:this.rowLength++,cells:m,grouping:qe}}else Y={index:this.rowLength++,cells:m};T||n.push(Y)}else n.push({index:r,cells:m})}return n}aggregateStyle(e,t,s){const n=this.parent.getColumnByField(s);if("object"==typeof e.format){const r=e.format;t.numberFormat=(0,u.le)(r.format)?r.skeleton:r.format,(0,u.le)(r.type)||(t.type=r.type.toLowerCase())}else t.numberFormat=e.format;!(0,u.le)(n)&&(0,u.le)(t.type)&&(t.type=n.type.toLowerCase())}getAggreateValue(e,t,s,n){const r={};let h;r[(0,u.I$)(Ys,s.cellType)]=(0,u.MY)(t);const m=n.data[s.column.field?s.column.field:s.column.columnName];return this.parent.isReact||this.parent.isVue?(h=r[(0,u.I$)(Ys,s.cellType)](m,this.parent),this.parent.isReact&&this.parent.renderTemplates()):h=r[(0,u.I$)(Ys,s.cellType)](m),h[0].textContent}mergeOptions(e,t){const s={};let n=Object.keys(e);for(let r=0;r<n.length;r++)"name"!==n[r]&&(s[n[r]]=e[n[r]]);n=Object.keys(t);for(let r=0;r<n.length;r++)"name"!==n[r]&&(s[n[r]]=t[n[r]]);return s}getColumnStyle(e,t){let s=0;for(const n of this.styles){if(n.name===e.element.id+"column"+t)return s;s++}}processHeaderContent(e,t,s,n){const h=t.rows,m=t.columns,T=[];if(s>0){let Y=0;for(;Y!==s;)this.columns.push({index:Y+1,width:30}),Y++}for(let Y=0;Y<m.length;Y++)this.parseStyles(e,m[Y],this.getRecordThemeStyle(this.theme),s+Y+1);let V;for(let Y=0;Y<h.length;Y++){let se=1+s;const ge=[];for(let qe=0;qe<h[Y].cells.length;qe++){let mt={};const Vt={},Qt=h[Y].cells[qe];if(Qt.cellType===Ys.HeaderIndent||Qt.cellType===Ys.DetailHeader)continue;let ai={contains:!0,index:1};for(;ai.contains;)if(ai=this.getIndex(T,1,se),se=ai.index,!ai.contains){Vt.index=ai.index+e.childGridLevel;break}if(!(0,u.le)(Qt.rowSpan)&&1!==Qt.rowSpan){Vt.rowSpan=Qt.rowSpan;for(let Qi=1;Qi<Qt.rowSpan+1;Qi++){const fs={rowIndex:0,columnIndex:0};fs.rowIndex=Qi,fs.columnIndex=se,T.push(fs)}}!(0,u.le)(Qt.colSpan)&&1!==Qt.colSpan&&(Vt.colSpan=Qt.colSpan,se=se+Vt.colSpan-1),Vt.value=Qt.column.headerText,mt=this.getHeaderThemeStyle(this.theme),(0,u.le)(Qt.column.textAlign)||(mt.hAlign=Qt.column.textAlign.toLowerCase()),(0,u.le)(Qt.column.headerTextAlign)||(mt.hAlign=Qt.column.headerTextAlign.toLowerCase());const ki={cell:Vt,gridCell:Qt,style:mt};e.trigger("excelHeaderQueryCellInfo",ki),!(0,u.le)(ki.image)&&!(0,u.le)(ki.image.base64)&&(V=this.setImage(ki,se)),(0,u.le)(ki.hyperLink)||(ki.cell.hyperlink={target:ki.hyperLink.target},Vt.value=ki.hyperLink.displayText||Vt.value),Vt.style=ki.style,ge.push(Vt),se++}const ke={index:this.rowLength++,cells:ge};(0,u.le)(V)||(ke.height=V),n.push(ke)}return n}getHeaderThemeStyle(e){let t={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};return!(0,u.le)(e)&&!(0,u.le)(e.header)&&(t=this.updateThemeStyle(e.header,t)),t}updateThemeStyle(e,t){return(0,u.l7)(t,e)}getCaptionThemeStyle(e){let t={fontSize:13,backColor:"#F6F6F6"};return!(0,u.le)(e)&&!(0,u.le)(e.caption)&&(t=this.updateThemeStyle(e.caption,t)),t}getRecordThemeStyle(e){let t={fontSize:13,borders:{color:"#E0E0E0"}};return!(0,u.le)(e)&&!(0,u.le)(e.record)&&(t=this.updateThemeStyle(e.record,t)),t}processExcelHeader(e){if(!(0,u.le)(e.rows)&&("NewSheet"===this.expType||1===this.rowLength)){let t;this.rowLength=void 0===e.headerRows?e.rows.length:e.headerRows,t=this.rowLength<e.rows.length?this.rowLength:e.rows.length,this.rowLength++;for(let s=0;s<t;s++){const n=e.rows[s];null!==n.index&&!(0,u.le)(n.index)||(n.index=s+1),this.updatedCellIndex(n)}}}updatedCellIndex(e){const t=e.cells.length;for(let s=0;s<t;s++){const n=e.cells[s];null!==n.index&&!(0,u.le)(n.index)||(n.index=s+1)}this.rows.push(e)}processExcelFooter(e){if(!(0,u.le)(e.rows)){let t;void 0===e.footerRows?this.rowLength+=e.rows.length:e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,t=e.rows.length):t=e.footerRows;for(let s=0;s<t;s++){const n=e.rows[s];null==n.index?n.index=this.rowLength++:n.index+=this.rowLength,this.updatedCellIndex(n)}}}getIndex(e,t,s){for(const n of e)if(n.rowIndex===t&&n.columnIndex===s)return{contains:!0,index:s+=1};return{contains:!1,index:s}}parseStyles(e,t,s,n){if(!(0,u.le)(t.format))if("object"==typeof t.format){const r=t.format;s.numberFormat=(0,u.le)(r.format)?r.skeleton:r.format,(0,u.le)(r.type)||(s.type=r.type.toLowerCase())}else s.numberFormat=t.format,s.type=t.type;(0,u.le)(t.textAlign)||(s.hAlign=t.textAlign.toLowerCase()),Object.keys(s).length>0&&(s.name=e.element.id+"column"+n,this.styles.push(s)),!(0,u.le)(t.width)&&"auto"!==t.width&&this.columns.push({index:n+e.childGridLevel,width:"number"==typeof t.width?t.width:this.helper.getConvertedWidth(t.width)})}destroy(){}}class Bu{constructor(e){this.hideColumnInclude=!1,this.currentViewData=!1,this.customDataSource=!1,this.isGrouping=!1,this.headerOnPages=[],this.drawPosition={xPosition:0,yPosition:0},this.parent=e,this.helper=new $c(e),this.gridPool={}}getModuleName(){return"PdfExport"}init(e){this.exportValueFormatter=new vc(e.locale),this.pdfDocument=void 0,this.hideColumnInclude=!1,this.currentViewData=!1,this.parent=e,this.isGrouping=!1,this.isExporting=!0,e.id=Na("main-grid"),this.gridPool[e.id]=!1,this.pdfPageSettings=new Ln}exportWithData(e,t,s,n,r,h,m){this.init(e),this.pdfDocument=(0,u.le)(t)?new I:t,this.processExport(e,n,r,h).then(()=>{this.isExporting=!1,e.trigger(Xu,this.isBlob?{promise:this.blobPromise}:{}),this.parent.log("exporting_complete",this.getModuleName()),s(this.pdfDocument)}).catch(T=>{m(this.pdfDocument),this.parent.trigger(vl,T)})}Map(e,t,s,n,r){this.data=new yd(this.parent),this.isBlob=r,this.gridPool={};let h=new bt.AE;e.childGrid&&((0,u.le)(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Ts(e).expandedRows);const m={requestType:"beforePdfExport",cancel:!1,headerPageNumbers:[],gridDrawPosition:{xPosition:0,yPosition:0},generateQuery:!1};if(m.gridObject=e,e.trigger("beforePdfExport",m),!0===m.cancel)return new Promise((ke,qe)=>ke());if(Ou(t)&&Lu(t,e),m.generateQuery&&(h=$c.getQuery(e,this.data)),this.headerOnPages=m.headerPageNumbers,this.drawPosition=m.gridDrawPosition,this.parent.log("exporting_begin",this.getModuleName()),!(0,u.le)(t)&&!(0,u.le)(t.dataSource)&&t.dataSource instanceof bt.hm)return new Promise((ke,qe)=>{t.dataSource.executeQuery(h).then(mt=>{this.exportWithData(e,n,ke,mt,t,s,qe)})});if(!(0,u.le)(t)&&"CurrentPage"===t.exportType)return new Promise((ke,qe)=>{this.exportWithData(e,n,ke,this.parent.getCurrentViewRecords(),t,s,qe)});{const ke=[];return ke.push(this.data.getData({},$c.getQuery(e,this.data))),ke.push(this.helper.getColumnData(e)),new Promise((qe,mt)=>{Promise.all(ke).then(Vt=>{this.init(e),this.pdfDocument=(0,u.le)(n)?new I:n,this.processExport(e,Vt[0],t,s).then(()=>{this.isExporting=!1,e.trigger(Xu,this.isBlob?{promise:this.blobPromise}:{}),this.parent.log("exporting_complete",this.getModuleName()),qe(this.pdfDocument)}).catch(Qt=>{mt(this.pdfDocument),this.parent.trigger(vl,Qt)})})})}}processExport(e,t,s,n){const r=this.pdfDocument.sections.add();let h;this.processSectionExportProperties(r,s);const m=r.pages.add();return new Promise((T,V)=>{h=this.processGridExport(e,t,s),this.globalResolve=T,this.gridPool[e.id]=!0,this.helper.checkAndExport(this.gridPool,this.globalResolve)}).then(()=>(h.draw(m,this.drawPosition.xPosition,this.drawPosition.yPosition),this.drawHeader(s),n||(this.isBlob?this.blobPromise=this.pdfDocument.save():!(0,u.le)(s)&&s.fileName?this.pdfDocument.save(s.fileName):this.pdfDocument.save("Export.pdf"),this.pdfDocument.destroy(),delete e.expandedRows),this.pdfDocument))}processSectionExportProperties(e,t){return!(0,u.le)(t)&&(!(0,u.le)(t.pageOrientation)||!(0,u.le)(t.pageSize))&&(this.pdfPageSettings.orientation="Landscape"===t.pageOrientation?Ns.Landscape:Ns.Portrait,this.pdfPageSettings.size=this.getPageSize(t.pageSize),e.setPageSettings(this.pdfPageSettings)),e}processGridExport(e,t,s){let n=!0;const r=this.parent.isFrozenGrid()&&!this.parent.getFrozenColumns();(0,u.le)(s)||(this.gridTheme=s.theme,n=!!(0,u.le)(s.allowHorizontalOverflow)||s.allowHorizontalOverflow);const h=new $c(e,this.helper.getForeignKeyData()),m=this.processExportProperties(s,t.result);let T=Ou(s)?Yh(s.columns,e.enableColumnVirtualization):h.getGridExportColumns(r?e.getColumns():e.columns);T=T.filter(ai=>(0,u.le)(ai.commands));let V=!1;e.groupSettings.columns.length&&(V=!0),e.childGrid&&!(0,u.le)(s)&&(e.hierarchyPrintMode=s.hierarchyExportMode||"Expanded");let Y=new ii;const se=this.getHeaderThemeStyle();let ge=se.border;const ke=se.font,qe=se.brush,mt=h.getHeaders(T,this.hideColumnInclude),Vt=mt.columns;Y=this.processGridHeaders(e.groupSettings.columns.length,Y,mt.rows,Vt,ge,ke,qe,e,n,T),this.setColumnProperties(Vt,Y,h,e,n);const Qt=this.getSummaryCaptionThemeStyle();if(!(0,u.le)(m)&&m.length){if(V?((0,u.le)(Qt.border)||(ge=Qt.border),this.processGroupedRecords(Y,m,Vt,e,ge,0,Qt.font,Qt.brush,Qt.backgroundBrush,t,s,h,0)):this.processRecord(ge,Vt,e,m,Y,0,s,h,0),!(0,u.le)(t.aggregates)){const ai=new Kd(e);let ki,Qi=ai.getColumns();Qi=Qi.filter(fs=>(0,u.le)(fs.commands)&&"checkbox"!==fs.type),e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),ki=this.customDataSource?ai.generateRows(m,t.aggregates):this.currentViewData?ai.generateRows(this.parent.getCurrentViewRecords(),t.aggregates):V?ai.generateRows(m.records,t.aggregates):ai.generateRows(t.result,t.aggregates,null,null,Qi),this.processAggregates(ki,Y,ge,Qt.font,Qt.brush,Qt.backgroundBrush,!1,null,null,null,!V)}}else Y.rows.addRow().style.setBorder(ge);return Y}getSummaryCaptionThemeStyle(){if((0,u.le)(this.gridTheme)||(0,u.le)(this.gridTheme.caption))return{font:new oe(Ot.Helvetica,9.75),brush:new kt(new ot(0,0,0)),backgroundBrush:new kt(new ot(246,246,246))};{const e=(0,u.le)(this.gridTheme.caption.fontSize)?9.75:this.gridTheme.caption.fontSize,t=(0,u.le)(this.gridTheme.caption.fontName)?Ot.Helvetica:this.getFontFamily(this.gridTheme.caption.fontName),s=this.getFontStyle(this.gridTheme.caption);let n=new ot(0,0,0);if(!(0,u.le)(this.gridTheme.caption.fontColor)){const m=this.hexToRgb(this.gridTheme.caption.fontColor);n=new ot(m.r,m.g,m.b)}const r=this.gridTheme.caption.border?this.getBorderStyle(this.gridTheme.caption.border):null;let h=new oe(t,e,s);return(0,u.le)(this.gridTheme.caption.font)||(h=this.gridTheme.caption.font),{font:h,brush:new kt(n),backgroundBrush:new kt(new ot(246,246,246)),border:r}}}getGridPdfFont(e){const t="fontFamily",s="fontSize",n="fontStyle",r="isTrueType";let h=0;if(e.header&&e.header.font){const m=e.header.font[t],T=e.header.font[s],V=e.header.font[n];if(h=(0,u.le)(wt[V])?0:wt[V],e.header.font[r])e.header.font=new Ks(m,T,h);else{const Y=(0,u.le)(m)?Ot.Helvetica:this.getFontFamily(m);e.header.font=new oe(Y,T,h)}}if(e.caption&&e.caption.font){const m=e.caption.font[t],T=e.caption.font[s],V=e.caption.font[n];if(h=(0,u.le)(wt[V])?0:wt[V],e.caption.font[r])e.caption.font=new Ks(m,T,h);else{const Y=(0,u.le)(m)?Ot.Helvetica:this.getFontFamily(m);e.caption.font=new oe(Y,T,h)}}if(e.record&&e.record.font){const m=e.record.font[t],T=e.record.font[s],V=e.record.font[n];if(h=(0,u.le)(wt[V])?0:wt[V],e.record.font[r])e.record.font=new Ks(m,T,h);else{const Y=(0,u.le)(m)?Ot.Helvetica:this.getFontFamily(m);e.record.font=new oe(Y,T,h)}}}getHeaderThemeStyle(){const e=new Xs;if((0,u.le)(this.gridTheme)||(0,u.le)(this.gridTheme.header))return e.all=new rs(new ot(234,234,234)),{border:e,font:new oe(Ot.Helvetica,10.5),brush:new kt(new ot(102,102,102))};{const t=(0,u.le)(this.gridTheme.header.fontName)?Ot.Helvetica:this.getFontFamily(this.gridTheme.header.fontName),s=this.getFontStyle(this.gridTheme.header),n=(0,u.le)(this.gridTheme.header.fontSize)?10.5:this.gridTheme.header.fontSize;let r=new ot;if(!(0,u.le)(this.gridTheme.header.fontColor)){const m=this.hexToRgb(this.gridTheme.header.fontColor);r=new ot(m.r,m.g,m.b)}let h=new oe(t,n,s);return(0,u.le)(this.gridTheme.header.font)||(h=this.gridTheme.header.font),{border:this.getBorderStyle(this.gridTheme.header.border),font:h,brush:new kt(r)}}}processGroupedRecords(e,t,s,n,r,h,m,T,V,Y,se,ge,ke){const qe=h;for(const mt of t){const Vt=e.rows.addRow(),Qt=n.getColumnByField(mt.field),ai={value:mt.key,column:Qt,style:void 0,isForeignKey:Qt.isForeignColumn()},Qi={captionText:this.parent.getColumnByField(mt.field).headerText+": "+(Qt.enableGroupByFormat?mt.key:this.exportValueFormatter.formatCellValue(ai))+" - "+mt.count+(t.count>1?" items":" item"),type:"PDF",data:mt};this.parent.trigger(Ec,Qi,fs=>{let ps;Vt.cells.getCell(qe).value=fs.captionText,Vt.cells.getCell(qe).style.stringFormat=new In(Ci.Left),Vt.style.setBorder(r),Vt.style.setFont(m),Vt.style.setTextBrush(T),Vt.style.setBackgroundBrush(V);const Nn=new Al(n);ps=(0,u.le)(mt.items.records)?Nn.generateRows(mt.items,mt):Nn.generateRows(mt.items.records,mt),!(0,u.le)(ps)&&0===ps.length&&(Vt.cells.getCell(qe+1).columnSpan=e.columns.count-(qe+1)),!(0,u.le)(t.childLevels)&&t.childLevels>0?(this.processAggregates(ps,e,r,m,T,V,!0,Vt,qe),this.processGroupedRecords(e,mt.items,s,n,r,qe+1,m,T,V,Y,se,ge,ke),ps=new Ah(n).generateRows(mt.items.records,mt),this.processAggregates(ps,e,r,m,T,V,!1)):(this.processAggregates(ps,e,r,m,T,V,!0,Vt,qe),ke=this.processRecord(r,s,n,mt.items,e,qe+1,se,ge,ke),ps=new Ah(n).generateRows(mt.items,mt),this.processAggregates(ps,e,r,m,T,V,!1,null,null,!0))})}}processGridHeaders(e,t,s,n,r,h,m,T,V,Y){let se=n.length+e;const ge=Fn(Y),ke=Y;let qe=0,mt=[];for(let ai=0;ai<s.length;ai++)mt[ai]=0;this.parent.groupSettings.columns.length&&(qe=this.parent.groupSettings.columns.length-1,se-=1),t.columns.add(se),t.headers.add(s.length);const Vt=(ai,ki,Qi,fs,ps)=>{const Nn=t.headers.getHeader(ai),fr=Nn.cells.getCell(ki),rr=s[ai].cells[mt[ai]];mt[ai]=mt[ai]+1,(0,u.le)(Qi.headerTextAlign)||(fr.style.stringFormat=this.getHorizontalAlignment(Qi.headerTextAlign)),fs>0&&(fr.rowSpan=fs,fr.style.stringFormat=this.getVerticalAlignment("Bottom",fr.style.stringFormat,Qi.textAlign)),ps>0&&(fr.columnSpan=ps),Nn.style.setBorder(r),Nn.style.setFont(h),Nn.style.setTextBrush(m),fr.value=Qi.headerText,!(0,u.le)(rr)&&(rr.cellType===Ys.HeaderIndent||rr.cellType===Ys.DetailHeader)&&(fr.value="",fr.width=20);const xr={cell:fr,gridCell:rr,style:fr.style};this.parent.trigger("pdfHeaderQueryCellInfo",xr);const nn=xr;(0,u.le)(nn.image)||(fr.value=new Zn(nn.image.base64)),(0,u.le)(nn.hyperLink)||(fr.value=this.setHyperLink(nn))},Qt=(ai,ki,Qi,fs,ps,Nn)=>{let fr=0;for(let rr=0;rr<ai.length;rr++)if(Nn&&(fr=fr+Qi+(0===rr?0:-1),fs=fr,Qi=0),!Nn&&!ai[rr].visible&&(fs-=1),ai[rr].columns&&ai[rr].columns.length){const xr=Qt(ai[rr].columns,ki-1,0,rr+fs,ps+1,!1);Vt(ps,rr+fs+qe,ai[rr],0,xr),Qi+=xr,fs=fs+xr-1}else(ai[rr].visible||this.hideColumnInclude)&&(Qi++,Vt(ps,rr+fs+qe,ai[rr],ki,0));return Qi};return Qt(ke,ge,0,0,0,!0),t.columns.count>=6&&V&&(t.style.allowHorizontalOverflow=!0),t}processExportProperties(e,t){if((0,u.le)(e))this.currentViewData=!1,this.customDataSource=!1;else{(0,u.le)(e.theme)||(this.gridTheme=e.theme);const s=this.pdfPageSettings.size;if(this.drawHeader(e),!(0,u.le)(e.footer)){const n=e.footer,r=new hi(0,s.width-80-.75*n.fromBottom),h=new Ei(s.width-80,.75*n.height),m=new Ui(r,h);this.pdfDocument.template.bottom=this.drawPageTemplate(new Qs(m),n)}!(0,u.le)(e.includeHiddenColumn)&&!this.isGrouping&&(this.hideColumnInclude=e.includeHiddenColumn),(0,u.le)(e.dataSource)?(0,u.le)(e.exportType)?(this.currentViewData=!1,this.customDataSource=!1):"CurrentPage"===e.exportType?(t=this.parent.currentViewData,this.currentViewData=!0,this.customDataSource=!1):(this.currentViewData=!1,this.customDataSource=!1):(e.dataSource instanceof bt.hm||(t=e.dataSource),this.customDataSource=!0,this.currentViewData=!1)}return t}drawHeader(e){const t=this.pdfPageSettings.size;if(!(0,u.le)(e)&&!(0,u.le)(e.header)){const s=e.header,n=new hi(0,s.fromTop),r=new Ei(t.width-80,.75*s.height),h=new Ui(n,r);if(this.headerOnPages.length){const m=this.drawPageTemplate(new Qs(h),s);this.headerOnPages.filter(T=>{T-1>=0&&T-1<this.pdfDocument.pages.count-1&&this.pdfDocument.pages.getPageByIndex(T-1).graphics.drawPdfTemplate(m.template,new hi(0,0))})}else this.pdfDocument.template.top=this.drawPageTemplate(new Qs(h),s)}}drawPageTemplate(e,t){for(const s of t.contents)switch(this.processContentValidation(s),s.type){case"Text":if(""===s.value||null==s.value||"string"!=typeof s.value)throw new Error("please enter the valid input value in text content...");this.drawText(e,s);break;case"PageNumber":this.drawPageNumber(e,s);break;case"Image":if(null==s.src||""===s.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(e,s);break;case"Line":this.drawLine(e,s);break;default:throw new Error("Please set valid content type...")}return e}processContentValidation(e){if(null==e.type)throw new Error("please set valid content type...");if("Line"===e.type){if(null==e.points)throw new Error("please enter valid points in "+e.type+" content...");if(null==e.points.x1||"number"!=typeof e.points.x1)throw new Error("please enter valid x1 co-ordinate in "+e.type+" points...");if(null==e.points.y1||"number"!=typeof e.points.y1)throw new Error("please enter valid y1 co-ordinate in "+e.type+" points...");if(null==e.points.x2||"number"!=typeof e.points.x2)throw new Error("please enter valid x2 co-ordinate in "+e.type+" points...");if(null==e.points.y2||"number"!=typeof e.points.y2)throw new Error("please enter valid y2 co-ordinate in "+e.type+" points...")}else{if(null==e.position)throw new Error("please enter valid position in "+e.type+" content...");if(null==e.position.x||"number"!=typeof e.position.x)throw new Error("please enter valid x co-ordinate in "+e.type+" position...");if(null==e.position.y||"number"!=typeof e.position.y)throw new Error("please enter valid y co-ordinate in "+e.type+" position...")}}drawText(e,t){const s=this.getFont(t);let n=this.getBrushFromContent(t),r=null;if(!(0,u.le)(t.style.textPenColor)){const se=this.hexToRgb(t.style.textPenColor);r=new rs(new ot(se.r,se.g,se.b))}null==n&&null==r&&(n=new kt(new ot(0,0,0)));const h=t.value.toString(),m=.75*t.position.x,T=.75*t.position.y,V=new In,Y=this.setContentFormat(t,V);null===Y||(0,u.le)(Y.format)||(0,u.le)(Y.size)?e.graphics.drawString(h,s,r,n,m,T,V):e.graphics.drawString(h,s,r,n,m,T,Y.size.width,Y.size.height,Y.format)}drawPageNumber(e,t){const s=this.getFont(t);let n=null;if((0,u.le)(t.style.textBrushColor))n=new kt(new ot(0,0,0));else{const se=this.hexToRgb(t.style.textBrushColor);n=new kt(new ot(se.r,se.g,se.b))}const r=new po(s,n);let h,m;if(r.numberStyle=this.getPageNumberStyle(t.pageNumberType),(0,u.le)(t.format))m="{0}",h=new jo(s,n,m,r);else{const se="$total",ge="$current";if(-1!==t.format.indexOf(se)&&-1!==t.format.indexOf(ge)){const ke=new hr(s);ke.numberStyle=this.getPageNumberStyle(t.pageNumberType),t.format.indexOf(se)>t.format.indexOf(ge)?(m=t.format.replace(ge,"0"),m=m.replace(se,"1")):(m=t.format.replace(ge,"1"),m=m.replace(se,"0")),h=new jo(s,n,m,r,ke)}else if(-1!==t.format.indexOf(ge)&&-1===t.format.indexOf(se))m=t.format.replace(ge,"0"),h=new jo(s,n,m,r);else{const ke=new hr(s);m=t.format.replace(se,"0"),h=new jo(s,n,m,ke)}}const T=.75*t.position.x,V=.75*t.position.y,Y=this.setContentFormat(t,h.stringFormat);null!==Y&&!(0,u.le)(Y.format)&&!(0,u.le)(Y.size)&&(h.stringFormat=Y.format,h.bounds=new Ui(T,V,Y.size.width,Y.size.height)),h.draw(e.graphics,T,V)}drawImage(e,t){const s=.75*t.position.x,n=.75*t.position.y,r=(0,u.le)(t.size)?void 0:.75*t.size.width,h=(0,u.le)(t.size)?void 0:.75*t.size.height,m=new Zn(t.src);(0,u.le)(r)?e.graphics.drawImage(m,s,n):e.graphics.drawImage(m,s,n,r,h)}drawLine(e,t){const s=.75*t.points.x1,n=.75*t.points.y1,r=.75*t.points.x2,h=.75*t.points.y2,m=this.getPenFromContent(t);!(0,u.le)(t.style)&&null!==t.style&&(!(0,u.le)(t.style.penSize)&&null!==t.style.penSize&&"number"==typeof t.style.penSize&&(m.width=.75*t.style.penSize),m.dashStyle=this.getDashStyle(t.style.dashStyle)),e.graphics.drawLine(m,s,n,r,h)}processAggregates(e,t,s,n,r,h,m,T,V,Y,se){for(const ge of e){let ke=-1,qe=0,mt=!0;const Vt=[],Qt=se?0:1;for(let ai=0;ai<t.columns.count+Qt;ai++){let ki=ge.cells[qe];if(ki.cellType!==Ys.DetailFooterIntent){if(!this.hideColumnInclude){for(;void 0===ki.visible;)ki.cellType!==Ys.DetailFooterIntent&&((0,u.le)(T)||(0,u.le)(T.cells.getCell(ai).value)?Vt.push(""):(this.parent.trigger(sc,{row:ge,type:"GroupCaption",style:T.cells}),Vt.push(T.cells.getCell(ai).value),mt=!1,m||(ai+=1)),ai+=1,qe+=1,ki=ge.cells[qe]);for(;!(0,u.le)(ki.visible)&&!ki.visible;)qe+=1,ki=ge.cells[qe]}if(ki.isDataCell){let Qi={};if((0,u.le)(ki.column.footerTemplate)&&(0,u.le)(ki.column.groupCaptionTemplate)&&(0,u.le)(ki.column.groupFooterTemplate)){const fs=this.getSummaryWithoutTemplate(ge.data[ki.column.field]);(0,u.le)(fs)||Vt.push(fs)}else{const fs=this.getTemplateFunction(Qi,ai,ke,ki);let ps;Qi=fs.templateFunction,ke=fs.leastCaptionSummaryIndex;const Nn=ge.data[ki.column.field?ki.column.field:ki.column.columnName];this.parent.isReact||this.parent.isVue?(ps=Qi[(0,u.I$)(Ys,ki.cellType)](Nn,this.parent),this.parent.isReact&&this.parent.renderTemplates()):ps=Qi[(0,u.I$)(Ys,ki.cellType)](Nn),Vt.push(ps[0].textContent),mt=!1}}else Vt.push("");mt&&""!==Vt[ai]&&!(0,u.le)(Vt[ai])&&null!==Vt[ai]&&(mt=!1),qe+=1}else ai--,qe++}if(!se)if(m)for(let ai=this.parent.groupSettings.columns.length;ai<Vt.length-1;ai++)Vt[ai]=Vt[ai+1],Vt[ai+1]=Vt[ai+2]?Vt[ai+2]:"";else Vt.splice(0,1);if(!mt)if(m)for(let ai=0;ai<t.columns.count;ai++)T.cells.getCell(ai).value=Vt[ai].toString(),ai===V&&-1!==ke&&1!==ke?T.cells.getCell(ai).columnSpan=ke-1-V:ai===V&&-1===ke&&(T.cells.getCell(ai).columnSpan=t.columns.count-V);else{const ai=t.rows.addRow();ai.style.setBorder(s),ai.style.setFont(n),ai.style.setTextBrush(r),ai.style.setBackgroundBrush(h),this.parent.trigger(sc,{row:ge,type:Y?"GroupFooter":"Footer",style:ai.cells});for(let Qi=0;Qi<t.columns.count;Qi++)ai.cells.getCell(Qi).value=Vt[Qi].toString()}}}getTemplateFunction(e,t,s,n){return(0,u.le)(n.column.footerTemplate)||n.cellType!==Ys.Summary?(0,u.le)(n.column.groupCaptionTemplate)?e[(0,u.I$)(Ys,Ys.GroupSummary)]=(0,u.MY)(n.column.groupFooterTemplate):(-1===s&&(s=t),e[(0,u.I$)(Ys,Ys.CaptionSummary)]=(0,u.MY)(n.column.groupCaptionTemplate)):e[(0,u.I$)(Ys,Ys.Summary)]=(0,u.MY)(n.column.footerTemplate),{templateFunction:e,leastCaptionSummaryIndex:s}}getSummaryWithoutTemplate(e){return(0,u.le)(e.Sum)?(0,u.le)(e.Average)?(0,u.le)(e.Max)?(0,u.le)(e.Min)?(0,u.le)(e.Count)?(0,u.le)(e.TrueCount)?(0,u.le)(e.FalseCount)?(0,u.le)(e.Custom)?void 0:e.Custom:e.FalseCount:e.TrueCount:e.Count:e.Min:e.Max:e.Average:e.Sum}setColumnProperties(e,t,s,n,r){const h=n.groupSettings.columns.length?n.groupSettings.columns.length-1:0;for(let m=0;m<h;m++)t.columns.getColumn(m).width=20;for(let m=0;m<e.length;m++)(0,u.le)(e[m].textAlign)||(t.columns.getColumn(m+h).format=this.getHorizontalAlignment(e[m].textAlign)),t.style.allowHorizontalOverflow&&!(0,u.le)(e[m].width)&&r&&(t.columns.getColumn(m+h).width="number"==typeof e[m].width?.75*e[m].width:.75*s.getConvertedWidth(e[m].width))}setRecordThemeStyle(e,t){if((0,u.le)(this.gridTheme)||(0,u.le)(this.gridTheme.record))e.style.setTextBrush(new kt(new ot(0,0,0)));else{const n=(0,u.le)(this.gridTheme.record.fontName)?Ot.Helvetica:this.getFontFamily(this.gridTheme.record.fontName),r=(0,u.le)(this.gridTheme.record.fontSize)?9.75:this.gridTheme.record.fontSize,h=this.getFontStyle(this.gridTheme.record);let m=new oe(n,r,h);(0,u.le)(this.gridTheme.record.font)||(m=this.gridTheme.record.font),e.style.setFont(m);let T=new ot;if(!(0,u.le)(this.gridTheme.record.fontColor)){const V=this.hexToRgb(this.gridTheme.record.fontColor);T=new ot(V.r,V.g,V.b)}e.style.setTextBrush(new kt(T))}const s=this.gridTheme&&this.gridTheme.record&&this.gridTheme.record.border?this.getBorderStyle(this.gridTheme.record.border):t;return e.style.setBorder(s),e}processRecord(e,t,s,n,r,h,m,T,V){const Y=T.getGridRowModel(t,n,s,V);for(const se of Y){V++;const ge=this.setRecordThemeStyle(r.rows.addRow(),e),ke=se.cells.length;for(let qe=0;qe<ke;qe++){const mt=se.cells[qe];if(mt.cellType!==Ys.Data)continue;const Vt=mt.column,Qt=Vt.field,ai=(0,u.le)(Qt)?"":Vt.valueAccessor(Qt,se.data,Vt);let Qi,ki=(0,u.le)(ai)?"":ai;Vt.isForeignColumn&&Vt.isForeignColumn()&&(Qi=T.getFData(ki,Vt),ki=(0,u.NA)(Vt.foreignKeyValue,Qi));const fs=se.data,ps=ge.cells.getCell(qe),Nn={data:fs,value:ki,column:Vt,style:void 0,colSpan:1,cell:ps};if(Nn.value="boolean"===Nn.column.type&&"string"==typeof Nn.value?Nn.value:this.exportValueFormatter.formatCellValue(Nn),this.parent.trigger("pdfQueryCellInfo",Nn),(0,u.le)(Nn.image)||(Nn.value=new Zn(Nn.image.base64),Nn.value.height=Nn.image.height||Nn.value.height,Nn.value.width=Nn.image.width||Nn.value.width),ps.value=Nn.value,(0,u.le)(Nn.hyperLink)||(ps.value=this.setHyperLink(Nn)),(0,u.le)(Nn.style)||this.processCellStyle(ps,Nn),Nn.colSpan>1){qe+1+Nn.colSpan>ge.cells.count&&(Nn.colSpan=ge.cells.count-(qe+1)),ps.columnSpan=Nn.colSpan;for(let fr=1;fr<ps.columnSpan;fr++)ge.cells.getCell(qe+fr).value="";qe+=Nn.colSpan-1}}if(se.isExpand){const qe=this.setRecordThemeStyle(r.rows.addRow(),e),mt=qe.cells.getCell(h);mt.columnSpan=qe.cells.count-h,mt.style.cellPadding=new Jn(10,10,10,10),s.isPrinting=!0;const Vt=!(0,u.le)(m)&&m.exportType?m.exportType:"AllPages",Qt=this.helper.createChildGrid(s,se,Vt,this.gridPool),ai=Qt.childGrid,ki=Qt.element;ai.actionFailure=T.failureHandler(this.gridPool,ai,this.globalResolve),this.parent.trigger(Nd,{childGrid:ai,row:se,cell:mt,exportProperties:m}),ai.beforeDataBound=this.childGridCell(mt,ai,m),ai.appendTo(ki)}this.parent.notify(xl,{type:"pdf",rowObj:se})}return V}setHyperLink(e){const t=new Ji;return t.url=e.hyperLink.target,t.text=e.hyperLink.displayText||e.hyperLink.target,t.font=new oe(Ot.Helvetica,9.75),t.brush=new kt(new ot(51,102,187)),t}childGridCell(e,t,s){return n=>(t.beforeDataBound=null,n.cancel=!0,e.value=this.processGridExport(t,n,s),t.destroy(),(0,u.og)(t.element),this.gridPool[t.id]=!0,this.helper.checkAndExport(this.gridPool,this.globalResolve),e)}processCellStyle(e,t){if(!(0,u.le)(t.style.backgroundColor)){const s=this.hexToRgb(t.style.backgroundColor);e.style.backgroundBrush=new kt(new ot(s.r,s.g,s.b))}if((0,u.le)(t.style.textAlignment)||(e.style.stringFormat=this.getHorizontalAlignment(t.style.textAlignment)),(0,u.le)(t.style.cellPadding)||(e.style.cellPadding=t.style.cellPadding),(0,u.le)(t.style.verticalAlignment)||(e.style.stringFormat=this.getVerticalAlignment(t.style.verticalAlignment,e.style.stringFormat)),!(0,u.le)(t.style.textBrushColor)){const s=this.hexToRgb(t.style.textBrushColor);e.style.textBrush=new kt(new ot(s.r,s.g,s.b))}if(!(0,u.le)(t.style.textPenColor)){const s=this.hexToRgb(t.style.textPenColor);e.style.textPen=new rs(new ot(s.r,s.g,s.b))}if((!(0,u.le)(t.style.fontFamily)||!(0,u.le)(t.style.fontSize)||!(0,u.le)(t.style.bold)||!(0,u.le)(t.style.italic)||!(0,u.le)(t.style.underline)||!(0,u.le)(t.style.strikeout))&&(e.style.font=this.getFont(t)),!(0,u.le)(t.style.border)){const s=new Xs,n=t.style.border.width,r=(0,u.le)(n)||"number"!=typeof n?void 0:.75*n;let h=new ot(196,196,196);if(!(0,u.le)(t.style.border.color)){const T=this.hexToRgb(t.style.border.color);h=new ot(T.r,T.g,T.b)}const m=new rs(h,r);(0,u.le)(t.style.border.dashStyle)||(m.dashStyle=this.getDashStyle(t.style.border.dashStyle)),s.all=m,e.style.borders=s}(0,u.le)(t.style.paragraphIndent)||(e.style.stringFormat=new In,e.style.stringFormat.paragraphIndent=t.style.paragraphIndent)}getHorizontalAlignment(e,t){switch(void 0===t&&(t=new In),e){case"Right":t.alignment=Ci.Right;break;case"Center":t.alignment=Ci.Center;break;case"Justify":t.alignment=Ci.Justify;break;case"Left":t.alignment=Ci.Left}return t}getVerticalAlignment(e,t,s){switch(void 0===t&&(t=new In,t=this.getHorizontalAlignment(s,t)),e){case"Bottom":t.lineAlignment=qt.Bottom;break;case"Middle":t.lineAlignment=qt.Middle;break;case"Top":t.lineAlignment=qt.Top}return t}getFontFamily(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}}getFont(e){if(e.font)return e.font;const t=(0,u.le)(e.style.fontSize)?9.75:.75*e.style.fontSize,s=(0,u.le)(e.style.fontFamily)?Ot.TimesRoman:this.getFontFamily(e.style.fontFamily);let n=wt.Regular;return!(0,u.le)(e.style.bold)&&e.style.bold&&(n|=wt.Bold),!(0,u.le)(e.style.italic)&&e.style.italic&&(n|=wt.Italic),!(0,u.le)(e.style.underline)&&e.style.underline&&(n|=wt.Underline),!(0,u.le)(e.style.strikeout)&&e.style.strikeout&&(n|=wt.Strikeout),new oe(s,t,n)}getPageNumberStyle(e){switch(e){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}}setContentFormat(e,t){if(!(0,u.le)(e.size)){const s=.75*e.size.width,n=.75*e.size.height;if(t=new In(Ci.Left,qt.Middle),!(0,u.le)(e.style.hAlign))switch(e.style.hAlign){case"Right":t.alignment=Ci.Right;break;case"Center":t.alignment=Ci.Center;break;case"Justify":t.alignment=Ci.Justify;break;default:t.alignment=Ci.Left}return(0,u.le)(e.style.vAlign)||(t=this.getVerticalAlignment(e.style.vAlign,t)),{format:t,size:new Ei(s,n)}}return null}getPageSize(e){switch(e){case"Letter":return new Ei(612,792);case"Note":return new Ei(540,720);case"Legal":return new Ei(612,1008);case"A0":return new Ei(2380,3368);case"A1":return new Ei(1684,2380);case"A2":return new Ei(1190,1684);case"A3":return new Ei(842,1190);case"A5":return new Ei(421,595);case"A6":return new Ei(297,421);case"A7":return new Ei(210,297);case"A8":return new Ei(148,210);case"A9":return new Ei(105,148);case"B0":return new Ei(2836,4008);case"B1":return new Ei(2004,2836);case"B2":return new Ei(1418,2004);case"B3":return new Ei(1002,1418);case"B4":return new Ei(709,1002);case"B5":return new Ei(501,709);case"Archa":return new Ei(648,864);case"Archb":return new Ei(864,1296);case"Archc":return new Ei(1296,1728);case"Archd":return new Ei(1728,2592);case"Arche":return new Ei(2592,3456);case"Flsa":return new Ei(612,936);case"HalfLetter":return new Ei(396,612);case"Letter11x17":return new Ei(792,1224);case"Ledger":return new Ei(1224,792);default:return new Ei(595,842)}}getDashStyle(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}}getPenFromContent(e){let t=new rs(new ot(0,0,0));if(!(0,u.le)(e.style)&&null!==e.style&&!(0,u.le)(e.style.penColor)){const s=this.hexToRgb(e.style.penColor);t=new rs(new ot(s.r,s.g,s.b))}return t}getBrushFromContent(e){let t=null;if(!(0,u.le)(e.style.textBrushColor)){const s=this.hexToRgb(e.style.textBrushColor);t=new kt(new ot(s.r,s.g,s.b))}return t}hexToRgb(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color...");e=e.substring(1);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}}getFontStyle(e){let t=wt.Regular;return!(0,u.le)(e)&&e.bold&&(t|=wt.Bold),!(0,u.le)(e)&&e.italic&&(t|=wt.Italic),!(0,u.le)(e)&&e.underline&&(t|=wt.Underline),!(0,u.le)(e)&&e.strikeout&&(t|=wt.Strikeout),t}getBorderStyle(e){const t=new Xs;if((0,u.le)(e))t.all=new rs(new ot(234,234,234));else{const s=e.width,n=(0,u.le)(s)||"number"!=typeof s?void 0:.75*s;let r=new ot(196,196,196);if(!(0,u.le)(e.color)){const m=this.hexToRgb(e.color);r=new ot(m.r,m.g,m.b)}const h=new rs(r,n);(0,u.le)(e.dashStyle)||(h.dashStyle=this.getDashStyle(e.dashStyle)),t.all=h}return t}destroy(){}}const ho={header:"."+rl,content:"."+ll,edit:".e-inline-edit",batchEdit:".e-editedbatchcell",editIcon:"e-edit",pager:".e-gridpager",delete:"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup"};var Yp=rt(6895);const Uf=["template"],Zg=["headerTemplate"],Kg=["commandsTemplate"],Jg=["filterItemTemplate"],Qg=["editTemplate"],Xg=["filterTemplate"],o0=["footerTemplate"],dy=["groupFooterTemplate"],uy=["groupCaptionTemplate"],l0=["rowTemplate"],py=["detailTemplate"],fy=["toolbarTemplate"],em=["pagerTemplate"],tm=["editSettingsTemplate"],gy=["groupSettingsCaptionTemplate"];var Kc=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Jc=function(b,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(b,e)};let im=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],my=[],Gf=(()=>{class b extends Si{constructor(t){super(),this.viewContainerRef=t,Lt("currentInstance",this,this.viewContainerRef),this.registerEvents(my),this.directivePropList=im}}return b.\u0275fac=function(t){return new(t||b)(i.Y36(i.s_b))},b.\u0275dir=i.lG2({type:b,selectors:[["e-stacked-column"]],contentQueries:function(t,s,n){if(1&t&&(i.Suo(n,Uf,5),i.Suo(n,Zg,5),i.Suo(n,Kg,5),i.Suo(n,Jg,5),i.Suo(n,Qg,5),i.Suo(n,Xg,5)),2&t){let r;i.iGM(r=i.CRH())&&(s.template=r.first),i.iGM(r=i.CRH())&&(s.headerTemplate=r.first),i.iGM(r=i.CRH())&&(s.commandsTemplate=r.first),i.iGM(r=i.CRH())&&(s.filter_itemTemplate=r.first),i.iGM(r=i.CRH())&&(s.editTemplate=r.first),i.iGM(r=i.CRH())&&(s.filterTemplate=r.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[i.qOj]}),Kc([jt(),Jc("design:type",Object)],b.prototype,"template",void 0),Kc([jt(),Jc("design:type",Object)],b.prototype,"headerTemplate",void 0),Kc([jt(),Jc("design:type",Object)],b.prototype,"commandsTemplate",void 0),Kc([jt(),Jc("design:type",Object)],b.prototype,"filter_itemTemplate",void 0),Kc([jt(),Jc("design:type",Object)],b.prototype,"editTemplate",void 0),Kc([jt(),Jc("design:type",Object)],b.prototype,"filterTemplate",void 0),b})(),Yf=(()=>{class b extends We{constructor(){super("columns")}}return b.\u0275fac=function(t){return new(t||b)},b.\u0275dir=i.lG2({type:b,selectors:[["e-stacked-columns"]],contentQueries:function(t,s,n){if(1&t&&i.Suo(n,Gf,4),2&t){let r;i.iGM(r=i.CRH())&&(s.children=r)}},features:[i.qOj]}),b})();var Id=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ru=function(b,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(b,e)};let sm=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],a0=[],Qc=(()=>{class b extends Si{constructor(t){super(),this.viewContainerRef=t,this.tags=["columns"],Lt("currentInstance",this,this.viewContainerRef),this.registerEvents(a0),this.directivePropList=sm}}return b.\u0275fac=function(t){return new(t||b)(i.Y36(i.s_b))},b.\u0275dir=i.lG2({type:b,selectors:[["e-column"]],contentQueries:function(t,s,n){if(1&t&&(i.Suo(n,Uf,5),i.Suo(n,Zg,5),i.Suo(n,Kg,5),i.Suo(n,Jg,5),i.Suo(n,Qg,5),i.Suo(n,Xg,5),i.Suo(n,Yf,5)),2&t){let r;i.iGM(r=i.CRH())&&(s.template=r.first),i.iGM(r=i.CRH())&&(s.headerTemplate=r.first),i.iGM(r=i.CRH())&&(s.commandsTemplate=r.first),i.iGM(r=i.CRH())&&(s.filter_itemTemplate=r.first),i.iGM(r=i.CRH())&&(s.editTemplate=r.first),i.iGM(r=i.CRH())&&(s.filterTemplate=r.first),i.iGM(r=i.CRH())&&(s.childColumns=r.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[i.qOj]}),b})();Id([jt(),ru("design:type",Object)],Qc.prototype,"template",void 0),Id([jt(),ru("design:type",Object)],Qc.prototype,"headerTemplate",void 0),Id([jt(),ru("design:type",Object)],Qc.prototype,"commandsTemplate",void 0),Id([jt(),ru("design:type",Object)],Qc.prototype,"filter_itemTemplate",void 0),Id([jt(),ru("design:type",Object)],Qc.prototype,"editTemplate",void 0),Id([jt(),ru("design:type",Object)],Qc.prototype,"filterTemplate",void 0);let $f=(()=>{class b extends We{constructor(){super("columns")}}return b.\u0275fac=function(t){return new(t||b)},b.\u0275dir=i.lG2({type:b,selectors:[["e-columns"]],contentQueries:function(t,s,n){if(1&t&&i.Suo(n,Qc,4),2&t){let r;i.iGM(r=i.CRH())&&(s.children=r)}},features:[i.qOj]}),b})();var Zf=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},nm=function(b,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(b,e)};let h0=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],c0=[],qu=(()=>{class b extends Si{constructor(t){super(),this.viewContainerRef=t,Lt("currentInstance",this,this.viewContainerRef),this.registerEvents(c0),this.directivePropList=h0}}return b.\u0275fac=function(t){return new(t||b)(i.Y36(i.s_b))},b.\u0275dir=i.lG2({type:b,selectors:[["e-column"]],contentQueries:function(t,s,n){if(1&t&&(i.Suo(n,o0,5),i.Suo(n,dy,5),i.Suo(n,uy,5)),2&t){let r;i.iGM(r=i.CRH())&&(s.footerTemplate=r.first),i.iGM(r=i.CRH())&&(s.groupFooterTemplate=r.first),i.iGM(r=i.CRH())&&(s.groupCaptionTemplate=r.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[i.qOj]}),b})();Zf([jt(),nm("design:type",Object)],qu.prototype,"footerTemplate",void 0),Zf([jt(),nm("design:type",Object)],qu.prototype,"groupFooterTemplate",void 0),Zf([jt(),nm("design:type",Object)],qu.prototype,"groupCaptionTemplate",void 0);let rm=(()=>{class b extends We{constructor(){super("columns")}}return b.\u0275fac=function(t){return new(t||b)},b.\u0275dir=i.lG2({type:b,selectors:[["e-columns"]],contentQueries:function(t,s,n){if(1&t&&i.Suo(n,qu,4),2&t){let r;i.iGM(r=i.CRH())&&(s.children=r)}},features:[i.qOj]}),b})(),yy=["columns"],d0=[],u0=(()=>{class b extends Si{constructor(t){super(),this.viewContainerRef=t,this.tags=["columns"],Lt("currentInstance",this,this.viewContainerRef),this.registerEvents(d0),this.directivePropList=yy}}return b.\u0275fac=function(t){return new(t||b)(i.Y36(i.s_b))},b.\u0275dir=i.lG2({type:b,selectors:[["e-aggregate"]],contentQueries:function(t,s,n){if(1&t&&i.Suo(n,rm,5),2&t){let r;i.iGM(r=i.CRH())&&(s.childColumns=r.first)}},inputs:{columns:"columns"},features:[i.qOj]}),b})(),om=(()=>{class b extends We{constructor(){super("aggregates")}}return b.\u0275fac=function(t){return new(t||b)},b.\u0275dir=i.lG2({type:b,selectors:[["e-aggregates"]],contentQueries:function(t,s,n){if(1&t&&i.Suo(n,u0,4),2&t){let r;i.iGM(r=i.CRH())&&(s.children=r)}},features:[i.qOj]}),b})();var Xc=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Rd=function(b,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(b,e)};const p0=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],f0=["dataSource"];let Cc=(()=>{let b=class extends ys{constructor(t,s,n,r){super(),this.ngEle=t,this.srenderer=s,this.viewContainerRef=n,this.injector=r,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let h=this.injector.get("GridsFilter");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsPage");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsSelection");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsSort");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsGroup");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsReorder");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsRowDD");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsDetailRow");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsToolbar");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsAggregate");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsSearch");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsVirtualScroll");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsEdit");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsResize");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsExcelExport");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsPdfExport");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsCommandColumn");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsContextMenu");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsFreeze");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsColumnMenu");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsColumnChooser");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsForeignKey");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsInfiniteScroll");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}try{let h=this.injector.get("GridsLazyLoadGroup");-1===this.injectedModules.indexOf(h)&&this.injectedModules.push(h)}catch{}this.registerEvents(p0),this.addTwoWay.call(this,f0),Lt("currentInstance",this,this.viewContainerRef),this.context=new E}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return b.\u0275fac=function(t){return new(t||b)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},b.\u0275cmp=i.Xpm({type:b,selectors:[["ejs-grid"]],contentQueries:function(t,s,n){if(1&t&&(i.Suo(n,l0,5),i.Suo(n,py,5),i.Suo(n,fy,5),i.Suo(n,em,5),i.Suo(n,tm,5),i.Suo(n,gy,5),i.Suo(n,$f,5),i.Suo(n,om,5)),2&t){let r;i.iGM(r=i.CRH())&&(s.rowTemplate=r.first),i.iGM(r=i.CRH())&&(s.detailTemplate=r.first),i.iGM(r=i.CRH())&&(s.toolbarTemplate=r.first),i.iGM(r=i.CRH())&&(s.pagerTemplate=r.first),i.iGM(r=i.CRH())&&(s.editSettings_template=r.first),i.iGM(r=i.CRH())&&(s.groupSettings_captionTemplate=r.first),i.iGM(r=i.CRH())&&(s.childColumns=r.first),i.iGM(r=i.CRH())&&(s.childAggregates=r.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",currencyCode:"currencyCode",currentAction:"currentAction",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualization:"enableVirtualization",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[i.qOj],decls:0,vars:0,template:function(t,s){},encapsulation:2,changeDetection:0}),b})();Xc([jt(),Rd("design:type",Object)],Cc.prototype,"rowTemplate",void 0),Xc([jt(),Rd("design:type",Object)],Cc.prototype,"detailTemplate",void 0),Xc([jt(),Rd("design:type",Object)],Cc.prototype,"toolbarTemplate",void 0),Xc([jt(),Rd("design:type",Object)],Cc.prototype,"pagerTemplate",void 0),Xc([jt(),Rd("design:type",Object)],Cc.prototype,"editSettings_template",void 0),Xc([jt(),Rd("design:type",Object)],Cc.prototype,"groupSettings_captionTemplate",void 0),Cc=Xc([Zt([E]),Rd("design:paramtypes",[i.SBq,i.Qsj,i.s_b,i.zs3])],Cc);let Kf=(()=>{class b{}return b.\u0275fac=function(t){return new(t||b)},b.\u0275mod=i.oAB({type:b}),b.\u0275inj=i.cJS({imports:[Yp.ez]}),b})();const lm={provide:"GridsFilter",useValue:class Vf{constructor(e,t,s){this.predicate="and",this.contentRefresh=!0,this.filterByMethod=!0,this.refresh=!0,this.values={},this.operators={},this.cellText={},this.nextFlMenuOpen="",this.type={Menu:zm,CheckBox:jm,Excel:vv},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.fltrDlgDetails={field:"",isOpen:!1},this.skipNumberInput=["="," ","!"],this.skipStringInput=[">","<","="],this.actualPredicate={},this.parent=e,this.filterSettings=t,this.serviceLocator=s,this.addEventListener(),this.setFullScreenDialog()}render(e){if(bt.j4.getObject("args.isFrozen",e)||this.parent.getFrozenMode()===fn&&bt.j4.getObject("args.renderFrozenRightContent",e))return;const t=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),"FilterBar"===this.parent.filterSettings.type&&t.columns.length){const s=this.parent.element.querySelector(".e-filterbar");s&&(0,u.Od)(s);const n=new Wl(this.serviceLocator,Ys.Filter,t);this.serviceLocator.getService("cellRendererFactory").addCellRenderer(Ys.Filter,new Vm(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),n.element=this.parent.createElement("tr",{className:"e-filterbar"});const h=this.generateRow();h.data=this.values,"Right"===t.getFrozenMode()?t.getFrozenRightHeader().querySelector("thead").appendChild(n.element):this.parent.getHeaderContent().querySelector("thead").appendChild(n.element);const m=this.parent.element.querySelector(".e-rowdragheader");this.element=n.render(h,t.getColumns(),null,null,n.element);const T=this.element.querySelector(".e-detailheadercell");T&&(T.className="e-filterbarcell e-mastercell"),m&&(m.className="e-dragheadercell e-mastercell");const V=[].slice.call(this.element.getElementsByClassName("e-grouptopleftcell"));V.length&&V[V.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify(wa,{case:"filter"})}}showCustomFilter(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog(this.column)}setFilterModel(e){this.filterModule=new this.type[e.filter.type||this.parent.filterSettings.type](this.parent,this.parent.filterSettings,this.serviceLocator,this.customOperators,this)}destroy(){const e=this.parent.element;if(e&&(e.querySelector("."+rl)||e.querySelector("."+ll))){if(this.filterModule&&this.filterModule.destroy(),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowFiltering)&&(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator){const t=[].slice.call(this.element.getElementsByClassName("e-filterbaroperator"));for(let s=0;s<t.length;s++)t[s].ej2_instances[0]&&t[s].ej2_instances[0].destroy()}if(this.element){this.element.parentElement&&(0,u.Od)(this.element);const t=this.parent.getHeaderContent().querySelector(".e-filterbar");this.parent.isFrozenGrid()&&t&&(0,u.Od)(t)}}}setFullScreenDialog(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,ao.isFilter)}generateRow(){const t=new Ta({});return t.cells=this.generateCells(),t}generateCells(){const e=[];if(this.parent.allowGrouping)for(let t=0,s=this.parent.groupSettings.columns.length;t<s;t++)e.push(this.generateCell({},Ys.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&e.push(this.generateCell({},Ys.DetailHeader)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&e.push(this.generateCell({},Ys.RowDragHIcon));for(const t of this.parent.getColumns())e.push(this.generateCell(t));return"Right"===this.parent.getFrozenMode()&&e.push(this.generateCell({},Ys.RowDragHIcon)),e}generateCell(e,t){const s={visible:e.visible,isDataCell:!1,rowId:"",column:e,cellType:t||Ys.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new na(s)}updateModel(){const e=this.parent.getColumnByField(this.fieldName);this.filterObjIndex=this.getFilteredColsIndexByField(e),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex];const t=Array.isArray(this.value)?this.value:[this.value],s=this.parent.dataSource.adaptor&&this.parent.dataSource.adaptor.getModuleName?this.parent.dataSource.adaptor.getModuleName():void 0;for(let n=0,r=t.length;n<r;n++){const h=e.isForeignColumn()?e.foreignKeyValue:this.fieldName,m="notequal"===this.operator;this.currentFilterObject={field:h,uid:e.uid,isForeignKey:e.isForeignColumn(),operator:this.operator,value:t[n],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}};const T=this.getFilteredColsIndexByField(e);T>-1&&!Array.isArray(this.value)?this.filterSettings.columns[T]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject),(0,u.le)(this.value)&&("equal"===this.operator||"notequal"===this.operator)&&"ODataAdaptor"!==s&&"ODataV4Adaptor"!==s&&(this.filterSettings.columns=[],"string"===e.type&&this.filterSettings.columns.push({field:h,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:m?"and":"or",value:""}),this.filterSettings.columns.push({field:h,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:m?"and":"or",value:void 0}),this.filterSettings.columns.push({field:h,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:m?"and":"or",value:null}))}this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()}getFilteredColsIndexByField(e){const t=this.filterSettings.columns;for(let s=0,n=t.length;s<n;s++)if(t[s].uid===e.uid||e.isForeignColumn()&&this.parent.getColumnByUid(e.uid).field===e.foreignKeyValue)return s;return-1}onActionComplete(e){const t=this.isRemove?{requestType:"filtering",type:vn}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:(0,u.le)(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:vn};this.parent.trigger(vn,(0,u.l7)(e,t)),this.isRemove=!1}wireEvents(){u.bi.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)}unWireEvents(){u.bi.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())}refreshFilterValue(){"FilterBar"===this.filterSettings.type&&this.filterSettings.columns.length&&!this.parent.getCurrentViewRecords().length&&this.parent.enablePersistence&&(this.initialEnd(),this.parent.removeEventListener(Zo,this.refreshFilterValueFn))}initialEnd(){if(this.parent.off(F,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){const e=this.parent;this.contentRefresh=!1,this.initialLoad=!0;for(const t of e.filterSettings.columns)this.filterByColumn(t.field,t.operator,t.value,t.predicate,t.matchCase,t.ignoreAccent,t.actualFilterValue,t.actualOperator);this.initialLoad=!1,this.updateFilterMsg(),this.contentRefresh=!0}}addEventListener(){this.parent.isDestroyed||(this.parent.on(Kl,this.setFullScreenDialog,this),this.parent.on(H,this.enableAfterRender,this),this.parent.on(So,this.onActionComplete,this),this.parent.on(pe,this.onPropertyChanged,this),this.parent.on(Ko,this.keyUpHandler,this),this.parent.on(Ph,this.columnPositionChanged,this),this.parent.on(ei,this.render,this),this.parent.on(F,this.initialEnd,this),this.parent.on(Ea,this.filterMenuClose,this),this.docClickHandler=this.clickHandler.bind(this),u.bi.add(document,"click",this.docClickHandler,this),u.bi.add(this.parent.element,"mousedown",this.refreshClearIcon,this),this.parent.on(Sa,this.columnMenuFilter,this),this.parent.on(Ll,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on(ic,this.clickHandler,this),this.parent.on(Tr,this.destroy,this),this.refreshFilterValueFn=this.refreshFilterValue.bind(this),this.parent.addEventListener(Zo,this.refreshFilterValueFn))}removeEventListener(){u.bi.remove(document,"click",this.docClickHandler),u.bi.remove(this.parent.element,"mousedown",this.refreshClearIcon),!this.parent.isDestroyed&&(this.parent.off(Kl,this.setFullScreenDialog),this.parent.off(H,this.enableAfterRender),this.parent.off(So,this.onActionComplete),this.parent.off(pe,this.onPropertyChanged),this.parent.off(Ko,this.keyUpHandler),this.parent.off(Ph,this.columnPositionChanged),this.parent.off(ei,this.render),this.parent.off(Sa,this.columnMenuFilter),this.parent.off(Ea,this.filterMenuClose),this.parent.off(Ll,this.filterIconClickHandler),this.parent.off(ic,this.clickHandler),this.parent.off(Tr,this.destroy))}refreshClearIcon(e){if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type&&e.target.classList.contains("e-clear-icon")){const t=e.target.previousElementSibling;J.II.setValue(null,t,"Never",!0),"Immediate"===this.filterSettings.mode&&this.removeFilteredColsByField(t.id.slice(0,-14))}}filterMenuClose(){this.fltrDlgDetails.isOpen=!1}filterByColumn(e,t,s,n,r,h,m,T){const V=this.parent;let Y;if(this.column=V.grabColumnByFieldFromAllCols(e),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&(0,u.le)(this.column.filterBarTemplate)&&(t=this.getOperatorName(e)),!this.column)return;if("FilterBar"===this.filterSettings.type&&(Y=V.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),!(0,u.le)(this.column.allowFiltering)&&!this.column.allowFiltering)return void this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText});if(Rh(V))return void V.notify(Ca,{instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:s,arg4:n,arg5:r,arg6:h,arg7:m,arg8:T});if(this.predicate=n||(Array.isArray(s)?"or":"and"),this.value=s,this.matchCase=r||!1,this.ignoreAccent=this.ignoreAccent=(0,u.le)(h)?this.parent.filterSettings.ignoreAccent:h,this.fieldName=e,this.operator=t,s=(0,u.le)(s)?s:s.toString(),("number"===this.column.type||"date"===this.column.type)&&(this.matchCase=!0),V.getColumnHeaderByField(e).setAttribute("aria-filtered","true"),Y&&"FilterBar"===this.filterSettings.type){if(s&&s.length<1||!this.filterByMethod&&this.checkForSkipInput(this.column,s))return this.filterStatusMsg=s&&s.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),void this.updateFilterMsg();Y.value!==s&&(Y.value=s)}(0,u.le)(this.column.format)?this.values[this.column.field]=s:(this.applyColumnFormat(s),this.initialLoad&&"FilterBar"===this.filterSettings.type&&(Y.value=this.values[this.column.field]));const se={field:this.fieldName,predicate:n,matchCase:r,ignoreAccent:h,operator:this.operator,value:this.value,type:this.column.type};this.parent.filterSettings.columns.filter(ke=>ke.field===this.fieldName).length>1&&!(0,u.le)(this.actualPredicate[this.fieldName])?this.actualPredicate[this.fieldName].push(se):this.actualPredicate[this.fieldName]=[se],!this.checkAlreadyColFiltered(this.column.field)&&this.updateModel()}applyColumnFormat(e){const t="date"===this.column.type||"datetime"===this.column.type?new Date(e):parseFloat(e);this.values[this.column.field]=("date"===this.column.type||"datetime"===this.column.type)&&e&&e.split(",").length>1?e.split(",").map(s=>this.setFormatForFlColumn(new Date(s),this.column)):this.setFormatForFlColumn(t,this.column)}skipUid(e){let t=!0;const s=Object.keys(e);for(let n=0;n<s.length;n++){const r=Object.keys(e[s[n]]);1===r.length&&"uid"===r[0]&&(t=!1)}return t}onPropertyChanged(e){if(e.module===this.getModuleName())for(const t of Object.keys(e.properties))switch(t){case"columns":const s="columns",n={currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:lr,cancel:!1};if(this.contentRefresh&&this.skipUid(e.properties[s])){if(this.parent.notify(Me,n),n.cancel)return void((0,u.le)(this.prevFilterObject)?this.filterSettings.columns.splice(this.filterSettings.columns.length-1,1):this.filterSettings.columns[this.filterObjIndex]=this.prevFilterObject);this.updateFilterIcon(),this.refreshFilterSettings(),this.updateFilterMsg(),this.updateFilter()}break;case"showFilterBarStatus":e.properties[t]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"showFilterBarOperator":case"type":this.parent.refreshHeader(),this.refreshFilterSettings()}}refreshFilterSettings(){if("FilterBar"===this.filterSettings.type){for(let e=0;e<this.filterSettings.columns.length;e++){this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[e].uid);let t=this.filterSettings.columns[e].value;t=!(0,u.le)(t)&&t.toString(),(0,u.le)(this.column.format)?this.values[this.filterSettings.columns[e].field]=this.filterSettings.columns[e].value:this.applyColumnFormat(t);const s=this.getFilterBarElement(this.column.field);s&&(s.value=""===this.cellText[this.filterSettings.columns[e].field]||(0,u.le)(this.cellText[this.filterSettings.columns[e].field])?this.filterSettings.columns[e].value:this.cellText[this.column.field])}if(0===this.filterSettings.columns.length){const e=this.parent.getColumns();for(let t=0;t<e.length;t++){const s=this.getFilterBarElement(e[t].field);s&&""!==s.value&&(s.value="",delete this.values[e[t].field])}}}}updateFilterIcon(){if(0===this.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered")){const e=[].slice.call(this.parent.element.getElementsByClassName("e-filtered"));for(let t=0,s=e.length;t<s;t++)e[t].removeAttribute("aria-filtered"),e[t].classList.remove("e-filtered")}}getFilterBarElement(e){const t="[id='"+e+"_filterBarcell']";let s;return t&&!(0,u.le)(this.element)&&(s=this.element.querySelector(t)),s}refreshFilter(){this.refreshFilterSettings(),this.updateFilterMsg()}clearFiltering(e){const t=Mf(this.filterSettings.columns);if(!(0,u.le)(e))return this.refresh=!1,e.forEach(r=>{this.removeFilteredColsByField(r,!1)}),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),void(this.refresh=!0);if(Rh(this.parent))return void this.parent.notify(Ca,{instance:this,handler:this.clearFiltering});for(let r=0;r<t.length;r++)t[r].uid=t[r].uid||this.parent.getColumnByField(t[r].field).uid;const s=t.map(r=>r.uid),n=s.filter((r,h)=>s.indexOf(r)===h);this.refresh=!1;for(let r=0,h=n.length;r<h;r++)this.removeFilteredColsByField(this.parent.getColumnByUid(n[r]).field,!1);if(this.refresh=!0,n.length&&this.parent.renderModule.refresh(),0===this.parent.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered")){const r=[].slice.call(this.parent.element.getElementsByClassName("e-filtered"));for(let h=0,m=r.length;h<m;h++)r[0].removeAttribute("aria-filtered"),r[0].classList.remove("e-filtered")}this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()}checkAlreadyColFiltered(e){const t=this.filterSettings.columns;for(const s of t)if(s.field===e&&s.value===this.value&&s.operator===this.operator&&s.predicate===this.predicate)return!0;return!1}columnMenuFilter(e){this.column=e.col;const t=(0,u.oq)(e.target,"#"+e.id);e.isClose&&!t?this.filterModule.closeDialog():t&&this.filterDialogOpen(this.column,e.target)}filterDialogOpen(e,t,s,n){this.filterModule&&this.filterModule.closeDialog(),this.setFilterModel(e),this.filterModule.openDialog(this.createOptions(e,t,s,n))}createOptions(e,t,s,n){const r=this.parent,h=e.filter.dataSource||r.dataSource&&"result"in r.dataSource?r.dataSource:r.getDataModule().dataManager,m=e.filter.type||this.parent.filterSettings.type;return{type:e.type,field:e.field,displayName:e.headerText,dataSource:h,format:e.format,height:800,columns:r.getColumns(),filteredColumns:r.filterSettings.columns,target:t,dataManager:r.getDataModule().dataManager,formatFn:e.getFormatter(),ignoreAccent:r.filterSettings.ignoreAccent,parserFn:e.getParser(),query:r.query,template:e.getFilterItemTemplate(),hideSearchbox:!(0,u.le)(e.filter.hideSearchbox)&&e.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:r.getLocaleConstants(),position:{X:s,Y:n},column:e,foreignKeyValue:e.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:r.localeObj,isRemote:r.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity,isResponsiveFilter:this.parent.enableAdaptiveUI,operator:this.actualPredicate[e.field]&&"Menu"===m?this.actualPredicate[e.field][0].operator:"equal"}}removeFilteredColsByField(e,t){let s;const n=this.filterSettings.columns;if(Rh(this.parent))return void this.parent.notify(Ca,{instance:this,handler:this.removeFilteredColsByField,arg1:e,arg2:t});const r=n.map(m=>m.uid),h=r.filter((m,T)=>r.indexOf(m)===T);for(let m=0,T=h.length;m<T;m++){n[m].uid=n[m].uid||this.parent.getColumnByField(n[m].field).uid;let V=n.length;const Y=this.parent.grabColumnByUidFromAllCols(h[m]);if(Y.field===e||Y.field===Y.foreignKeyValue&&Y.isForeignColumn()){const se=this.filterSettings.columns.filter(ke=>ke.uid===Y.uid)[0];if("FilterBar"===this.filterSettings.type&&!t){const ke="[id='"+Y.field+"_filterBarcell']";s=this.parent.getHeaderContent().querySelector(ke),s&&(s.value="",delete this.values[e])}for(;V--;)n[V].uid===Y.uid&&n.splice(V,1);const ge=this.parent.getColumnHeaderByField(Y.field);ge.removeAttribute("aria-filtered"),"FilterBar"!==this.filterSettings.type&&ge.querySelector(this.parent.showColumnMenu&&Y.showColumnMenu?".e-columnmenu":".e-icon-filter").classList.remove("e-filtered"),this.isRemove=!0,this.actualPredicate[e]&&delete this.actualPredicate[e],this.values[e]&&delete this.values[e],this.refresh&&this.parent.notify(Me,{requestType:"filtering",type:lr,currentFilterObject:se,currentFilterColumn:Y,action:"clearFilter"});break}}this.updateFilterMsg()}getModuleName(){return"filter"}keyUpHandlerImmediate(e){13!==e.keyCode&&this.keyUpHandler(e)}keyUpHandler(e){const t=this.parent,s=e.target;if(s&&(0,u.wB)(s,".e-filterbar input")){const n=(0,u.oq)(s,"th.e-filterbarcell");if(this.column=t.getColumnByUid(n.getAttribute("e-mappinguid")),!this.column)return;if("altDownArrow"===e.action&&this.parent.filterSettings.showFilterBarOperator){const r=(0,u.oq)(s,"span").querySelector(".e-filterbaroperator");r.ej2_instances[0].showPopup(),r.focus()}("Immediate"===this.filterSettings.mode||13===e.keyCode&&!e.target.classList.contains("e-filterbaroperator"))&&9!==e.keyCode&&!this.column.filterTemplate&&(this.value=s.value.trim(),this.processFilter(e))}if("altDownArrow"===e.action&&"FilterBar"!==this.filterSettings.type){const n=t.focusModule.currentInfo.element;if(n&&n.classList.contains("e-headercell")){const r=t.getColumnByUid(n.firstElementChild.getAttribute("e-mappinguid"));this.openMenuByField(r.field),this.parent.focusModule.clearIndicator()}}"escape"===e.action&&"Menu"===this.filterSettings.type&&this.filterModule&&(this.filterModule.closeDialog(),t.notify(Hh,{}))}updateCrossIcon(e){e.value.length&&e.nextElementSibling.classList.remove("e-hide")}updateFilterMsg(){if("FilterBar"===this.filterSettings.type){const e=this.parent;let t;const s=this.filterSettings.columns;let n;if(!this.filterSettings.showFilterBarStatus)return;if(s.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(let r=0;r<s.length;r++)if(n=e.grabColumnByUidFromAllCols(s[r].uid)||e.grabColumnByFieldFromAllCols(s[r].field),r&&(this.filterStatusMsg+=" && "),(0,u.le)(n.format))this.filterStatusMsg+=n.headerText+": "+this.values[n.field];else{const h="date"===n.type||"datetime"===n.type?this.valueFormatter.fromView(this.values[n.field],n.getParser(),n.type):this.values[n.field];t="date"===n.type||"datetime"===n.type?this.setFormatForFlColumn(h,n):this.serviceLocator.getService("valueFormatter").toView(h,n.getParser()).toString(),this.filterStatusMsg+=n.headerText+": "+t}}e.allowPaging&&e.updateExternalMessage(this.filterStatusMsg),this.filterStatusMsg=""}}setFormatForFlColumn(e,t){return this.serviceLocator.getService("valueFormatter").toView(e,t.getFormatter()).toString()}checkForSkipInput(e,t){let s;if("number"===e.type)(bt.j4.operatorSymbols[t]||this.skipNumberInput.indexOf(t)>-1)&&(s=!0);else if("string"===e.type)for(const n of t)this.skipStringInput.indexOf(n)>-1&&(s=!0);return s}processFilter(e){this.stopTimer(),this.startTimer(e)}startTimer(e){this.timer=window.setInterval(()=>{this.onTimerTick()},13===e.keyCode?0:this.filterSettings.immediateModeDelay)}stopTimer(){window.clearInterval(this.timer)}onTimerTick(){const e="[id='"+this.column.field+"_filterBarcell']";let s,t=this.element.querySelector(e);if(!t&&this.parent.isFrozenGrid()&&(t=this.parent.getHeaderContent().querySelector(e)),this.cellText[this.column.field]=t.value,this.stopTimer(),(0,u.le)(this.column.filterBarTemplate))s=JSON.parse(JSON.stringify(t.value));else{let n=this.column.filterBarTemplate.read;"string"==typeof n&&(n=(0,u.NA)(n,window)),(0,u.le)(n)||(this.value=n.call(this,t))}(0,u.le)(this.value)||""===this.value?this.removeFilteredColsByField(this.column.field):(this.validateFilterValue(this.value),this.filterByMethod=!1,this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent),this.filterByMethod=!0,t.value=s,this.updateFilterMsg())}validateFilterValue(e){let t,s;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":this.operator=this.column.filter.operator?this.column.filter.operator:this.filterOperators.equal,t=[">","<","=","!"];for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1){s=n;break}this.getOperator(e.substring(s)),0!==s&&(this.value=e.substring(0,s)),""!==this.value&&e.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,""!==this.value&&!(this.value instanceof Date)&&(this.getOperator(e),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),(0,u.le)(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,"*"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(e.length-1)?(this.value=this.value.slice(0,-1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.endsWith):this.operator=this.column.filter.operator?this.column.filter.operator:this.filterOperators.startsWith;break;case"boolean":"true"===e.toLowerCase()||"1"===e?this.value=!0:"false"===e.toLowerCase()||"0"===e?this.value=!1:e.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.operator=this.column.filter.operator?this.column.filter.operator:this.filterOperators.equal}}getOperator(e){const t=e.charAt(0),s=e.slice(0,2),n=(0,u.l7)({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},bt.j4.operatorSymbols);(n.hasOwnProperty(t)||n.hasOwnProperty(s))&&(this.operator=n[t],this.value=e.substring(1),this.operator||(this.operator=n[s],this.value=e.substring(2))),(this.operator===this.filterOperators.lessThan||this.operator===this.filterOperators.greaterThan)&&"="===this.value.charAt(0)&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))}columnPositionChanged(){}getLocalizedCustomOperators(){const e=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}],numberOperator:e,dateOperator:e,datetimeOperator:e,booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]}}openMenuByField(e){const t=this.parent;if(t.enableAdaptiveUI)return void this.showCustomFilter(!1);const s=t.getColumnByField(e),r=t.getColumnHeaderByField(e).querySelector(".e-filtermenudiv");if(!r)return;const h=t.element.getBoundingClientRect(),m=r.getBoundingClientRect();this.filterDialogOpen(s,r,m.right-h.left,m.bottom-h.top)}filterIconClickHandler(e){const t=e.target;if(t.classList.contains("e-filtermenudiv")&&("Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type)){const n=this.parent.getColumnByUid(Zi(t,"e-headercell").firstElementChild.getAttribute("e-mappinguid"));if(this.column=n,this.fltrDlgDetails.field===n.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:n.field,isOpen:!0},this.openMenuByField(n.field)}}clickHandler(e){if("FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&(Zi(e.target,"e-filterbarcell")&&e.target.classList.contains("e-input-group-icon")&&(0,u.oq)(e.target,"div").querySelector(".e-filterbaroperator").focus(),e.target.classList.contains("e-list-item"))){const t=document.querySelector(".e-popup-open").getAttribute("id").replace("_popup","");-1!==t.indexOf("grid-column")&&(0,u.oq)(document.getElementById(t),"div").querySelector(".e-filtertext").focus()}if("Immediate"===this.filterSettings.mode||"Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type){const t=e.target,s=t.classList.contains("e-day"),n=Zi(this.parent.element,"e-dialog");let r=!1;const h=Zi(t,"e-popup"),m=this.parent.element.querySelector(".e-filter-popup");if(n&&h&&(r=n.id===h.id),m&&(Zi(t,"e-excel-ascending")||Zi(t,"e-excel-descending"))&&this.filterModule.closeDialog(t),Zi(t,"e-filter-popup")||t.classList.contains("e-filtermenudiv"))return;this.filterModule&&!Zi(t,"e-popup-wrapper")&&!(0,u.oq)(t,".e-filter-item.e-menu-item")&&!s&&(r&&!Zi(t,"e-filter-popup")&&!Zi(t,"e-popup-flmenu")||!h&&m)&&(this.filterModule.isresetFocus=Zi(t,"e-grid")&&Zi(t,"e-grid").id===this.parent.element.id,this.filterModule.closeDialog(t))}}filterHandler(e){this.actualPredicate[e.field]=e.actualPredicate;const t=new bt.hm(this.filterSettings.columns),s=(new bt.AE).where("field",this.filterOperators.equal,e.field),n=t.executeLocal(s);for(let T=0;T<n.length;T++){let V=-1;for(let Y=0;Y<this.filterSettings.columns.length;Y++)if(n[T].field===this.filterSettings.columns[Y].field){V=Y;break}-1!==V&&this.filterSettings.columns.splice(V,1)}this.values[e.field]&&delete this.values[e.field];const r=this.parent.getColumnByField(e.field),h=this.parent.showColumnMenu&&r.showColumnMenu?".e-columnmenu":".e-icon-filter",m=this.parent.getColumnHeaderByField(e.field).querySelector(h);"filtering"===e.action?(this.filterSettings.columns=this.filterSettings.columns.concat(e.filterCollection),this.filterSettings.columns.length&&m&&m.classList.add("e-filtered")):(m&&m.classList.remove("e-filtered"),e.requestType="filtering",this.parent.renderModule.refresh(e)),this.parent.dataBind()}updateFilter(){const e=this.filterSettings.columns;this.actualPredicate={};for(let t=0;t<e.length;t++){this.column=this.parent.getColumnByField(e[t].field)||Ve(e[t].field,this.parent.getForeignKeyColumns());let s=e[t].field;this.parent.getColumnByField(e[t].field)||(s=Ve(e[t].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(s,e[t].operator,e[t].value,e[t].type,e[t].predicate,e[t].matchCase,e[t].ignoreAccent,e[t].uid)}}refreshFilterIcon(e,t,s,n,r,h,m,T){const V={field:e,predicate:r,matchCase:h,ignoreAccent:m,operator:t,value:s,type:n};this.actualPredicate[e]?this.actualPredicate[e].push(V):this.actualPredicate[e]=[V];const Y=T?this.parent.grabColumnByUidFromAllCols(T).field:e;this.addFilteredClass(Y)}addFilteredClass(e){let t;const s=this.parent.getColumnByField(e);this.parent.showColumnMenu&&s.showColumnMenu?t=this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu"):s&&(t=this.parent.getColumnHeaderByField(e).querySelector(".e-icon-filter")),t&&t.classList.add("e-filtered")}getFilterUIInfo(){return this.filterModule?this.filterModule.getFilterUIInfo():{}}getOperatorName(e){return document.getElementById(this.parent.getColumnByField(e).uid).ej2_instances[0].value}renderCheckboxOnFilterMenu(){return this.filterModule.renderCheckBoxMenu()}}},am={provide:"GridsPage",useValue:Bf},g0={provide:"GridsSort",useValue:su},m0={provide:"GridsGroup",useValue:xd},hm={provide:"GridsToolbar",useValue:class U0{constructor(e,t){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}render(){this.l10n=this.serviceLocator.getService("localization");const e=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"],t=this.parent.enableAdaptiveUI,s=["Edit","Delete","Update","Cancel"];for(const n of e){const r=n.toLowerCase(),h=r[0].toUpperCase()+r.slice(1);this.predefinedItems[n]={id:this.gridID+"_"+r,prefixIcon:"e-"+r,text:this.l10n.getConstant(h),tooltipText:this.l10n.getConstant(h)},t&&(this.predefinedItems[n].text="",this.predefinedItems[n].visible=-1===s.indexOf(n))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:t?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")})),this.parent.enableAdaptiveUI&&this.parent.toolbar.indexOf("Search")>-1&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar()}getToolbar(){return this.toolbar.element}destroy(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode&&(0,u.Od)(this.element))}bindSearchEvents(){this.searchElement=(0,u.Ys)("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()}toolbarCreated(e){this.element.querySelector(".e-search-wrapper")&&(this.element.querySelector(".e-search-wrapper").innerHTML=!this.parent.enableAdaptiveUI||e?'<div class="e-input-group e-search" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>':'<span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>'),this.bindSearchEvents()}createToolbar(){const e=this.getItems();this.toolbar=new ce.o8({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this)}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0;const s="viewContainerRef";if(this.parent[s]&&(this.toolbar.registeredTemplate={},this.toolbar[s]=this.parent[s]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate)if("string"==typeof this.parent.toolbarTemplate)this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{const h=this.parent.element.id+"toolbarTemplate";this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate?(_o(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",h,null,null,this.element),this.parent.renderTemplates()):Dl(this.element,_o(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent())}addReactToolbarPortals(e){this.parent.isReact&&e&&(this.parent.portals=this.parent.portals.concat(e),this.parent.renderTemplates())}renderResponsiveSearch(e){e?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(wh.isSearch),this.searchElement=(0,u.Ys)("#"+this.gridID+"_searchbar",this.element),Zi(this.searchElement,"e-toolbar-right").classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(wh.isInitial)}refreshResponsiveToolbarItems(e){if(e===wh.isInitial){const t=this.parent.element.id,s=[t+"_edit",t+"_delete"],n=this.parent.getSelectedRowIndexes(),r=[t+"_responsiveback",t+"_update",t+"_cancel"];for(const h of this.toolbar.items){const m=this.toolbar.element.querySelector("#"+h.id);m&&(s.indexOf(h.id)>-1?n.length?m.parentElement.classList.remove("e-hidden"):m.parentElement.classList.add("e-hidden"):-1===r.indexOf(h.id)?m.parentElement.classList.remove("e-hidden"):m.parentElement.classList.add("e-hidden"))}this.searchElement&&(Zi(this.searchElement,"e-toolbar-right").classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(e===wh.isSearch){const t=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"];for(const s of this.toolbar.items){const n=this.toolbar.element.querySelector("#"+s.id);n&&(t.indexOf(s.id)>-1?n.parentElement.classList.remove("e-hidden"):n.parentElement.classList.add("e-hidden"))}}}refreshToolbarItems(e){const t=this.parent;let s=[],n=[];const r=t.editSettings,h=t.currentViewData&&t.currentViewData.length;r.allowAdding?s.push(this.gridID+"_add"):n.push(this.gridID+"_add"),r.allowEditing&&h?s.push(this.gridID+"_edit"):n.push(this.gridID+"_edit"),r.allowDeleting&&h?s.push(this.gridID+"_delete"):n.push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?t.element.getElementsByClassName("e-updatedtd").length&&(r.allowAdding||r.allowEditing)?(s.push(this.gridID+"_update"),s.push(this.gridID+"_cancel")):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")):t.isEdit&&(r.allowAdding||r.allowEditing)?(s=[this.gridID+"_update",this.gridID+"_cancel"],n=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")),this.enableItems(s,!0),this.enableItems(n,!1)}getItems(){const e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&e.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&e.push(this.getItemObject("responsiveSort")));for(const s of t)switch(typeof s){case"number":e.push(this.getItemObject(this.items[s]));break;case"string":e.push(this.getItemObject(s));break;default:e.push(this.getItem(s))}return this.parent.enableAdaptiveUI&&this.parent.toolbar.indexOf("Search")>-1&&e.push(this.getItemObject("responsiveBack")),e}getItem(e){const t=this.predefinedItems[e.text];return t?(0,u.l7)(t,t,e):e}getItemObject(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}}enableItems(e,t){for(const s of e){const n=(0,u.Ys)("#"+s,this.element);n&&this.toolbar.enableItems(n.parentElement,t)}}toolbarClickHandler(e){const t=this.parent,s=this.gridID;(0,u.l7)(e,{cancel:!1});const r=e.originalEvent;t.trigger("toolbarClick",e,h=>{if(h.originalEvent=h.originalEvent?h.originalEvent:r,!h.cancel)switch(!(0,u.le)(h.item)&&h.item.id){case s+"_print":t.print();break;case s+"_edit":t.startEdit();break;case s+"_update":t.endEdit();break;case s+"_cancel":t.closeEdit();break;case s+"_add":t.addRecord();break;case s+"_delete":t.deleteRecord();break;case s+"_search":h.originalEvent.target.id===s+"_searchbutton"&&this.searchElement?this.search():t.enableAdaptiveUI&&!this.searchElement&&(h.originalEvent.target.classList.contains("e-search-wrapper")||h.originalEvent.target.id===s+"_searchbutton")&&this.renderResponsiveSearch(!0);break;case s+"_columnchooser":const m=this.parent.element.querySelector(".e-ccdiv");let T=m.getBoundingClientRect().top;const V=m.getBoundingClientRect().left,Y=h.originalEvent.target;T=m.getBoundingClientRect().top+m.offsetTop,t.createColumnchooser(V,T,Y);break;case s+"_responsivefilter":t.showResponsiveCustomFilter();break;case s+"_responsivesort":t.showResponsiveCustomSort();break;case s+"_responsiveback":this.renderResponsiveSearch(!1)}})}modelChanged(e){"edit"===e.module&&this.refreshToolbarItems()}onPropertyChanged(e){e.module!==this.getModuleName()||!this.parent.toolbar||(this.element&&(0,u.Od)(this.element),this.render())}keyUpHandler(e){13===e.keyCode&&this.search()}search(){this.parent.search(this.searchElement.value)}updateSearchBox(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)}wireEvent(){this.searchElement&&(this.searchBoxObj=new wp(this.searchElement),u.bi.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent())}unWireEvent(){this.searchElement&&(u.bi.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent())}reRenderToolbar(){this.element&&(0,u.Od)(this.element),this.render()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Kl,handler:this.reRenderToolbar},{event:it,handler:this.render},{event:H,handler:this.onPropertyChanged},{event:pe,handler:this.updateSearchBox.bind(this)},{event:Me,handler:this.refreshToolbarItems},{event:mh,handler:this.refreshToolbarItems},{event:pe,handler:this.modelChanged},{event:Oo,handler:this.refreshToolbarItems},{event:Ll,handler:this.removeResponsiveSearch},{event:oc,handler:this.reRenderToolbar},{event:Tr,handler:this.destroy}],pl(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(qr,this.rowSelectedFunction),this.parent.addEventListener(kl,this.rowDeSelectedFunction))}removeEventListener(){this.parent.isDestroyed||(pl(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(qr,this.rowSelectedFunction),this.parent.removeEventListener(kl,this.rowDeSelectedFunction))}removeResponsiveSearch(e){const t=e.target,s=t.classList.contains("e-search-icon")||t.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!s&&this.searchElement&&!Zi(e.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)}rowSelected(){this.parent.enableAdaptiveUI&&this.refreshResponsiveToolbarItems(wh.isInitial)}getModuleName(){return"toolbar"}}},b0={provide:"GridsEdit",useValue:Km},cm={provide:"GridsResize",useValue:Np},dm={provide:"GridsExcelExport",useValue:Nu},ou={provide:"GridsPdfExport",useValue:Bu},C0={provide:"GridsContextMenu",useValue:class Qm{constructor(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(H,this.enableAfterRenderMenu,this),this.parent.on(fa,this.render,this),this.parent.on(Tr,this.destroy,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(fa,this.render),this.parent.off(H,this.enableAfterRenderMenu),this.parent.off(Tr,this.destroy),u.bi.remove(this.element,"keydown",this.keyDownHandler.bind(this)))}keyDownHandler(e){("Tab"===e.code||9===e.which)&&this.contextMenu.close(),"Escape"===e.code&&(this.contextMenu.close(),this.parent.notify(Hh,{}))}render(){this.parent.element.classList.add("e-noselect"),this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_cmenu"}),u.bi.add(this.element,"keydown",this.keyDownHandler.bind(this)),this.parent.element.appendChild(this.element);const e="#"+this.gridID;this.contextMenu=new ce.xV({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-grid-menu"}),this.contextMenu.appendTo(this.element)}enableAfterRenderMenu(e){e.module===this.getModuleName()&&e.enable&&(this.contextMenu&&(this.contextMenu.destroy(),(0,u.Od)(this.element),this.parent.element.classList.remove("e-noselect")),this.render())}getMenuItems(){const e=[],t=[];for(const s of this.parent.contextMenuItems)"string"==typeof s&&-1!==this.getDefaultItems().indexOf(s)?-1!==s.toLocaleLowerCase().indexOf("export")?t.push(this.buildDefaultItems(s)):e.push(this.buildDefaultItems(s)):"string"!=typeof s&&e.push(s);if(t.length>0){const s=this.buildDefaultItems("export");s.items=t,e.push(s)}return e}getLastPage(){let e=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(e+=1),e}contextMenuOpen(){this.isOpen=!0}contextMenuItemClick(e){switch(this.getKeyFromId(e.item.id)){case"AutoFitAll":this.parent.autoFitColumns([]);break;case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Edit":this.parent.editModule&&("Batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute(go),10))&&this.parent.editModule.editCell(parseInt(this.row.getAttribute(xn),10),this.parent.getColumns()[parseInt(this.cell.getAttribute(go),10)].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit(this.row)));break;case"Delete":this.parent.editModule&&("Batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),1===this.parent.getSelectedRecords().length?this.parent.editModule.deleteRow(this.row):this.parent.deleteRecord());break;case"Save":this.parent.editModule&&this.parent.editModule.endEdit();break;case"Cancel":this.parent.editModule&&this.parent.editModule.closeEdit();break;case"Copy":this.parent.copy();break;case"PdfExport":this.parent.pdfExport();break;case"ExcelExport":this.parent.excelExport();break;case"CsvExport":this.parent.csvExport();break;case"SortAscending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"FirstPage":this.parent.goToPage(1);break;case"PrevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"LastPage":this.parent.goToPage(this.getLastPage());break;case"NextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1)}e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger("contextMenuClick",e)}contextMenuOnClose(e){e.items.length>0&&e.items[0].parentObj instanceof ce.xV&&this.updateItemStatus(),this.parent.notify(Tu,{isOpen:!1})}getLocaleText(e){return this.l10n.getConstant(this.localeText[e])}updateItemStatus(){this.contextMenu.showItems(this.hiddenItems),this.contextMenu.enableItems(this.disableItems),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1}contextMenuBeforeOpen(e){const t=(0,u.oq)(e.event.target,".e-grid");if(e.event&&t&&t!==this.parent.element)e.cancel=!0;else if(e.event&&((0,u.oq)(e.event.target,"."+ho.groupHeader)||(0,u.oq)(e.event.target,"."+ho.touchPop)||(0,u.oq)(e.event.target,".e-summarycell")||(0,u.oq)(e.event.target,".e-groupcaption")||(0,u.oq)(e.event.target,".e-filterbarcell")))e.cancel=!0;else{this.targetColumn=this.getColumn(e.event),Zi(e.event.target,"e-grid")&&(this.targetRowdata=this.parent.getRowInfo(e.event.target)),(0,u.le)(e.parentItem)&&this.targetColumn&&this.targetRowdata.cell&&(this.parent.notify(Tu,{isOpen:!0}),this.selectRow(e.event,!(this.targetRowdata.cell.classList.contains("e-selectionbackground")&&"Multiple"===this.parent.selectionSettings.type)));const s=[],n=[];for(const r of e.items){const h=this.getKeyFromId(r.id),m=this.defaultItems[h];if(-1!==this.getDefaultItems().indexOf(h))if(this.ensureDisabledStatus(h)&&this.disableItems.push(r.text),e.event&&(this.ensureTarget(e.event.target,ho.edit)||this.ensureTarget(e.event.target,ho.batchEdit)))"Save"!==h&&"Cancel"!==h&&this.hiddenItems.push(r.text);else{if(this.parent.editModule&&"Batch"===this.parent.editSettings.mode&&((0,u.oq)(e.event.target,".e-gridform")||this.parent.editModule.getBatchChanges()[Eh].length||this.parent.editModule.getBatchChanges()[Ua].length||this.parent.editModule.getBatchChanges()[ac].length)&&("Save"===h||"Cancel"===h))continue;(0,u.le)(e.parentItem)&&e.event&&!this.ensureTarget(e.event.target,m.target)&&this.hiddenItems.push(r.text)}else r.target&&e.event&&!this.ensureTarget(e.event.target,r.target)?r.separator?s.push(r.id):this.hiddenItems.push(r.text):this.ensureTarget(e.event.target,r.target)&&r.separator&&n.push(r.id)}n.length>0&&this.contextMenu.showItems(n,!0),this.contextMenu.enableItems(this.disableItems,!1),this.contextMenu.hideItems(this.hiddenItems),s.length>0&&this.contextMenu.hideItems(s,!0),this.eventArgs=e.event,e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger("contextMenuOpen",e),(e.cancel||this.hiddenItems.length===e.items.length&&!e.parentItem)&&(this.updateItemStatus(),e.cancel=!0)}Mo(this.parent.element,this.contextMenu.element.parentElement)}ensureTarget(e,t){let s=e;return s=!this.ensureFrozenHeader(e)||t!==ho.header&&t!==ho.content?t===ho.content||t===ho.header?Zi((0,u.oq)(e,"."+yo),t.substr(1,t.length)):(0,u.oq)(e,t):(0,u.oq)(e,t===ho.header?"thead":vs),s&&Zi(s,"e-grid")===this.parent.element}ensureFrozenHeader(e){return!(!this.parent.isFrozenGrid()&&!this.parent.frozenRows||!(0,u.oq)(e,ho.header))}ensureDisabledStatus(e){let t=!1;switch(e){case"AutoFitAll":case"AutoFit":t=!(this.parent.ensureModuleInjected(Np)&&!this.parent.isEdit)||this.targetColumn&&!this.targetColumn.field&&"AutoFit"===e;break;case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(xd)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.field)&&(t=!0);break;case"Ungroup":(!this.parent.allowGrouping||!this.parent.ensureModuleInjected(xd)||this.parent.ensureModuleInjected(xd)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"Edit":case"Delete":case"Save":case"Cancel":(!this.parent.editModule||0===this.parent.getDataRows().length)&&(t=!0);break;case"Copy":(0===this.parent.getSelectedRowIndexes().length&&0===this.parent.getSelectedRowCellIndexes().length||0===this.parent.getCurrentViewRecords().length)&&(t=!0);break;case"export":(!this.parent.allowExcelExport||!this.parent.excelExport||!this.parent.ensureModuleInjected(Bu)&&!this.parent.ensureModuleInjected(Nu))&&(t=!0);break;case"PdfExport":(!this.parent.allowPdfExport||!this.parent.ensureModuleInjected(Bu))&&(t=!0);break;case"ExcelExport":case"CsvExport":(!this.parent.allowExcelExport||!this.parent.ensureModuleInjected(Nu))&&(t=!0);break;case"SortAscending":case"SortDescending":if(!this.parent.allowSorting||!this.parent.ensureModuleInjected(su)||this.targetColumn&&!this.targetColumn.field)t=!0;else if(this.parent.ensureModuleInjected(su)&&this.parent.sortSettings.columns.length>0&&this.targetColumn){const s=this.parent.sortSettings.columns;for(let n=0;n<s.length;n++)s[n].field===this.targetColumn.field&&s[n].direction.toLowerCase()===e.toLowerCase().replace("sort","").toLocaleLowerCase()&&(t=!0)}break;case"FirstPage":case"PrevPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(Bf)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(Bf)&&1===this.parent.pageSettings.currentPage)&&(t=!0);break;case"LastPage":case"NextPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(Bf)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(Bf)&&this.parent.pageSettings.currentPage===this.getLastPage())&&(t=!0)}return t}getContextMenu(){return this.element}destroy(){const e=this.parent.element;!e||!e.querySelector("."+rl)&&!e.querySelector("."+ll)||(this.contextMenu.destroy(),this.element.parentNode&&(0,u.Od)(this.element),this.removeEventListener(),this.parent.element.classList.remove("e-noselect"))}getModuleName(){return"contextMenu"}generateID(e){return this.gridID+"_cmenu_"+e}getKeyFromId(e){return e.replace(this.gridID+"_cmenu_","")}buildDefaultItems(e){let t;switch(e){case"AutoFitAll":case"AutoFit":t={target:ho.header};break;case"Group":t={target:ho.header,iconCss:ho.group};break;case"Ungroup":t={target:ho.header,iconCss:ho.ungroup};break;case"Edit":t={target:ho.content,iconCss:ho.editIcon};break;case"Delete":t={target:ho.content,iconCss:ho.delete};break;case"Save":t={target:ho.edit,iconCss:ho.save};break;case"Cancel":t={target:ho.edit,iconCss:ho.cancel};break;case"Copy":t={target:ho.content,iconCss:ho.copy};break;case"export":t={target:ho.content};break;case"PdfExport":t={target:ho.content,iconCss:ho.pdf};break;case"ExcelExport":t={target:ho.content,iconCss:ho.excel};break;case"CsvExport":t={target:ho.content,iconCss:ho.csv};break;case"SortAscending":t={target:ho.header,iconCss:ho.ascending};break;case"SortDescending":t={target:ho.header,iconCss:ho.descending};break;case"FirstPage":t={target:ho.pager,iconCss:ho.fPage};break;case"PrevPage":t={target:ho.pager,iconCss:ho.pPage};break;case"LastPage":t={target:ho.pager,iconCss:ho.lPage};break;case"NextPage":t={target:ho.pager,iconCss:ho.nPage}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]}getDefaultItems(){return["AutoFitAll","AutoFit","Group","Ungroup","Edit","Delete","Save","Cancel","Copy","export","PdfExport","ExcelExport","CsvExport","SortAscending","SortDescending","FirstPage","PrevPage","LastPage","NextPage"]}setLocaleKey(){return{AutoFitAll:"autoFitAll",AutoFit:"autoFit",Copy:"Copy",Group:"Group",Ungroup:"Ungroup",Edit:"EditRecord",Delete:"DeleteRecord",Save:"Save",Cancel:"CancelButton",PdfExport:"Pdfexport",ExcelExport:"Excelexport",CsvExport:"Csvexport",export:"Export",SortAscending:"SortAscending",SortDescending:"SortDescending",FirstPage:"FirstPage",LastPage:"LastPage",PrevPage:"PreviousPage",NextPage:"NextPage"}}getColumn(e){const t=(0,u.oq)(e.target,"th.e-headercell");if(t){const s=t.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(s)}return this.parent.getRowInfo(e.target).column||null}selectRow(e,t){this.cell=e.target,this.row=(0,u.oq)(e.target,"tr.e-row")||this.row,this.row&&t&&!Zi(e.target,"e-gridpager")&&this.parent.selectRow(parseInt(this.row.getAttribute(xn),10))}}};var E0=function(b,e,t,s){var h,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(b,e,t,s);else for(var m=b.length-1;m>=0;m--)(h=b[m])&&(r=(n<3?h(r):n>3?h(e,t,r):h(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},fm=function(b,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(b,e)};const $h=["click","created","dropDownChanged"],Zh=[];let Jf=(()=>{let b=class extends Xl{constructor(t,s,n,r){super(),this.ngEle=t,this.srenderer=s,this.viewContainerRef=n,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents($h),this.addTwoWay.call(this,Zh),Lt("currentInstance",this,this.viewContainerRef),this.context=new E}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return b.\u0275fac=function(t){return new(t||b)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},b.\u0275cmp=i.Xpm({type:b,selectors:[["ejs-pager"]],contentQueries:function(t,s,n){if(1&t&&i.Suo(n,Uf,5),2&t){let r;i.iGM(r=i.CRH())&&(s.template=r.first)}},inputs:{currentPage:"currentPage",customText:"customText",enableExternalMessage:"enableExternalMessage",enablePagerMessage:"enablePagerMessage",enablePersistence:"enablePersistence",enableQueryString:"enableQueryString",enableRtl:"enableRtl",externalMessage:"externalMessage",locale:"locale",pageCount:"pageCount",pageSize:"pageSize",pageSizes:"pageSizes",template:"template",totalRecordsCount:"totalRecordsCount"},outputs:{click:"click",created:"created",dropDownChanged:"dropDownChanged"},features:[i.qOj],decls:0,vars:0,template:function(t,s){},encapsulation:2,changeDetection:0}),b})();E0([jt(),fm("design:type",Object)],Jf.prototype,"template",void 0),Jf=E0([Zt([E]),fm("design:paramtypes",[i.SBq,i.Qsj,i.s_b,i.zs3])],Jf)},7176:(An,hs,rt)=>{rt.d(hs,{PL:()=>lt,oc:()=>B});var i=rt(8274),u=rt(4006),Ue=rt(7628);function $e(je){return function(Re){!function Zt(je,Re){Re.forEach(function(tt){Object.getOwnPropertyNames(tt.prototype).forEach(function(ti){(!je.prototype.hasOwnProperty(ti)||tt.isFormBase)&&(je.prototype[ti]=tt.prototype[ti])})})}(Re,je)}}function Li(je,Re,tt){var ti={};if(je&&je.length){for(var ci=0,pi=je;ci<pi.length;ci++){var Fi=pi[ci];!0===tt?(Re.propCollection[Fi]=new i.vpe(!1),Re[Fi]=Re.propCollection[Fi]):ti[Fi]=new i.vpe(!1)}!0!==tt&&Re.setProperties(ti,!0)}}function Lt(je,Re,tt){var ti=Object.keys(je.registeredTemplate);if(ti.length)for(var ci=Re&&Re.filter(function(hn){return!/\./g.test(hn)}),pi=0,Fi=ci&&ci||ti;pi<Fi.length;pi++){var as=Fi[pi];if(tt&&tt.length)for(var Es=0;Es<tt.length;Es++)for(var Ns=0;Ns<je.registeredTemplate.template.length;Ns++)je.registeredTemplate.template[Ns].rootNodes[0]===tt[Es]&&(pn=je.registeredTemplate[as])[Ns].destroy();else if(je.registeredTemplate[as])for(var ms=0,dn=je.registeredTemplate[as];ms<dn.length;ms++){var pn;if(!(pn=dn[ms]).destroyed){if(pn._view){var Cs=pn._view.renderer.parentNode(pn.rootNodes[0]);if(!(0,Ue.le)(Cs))for(Ns=0;Ns<pn.rootNodes.length;Ns++)Cs.appendChild(pn.rootNodes[Ns])}pn.destroy()}}delete je.registeredTemplate[as]}for(var Yn=function(hn){hn.instance&&hn.instance.clearTemplate(Re&&Re.filter(function(cn){return!!new RegExp(hn.name).test(cn)}))},Ln=0,Rr=je.tagObjects;Ln<Rr.length;Ln++)Yn(Rr[Ln])}function ut(je,Re,tt){for(var ti=je.replace(/\[/g,".").replace(/\]/g,"").split("."),ci=tt||{},pi=0;pi<ti.length;pi++){var Fi=ti[pi];pi+1===ti.length?ci[Fi]=void 0===Re?{}:Re:void 0===ci[Fi]&&(ci[Fi]={}),ci=ci[Fi]}return ci}var Si=/Ref$/,We=function(){function je(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return je.prototype.ngOnInit=function(){this.registeredTemplate={};for(var Re=0,tt=this.tags;Re<tt.length;Re++){var ti=tt[Re],ci=(0,Ue.NA)("child"+ti.substring(0,1).toUpperCase()+ti.substring(1),this);ci&&this.tagObjects.push({instance:ci,name:ti})}for(var pi=Object.keys(this),Fi=0;Fi<pi.length;Fi++){var as=(0,Ue.NA)(pi[Fi],this);"object"==typeof as&&as&&as.elementRef&&((0,Ue.NA)(-1!==pi[Fi].indexOf("Ref")?pi[Fi]:pi[Fi]+"Ref",this)||(0,Ue.sO)(-1!==pi[Fi].indexOf("Ref")?pi[Fi]:pi[Fi]+"Ref",as,this),(0,Ue.NA)("viewContainerRef",this)&&!(0,Ue.NA)("_viewContainerRef",as.elementRef.nativeElement)&&!(0,Ue.NA)("propName",as.elementRef.nativeElement)&&((0,Ue.sO)("_viewContainerRef",(0,Ue.NA)("viewContainerRef",this),as.elementRef.nativeElement),(0,Ue.sO)("propName",pi[Fi].replace("Ref",""),as.elementRef.nativeElement)))}for(var Es=0,Ns=pi=(pi=Object.keys(this)).filter(function(Yn){return/Ref$/i.test(Yn)});Es<Ns.length;Es++){var pn=Ns[Es].replace("Ref","");(0,Ue.sO)(pn.replace("_","."),(0,Ue.NA)(pn,this),this.propCollection)}var ms=Object.keys(this);if(this.directivePropList){for(var dn=0;dn<this.directivePropList.length;dn++){var Cs=this.directivePropList[dn];-1!==ms.indexOf(Cs)&&(0,Ue.NA)(Cs,this)&&(0,Ue.sO)(Cs,(0,Ue.NA)(Cs,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},je.prototype.registerEvents=function(Re){Li(Re,this,!0)},je.prototype.ngOnChanges=function(Re){for(var tt=0,ti=Object.keys(Re);tt<ti.length;tt++){var ci=ti[tt];this.propCollection[ci]=Re[ci].currentValue}this.isUpdated=!1,this.hasChanges=!0},je.prototype.clearTemplate=function(Re){Lt(this,Re)},je.prototype.getProperties=function(){for(var Re=0,tt=this.tagObjects;Re<tt.length;Re++){var ti=tt[Re];this.propCollection[ti.name]=ti.instance.getProperties()}return this.propCollection},je.prototype.isChanged=function(){var Re=this.hasChanges;if(!(0,Ue.le)(this.propCollection[this.property]))for(var ti=Object.keys(this.propCollection[this.property][0]),ci=0;ci<ti.length;ci++)if(!(0,Ue.le)(this.propCollection[ti[ci]])){var pi=(0,Ue.NA)(ti[ci],this),Fi=this.propCollection[this.property][0][ti[ci]];!(0,Ue.le)(pi)&&this.propCollection[ti[ci]]!==pi&&Fi!==pi&&((0,Ue.sO)(ti[ci],pi,this.propCollection[this.property][0]),(0,Ue.sO)(ti[ci],pi,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var as=0,Es=this.tagObjects;as<Es.length;as++)Re=Re||Es[as].instance.hasChanges;return Re||this.hasChanges},je.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var Re=Object.keys(this),tt=0,ti=Re=Re.filter(function(Fi){return Si.test(Fi)});tt<ti.length;tt++){var pi=ti[tt].replace("Ref","");(0,Ue.sO)(pi.replace("_","."),(0,Ue.NA)(pi,this),this.propCollection)}},je.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},je.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},je.prototype.ngOnDestroy=function(){this.directivePropList=[]},je}(),gt=function(){function je(Re){this.list=[],this.hasChanges=!1,this.propertyName=Re}return je.prototype.ngOnInit=function(){this.isInitChanges=!0},je.prototype.ngAfterContentInit=function(){var Re=this,tt=0;this.list=this.children.map(function(ti){return ti.dirIndex=tt++,ti.property=Re.propertyName,ti}),this.hasChanges=!0},je.prototype.getProperties=function(){for(var Re=[],tt=0,ti=this.list;tt<ti.length;tt++)Re.push(ti[tt].getProperties());return Re},je.prototype.isChanged=function(){var Re=this,tt=!1,ti=0,ci=!1,pi=this.children.map(function(bn){return bn});if(this.list.length===this.children.length)for(var Fi=0;Fi<this.list.length;Fi++)this.list[Fi].propCollection.dataSource&&this.list[Fi].dataSource&&this.list[Fi].propCollection.dataSource!==this.list[Fi].dataSource&&(this.list[Fi].propCollection.dataSource=this.list[Fi].dataSource,this.list[Fi].hasChanges=!0),this.list[Fi].hasChanges!==pi[Fi].hasChanges&&(ci=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!ci)||null,this.hasNewChildren&&(this.list=this.children.map(function(bn){return bn.dirIndex=ti++,bn.property=Re.propertyName,bn}));for(var as=0,Es=this.list;as<Es.length;as++)tt=tt||Es[as].hasChanges;return!!this.list.length&&tt},je.prototype.clearTemplate=function(Re){for(var tt=this,ti=0,ci=this.list;ti<ci.length;ti++)ci[ti].clearTemplate(Re&&Re.map(function(Fi){return new RegExp(tt.propertyName).test(Fi)?Fi.replace(tt.propertyName+".",""):Fi}))},je.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var Re=0;Re<this.list.length;Re++)(0,Ue.NA)("childColumns",this.list[Re])&&"columns"===(0,Ue.NA)("property",this.list[Re])&&(0,Ue.sO)("columns",(0,Ue.NA)("childColumns",this.list[Re]).getProperties(),this.list[Re].propCollection),this.list[Re].isUpdated=!0},je.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},je.prototype.ngOnDestroy=function(){this.list=[]},je}(),at=function(){function je(){this.isProtectedOnChange=!0,this.isFormInit=!0}return je.prototype.saveChanges=function(Re,tt,ti){if(!this.isProtectedOnChange){this.oldProperties[Re]=ti,this.changedProperties[Re]=tt,this.finalUpdate();var ci=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(ci)}}},je.prototype.ngOnInit=function(Re){var tt=Re||this;tt.registeredTemplate={},tt.ngBoundedEvents={},tt.isAngular=!0,tt.isFormInit=!0,Re&&(this.tags=Re.tags),tt.tags=this.tags||[],tt.complexTemplate=this.complexTemplate||[],tt.tagObjects=[],tt.ngAttr=this.getAngularAttr(tt.element),tt.createElement=function(Yn,Ln){var Rr=tt.srenderer?tt.srenderer.createElement(Yn):(0,Ue.az)(Yn);return typeof Ln>"u"||(Rr.innerHTML=Ln.innerHTML?Ln.innerHTML:"",void 0!==Ln.className&&(Rr.className=Ln.className),void 0!==Ln.id&&(Rr.id=Ln.id),void 0!==Ln.styles&&Rr.setAttribute("style",Ln.styles),void 0!==tt.ngAttr&&Rr.setAttribute(tt.ngAttr,""),void 0!==Ln.attrs&&(0,Ue.Y4)(Rr,Ln.attrs)),Rr};for(var ti=0,ci=tt.tags;ti<ci.length;ti++){var pi=ci[ti],Fi={instance:(0,Ue.NA)("child"+pi.substring(0,1).toUpperCase()+pi.substring(1),tt),name:pi};tt.tagObjects.push(Fi)}for(var as=Object.keys(tt),Es=0;Es<as.length;Es++){var Ns=(0,Ue.NA)(as[Es],tt);"object"==typeof Ns&&Ns&&Ns.elementRef&&("object"==typeof Ns&&Ns&&Ns.elementRef&&-1!==as[Es].indexOf("_")&&-1===as[Es].indexOf("Ref")&&(0,Ue.sO)(as[Es]+"Ref",Ns,tt),tt.viewContainerRef&&!(0,Ue.NA)("_viewContainerRef",Ns.elementRef.nativeElement)&&!(0,Ue.NA)("propName",Ns.elementRef.nativeElement)&&((0,Ue.sO)("_viewContainerRef",tt.viewContainerRef,Ns.elementRef.nativeElement),(0,Ue.sO)("propName",as[Es].replace("Ref",""),Ns.elementRef.nativeElement)))}for(var bn=0,pn=as=(as=Object.keys(tt)).filter(function(Yn){return/Ref$/i.test(Yn)&&/\_/i.test(Yn)});bn<pn.length;bn++){var dn=pn[bn].replace("Ref",""),Cs={};(0,Ue.sO)(dn.replace("_","."),(0,Ue.NA)(dn,tt),Cs),tt.setProperties(Cs,!0)}},je.prototype.getAngularAttr=function(Re){for(var ci,tt=Re.attributes,ti=tt.length,pi=0;pi<ti;pi++)/_ngcontent/g.test(tt[pi].name)&&(ci=tt[pi].name);return ci},je.prototype.ngAfterViewInit=function(Re){var tt=Re||this;/ejs-tab|ejs-accordion/g.test(tt.ngEle.nativeElement.outerHTML)&&(tt.ngEle.nativeElement.style.visibility="hidden");for(var ci=Object.keys(tt),pi=0,Fi=ci=ci.filter(function(Ns){return/Ref$/i.test(Ns)});pi<Fi.length;pi++){var Es=Fi[pi].replace("Ref","");(0,Ue.sO)(Es.replace("_","."),(0,Ue.NA)(Es+"Ref",tt),tt)}setTimeout(function(){(typeof window<"u"&&tt.element||tt.getModuleName().includes("btn"))&&(tt.appendTo(tt.element),tt.ngEle.nativeElement.style.visibility="")})},je.prototype.ngOnDestroy=function(Re){var tt=Re||this;setTimeout(function(){typeof window<"u"&&tt.element.classList.contains("e-control")&&(tt.destroy(),tt.clearTemplate(null),tt.ngBoundedEvents={},tt.tagObjects={},tt.ngEle=null)})},je.prototype.clearTemplate=function(Re,tt){Lt(this,Re,tt)},je.prototype.ngAfterContentChecked=function(Re){for(var tt=Re||this,ti=0,ci=tt.tagObjects;ti<ci.length;ti++){var pi=ci[ti];if(!(0,Ue.o8)(pi.instance)&&(pi.instance.isInitChanges||pi.instance.hasChanges||pi.instance.hasNewChildren))if(pi.instance.isInitChanges){var Fi={},as=void 0;(Es=(0,Ue.NA)("instance.list",pi))&&Es.length&&(as=Es[0].directivePropList);var Ns=!0;if(tt.getModuleName&&"gantt"===tt.getModuleName()&&(Ns=!1),as&&Ns&&-1===as.indexOf(pi.instance.propertyName))for(var bn=Object.keys(pi.instance.list[0].propCollection),pn=0;pn<pi.instance.list.length;pn++){pi.instance.list[pn].propCollection[pi.instance.propertyName]=[];for(var ms={},dn=0;dn<bn.length;dn++)ms[Cs=bn[dn]]=pi.instance.list[pn].propCollection[Cs];for(var Yn=0;Yn<pi.instance.list[pn].tags.length;Yn++){var Ln=pi.instance.list[pn].tags[Yn],Rr=(0,Ue.NA)("child"+Ln.substring(0,1).toUpperCase()+Ln.substring(1),pi.instance.list[pn]);if(Rr){var rs=pi.instance.list[pn]["child"+Ln.substring(0,1).toUpperCase()+Ln.substring(1)];if(rs)for(var hn=0;hn<rs.list.length;hn++){var cn=rs.list[0].tags[0];if(cn){var ln=(0,Ue.NA)("child"+cn.substring(0,1).toUpperCase()+cn.substring(1),rs.list[hn]);ln&&rs.list[hn].tagObjects.push({instance:ln,name:cn})}}pi.instance.list[pn].tagObjects.push({instance:Rr,name:Ln})}}pi.instance.list[pn].propCollection[pi.instance.propertyName].push(ms)}Fi[pi.name]=pi.instance.getProperties(),tt.setProperties(Fi,pi.instance.isInitChanges)}else{(tt[pi.name].length!==pi.instance.list.length||/diagram|tab/.test(tt.getModuleName()))&&(tt[pi.name]=pi.instance.list);for(var qn=0,$n=pi.instance.list;qn<$n.length;qn++){var Es,gr=pi.instance.list.indexOf(Es=$n[qn]),tn=(0,Ue.NA)(pi.name,tt)[gr],mr=Object.keys(tn);if(mr=mr.filter(function(Br){return/Ref$/i.test(Br)}),tn.properties&&0!==Object.keys(tn.properties).length)for(var Cn=0,wr=mr;Cn<wr.length;Cn++){var Cs;Cs=(Cs=wr[Cn]).replace(/Ref/,""),tn.properties[Cs]=tn.properties[Cs]?tn.properties[Cs]:tn.propCollection[Cs]}!(0,Ue.o8)(tn)&&!(0,Ue.o8)(tn.setProperties)&&(/diagram|DashboardLayout/.test(tt.getModuleName())?tn.setProperties(Es.getProperties(),!0):tn.setProperties(Es.getProperties())),Es.isUpdated=!0}}}},je.prototype.registerEvents=function(Re){Li(Re,this)},je.prototype.twoWaySetter=function(Re,tt){var ti=(0,Ue.NA)(tt,this.properties);ti!==Re&&(this.saveChanges(tt,Re,ti),(0,Ue.sO)(tt,(0,Ue.le)(Re)?null:Re,this.properties),(0,Ue.NA)(tt+"Change",this).emit(Re))},je.prototype.addTwoWay=function(Re){for(var tt=this,ti=function(Es){(0,Ue.NA)(Es,ci),Object.defineProperty(ci,Es,{get:function(){return(0,Ue.NA)(Es,tt.properties)},set:function(Ns){return tt.twoWaySetter(Ns,Es)}}),(0,Ue.sO)(Es+"Change",new i.vpe,ci)},ci=this,pi=0,Fi=Re;pi<Fi.length;pi++)ti(Fi[pi])},je.prototype.addEventListener=function(Re,tt){var ti=(0,Ue.NA)(Re,this);(0,Ue.o8)(ti)||(this.ngBoundedEvents[Re]||(this.ngBoundedEvents[Re]=new Map),this.ngBoundedEvents[Re].set(tt,ti.subscribe(tt)))},je.prototype.removeEventListener=function(Re,tt){var ti=(0,Ue.NA)(Re,this);(0,Ue.o8)(ti)||this.ngBoundedEvents[Re].get(tt).unsubscribe()},je.prototype.trigger=function(Re,tt,ti){var ci=(0,Ue.NA)(Re,this),pi=this.isProtectedOnChange;this.isProtectedOnChange=!1,tt&&(tt.name=Re),(0,Ue.o8)(ci)||ci.next(tt);var Fi=(0,Ue.NA)("local"+Re.charAt(0).toUpperCase()+Re.slice(1),this);(0,Ue.o8)(Fi)||Fi.call(this,tt),this.isProtectedOnChange=pi,ti&&(this.preventChange=this.isPreventChange,ti.call(this,tt)),this.isPreventChange=!1},je}(),Oe=function(){function je(){}return je.prototype.propagateChange=function(Re){},je.prototype.propagateTouch=function(){},je.prototype.localChange=function(Re){var tt=void 0===Re.checked?Re.value:Re.checked;this.objCheck=(0,Ue.Kn)(tt),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(tt),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==tt&&(this.propagateChange(tt),this.angularValue=tt)):tt!==this.angularValue&&void 0!==this.propagateChange&&void 0!==tt&&(this.propagateChange(tt),this.angularValue=tt)},je.prototype.registerOnChange=function(Re){this.propagateChange=Re},je.prototype.registerOnTouched=function(Re){this.propagateTouch=Re},je.prototype.twoWaySetter=function(Re,tt){var ti=this.oldValue||(0,Ue.NA)(tt,this.properties),ci=this.inputElement||this.element;ci&&ti===Re&&this.value===Re&&(void 0===ci.value||""===ci.value)||(this.saveChanges(tt,Re,ti),(0,Ue.sO)(tt,(0,Ue.le)(Re)?null:Re,this.properties),(0,Ue.NA)(tt+"Change",this).emit(Re))},je.prototype.ngAfterViewInit=function(Re){var tt=Re||this;if(typeof window<"u"){tt.appendTo(tt.element);var ti=tt.inputElement||tt.element;ti.addEventListener("focus",tt.ngOnFocus.bind(tt)),ti.addEventListener("blur",tt.ngOnBlur.bind(tt))}this.isFormInit=!1},je.prototype.setDisabledState=function(Re){this.enabled=!Re,this.disabled=Re},je.prototype.writeValue=function(Re){void 0===this.checked?this.value=Re:this.ngEle&&(this.checked="boolean"==typeof Re?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?Re===this.value:Re:Re===this.value),this.angularValue=Re,this.isUpdated=!0,this.preventChange=!this.isFormInit},je.prototype.ngOnFocus=function(Re){!0!==this.skipFromEvent&&this.focus.emit(Re)},je.prototype.ngOnBlur=function(Re){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(Re)},je.isFormBase=!0,je}(),ft=(0,Ue.aR)();function Di(je){return function(Re){void 0!==Re&&((0,Ue.sO)(je+"Ref",Re,this),"string"!=typeof Re?(Re.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,Re.elementRef.nativeElement.propName=je):this.saveChanges&&(this.saveChanges(je,Re,void 0),this.dataBind()))}}function bt(je,Re){return function(){return(0,Ue.NA)(je+"Ref",this)||Re}}(0,Ue.Wr)({compile:function jt(je,Re){if("string"==typeof je)return ft(je,Re);var tt=je.elementRef.nativeElement._viewContainerRef,ti=je.elementRef.nativeElement.propName;return function(ci,pi,Fi){var Es=tt||pi.viewContainerRef,Ns=Es.createEmbeddedView(je,{$implicit:ci});Ns.markForCheck();var bn=pi&&pi.registeredTemplate?pi.registeredTemplate:(0,Ue.NA)("currentInstance.registeredTemplate",Es);return typeof bn[Fi=Fi&&pi.registeredTemplate?Fi:ti]>"u"&&(bn[Fi]=[]),bn[Fi].push(Ns),Ns.rootNodes}}});var Rt=rt(3155),z=rt(6895);const J=["template"],ue=["blur","change","created","destroyed","focus","input","valueChange"],_e=["value"];let lt=Xe=class extends Rt.zC{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(ue),this.addTwoWay.call(this,_e),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Xe;lt.\u0275fac=function(Re){return new(Re||lt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},lt.\u0275cmp=i.Xpm({type:lt,selectors:[["ejs-textbox"]],inputs:{autocomplete:"autocomplete",cssClass:"cssClass",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",floatLabelType:"floatLabelType",htmlAttributes:"htmlAttributes",locale:"locale",multiline:"multiline",placeholder:"placeholder",readonly:"readonly",showClearButton:"showClearButton",type:"type",value:"value",width:"width"},outputs:{blur:"blur",change:"change",created:"created",destroyed:"destroyed",focus:"focus",input:"input",valueChange:"valueChange"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>Xe),multi:!0}]),i.qOj],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),lt.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],lt=Xe=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi}([$e([at,Oe]),function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Re)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],lt);let B=(()=>{class je{}return je.\u0275fac=function(tt){return new(tt||je)},je.\u0275mod=i.oAB({type:je}),je.\u0275inj=i.cJS({imports:[z.ez]}),je})();const $t=["blur","change","created","destroyed","focus","valueChange"],ji=["value"];let is=zi=class extends Rt.No{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents($t),this.addTwoWay.call(this,ji),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var zi;is.\u0275fac=function(Re){return new(Re||is)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},is.\u0275cmp=i.Xpm({type:is,selectors:[["ejs-numerictextbox"]],inputs:{cssClass:"cssClass",currency:"currency",currencyCode:"currencyCode",decimals:"decimals",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",floatLabelType:"floatLabelType",format:"format",htmlAttributes:"htmlAttributes",locale:"locale",max:"max",min:"min",placeholder:"placeholder",readonly:"readonly",showClearButton:"showClearButton",showSpinButton:"showSpinButton",step:"step",strictMode:"strictMode",validateDecimalOnType:"validateDecimalOnType",value:"value",width:"width"},outputs:{blur:"blur",change:"change",created:"created",destroyed:"destroyed",focus:"focus",valueChange:"valueChange"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>zi),multi:!0}]),i.qOj],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),is.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],is=zi=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi}([$e([at,Oe]),function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Re)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],is);const $i=["blur","change","created","destroyed","focus","valueChange"],et=["value"];let zt=Xt=class extends Rt.g3{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents($i),this.addTwoWay.call(this,et),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Xt;zt.\u0275fac=function(Re){return new(Re||zt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},zt.\u0275cmp=i.Xpm({type:zt,selectors:[["ejs-maskedtextbox"]],inputs:{cssClass:"cssClass",customCharacters:"customCharacters",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",floatLabelType:"floatLabelType",htmlAttributes:"htmlAttributes",locale:"locale",mask:"mask",placeholder:"placeholder",promptChar:"promptChar",readonly:"readonly",showClearButton:"showClearButton",value:"value",width:"width"},outputs:{blur:"blur",change:"change",created:"created",destroyed:"destroyed",focus:"focus",valueChange:"valueChange"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>Xt),multi:!0}]),i.qOj],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),zt.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],zt=Xt=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi}([$e([at,Oe]),function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Re)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],zt);const gs=["focus","blur","change","changed","created","renderedTicks","renderingTicks","tooltipChange","valueChange"],Jt=["value"];let Wt=At=class extends Rt.iR{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(gs),this.addTwoWay.call(this,Jt),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var At;Wt.\u0275fac=function(Re){return new(Re||Wt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},Wt.\u0275cmp=i.Xpm({type:Wt,selectors:[["ejs-slider"]],inputs:{colorRange:"colorRange",cssClass:"cssClass",customValues:"customValues",enableAnimation:"enableAnimation",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",limits:"limits",locale:"locale",max:"max",min:"min",orientation:"orientation",readonly:"readonly",showButtons:"showButtons",step:"step",ticks:"ticks",tooltip:"tooltip",type:"type",value:"value",width:"width"},outputs:{focus:"focus",blur:"blur",change:"change",changed:"changed",created:"created",renderedTicks:"renderedTicks",renderingTicks:"renderingTicks",tooltipChange:"tooltipChange",valueChange:"valueChange"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>At),multi:!0}]),i.qOj],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),Wt.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],Wt=At=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi}([$e([at,Oe]),function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Re)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],Wt);let Gt=["name","size","type"],Dt=[],Pt=(()=>{class je extends We{constructor(tt){super(),this.viewContainerRef=tt,ut("currentInstance",this,this.viewContainerRef),this.registerEvents(Dt),this.directivePropList=Gt}}return je.\u0275fac=function(tt){return new(tt||je)(i.Y36(i.s_b))},je.\u0275dir=i.lG2({type:je,selectors:[["e-uploadedfiles"]],inputs:{name:"name",size:"size",type:"type"},features:[i.qOj]}),je})(),di=(()=>{class je extends gt{constructor(){super("files")}}return je.\u0275fac=function(tt){return new(tt||je)},je.\u0275dir=i.lG2({type:je,selectors:[["e-files"]],contentQueries:function(tt,ti,ci){if(1&tt&&i.Suo(ci,Pt,4),2&tt){let pi;i.iGM(pi=i.CRH())&&(ti.children=pi)}},features:[i.qOj]}),je})();var ot=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi},hi=function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(je,Re)};const Ui=["focus","blur","actionComplete","beforeRemove","beforeUpload","canceling","change","chunkFailure","chunkSuccess","chunkUploading","clearing","created","failure","fileListRendering","pausing","progress","removing","rendering","resuming","selected","success","uploading"],As=[];let bs=kt=class extends Rt.Qm{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.tags=["files"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Ui),this.addTwoWay.call(this,As),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childFiles,this.formCompContext.ngAfterContentChecked(this)}};var kt;bs.\u0275fac=function(Re){return new(Re||bs)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},bs.\u0275cmp=i.Xpm({type:bs,selectors:[["ejs-uploader"]],contentQueries:function(Re,tt,ti){if(1&Re&&(i.Suo(ti,J,5),i.Suo(ti,di,5)),2&Re){let ci;i.iGM(ci=i.CRH())&&(tt.template=ci.first),i.iGM(ci=i.CRH())&&(tt.childFiles=ci.first)}},inputs:{allowedExtensions:"allowedExtensions",asyncSettings:"asyncSettings",autoUpload:"autoUpload",buttons:"buttons",cssClass:"cssClass",directoryUpload:"directoryUpload",dropArea:"dropArea",dropEffect:"dropEffect",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",files:"files",htmlAttributes:"htmlAttributes",locale:"locale",maxFileSize:"maxFileSize",minFileSize:"minFileSize",multiple:"multiple",sequentialUpload:"sequentialUpload",showFileList:"showFileList",template:"template"},outputs:{focus:"focus",blur:"blur",actionComplete:"actionComplete",beforeRemove:"beforeRemove",beforeUpload:"beforeUpload",canceling:"canceling",change:"change",chunkFailure:"chunkFailure",chunkSuccess:"chunkSuccess",chunkUploading:"chunkUploading",clearing:"clearing",created:"created",failure:"failure",fileListRendering:"fileListRendering",pausing:"pausing",progress:"progress",removing:"removing",rendering:"rendering",resuming:"resuming",selected:"selected",success:"success",uploading:"uploading"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>kt),multi:!0}]),i.qOj],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),bs.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],bs.propDecorators={template:[{type:i.aQ5,args:["template"]}]},ot([function Nt(je){return function(Re,tt){var ti={set:Di(tt),get:bt(tt,je),enumerable:!0,configurable:!0};Object.defineProperty(Re,tt,ti)}}(),hi("design:type",Object)],bs.prototype,"template",void 0),bs=kt=ot([$e([at,Oe]),hi("design:paramtypes",[i.SBq,i.Qsj,i.s_b,i.zs3])],bs);const ns=["focus","blur","beforeClose","beforeModeSwitch","beforeOpen","beforeTileRender","change","created","onModeSwitch","open","select","valueChange"],ls=["value"];let ws=Ds=class extends Rt.zH{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(ns),this.addTwoWay.call(this,ls),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Ds;ws.\u0275fac=function(Re){return new(Re||ws)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},ws.\u0275cmp=i.Xpm({type:ws,selectors:[["","ejs-colorpicker",""]],inputs:{columns:"columns",createPopupOnClick:"createPopupOnClick",cssClass:"cssClass",disabled:"disabled",enableOpacity:"enableOpacity",enablePersistence:"enablePersistence",enableRtl:"enableRtl",inline:"inline",locale:"locale",mode:"mode",modeSwitcher:"modeSwitcher",noColor:"noColor",presetColors:"presetColors",showButtons:"showButtons",value:"value"},outputs:{focus:"focus",blur:"blur",beforeClose:"beforeClose",beforeModeSwitch:"beforeModeSwitch",beforeOpen:"beforeOpen",beforeTileRender:"beforeTileRender",change:"change",created:"created",onModeSwitch:"onModeSwitch",open:"open",select:"select",valueChange:"valueChange"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>Ds),multi:!0}]),i.qOj],attrs:["ejs-colorpicker",""],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),ws.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],ws=Ds=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi}([$e([at,Oe]),function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Re)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],ws);const js=["focus","blur","beforeSave","change","created"],Yt=[];let Xi=Ls=class extends Rt.Pc{constructor(Re,tt,ti,ci){super(),this.ngEle=Re,this.srenderer=tt,this.viewContainerRef=ti,this.injector=ci,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(js),this.addTwoWay.call(this,Yt),ut("currentInstance",this,this.viewContainerRef),this.formContext=new Oe,this.formCompContext=new at}registerOnChange(Re){}registerOnTouched(Re){}writeValue(Re){}setDisabledState(Re){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Ls;Xi.\u0275fac=function(Re){return new(Re||Xi)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},Xi.\u0275cmp=i.Xpm({type:Xi,selectors:[["","ejs-signature",""]],inputs:{backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",isReadOnly:"isReadOnly",locale:"locale",maxStrokeWidth:"maxStrokeWidth",minStrokeWidth:"minStrokeWidth",saveWithBackground:"saveWithBackground",strokeColor:"strokeColor",velocity:"velocity"},outputs:{focus:"focus",blur:"blur",beforeSave:"beforeSave",change:"change",created:"created"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>Ls),multi:!0}]),i.qOj],attrs:["ejs-signature",""],decls:0,vars:0,template:function(Re,tt){},encapsulation:2,changeDetection:0}),Xi.ctorParameters=()=>[{type:i.SBq},{type:i.Qsj},{type:i.s_b},{type:i.zs3}],Xi=Ls=function(je,Re,tt,ti){var Fi,ci=arguments.length,pi=ci<3?Re:null===ti?ti=Object.getOwnPropertyDescriptor(Re,tt):ti;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pi=Reflect.decorate(je,Re,tt,ti);else for(var as=je.length-1;as>=0;as--)(Fi=je[as])&&(pi=(ci<3?Fi(pi):ci>3?Fi(Re,tt,pi):Fi(Re,tt))||pi);return ci>3&&pi&&Object.defineProperty(Re,tt,pi),pi}([$e([at,Oe]),function(je,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Re)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],Xi)},9952:(An,hs,rt)=>{rt.d(hs,{_z:()=>de,Q:()=>Be,S4:()=>Us,lY:()=>$i});var i=rt(8274),u=rt(7628);function Zt(Jt){return function(Wt){!function Ue(Jt,Wt){Wt.forEach(function(At){Object.getOwnPropertyNames(At.prototype).forEach(function(li){(!Jt.prototype.hasOwnProperty(li)||At.isFormBase)&&(Jt.prototype[li]=At.prototype[li])})})}(Wt,Jt)}}function $e(Jt,Wt,At){var li={};if(Jt&&Jt.length){for(var Oi=0,Gt=Jt;Oi<Gt.length;Oi++){var Dt=Gt[Oi];!0===At?(Wt.propCollection[Dt]=new i.vpe(!1),Wt[Dt]=Wt.propCollection[Dt]):li[Dt]=new i.vpe(!1)}!0!==At&&Wt.setProperties(li,!0)}}function Li(Jt,Wt,At){var li=Object.keys(Jt.registeredTemplate);if(li.length)for(var Oi=Wt&&Wt.filter(function(bi){return!/\./g.test(bi)}),Gt=0,Dt=Oi&&Oi||li;Gt<Dt.length;Gt++){var Pt=Dt[Gt];if(At&&At.length)for(var di=0;di<At.length;di++)for(var ot=0;ot<Jt.registeredTemplate.template.length;ot++)Jt.registeredTemplate.template[ot].rootNodes[0]===At[di]&&(Ei=Jt.registeredTemplate[Pt])[ot].destroy();else if(Jt.registeredTemplate[Pt])for(var Ui=0,As=Jt.registeredTemplate[Pt];Ui<As.length;Ui++){var Ei;if(!(Ei=As[Ui]).destroyed){if(Ei._view){var bs=Ei._view.renderer.parentNode(Ei.rootNodes[0]);if(!(0,u.le)(bs))for(ot=0;ot<Ei.rootNodes.length;ot++)bs.appendChild(Ei.rootNodes[ot])}Ei.destroy()}}delete Jt.registeredTemplate[Pt]}for(var kt=function(bi){bi.instance&&bi.instance.clearTemplate(Wt&&Wt.filter(function(Ti){return!!new RegExp(bi.name).test(Ti)}))},wt=0,Ot=Jt.tagObjects;wt<Ot.length;wt++)kt(Ot[wt])}function Lt(Jt,Wt,At){for(var li=Jt.replace(/\[/g,".").replace(/\]/g,"").split("."),Oi=At||{},Gt=0;Gt<li.length;Gt++){var Dt=li[Gt];Gt+1===li.length?Oi[Dt]=void 0===Wt?{}:Wt:void 0===Oi[Dt]&&(Oi[Dt]={}),Oi=Oi[Dt]}return Oi}var ut=/Ref$/,Si=function(){function Jt(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return Jt.prototype.ngOnInit=function(){this.registeredTemplate={};for(var Wt=0,At=this.tags;Wt<At.length;Wt++){var li=At[Wt],Oi=(0,u.NA)("child"+li.substring(0,1).toUpperCase()+li.substring(1),this);Oi&&this.tagObjects.push({instance:Oi,name:li})}for(var Gt=Object.keys(this),Dt=0;Dt<Gt.length;Dt++){var Pt=(0,u.NA)(Gt[Dt],this);"object"==typeof Pt&&Pt&&Pt.elementRef&&((0,u.NA)(-1!==Gt[Dt].indexOf("Ref")?Gt[Dt]:Gt[Dt]+"Ref",this)||(0,u.sO)(-1!==Gt[Dt].indexOf("Ref")?Gt[Dt]:Gt[Dt]+"Ref",Pt,this),(0,u.NA)("viewContainerRef",this)&&!(0,u.NA)("_viewContainerRef",Pt.elementRef.nativeElement)&&!(0,u.NA)("propName",Pt.elementRef.nativeElement)&&((0,u.sO)("_viewContainerRef",(0,u.NA)("viewContainerRef",this),Pt.elementRef.nativeElement),(0,u.sO)("propName",Gt[Dt].replace("Ref",""),Pt.elementRef.nativeElement)))}for(var di=0,ot=Gt=(Gt=Object.keys(this)).filter(function(kt){return/Ref$/i.test(kt)});di<ot.length;di++){var Ei=ot[di].replace("Ref","");(0,u.sO)(Ei.replace("_","."),(0,u.NA)(Ei,this),this.propCollection)}var Ui=Object.keys(this);if(this.directivePropList){for(var As=0;As<this.directivePropList.length;As++){var bs=this.directivePropList[As];-1!==Ui.indexOf(bs)&&(0,u.NA)(bs,this)&&(0,u.sO)(bs,(0,u.NA)(bs,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},Jt.prototype.registerEvents=function(Wt){$e(Wt,this,!0)},Jt.prototype.ngOnChanges=function(Wt){for(var At=0,li=Object.keys(Wt);At<li.length;At++){var Oi=li[At];this.propCollection[Oi]=Wt[Oi].currentValue}this.isUpdated=!1,this.hasChanges=!0},Jt.prototype.clearTemplate=function(Wt){Li(this,Wt)},Jt.prototype.getProperties=function(){for(var Wt=0,At=this.tagObjects;Wt<At.length;Wt++){var li=At[Wt];this.propCollection[li.name]=li.instance.getProperties()}return this.propCollection},Jt.prototype.isChanged=function(){var Wt=this.hasChanges;if(!(0,u.le)(this.propCollection[this.property]))for(var li=Object.keys(this.propCollection[this.property][0]),Oi=0;Oi<li.length;Oi++)if(!(0,u.le)(this.propCollection[li[Oi]])){var Gt=(0,u.NA)(li[Oi],this),Dt=this.propCollection[this.property][0][li[Oi]];!(0,u.le)(Gt)&&this.propCollection[li[Oi]]!==Gt&&Dt!==Gt&&((0,u.sO)(li[Oi],Gt,this.propCollection[this.property][0]),(0,u.sO)(li[Oi],Gt,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var Pt=0,di=this.tagObjects;Pt<di.length;Pt++)Wt=Wt||di[Pt].instance.hasChanges;return Wt||this.hasChanges},Jt.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var Wt=Object.keys(this),At=0,li=Wt=Wt.filter(function(Dt){return ut.test(Dt)});At<li.length;At++){var Gt=li[At].replace("Ref","");(0,u.sO)(Gt.replace("_","."),(0,u.NA)(Gt,this),this.propCollection)}},Jt.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},Jt.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},Jt.prototype.ngOnDestroy=function(){this.directivePropList=[]},Jt}(),We=function(){function Jt(Wt){this.list=[],this.hasChanges=!1,this.propertyName=Wt}return Jt.prototype.ngOnInit=function(){this.isInitChanges=!0},Jt.prototype.ngAfterContentInit=function(){var Wt=this,At=0;this.list=this.children.map(function(li){return li.dirIndex=At++,li.property=Wt.propertyName,li}),this.hasChanges=!0},Jt.prototype.getProperties=function(){for(var Wt=[],At=0,li=this.list;At<li.length;At++)Wt.push(li[At].getProperties());return Wt},Jt.prototype.isChanged=function(){var Wt=this,At=!1,li=0,Oi=!1,Gt=this.children.map(function(hi){return hi});if(this.list.length===this.children.length)for(var Dt=0;Dt<this.list.length;Dt++)this.list[Dt].propCollection.dataSource&&this.list[Dt].dataSource&&this.list[Dt].propCollection.dataSource!==this.list[Dt].dataSource&&(this.list[Dt].propCollection.dataSource=this.list[Dt].dataSource,this.list[Dt].hasChanges=!0),this.list[Dt].hasChanges!==Gt[Dt].hasChanges&&(Oi=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!Oi)||null,this.hasNewChildren&&(this.list=this.children.map(function(hi){return hi.dirIndex=li++,hi.property=Wt.propertyName,hi}));for(var Pt=0,di=this.list;Pt<di.length;Pt++)At=At||di[Pt].hasChanges;return!!this.list.length&&At},Jt.prototype.clearTemplate=function(Wt){for(var At=this,li=0,Oi=this.list;li<Oi.length;li++)Oi[li].clearTemplate(Wt&&Wt.map(function(Dt){return new RegExp(At.propertyName).test(Dt)?Dt.replace(At.propertyName+".",""):Dt}))},Jt.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var Wt=0;Wt<this.list.length;Wt++)(0,u.NA)("childColumns",this.list[Wt])&&"columns"===(0,u.NA)("property",this.list[Wt])&&(0,u.sO)("columns",(0,u.NA)("childColumns",this.list[Wt]).getProperties(),this.list[Wt].propCollection),this.list[Wt].isUpdated=!0},Jt.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},Jt.prototype.ngOnDestroy=function(){this.list=[]},Jt}(),E=function(){function Jt(){this.isProtectedOnChange=!0,this.isFormInit=!0}return Jt.prototype.saveChanges=function(Wt,At,li){if(!this.isProtectedOnChange){this.oldProperties[Wt]=li,this.changedProperties[Wt]=At,this.finalUpdate();var Oi=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(Oi)}}},Jt.prototype.ngOnInit=function(Wt){var At=Wt||this;At.registeredTemplate={},At.ngBoundedEvents={},At.isAngular=!0,At.isFormInit=!0,Wt&&(this.tags=Wt.tags),At.tags=this.tags||[],At.complexTemplate=this.complexTemplate||[],At.tagObjects=[],At.ngAttr=this.getAngularAttr(At.element),At.createElement=function(kt,wt){var Ot=At.srenderer?At.srenderer.createElement(kt):(0,u.az)(kt);return typeof wt>"u"||(Ot.innerHTML=wt.innerHTML?wt.innerHTML:"",void 0!==wt.className&&(Ot.className=wt.className),void 0!==wt.id&&(Ot.id=wt.id),void 0!==wt.styles&&Ot.setAttribute("style",wt.styles),void 0!==At.ngAttr&&Ot.setAttribute(At.ngAttr,""),void 0!==wt.attrs&&(0,u.Y4)(Ot,wt.attrs)),Ot};for(var li=0,Oi=At.tags;li<Oi.length;li++){var Gt=Oi[li],Dt={instance:(0,u.NA)("child"+Gt.substring(0,1).toUpperCase()+Gt.substring(1),At),name:Gt};At.tagObjects.push(Dt)}for(var Pt=Object.keys(At),di=0;di<Pt.length;di++){var ot=(0,u.NA)(Pt[di],At);"object"==typeof ot&&ot&&ot.elementRef&&("object"==typeof ot&&ot&&ot.elementRef&&-1!==Pt[di].indexOf("_")&&-1===Pt[di].indexOf("Ref")&&(0,u.sO)(Pt[di]+"Ref",ot,At),At.viewContainerRef&&!(0,u.NA)("_viewContainerRef",ot.elementRef.nativeElement)&&!(0,u.NA)("propName",ot.elementRef.nativeElement)&&((0,u.sO)("_viewContainerRef",At.viewContainerRef,ot.elementRef.nativeElement),(0,u.sO)("propName",Pt[di].replace("Ref",""),ot.elementRef.nativeElement)))}for(var hi=0,Ei=Pt=(Pt=Object.keys(At)).filter(function(kt){return/Ref$/i.test(kt)&&/\_/i.test(kt)});hi<Ei.length;hi++){var As=Ei[hi].replace("Ref",""),bs={};(0,u.sO)(As.replace("_","."),(0,u.NA)(As,At),bs),At.setProperties(bs,!0)}},Jt.prototype.getAngularAttr=function(Wt){for(var Oi,At=Wt.attributes,li=At.length,Gt=0;Gt<li;Gt++)/_ngcontent/g.test(At[Gt].name)&&(Oi=At[Gt].name);return Oi},Jt.prototype.ngAfterViewInit=function(Wt){var At=Wt||this;/ejs-tab|ejs-accordion/g.test(At.ngEle.nativeElement.outerHTML)&&(At.ngEle.nativeElement.style.visibility="hidden");for(var Oi=Object.keys(At),Gt=0,Dt=Oi=Oi.filter(function(ot){return/Ref$/i.test(ot)});Gt<Dt.length;Gt++){var di=Dt[Gt].replace("Ref","");(0,u.sO)(di.replace("_","."),(0,u.NA)(di+"Ref",At),At)}setTimeout(function(){(typeof window<"u"&&At.element||At.getModuleName().includes("btn"))&&(At.appendTo(At.element),At.ngEle.nativeElement.style.visibility="")})},Jt.prototype.ngOnDestroy=function(Wt){var At=Wt||this;setTimeout(function(){typeof window<"u"&&At.element.classList.contains("e-control")&&(At.destroy(),At.clearTemplate(null),At.ngBoundedEvents={},At.tagObjects={},At.ngEle=null)})},Jt.prototype.clearTemplate=function(Wt,At){Li(this,Wt,At)},Jt.prototype.ngAfterContentChecked=function(Wt){for(var At=Wt||this,li=0,Oi=At.tagObjects;li<Oi.length;li++){var Gt=Oi[li];if(!(0,u.o8)(Gt.instance)&&(Gt.instance.isInitChanges||Gt.instance.hasChanges||Gt.instance.hasNewChildren))if(Gt.instance.isInitChanges){var Dt={},Pt=void 0;(di=(0,u.NA)("instance.list",Gt))&&di.length&&(Pt=di[0].directivePropList);var ot=!0;if(At.getModuleName&&"gantt"===At.getModuleName()&&(ot=!1),Pt&&ot&&-1===Pt.indexOf(Gt.instance.propertyName))for(var hi=Object.keys(Gt.instance.list[0].propCollection),Ei=0;Ei<Gt.instance.list.length;Ei++){Gt.instance.list[Ei].propCollection[Gt.instance.propertyName]=[];for(var Ui={},As=0;As<hi.length;As++)Ui[bs=hi[As]]=Gt.instance.list[Ei].propCollection[bs];for(var kt=0;kt<Gt.instance.list[Ei].tags.length;kt++){var wt=Gt.instance.list[Ei].tags[kt],Ot=(0,u.NA)("child"+wt.substring(0,1).toUpperCase()+wt.substring(1),Gt.instance.list[Ei]);if(Ot){var Ai=Gt.instance.list[Ei]["child"+wt.substring(0,1).toUpperCase()+wt.substring(1)];if(Ai)for(var bi=0;bi<Ai.list.length;bi++){var Ti=Ai.list[0].tags[0];if(Ti){var ns=(0,u.NA)("child"+Ti.substring(0,1).toUpperCase()+Ti.substring(1),Ai.list[bi]);ns&&Ai.list[bi].tagObjects.push({instance:ns,name:Ti})}}Gt.instance.list[Ei].tagObjects.push({instance:Ot,name:wt})}}Gt.instance.list[Ei].propCollection[Gt.instance.propertyName].push(Ui)}Dt[Gt.name]=Gt.instance.getProperties(),At.setProperties(Dt,Gt.instance.isInitChanges)}else{(At[Gt.name].length!==Gt.instance.list.length||/diagram|tab/.test(At.getModuleName()))&&(At[Gt.name]=Gt.instance.list);for(var ls=0,ws=Gt.instance.list;ls<ws.length;ls++){var di,Ds=Gt.instance.list.indexOf(di=ws[ls]),on=(0,u.NA)(Gt.name,At)[Ds],Bn=Object.keys(on);if(Bn=Bn.filter(function(js){return/Ref$/i.test(js)}),on.properties&&0!==Object.keys(on.properties).length)for(var Kn=0,Dn=Bn;Kn<Dn.length;Kn++){var bs;bs=(bs=Dn[Kn]).replace(/Ref/,""),on.properties[bs]=on.properties[bs]?on.properties[bs]:on.propCollection[bs]}!(0,u.o8)(on)&&!(0,u.o8)(on.setProperties)&&(/diagram|DashboardLayout/.test(At.getModuleName())?on.setProperties(di.getProperties(),!0):on.setProperties(di.getProperties())),di.isUpdated=!0}}}},Jt.prototype.registerEvents=function(Wt){$e(Wt,this)},Jt.prototype.twoWaySetter=function(Wt,At){var li=(0,u.NA)(At,this.properties);li!==Wt&&(this.saveChanges(At,Wt,li),(0,u.sO)(At,(0,u.le)(Wt)?null:Wt,this.properties),(0,u.NA)(At+"Change",this).emit(Wt))},Jt.prototype.addTwoWay=function(Wt){for(var At=this,li=function(di){(0,u.NA)(di,Oi),Object.defineProperty(Oi,di,{get:function(){return(0,u.NA)(di,At.properties)},set:function(ot){return At.twoWaySetter(ot,di)}}),(0,u.sO)(di+"Change",new i.vpe,Oi)},Oi=this,Gt=0,Dt=Wt;Gt<Dt.length;Gt++)li(Dt[Gt])},Jt.prototype.addEventListener=function(Wt,At){var li=(0,u.NA)(Wt,this);(0,u.o8)(li)||(this.ngBoundedEvents[Wt]||(this.ngBoundedEvents[Wt]=new Map),this.ngBoundedEvents[Wt].set(At,li.subscribe(At)))},Jt.prototype.removeEventListener=function(Wt,At){var li=(0,u.NA)(Wt,this);(0,u.o8)(li)||this.ngBoundedEvents[Wt].get(At).unsubscribe()},Jt.prototype.trigger=function(Wt,At,li){var Oi=(0,u.NA)(Wt,this),Gt=this.isProtectedOnChange;this.isProtectedOnChange=!1,At&&(At.name=Wt),(0,u.o8)(Oi)||Oi.next(At);var Dt=(0,u.NA)("local"+Wt.charAt(0).toUpperCase()+Wt.slice(1),this);(0,u.o8)(Dt)||Dt.call(this,At),this.isProtectedOnChange=Gt,li&&(this.preventChange=this.isPreventChange,li.call(this,At)),this.isPreventChange=!1},Jt}(),Oe=(function(){function Jt(){}Jt.prototype.propagateChange=function(Wt){},Jt.prototype.propagateTouch=function(){},Jt.prototype.localChange=function(Wt){var At=void 0===Wt.checked?Wt.value:Wt.checked;this.objCheck=(0,u.Kn)(At),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(At),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==At&&(this.propagateChange(At),this.angularValue=At)):At!==this.angularValue&&void 0!==this.propagateChange&&void 0!==At&&(this.propagateChange(At),this.angularValue=At)},Jt.prototype.registerOnChange=function(Wt){this.propagateChange=Wt},Jt.prototype.registerOnTouched=function(Wt){this.propagateTouch=Wt},Jt.prototype.twoWaySetter=function(Wt,At){var li=this.oldValue||(0,u.NA)(At,this.properties),Oi=this.inputElement||this.element;Oi&&li===Wt&&this.value===Wt&&(void 0===Oi.value||""===Oi.value)||(this.saveChanges(At,Wt,li),(0,u.sO)(At,(0,u.le)(Wt)?null:Wt,this.properties),(0,u.NA)(At+"Change",this).emit(Wt))},Jt.prototype.ngAfterViewInit=function(Wt){var At=Wt||this;if(typeof window<"u"){At.appendTo(At.element);var li=At.inputElement||At.element;li.addEventListener("focus",At.ngOnFocus.bind(At)),li.addEventListener("blur",At.ngOnBlur.bind(At))}this.isFormInit=!1},Jt.prototype.setDisabledState=function(Wt){this.enabled=!Wt,this.disabled=Wt},Jt.prototype.writeValue=function(Wt){void 0===this.checked?this.value=Wt:this.ngEle&&(this.checked="boolean"==typeof Wt?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?Wt===this.value:Wt:Wt===this.value),this.angularValue=Wt,this.isUpdated=!0,this.preventChange=!this.isFormInit},Jt.prototype.ngOnFocus=function(Wt){!0!==this.skipFromEvent&&this.focus.emit(Wt)},Jt.prototype.ngOnBlur=function(Wt){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(Wt)},Jt.isFormBase=!0}(),(0,u.aR)());(0,u.Wr)({compile:function ft(Jt,Wt){if("string"==typeof Jt)return Oe(Jt,Wt);var At=Jt.elementRef.nativeElement._viewContainerRef,li=Jt.elementRef.nativeElement.propName;return function(Oi,Gt,Dt){var di=At||Gt.viewContainerRef,ot=di.createEmbeddedView(Jt,{$implicit:Oi});ot.markForCheck();var hi=Gt&&Gt.registeredTemplate?Gt.registeredTemplate:(0,u.NA)("currentInstance.registeredTemplate",di);return typeof hi[Dt=Dt&&Gt.registeredTemplate?Dt:li]>"u"&&(hi[Dt]=[]),hi[Dt].push(ot),ot.rootNodes}}});var bt=rt(215),Rt=rt(6895);const z=["ejs-dropdownbutton",""],J=["*"],ve=["ejs-progressbutton",""];let Ne=["disabled","iconCss","id","separator","text","url"],ce=[],be=(()=>{class Jt extends Si{constructor(At){super(),this.viewContainerRef=At,Lt("currentInstance",this,this.viewContainerRef),this.registerEvents(ce),this.directivePropList=Ne}}return Jt.\u0275fac=function(At){return new(At||Jt)(i.Y36(i.s_b))},Jt.\u0275dir=i.lG2({type:Jt,selectors:[["e-dropdownbuttonitem"]],inputs:{disabled:"disabled",iconCss:"iconCss",id:"id",separator:"separator",text:"text",url:"url"},features:[i.qOj]}),Jt})(),Se=(()=>{class Jt extends We{constructor(){super("items")}}return Jt.\u0275fac=function(At){return new(At||Jt)},Jt.\u0275dir=i.lG2({type:Jt,selectors:[["e-dropdownbuttonitems"]],contentQueries:function(At,li,Oi){if(1&At&&i.Suo(Oi,be,4),2&At){let Gt;i.iGM(Gt=i.CRH())&&(li.children=Gt)}},features:[i.qOj]}),Jt})();var _e=function(Jt,Wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Jt,Wt)};const Xe=["beforeClose","beforeItemRender","beforeOpen","close","created","open","select"],B=[];let de=(()=>{let Jt=class extends bt.uw{constructor(At,li,Oi,Gt){super(),this.ngEle=At,this.srenderer=li,this.viewContainerRef=Oi,this.injector=Gt,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Xe),this.addTwoWay.call(this,B),Lt("currentInstance",this,this.viewContainerRef),this.containerContext=new E}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.containerContext.ngAfterContentChecked(this)}};return Jt.\u0275fac=function(At){return new(At||Jt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},Jt.\u0275cmp=i.Xpm({type:Jt,selectors:[["","ejs-dropdownbutton",""]],contentQueries:function(At,li,Oi){if(1&At&&i.Suo(Oi,Se,5),2&At){let Gt;i.iGM(Gt=i.CRH())&&(li.childItems=Gt.first)}},inputs:{content:"content",createPopupOnClick:"createPopupOnClick",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",iconCss:"iconCss",iconPosition:"iconPosition",items:"items",locale:"locale",target:"target"},outputs:{beforeClose:"beforeClose",beforeItemRender:"beforeItemRender",beforeOpen:"beforeOpen",close:"close",created:"created",open:"open",select:"select"},features:[i.qOj],attrs:z,ngContentSelectors:J,decls:1,vars:0,template:function(At,li){1&At&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),Jt=function(Jt,Wt,At,li){var Dt,Oi=arguments.length,Gt=Oi<3?Wt:null===li?li=Object.getOwnPropertyDescriptor(Wt,At):li;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Gt=Reflect.decorate(Jt,Wt,At,li);else for(var Pt=Jt.length-1;Pt>=0;Pt--)(Dt=Jt[Pt])&&(Gt=(Oi<3?Dt(Gt):Oi>3?Dt(Wt,At,Gt):Dt(Wt,At))||Gt);return Oi>3&&Gt&&Object.defineProperty(Wt,At,Gt),Gt}([Zt([E]),_e("design:paramtypes",[i.SBq,i.Qsj,i.s_b,i.zs3])],Jt),Jt})(),Be=(()=>{class Jt{}return Jt.\u0275fac=function(At){return new(At||Jt)},Jt.\u0275mod=i.oAB({type:Jt}),Jt.\u0275inj=i.cJS({imports:[Rt.ez]}),Jt})(),xt=["disabled","iconCss","id","separator","text","url"],$t=[],ji=(()=>{class Jt extends Si{constructor(At){super(),this.viewContainerRef=At,Lt("currentInstance",this,this.viewContainerRef),this.registerEvents($t),this.directivePropList=xt}}return Jt.\u0275fac=function(At){return new(At||Jt)(i.Y36(i.s_b))},Jt.\u0275dir=i.lG2({type:Jt,selectors:[["e-splitbuttonitem"]],inputs:{disabled:"disabled",iconCss:"iconCss",id:"id",separator:"separator",text:"text",url:"url"},features:[i.qOj]}),Jt})(),is=(()=>{class Jt extends We{constructor(){super("items")}}return Jt.\u0275fac=function(At){return new(At||Jt)},Jt.\u0275dir=i.lG2({type:Jt,selectors:[["e-splitbuttonitems"]],contentQueries:function(At,li,Oi){if(1&At&&i.Suo(Oi,ji,4),2&At){let Gt;i.iGM(Gt=i.CRH())&&(li.children=Gt)}},features:[i.qOj]}),Jt})();const oi=["beforeClose","beforeItemRender","beforeOpen","click","close","created","open","select"],us=[];let Us=(()=>{let Jt=class extends bt.aW{constructor(At,li,Oi,Gt){super(),this.ngEle=At,this.srenderer=li,this.viewContainerRef=Oi,this.injector=Gt,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(oi),this.addTwoWay.call(this,us),Lt("currentInstance",this,this.viewContainerRef),this.containerContext=new E}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.containerContext.ngAfterContentChecked(this)}};return Jt.\u0275fac=function(At){return new(At||Jt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},Jt.\u0275cmp=i.Xpm({type:Jt,selectors:[["ejs-splitbutton"]],contentQueries:function(At,li,Oi){if(1&At&&i.Suo(Oi,is,5),2&At){let Gt;i.iGM(Gt=i.CRH())&&(li.childItems=Gt.first)}},inputs:{content:"content",createPopupOnClick:"createPopupOnClick",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",iconCss:"iconCss",iconPosition:"iconPosition",items:"items",locale:"locale",target:"target"},outputs:{beforeClose:"beforeClose",beforeItemRender:"beforeItemRender",beforeOpen:"beforeOpen",click:"click",close:"close",created:"created",open:"open",select:"select"},features:[i.qOj],ngContentSelectors:J,decls:1,vars:0,template:function(At,li){1&At&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),Jt})();Us=function(Jt,Wt,At,li){var Dt,Oi=arguments.length,Gt=Oi<3?Wt:null===li?li=Object.getOwnPropertyDescriptor(Wt,At):li;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Gt=Reflect.decorate(Jt,Wt,At,li);else for(var Pt=Jt.length-1;Pt>=0;Pt--)(Dt=Jt[Pt])&&(Gt=(Oi<3?Dt(Gt):Oi>3?Dt(Wt,At,Gt):Dt(Wt,At))||Gt);return Oi>3&&Gt&&Object.defineProperty(Wt,At,Gt),Gt}([Zt([E]),function(Jt,Wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Wt)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],Us);let $i=(()=>{class Jt{}return Jt.\u0275fac=function(At){return new(At||Jt)},Jt.\u0275mod=i.oAB({type:Jt}),Jt.\u0275inj=i.cJS({imports:[Rt.ez]}),Jt})();const ni=["begin","created","end","fail","progress"],Tt=[];let qt=(()=>{let Jt=class extends bt.HR{constructor(At,li,Oi,Gt){super(),this.ngEle=At,this.srenderer=li,this.viewContainerRef=Oi,this.injector=Gt,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(ni),this.addTwoWay.call(this,Tt),Lt("currentInstance",this,this.viewContainerRef),this.containerContext=new E}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};return Jt.\u0275fac=function(At){return new(At||Jt)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.s_b),i.Y36(i.zs3))},Jt.\u0275cmp=i.Xpm({type:Jt,selectors:[["","ejs-progressbutton",""]],inputs:{animationSettings:"animationSettings",content:"content",cssClass:"cssClass",disabled:"disabled",duration:"duration",enableHtmlSanitizer:"enableHtmlSanitizer",enableProgress:"enableProgress",iconCss:"iconCss",iconPosition:"iconPosition",isPrimary:"isPrimary",isToggle:"isToggle",spinSettings:"spinSettings"},outputs:{begin:"begin",created:"created",end:"end",fail:"fail",progress:"progress"},features:[i.qOj],attrs:ve,ngContentSelectors:J,decls:1,vars:0,template:function(At,li){1&At&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),Jt})();qt=function(Jt,Wt,At,li){var Dt,Oi=arguments.length,Gt=Oi<3?Wt:null===li?li=Object.getOwnPropertyDescriptor(Wt,At):li;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Gt=Reflect.decorate(Jt,Wt,At,li);else for(var Pt=Jt.length-1;Pt>=0;Pt--)(Dt=Jt[Pt])&&(Gt=(Oi<3?Dt(Gt):Oi>3?Dt(Wt,At,Gt):Dt(Wt,At))||Gt);return Oi>3&&Gt&&Object.defineProperty(Wt,At,Gt),Gt}([Zt([E]),function(Jt,Wt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Wt)}(0,[i.SBq,i.Qsj,i.s_b,i.zs3])],qt)},7628:(An,hs,rt)=>{rt.d(hs,{AR:()=>Xi,Ac:()=>ve,Ce:()=>ti,Ds:()=>Nt,E7:()=>sn,FE:()=>Io,I$:()=>gt,IV:()=>je,Kn:()=>We,MY:()=>Yo,NA:()=>Lt,NE:()=>kt,Od:()=>as,QI:()=>jt,Qj:()=>li,R3:()=>ci,S0:()=>J,TS:()=>E,V7:()=>Yn,VD:()=>Oi,VY:()=>Ei,Wr:()=>qo,XY:()=>qn,Xh:()=>Ws,Xr:()=>$n,Y4:()=>Es,Ys:()=>Ns,Z9:()=>Vn,Zl:()=>zn,Zz:()=>co,_l:()=>fe,_y:()=>z,aR:()=>zr,az:()=>Rs,bD:()=>Ot,bK:()=>pt,bi:()=>Ls,cn:()=>gi,eC:()=>hi,ep:()=>nr,ex:()=>Si,fw:()=>yr,hv:()=>$t,ju:()=>sr,l7:()=>at,le:()=>Oe,nv:()=>Vi,o8:()=>ft,oL:()=>Do,og:()=>Fi,oq:()=>ms,pJ:()=>Mn,pn:()=>tt,qV:()=>Dt,qx:()=>Fo,re:()=>$s,rt:()=>Qr,s1:()=>Ln,s8:()=>Se,sO:()=>ut,sb:()=>be,td:()=>bn,tk:()=>ls,tx:()=>Rn,wA:()=>Pn,wB:()=>Rr,wD:()=>Rt,wm:()=>hr,xr:()=>ce});const i="ej2_instances";let u=0;function $e(Ge,p){const w=p;return w.unshift(void 0),new(Function.prototype.bind.apply(Ge,w))}function Lt(Ge,p){let w=p;const k=Ge.replace(/\[/g,".").replace(/\]/g,"").split(".");for(let N=0;N<k.length&&!ft(w);N++)w=w[k[N]];return w}function ut(Ge,p,w){const k=Ge.replace(/\[/g,".").replace(/\]/g,"").split("."),N=w||{};let K,R=N;const G=k.length;let ye;for(K=0;K<G;K++)ye=k[K],K+1===G?R[ye]=void 0===p?{}:p:Oe(R[ye])&&(R[ye]={}),R=R[ye];return N}function Si(Ge,p){delete Ge[p]}function We(Ge){return!Oe(Ge)&&Ge.constructor==={}.constructor}function gt(Ge,p){return Ge[p]}function E(Ge,p){if(!Oe(p)){const w=Ge,k=p,N=Object.keys(p),R="deepMerge";for(const K of N)Oe(w[R])||-1===w[R].indexOf(K)||!We(k[K])&&!Array.isArray(k[K])?w[K]=k[K]:at(w[K],w[K],k[K],!0)}}function at(Ge,p,w,k){const N=Ge&&"object"==typeof Ge?Ge:{};let R=arguments.length;k&&(R-=1);for(let K=1;K<R;K++){if(!arguments[K])continue;let G=arguments[K];Object.keys(G).forEach(ye=>{const ee=N[ye],te=G[ye];let ie;const xe=Array.isArray(te)&&Array.isArray(ee)&&te.length!==ee.length,Ke=!ce()||!(ee instanceof Event||xe);k&&Ke&&(We(te)||Array.isArray(te))?We(te)?(ie=ee||{},Array.isArray(ie)&&ie.hasOwnProperty("isComplexArray")?at(ie,{},te,k):N[ye]=at(ie,{},te,k)):(ie=ce()?ee&&Object.keys(te).length:ee||[],N[ye]=at([],ie,te,k)):N[ye]=te})}return N}function Oe(Ge){return null==Ge}function ft(Ge){return typeof Ge>"u"}function jt(Ge){return Ge+"_"+u++}function Nt(Ge,p){let w;return function(){const k=arguments,N=()=>(w=null,Ge.apply(this,k));clearTimeout(w),w=setTimeout(N,p)}}function Rt(Ge,p){return Ge===p||!(Ge===document||!Ge)&&Rt(Ge.parentNode,p)}function z(Ge){try{throw new Error(Ge)}catch(p){throw p.message+"\n"+p.stack}}function J(Ge,p){const w=document.createElement("div"),k=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),N=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(N.length)for(let G=0,ye=N.length;G<ye;G++)k.push(N[G]);let R="";Oe(p)&&(p=window.open("","print","height=452,width=1024,tabbar=no")),w.appendChild(Ge.cloneNode(!0));for(let G=0,ye=k.length;G<ye;G++)R+=k[G].outerHTML;p.document.write("<!DOCTYPE html> <html><head>"+R+"</head><body>"+w.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),p.document.close(),p.focus();const K=setInterval(()=>{p.ready&&(p.print(),p.close(),clearInterval(K))},500);return p}function ve(Ge){const p=Ge+"";return p.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?p:p+"px"}function ce(){return false}function be(Ge){return Node,Ge}function Se(Ge,p){let w="string"==typeof Ge?document.querySelector(Ge):Ge;if(w[i])for(const k of w[i])if(k instanceof p)return k;return null}const Xe={latn:{_digits:"0123456789",_type:"numeric"}},B={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},de=[0,1,2,3,4,5,6,7,8,9];let Be=(()=>{class Ge{static getMainObject(w,k){return Lt("main."+k,w)}static getNumberingSystem(w){return Lt("supplemental.numberingSystems",w)||this.numberingSystems}static reverseObject(w,k){const N=k||Object.keys(w),R={};for(const K of N)R.hasOwnProperty(w[K])||(R[w[K]]=K);return R}static getSymbolRegex(w){const k=w.map(N=>N.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")).join("|");return new RegExp(k,"g")}static getSymbolMatch(w){const k=Object.keys(B),N={};for(const R of k)N[w[R]]=B[R];return N}static constructRegex(w){const k=w.length;let N="";for(let R=0;R<k;R++)N+=R!==k-1?w[R]+"|":w[R];return N}static convertValueParts(w,k,N){return w.replace(k,R=>N[R])}static getDefaultNumberingSystem(w){const k={};return k.obj=Lt("numbers",w),k.nSystem=Lt("defaultNumberingSystem",k.obj),k}static getCurrentNumericOptions(w,k,N,R){const K={},G=this.getDefaultNumberingSystem(w);if(!ft(G.nSystem)||R){const ye=R?Lt("obj.mapperDigits",G):Lt(G.nSystem+"._digits",k);ft(ye)||(K.numericPair=this.reverseObject(ye,de),K.numberParseRegex=new RegExp(this.constructRegex(ye),"g"),K.numericRegex="["+ye[0]+"-"+ye[9]+"]",N&&(K.numericRegex=ye[0]+"-"+ye[9],K.symbolNumberSystem=Lt(R?"numberSymbols":"symbols-numberSystem-"+G.nSystem,G.obj),K.symbolMatch=this.getSymbolMatch(K.symbolNumberSystem),K.numberSystem=G.nSystem))}return K}static getNumberMapper(w,k,N){const R={mapper:{}},K=this.getDefaultNumberingSystem(w);if(!ft(K.nSystem)){R.numberSystem=K.nSystem,R.numberSymbols=Lt("symbols-numberSystem-"+K.nSystem,K.obj),R.timeSeparator=Lt("timeSeparator",R.numberSymbols);const G=Lt(K.nSystem+"._digits",k);if(!ft(G))for(const ye of de)R.mapper[ye]=G[ye]}return R}}return Ge.nPair="numericPair",Ge.nRegex="numericRegex",Ge.numberingSystems=Xe,Ge})();const Fe={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};var $t;!function(Ge){const p=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];Ge.getHijriDate=function w(N){let R=N.getDate(),K=N.getMonth(),G=N.getFullYear(),ye=K+1,ee=G;ye<3&&(ee-=1,ye+=12);let te=Math.floor(ee/100),ie=te-Math.floor(te/4)-2;const xe=Math.floor(365.25*(ee+4716))+Math.floor(30.6001*(ye+1))+R-ie-1524;te=Math.floor((xe-1867216.25)/36524.25),ie=te-Math.floor(te/4)+1;const Ke=xe+ie+1524;let ct=Math.floor((Ke-122.1)/365.25);const ii=Math.floor(365.25*ct),si=Math.floor((Ke-ii)/30.6001);R=Ke-ii-Math.floor(30.6001*si),K=Math.floor((Ke-ii)/20.6001),K>13&&(ct+=1,K-=12),K-=1,G=ct-4716;const Ri=xe-24e5,qi=10631/30;let Mi=xe-1948084;const es=Math.floor(Mi/10631);Mi-=10631*es;const Gs=Math.floor((Mi-.1335)/qi),an=30*es+Gs;Mi-=Math.floor(Gs*qi+.1335);let dr=Math.floor((Mi+28.5001)/29.5);13===dr&&(dr=12);const jr=Mi-Math.floor(29.5001*dr-29);let Pr=0;for(;Pr<p.length&&!(p[Pr]>Ri);Pr++);const Po=Pr+16260,Ze=Math.floor((Po-1)/12);let ne=Ze+1,le=Po-12*Ze,De=Ri-p[Pr-1]+1;return(De+"").length>2&&(De=jr,le=dr,ne=an),{year:ne,month:le,date:De}},Ge.toGregorian=function k(N,R,K){const ii=Math.floor(K+p[12*(N-1)+1+(R-1)-16260-1]-1+24e5+.5);let si=Math.floor((ii-1867216.25)/36524.25);si=ii+1+si-Math.floor(si/4);const Ri=si+1524,qi=Math.floor((Ri-122.1)/365.25),Mi=Math.floor(365.25*qi),es=Math.floor((Ri-Mi)/30.6001),Gs=Ri-Mi-Math.floor(30.6001*es);let an=es-(es>13.5?13:1);const dr=qi-(an>2.5?4716:4715);return dr<=0&&an--,new Date(dr+"/"+an+"/"+Gs)}}($t||($t={}));const ji=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,is="stand-alone",zi=["sun","mon","tue","wed","thu","fri","sat"],ui={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},Ut={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"};class us{static dateFormat(p,w,k){const N=bi.getDependables(k,p,w.calendar),K=(Lt("parserObject.numbers",N),N.dateObject),G={isIslamic:bi.islamicRegex.test(w.calendar)};let ye=w.format||bi.getResultantPattern(w.skeleton,N.dateObject,w.type,!1,"");if(G.dateSeperator=bi.getDateSeparator(N.dateObject),ft(ye))z("Format options or type given must be invalid");else{ye=bi.ConvertDateToWeekFormat(ye),G.pattern=ye,G.numMapper=Be.getNumberMapper(N.parserObject,Be.getNumberingSystem(k));const ee=ye.match(ji)||[];for(const te of ee){const ie=te.length;let xe=te[0];switch("K"===xe&&(xe="h"),xe){case"E":case"c":G.weekday=N.dateObject[bi.days][is][bi.monthIndex[ie]];break;case"M":case"L":G.month=N.dateObject[bi.month][is][bi.monthIndex[ie]];break;case"a":G.designator=Lt("dayPeriods.format.wide",K);break;case"G":G.era=Lt("eras."+(ie<=3?"eraAbbr":4===ie?"eraNames":"eraNarrow"),N.dateObject);break;case"z":G.timeZone=Lt("dates.timeZoneNames",N.parserObject)}}}return ee=>isNaN(ee.getDate())?null:this.intDateFormatter(ee,G)}static intDateFormatter(p,w){let N="";const R=w.pattern.match(bi.dateParseRegex),K=this.getCurrentDateValue(p,w.isIslamic);for(const G of R){const ye=G.length;let ee=G[0];"K"===ee&&(ee="h");let te,xe,Ke,ie="",ct="";switch(ee){case"M":case"L":te=K.month,ye>2?N+=w.month[te]:xe=!0;break;case"E":case"c":N+=w.weekday[zi[p.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(xe=!0,"d"===ee)te=K.date;else if("f"===ee){xe=!1,Ke=!0,ie=p[ui[ee]]().toString(),ie=ie.substring(0,ye);const es=ie.length;if(ye!==es){if(ye>3)continue;for(let Gs=0;Gs<ye-es;Gs++)ie="0"+ie.toString()}ct+=ie}else te=p[ui[ee]]();"h"===ee&&(te=te%12||12);break;case"y":Ke=!0,ct+=K.year,2===ye&&(ct=ct.substr(ct.length-2));break;case"a":let ii=p.getHours()<12?"am":"pm";N+=w.designator[ii];break;case"G":let si=p.getFullYear()<0?0:1,Ri=w.era[si];Oe(Ri)&&(Ri=w.era[si?0:1]),N+=Ri||"";break;case"'":N+="''"===G?"'":G.replace(/'/g,"");break;case"z":let qi=p.getTimezoneOffset(),Mi=ye<4?"+H;-H":w.timeZone.hourFormat;Mi=Mi.replace(/:/g,w.numMapper.timeSeparator),0===qi?N+=w.timeZone.gmtZeroFormat:(Ke=!0,ct=this.getTimeZoneValue(qi,Mi)),ct=w.timeZone.gmtFormat.replace(/\{0\}/,ct);break;case":":N+=w.numMapper.numberSymbols.timeSeparator;break;case"/":N+=w.dateSeperator;break;case"W":xe=!0,te=bi.getWeekOfYear(p);break;default:N+=G}xe&&(Ke=!0,ct=this.checkTwodigitNumber(te,ye)),Ke&&(N+=Be.convertValueParts(ct,bi.latnParseRegex,w.numMapper.mapper))}return N}static getCurrentDateValue(p,w){return w?$t.getHijriDate(p):{year:p.getFullYear(),month:p.getMonth()+1,date:p.getDate()}}static checkTwodigitNumber(p,w){const k=p+"";return 2===w&&2!==k.length?"0"+k:k}static getTimeZoneValue(p,w){let N=w.split(";")[p>0?1:0];const R=Math.abs(p);return N.replace(/HH?|mm/g,K=>{const G=K.length,ye=-1!==K.indexOf("H");return this.checkTwodigitNumber(Math.floor(ye?R/60:R%60),G)})}}const Us={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},zt=["infinity","nan","group","decimal","exponential"];class Xt{static numberFormatter(p,w,k){const N=at({},w);let R={};const K={};let G;const ye=bi.getDependables(k,p,"",!0);K.numberMapper=Be.getNumberMapper(ye.parserObject,Be.getNumberingSystem(k),!0),K.currencySymbol=bi.getCurrencySymbol(ye.numericObject,N.currency||di,w.altSymbol),K.percentSymbol=K.numberMapper.numberSymbols.percentSign,K.minusSymbol=K.numberMapper.numberSymbols.minusSign;const te=K.numberMapper.numberSymbols;if(w.format&&!bi.formatRegex.test(w.format))R=bi.customFormat(w.format,K,ye.numericObject);else{at(N,bi.getProperNumericSkeleton(w.format||"N")),N.isCurrency="currency"===N.type,N.isPercent="percent"===N.type,G=bi.getSymbolPattern(N.type,K.numberMapper.numberSystem,ye.numericObject,N.isAccount),N.groupOne=this.checkValueRange(N.maximumSignificantDigits,N.minimumSignificantDigits,!0),this.checkValueRange(N.maximumFractionDigits,N.minimumFractionDigits,!1,!0),ft(N.fractionDigits)||(N.minimumFractionDigits=N.maximumFractionDigits=N.fractionDigits),ft(N.useGrouping)&&(N.useGrouping=!0),N.isCurrency&&(G=G.replace(/\u00A4/g,bi.defaultCurrency));{const ct=G.split(";");R.nData=bi.getFormatData(ct[1]||"-"+ct[0],!0,K.currencySymbol),R.pData=bi.getFormatData(ct[0],!1,K.currencySymbol),N.useGrouping&&(N.groupSeparator=te[zt[2]],N.groupData=this.getGroupingDetails(ct[0]))}if(ft(N.minimumFractionDigits)&&(N.minimumFractionDigits=R.nData.minimumFraction),ft(N.maximumFractionDigits)){const ct=R.nData.maximumFraction;N.maximumFractionDigits=ft(ct)&&N.isPercent?0:ct}const xe=N.minimumFractionDigits,Ke=N.maximumFractionDigits;!ft(xe)&&!ft(Ke)&&xe>Ke&&(N.maximumFractionDigits=xe)}return at(R.nData,N),at(R.pData,N),ie=>isNaN(ie)?te[zt[1]]:isFinite(ie)?this.intNumberFormatter(ie,R,K):te[zt[0]]}static getGroupingDetails(p){const w={},k=p.match(bi.negativeDataRegex);if(k&&k[4]){const N=k[4],R=N.lastIndexOf(",");if(-1!==R){const K=N.split(".")[0];w.primary=K.length-R-1;const G=N.lastIndexOf(",",R-1);-1!==G&&(w.secondary=R-1-G)}}return w}static checkValueRange(p,w,k,N){const R=N?"f":"s";let K=0;const G=Us["l"+R];let ye=Us["m"+R];if(ft(p)||(this.checkRange(p,G,N),K++),ft(w)||(this.checkRange(w,ye,N),K++),2===K){if(!(p<w))return!0;z(ye+"specified must be less than the"+G)}else k&&1===K&&z("Both"+ye+"and"+ye+"must be present");return!1}static checkRange(p,w,k){const N=k?[0,20]:[1,21];(p<N[0]||p>N[1])&&z(w+"value must be within the range"+N[0]+"to"+N[1])}static intNumberFormatter(p,w,k){let N;if(!ft(w.nData.type)){p<0?(p*=-1,N=w.nData):N=0===p&&w.zeroData||w.pData;let R="";return N.isPercent&&(p*=100),N.groupOne?R=this.processSignificantDigits(p,N.minimumSignificantDigits,N.maximumSignificantDigits):(R=this.processFraction(p,N.minimumFractionDigits,N.maximumFractionDigits),N.minimumIntegerDigits&&(R=this.processMinimumIntegers(R,N.minimumIntegerDigits))),"scientific"===N.type&&(R=p.toExponential(N.maximumFractionDigits),R=R.replace("e",k.numberMapper.numberSymbols[zt[4]])),R=R.replace(".",k.numberMapper.numberSymbols[zt[3]]),N.useGrouping&&(R=this.groupNumbers(R,N.groupData.primary,N.groupSeparator||",",k.numberMapper.numberSymbols[zt[3]]||".",N.groupData.secondary)),R=Be.convertValueParts(R,bi.latnParseRegex,k.numberMapper.mapper),"N/A"===N.nlead?N.nlead:N.nlead+R+N.nend}}static processSignificantDigits(p,w,k){let R,N=p+"";return N.length<w?p.toPrecision(w):(N=p.toPrecision(k),R=+N,R+"")}static groupNumbers(p,w,k,N,R){let K=!Oe(R)&&0!==R;const G=p.split(N),ye=G[0];let ee=ye.length,te="";for(;ee>w;)te=ye.slice(ee-w,ee)+(te.length?k+te:""),ee-=w,K&&(w=R,K=!1);return G[0]=ye.slice(0,ee)+(te.length?k:"")+te,G.join(N)}static processFraction(p,w,k){const N=(p+"").split(".")[1],R=N?N.length:0;if(w&&R<w){let K="";if(0!==R){K+=p;for(let G=0;G<w-R;G++)K+="0";return K}return K=p.toFixed(w),p.toFixed(w)}return!Oe(k)&&(R>k||0===k)?p.toFixed(k):p+""}static processMinimumIntegers(p,w){const k=p.split(".");let N=k[0];const R=N.length;if(R<w){for(let K=0;K<w-R;K++)N="0"+N;k[0]=N}return k.join(".")}}const Kt="stand-alone",ni=/^[0-9]*$/,Tt={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},gs=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,Jt=/,/g,Wt=["minusSign","infinity"];class li{constructor(p){this.ranArray=[],this.boundedEvents={},!Oe(p)&&(this.context=p)}on(p,w,k,N){if(Oe(w))return;const R=k||this.context;this.notExist(p)?this.boundedEvents[p]=[{handler:w,context:R}]:Oe(N)?this.isHandlerPresent(this.boundedEvents[p],w)||this.boundedEvents[p].push({handler:w,context:R}):-1===this.ranArray.indexOf(N)&&(this.ranArray.push(N),this.boundedEvents[p].push({handler:w,context:R,id:N}))}off(p,w,k){if(this.notExist(p))return;const N=Lt(p,this.boundedEvents);if(w){for(let R=0;R<N.length;R++)if(k){if(N[R].id===k){N.splice(R,1);const K=this.ranArray.indexOf(k);-1!==K&&this.ranArray.splice(K,1);break}}else if(w===N[R].handler){N.splice(R,1);break}}else delete this.boundedEvents[p]}notify(p,w,k,N){if(this.notExist(p))return void(k&&k.call(this,w));w&&(w.name=p);const K=Lt(p,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(K,w,k,N,0);for(const G of K)G.handler.call(G.context,w);k&&k.call(this,w)}blazorCallback(p,w,k,N,R){const K=R===p.length-1;if(R<p.length){const G=p[R],ye=G.handler.call(G.context,w);if(ye&&"function"==typeof ye.then){if(!k)return ye;ye.then(ee=>{if(ee="string"==typeof ee&&this.isJson(ee)?JSON.parse(ee,this.dateReviver):ee,at(w,w,ee,!0),!k||!K)return this.blazorCallback(p,w,k,N,R+1);k.call(G.context,w)}).catch(ee=>{N&&N.call(G.context,"string"==typeof ee&&this.isJson(ee)?JSON.parse(ee,this.dateReviver):ee)})}else{if(!k||!K)return this.blazorCallback(p,w,k,N,R+1);k.call(G.context,w)}}}dateReviver(p,w){return ce&&"string"==typeof w&&null!==w.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(w):w}isJson(p){try{JSON.parse(p)}catch{return!1}return!0}destroy(){this.boundedEvents=this.context=void 0}notExist(p){return!1===this.boundedEvents.hasOwnProperty(p)||this.boundedEvents[p].length<=0}isHandlerPresent(p,w){for(const k of p)if(k.handler===w)return!0;return!1}}const Oi=new li;const Dt={};let Pt="en-US",di="USD";const ot=["numericObject","dateObject"];class hi{constructor(p){p&&(this.culture=p)}getDateFormat(p){return us.dateFormat(this.getCulture(),p||{type:"date",skeleton:"short"},Dt)}getNumberFormat(p){return p&&!p.currency&&(p.currency=di),Xt.numberFormatter(this.getCulture(),p||{},Dt)}getDateParser(p){return class Ci{static dateParser(p,w,k){const N=bi.getDependables(k,p,w.calendar),R=Be.getCurrentNumericOptions(N.parserObject,Be.getNumberingSystem(k),!1,!1);let ee,K={},G=w.format||bi.getResultantPattern(w.skeleton,N.dateObject,w.type,!1,""),ye="";if(ft(G))z("Format options or type given must be invalid");else{G=bi.ConvertDateToWeekFormat(G),K={isIslamic:bi.islamicRegex.test(w.calendar),pattern:G,evalposition:{},culture:p};const te=G.match(bi.dateParseRegex)||[],ie=te.length;let xe=0,Ke=0,ct=!1;const ii=R.numericRegex;let si=Be.getNumberMapper(N.parserObject,Be.getNumberingSystem(k));for(let Ri=0;Ri<ie;Ri++){const qi=te[Ri],Mi=qi.length,es="K"===qi[0]?"h":qi[0];let Gs,an,dr=Ut[es];const jr=2===Mi?"":"?";switch(ct&&(xe=Ke,ct=!1),es){case"E":case"c":let Pr;Pr=N.dateObject[bi.days][Kt][bi.monthIndex[Mi]];let Po=Be.reverseObject(Pr);ye+="("+Object.keys(Po).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(an=!0,("M"===es||"L"===es)&&Mi>2){let Ht;Ht=N.dateObject.months[Kt][bi.monthIndex[Mi]],K[dr]=Be.reverseObject(Ht),ye+="("+Object.keys(K[dr]).join("|")+")"}else if("f"===es){if(Mi>3)continue;Gs=!0,ye+="("+ii+ii+"?"+ii+"?)"}else Gs=!0,ye+="("+ii+ii+jr+")";"h"===es&&(K.hour12=!0);break;case"W":ye+="("+ii+(1===Mi?"?":"")+ii+")";break;case"y":an=Gs=!0,ye+=2===Mi?"("+ii+ii+")":"("+ii+"{"+Mi+",})";break;case"a":an=!0;let ne=Lt("dayPeriods.format.wide",N.dateObject);K[dr]=Be.reverseObject(ne),ye+="("+Object.keys(K[dr]).join("|")+")";break;case"G":an=!0,K[dr]=Be.reverseObject(Lt("eras."+(Mi<=3?"eraAbbr":4===Mi?"eraNames":"eraNarrow"),N.dateObject)),ye+="("+Object.keys(K[dr]).join("|")+"?)";break;case"z":an=0!==(new Date).getTimezoneOffset(),K[dr]=Lt("dates.timeZoneNames",N.parserObject);let Ye=K[dr];ee=Mi<4;let Ct=ee?"+H;-H":Ye.hourFormat;Ct=Ct.replace(/:/g,si.timeSeparator),ye+="("+this.parseTimeZoneRegx(Ct,Ye,ii)+")?",ct=!0,Ke=ee?6:12;break;case"'":ye+="("+qi.replace(/'/g,"")+")?";break;default:ye+="([\\D])"}an&&(K.evalposition[dr]={isNumber:Gs,pos:Ri+1+xe,hourOnly:ee}),Ri===ie-1&&!Oe(ye)&&(K.parserRegex=new RegExp("^"+ye+"$","i"))}}return te=>{const ie=this.internalDateParse(te,K,R);if(Oe(ie)||!Object.keys(ie).length)return null;if(K.isIslamic){let xe={},Ke=ie.year;const ct=ie.day,ii=ie.month,si=Ke?Ke+"":"",Ri=2===si.length;(!Ke||!ii||!ct||Ri)&&(xe=$t.getHijriDate(new Date)),Ri&&(Ke=parseInt((xe.year+"").slice(0,2)+si,10));const qi=$t.toGregorian(Ke||xe.year,ii||xe.month,ct||xe.date);ie.year=qi.getFullYear(),ie.month=qi.getMonth()+1,ie.day=qi.getDate()}return this.getDateObject(ie)}}static getDateObject(p,w){const k=w||new Date;k.setMilliseconds(0);const N=["hour","minute","second","milliseconds","month","day"];let R=p.year;const K=p.designator,G=p.timeZone;ft(R)||((R+"").length<=2&&(R+=100*Math.floor(k.getFullYear()/100)),k.setFullYear(R));for(const ye of N){let ee=p[ye];if(ft(ee)&&"day"===ye&&k.setDate(1),!ft(ee))if("month"===ye){if(ee-=1,ee<0||ee>11)return new Date("invalid");const te=k.getDate();k.setDate(1),k[Tt[ye]](ee);const ie=new Date(k.getFullYear(),ee+1,0).getDate();k.setDate(te<ie?te:ie)}else{if("day"===ye){const te=new Date(k.getFullYear(),k.getMonth()+1,0).getDate();if(ee<1||ee>te)return null}k[Tt[ye]](ee)}}if(!ft(K)){const ye=k.getHours();"pm"===K?k.setHours(ye+(12===ye?0:12)):12===ye&&k.setHours(0)}if(!ft(G)){const ye=G-k.getTimezoneOffset();0!==ye&&k.setMinutes(k.getMinutes()+ye)}return k}static internalDateParse(p,w,k){const N=p.match(w.parserRegex),R={hour:0,minute:0,second:0};if(Oe(N))return null;{const K=Object.keys(w.evalposition);for(const G of K){const ye=w.evalposition[G];let ee=N[ye.pos];if(ye.isNumber)R[G]=this.internalNumberParser(ee,k);else if("timeZone"!==G||ft(ee))ee="month"!==G||w.isIslamic||"en"!==w.culture&&"en-GB"!==w.culture&&"en-US"!==w.culture?ee:ee[0].toUpperCase()+ee.substring(1).toLowerCase(),R[G]=w[G][ee];else{const te=ye.pos;let ie;const xe=N[te+1],Ke=!ft(xe);ye.hourOnly?ie=60*this.getZoneValue(Ke,xe,N[te+4],k):(ie=60*this.getZoneValue(Ke,xe,N[te+7],k),ie+=this.getZoneValue(Ke,N[te+4],N[te+10],k)),Oe(ie)||(R[G]=ie)}}w.hour12&&(R.hour12=!0)}return R}static internalNumberParser(p,w){return p=Be.convertValueParts(p,w.numberParseRegex,w.numericPair),ni.test(p)?+p:null}static parseTimeZoneRegx(p,w,k){const N=w.gmtFormat;let R;const K="("+k+")("+k+")";let G;return R=p.replace("+","\\+"),R=-1!==p.indexOf("HH")?R.replace(/HH|mm/g,"("+K+")"):R.replace(/H|m/g,"("+K+"?)"),G=R.split(";").map(ye=>N.replace("{0}",ye)),R=G.join("|")+"|"+w.gmtZeroFormat,R}static getZoneValue(p,w,k,N){const R=p?w:k;if(!R)return 0;const K=this.internalNumberParser(R,N);return p?-K:K}}.dateParser(this.getCulture(),p||{skeleton:"short",type:"date"},Dt)}getNumberParser(p){return class At{static numberParser(p,w,k){const N=bi.getDependables(k,p,"",!0),R={custom:!0};let K;bi.formatRegex.test(w.format)||!w.format?(at(R,bi.getProperNumericSkeleton(w.format||"N")),R.custom=!1,R.fractionDigits||w.maximumFractionDigits&&(R.maximumFractionDigits=w.maximumFractionDigits)):at(R,bi.customFormat(w.format,null,null));Lt("numbers",N.parserObject);let ye;if(K=Be.getCurrentNumericOptions(N.parserObject,Be.getNumberingSystem(k),!0,!1),R.symbolRegex=Be.getSymbolRegex(Object.keys(K.symbolMatch)),R.infinity=K.symbolNumberSystem[Wt[1]],ye=bi.getSymbolPattern(R.type,K.numberSystem,N.numericObject,R.isAccount),ye){ye=ye.replace(/\u00A4/g,bi.defaultCurrency);const ee=ye.split(";");R.nData=bi.getFormatData(ee[1]||"-"+ee[0],!0,""),R.pData=bi.getFormatData(ee[0],!0,"")}return ee=>this.getParsedNumber(ee,R,K)}static getParsedNumber(p,w,k){let N,R,K,G,ye,ee;if(-1!==p.indexOf(w.infinity))return 1/0;{p=Be.convertValueParts(p,w.symbolRegex,k.symbolMatch),0===(p=-1!==(p=Be.convertValueParts(p,k.numberParseRegex,k.numericPair)).indexOf("-")?p.replace("-.","-0."):p).indexOf(".")&&(p="0"+p);const te=p.match(gs);if(Oe(te))return NaN;G=te[1],K=te[2];const ie=te[5];return ye=te[6],N=w.custom?G===w.nData.nlead&&ye===w.nData.nend:-1!==G.indexOf(w.nData.nlead)&&-1!==ye.indexOf(w.nData.nend),R=N?w.nData.isPercent:w.pData.isPercent,K=K.replace(Jt,""),ie&&(K+=ie),ee=+K,("percent"===w.type||R)&&(ee/=100),(w.custom||w.fractionDigits)&&(ee=parseFloat(ee.toFixed(w.custom?N?w.nData.maximumFractionDigits:w.pData.maximumFractionDigits:w.fractionDigits))),w.maximumFractionDigits&&(ee=this.convertMaxFracDigits(K,w,ee,N)),N&&(ee*=-1),ee}}static convertMaxFracDigits(p,w,k,N){let R=p.split(".");return R[1]&&R[1].length>w.maximumFractionDigits&&(k=+k.toFixed(w.custom?N?w.nData.maximumFractionDigits:w.pData.maximumFractionDigits:w.maximumFractionDigits)),k}}.numberParser(this.getCulture(),p||{format:"N"},Dt)}formatNumber(p,w){return this.getNumberFormat(w)(p)}formatDate(p,w){return this.getDateFormat(w)(p)}parseDate(p,w){return this.getDateParser(w)(p)}parseNumber(p,w){return this.getNumberParser(w)(p)}getDatePattern(p,w){return bi.getActualDateTimeFormat(this.getCulture(),p,Dt,w)}getNumberPattern(p,w){return bi.getActualNumberFormat(this.getCulture(),p,Dt,w)}getFirstDayOfWeek(){return bi.getWeekData(this.getCulture(),Dt)}getCulture(){return this.culture||Pt}}function Ei(Ge){Pt=Ge,Oi.notify("notifyExternalChange",{locale:Pt})}function kt(Ge,p){let w=bi.getDependables(Dt,Ge,"",!0)[ot[0]];const k=bi.getDependables(Dt,Ge,"")[ot[1]],N=Lt("defaultNumberingSystem",w),R=Lt("symbols-numberSystem-"+N,w),K=bi.getSymbolPattern(p||"decimal",N,w,!1);return at(R,bi.getFormatData(K,!0,"",!0),{dateSeparator:bi.getDateSeparator(k)})}function Ot(Ge){return bi.getDependables(Dt,"",Ge,!1)[ot[1]]}const Ai={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};var bi;!function(Ge){Ge.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,Ge.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,Ge.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;const p=/[0-9]/g;Ge.defaultCurrency="$";const w=["infinity","nan","group","decimal"],k=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,N={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};Ge.dateConverterMapper=/dddd|ddd/gi,Ge.islamicRegex=/^islamic/;const K={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};Ge.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,Ge.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,Ge.curWithoutNumberRegex=/(c|a)$/gi;const G={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function ye(De,Ye,Ct,_t,Ht){let vi;const ds=Ct||"date";if(Ht)vi=xe({skeleton:De},Ht).format||xe({skeleton:"d"},"en-US").format;else{if(-1!==Ge.basicPatterns.indexOf(De)){if(vi=Lt(ds+"Formats."+De,Ye),"dateTime"===ds){const Ks=Lt("dateFormats."+De,Ye),Qs=Lt("timeFormats."+De,Ye);vi=vi.replace("{1}",Ks).replace("{0}",Qs)}}else vi=Lt("dateTimeFormats.availableFormats."+De,Ye);ft(vi)&&"yMd"===De&&(vi="M/d/y")}return vi}function ee(De,Ye,Ct,_t){const Ht={},vi=Ct||"gregorian";if(Ht.parserObject=Be.getMainObject(De,Ye)||Ge.defaultObject,_t)Ht.numericObject=Lt("numbers",Ht.parserObject);else{Ht.dateObject=Lt("dates.calendars."+vi,Ht.parserObject)}return Ht}function te(De,Ye,Ct,_t){return Lt(De+"Formats-numberSystem-"+Ye+(_t?".accounting":".standard"),Ct)||(_t?Lt(De+"Formats-numberSystem-"+Ye+".standard",Ct):"")}function ie(De){De.match(Ge.dateConverterMapper);return De}function xe(De,Ye){const Ct=De.format||De.skeleton;let _t=Lt((Ye||"en-US")+"."+Ct,Ai);return _t||(_t=Lt("en-US."+Ct,Ai)),_t&&(_t=ie(_t),De.format=_t.replace(/tt/,"a")),De}function Ke(De){const Ye=De.match(Ge.formatRegex),Ct={},_t=Ye[1].toUpperCase();return Ct.isAccount="A"===_t,Ct.type=Ge.patternMatcher[_t],De.length>1&&(Ct.fractionDigits=parseInt(Ye[2],10)),Ct}function ct(De,Ye,Ct,_t){const Ht=_t?{}:{nlead:"",nend:""},vi=De.match(Ge.customRegex);if(vi){_t||(Ht.nlead=ii(vi[1],Ct),Ht.nend=ii(vi[10],Ct),Ht.groupPattern=vi[4]);const ds=vi[7];if(ds&&Ye){const Ks=ds.match(p);Ht.minimumFraction=Oe(Ks)?0:Ks.length,Ht.maximumFraction=ds.length-1}}return Ht}function ii(De,Ye){return De?De.replace(Ge.defaultCurrency,Ye):""}function si(De,Ye,Ct){return Lt("currencies."+Ye+(Ct?"."+Ct:".symbol"),De)||Lt("currencies."+Ye+".symbol-alt-narrow",De)||"$"}function qi(De,Ye,Ct){const _t={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},Ht=De.match(Ge.customRegex);if(Oe(Ht)||""===Ht[5]&&"N/A"!==De)return _t.type=void 0,_t;_t.nlead=Ht[1],_t.nend=Ht[10];let vi=Ht[6];const ds=!!vi.match(/\ $/g),Ks=-1!==vi.replace(/\ $/g,"").indexOf(" ");_t.useGrouping=-1!==vi.indexOf(",")||Ks,vi=Ks?vi.replace(/,/g,""):vi.replace(/,/g,"").replace(/\ $/g,"");const Qs=Ht[7];if(-1!==vi.indexOf("0")&&(_t.minimumIntegerDigits=vi.length-vi.indexOf("0")),Oe(Qs)||(_t.minimumFractionDigits=Qs.lastIndexOf("0"),_t.maximumFractionDigits=Qs.lastIndexOf("#"),-1===_t.minimumFractionDigits&&(_t.minimumFractionDigits=0),(-1===_t.maximumFractionDigits||_t.maximumFractionDigits<_t.minimumFractionDigits)&&(_t.maximumFractionDigits=_t.minimumFractionDigits)),Oe(Ye)?at(_t,Mi([_t.nlead,_t.nend],"%","%")):(at(_t,Mi([_t.nlead,_t.nend],"$",Ye.currencySymbol)),_t.isCurrency||at(_t,Mi([_t.nlead,_t.nend],"%",Ye.percentSymbol))),!Oe(Ct)){const Wn=te(_t.type,Ye.numberMapper.numberSystem,Ct,!1);_t.useGrouping&&(_t.groupSeparator=Ks?" ":Ye.numberMapper.numberSymbols[w[2]],_t.groupData=Xt.getGroupingDetails(Wn.split(";")[0])),_t.nlead=_t.nlead.replace(/'/g,""),_t.nend=ds?" "+_t.nend.replace(/'/g,""):_t.nend.replace(/'/g,"")}return _t}function Mi(De,Ye,Ct){const _t={nlead:De[0],nend:De[1]};for(let Ht=0;Ht<2;Ht++){const vi=De[Ht],ds=vi.indexOf(Ye);if(-1!==ds&&(ds<vi.indexOf("'")||ds>vi.lastIndexOf("'"))){_t[G[Ht]]=vi.substr(0,ds)+Ct+vi.substr(ds+1),_t[G[Ye]]=!0,_t.type=_t.isCurrency?"currency":"percent";break}}return _t}function jr(De,Ye,Ct){De+=".";for(let _t=0;_t<Ye;_t++)De+="0";if(Ye<Ct){const _t=Ct-Ye;for(let Ht=0;Ht<_t;Ht++)De+="#"}return De}function Pr(De,Ye){const Ct=De.split(".");let _t="";for(let Ht=0;Ht<Ye;Ht++)_t+="0";return Ct[1]?_t+"."+Ct[1]:_t}function Po(De){const Ye=De.split(".");let Ct=Ye[0];const _t=3-Ct.length%3;Ct=(_t&&1===_t?"#":2===_t?"##":"")+Ct,De="";for(let vi=Ct.length-1;vi>0;vi-=3)De=","+Ct[vi-2]+Ct[vi-1]+Ct[vi]+De;return De=De.slice(1),Ye[1]?De+"."+Ye[1]:De}Ge.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,Ge.basicPatterns=["short","medium","long","full"],Ge.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},Ge.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},Ge.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},Ge.month="months",Ge.days="days",Ge.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},Ge.getResultantPattern=ye,Ge.getDependables=ee,Ge.getSymbolPattern=te,Ge.ConvertDateToWeekFormat=ie,Ge.compareBlazorDateFormats=xe,Ge.getProperNumericSkeleton=Ke,Ge.getFormatData=ct,Ge.changeCurrencySymbol=ii,Ge.getCurrencySymbol=si,Ge.customFormat=function Ri(De,Ye,Ct){const _t={},Ht=De.split(";"),vi=["pData","nData","zeroData"];for(let ds=0;ds<Ht.length;ds++)_t[vi[ds]]=qi(Ht[ds],Ye,Ct);return Oe(_t.nData)&&(_t.nData=at({},_t.pData),_t.nData.nlead=Oe(Ye)?"-"+_t.nData.nlead:Ye.minusSymbol+_t.nData.nlead),_t},Ge.customNumberFormat=qi,Ge.isCurrencyPercent=Mi,Ge.getDateSeparator=function es(De){const Ye=(Lt("dateFormats.short",De)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return Ye?Ye[1]:"/"},Ge.getActualDateTimeFormat=function Gs(De,Ye,Ct,_t){const Ht=ee(Ct,De,Ye.calendar);let vi=Ye.format||ye(Ye.skeleton,Ht.dateObject,Ye.type);if(_t){if(vi=vi.replace(k,ds=>N[ds]),-1!==vi.indexOf("z")){const ds=vi.match(/z/g).length;let Ks;const Qs={timeZone:{}};Qs.numMapper=Be.getNumberMapper(Ht.parserObject,Be.getNumberingSystem(Ct)),Qs.timeZone=Lt("dates.timeZoneNames",Ht.parserObject);const or=(new Date).getTimezoneOffset();let gn=ds<4?"+H;-H":Qs.timeZone.hourFormat;gn=gn.replace(/:/g,Qs.numMapper.timeSeparator),0===or?Ks=Qs.timeZone.gmtZeroFormat:(Ks=us.getTimeZoneValue(or,gn),Ks=Qs.timeZone.gmtFormat.replace(/\{0\}/,Ks)),vi=vi.replace(/[z]+/,'"'+Ks+'"')}vi=vi.replace(/ $/,"")}return vi},Ge.getActualNumberFormat=function dr(De,Ye,Ct,_t){const Ht=ee(Ct,De,"",!0),vi={custom:!0};let Ks;const Qs={},Wn=(Ye.format||"").match(Ge.currencyFormatRegex),gn=(Ge.formatRegex.test(Ye.format)&&Ke(Ye.format||"N"),{});if(Wn){gn.numberMapper=Be.getNumberMapper(Ht.parserObject,Be.getNumberingSystem(Ct),!0);const Zr=si(Ht.numericObject,Ye.currency||di,Ye.altSymbol);let Co=te("currency",gn.numberMapper.numberSystem,Ht.numericObject,/a/i.test(Ye.format));Co=Co.replace(/\u00A4/g,Zr);const fo=Co.split(";");Qs.hasNegativePattern=fo.length>1,Qs.nData=ct(fo[1]||"-"+fo[0],!0,Zr),Qs.pData=ct(fo[0],!1,Zr),!Wn[2]&&!Ye.minimumFractionDigits&&!Ye.maximumFractionDigits&&(Ks=ct(Co.split(";")[0],!0,"",!0).minimumFraction)}let Un;if(Ge.formatRegex.test(Ye.format)||!Ye.format){if(at(vi,Ke(Ye.format||"N")),vi.custom=!1,Un="###0",(vi.fractionDigits||Ye.minimumFractionDigits||Ye.maximumFractionDigits||Ks)&&(vi.fractionDigits&&(Ye.minimumFractionDigits=Ye.maximumFractionDigits=vi.fractionDigits),Un=jr(Un,Ks||vi.fractionDigits||Ye.minimumFractionDigits||0,Ye.maximumFractionDigits||0)),Ye.minimumIntegerDigits&&(Un=Pr(Un,Ye.minimumIntegerDigits)),Ye.useGrouping&&(Un=Po(Un)),"currency"===vi.type){const Zr=Un;Un=Qs.pData.nlead+Zr+Qs.pData.nend,Qs.hasNegativePattern&&(Un+=";"+Qs.nData.nlead+Zr+Qs.nData.nend)}"percent"===vi.type&&(Un+=" %")}else Un=Ye.format.replace(/'/g,'"');return Object.keys(gn).length>0&&(Un=_t?Un:function an(De,Ye){if(-1!==De.indexOf(",")){let Ct=De.split(",");De=Ct[0]+Lt("numberMapper.numberSymbols.group",Ye)+Ct[1].replace(".",Lt("numberMapper.numberSymbols.decimal",Ye))}else De=De.replace(".",Lt("numberMapper.numberSymbols.decimal",Ye));return De}(Un,gn)),Un},Ge.fractionDigitsPattern=jr,Ge.minimumIntegerPattern=Pr,Ge.groupingPattern=Po,Ge.getWeekData=function Ze(De,Ye){let Ct="sun";const _t=Lt("supplemental.weekData.firstDay",Ye);let Ht=De;return/en-/.test(Ht)&&(Ht=Ht.slice(3)),Ht=Ht.slice(0,2).toUpperCase()+Ht.substr(2),_t&&(Ct=_t[Ht]||_t[Ht.slice(0,2)]||"sun"),K[Ct]},Ge.replaceBlazorCurrency=function ne(De,Ye,Ct){const _t=function xt(Ge){return Lt(Ge||"",Fe)}(Ct);if(Ye!==_t)for(const Ht of De)Ht.nend=Ht.nend.replace(Ye,_t),Ht.nlead=Ht.nlead.replace(Ye,_t)},Ge.getWeekOfYear=function le(De){const Ye=new Date(De.getFullYear(),0,1);let _t,Ct=Ye.getDay();Ct=Ct>=0?Ct:Ct+7;const Ht=Math.floor((De.getTime()-Ye.getTime()-6e4*(De.getTimezoneOffset()-Ye.getTimezoneOffset()))/864e5)+1;if(Ct<4){if(_t=Math.floor((Ht+Ct-1)/7)+1,_t>52){let ds=new Date(De.getFullYear()+1,0,1).getDay();ds=ds>=0?ds:ds+7,_t=ds<4?1:53}}else _t=Math.floor((Ht+Ct-1)/7);return _t}}(bi||(bi={}));const Ti=/^(.*?):[ \t]*([^\r\n]*)$/gm;class ls{constructor(p,w,k,N){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof p?(this.url=p,this.type=w?w.toUpperCase():"GET",this.mode=!!Oe(k)||k):"object"==typeof p&&(this.options=p,E(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:N}send(p){this.data=Oe(p)?this.data:p;const w={cancel:!1,httpRequest:null};return new Promise((N,R)=>{this.httpRequest=new XMLHttpRequest,this.httpRequest.onreadystatechange=()=>{this.stateChange(N,R)},Oe(this.onLoad)||(this.httpRequest.onload=this.onLoad),Oe(this.onProgress)||(this.httpRequest.onprogress=this.onProgress),Oe(this.onAbort)||(this.httpRequest.onabort=this.onAbort),Oe(this.onError)||(this.httpRequest.onerror=this.onError),Oe(this.onUploadProgress)||(this.httpRequest.upload.onprogress=this.onUploadProgress),this.httpRequest.open(this.type,this.url,this.mode),!Oe(this.data)&&null!==this.contentType&&this.httpRequest.setRequestHeader("Content-Type",this.contentType||"application/json; charset=utf-8"),this.beforeSend&&(w.httpRequest=this.httpRequest,this.beforeSend(w)),w.cancel||this.httpRequest.send(Oe(this.data)?null:this.data)})}successHandler(p){return this.onSuccess&&this.onSuccess(p,this),p}failureHandler(p){return this.onFailure&&this.onFailure(this.httpRequest),p}stateChange(p,w){let k=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===k)k=void 0;else try{k=JSON.parse(k)}catch{}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?p(this.successHandler(k)):this.emitError?w(new Error(this.failureHandler(this.httpRequest.statusText))):p())}getResponseHeader(p){let w,k;w={};let N=Ti.exec(this.httpRequest.getAllResponseHeaders());for(;N;)w[N[1].toLowerCase()]=N[2],N=Ti.exec(this.httpRequest.getAllResponseHeaders());return k=w[p.toLowerCase()],Oe(k)?null:k}}const ws=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Ds=/msie|trident/i,on=/Trident\/7\./,Bn=/(ipad|iphone|ipod touch)/i,Kn=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Dn=/android/i,In=/trident|windows phone|edge/i,js=/(version)[ /]([\w.]+)/i,Yt={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});class Xi{static extractBrowserDetail(){const p={culture:{}},w=Object.keys(Yt);let k=[];for(const N of w)if(k=Xi.userAgent.match(Yt[N]),k){if(p.name="opr"===k[1].toLowerCase()?"opera":k[1].toLowerCase(),p.name="crios"===k[1].toLowerCase()?"chrome":p.name,p.version=k[2],p.culture.name=p.culture.language=navigator.language,Xi.userAgent.match(on)){p.name="msie";break}const R=Xi.userAgent.match(js);"safari"===p.name&&R&&(p.version=R[2]);break}return p}static getEvent(p){const w={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return Xi.isPointer?w[p].isPointer:Xi.isTouch?w[p].isTouch+(Xi.isDevice?"":" "+w[p].isDevice):w[p].isDevice}static getTouchStartEvent(){return Xi.getEvent("start")}static getTouchEndEvent(){return Xi.getEvent("end")}static getTouchMoveEvent(){return Xi.getEvent("move")}static getTouchCancelEvent(){return Xi.getEvent("cancel")}static getValue(p,w){const k=window.browserDetails;return typeof k[p]>"u"?k[p]=w.test(Xi.userAgent):("MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===Xi.isTouch&&(k.isIos=!0,k.isDevice=!0,k.isTouch=!0,k.isPointer=!0),k[p])}static set userAgent(p){Xi.uA=p,window.browserDetails={}}static get userAgent(){return Xi.uA}static get info(){return ft(window.browserDetails.info)?window.browserDetails.info=Xi.extractBrowserDetail():window.browserDetails.info}static get isIE(){return Xi.getValue("isIE",Ds)}static get isTouch(){return ft(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch}static get isPointer(){return ft(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer}static get isMSPointer(){return ft(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer}static get isDevice(){return Xi.getValue("isDevice",ws)}static get isIos(){return Xi.getValue("isIos",Bn)}static get isIos7(){return Xi.getValue("isIos7",Kn)}static get isAndroid(){return Xi.getValue("isAndroid",Dn)}static get isWebView(){return ft(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(ft(window.cordova)&&ft(window.PhoneGap)&&ft(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView}static get isWindows(){return Xi.getValue("isWindows",In)}static get touchStartEvent(){return ft(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=Xi.getTouchStartEvent():window.browserDetails.touchStartEvent}static get touchMoveEvent(){return ft(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=Xi.getTouchMoveEvent():window.browserDetails.touchMoveEvent}static get touchEndEvent(){return ft(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=Xi.getTouchEndEvent():window.browserDetails.touchEndEvent}static get touchCancelEvent(){return ft(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=Xi.getTouchCancelEvent():window.browserDetails.touchCancelEvent}}Xi.uA=typeof navigator<"u"?navigator.userAgent:"";class Ls{static addOrGetEventData(p){return"__eventList"in p?p.__eventList.events:(p.__eventList={},p.__eventList.events=[])}static add(p,w,k,N,R){const K=Ls.addOrGetEventData(p);let G;G=R?Nt(k,R):k,N&&(G=G.bind(N));const ye=w.split(" ");for(let ee=0;ee<ye.length;ee++)K.push({name:ye[ee],listener:k,debounce:G}),Xi.isIE?p.addEventListener(ye[ee],G):p.addEventListener(ye[ee],G,{passive:!1});return G}static remove(p,w,k){const N=Ls.addOrGetEventData(p),R=w.split(" ");for(let K=0;K<R.length;K++){let ye,G=-1;N&&0!==N.length&&N.some((ee,te)=>ee.name===R[K]&&ee.listener===k&&(G=te,ye=ee.debounce,!0)),-1!==G&&N.splice(G,1),ye&&p.removeEventListener(R[K],ye)}}static clearEvents(p){let w,k;w=Ls.addOrGetEventData(p),k=at([],k,w);for(let N=0;N<k.length;N++)p.removeEventListener(k[N].name,k[N].debounce),w.shift()}static trigger(p,w,k){const N=Ls.addOrGetEventData(p);for(const R of N)R.name===w&&R.debounce.call(this,k)}}const cr=/^svg|^path|^g/;function Rs(Ge,p){const w=cr.test(Ge)?document.createElementNS("http://www.w3.org/2000/svg",Ge):document.createElement(Ge);return typeof p>"u"||(w.innerHTML=p.innerHTML?p.innerHTML:"",void 0!==p.className&&(w.className=p.className),void 0!==p.id&&(w.id=p.id),void 0!==p.styles&&w.setAttribute("style",p.styles),void 0!==p.attrs&&Es(w,p.attrs)),w}function gi(Ge,p){const w=Re(p);for(const k of Ge)for(const N of w)if(We(k)){const R=Lt("attributes.className",k);Oe(R)?ut("attributes.className",N,k):new RegExp("\\b"+N+"\\b","i").test(R)||ut("attributes.className",R+" "+N,k)}else k.classList.contains(N)||k.classList.add(N);return Ge}function je(Ge,p){const w=Re(p);for(const k of Ge){const N=We(k);if(N?Lt("attributes.className",k):""!==k.className)for(const K of w)if(N){const ye=Lt("attributes.className",k).split(" "),ee=ye.indexOf(K);-1!==ee&&ye.splice(ee,1),ut("attributes.className",ye.join(" "),k)}else k.classList.remove(K)}return Ge}function Re(Ge){let p=[];return"string"==typeof Ge?p.push(Ge):p=Ge,p}function tt(Ge){return""===Ge.style.visibility&&Ge.offsetWidth>0}function ti(Ge,p,w){const k=document.createDocumentFragment();for(const N of Ge)k.appendChild(N);return p.insertBefore(k,p.firstElementChild),w&&pi(p),Ge}function ci(Ge,p,w){const k=document.createDocumentFragment();for(const N of Ge)k.appendChild(N);return p.appendChild(k),w&&pi(p),Ge}function pi(Ge){Ge.querySelectorAll("script").forEach(w=>{const k=document.createElement("script");k.text=w.innerHTML,document.head.appendChild(k),Fi(k)})}function Fi(Ge){const p=Ge.parentNode;if(p)return p.removeChild(Ge)}function as(Ge){const p=Ge.parentNode;Ls.clearEvents(Ge),p.removeChild(Ge)}function Es(Ge,p){const w=Object.keys(p),k=Ge;for(const N of w)if(We(k)){let R=N;"tabindex"===N&&(R="tabIndex"),k.attributes[R]=p[N]}else k.setAttribute(N,p[N]);return k}function Ns(Ge,p=document,w){return Ge=pn(Ge),p.querySelector(Ge)}function bn(Ge,p=document,w){return Ge=pn(Ge),p.querySelectorAll(Ge)}function pn(Ge){const p=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(Ge.match(/#[0-9]/g)||Ge.match(p)){const w=Ge.split(",");for(let k=0;k<w.length;k++){const N=w[k].split(" ");for(let R=0;R<N.length;R++)if(N[R].indexOf("#")>-1&&!N[R].match(/\[.*\]/)){const K=N[R].split("#");if(K[1].match(/^\d/)||K[1].match(p)){const G=N[R].split(".");G[0]=G[0].replace(/#/,"[id='")+"']",N[R]=G.join(".")}}w[k]=N.join(" ")}return w.join(",")}return Ge}function ms(Ge,p){let w=Ge;if("function"==typeof w.closest)return w.closest(p);for(;w&&1===w.nodeType;){if(Rr(w,p))return w;w=w.parentNode}return null}function Yn(Ge,p){void 0!==p&&Object.keys(p).forEach(w=>{Ge.style[w]=p[w]})}function Ln(Ge,p,w){gi([Ge],p),je([Ge],w)}function Rr(Ge,p){let w=Ge.matches||Ge.msMatchesSelector||Ge.webkitMatchesSelector;return w?w.call(Ge,p):-1!==[].indexOf.call(document.querySelectorAll(p),Ge)}const ln=new RegExp("]");class qn{constructor(p,w){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=()=>{},this.childChangedProperties={},this.modelObserver=new li(this),ft(w)||(this.element="string"==typeof w?document.querySelector(w):w,Oe(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),ft(p)||this.setProperties(p,!0),this.isDestroyed=!1}setProperties(p,w){const k=this.isProtectedOnChange;this.isProtectedOnChange=!!w,E(this,p),!0!==w&&(E(this.changedProperties,p),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=k}static callChildDataBind(p,w){const k=Object.keys(p);for(const N of k)if(w[N]instanceof Array)for(const R of w[N])void 0!==R.dataBind&&R.dataBind();else w[N].dataBind()}clearChanges(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}}dataBind(){if(qn.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){const p=this.isProtectedOnChange,w=this.changedProperties,k=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(w,k),this.isProtectedOnChange=p}}serverDataBind(p){}saveChanges(p,w,k){this.isProtectedOnChange||(this.oldProperties[p]=k,this.changedProperties[p]=w,this.finalUpdate(),this.finalUpdate=function Li(Ge){let p;const w=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(w);let N="ej2"+function lt(Ge){let p="";for(let w=0;w<5;w++)p+=(w?",":"")+Ge[w];return p}(w),R=K=>{K.source===window&&"string"==typeof K.data&&K.data.length<=32&&K.data===N&&(Ge(),p())};return window.addEventListener("message",R,!1),window.postMessage(N,"*"),p=()=>{window.removeEventListener("message",R),Ge=R=N=void 0}}(this.dataBind.bind(this)))}addEventListener(p,w){this.modelObserver.on(p,w)}removeEventListener(p,w){this.modelObserver.off(p,w)}trigger(p,w,k,N){if(!0!==this.isDestroyed){const R=this.isProtectedOnChange;this.isProtectedOnChange=!1;let K=this.modelObserver.notify(p,w,k,N);if(ln.test(p)){const G=Lt(p,this);if(G)if(window.Blazor){const ee=G.call(this,w);ee&&"function"==typeof ee.then?k?ee.then(te=>{k&&(te="string"==typeof te&&this.modelObserver.isJson(te)?JSON.parse(te):te,k.call(this,te))}).catch(te=>{N&&(te="string"==typeof te&&this.modelObserver.isJson(te)?JSON.parse(te):te,N.call(this,te))}):K=ee:k&&k.call(this,w)}else G.call(this,w),k&&k.call(this,w);else k&&k.call(this,w)}return this.isProtectedOnChange=R,K}}addInstance(){const p="e-"+this.getModuleName().toLowerCase();gi([this.element],["e-lib",p]),Oe(this.element.ej2_instances)?ut("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)}destroy(){this.element.ej2_instances=this.element.ej2_instances.filter(p=>p!==this),je([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&je([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0}}function $n(Ge,p){let w,k;const N="string"==typeof Ge?document.getElementById(Ge):Ge;for(k=0;k<N.ej2_instances.length;k++)if(w=N.ej2_instances[k],"string"==typeof p){if(p===w.getModuleName())return w}else if(w instanceof p)return w}function tn(Ge,p,w,k){return(!Ge.properties.hasOwnProperty(p)||!(Ge.properties[p]instanceof k))&&(Ge.properties[p]=$e(k,[Ge,p,w])),Ge.properties[p]}function mr(Ge,p,w,k,N,R){const K=[],G=w?w.length:0;for(let ye=0;ye<G;ye++){let ee=k;if(R&&(ee=k(w[ye],Ge)),N){const te=$e(ee,[Ge,p,{},!0]);te.setProperties(w[ye],!0),K.push(te)}else K.push($e(ee,[Ge,p,w[ye],!1]))}return K}function Cn(Ge,p){return function(){return this.properties.hasOwnProperty(p)||(this.properties[p]=Ge),this.properties[p]}}function wr(Ge,p){return function(w){if(this.properties[p]!==w){let k=this.properties.hasOwnProperty(p)?this.properties[p]:Ge;this.saveChanges(p,w,k),this.properties[p]=w}}}function ro(Ge,p,w){return function(){return tn(this,p,Ge,w)}}function Br(Ge,p,w){return function(k){tn(this,p,Ge,w).setProperties(k)}}function Vr(Ge,p,w){return function(){if(!this.properties.hasOwnProperty(p)){const N=mr(this,p,Ge,w,!1);this.properties[p]=N}const k=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[p].hasOwnProperty("push")&&!k&&["push","pop"].forEach(N=>{const R={value:Hr(N,p,0,this.properties[p]).bind(this),configurable:!0};Object.defineProperty(this.properties[p],N,R)}),this.properties[p].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[p],"isComplexArray",{value:!0}),this.properties[p]}}function Zn(Ge,p,w){return function(k){this.isComplexArraySetter=!0;const N=mr(this,p,Ge,w,!1),R=mr(this,p,k,w,!0);this.isComplexArraySetter=!1,this.saveChanges(p,R,N),this.properties[p]=R}}function Hr(Ge,p,w,k){return function(...N){const R=this.propName?this.getParentKey()+"."+p+"-":p+"-";switch(Ge){case"push":for(let G=0;G<N.length;G++){Array.prototype[Ge].apply(k,[N[G]]);const ye=Bi(R+(k.length-1),N[G],!this.controlParent,Ge);this.serverDataBind(ye,N[G],!1,Ge)}break;case"pop":Array.prototype[Ge].apply(k);let K=Bi(R+k.length,null,!this.controlParent,Ge);this.serverDataBind(K,{ejsAction:"pop"},!1,Ge)}return k}}function Bi(Ge,p,w,k){let N=Ge;return w&&(N={},N[Ge]=p,p&&"object"==typeof p)&&(N[Ge].ejsAction=k),N}function Vn(Ge){return(p,w)=>{const k={set:wr(Ge,w),get:Cn(Ge,w),enumerable:!0,configurable:!0};Object.defineProperty(p,w,k),Er(p,w,"prop",Ge)}}function co(Ge,p){return(w,k)=>{const N={set:Br(Ge,k,p),get:ro(Ge,k,p),enumerable:!0,configurable:!0};Object.defineProperty(w,k,N),Er(w,k,"complexProp",Ge,p)}}function Io(Ge,p){return(w,k)=>{const N={set:Zn(Ge,k,p),get:Vr(Ge,k,p),enumerable:!0,configurable:!0};Object.defineProperty(w,k,N),Er(w,k,"colProp",Ge,p)}}function sr(){return(Ge,p)=>{const w={set:function(k){const N=this.properties[p];if(N!==k){const R=Vs(this,p);!1===ft(N)&&R.context.removeEventListener(R.prefix,N),R.context.addEventListener(R.prefix,k),this.properties[p]=k}},get:Cn(void 0,p),enumerable:!0,configurable:!0};Object.defineProperty(Ge,p,w),Er(Ge,p,"event")}}function zn(Ge){}function Er(Ge,p,w,k,N){ft(Ge.propList)&&(Ge.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),Ge.propList[w+"s"].push({propertyName:p,defaultValue:k,type:N}),Ge.propList[w+"Names"].push(p)}function Vs(Ge,p){if(!1===Ge.hasOwnProperty("parentObj"))return{context:Ge,prefix:p};{const w=Lt("propName",Ge);return w&&(p=w+"-"+p),Vs(Lt("parentObj",Ge),p)}}var bo,Ro=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};let yr=bo=class extends qn{constructor(p){super(p,void 0),this.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"}}animate(p,w){const k=this.getModel(w=w||{});if("string"==typeof p){const N=Array.prototype.slice.call(bn(p,document));for(const R of N)k.element=R,bo.delayAnimation(k)}else k.element=p,bo.delayAnimation(k)}static stop(p,w){p.style.animation="",p.removeAttribute("e-animate");const k=p.getAttribute("e-animation-id");if(k){const N=parseInt(k,10);cancelAnimationFrame(N),p.removeAttribute("e-animation-id")}w&&w.end&&w.end.call(this,w)}static delayAnimation(p){p.delay?setTimeout(()=>{bo.applyAnimation(p)},p.delay):bo.applyAnimation(p)}static applyAnimation(p){p.timeStamp=0;let w=0,k=0,N=0;const R=p.duration;p.element.setAttribute("e-animate","true");const K=G=>{try{if(G){N=0===N?G:N,p.timeStamp=G+p.timeStamp-N,N=G,!w&&p.begin&&p.begin.call(this,p),w+=1;const ye=p.timeStamp/w;p.timeStamp<R&&p.timeStamp+ye<R&&p.element.getAttribute("e-animate")?(p.element.style.animation=p.name+" "+p.duration+"ms "+p.timingFunction,p.progress&&p.progress.call(this,p),requestAnimationFrame(K)):(cancelAnimationFrame(k),p.element.removeAttribute("e-animation-id"),p.element.removeAttribute("e-animate"),p.element.style.animation="",p.end&&p.end.call(this,p))}else k=requestAnimationFrame(K),p.element.setAttribute("e-animation-id",k.toString())}catch(ye){cancelAnimationFrame(k),p.element.removeAttribute("e-animation-id"),p.fail&&p.fail.call(this,ye)}};K()}getModel(p){return{name:p.name||this.name,delay:p.delay||this.delay,duration:void 0!==p.duration?p.duration:this.duration,begin:p.begin||this.begin,end:p.end||this.end,fail:p.fail||this.fail,progress:p.progress||this.progress,timingFunction:this.easing[p.timingFunction]?this.easing[p.timingFunction]:p.timingFunction||this.easing[this.timingFunction]}}onPropertyChanged(p,w){}getModuleName(){return"animation"}destroy(){}};function Fo(Ge,p,w){const k=function oo(Ge){return{selector:Ge&&Ge.selector?Ge.selector:null,ignore:Ge&&Ge.ignore?Ge.ignore:null,rippleFlag:Ge&&Ge.rippleFlag,isCenterRipple:Ge&&Ge.isCenterRipple,duration:Ge&&Ge.duration?Ge.duration:350}}(p);return!1===k.rippleFlag||void 0===k.rippleFlag&&!$s?()=>{}:(Ge.setAttribute("data-ripple","true"),Ls.add(Ge,"mousedown",ol,{parent:Ge,rippleOptions:k}),Ls.add(Ge,"mouseup",Yr,{parent:Ge,rippleOptions:k,done:w}),Ls.add(Ge,"mouseleave",Bs,{parent:Ge,rippleOptions:k}),Xi.isPointer&&Ls.add(Ge,"transitionend",Bs,{parent:Ge,rippleOptions:k}),()=>{Ge.removeAttribute("data-ripple"),Ls.remove(Ge,"mousedown",ol),Ls.remove(Ge,"mouseup",Yr),Ls.remove(Ge,"mouseleave",Bs),Ls.remove(Ge,"transitionend",Bs)})}function ol(Ge){const p=Ge.target,w=this.rippleOptions.selector,k=w?ms(p,w):p;if(!k||this.rippleOptions&&ms(p,this.rippleOptions.ignore))return;const N=k.getBoundingClientRect(),R=Ge.pageX-document.body.scrollLeft,K=Ge.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),G=Math.max(Math.abs(R-N.left),Math.abs(R-N.right)),ye=Math.max(Math.abs(K-N.top),Math.abs(K-N.bottom)),ee=Math.sqrt(G*G+ye*ye);let te=2*ee+"px",ie=R-N.left-ee,xe=K-N.top-ee;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(ie=0,xe=0,te="100%"),k.classList.add("e-ripple");const ii=Rs("div",{className:"e-ripple-element",styles:"width: "+te+";height: "+te+";left: "+ie+"px;top: "+xe+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});k.appendChild(ii),window.getComputedStyle(ii).getPropertyValue("opacity"),ii.style.transform="scale(1)",k!==this.parent&&Ls.add(k,"mouseleave",Bs,{parent:this.parent,rippleOptions:this.rippleOptions})}function Yr(Ge){uo(Ge,this)}function Bs(Ge){uo(Ge,this)}function uo(Ge,p){const w=p.rippleOptions.duration,k=Ge.target,N=p.rippleOptions.selector,R=N?ms(k,N):k;if(!R||R&&-1===R.className.indexOf("e-ripple"))return;const K=bn(".e-ripple-element",R),G=K[K.length-1];G&&(G.style.opacity="0.5"),p.parent!==R&&Ls.remove(R,"mouseleave",Bs),setTimeout(()=>{G&&G.parentNode&&G.parentNode.removeChild(G),R.getElementsByClassName("e-ripple-element").length||R.classList.remove("e-ripple"),p.done&&p.done(Ge)},w)}Ro([Vn("FadeIn")],yr.prototype,"name",void 0),Ro([Vn(400)],yr.prototype,"duration",void 0),Ro([Vn("ease")],yr.prototype,"timingFunction",void 0),Ro([Vn(0)],yr.prototype,"delay",void 0),Ro([sr()],yr.prototype,"progress",void 0),Ro([sr()],yr.prototype,"begin",void 0),Ro([sr()],yr.prototype,"end",void 0),Ro([sr()],yr.prototype,"fail",void 0),yr=bo=Ro([zn],yr);let $s=!1;class vr{constructor(p){this.loadedModules=[],this.parent=p}inject(p,w){const k=p.length;if(0!==k){this.loadedModules.length&&this.clearUnusedModule(p);for(let N=0;N<k;N++){const R=p[N];for(const K of w){const G=R.member;if(K.prototype.getModuleName()===R.member&&!this.isModuleLoaded(G)){const ye=$e(K,R.args),ee=this.getMemberName(G);ut(ee,R.isProperty?K:ye,this.parent);const te=R;te.member=ee,this.loadedModules.push(te)}}}}else this.clean()}clean(){for(const p of this.loadedModules)p.isProperty||Lt(p.member,this.parent).destroy();this.loadedModules=[]}clearUnusedModule(p){const w=p.map(N=>this.getMemberName(N.member)),k=this.loadedModules.filter(N=>-1===w.indexOf(N.member));for(const N of k)N.isProperty||Lt(N.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(N),1),Si(this.parent,N.member)}getMemberName(p){return p[0].toLowerCase()+p.substring(1)+"Module"}isModuleLoaded(p){for(const w of this.loadedModules)if(w.member===this.getMemberName(p))return!0;return!1}}class Qr{constructor(p,w,k,N){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=()=>{},this.callChildDataBind=Lt("callChildDataBind",qn),this.parentObj=p,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=w,this.isParentArray=N,this.setProperties(k,!0)}updateChange(p,w){!0===p?this.parentObj.childChangedProperties[w]=p:delete this.parentObj.childChangedProperties[w],this.parentObj.updateChange&&this.parentObj.updateChange(p,this.parentObj.propName)}updateTimeOut(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{const p=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=()=>{clearTimeout(p)}}}clearChanges(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}}setProperties(p,w){!0===w?(E(this,p),this.updateChange(!1,this.propName),this.clearChanges()):E(this,p)}dataBind(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){const p=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(ut(this.propName+"."+p,this.changedProperties,this.parentObj.changedProperties),ut(this.propName+"."+p,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()}saveChanges(p,w,k,N){this.controlParent.isProtectedOnChange||(N||this.serverDataBind(p,w,!0),this.oldProperties[p]=k,this.changedProperties[p]=w,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())}serverDataBind(p,w,k,N){0}getParentKey(p){let w="",k=this.propName;if(this.isParentArray){w=this.parentObj[this.propName].indexOf(this);let N=this.parentObj[this.propName].length;N=p?N:N>0?N-1:0,w=-1!==w?"-"+w:"-"+N,k+=w}return this.controlParent!==this.parentObj&&(k=this.parentObj.getParentKey()+"."+this.propName+w),k}}var zs=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};let ir,ur=0,qs=0,Pn=class extends qn{constructor(p,w){super(p,w),this.randomId=function _e(){if(typeof window>"u")return;let Ge=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(Ge)}(),this.isStringTemplate=!1,this.needsID=!1,this.isReactHybrid=!1,Oe(this.enableRtl)&&this.setProperties({enableRtl:false},!0),Oe(this.locale)&&this.setProperties({locale:Pt},!0),this.moduleLoader=new vr(this),this.localObserver=new li(this),Oi.on("notifyExternalChange",this.detectFunction,this,this.randomId),ft(w)||this.appendTo()}requiredModules(){return[]}destroy(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(je([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),super.destroy(),this.moduleLoader.clean(),Oi.off("notifyExternalChange",this.detectFunction,this.randomId)))}refresh(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new li(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1}accessMount(){this.mount&&!this.isReactHybrid&&this.mount()}getRootElement(){return this.isReactHybrid?this.actualElement:this.element}getLocalData(){const p=this.getModuleName()+this.element.id;return window.localStorage.getItem(p)}appendTo(p){if(Oe(p)||"string"!=typeof p?Oe(p)||(this.element=p):this.element=Ns(p,document),!Oe(this.element)){const w="e-"+this.getModuleName().toLowerCase();gi([this.element],["e-control",w]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));const k=Lt("ej2_instances",this.element);(!k||-1===k.indexOf(this))&&super.addInstance(),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}}renderComplete(p){this.isRendered=!0}dataBind(){this.injectModules(),super.dataBind()}on(p,w,k){if("string"==typeof p)this.localObserver.on(p,w,k);else for(const N of p)this.localObserver.on(N.event,N.handler,N.context)}off(p,w){if("string"==typeof p)this.localObserver.off(p,w);else for(const k of p)this.localObserver.off(k.event,k.handler)}notify(p,w){!0!==this.isDestroyed&&this.localObserver.notify(p,w)}getInjectedModules(){return this.injectedModules}static Inject(...p){this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(let w=0;w<p.length;w++)-1===this.prototype.injectedModules.indexOf(p[w])&&this.prototype.injectedModules.push(p[w])}createElement(p,w,k){return Rs(p,w)}triggerStateChange(p,w){this.isReactHybrid&&(this.setState(),this.currentContext={calls:p,args:w})}injectModules(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)}detectFunction(p){const w=Object.keys(p);w.length&&(this[w[0]]=p[w[0]])}mergePersistData(){let p;p=window.localStorage.getItem(this.getModuleName()+this.element.id),Oe(p)||""===p||this.setProperties(JSON.parse(p),!0)}setPersistData(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())}appendReactElement(p,w){}renderReactTemplates(){}clearTemplate(p,w){}getUniqueID(p){return this.isHistoryChanged()&&(ur=0),ir=this.pageID(location.href),qs=history.length,p+"_"+ir+"_"+ur++}pageID(p){let w=0;if(0===p.length)return w;for(let k=0;k<p.length;k++)w=(w<<5)-w+p.charCodeAt(k),w&=w;return Math.abs(w)}isHistoryChanged(){return ir!==this.pageID(location.href)||qs!==history.length}addOnPersist(p){const w={};for(const k of p){let N;N=Lt(k,this),ft(N)||ut(k,this.getActualProperties(N),w)}return JSON.stringify(w,(k,N)=>this.getActualProperties(N))}getActualProperties(p){return p instanceof Qr?Lt("properties",p):p}ignoreOnPersist(p){return JSON.stringify(this.iterateJsonProperties(this.properties,p))}iterateJsonProperties(p,w){const k={};for(const N of Object.keys(p))if(-1===w.indexOf(N)){const R=p[N];if("object"!=typeof R||R instanceof Array)k[N]=R;else{const K=w.filter(G=>new RegExp(N+".").test(G)).map(G=>G.replace(N+".",""));k[N]=this.iterateJsonProperties(this.getActualProperties(R),K)}}return k}};zs([Vn(!1)],Pn.prototype,"enablePersistence",void 0),zs([Vn()],Pn.prototype,"enableRtl",void 0),zs([Vn()],Pn.prototype,"locale",void 0),Pn=zs([zn],Pn),typeof window<"u"&&window.addEventListener("popstate",()=>{ur=0});var xi,ks=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const v={left:0,top:0,bottom:0,right:0},M={isDragged:!1};class $ extends Qr{}ks([Vn(0)],$.prototype,"left",void 0),ks([Vn(0)],$.prototype,"top",void 0);let fe=xi=class extends qn{constructor(p,w){super(w,p),this.dragLimit=xi.getDefaultPosition(),this.borderWidth=xi.getDefaultPosition(),this.padding=xi.getDefaultPosition(),this.diffX=0,this.prevLeft=0,this.prevTop=0,this.dragProcessStarted=!1,this.eleTop=0,this.tapHoldTimer=0,this.externalInitialize=!1,this.diffY=0,this.parentScrollX=0,this.parentScrollY=0,this.droppables={},this.bind()}bind(){this.toggleEvents(),Xi.isIE&&gi([this.element],"e-block-touch"),this.droppables[this.scope]={}}static getDefaultPosition(){return at({},v)}toggleEvents(p){let w;ft(this.handle)||(w=Ns(this.handle,this.element));let k=this.enableTapHold&&Xi.isDevice&&Xi.isTouch?this.mobileInitialize:this.initialize;p?Ls.remove(w||this.element,Xi.touchStartEvent,k):Ls.add(w||this.element,Xi.touchStartEvent,k,this)}mobileInitialize(p){let w=p.currentTarget;this.tapHoldTimer=setTimeout(()=>{this.externalInitialize=!0,this.removeTapholdTimer(),this.initialize(p,w)},this.tapHoldThreshold),Ls.add(document,Xi.touchMoveEvent,this.removeTapholdTimer,this),Ls.add(document,Xi.touchEndEvent,this.removeTapholdTimer,this)}removeTapholdTimer(){clearTimeout(this.tapHoldTimer),Ls.remove(document,Xi.touchMoveEvent,this.removeTapholdTimer),Ls.remove(document,Xi.touchEndEvent,this.removeTapholdTimer)}getScrollableParent(p,w){return Oe(p)?null:p[{vertical:"scrollHeight",horizontal:"scrollWidth"}[w]]>p[{vertical:"clientHeight",horizontal:"clientWidth"}[w]]&&("vertical"===w?p.scrollTop>0:p.scrollLeft>0)?("vertical"===w?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?p.scrollTop:p.scrollTop-this.parentScrollY),this.tempScrollHeight=p.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?p.scrollLeft:p.scrollLeft-this.parentScrollX),this.tempScrollWidth=p.scrollWidth),Oe(p)?p:this.getScrollableParent(p.parentNode,w)):this.getScrollableParent(p.parentNode,w)}getScrollableValues(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")}initialize(p,w){if(this.currentStateTarget=p.target,this.isDragStarted())return;if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=p.currentTarget||w,this.dragProcessStarted=!1,this.abort){let N=this.abort;"string"==typeof N&&(N=[N]);for(let R=0;R<N.length;R++)if(!Oe(ms(p.target,N[R])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!ft(p.changedTouches)&&"touchstart"!==p.type&&p.preventDefault(),this.element.setAttribute("aria-grabbed","true");let k=this.getCoordinates(p);if(this.initialPosition={x:k.pageX,y:k.pageY},!this.clone){let N=this.element.getBoundingClientRect();this.getScrollableValues(),p.clientX===p.pageX&&(this.parentScrollX=0),p.clientY===p.pageY&&(this.parentScrollY=0),this.relativeXPosition=k.pageX-(N.left+this.parentScrollX),this.relativeYPosition=k.pageY-(N.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(p):(Ls.add(document,Xi.touchMoveEvent,this.intDragStart,this),Ls.add(document,Xi.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==p.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,Ls.trigger(document.documentElement,Xi.touchStartEvent,p)}intDragStart(p){this.removeTapholdTimer();let w=!ft(p.changedTouches);if(w&&1!==p.changedTouches.length)return;w&&p.preventDefault();let N,k=this.getCoordinates(p),R=getComputedStyle(this.element);this.margin={left:parseInt(R.marginLeft,10),top:parseInt(R.marginTop,10),right:parseInt(R.marginRight,10),bottom:parseInt(R.marginBottom,10)};let K=this.element;if(this.clone&&this.dragTarget){let te=ms(p.target,this.dragTarget);Oe(te)||(K=te)}this.isReplaceDragEle&&(K=this.currentStateCheck(p.target,K)),this.offset=this.calculateParentPosition(K),this.position=this.getMousePosition(p,this.isDragScroll);let G=this.initialPosition.x-k.pageX,ye=this.initialPosition.y-k.pageY;if(Math.sqrt(G*G+ye*ye)>=this.distance||this.externalInitialize){let te=this.getHelperElement(p);if(!te||Oe(te))return;let ie=this.helperElement=te;if(this.parentClientRect=this.calculateParentPosition(ie.offsetParent),this.dragStart){let si={event:p,element:K,target:this.getProperTargetElement(p),bindEvents:null,dragElement:ie};this.trigger("dragStart",si)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),N={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();let xe=getComputedStyle(K),Ke=parseFloat(xe.marginTop);this.clone&&0!==Ke&&(N.top+=Ke),this.eleTop=isNaN(parseFloat(xe.top))?0:parseFloat(xe.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(N.top-=this.parentScrollY,N.left-=this.parentScrollX);let ct=this.getProcessedPositionValue({top:N.top-this.diffY+"px",left:N.left-this.diffX+"px"});this.dragElePosition={top:N.top,left:N.left},Yn(ie,this.getDragPosition({position:"absolute",left:ct.left,top:ct.top})),Ls.remove(document,Xi.touchMoveEvent,this.intDragStart),Ls.remove(document,Xi.touchEndEvent,this.intDestroy),this.bindDragEvents(ie)}}bindDragEvents(p){tt(p)?(Ls.add(document,Xi.touchMoveEvent,this.intDrag,this),Ls.add(document,Xi.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,p)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}elementInViewport(p){for(this.top=p.offsetTop,this.left=p.offsetLeft,this.width=p.offsetWidth,this.height=p.offsetHeight;p.offsetParent;)this.top+=(p=p.offsetParent).offsetTop,this.left+=p.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth}getProcessedPositionValue(p){return this.queryPositionInfo?this.queryPositionInfo(p):p}calculateParentPosition(p){if(Oe(p))return{left:0,top:0};let w=p.getBoundingClientRect(),k=getComputedStyle(p);return{left:w.left+window.pageXOffset-parseInt(k.marginLeft,10),top:w.top+window.pageYOffset-parseInt(k.marginTop,10)}}intDrag(p){if(!ft(p.changedTouches)&&1!==p.changedTouches.length)return;let w,k;this.position=this.getMousePosition(p,this.isDragScroll);let N=this.getDocumentWidthHeight("Height");N<this.position.top&&(this.position.top=N);let R=this.getDocumentWidthHeight("Width");if(R<this.position.left&&(this.position.left=R),this.drag){let an=this.getProperTargetElement(p);this.trigger("drag",{event:p,element:this.element,target:an})}let K=this.checkTargetElement(p);if(K.target&&K.instance){let an=!0;this.hoverObject&&(this.hoverObject.instance!==K.instance?this.triggerOutFunction(p,K):an=!1),an&&(K.instance.dragData[this.scope]=this.droppables[this.scope],K.instance.intOver(p,K.target),this.hoverObject=K)}else this.hoverObject&&this.triggerOutFunction(p,K);let G=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);let ye=this.parentClientRect.left,ee=this.parentClientRect.top,te=this.getCoordinates(p),ie=te.pageX,xe=te.pageY,Ke=this.position.left-this.diffX,ct=this.position.top-this.diffY,ii=getComputedStyle(G);if(this.dragArea){if(this.pageX!==ie||this.skipDistanceCheck){let an=G.offsetWidth+(parseFloat(ii.marginLeft)+parseFloat(ii.marginRight));w=this.dragLimit.left>Ke&&Ke>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<Ke+an&&Ke>0?Ke-(Ke-this.dragLimit.right)+window.pageXOffset-an:Ke<0?this.dragLimit.left:Ke}if(this.pageY!==xe||this.skipDistanceCheck){let an=G.offsetHeight+(parseFloat(ii.marginTop)+parseFloat(ii.marginBottom));k=this.dragLimit.top>ct&&ct>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<ct+an&&ct>0?ct-(ct-this.dragLimit.bottom)+window.pageYOffset-an:ct<0?this.dragLimit.top:ct}}else w=Ke,k=ct;let qi,Mi,si=ee+this.borderWidth.top,Ri=ye+this.borderWidth.left;this.dragProcessStarted&&(Oe(k)&&(k=this.prevTop),Oe(w)&&(w=this.prevLeft)),this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,qi=k-si<0?this.dragLimit.top:k-si,Mi=w-Ri<0?this.dragElePosition.left:w-Ri):(qi=k-si,Mi=w-Ri);let es=parseFloat(getComputedStyle(this.element).marginTop);if(es>0&&(this.clone&&(qi+=es,ct<0&&(es+ct>=0?qi=es+ct:qi-=es),qi=this.dragLimit.bottom<qi?this.dragLimit.bottom:qi),k-si<0))if(ct+es+(G.offsetHeight-si)>=0){let an=this.dragLimit.top+ct-si;an+es+si<0?qi-=es+si:qi=an}else qi-=es+si;this.enableScrollHandler&&!this.clone&&(qi-=this.parentScrollY,Mi-=this.parentScrollX);let Gs=this.getProcessedPositionValue({top:qi+"px",left:Mi+"px"});Yn(G,this.getDragPosition(Gs)),!this.elementInViewport(G)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=w,this.prevTop=k,this.position.left=w,this.position.top=k,this.pageX=ie,this.pageY=xe}triggerOutFunction(p,w){this.hoverObject.instance.intOut(p,w.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null}getDragPosition(p){let w=at({},p);return this.axis&&("x"===this.axis?delete w.top:"y"===this.axis&&delete w.left),w}getDocumentWidthHeight(p){let w=document.body,k=document.documentElement;return Math.max(w["scroll"+p],k["scroll"+p],w["offset"+p],k["offset"+p],k["client"+p])}intDragStop(p){if(this.dragProcessStarted=!1,!ft(p.changedTouches)&&1!==p.changedTouches.length)return;if(-1!==["touchend","pointerup","mouseup"].indexOf(p.type)){if(this.dragStop){let N=this.getProperTargetElement(p);this.trigger("dragStop",{event:p,element:this.element,target:N,helper:this.helperElement})}this.intDestroy(p)}else this.element.setAttribute("aria-grabbed","false");let k=this.checkTargetElement(p);k.target&&k.instance&&(k.instance.dragStopCalled=!0,k.instance.dragData[this.scope]=this.droppables[this.scope],k.instance.intDrop(p,k.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}intDestroy(p){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),Ls.remove(document,Xi.touchMoveEvent,this.intDragStart),Ls.remove(document,Xi.touchEndEvent,this.intDragStop),Ls.remove(document,Xi.touchEndEvent,this.intDestroy),Ls.remove(document,Xi.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)}onPropertyChanged(p,w){}getModuleName(){return"draggable"}isDragStarted(p){return p&&(M.isDragged=!M.isDragged),M.isDragged}setDragArea(){let p,w,R,k=0,N=0;if(R="string"==typeof this.dragArea?Ns(this.dragArea):this.dragArea,R){let G=R.getBoundingClientRect();p=R.scrollWidth?R.scrollWidth:G.right-G.left,w=R.scrollHeight?R.scrollHeight:G.bottom-G.top;let ye=["Top","Left","Bottom","Right"],ee=getComputedStyle(R);for(let te=0;te<ye.length;te++){let ie=ye[te],xe=ee["border"+ie+"Width"],Ke=ee["padding"+ie],ct=ie.toLowerCase();this.borderWidth[ct]=isNaN(parseFloat(xe))?0:parseFloat(xe),this.padding[ct]=isNaN(parseFloat(Ke))?0:parseFloat(Ke)}k=G.top,N=G.left,this.dragLimit.left=N+this.borderWidth.left+this.padding.left,this.dragLimit.top=R.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=N+p-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=k+w-(this.borderWidth.bottom+this.padding.bottom)}}getProperTargetElement(p){let k,w=this.getCoordinates(p),N=this.helperElement.style.pointerEvents||"";return Rt(p.target,this.helperElement)||-1!==p.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",k=document.elementFromPoint(w.clientX,w.clientY),this.helperElement.style.pointerEvents=N):k=p.target,k}currentStateCheck(p,w){let k;return k=Oe(this.currentStateTarget)||this.currentStateTarget===p?Oe(w)?p:w:this.currentStateTarget,k}getMousePosition(p,w){let R,K,k=void 0!==p.srcElement?p.srcElement:p.target,N=this.getCoordinates(p),G=Oe(k.offsetParent);return w?(R=this.clone?N.pageX:N.pageX+(G?0:k.offsetParent.scrollLeft)-this.relativeXPosition,K=this.clone?N.pageY:N.pageY+(G?0:k.offsetParent.scrollTop)-this.relativeYPosition):(R=this.clone?N.pageX:N.pageX+window.pageXOffset-this.relativeXPosition,K=this.clone?N.pageY:N.pageY+window.pageYOffset-this.relativeYPosition),{left:R-(this.margin.left+this.cursorAt.left),top:K-(this.margin.top+this.cursorAt.top)}}getCoordinates(p){return p.type.indexOf("touch")>-1?p.changedTouches[0]:p}getHelperElement(p){let w;return this.clone?this.helper?w=this.helper({sender:p,element:this.target}):(w=Rs("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(w)):w=this.element,w}setGlobalDroppables(p,w,k){this.droppables[this.scope]=p?null:{draggable:w,helper:k,draggedElement:this.element}}checkTargetElement(p){let w=this.getProperTargetElement(p),k=this.getDropInstance(w);if(!k&&w&&!Oe(w.parentNode)){let N=ms(w.parentNode,".e-droppable")||w.parentElement;N&&(k=this.getDropInstance(N))}return{target:w,instance:k}}getDropInstance(p){let k,N=p&&p.ej2_instances;if(N)for(let R of N)if("droppable"===R.getModuleName()){k=R;break}return k}destroy(){this.toggleEvents(!0),super.destroy()}};ks([co({},$)],fe.prototype,"cursorAt",void 0),ks([Vn(!0)],fe.prototype,"clone",void 0),ks([Vn()],fe.prototype,"dragArea",void 0),ks([Vn()],fe.prototype,"isDragScroll",void 0),ks([Vn()],fe.prototype,"isReplaceDragEle",void 0),ks([Vn(!0)],fe.prototype,"isPreventSelect",void 0),ks([sr()],fe.prototype,"drag",void 0),ks([sr()],fe.prototype,"dragStart",void 0),ks([sr()],fe.prototype,"dragStop",void 0),ks([Vn(1)],fe.prototype,"distance",void 0),ks([Vn()],fe.prototype,"handle",void 0),ks([Vn()],fe.prototype,"abort",void 0),ks([Vn()],fe.prototype,"helper",void 0),ks([Vn("default")],fe.prototype,"scope",void 0),ks([Vn("")],fe.prototype,"dragTarget",void 0),ks([Vn()],fe.prototype,"axis",void 0),ks([Vn()],fe.prototype,"queryPositionInfo",void 0),ks([Vn(!1)],fe.prototype,"enableTailMode",void 0),ks([Vn(!1)],fe.prototype,"skipDistanceCheck",void 0),ks([Vn(!0)],fe.prototype,"preventDefault",void 0),ks([Vn(!1)],fe.prototype,"enableAutoScroll",void 0),ks([Vn(!1)],fe.prototype,"enableTapHold",void 0),ks([Vn(750)],fe.prototype,"tapHoldThreshold",void 0),ks([Vn(!1)],fe.prototype,"enableScrollHandler",void 0),fe=xi=ks([zn],fe);var Ce=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};let pt=class extends qn{constructor(p,w){super(w,p),this.mouseOver=!1,this.dragData={},this.dragStopCalled=!1,this.bind()}bind(){this.wireEvents()}wireEvents(){Ls.add(this.element,Xi.touchEndEvent,this.intDrop,this)}onPropertyChanged(p,w){}getModuleName(){return"droppable"}intOver(p,w){this.mouseOver||(this.trigger("over",{event:p,target:w,dragData:this.dragData[this.scope]}),this.mouseOver=!0)}intOut(p,w){this.mouseOver&&(this.trigger("out",{evt:p,target:w}),this.mouseOver=!1)}intDrop(p,w){if(!this.dragStopCalled)return;this.dragStopCalled=!1;let k=!0;const N=this.dragData[this.scope],R=!!N&&N.helper&&tt(N.helper);let K;R&&(K=this.isDropArea(p,N.helper,w),this.accept&&(k=Rr(N.helper,this.accept))),R&&this.drop&&K.canDrop&&k&&this.trigger("drop",{event:p,target:K.target,droppedElement:N.helper,dragData:N}),this.mouseOver=!1}isDropArea(p,w,k){const N={canDrop:!0,target:k||p.target},R="touchend"===p.type;if(R||N.target===w){w.style.display="none";const K=R?p.changedTouches[0]:p,G=document.elementFromPoint(K.clientX,K.clientY);N.canDrop=!1,N.canDrop=Rt(G,this.element),N.canDrop&&(N.target=G),w.style.display=""}return N}destroy(){Ls.remove(this.element,Xi.touchEndEvent,this.intDrop),super.destroy()}};Ce([Vn()],pt.prototype,"accept",void 0),Ce([Vn("default")],pt.prototype,"scope",void 0),Ce([sr()],pt.prototype,"drop",void 0),Ce([sr()],pt.prototype,"over",void 0),Ce([sr()],pt.prototype,"out",void 0),pt=Ce([zn],pt);var wi,Mt=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const Gi={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222};let Vi=wi=class extends qn{constructor(p,w){super(w,p),this.keyPressHandler=k=>{const N=k.altKey,R=k.ctrlKey,K=k.shiftKey,G=k.which,ye=Object.keys(this.keyConfigs);for(const ee of ye){const te=this.keyConfigs[ee].split(",");for(const ie of te){const xe=wi.getKeyConfigData(ie.trim());N===xe.altKey&&R===xe.ctrlKey&&K===xe.shiftKey&&G===xe.keyCode&&(k.action=ee,this.keyAction&&this.keyAction(k))}}},this.bind()}destroy(){this.unwireEvents(),super.destroy()}onPropertyChanged(p,w){}bind(){this.wireEvents()}getModuleName(){return"keyboard"}wireEvents(){this.element.addEventListener(this.eventName,this.keyPressHandler)}unwireEvents(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}static getKeyConfigData(p){if(p in this.configCache)return this.configCache[p];const w=p.toLowerCase().split("+"),k={altKey:-1!==w.indexOf("alt"),ctrlKey:-1!==w.indexOf("ctrl"),shiftKey:-1!==w.indexOf("shift"),keyCode:null};return k.keyCode=w[w.length-1].length>1&&Number(w[w.length-1])?Number(w[w.length-1]):wi.getKeyCode(w[w.length-1]),wi.configCache[p]=k,k}static getKeyCode(p){return Gi[p]||p.toUpperCase().charCodeAt(0)}};Vi.configCache={},Mt([Vn({})],Vi.prototype,"keyConfigs",void 0),Mt([Vn("keyup")],Vi.prototype,"eventName",void 0),Mt([sr()],Vi.prototype,"keyAction",void 0),Vi=wi=Mt([zn],Vi);let sn=(()=>{class Ge{constructor(w,k,N){this.controlName=w,this.localeStrings=k,this.setLocale(N||Pt)}setLocale(w){const k=this.intGetControlConstant(Ge.locale,w);this.currentLocale=k||this.localeStrings}static load(w){this.locale=at(this.locale,w,{},!0)}getConstant(w){return Oe(this.currentLocale[w])?this.localeStrings[w]||"":this.currentLocale[w]}intGetControlConstant(w,k){return w[k]?w[k][this.controlName]:null}}return Ge.locale={},Ge})();var ts=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};class wn extends Qr{}ts([Vn(50)],wn.prototype,"swipeThresholdDistance",void 0);const Sn=/(Up|Down)/;let Ws=class extends qn{constructor(p,w){super(w,p),this.touchAction=!0,this.tapCount=0,this.startEvent=k=>{if(!0===this.touchAction){const N=this.updateChangeTouches(k);void 0!==k.changedTouches&&(this.touchAction=!1),this.isTouchMoved=!1,this.movedDirection="",this.startPoint=this.lastMovedPoint={clientX:N.clientX,clientY:N.clientY},this.startEventData=N,this.hScrollLocked=this.vScrollLocked=!1,this.tStampStart=Date.now(),this.timeOutTapHold=setTimeout(()=>{this.tapHoldEvent(k)},this.tapHoldThreshold),Ls.add(this.element,Xi.touchMoveEvent,this.moveEvent,this),Ls.add(this.element,Xi.touchEndEvent,this.endEvent,this),Ls.add(this.element,Xi.touchCancelEvent,this.cancelEvent,this)}},this.moveEvent=k=>{const N=this.updateChangeTouches(k);this.movedPoint=N,this.isTouchMoved=!(N.clientX===this.startPoint.clientX&&N.clientY===this.startPoint.clientY);let R={};this.isTouchMoved&&(clearTimeout(this.timeOutTapHold),this.calcScrollPoints(k),R=at(R,{},{startEvents:this.startEventData,originalEvent:k,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,scrollDirection:this.scrollDirection,velocity:this.getVelocity(N)}),this.trigger("scroll",R),this.lastMovedPoint={clientX:N.clientX,clientY:N.clientY})},this.cancelEvent=k=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap),this.tapCount=0,this.swipeFn(k),Ls.remove(this.element,Xi.touchCancelEvent,this.cancelEvent)},this.endEvent=k=>{this.swipeFn(k),this.isTouchMoved||"function"==typeof this.tap&&(this.trigger("tap",{originalEvent:k,tapCount:++this.tapCount}),this.timeOutTap=setTimeout(()=>{this.tapCount=0},this.tapThreshold)),this.modeclear()},this.swipeFn=k=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap);const N=this.updateChangeTouches(k);let R=N.clientX-this.startPoint.clientX,K=N.clientY-this.startPoint.clientY;R=Math.floor(R<0?-1*R:R),K=Math.floor(K<0?-1*K:R),this.isTouchMoved=R>1||K>1,this.endPoint=N,this.calcPoints(k);const G={originalEvent:k,startEvents:this.startEventData,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,swipeDirection:this.movedDirection,velocity:this.getVelocity(N)};if(this.isTouchMoved){let ye;const ee=this.swipeSettings.swipeThresholdDistance;ye=at(ye,this.defaultArgs,G);let te=!1;const ie=this.element,xe=this.isScrollable(ie),Ke=Sn.test(this.movedDirection);(ee<this.distanceX&&!Ke||ee<this.distanceY&&Ke)&&(te=!xe||this.checkSwipe(ie,Ke)),te&&this.trigger("swipe",ye)}this.modeclear()},this.modeclear=()=>{this.modeClear=setTimeout(()=>{this.touchAction=!0},"function"!=typeof this.tap?0:20),this.lastTapTime=(new Date).getTime(),Ls.remove(this.element,Xi.touchMoveEvent,this.moveEvent),Ls.remove(this.element,Xi.touchEndEvent,this.endEvent),Ls.remove(this.element,Xi.touchCancelEvent,this.cancelEvent)},this.bind()}onPropertyChanged(p,w){}bind(){this.wireEvents(),Xi.isIE&&this.element.classList.add("e-block-touch")}destroy(){this.unwireEvents(),super.destroy()}wireEvents(){Ls.add(this.element,Xi.touchStartEvent,this.startEvent,this)}unwireEvents(){Ls.remove(this.element,Xi.touchStartEvent,this.startEvent)}getModuleName(){return"touch"}isScrollable(p){const w=getComputedStyle(p);return!!/(auto|scroll)/.test(w.overflow+w.overflowX+w.overflowY)}tapHoldEvent(p){let w;this.tapCount=0,this.touchAction=!0,Ls.remove(this.element,Xi.touchMoveEvent,this.moveEvent),Ls.remove(this.element,Xi.touchEndEvent,this.endEvent),w={originalEvent:p},this.trigger("tapHold",w),Ls.remove(this.element,Xi.touchCancelEvent,this.cancelEvent)}calcPoints(p){const w=this.updateChangeTouches(p);this.defaultArgs={originalEvent:p},this.distanceX=Math.abs(Math.abs(w.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(w.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?w.clientX>this.startPoint.clientX?"Right":"Left":w.clientY<this.startPoint.clientY?"Up":"Down"}calcScrollPoints(p){const w=this.updateChangeTouches(p);this.defaultArgs={originalEvent:p},this.distanceX=Math.abs(Math.abs(w.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(w.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=w.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=w.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)}getVelocity(p){const w=p.clientX,k=p.clientY,N=Date.now(),R=w-this.startPoint.clientX,K=k-this.startPoint.clientX,G=N-this.tStampStart;return Math.sqrt(R*R+K*K)/G}checkSwipe(p,w){const k=["scroll","offset"],N=w?["Height","Top"]:["Width","Left"];return p[k[0]+N[0]]<=p[k[1]+N[0]]||0===p[k[0]+N[1]]||p[k[1]+N[0]]+p[k[0]+N[1]]>=p[k[0]+N[0]]}updateChangeTouches(p){return p.changedTouches&&0!==p.changedTouches.length?p.changedTouches[0]:p}};ts([sr()],Ws.prototype,"tap",void 0),ts([sr()],Ws.prototype,"tapHold",void 0),ts([sr()],Ws.prototype,"swipe",void 0),ts([sr()],Ws.prototype,"scroll",void 0),ts([Vn(350)],Ws.prototype,"tapThreshold",void 0),ts([Vn(750)],Ws.prototype,"tapHoldThreshold",void 0),ts([co({},wn)],Ws.prototype,"swipeSettings",void 0),Ws=ts([zn],Ws);const ht=new RegExp("\\n|\\r|\\s\\s+","g"),S=new RegExp(/'|"/g),I=new RegExp("if ?\\("),j=new RegExp("else if ?\\("),oe=new RegExp("else"),Ee=new RegExp("for ?\\("),dt=new RegExp("(/if|/for)"),Bt=new RegExp("\\((.*)\\)",""),Ii=new RegExp("^[0-9]+$","g"),Yi=new RegExp("[\\w\"'.\\s+]+","g"),Ss=new RegExp('"(.*?)"',"g"),Ps=new RegExp("[\\w\"'@#$.\\s-+]+","g");let un=new RegExp("\\${([^}]*)}","g");const Xs=/^\..*/gm,Jn=/\\/gi,Ar=/\\\\/gi,En=new RegExp("[\\w\"'@#$.\\s+]+","g"),Ie=/\window\./gm;function Et(Ge,p,w,k,N){return!p||Ii.test(Ge)||-1!==k.indexOf(Ge.split(".")[0])||N?Ge:w+"."+Ge}function _s(Ge,p,w,k){return p&&!Ii.test(Ge)&&-1===k.indexOf(Ge.split(".")[0])?w+'["'+Ge:Ge}function _n(Ge){return Ge.match(Ar)||(Ge=Ge.replace(Jn,"\\\\")),Ge}function en(Ge,p,w,k){if(Ge=Ge.trim(),/\window\./gm.test(Ge))return Ge;{const R=/'|"/gm;return/@|\$|#/gm.test(Ge)&&(Ge=_s(Ge,-1===w.indexOf(Ge),p,w)+'"]'),Xs.test(Ge)?function Ji(Ge,p,w,k){return!p||Ii.test(Ge)||-1!==k.indexOf(Ge.split(".")[0])||/^\..*/gm.test(Ge)?Ge:w+"."+Ge}(Ge,!R.test(Ge)&&-1===w.indexOf(Ge),p,w):Et(Ge,!R.test(Ge)&&-1===w.indexOf(Ge),p,w,k)}}const po=/^[\n\r.]+<tr|^<tr/,jo=/^[\n\r.]+<svg|^<path|^<g/,nr={};function hr(){return"-"+Math.random().toString(36).substr(2,5)}function Yo(Ge,p,w){const k=ko.compile(Ge,p,w);return(N,R,K,G,ye,ee,te)=>{const ie=k(N,R,K,te);return"string"==typeof ie?jo.test(ie)?Rs("svg",{innerHTML:ie}).childNodes:Rs(po.test(ie)?"table":"div",{innerHTML:ie}).childNodes:ie}}function Rn(Ge,p,w,k,N){}function Do(Ge,p,w){const k=document.getElementById(Ge);if(k){const N=k.getElementsByClassName("blazor-inner-template");for(let R=0;R<N.length;R++){let K=" ";K=Oe(w)?N[R].getAttribute("data-templateId"):N[w].getAttribute("data-templateId");const G=document.getElementById(K);if(G){const ye=G.childNodes.length;for(let ee=0;ee<ye;ee++)Oe(w)?N[R].appendChild(G.childNodes[0]):(N[w].appendChild(G.childNodes[0]),R=N.length)}}}}function qo(Ge){ko.compile=Ge.compile}function zr(){return ko.compile}const ko={compile:(new class Mr{compile(p,w={},k){return function Ae(Ge,p,w){const k="data",N=function Le(Ge,p,w,k){let N=0;const R=[],K=Ge.match(/class="([^"]+|)\s{2}/g);let G="";return K&&K.forEach(ye=>{G=ye.replace(/\s\s+/g," "),Ge=Ge.replace(ye,G)}),Ge.replace(ht,"").replace(Ss,"'$1'").replace(un,(ye,ee,te,ie)=>{const Ke=ee.match(Bt);if(Ke){const ct=Ke[1];if(j.test(ee))ee='";} '+ee.replace(Ke[1],ct.replace(Yi,ii=>Et(ii=ii.trim(),!S.test(ii)&&-1===R.indexOf(ii),p,R,k)))+'{ \n str = str + "';else if(I.test(ee))ee='"; '+ee.replace(Ke[1],ct.replace(Ps,ii=>en(ii,p,R,k)))+'{ \n str = str + "';else if(Ee.test(ee)){const ii=Ke[1].split(" of ");ee='"; '+ee.replace(Ke[1],si=>(R.push(ii[0]),R.push(ii[0]+"Index"),N+=1,"var i"+N+"=0; i"+N+" < "+Et(ii[1],!0,p,R,k)+".length; i"+N+"++"))+"{ \n "+ii[0]+"= "+Et(ii[1],!0,p,R,k)+"[i"+N+"]; \n var "+ii[0]+"Index=i"+N+'; \n str = str + "'}else{const ii=ee.split("(");let si=w&&w.hasOwnProperty(ii[0])?"this.":"global";si=/\./.test(ii[0])?"":si;const Ri=Ke[1].split(",");0!==Ke[1].length&&!/data/.test(Ri[0])&&!/window./.test(Ri[0])&&(Ke[1]="global"===si?p+"."+Ke[1]:Ke[1]);const qi=/@|\$|#/gm,Mi=/\]\./gm;Ie.test(ee)&&Mi.test(ee)||qi.test(ee)?/@|\$|#|\]\./gm.test(ee)&&(ee='"+ '+("global"===si?"":si)+ee.replace(Ke[1],ct.replace(En,Gs=>en(Gs,p,R,k)))+'+ "'):ee='" + '+("global"===si?"":si)+ee.replace(ct,Et(Ke[1].replace(/,( |)data.|,/gi,","+p+".").replace(/,( |)data.window/gi,",window"),"global"!==si,p,R,k))+'+"'}}else oe.test(ee)?ee='"; '+ee.replace(oe,'} else { \n str = str + "'):ee.match(dt)?ee=ee.replace(dt,'"; \n } \n str = str + "'):/@|#|\$/gm.test(ee)?(ee.match(Jn)&&(ee=_n(ee)),ee='"+'+_s(ee,-1===R.indexOf(ee),p,R)+'"]+"'):ee=ee.match(Jn)?'"+'+_s(ee=_n(ee),-1===R.indexOf(ee),p,R)+'"]+"':'"+'+Et(ee.replace(/,/gi,"+"+p+"."),-1===R.indexOf(ee),p,R,k)+'+"';return ee})}(Ge,k,p,w);return new Function(k,'var str="'+N+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if((str.match(valueRegEx)) && (str.match('svg') === null)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if((str.match(hrefRegex)) && (str.match('svg') === null)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(p)}(p,w)}}).compile},ze=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Go=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],$o=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"];class Mn{static beforeSanitize(){return{selectors:{tags:ze,attributes:Go}}}static sanitize(p){const w=this.beforeSanitize();return this.serializeValue(w,p)}static serializeValue(p,w){this.removeAttrs=p.selectors.attributes,this.removeTags=p.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=w,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();const k=this.wrapElement.innerHTML;return this.removeElement(),k}static removeElement(){const p=this.wrapElement.children;for(let w=0;w<p.length;w++){const k=p[w].attributes;for(let N=0;N<k.length;N++)this.wrapElement.children[w].removeAttribute(k[N].localName)}}static removeXssTags(){const p=this.wrapElement.querySelectorAll(this.removeTags.join(","));p.length>0&&p.forEach(w=>{Fi(w)})}static removeJsEvents(){const p=this.wrapElement.querySelectorAll("["+$o.join("],[")+"]");p.length>0&&p.forEach(w=>{$o.forEach(k=>{w.hasAttribute(k)&&w.removeAttribute(k)})})}static removeXssAttrs(){this.removeAttrs.forEach((p,w)=>{const k=this.wrapElement.querySelectorAll(p.selector);k.length>0&&k.forEach(N=>{N.removeAttribute(p.attribute)})})}}},2162:(An,hs,rt)=>{rt.d(hs,{EU:()=>de,Jg:()=>ce,eE:()=>Li,jg:()=>us,rs:()=>ui,sg:()=>Lt,zx:()=>E});var i=rt(7628);function u($i,et,zt,Xt,Kt,ni){let Tt=Xt;if(Xt.tagName===et){const qt=(0,i.NA)("ej2_instances",Xt);Tt=$i("input",{attrs:{type:zt}});const Ci=["change","cssClass","label","labelPosition","id"];for(let gs=0,Jt=Xt.attributes.length;gs<Jt;gs++)-1===Ci.indexOf(Xt.attributes[gs].nodeName)&&Tt.setAttribute(Xt.attributes[gs].nodeName,Xt.attributes[gs].nodeValue);(0,i.Y4)(Xt,{class:Kt,role:ni,"aria-checked":"false"}),Xt.appendChild(Tt),(0,i.sO)("ej2_instances",qt,Tt),(0,i.ex)(Xt,"ej2_instances")}return Tt}function Ue($i){let et;const zt=$i.childNodes;for(let Xt=0;Xt<zt.length;Xt++)if(et=zt[Xt],3===et.nodeType)return et;return null}function Li($i,et=!1,zt={}){const Xt=$i("div",{className:"e-checkbox-wrapper e-css"});if(zt.cssClass&&(0,i.cn)([Xt],zt.cssClass.split(" ")),zt.enableRtl&&Xt.classList.add("e-rtl"),et){const ni=$i("span",{className:"e-ripple-container"});(0,i.qx)(ni,{isCenterRipple:!0,duration:400}),Xt.appendChild(ni)}const Kt=$i("span",{className:"e-frame e-icons"});if(zt.checked&&Kt.classList.add("e-check"),Xt.appendChild(Kt),zt.label){const ni=$i("span",{className:"e-label"});zt.disableHtmlEncode?ni.textContent=zt.label:ni.innerHTML=zt.label,Xt.appendChild(ni)}return Xt}function Lt($i,et){if(et){const zt=document.createEvent("MouseEvents");zt.initEvent($i.type,!1,!0),et.dispatchEvent(zt)}}function ut($i,et){$i.element.getAttribute("ejs-for")&&et.appendChild($i.createElement("input",{attrs:{name:$i.name||$i.element.name,value:"false",type:"hidden"}}))}var Si=function($i,et,zt,Xt){var Tt,Kt=arguments.length,ni=Kt<3?et:null===Xt?Xt=Object.getOwnPropertyDescriptor(et,zt):Xt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ni=Reflect.decorate($i,et,zt,Xt);else for(var qt=$i.length-1;qt>=0;qt--)(Tt=$i[qt])&&(ni=(Kt<3?Tt(ni):Kt>3?Tt(et,zt,ni):Tt(et,zt))||ni);return Kt>3&&ni&&Object.defineProperty(et,zt,ni),ni};new i.Qj;let E=(()=>{let $i=class extends i.wA{constructor(zt,Xt){super(zt,Xt)}preRender(){}render(){this.initialize(),this.removeRippleEffect=(0,i.qx)(this.element,{selector:".e-btn"}),this.renderComplete()}initialize(){if(this.cssClass&&(0,i.cn)([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),!(0,i.xr)()||(0,i.xr)()&&"progress-btn"!==this.getModuleName()){if(this.content){const zt=this.enableHtmlSanitizer?i.pJ.sanitize(this.content):this.content;this.element.innerHTML=zt}this.setIconCss()}this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents()}controlStatus(zt){this.element.disabled=zt}setIconCss(){if(this.iconCss){const zt=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(zt.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");const Xt=this.element.childNodes[0];!Xt||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(zt):this.element.insertBefore(zt,Xt)}}wireEvents(){this.isToggle&&i.bi.add(this.element,"click",this.btnClickHandler,this)}unWireEvents(){this.isToggle&&i.bi.remove(this.element,"click",this.btnClickHandler)}btnClickHandler(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")}destroy(){let zt=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(zt=zt.concat(this.cssClass.split(" "))),super.destroy(),(0,i.IV)([this.element],zt),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));const Xt=this.element.querySelector("span.e-btn-icon");Xt&&(0,i.og)(Xt),this.unWireEvents(),i.re&&this.removeRippleEffect()}getModuleName(){return"btn"}getPersistData(){return this.addOnPersist([])}static Inject(){}onPropertyChanged(zt,Xt){let Kt=this.element.querySelector("span.e-btn-icon");for(const ni of Object.keys(zt))switch(ni){case"isPrimary":zt.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(zt.disabled);break;case"iconCss":Kt?zt.iconCss?(Kt.className="e-btn-icon "+zt.iconCss,this.element.textContent.trim()&&Kt.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):(0,i.og)(Kt):this.setIconCss();break;case"iconPosition":(0,i.IV)([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),Kt=this.element.querySelector("span.e-btn-icon"),Kt&&(0,i.og)(Kt),this.setIconCss();break;case"cssClass":Xt.cssClass&&(0,i.IV)([this.element],Xt.cssClass.split(" ")),zt.cssClass&&(0,i.cn)([this.element],zt.cssClass.split(" "));break;case"enableRtl":zt.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":Ue(this.element)||this.element.classList.remove("e-icon-btn"),(!(0,i.xr)()||(0,i.xr)()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(zt.content=i.pJ.sanitize(zt.content)),this.element.innerHTML=zt.content,this.setIconCss());break;case"isToggle":zt.isToggle?i.bi.add(this.element,"click",this.btnClickHandler,this):(i.bi.remove(this.element,"click",this.btnClickHandler),(0,i.IV)([this.element],["e-active"]))}}click(){this.element.click()}focusIn(){this.element.focus()}};return Si([(0,i.Z9)("Left")],$i.prototype,"iconPosition",void 0),Si([(0,i.Z9)("")],$i.prototype,"iconCss",void 0),Si([(0,i.Z9)(!1)],$i.prototype,"disabled",void 0),Si([(0,i.Z9)(!1)],$i.prototype,"isPrimary",void 0),Si([(0,i.Z9)("")],$i.prototype,"cssClass",void 0),Si([(0,i.Z9)("")],$i.prototype,"content",void 0),Si([(0,i.Z9)(!1)],$i.prototype,"isToggle",void 0),Si([(0,i.Z9)()],$i.prototype,"locale",void 0),Si([(0,i.Z9)(!1)],$i.prototype,"enableHtmlSanitizer",void 0),Si([(0,i.ju)()],$i.prototype,"created",void 0),$i=Si([i.Zl],$i),$i})();var at=function($i,et,zt,Xt){var Tt,Kt=arguments.length,ni=Kt<3?et:null===Xt?Xt=Object.getOwnPropertyDescriptor(et,zt):Xt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ni=Reflect.decorate($i,et,zt,Xt);else for(var qt=$i.length-1;qt>=0;qt--)(Tt=$i[qt])&&(ni=(Kt<3?Tt(ni):Kt>3?Tt(et,zt,ni):Tt(et,zt))||ni);return Kt>3&&ni&&Object.defineProperty(et,zt,ni),ni};const Oe="e-check",ft="e-checkbox-disabled",jt="e-frame",Nt="e-stop",Di="e-label",bt="e-ripple-container",Rt="e-ripple-check",z="e-ripple-stop",J="e-rtl",ve="e-checkbox-wrapper",Ne=["title","class","style","disabled","readonly","name","value"];let ce=class extends i.wA{constructor(et,zt){super(et,zt),this.isFocused=!1,this.isMouseClick=!1,this.clickTriggered=!1}changeState(et){let zt,Xt;const Kt=this.getWrapper().getElementsByClassName(jt)[0];i.re&&(Xt=this.getWrapper().getElementsByClassName(bt)[0]),"check"===et?(Kt.classList.remove(Nt),Kt.classList.add(Oe),Xt&&(Xt.classList.remove(z),Xt.classList.add(Rt)),zt="true",this.element.checked=!0):"uncheck"===et?((0,i.IV)([Kt],[Oe,Nt]),Xt&&(0,i.IV)([Xt],[Rt,z]),zt="false",this.element.checked=!1):(Kt.classList.remove(Oe),Kt.classList.add(Nt),Xt&&(Xt.classList.remove(Rt),Xt.classList.add(z)),zt="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",zt)}clickHandler(et){if("INPUT"===et.target.tagName&&this.clickTriggered)return void(this.clickTriggered=!1);("SPAN"===et.target.tagName||"LABEL"===et.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);const zt={checked:this.updateVueArrayModel(!1),event:et};this.trigger("change",zt),et.stopPropagation()}destroy(){let et=this.getWrapper();super.destroy(),this.wrapper&&(et=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&et.parentNode&&et.parentNode.insertBefore(this.element,et),(0,i.og)(et),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(zt=>{this.element.removeAttribute(zt)})):(["role","aria-checked","class"].forEach(zt=>{et.removeAttribute(zt)}),et.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){const et=this.getWrapper();et&&et.classList.remove("e-focus"),this.isFocused=!1}getModuleName(){return"checkbox"}getPersistData(){return this.addOnPersist(["checked","indeterminate"])}getWrapper(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null}initialize(){(0,i.le)(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()}initWrapper(){let et=this.element.parentElement;et.classList.contains(ve)||(et=this.createElement("div",{className:ve,attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(et,this.element));const zt=this.createElement("label",{attrs:{for:this.element.id}}),Xt=this.createElement("span",{className:"e-icons "+jt});if(et.classList.add("e-wrapper"),this.enableRtl&&et.classList.add(J),this.cssClass&&(0,i.cn)([et],this.cssClass.split(" ")),et.appendChild(zt),zt.appendChild(this.element),ut(this,zt),zt.appendChild(Xt),i.re){const Kt=this.createElement("span",{className:bt});"Before"===this.labelPosition?zt.appendChild(Kt):zt.insertBefore(Kt,Xt),(0,i.qx)(Kt,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}labelMouseDownHandler(et){this.isMouseClick=!0,Lt(et,this.getWrapper().getElementsByClassName(bt)[0])}labelMouseUpHandler(et){this.isMouseClick=!0;const zt=this.getWrapper().getElementsByClassName(bt)[0];if(zt){const Xt=zt.querySelectorAll(".e-ripple-element");for(let Kt=0;Kt<Xt.length-1;Kt++)zt.removeChild(zt.childNodes[Kt]);Lt(et,zt)}}onPropertyChanged(et,zt){const Xt=this.getWrapper();for(const Kt of Object.keys(et))switch(Kt){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(et.checked?"check":"uncheck");break;case"indeterminate":et.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":et.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,Xt.classList.remove(ft),Xt.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":zt.cssClass&&(0,i.IV)([Xt],zt.cssClass.split(" ")),et.cssClass&&(0,i.cn)([Xt],et.cssClass.split(" "));break;case"enableRtl":et.enableRtl?Xt.classList.add(J):Xt.classList.remove(J);break;case"label":this.setText(et.label);break;case"labelPosition":{const ni=Xt.getElementsByClassName(Di)[0],Tt=Xt.getElementsByTagName("label")[0];(0,i.og)(ni),"After"===et.labelPosition?Tt.appendChild(ni):Tt.insertBefore(ni,Xt.getElementsByClassName(jt)[0]);break}case"name":this.element.setAttribute("name",et.name);break;case"value":if(this.isVue&&"object"==typeof et.value)break;this.element.setAttribute("value",et.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}preRender(){let et=this.element;this.tagName=this.element.tagName,et=u(this.createElement,"EJS-CHECKBOX","checkbox",et,ve,"checkbox"),this.element=et,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=(0,i.QI)("e-"+this.getModuleName()))}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){const et=this.getWrapper();this.element.disabled=!0,et.classList.add(ft),et.setAttribute("aria-disabled","true")}setText(et){const zt=this.getWrapper();if(!zt)return;let Xt=zt.getElementsByClassName(Di)[0];if(Xt)Xt.textContent=et;else{et=this.enableHtmlSanitizer?i.pJ.sanitize(et):et,Xt=this.createElement("span",{className:Di,innerHTML:et});const Kt=zt.getElementsByTagName("label")[0];"Before"===this.labelPosition?Kt.insertBefore(Xt,zt.getElementsByClassName(jt)[0]):Kt.appendChild(Xt)}}changeHandler(et){et.stopPropagation()}formResetHandler(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue}unWireEvents(){const et=this.wrapper;i.bi.remove(et,"click",this.clickHandler),i.bi.remove(this.element,"keyup",this.keyUpHandler),i.bi.remove(this.element,"focus",this.focusHandler),i.bi.remove(this.element,"focusout",this.focusOutHandler);const zt=et.getElementsByTagName("label")[0];i.bi.remove(zt,"mousedown",this.labelMouseDownHandler),i.bi.remove(zt,"mouseup",this.labelMouseUpHandler);const Xt=(0,i.oq)(this.element,"form");Xt&&i.bi.remove(Xt,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&i.bi.remove(this.element,"change",this.changeHandler)}wireEvents(){const et=this.getWrapper();i.bi.add(et,"click",this.clickHandler,this),i.bi.add(this.element,"keyup",this.keyUpHandler,this),i.bi.add(this.element,"focus",this.focusHandler,this),i.bi.add(this.element,"focusout",this.focusOutHandler,this);const zt=et.getElementsByTagName("label")[0];i.bi.add(zt,"mousedown",this.labelMouseDownHandler,this),i.bi.add(zt,"mouseup",this.labelMouseUpHandler,this);const Xt=(0,i.oq)(this.element,"form");Xt&&i.bi.add(Xt,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&i.bi.add(this.element,"change",this.changeHandler,this)}updateVueArrayModel(et){if(this.isVue&&"object"==typeof this.value){const zt=this.element.value;if(zt&&this.value){if(!et){const Xt=this.value.indexOf(zt);return this.checked?Xt<0&&this.value.push(zt):Xt>-1&&this.value.splice(Xt,1),this.value}for(let Xt=0;Xt<this.value.length;Xt++)zt===this.value[Xt]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.element.checked}updateHtmlAttributeToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const et of Object.keys(this.htmlAttributes))if(Ne.indexOf(et)>-1){const zt=this.getWrapper();"class"===et?(0,i.cn)([zt],this.htmlAttributes[et].split(" ")):"title"===et?zt.setAttribute(et,this.htmlAttributes[et]):"style"===et?this.getWrapper().getElementsByClassName(jt)[0].setAttribute(et,this.htmlAttributes[et]):this.element.setAttribute(et,this.htmlAttributes[et])}}click(){this.element.click()}focusIn(){this.element.focus()}};at([(0,i.ju)()],ce.prototype,"change",void 0),at([(0,i.ju)()],ce.prototype,"created",void 0),at([(0,i.Z9)(!1)],ce.prototype,"checked",void 0),at([(0,i.Z9)("")],ce.prototype,"cssClass",void 0),at([(0,i.Z9)(!1)],ce.prototype,"disabled",void 0),at([(0,i.Z9)(!1)],ce.prototype,"indeterminate",void 0),at([(0,i.Z9)("")],ce.prototype,"label",void 0),at([(0,i.Z9)("After")],ce.prototype,"labelPosition",void 0),at([(0,i.Z9)("")],ce.prototype,"name",void 0),at([(0,i.Z9)("")],ce.prototype,"value",void 0),at([(0,i.Z9)(!1)],ce.prototype,"enableHtmlSanitizer",void 0),at([(0,i.Z9)({})],ce.prototype,"htmlAttributes",void 0),ce=at([i.Zl],ce);var Se,be=function($i,et,zt,Xt){var Tt,Kt=arguments.length,ni=Kt<3?et:null===Xt?Xt=Object.getOwnPropertyDescriptor(et,zt):Xt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ni=Reflect.decorate($i,et,zt,Xt);else for(var qt=$i.length-1;qt>=0;qt--)(Tt=$i[qt])&&(ni=(Kt<3?Tt(ni):Kt>3?Tt(et,zt,ni):Tt(et,zt))||ni);return Kt>3&&ni&&Object.defineProperty(et,zt,ni),ni};const ue="e-label",_e="e-ripple-container",lt="e-rtl",Xe="e-radio-wrapper",B=["title","class","style","disabled","readonly","name","value"];let de=Se=class extends i.wA{constructor(et,zt){super(et,zt),this.isFocused=!1}changeHandler(et){this.checked=!0,this.dataBind();let zt=this.element.getAttribute("value");zt=this.isVue&&zt?this.element.value:this.value,this.trigger("change",{value:zt,event:et}),"EJS-RADIOBUTTON"===this.tagName&&et.stopPropagation()}updateChange(){let et,zt;const Xt=this.getRadioGroup();for(let Kt=0;Kt<Xt.length;Kt++)et=Xt[Kt],et!==this.element&&(zt=(0,i.s8)(et,Se),zt.checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(zt.angularValue=this.value))}destroy(){const et=this.wrapper;super.destroy(),et&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(et.parentNode&&et.parentNode.insertBefore(this.element,et),(0,i.og)(et),this.element.checked=!1,["name","value","disabled"].forEach(zt=>{this.element.removeAttribute(zt)})):(["role","aria-checked","class"].forEach(zt=>{et.removeAttribute(zt)}),et.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){const et=this.getLabel();et&&et.classList.remove("e-focus")}getModuleName(){return"radio"}getSelectedValue(){let et;const zt=this.getRadioGroup();for(let Xt=0,Kt=zt.length;Xt<Kt;Xt++)if(et=zt[Xt],et.checked)return et.value;return""}getRadioGroup(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')}getPersistData(){return this.addOnPersist(["checked"])}getWrapper(){return this.element?this.element.parentElement:null}getLabel(){return this.element?this.element.nextElementSibling:null}initialize(){(0,i.le)(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);const et=this.element.getAttribute("value");this.isVue&&et&&et===this.value&&(this.checked=!0),(this.isVue?this.value&&!et:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()}initWrapper(){let et,zt=this.element.parentElement;zt.classList.contains(Xe)||(zt=this.createElement("div",{className:Xe}),this.element.parentNode.insertBefore(zt,this.element));const Xt=this.createElement("label",{attrs:{for:this.element.id}});zt.appendChild(this.element),zt.appendChild(Xt),i.re&&(et=this.createElement("span",{className:_e}),Xt.appendChild(et),(0,i.qx)(et,{duration:400,isCenterRipple:!0})),zt.classList.add("e-wrapper"),this.enableRtl&&Xt.classList.add(lt),this.cssClass&&(0,i.cn)([zt],this.cssClass.split(" ")),this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getLabel().classList.add("e-focus")}labelRippleHandler(et){Lt(et,this.getLabel().getElementsByClassName(_e)[0])}formResetHandler(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&(0,i.Y4)(this.element,{checked:"true"})}onPropertyChanged(et,zt){const Xt=this.getWrapper(),Kt=this.getLabel();for(const ni of Object.keys(et))switch(ni){case"checked":et.checked&&this.updateChange(),this.element.checked=et.checked;break;case"disabled":et.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":zt.cssClass&&(0,i.IV)([Xt],zt.cssClass.split(" ")),et.cssClass&&(0,i.cn)([Xt],et.cssClass.split(" "));break;case"enableRtl":et.enableRtl?Kt.classList.add(lt):Kt.classList.remove(lt);break;case"label":this.setText(et.label);break;case"labelPosition":"Before"===et.labelPosition?Kt.classList.add("e-right"):Kt.classList.remove("e-right");break;case"name":this.element.setAttribute("name",et.name);break;case"value":if(!(0,i.le)(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",et.value);break;case"htmlAttributes":this.updateHtmlAttribute()}}preRender(){let et=this.element;if(this.formElement=(0,i.oq)(this.element,"form"),this.tagName=this.element.tagName,et=u(this.createElement,"EJS-RADIOBUTTON","radio",et,Xe,"radio"),this.element=et,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=(0,i.QI)("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){const zt=this.element.getAttribute("formcontrolname");zt&&(this.setProperties({name:zt},!0),this.element.setAttribute("name",zt))}}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){this.element.disabled=!0}setText(et){const zt=this.getLabel();let Xt=zt.getElementsByClassName(ue)[0];Xt?Xt.textContent=et:(et=this.enableHtmlSanitizer?i.pJ.sanitize(et):et,Xt=this.createElement("span",{className:ue,innerHTML:et}),zt.appendChild(Xt)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")}updateHtmlAttribute(){if(!(0,i.le)(this.htmlAttributes))for(const et of Object.keys(this.htmlAttributes))if(B.indexOf(et)>-1){const zt=this.element.parentElement;"class"===et?(0,i.cn)([zt],this.htmlAttributes[et].split(" ")):"title"===et||"style"===et?zt.setAttribute(et,this.htmlAttributes[et]):this.element.setAttribute(et,this.htmlAttributes[et])}}unWireEvents(){const et=this.wrapper;i.bi.remove(this.element,"change",this.changeHandler),i.bi.remove(this.element,"focus",this.focusHandler),i.bi.remove(this.element,"focusout",this.focusOutHandler),i.bi.remove(this.element,"keyup",this.keyUpHandler);const zt=et.getElementsByTagName("label")[0];zt&&(i.bi.remove(zt,"mousedown",this.labelRippleHandler),i.bi.remove(zt,"mouseup",this.labelRippleHandler)),this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler)}wireEvents(){const et=this.getLabel();i.bi.add(this.element,"change",this.changeHandler,this),i.bi.add(this.element,"keyup",this.keyUpHandler,this),i.bi.add(this.element,"focus",this.focusHandler,this),i.bi.add(this.element,"focusout",this.focusOutHandler,this);const zt=et.getElementsByClassName(ue)[0];zt&&(i.bi.add(zt,"mousedown",this.labelRippleHandler,this),i.bi.add(zt,"mouseup",this.labelRippleHandler,this)),this.formElement&&i.bi.add(this.formElement,"reset",this.formResetHandler,this)}click(){this.element.click()}focusIn(){this.element.focus()}};be([(0,i.ju)()],de.prototype,"change",void 0),be([(0,i.ju)()],de.prototype,"created",void 0),be([(0,i.Z9)(!1)],de.prototype,"checked",void 0),be([(0,i.Z9)("")],de.prototype,"cssClass",void 0),be([(0,i.Z9)(!1)],de.prototype,"disabled",void 0),be([(0,i.Z9)("")],de.prototype,"label",void 0),be([(0,i.Z9)("After")],de.prototype,"labelPosition",void 0),be([(0,i.Z9)("")],de.prototype,"name",void 0),be([(0,i.Z9)("")],de.prototype,"value",void 0),be([(0,i.Z9)(!1)],de.prototype,"enableHtmlSanitizer",void 0),be([(0,i.Z9)({})],de.prototype,"htmlAttributes",void 0),de=Se=be([i.Zl],de);var Be=function($i,et,zt,Xt){var Tt,Kt=arguments.length,ni=Kt<3?et:null===Xt?Xt=Object.getOwnPropertyDescriptor(et,zt):Xt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ni=Reflect.decorate($i,et,zt,Xt);else for(var qt=$i.length-1;qt>=0;qt--)(Tt=$i[qt])&&(ni=(Kt<3?Tt(ni):Kt>3?Tt(et,zt,ni):Tt(et,zt))||ni);return Kt>3&&ni&&Object.defineProperty(et,zt,ni),ni};const Fe="e-switch-disabled",xt="e-ripple-container",$t="e-ripple-check",ji="e-rtl",is="e-switch-wrapper",zi="e-switch-active";let ui=class extends i.wA{constructor(et,zt){super(et,zt),this.isFocused=!1,this.isDrag=!1}changeState(et){let zt,Xt;const Kt=this.getWrapper(),ni=Kt.querySelector(".e-switch-inner"),Tt=Kt.querySelector(".e-switch-handle");i.re&&(Xt=Kt.getElementsByClassName(xt)[0]),et?((0,i.cn)([ni,Tt],zi),zt="true",this.element.checked=!0,this.checked=!0,Xt&&(0,i.cn)([Xt],[$t])):((0,i.IV)([ni,Tt],zi),zt="false",this.element.checked=!1,this.checked=!1,Xt&&(0,i.IV)([Xt],[$t])),Kt.setAttribute("aria-checked",zt)}clickHandler(et){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus(),this.trigger("change",{checked:this.element.checked,event:et})}destroy(){super.destroy(),this.disabled||this.unWireEvents(),function Zt($i,et,zt){"INPUT"===zt?(et.parentNode.insertBefore($i.element,et),(0,i.og)(et),$i.element.checked=!1,["name","value","disabled"].forEach(Xt=>{$i.element.removeAttribute(Xt)})):(["role","aria-checked","class"].forEach(Xt=>{et.removeAttribute(Xt)}),et.innerHTML="")}(this,this.getWrapper(),this.tagName)}focusHandler(){this.isFocused=!0}focusOutHandler(){this.getWrapper().classList.remove("e-focus")}getModuleName(){return"switch"}getPersistData(){return this.addOnPersist(["checked"])}getWrapper(){return this.element.parentElement}initialize(){(0,i.le)(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)}initWrapper(){let et=this.element.parentElement;et.classList.contains(is)||(et=this.createElement("div",{className:is,attrs:{role:"switch","aria-checked":"false"}}),this.element.parentNode.insertBefore(et,this.element));const zt=this.createElement("span",{className:"e-switch-inner"}),Xt=this.createElement("span",{className:"e-switch-on"}),Kt=this.createElement("span",{className:"e-switch-off"}),ni=this.createElement("span",{className:"e-switch-handle"});if(et.appendChild(this.element),ut(this,et),zt.appendChild(Xt),zt.appendChild(Kt),et.appendChild(zt),et.appendChild(ni),i.re){const Tt=this.createElement("span",{className:xt});ni.appendChild(Tt),(0,i.qx)(Tt,{duration:400,isCenterRipple:!0})}et.classList.add("e-wrapper"),this.enableRtl&&et.classList.add(ji),this.cssClass&&(0,i.cn)([et],this.cssClass.split(" "))}onPropertyChanged(et,zt){const Xt=this.getWrapper();for(const Kt of Object.keys(et))switch(Kt){case"checked":this.changeState(et.checked);break;case"disabled":et.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,Xt.classList.remove(Fe),Xt.setAttribute("aria-disabled","false"),this.wireEvents());break;case"value":this.element.setAttribute("value",et.value);break;case"name":this.element.setAttribute("name",et.name);break;case"onLabel":case"offLabel":this.setLabel(et.onLabel,et.offLabel);break;case"enableRtl":et.enableRtl?Xt.classList.add(ji):Xt.classList.remove(ji);break;case"cssClass":zt.cssClass&&(0,i.IV)([Xt],zt.cssClass.split(" ")),et.cssClass&&(0,i.cn)([Xt],et.cssClass.split(" "))}}preRender(){const et=this.element;this.formElement=(0,i.oq)(this.element,"form"),this.tagName=this.element.tagName,function $e($i,et,zt,Xt,Kt){Xt=u($i.createElement,et,"checkbox",Xt,zt,Kt),$i.element=Xt,"checkbox"!==$i.element.getAttribute("type")&&$i.element.setAttribute("type","checkbox"),$i.element.id||($i.element.id=(0,i.QI)("e-"+Kt))}(this,"EJS-SWITCH",is,et,this.getModuleName())}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}rippleHandler(et){Lt(et,this.getWrapper().getElementsByClassName(xt)[0]),"mousedown"===et.type&&et.currentTarget.classList.contains("e-switch-wrapper")&&1===et.which&&(this.isDrag=!0,this.isFocused=!1)}rippleTouchHandler(et){const zt=this.getWrapper().getElementsByClassName(xt)[0];if(zt){const Xt=document.createEvent("MouseEvents");Xt.initEvent(et,!1,!0),zt.dispatchEvent(Xt)}}setDisabled(){const et=this.getWrapper();this.element.disabled=!0,et.classList.add(Fe),et.setAttribute("aria-disabled","true")}setLabel(et,zt){const Xt=this.getWrapper();et&&(Xt.querySelector(".e-switch-on").textContent=et),zt&&(Xt.querySelector(".e-switch-off").textContent=zt)}switchFocusHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}switchMouseUp(et){const zt=et.target;"touchmove"===et.type&&et.preventDefault(),"touchstart"===et.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===et.type&&zt.className.indexOf("e-switch")<0||"touchend"===et.type)&&(this.clickHandler(et),this.rippleTouchHandler("mouseup"),et.preventDefault())}formResetHandler(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue}toggle(){this.clickHandler()}wireEvents(){const et=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),i.bi.add(et,"click",this.clickHandler,this),i.bi.add(this.element,"focus",this.focusHandler,this),i.bi.add(this.element,"focusout",this.focusOutHandler,this),i.bi.add(this.element,"mouseup",this.delegateMouseUpHandler,this),i.bi.add(this.element,"keyup",this.delegateKeyUpHandler,this),i.bi.add(et,"mousedown mouseup",this.rippleHandler,this),i.bi.add(et,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&i.bi.add(this.formElement,"reset",this.formResetHandler,this)}unWireEvents(){const et=this.getWrapper();i.bi.remove(et,"click",this.clickHandler),i.bi.remove(this.element,"focus",this.focusHandler),i.bi.remove(this.element,"focusout",this.focusOutHandler),i.bi.remove(this.element,"mouseup",this.delegateMouseUpHandler),i.bi.remove(this.element,"keyup",this.delegateKeyUpHandler),i.bi.remove(et,"mousedown mouseup",this.rippleHandler),i.bi.remove(et,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler)}click(){this.element.click()}focusIn(){this.element.focus()}};Be([(0,i.ju)()],ui.prototype,"change",void 0),Be([(0,i.ju)()],ui.prototype,"created",void 0),Be([(0,i.Z9)(!1)],ui.prototype,"checked",void 0),Be([(0,i.Z9)("")],ui.prototype,"cssClass",void 0),Be([(0,i.Z9)(!1)],ui.prototype,"disabled",void 0),Be([(0,i.Z9)("")],ui.prototype,"name",void 0),Be([(0,i.Z9)("")],ui.prototype,"onLabel",void 0),Be([(0,i.Z9)("")],ui.prototype,"offLabel",void 0),Be([(0,i.Z9)("")],ui.prototype,"value",void 0),ui=Be([i.Zl],ui);var Ut=function($i,et,zt,Xt){var Tt,Kt=arguments.length,ni=Kt<3?et:null===Xt?Xt=Object.getOwnPropertyDescriptor(et,zt):Xt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ni=Reflect.decorate($i,et,zt,Xt);else for(var qt=$i.length-1;qt>=0;qt--)(Tt=$i[qt])&&(ni=(Kt<3?Tt(ni):Kt>3?Tt(et,zt,ni):Tt(et,zt))||ni);return Kt>3&&ni&&Object.defineProperty(et,zt,ni),ni};const oi={chipSet:"e-chip-set",chip:"e-chip",avatar:"e-chip-avatar",text:"e-chip-text",icon:"e-chip-icon",delete:"e-chip-delete",deleteIcon:"e-dlt-btn",multiSelection:"e-multi-selection",singleSelection:"e-selection",active:"e-active",chipWrapper:"e-chip-avatar-wrap",iconWrapper:"e-chip-icon-wrap",focused:"e-focused",disabled:"e-disabled",rtl:"e-rtl"};let us=class extends i.wA{constructor(et,zt){super(et,zt),this.multiSelectedChip=[]}preRender(){}chipType(){return this.chips&&this.chips.length&&this.chips.length>0}render(){this.type=this.chips.length?"chipset":this.text||this.element.innerText?"chip":"chipset",this.setAttributes(),this.createChip(),this.setRtl(),this.select(this.selectedChips,void 0),this.wireEvent(!1),this.rippleFunction=(0,i.qx)(this.element,{selector:".e-chip"}),this.renderComplete()}createChip(){this.innerText=this.element.innerText&&0!==this.element.innerText.length?this.element.innerText.trim():this.element.innerText,this.element.innerHTML="",this.chipCreation("chip"===this.type?[this.innerText?this.innerText:this.text]:this.chips)}setAttributes(){"chip"===this.type?(this.element.tabIndex=0,this.element.setAttribute("role","option")):(this.element.classList.add(oi.chipSet),this.element.setAttribute("role","listbox"),"Multiple"===this.selection?(this.element.classList.add(oi.multiSelection),this.element.setAttribute("aria-multiselectable","true")):"Single"===this.selection?(this.element.classList.add(oi.singleSelection),this.element.setAttribute("aria-multiselectable","false")):this.element.setAttribute("aria-multiselectable","false"))}setRtl(){this.element.classList[this.enableRtl?"add":"remove"](oi.rtl)}chipCreation(et){let zt=[];for(let Xt=0;Xt<et.length;Xt++){const Kt=this.getFieldValues(et[Xt]),ni=this.elementCreation(Kt),Tt=(oi.chip+" "+(Kt.enabled?" ":oi.disabled)+" "+(Kt.avatarIconCss||Kt.avatarText?oi.chipWrapper:Kt.leadingIconCss?oi.iconWrapper:" ")+" "+Kt.cssClass).split(" ").filter(qt=>qt);if(this.chipType()){const qt=this.createElement("DIV",{className:Tt.join(" "),attrs:{tabIndex:"0",role:"option","aria-label":Kt.text,"aria-selected":"false"}});Kt.value&&qt.setAttribute("data-value",Kt.value.toString()),(0,i.R3)(ni,qt),zt.push(qt)}else zt=ni,(0,i.cn)([this.element],Tt),this.element.setAttribute("aria-label",Kt.text),Kt.value&&this.element.setAttribute("data-value",Kt.value.toString())}(0,i.R3)(zt,this.element)}getFieldValues(et){const zt="false"!==this.enabled.toString();return{text:"object"==typeof et?et.text?et.text.toString():this.text.toString():this.chipType()?et.toString():this.innerText?this.innerText:this.text.toString(),cssClass:"object"==typeof et&&et.cssClass?et.cssClass.toString():this.cssClass.toString(),leadingIconCss:"object"==typeof et&&et.leadingIconCss?et.leadingIconCss.toString():this.leadingIconCss.toString(),avatarIconCss:"object"==typeof et&&et.avatarIconCss?et.avatarIconCss.toString():this.avatarIconCss.toString(),avatarText:"object"==typeof et&&et.avatarText?et.avatarText.toString():this.avatarText.toString(),trailingIconCss:"object"==typeof et&&et.trailingIconCss?et.trailingIconCss.toString():this.trailingIconCss.toString(),enabled:"object"==typeof et?(0,i.le)(et.enabled)?zt:"false"!==et.enabled.toString():zt,value:"object"==typeof et&&et.value?et.value.toString():null,leadingIconUrl:"object"==typeof et&&et.leadingIconUrl?et.leadingIconUrl.toString():this.leadingIconUrl,trailingIconUrl:"object"==typeof et&&et.trailingIconUrl?et.trailingIconUrl.toString():this.trailingIconUrl}}elementCreation(et){const zt=[];if(et.avatarText||et.avatarIconCss){const Kt=(oi.avatar+" "+et.avatarIconCss).trim(),ni=this.createElement("span",{className:Kt});ni.innerText=et.avatarText,zt.push(ni)}else if(et.leadingIconCss){const Kt=(oi.icon+" "+et.leadingIconCss).trim(),ni=this.createElement("span",{className:Kt});zt.push(ni)}else if(et.leadingIconUrl){const Kt=(oi.avatar+" image-url").trim(),ni=this.createElement("span",{className:Kt});ni.style.backgroundImage="url("+et.leadingIconUrl+")",zt.push(ni)}const Xt=this.createElement("span",{className:oi.text});if(Xt.innerText=et.text,zt.push(Xt),et.trailingIconCss||this.chipType()&&this.enableDelete){const Kt=(oi.delete+" "+(et.trailingIconCss?et.trailingIconCss:oi.deleteIcon)).trim(),ni=this.createElement("span",{className:Kt});zt.push(ni)}else if(et.trailingIconUrl){const Kt="trailing-icon-url".trim(),ni=this.createElement("span",{className:Kt});ni.style.backgroundImage="url("+et.trailingIconUrl+")",zt.push(ni)}return zt}find(et){let zt;const Xt=et instanceof HTMLElement?et:this.element.querySelectorAll("."+oi.chip)[et];return Xt&&this.chipType()&&(zt={text:void 0,index:void 0,element:void 0,data:void 0},zt.index=Array.prototype.slice.call(this.element.querySelectorAll("."+oi.chip)).indexOf(Xt),zt.text="object"==typeof this.chips[zt.index]?this.chips[zt.index].text?this.chips[zt.index].text.toString():"":this.chips[zt.index].toString(),zt.data=this.chips[zt.index],zt.element=Xt),zt}add(et){if("chip"!==this.type){const zt=et instanceof Array?et:[et];this.chips.push(...zt),this.chipCreation(zt)}}select(et,zt){this.onSelect(et,!1,zt)}multiSelection(et){const zt=this.element.querySelectorAll(".e-chip");for(let Xt=0;Xt<et.length;Xt++)if("string"==typeof et[Xt]){for(let Kt=0;Kt<zt.length;Kt++)if(et[Xt]!==Kt&&et[Xt]===zt[Kt].attributes[5].value){this.multiSelectedChip.push(Kt);break}}else this.multiSelectedChip.push(et[Xt])}onSelect(et,zt,Xt){let Kt,ni,Tt;if(this.chipType()&&"None"!==this.selection){if(zt){const Ci=this.element.querySelectorAll("."+oi.chip);for(let gs=0;gs<Ci.length;gs++)Ci[gs].setAttribute("aria-selected","false"),Ci[gs].classList.remove(oi.active)}const qt=et instanceof Array?et:[et];for(let Ci=0;Ci<qt.length;Ci++){let gs=qt[Ci]instanceof HTMLElement?qt[Ci]:this.element.querySelectorAll("."+oi.chip)[qt[Ci]];if("index"!==Xt)for(let Jt=0;Jt<this.chips.length;Jt++){ni=this.element.querySelectorAll("."+oi.chip)[Jt];const Wt=this.getFieldValues(this.chips[Jt]);"value"===Xt?null!==Wt.value&&(Tt=ni.dataset.value):"text"===Xt&&(Tt=ni.innerText),Tt===qt[Ci].toString()&&(Kt=Jt,gs=this.element.querySelectorAll("."+oi.chip)[Kt])}gs instanceof HTMLElement&&this.selectionHandler(gs)}}}remove(et){if(this.chipType()){const zt=et instanceof Array?et:[et],Xt=[],Kt=this.element.querySelectorAll("."+oi.chip);zt.forEach(ni=>{const Tt=ni instanceof HTMLElement?ni:Kt[ni];Tt instanceof HTMLElement&&Xt.push(Tt)}),Xt.forEach(ni=>{const Tt=this.element.querySelectorAll("."+oi.chip),qt=Array.prototype.slice.call(Tt).indexOf(ni);this.deleteHandler(ni,qt)})}}getSelectedChips(){let et;if(this.chipType()&&"None"!==this.selection){const zt={texts:[],Indexes:[],data:[],elements:[]},Xt=this.element.querySelectorAll("."+oi.active);for(let ni=0;ni<Xt.length;ni++){const Tt=Xt[ni];zt.elements.push(Tt);const qt=Array.prototype.slice.call(this.element.querySelectorAll("."+oi.chip)).indexOf(Tt);zt.Indexes.push(qt),zt.data.push(this.chips[qt]);const Ci="object"==typeof this.chips[qt]?this.chips[qt].text?this.chips[qt].text.toString():null:this.chips[qt].toString();zt.texts.push(Ci)}const Kt={text:zt.texts[0],index:zt.Indexes[0],data:zt.data[0],element:zt.elements[0]};et=(0,i.le)(Kt.index)?void 0:"Multiple"===this.selection?zt:Kt}return et}wireEvent(et){et?(i.bi.remove(this.element,"click",this.clickHandler),i.bi.remove(this.element,"focusout",this.focusOutHandler),i.bi.remove(this.element,"keydown",this.keyHandler),i.bi.remove(this.element,"keyup",this.keyHandler)):(i.bi.add(this.element,"click",this.clickHandler,this),i.bi.add(this.element,"focusout",this.focusOutHandler,this),i.bi.add(this.element,"keydown",this.keyHandler,this),i.bi.add(this.element,"keyup",this.keyHandler,this))}keyHandler(et){et.target.classList.contains(oi.chip)&&("keydown"===et.type?13===et.keyCode?this.clickHandler(et):46===et.keyCode&&this.enableDelete&&this.clickHandler(et,!0):9===et.keyCode&&this.focusInHandler(et.target))}focusInHandler(et){et.classList.contains(oi.focused)||et.classList.add(oi.focused)}focusOutHandler(et){const zt=(0,i.oq)(et.target,"."+oi.chip),Xt=this.chipType()?this.element.querySelector("."+oi.focused):this.element.classList.contains(oi.focused)?this.element:null;zt&&Xt&&Xt.classList.remove(oi.focused)}clickHandler(et,zt=!1){const Xt=(0,i.oq)(et.target,"."+oi.chip);if(Xt){let Kt;if(this.chipType())Kt=this.find(Xt);else{const ni=Array.prototype.slice.call(this.element.querySelectorAll("."+oi.chip)).indexOf(Xt);Kt={text:this.innerText?this.innerText:this.text,element:Xt,data:this.text,index:ni}}Kt.event=et,Kt.cancel=!1,this.trigger("beforeClick",Kt,ni=>{ni.cancel||this.clickEventHandler(ni.element,et,zt)})}}clickEventHandler(et,zt,Xt){if(this.chipType()){const Kt=this.find(et);Kt.event=zt,(zt.target.classList.contains(oi.deleteIcon)?zt.target:Xt?et.querySelector("."+oi.deleteIcon):void 0)&&this.enableDelete?(Kt.cancel=!1,this.trigger("delete",Kt,qt=>{qt.cancel||(this.deleteHandler(qt.element,qt.index),this.selectionHandler(et),Kt.selected=qt.element.classList.contains(oi.active),this.trigger("click",Kt))})):"None"!==this.selection?(this.selectionHandler(et),Kt.selected=et.classList.contains(oi.active),this.trigger("click",Kt)):(this.focusInHandler(et),this.trigger("click",Kt))}else this.focusInHandler(et),this.trigger("click",{text:this.innerText?this.innerText:this.text,element:et,data:this.text,event:zt})}selectionHandler(et){if("Single"===this.selection){const zt=this.element.querySelector("."+oi.active);zt&&zt!==et&&(zt.classList.remove(oi.active),zt.setAttribute("aria-selected","false")),this.setProperties({selectedChips:null},!0)}else this.setProperties({selectedChips:[]},!0);et.classList.contains(oi.active)?(et.classList.remove(oi.active),et.setAttribute("aria-selected","false")):(et.classList.add(oi.active),et.setAttribute("aria-selected","true")),this.updateSelectedChips()}updateSelectedChips(){const et=this.element.querySelectorAll(".e-chip"),zt=[],Xt=[];let ni,Kt=null;for(let Tt=0;Tt<et.length;Tt++){const qt=this.element.querySelectorAll(".e-chip")[Tt];if("true"===qt.getAttribute("aria-selected")){if(ni=qt.getAttribute("data-value"),"Single"===this.selection&&qt.classList.contains("e-active")){Kt=ni||Tt;break}Kt=ni?Xt.push(ni):zt.push(Tt)}}this.setProperties({selectedChips:"Single"===this.selection?Kt:ni?Xt:zt},!0)}deleteHandler(et,zt){const Xt=this.find(et);this.chips.splice(zt,1),this.setProperties({chips:this.chips},!0),(0,i.og)(et),this.trigger("deleted",Xt)}destroy(){(0,i.IV)([this.element],[oi.chipSet,oi.chip,oi.rtl,oi.multiSelection,oi.singleSelection,oi.disabled,oi.chipWrapper,oi.iconWrapper,oi.active,oi.focused].concat(this.cssClass.toString().split(" ").filter(et=>et))),this.removeMultipleAttributes(["tabindex","role","aria-label","aria-multiselectable"],this.element),this.wireEvent(!0),this.rippleFunction(),super.destroy(),this.element.innerHTML="",this.element.innerText=this.innerText}removeMultipleAttributes(et,zt){et.forEach(Xt=>{zt.removeAttribute(Xt)})}getPersistData(){return this.addOnPersist([])}getModuleName(){return"chip-list"}onPropertyChanged(et,zt){for(const Kt of Object.keys(et))switch(Kt){case"chips":case"text":case"avatarText":case"avatarIconCss":case"leadingIconCss":case"trailingIconCss":case"selection":case"enableDelete":case"enabled":this.refresh();break;case"cssClass":this.chipType()?this.refresh():((0,i.IV)([this.element],zt.cssClass.toString().split(" ").filter(ni=>ni)),(0,i.cn)([this.element],et.cssClass.toString().split(" ").filter(ni=>ni)));break;case"selectedChips":(0,i.IV)(this.element.querySelectorAll(".e-active"),"e-active"),"Multiple"===this.selection?(this.multiSelectedChip=[],this.multiSelection(et.selectedChips),this.onSelect(this.multiSelectedChip,!0,void 0),this.updateSelectedChips()):this.onSelect(et.selectedChips,!0,void 0);break;case"enableRtl":this.setRtl()}}};Ut([(0,i.Z9)([])],us.prototype,"chips",void 0),Ut([(0,i.Z9)("")],us.prototype,"text",void 0),Ut([(0,i.Z9)("")],us.prototype,"avatarText",void 0),Ut([(0,i.Z9)("")],us.prototype,"avatarIconCss",void 0),Ut([(0,i.Z9)("")],us.prototype,"leadingIconCss",void 0),Ut([(0,i.Z9)("")],us.prototype,"trailingIconCss",void 0),Ut([(0,i.Z9)("")],us.prototype,"leadingIconUrl",void 0),Ut([(0,i.Z9)("")],us.prototype,"trailingIconUrl",void 0),Ut([(0,i.Z9)("")],us.prototype,"cssClass",void 0),Ut([(0,i.Z9)(!0)],us.prototype,"enabled",void 0),Ut([(0,i.Z9)([])],us.prototype,"selectedChips",void 0),Ut([(0,i.Z9)("None")],us.prototype,"selection",void 0),Ut([(0,i.Z9)(!1)],us.prototype,"enableDelete",void 0),Ut([(0,i.ju)()],us.prototype,"created",void 0),Ut([(0,i.ju)()],us.prototype,"click",void 0),Ut([(0,i.ju)()],us.prototype,"beforeClick",void 0),Ut([(0,i.ju)()],us.prototype,"delete",void 0),Ut([(0,i.ju)()],us.prototype,"deleted",void 0),us=Ut([i.Zl],us)},7140:(An,hs,rt)=>{rt.d(hs,{Mt:()=>js,f:()=>Us,xZ:()=>Rn});var i=rt(7628),u=rt(5774),Ue=rt(3155),Zt=rt(2162),$e=rt(7520),Li=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const Lt="e-other-month",ut="e-other-year",Si="e-calendar",We="e-device",E="e-rtl",Oe="e-year",ft="e-month",jt="e-decade",Nt="e-icons",ve="e-disabled",Ne="e-overlay",be="e-week-number",Se="e-selected",ue="e-focused-date",_e="e-month-hide",lt="e-today",B="e-day",Fe="e-zoomin",ui="e-calendar-day-header-lg",Ut=864e5;let us=(()=>{let Ge=class extends i.wA{constructor(w,k){super(w,k),this.effect="",this.isPopupClicked=!1,this.isDateSelected=!0,this.isTodayClicked=!1,this.preventChange=!1,this.isAngular=!1}render(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new i.eC(this.locale),((0,i.le)(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(Si),this.enableRtl&&this.element.classList.add(E),i.AR.isDevice&&this.element.classList.add(We),(0,i.Y4)(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(Si),this.enableRtl&&this.calendarElement.classList.add(E),i.AR.isDevice&&this.calendarElement.classList.add(We),(0,i.Y4)(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()}rangeValidation(w,k){(0,i.le)(w)&&this.setProperties({min:new Date(1900,0,1)},!0),(0,i.le)(k)&&this.setProperties({max:new Date(2099,11,31)},!0)}getDefaultKeyConfig(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs}validateDate(w){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!(0,i.le)(w)&&this.min<=this.max&&w>=this.min&&w<=this.max&&(this.currentDate=new Date(this.checkValue(w)))}setOverlayIndex(w,k,N,R){if(R&&!(0,i.le)(k)&&!(0,i.le)(N)&&!(0,i.le)(w)){const K=parseInt(k.style.zIndex,10)?parseInt(k.style.zIndex,10):1e3;N.style.zIndex=(K-1).toString(),w.style.zIndex=K.toString()}}minMaxUpdate(w){+this.min<=+this.max?(0,i.IV)([this.element],Ne):(this.setProperties({min:this.min},!0),(0,i.cn)([this.element],Ne)),this.min=(0,i.le)(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=(0,i.le)(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&w&&+w<=+this.max&&+w>=+this.min?this.currentDate=new Date(this.checkValue(w)):+this.min<=+this.max&&!w&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))}createHeader(){this.headerElement=this.createElement("div",{className:"e-header"});const R=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),(0,i.qx)(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),(0,i.Y4)(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),(0,i.qx)(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),(0,i.Y4)(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:B+" e-title"}),(0,i.Y4)(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev "+Nt})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  "+Nt})),R.appendChild(this.previousIcon),R.appendChild(this.nextIcon),this.headerElement.appendChild(R),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()}createContent(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()}getCultureValues(){const w=[];let k;const N="days.stand-alone."+this.dayHeaderFormat.toLowerCase();k="en"===this.locale||"en-US"===this.locale?(0,i.NA)(N,(0,i.bD)()):this.getCultureObjects(i.qV,""+this.locale);for(const R of Object.keys(k))w.push((0,i.NA)(R,k));return w}toCapitalize(w){return!(0,i.le)(w)&&w.length?w[0].toUpperCase()+w.slice(1):w}createContentHeader(){"calendar"===this.getModuleName()?(0,i.le)(this.element.querySelectorAll(".e-content .e-week-header")[0])||(0,i.og)(this.element.querySelectorAll(".e-content .e-week-header")[0]):(0,i.le)(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||(0,i.og)(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);let k="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(k+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?(0,i.cn)([this.element],""+be):(0,i.cn)([this.calendarElement],""+be));const N=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(let R=0;R<=6;R++)k+='<th  class="">'+this.toCapitalize(N[R])+"</th>";k="<tr>"+k+"</tr>",this.tableHeadElement.innerHTML=k,this.table.appendChild(this.tableHeadElement)}createContentBody(){switch("calendar"===this.getModuleName()?(0,i.le)(this.element.querySelectorAll(".e-content tbody")[0])||(0,i.og)(this.element.querySelectorAll(".e-content tbody")[0]):(0,i.le)(this.calendarElement.querySelectorAll(".e-content tbody")[0])||(0,i.og)(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}}updateFooter(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))}createContentFooter(){if(this.showTodayButton){const w=new Date(+this.min),k=new Date(+this.max),N={today:"Today"};this.globalize=new i.eC(this.locale),this.l10=new i.E7(this.getModuleName(),N,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),(0,i.qx)(this.todayElement),this.updateFooter(),(0,i.cn)([this.todayElement],["e-btn",lt,"e-flat","e-primary","e-css"]),(!(+new Date(w.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(k.setHours(0,0,0,0)))||this.todayDisabled)&&(0,i.cn)([this.todayElement],ve),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(ve)||i.bi.add(this.todayElement,"click",this.todayButtonClick,this)}}wireEvents(w,k,N,R){i.bi.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new i.nv(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new i.nv(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}dateWireEvents(w,k,N,R){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,N),this.serverModuleName=R}todayButtonClick(w,k,N){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(k)),N):this.navigateTo("Month",new Date(this.checkValue(k)),N))}resetCalendar(){this.calendarElement&&(0,i.og)(this.calendarElement),this.tableBodyElement&&(0,i.og)(this.tableBodyElement),this.table&&(0,i.og)(this.table),this.tableHeadElement&&(0,i.og)(this.tableHeadElement),this.nextIcon&&(0,i.og)(this.nextIcon),this.previousIcon&&(0,i.og)(this.previousIcon),this.footer&&(0,i.og)(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null}keyActionHandle(w,k,N){const R=this.tableBodyElement.querySelector("tr td.e-focused-date");let K;K=N?(0,i.le)(R)||+k!==parseInt(R.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):R:this.tableBodyElement.querySelector("tr td.e-selected");let G=this.getViewNumber(this.currentView());const ye=this.getViewNumber(this.depth),ee=G===ye&&this.getViewNumber(this.start)>=ye;switch(this.effect="",w.action){case"moveLeft":this.keyboardNavigate(-1,G,w,this.max,this.min),w.preventDefault();break;case"moveRight":this.keyboardNavigate(1,G,w,this.max,this.min),w.preventDefault();break;case"moveUp":this.keyboardNavigate(0===G?-7:-4,G,w,this.max,this.min),w.preventDefault();break;case"moveDown":this.keyboardNavigate(0===G?7:4,G,w,this.max,this.min),w.preventDefault();break;case"select":if(w.target===this.todayElement)this.todayButtonClick(w,k);else{const te=(0,i.le)(R)?K:R;if(!(0,i.le)(te)&&!te.classList.contains(ve))if(ee){const ie=new Date(parseInt(""+te.id,0));this.selectDate(w,ie,te)}else this.contentClick(null,--G,te,k)}break;case"controlUp":this.title(),w.preventDefault();break;case"controlDown":(!(0,i.le)(R)||!(0,i.le)(K)&&!ee)&&this.contentClick(null,--G,R||K,k),w.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),(0,i.og)(this.tableBodyElement),0===G?this.renderMonths(w):1===G?this.renderYears(w):this.renderDecades(w),w.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,G),(0,i.og)(this.tableBodyElement),0===G?this.renderMonths(w):1===G?this.renderYears(w):this.renderDecades(w),w.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),w.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),w.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),w.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),w.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),w.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),w.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}keyboardNavigate(w,k,N,R,K){const G=new Date(this.checkValue(this.currentDate));switch(k){case 2:this.addYears(this.currentDate,w),this.isMonthYearRange(this.currentDate)?((0,i.og)(this.tableBodyElement),this.renderDecades(N)):this.currentDate=G;break;case 1:this.addMonths(this.currentDate,w),this.isMonthYearRange(this.currentDate)?((0,i.og)(this.tableBodyElement),this.renderYears(N)):this.currentDate=G;break;case 0:this.addDay(this.currentDate,w,N,R,K),this.isMinMaxRange(this.currentDate)?((0,i.og)(this.tableBodyElement),this.renderMonths(N)):this.currentDate=G}}preRender(w){this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=k=>{this.triggerNavigate(k)}}minMaxDate(w){const k=new Date(new Date(+w).setHours(0,0,0,0)),N=new Date(new Date(+this.min).setHours(0,0,0,0)),R=new Date(new Date(+this.max).setHours(0,0,0,0));return(+k==+N||+k==+R)&&(+w<+this.min&&(w=new Date(+this.min)),+w>+this.max&&(w=new Date(+this.max))),w}renderMonths(w,k,N){const R=this.weekNumber?8:7;let K;K="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,k,null,null,N):this.islamicModule.islamicRenderDays(this.currentDate,k),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(K,R,ft,w,k):this.islamicModule.islamicRenderTemplate(K,R,ft,w,k)}renderDays(w,k,N,R,K){const G=[],ee=K?new Date(+w):this.getDate(new Date,this.timezone);let ie,te=new Date(this.checkValue(w));const xe=te.getMonth();this.titleUpdate(w,"days");const Ke=te;for(te=new Date(Ke.getFullYear(),Ke.getMonth(),0,Ke.getHours(),Ke.getMinutes(),Ke.getSeconds(),Ke.getMilliseconds());te.getDay()!==this.firstDayOfWeek;)this.setStartDate(te,-1*Ut);for(let ct=0;ct<42;++ct){const ii=this.createElement("td",{className:"e-cell"}),si=this.createElement("span");if(ct%7==0&&this.weekNumber){const Po="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,Ze=new Date(te.getFullYear(),te.getMonth(),te.getDate()+Po);si.textContent=""+this.getWeek(Ze),ii.appendChild(si),(0,i.cn)([ii],""+be),G.push(ii)}ie=new Date(+te),te=this.minMaxDate(te);const Ri={type:"dateTime",skeleton:"full"},qi=this.globalize.parseDate(this.globalize.formatDate(te,Ri),Ri),Mi=this.dayCell(te),es=this.globalize.formatDate(te,{type:"date",skeleton:"full"}),Gs=this.createElement("span");Gs.textContent=this.globalize.formatDate(te,{format:"d",type:"date",skeleton:"yMd"});const an=this.min>te||this.max<te;an?((0,i.cn)([Mi],ve),(0,i.cn)([Mi],Ne)):Gs.setAttribute("title",""+es),xe!==te.getMonth()&&(0,i.cn)([Mi],Lt),(0===te.getDay()||6===te.getDay())&&(0,i.cn)([Mi],"e-weekend"),Mi.appendChild(Gs),this.renderDayCellArgs={date:te,isDisabled:!1,element:Mi,isOutOfRange:an};const dr=this.renderDayCellArgs;if(this.renderDayCellEvent(dr),dr.isDisabled){const Po=new Date(this.checkValue(k)),Ze=new Date(this.checkValue(dr.date));if(N){if(!(0,i.le)(R)&&R.length>0)for(let ne=0;ne<R.length;ne++)+new Date(this.globalize.formatDate(dr.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(R[ne],{type:"date",skeleton:"yMd"}))&&(R.splice(ne,1),ne=-1)}else Po&&+Po==+Ze&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!Mi.classList.contains(Se)&&((0,i.cn)([Mi],ve),(0,i.cn)([Mi],Ne),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));const jr=Mi.classList.contains(Lt),Pr=Mi.classList.contains(ve);if(Pr||i.bi.add(Mi,"click",this.clickHandler,this),!N||(0,i.le)(R)||Pr)!Pr&&this.getDateVal(te,k)&&(0,i.cn)([Mi],Se);else{for(let Po=0;Po<R.length;Po++){const ne={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(te,ne)===this.globalize.formatDate(R[Po],ne)&&this.getDateVal(te,R[Po])||this.getDateVal(te,k)?(0,i.cn)([Mi],Se):this.updateFocus(jr,Pr,te,Mi,w)}R.length<=0&&this.updateFocus(jr,Pr,te,Mi,w)}this.updateFocus(jr,Pr,te,Mi,w),qi.getFullYear()===ee.getFullYear()&&qi.getMonth()===ee.getMonth()&&qi.getDate()===ee.getDate()&&(0,i.cn)([Mi],lt),G.push(this.renderDayCellArgs.element),te=new Date(+ie),this.addDay(te,1,null,this.max,this.min)}return G}updateFocus(w,k,N,R,K){K.getDate()!==N.getDate()||w||k?(K>=this.max&&parseInt(R.id,0)===+this.max&&!w&&!k&&(0,i.cn)([R],ue),K<=this.min&&parseInt(R.id,0)===+this.min&&!w&&!k&&(0,i.cn)([R],ue)):(0,i.cn)([R],ue)}renderYears(w,k){this.removeTableHeadElement();const R=[],K=(0,i.le)(k),G=new Date(this.checkValue(this.currentDate)),ye=G.getMonth(),ee=G.getFullYear(),te=G,ie=te.getFullYear(),xe=new Date(this.checkValue(this.min)).getFullYear(),Ke=new Date(this.checkValue(this.min)).getMonth(),ct=new Date(this.checkValue(this.max)).getFullYear(),ii=new Date(this.checkValue(this.max)).getMonth();te.setMonth(0),this.titleUpdate(this.currentDate,"months"),te.setDate(1);for(let si=0;si<12;++si){const Ri=this.dayCell(te),qi=this.createElement("span"),Mi=k&&k.getMonth()===te.getMonth(),es=k&&k.getFullYear()===ee&&Mi;qi.textContent=this.toCapitalize(this.globalize.formatDate(te,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(ie<xe||si<Ke&&ie===xe)||this.max&&(ie>ct||si>ii&&ie>=ct)?(0,i.cn)([Ri],ve):!K&&es?(0,i.cn)([Ri],Se):te.getMonth()===ye&&this.currentDate.getMonth()===ye&&(0,i.cn)([Ri],ue),te.setDate(1),te.setMonth(te.getMonth()+1),Ri.classList.contains(ve)||i.bi.add(Ri,"click",this.clickHandler,this),Ri.appendChild(qi),R.push(Ri)}this.renderTemplate(R,4,Oe,w,k)}renderDecades(w,k){this.removeTableHeadElement();const K=[],G=new Date(this.checkValue(this.currentDate));G.setMonth(0),G.setDate(1);const ye=G.getFullYear(),ee=new Date(G.setFullYear(ye-ye%10)),te=new Date(G.setFullYear(ye-ye%10+9)),ie=ee.getFullYear(),xe=te.getFullYear(),Ke=this.globalize.formatDate(ee,{format:null,type:"dateTime",skeleton:"y"}),ct=this.globalize.formatDate(te,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=Ke+" - "+ct;const si=new Date(ye-ye%10-1,0,1).getFullYear();for(let Ri=0;Ri<12;++Ri){const qi=si+Ri;G.setFullYear(qi);const Mi=this.dayCell(G);(0,i.Y4)(Mi,{role:"gridcell"});const es=this.createElement("span");es.textContent=this.globalize.formatDate(G,{format:null,type:"dateTime",skeleton:"y"}),qi<ie||qi>xe?((0,i.cn)([Mi],ut),!(0,i.le)(k)&&G.getFullYear()===k.getFullYear()&&(0,i.cn)([Mi],Se),(qi<new Date(this.checkValue(this.min)).getFullYear()||qi>new Date(this.checkValue(this.max)).getFullYear())&&(0,i.cn)([Mi],ve)):qi<new Date(this.checkValue(this.min)).getFullYear()||qi>new Date(this.checkValue(this.max)).getFullYear()?(0,i.cn)([Mi],ve):(0,i.le)(k)||G.getFullYear()!==k.getFullYear()?G.getFullYear()===this.currentDate.getFullYear()&&!Mi.classList.contains(ve)&&(0,i.cn)([Mi],ue):(0,i.cn)([Mi],Se),Mi.classList.contains(ve)||i.bi.add(Mi,"click",this.clickHandler,this),Mi.appendChild(es),K.push(Mi)}this.renderTemplate(K,4,"e-decade",w,k)}dayCell(w){const N={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},K=this.globalize.parseDate(this.globalize.formatDate(w,N),N).valueOf(),G={className:"e-cell",attrs:{id:""+(0,i.QI)(""+K),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",G)}firstDay(w){const k="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Lt):this.tableBodyElement.querySelectorAll("td:not(."+ut);if(k.length)for(let N=0;N<k.length;N++)if(!k[N].classList.contains(ve)){w=new Date(parseInt(k[N].id,0));break}return w}lastDay(w,k){const N=new Date(w.getFullYear(),w.getMonth()+1,0);if(2!==k){const R=Math.abs(N.getTimezoneOffset()-this.firstDay(w).getTimezoneOffset());return R&&N.setHours(this.firstDay(w).getHours()+R/60),this.findLastDay(N)}return this.findLastDay(this.firstDay(N))}checkDateValue(w){return!(0,i.le)(w)&&w instanceof Date&&!isNaN(+w)?w:null}findLastDay(w){const k="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+ut):this.tableBodyElement.querySelectorAll("td:not(."+Lt);if(k.length)for(let N=k.length-1;N>=0;N--)if(!k[N].classList.contains(ve)){w=new Date(parseInt(k[N].id,0));break}return w}removeTableHeadElement(){"calendar"===this.getModuleName()?(0,i.le)(this.element.querySelectorAll(".e-content table thead")[0])||(0,i.og)(this.tableHeadElement):(0,i.le)(this.calendarElement.querySelectorAll(".e-content table thead")[0])||(0,i.og)(this.tableHeadElement)}renderTemplate(w,k,N,R,K){const G=this.getViewNumber(this.currentView());let ye;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),(0,i.IV)([this.contentElement,this.headerElement],[ft,jt,Oe]),(0,i.cn)([this.contentElement,this.headerElement],[N]);let xe=k,Ke=0;for(let ct=0;ct<w.length/k;++ct){for(ye=this.createElement("tr",{attrs:{role:"row"}}),Ke=0+Ke;Ke<xe;Ke++)!w[Ke].classList.contains("e-week-number")&&!(0,i.le)(w[Ke].children[0])&&((0,i.cn)([w[Ke].children[0]],[B]),(0,i.qx)(w[Ke].children[0],{duration:600,isCenterRipple:!0})),ye.appendChild(w[Ke]),this.weekNumber&&7===Ke&&w[7].classList.contains(Lt)&&(0,i.cn)([ye],_e),!this.weekNumber&&6===Ke&&w[6].classList.contains(Lt)&&(0,i.cn)([ye],_e),this.weekNumber?41===Ke&&w[41].classList.contains(Lt)&&(0,i.cn)([ye],_e):35===Ke&&w[35].classList.contains(Lt)&&(0,i.cn)([ye],_e);xe+=k,Ke+=0,this.tableBodyElement.appendChild(ye)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(G!==this.getViewNumber(this.currentView())||0===G&&G!==this.getViewNumber(this.currentView()))&&this.navigateHandler(R),this.setAriaActiveDescendant()}clickHandler(w,k){this.clickEventEmitter(w);const N=w.currentTarget,R=this.getViewNumber(this.currentView());N.classList.contains(Lt)?this.contentClick(w,0,null,k):R===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===R?this.contentClick(w,1,null,k):N.classList.contains(Lt)||0!==R?this.contentClick(w,0,N,k):this.selectDate(w,this.getIdValue(w,null),null),"calendar"===this.getModuleName()&&this.table.focus()}clickEventEmitter(w){w.preventDefault()}contentClick(w,k,N,R){const K=this.getViewNumber(this.currentView()),G=this.getIdValue(w,N);switch(k){case 0:K===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?((0,i.og)(this.tableBodyElement),this.currentDate=G,this.effect=Fe,this.renderMonths(w)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(G.getMonth()),G.getMonth()>0&&this.currentDate.getMonth()!==G.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(G.getFullYear())):this.currentDate=G,this.effect=Fe,(0,i.og)(this.tableBodyElement),this.renderMonths(w));break;case 1:if(K===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(w,G,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(G.getFullYear());else{const ye=this.islamicModule.getIslamicDate(G);this.currentDate=this.islamicModule.toGregorian(ye.year,ye.month,1)}this.effect=Fe,(0,i.og)(this.tableBodyElement),this.renderYears(w)}}}switchView(w,k,N,R){switch(w){case 0:(0,i.og)(this.tableBodyElement),this.renderMonths(k,null,R),N&&!(0,i.le)(this.tableBodyElement.querySelectorAll("."+ue)[0])&&this.tableBodyElement.querySelectorAll("."+ue)[0].classList.remove(ue);break;case 1:(0,i.og)(this.tableBodyElement),this.renderYears(k);break;case 2:(0,i.og)(this.tableBodyElement),this.renderDecades(k)}}getModuleName(){return"calendar"}requiredModules(){const w=[];return this&&w.push({args:[this],member:"islamic"}),w}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(w,k,N,R){this.effect="";for(const K of Object.keys(w))switch(K){case"enableRtl":w.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===K?{min:this.checkDateValue(new Date(this.checkValue(w.min)))}:{max:this.checkDateValue(new Date(this.checkValue(w.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&(0,i.og)(this.tableBodyElement),this.minMaxUpdate(),N&&this.validateValues(N,R),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?((0,i.og)(this.todayElement),(0,i.og)(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&((0,i.IV)([this.todayElement],ve),(0,i.og)(this.todayElement),(0,i.og)(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new i.eC(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":w.showTodayButton?this.createContentFooter():!(0,i.le)(this.todayElement)&&!(0,i.le)(this.footer)&&((0,i.og)(this.todayElement),(0,i.og)(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:w.showTodayButton},!0)}}validateValues(w,k){if(w&&!(0,i.le)(k)&&k.length>0){const N=this.copyValues(k);for(let R=0;R<N.length;R++){const G="Gregorian"===this.calendarMode?"gregorian":"islamic";let ye;ye=this.globalize.formatDate(N[R],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});const ie=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:G}),ct=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:G});(+new Date(ye)<+new Date(ie)||+new Date(ye)>+new Date(ct))&&(N.splice(R,1),R=-1)}this.setProperties({values:N},!0)}}setValueUpdate(){(0,i.le)(this.tableBodyElement)||((0,i.og)(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())}copyValues(w){const k=[];if(!(0,i.le)(w)&&w.length>0)for(let N=0;N<w.length;N++)k.push(new Date(+w[N]));return k}titleUpdate(w,k){const N=new i.eC(this.locale);let R,K;const G="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(R=N.formatDate(w,{type:"dateTime",skeleton:"yMMMM",calendar:G}),K=N.formatDate(w,{format:null,type:"dateTime",skeleton:"y",calendar:G})):(R=N.formatDate(w,{type:"dateTime",format:"MMMM y",calendar:G}),K=N.formatDate(w,{type:"dateTime",format:"y",calendar:G})),k){case"days":this.headerTitleElement.textContent=this.toCapitalize(R);break;case"months":this.headerTitleElement.textContent=K}}setActiveDescendant(){let w;const k=this.tableBodyElement.querySelector("tr td.e-focused-date"),N=this.tableBodyElement.querySelector("tr td.e-selected"),R="Gregorian"===this.calendarMode?"gregorian":"islamic";let K;const G=this.currentView();return K=this.globalize.formatDate(this.currentDate,"Month"===G?{type:"date",skeleton:"full",calendar:R}:"Year"===G?"islamic"!==R?{type:"date",skeleton:"yMMMM",calendar:R}:{type:"date",skeleton:"GyMMM",calendar:R}:{format:null,type:"date",skeleton:"y",calendar:R}),(N||k)&&((0,i.le)(N)||N.setAttribute("aria-selected","true"),(k||N).setAttribute("aria-label",K),w=(k||N).getAttribute("id")),w}iconHandler(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}}destroy(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&(0,i.IV)([this.element],[Si]),"calendar"===this.getModuleName()&&this.element&&(i.bi.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&i.bi.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),(0,i.le)(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),super.destroy()}title(w){let k=this.getViewNumber(this.currentView());this.effect=Fe,this.switchView(++k,w)}getViewNumber(w){return"Month"===w?0:"Year"===w?1:2}navigateTitle(w){w.preventDefault(),this.title(w),"calendar"===this.getModuleName()&&this.table.focus()}previous(){this.effect="";const w=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(w);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(w);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(w)}}navigatePrevious(w){w.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(w),"calendar"===this.getModuleName()&&this.table.focus()}next(){this.effect="";const w=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(w);break;case"Year":this.addYears(this.currentDate,1),this.switchView(w);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(w)}}navigateNext(w){w.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(w),"calendar"===this.getModuleName()&&this.table.focus()}navigateTo(w,k,N){+k>=+this.min&&+k<=+this.max&&(this.currentDate=k),+k<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+k>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(w)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(w))&&(w=this.depth),this.switchView(this.getViewNumber(w),null,null,N)}currentView(){return this.contentElement.classList.contains(Oe)?"Year":this.contentElement.classList.contains(jt)?"Decade":"Month"}getDateVal(w,k){return!(0,i.le)(k)&&w.getDate()===k.getDate()&&w.getMonth()===k.getMonth()&&w.getFullYear()===k.getFullYear()}getCultureObjects(w,k){const N=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),R=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return(0,i.NA)("Gregorian"===this.calendarMode?"main."+this.locale+N:"main."+this.locale+R,w)}getWeek(w){const k=new Date(this.checkValue(w)).valueOf(),N=new Date(w.getFullYear(),0,1).valueOf();return Math.ceil((k-N+Ut)/Ut/7)}setStartDate(w,k){const N=w.getTimezoneOffset(),R=new Date(w.getTime()+k),K=R.getTimezoneOffset()-N;w.setTime(R.getTime()+6e4*K)}addMonths(w,k){if("Gregorian"===this.calendarMode){const N=w.getDate();w.setDate(1),w.setMonth(w.getMonth()+k),w.setDate(Math.min(N,this.getMaxDays(w)))}else{const N=this.islamicModule.getIslamicDate(w);this.currentDate=this.islamicModule.toGregorian(N.year,N.month+k,1)}}addYears(w,k){if("Gregorian"===this.calendarMode){const N=w.getDate();w.setDate(1),w.setFullYear(w.getFullYear()+k),w.setDate(Math.min(N,this.getMaxDays(w)))}else{const N=this.islamicModule.getIslamicDate(w);this.currentDate=this.islamicModule.toGregorian(N.year+k,N.month,1)}}getIdValue(w,k){let N;N=w?w.currentTarget:k;const K={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},G=this.globalize.formatDate(new Date(parseInt(""+N.getAttribute("id"),0)),K),ye=this.globalize.parseDate(G,K),ee=ye.valueOf()-ye.valueOf()%1e3;return new Date(ee)}adjustLongHeaderSize(){(0,i.IV)([this.element],ui),"Wide"===this.dayHeaderFormat&&(0,i.cn)(["calendar"===this.getModuleName()?this.element:this.calendarElement],ui)}selectDate(w,k,N,R,K){const G=N||w.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,k.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,k);else{if(R&&!this.checkPresentDate(k,K)){const ee=this.copyValues(K);!(0,i.le)(K)&&ee.length>0?(ee.push(new Date(this.checkValue(k))),this.setProperties({values:ee},!0),this.setProperties({value:K[K.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(k))]},!0)}else this.setProperties({value:new Date(this.checkValue(k))},!0);this.currentDate=new Date(this.checkValue(k))}let ye=(0,i.oq)(G,"."+Si);if((0,i.le)(ye)&&(ye=this.tableBodyElement),!R&&!(0,i.le)(ye.querySelector("."+Se))&&(0,i.IV)([ye.querySelector("."+Se)],Se),!R&&!(0,i.le)(ye.querySelector("."+ue))&&(0,i.IV)([ye.querySelector("."+ue)],ue),R){const ee=this.copyValues(K),te=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td"));for(let ie=0;ie<te.length;ie++){const xe=ye.querySelectorAll("td."+ue)[0],Ke=ye.querySelectorAll("td."+Se)[0];te[ie]===xe&&(0,i.IV)([te[ie]],ue),te[ie]===Ke&&!this.checkPresentDate(new Date(parseInt(Ke.getAttribute("id").split("_")[0],10)),K)&&(0,i.IV)([te[ie]],Se)}if(G.classList.contains(Se)){(0,i.IV)([G],Se);for(let ie=0;ie<ee.length;ie++){const Ke={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if(this.globalize.formatDate(k,Ke)===this.globalize.formatDate(ee[ie],Ke)){const si=ee.indexOf(ee[ie]);ee.splice(si,1),(0,i.cn)([G],ue)}}this.setProperties({values:ee},!0)}else(0,i.cn)([G],Se)}else(0,i.cn)([G],Se);this.isDateSelected=!0}checkPresentDate(w,k){let N=!1;if(!(0,i.le)(k))for(let R=0;R<k.length;R++){const K="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(w,{format:null,type:"date",skeleton:"short",calendar:K})===this.globalize.formatDate(k[R],{format:null,type:"date",skeleton:"short",calendar:K})&&(N=!0)}return N}setAriaActiveDescendant(){(0,i.Y4)(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})}previousIconHandler(w){w?(i.bi.remove(this.previousIcon,"click",this.navigatePreviousHandler),(0,i.cn)([this.previousIcon],""+ve),(0,i.cn)([this.previousIcon],""+Ne),this.previousIcon.setAttribute("aria-disabled","true")):(i.bi.add(this.previousIcon,"click",this.navigatePreviousHandler),(0,i.IV)([this.previousIcon],""+ve),(0,i.IV)([this.previousIcon],""+Ne),this.previousIcon.setAttribute("aria-disabled","false"))}renderDayCellEvent(w){(0,i.l7)(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",w)}navigatedEvent(w){(0,i.l7)(this.navigatedArgs,{name:"navigated",event:w}),this.trigger("navigated",this.navigatedArgs)}triggerNavigate(w){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(w)}nextIconHandler(w){w?(i.bi.remove(this.nextIcon,"click",this.navigateNextHandler),(0,i.cn)([this.nextIcon],ve),(0,i.cn)([this.nextIcon],Ne),this.nextIcon.setAttribute("aria-disabled","true")):(i.bi.add(this.nextIcon,"click",this.navigateNextHandler),(0,i.IV)([this.nextIcon],ve),(0,i.IV)([this.nextIcon],Ne),this.nextIcon.setAttribute("aria-disabled","false"))}compare(w,k,N){let K,G,R=k.getFullYear();return K=R,G=0,N&&(R-=R%N,K=R-R%N+N-1),w.getFullYear()>K?G=1:w.getFullYear()<R&&(G=-1),G}isMinMaxRange(w){return+w>=+this.min&&+w<=+this.max}isMonthYearRange(w){if("Gregorian"===this.calendarMode)return w.getMonth()>=this.min.getMonth()&&w.getFullYear()>=this.min.getFullYear()&&w.getMonth()<=this.max.getMonth()&&w.getFullYear()<=this.max.getFullYear();{const k=this.islamicModule.getIslamicDate(w);return k.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&k.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&k.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&k.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year}}compareYear(w,k){return this.compare(w,k,0)}compareDecade(w,k){return this.compare(w,k,10)}shiftArray(w,k){return w.slice(k).concat(w.slice(0,k))}addDay(w,k,N,R,K){let G=k;const ye=new Date(+w);if(!(0,i.le)(this.tableBodyElement)&&!(0,i.le)(N)){for(;this.findNextTD(new Date(+w),G,R,K);)G+=k;const ee=new Date(ye.setDate(ye.getDate()+G));G=+ee>+R||+ee<+K?G===k?k-k:k:G}w.setDate(w.getDate()+G)}findNextTD(w,k,N,R){const K=new Date(w.setDate(w.getDate()+k));let G=[],ye=!1;if((!(0,i.le)(K)&&K.getMonth())===(!(0,i.le)(this.currentDate)&&this.currentDate.getMonth())){let ee;ee="Gregorian"===this.calendarMode?this.renderDays(K):this.islamicModule.islamicRenderDays(this.currentDate,K),G=ee.filter(te=>te.classList.contains(ve))}else G=this.tableBodyElement.querySelectorAll("td."+ve);if(+K<=+N&&+K>=+R&&G.length)for(let ee=0;ee<G.length&&(ye=+K==+new Date(parseInt(G[ee].id,0)),!ye);ee++);return ye}getMaxDays(w){let k;const N=new Date(this.checkValue(w));k=28;const R=N.getMonth();for(;N.getMonth()===R;)++k,N.setDate(k);return k-1}setDateDecade(w,k){w.setFullYear(k),this.setProperties({value:new Date(this.checkValue(w))},!0)}setDateYear(w,k){w.setFullYear(k.getFullYear(),k.getMonth(),w.getDate()),k.getMonth()!==w.getMonth()&&(w.setDate(0),this.currentDate=new Date(this.checkValue(k))),this.setProperties({value:new Date(this.checkValue(w))},!0)}compareMonth(w,k){let N;return N=w.getFullYear()>k.getFullYear()?1:w.getFullYear()<k.getFullYear()?-1:w.getMonth()===k.getMonth()?0:w.getMonth()>k.getMonth()?1:-1,N}checkValue(w){return w instanceof Date?w.toUTCString():""+w}checkView(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)}getDate(w,k){return k&&(w=new Date(w.toLocaleString("en-US",{timeZone:k}))),w}};return Li([(0,i.Z9)(new Date(1900,0,1))],Ge.prototype,"min",void 0),Li([(0,i.Z9)(!0)],Ge.prototype,"enabled",void 0),Li([(0,i.Z9)(null)],Ge.prototype,"cssClass",void 0),Li([(0,i.Z9)(new Date(2099,11,31))],Ge.prototype,"max",void 0),Li([(0,i.Z9)(null)],Ge.prototype,"firstDayOfWeek",void 0),Li([(0,i.Z9)("Gregorian")],Ge.prototype,"calendarMode",void 0),Li([(0,i.Z9)("Month")],Ge.prototype,"start",void 0),Li([(0,i.Z9)("Month")],Ge.prototype,"depth",void 0),Li([(0,i.Z9)(!1)],Ge.prototype,"weekNumber",void 0),Li([(0,i.Z9)("FirstDay")],Ge.prototype,"weekRule",void 0),Li([(0,i.Z9)(!0)],Ge.prototype,"showTodayButton",void 0),Li([(0,i.Z9)("Short")],Ge.prototype,"dayHeaderFormat",void 0),Li([(0,i.Z9)(!1)],Ge.prototype,"enablePersistence",void 0),Li([(0,i.Z9)(null)],Ge.prototype,"keyConfigs",void 0),Li([(0,i.Z9)(null)],Ge.prototype,"serverTimezoneOffset",void 0),Li([(0,i.ju)()],Ge.prototype,"created",void 0),Li([(0,i.ju)()],Ge.prototype,"destroyed",void 0),Li([(0,i.ju)()],Ge.prototype,"navigated",void 0),Li([(0,i.ju)()],Ge.prototype,"renderDayCell",void 0),Ge=Li([i.Zl],Ge),Ge})(),Us=(()=>{let Ge=class extends us{constructor(w,k){super(w,k)}render(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&(0,i._y)("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!(0,i.le)(this.values)&&this.values.length>0){const w=[],k=[];for(let N=0;N<this.values.length;N++)-1===w.indexOf(+this.values[N])&&(w.push(+this.values[N]),k.push(this.values[N]));this.setProperties({values:k},!0);for(let N=0;N<this.values.length;N++)if(!this.checkDateValue(this.values[N]))if("string"==typeof this.values[N]&&this.checkDateValue(new Date(this.checkValue(this.values[N])))){const R=new Date(this.checkValue(this.values[N]));this.values.splice(N,1),this.values.splice(N,0,R)}else this.values.splice(N,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),super.render(),"calendar"===this.getModuleName()){const w=(0,i.oq)(this.element,"form");w&&i.bi.add(w,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()}setEnable(w){w?(0,i.IV)([this.element],ve):(0,i.cn)([this.element],ve)}setClass(w,k){(0,i.le)(k)||(k=k.replace(/\s+/g," ").trim()),(0,i.le)(w)||(w=w.replace(/\s+/g," ").trim()),!(0,i.le)(k)&&""!==k&&(0,i.IV)([this.element],k.split(" ")),(0,i.le)(w)||(0,i.cn)([this.element],w.split(" "))}isDayLightSaving(){const w=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),k=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(k,w)}setTimeZone(w){if(!(0,i.le)(this.serverTimezoneOffset)&&this.value){let R=w+(new Date).getTimezoneOffset()/60;R=this.isDayLightSaving()?R--:R,this.value=new Date(this.value.getTime()+60*R*60*1e3)}}formResetHandler(){this.setProperties({value:null},!0)}validateDate(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),super.validateDate(this.value),!(0,i.le)(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)}minMaxUpdate(){"calendar"===this.getModuleName()&&(!(0,i.le)(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!(0,i.le)(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||(0,i.le)(this.value)?super.minMaxUpdate(this.value):!(0,i.le)(this.value)&&this.value<this.min&&this.min<=this.max?super.minMaxUpdate(this.min):!(0,i.le)(this.value)&&this.value>this.max&&this.min<=this.max&&super.minMaxUpdate(this.max)}generateTodayVal(w){let k=new Date;return(0,i.le)(this.timezone)||(k=super.getDate(k,this.timezone)),w&&(0,i.le)(this.timezone)?(k.setHours(w.getHours()),k.setMinutes(w.getMinutes()),k.setSeconds(w.getSeconds()),k.setMilliseconds(w.getMilliseconds())):k=new Date(k.getFullYear(),k.getMonth(),k.getDate(),0,0,0,0),k}todayButtonClick(w){if(this.showTodayButton){const k=this.generateTodayVal(this.value);if(this.setProperties({value:k},!0),this.isTodayClicked=!0,this.todayButtonEvent=w,this.isMultiSelection){const N=this.copyValues(this.values);super.checkPresentDate(k,this.values)||(N.push(k),this.setProperties({values:N}))}super.todayButtonClick(w,new Date(+this.value))}}keyActionHandle(w){super.keyActionHandle(w,this.value,this.isMultiSelection)}preRender(){this.changeHandler=w=>{this.triggerChange(w)},this.checkView(),super.preRender(this.value)}createContent(){this.previousDate=this.value,this.previousDateTime=this.value,super.createContent()}minMaxDate(w){return super.minMaxDate(w)}renderMonths(w,k,N){super.renderMonths(w,this.value,N)}renderDays(w,k,N,R,K){const G=super.renderDays(w,this.value,this.isMultiSelection,this.values,K);return this.isMultiSelection&&super.validateValues(this.isMultiSelection,this.values),G}renderYears(w){"Gregorian"===this.calendarMode?super.renderYears(w,this.value):this.islamicModule.islamicRenderYears(w,this.value)}renderDecades(w){"Gregorian"===this.calendarMode?super.renderDecades(w,this.value):this.islamicModule.islamicRenderDecade(w,this.value)}renderTemplate(w,k,N,R){"Gregorian"===this.calendarMode?super.renderTemplate(w,k,N,R,this.value):this.islamicModule.islamicRenderTemplate(w,k,N,R,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}clickHandler(w){const k=w.currentTarget;if(this.isPopupClicked=!0,k.classList.contains(Lt))if(this.isMultiSelection){const R=this.copyValues(this.values);R.push(this.getIdValue(w,null)),this.setProperties({values:R},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(w,null)},!0);const N=this.currentView();super.clickHandler(w,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!(0,i.le)(this.tableBodyElement.querySelectorAll("."+ue)[0])&&"Year"===N&&this.tableBodyElement.querySelectorAll("."+ue)[0].classList.remove(ue)}switchView(w,k,N,R){super.switchView(w,k,this.isMultiSelection,R)}getModuleName(){return super.getModuleName(),"calendar"}getPersistData(){return super.getPersistData(),this.addOnPersist(["value","values"])}onPropertyChanged(w,k){this.effect="",this.rangeValidation(this.min,this.max);for(const N of Object.keys(w))switch(N){case"value":this.isDateSelected&&("string"==typeof w.value?this.setProperties({value:new Date(this.checkValue(w.value))},!0):w.value=new Date(this.checkValue(w.value)),isNaN(+this.value)&&this.setProperties({value:k.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof w.values||"number"==typeof w.values)this.setProperties({values:null},!0);else{const R=this.copyValues(this.values);for(let K=0;K<R.length;K++){const G=R[K];this.checkDateValue(G)&&!super.checkPresentDate(G,R)&&R.push(G)}this.setProperties({values:R},!0),this.values.length>0&&this.setProperties({value:w.values[w.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:w.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(w.cssClass,k.cssClass);break;default:super.onPropertyChanged(w,k,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}destroy(){if(super.destroy(),"calendar"===this.getModuleName()){const w=(0,i.oq)(this.element,"form");w&&i.bi.remove(w,"reset",this.formResetHandler.bind(this))}}navigateTo(w,k,N){this.minMaxUpdate(),super.navigateTo(w,k,N)}currentView(){return super.currentView()}addDate(w){if("string"!=typeof w&&"number"!=typeof w){let k=this.copyValues(this.values);if("object"==typeof w&&w.length>0){const N=w;for(let R=0;R<N.length;R++)this.checkDateValue(N[R])&&!super.checkPresentDate(N[R],k)&&(!(0,i.le)(k)&&k.length>0?k.push(N[R]):k=[new Date(+N[R])])}else this.checkDateValue(w)&&!super.checkPresentDate(w,k)&&(!(0,i.le)(k)&&k.length>0?k.push(w):k=[new Date(+w)]);this.setProperties({values:k},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,k),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}removeDate(w){if("string"!=typeof w&&"number"!=typeof w&&!(0,i.le)(this.values)&&this.values.length>0){const k=this.copyValues(this.values);if("object"==typeof w&&w.length>0){const N=w;for(let R=0;R<N.length;R++)for(let K=0;K<k.length;K++)+k[K]==+N[R]&&k.splice(K,1)}else for(let N=0;N<k.length;N++)+k[N]==+w&&k.splice(N,1);this.setProperties({values:k},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}setTodayDate(w){const k=new Date(+w);this.setProperties({value:k},!0),super.todayButtonClick(null,k,!0)}update(){this.validateDate(),this.minMaxUpdate(),super.setValueUpdate()}selectDate(w,k,N){super.selectDate(w,k,N,this.isMultiSelection,this.values),this.isMultiSelection&&!(0,i.le)(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(w)}changeEvent(w){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))}triggerChange(w){!(0,i.le)(this.todayButtonEvent)&&this.isTodayClicked&&(w=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=w||null,this.changedArgs.isInteracted=!(0,i.le)(w),(0,i.le)(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?!(0,i.le)(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(w),this.previousValues=this.values.length):this.changeEvent(w)}};return Li([(0,i.Z9)(null)],Ge.prototype,"value",void 0),Li([(0,i.Z9)(null)],Ge.prototype,"values",void 0),Li([(0,i.Z9)(!1)],Ge.prototype,"isMultiSelection",void 0),Li([(0,i.ju)()],Ge.prototype,"change",void 0),Ge=Li([i.Zl],Ge),Ge})();var di=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const hi="e-datepicker",As="e-popup-wrapper",Ot="e-input-focus",bi="e-error",Ti="e-active",ns="e-date-overflow",Bn="e-selected",Dn="e-non-edit",In=["title","class","style"];let js=class extends Us{constructor(p,w){super(p,w),this.previousElementValue="",this.isDateIconClicked=!1,this.isAltKeyPressed=!1,this.isInteracted=!0,this.invalidValueString=null,this.checkPreviousValue=null,this.maskedDateValue="",this.isAngular=!1,this.preventChange=!1,this.isIconClicked=!1,this.isDynamicValueChanged=!1,this.moduleName=this.getModuleName(),this.datepickerOptions=p}render(){this.initialize(),this.bindEvents(),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)}setTimeZone(p){if(!(0,i.le)(this.serverTimezoneOffset)&&this.value){let N=p+(new Date).getTimezoneOffset()/60;N=this.isDayLightSaving()?N--:N,this.value=new Date(this.value.getTime()+60*N*60*1e3),this.updateInput()}}isDayLightSaving(){const p=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),w=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(p,w)}setAllowEdit(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):(0,i.Y4)(this.inputElement,{readonly:""}),this.updateIconState()}updateIconState(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&(0,i.IV)([this.inputWrapper.container],[Dn]):""===this.inputElement.value?(0,i.IV)([this.inputWrapper.container],[Dn]):(0,i.cn)([this.inputWrapper.container],[Dn])}initialize(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=(0,i.le)(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value}createInput(){const p={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){const N={placeholder:this.placeholder};this.globalize=new i.eC(this.locale),this.l10n=new i.E7("datepicker",N,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}let w=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(w=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Ue.II.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:w,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),(0,i.Y4)(this.inputElement,p),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),Ue.II.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),(0,i.cn)([this.inputWrapper.container],"e-date-wrapper")}updateInput(p=!1){let w;if(this.value&&!this.isCalendar()&&!p&&this.disabledDates(),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(super.validateDate(),this.minMaxUpdates(),super.minMaxUpdate()),!(0,i.le)(this.value)){const k=this.value;let N;const R=(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?N=this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:R,type:"dateTime",skeleton:"yMd"}:{format:R,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(w="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},N=this.globalize.formatDate(this.value,w)),+k<=+this.max&&+k>=+this.min)this.updateInputValue(N);else{const K=+k>=+this.max||!+this.value||!+this.value||+k<=+this.min;!this.strictMode&&K&&this.updateInputValue(N)}}(0,i.le)(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&(0,i.le)(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()}minMaxUpdates(){!(0,i.le)(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!(0,i.le)(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})}checkStringValue(p){let w=null,k=null,N=null;if("datetimepicker"===this.getModuleName()){const R=new i.eC(this.locale);"Gregorian"===this.calendarMode?(k={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},N={format:R.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(k={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},N={format:R.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else k="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return w=this.checkDateValue(this.globalize.parseDate(p,k)),(0,i.le)(w)&&"datetimepicker"===this.getModuleName()&&(w=this.checkDateValue(this.globalize.parseDate(p,N))),w}checkInvalidValue(p){if(!(p instanceof Date||(0,i.le)(p))){let w=null,k=p;"number"==typeof p&&(k=p.toString());let N=null,R=null;if("datetimepicker"===this.getModuleName()){const G=new i.eC(this.locale);"Gregorian"===this.calendarMode?(N={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},R={format:G.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(N={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},R={format:G.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else N="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};let K=!1;if("string"!=typeof k)k=null,K=!0;else if("string"==typeof k&&(k=k.trim()),w=this.checkStringValue(k),!w){let G=null,ye=null;G=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ye=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!G.test(k)&&!ye.test(k)||/^[a-zA-Z0-9- ]*$/.test(k)||isNaN(+new Date(this.checkValue(k)))?K=!0:w=new Date(k)}K?(this.strictMode||(this.invalidValueString=k),this.setProperties({value:null},!0)):this.setProperties({value:w},!0)}}bindInputEvent(){(!(0,i.le)(this.formatString)||this.enableMask)&&(this.enableMask||-1===this.formatString.indexOf("y")?i.bi.add(this.inputElement,"input",this.inputHandler,this):i.bi.remove(this.inputElement,"input",this.inputHandler))}bindEvents(){i.bi.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),i.bi.add(this.inputElement,"mouseup",this.mouseUpHandler,this),i.bi.add(this.inputElement,"focus",this.inputFocusHandler,this),i.bi.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&i.bi.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),i.bi.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&i.bi.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new i.nv(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}keydownHandler(p){switch(p.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&("Delete"!==p.code&&p.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:p}))}}unBindEvents(){i.bi.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),i.bi.remove(this.inputElement,"mouseup",this.mouseUpHandler),i.bi.remove(this.inputElement,"focus",this.inputFocusHandler),i.bi.remove(this.inputElement,"blur",this.inputBlurHandler),i.bi.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&i.bi.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&i.bi.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&i.bi.remove(this.formElement,"reset",this.resetFormHandler)}resetFormHandler(){if(this.enabled&&!this.inputElement.disabled){let p=this.inputElement.getAttribute("value");("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(p="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(p),this.errorClass())}}restoreValue(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=(0,i.le)(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})}inputChangeHandler(p){!this.enabled||p.stopPropagation()}bindClearEvent(){this.showClearButton&&this.inputWrapper.clearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(p){!this.enabled||(p.preventDefault(),this.clear(p))}mouseUpHandler(p){this.enableMask&&(p.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))}clear(p){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:p}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(p),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"})}preventEventBubbling(p){p.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")}updateInputValue(p){Ue.II.setValue(p,this.inputElement,this.floatLabelType,this.showClearButton)}dateIconHandler(p){!this.enabled||(this.isIconClicked=!0,i.AR.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),p.preventDefault(),this.readonly||(this.isCalendar()?this.hide(p):(this.isDateIconClicked=!0,this.show(null,p),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),(0,i.cn)([this.inputWrapper.container],[Ot]),(0,i.cn)(this.inputWrapper.buttons,Ti))),this.isIconClicked=!1)}updateHtmlAttributeToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const p of Object.keys(this.htmlAttributes))if(!(0,i.le)(this.htmlAttributes[p])&&In.indexOf(p)>-1)if("class"===p){const w=this.htmlAttributes[p].replace(/\s+/g," ").trim();""!==w&&(0,i.cn)([this.inputWrapper.container],w.split(" "))}else if("style"===p){let w=this.inputWrapper.container.getAttribute(p);(0,i.le)(w)?w=this.htmlAttributes[p]:";"===w.charAt(w.length-1)?w+=this.htmlAttributes[p]:w=w+";"+this.htmlAttributes[p],this.inputWrapper.container.setAttribute(p,w)}else this.inputWrapper.container.setAttribute(p,this.htmlAttributes[p])}updateHtmlAttributeToElement(){if(!(0,i.le)(this.htmlAttributes))for(const p of Object.keys(this.htmlAttributes))In.indexOf(p)<0&&this.inputElement.setAttribute(p,this.htmlAttributes[p])}updateCssClass(p,w){(0,i.le)(w)||(w=w.replace(/\s+/g," ").trim()),(0,i.le)(p)||(p=p.replace(/\s+/g," ").trim()),Ue.II.setCssClass(p,[this.inputWrapper.container],w),this.popupWrapper&&Ue.II.setCssClass(p,[this.popupWrapper],w)}calendarKeyActionHandle(p){switch(p.action){case"escape":this.isCalendar()?this.hide(p):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,p),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(p)}}inputFocusHandler(){if(!this.enabled)return;this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);const p={model:this};this.isDateIconClicked=!1,this.trigger("focus",p),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}inputHandler(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})}inputBlurHandler(p){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&(0,i.le)(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(p),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&this.inputElement.value==this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(p),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new i.nv(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)}documentHandler(p){!(0,i.le)(this.popupObj)&&(this.inputWrapper.container.contains(p.target)||this.popupObj.element&&this.popupObj.element.contains(p.target))&&"touchstart"!==p.type&&p.preventDefault();const w=p.target;(0,i.oq)(w,".e-datepicker.e-popup-wrapper")||(0,i.oq)(w,".e-input-group")===this.inputWrapper.container||w.classList.contains("e-day")?(0,i.oq)(w,".e-datepicker.e-popup-wrapper")&&(w.classList.contains("e-day")&&!(0,i.le)(p.target.parentElement)&&p.target.parentElement.classList.contains("e-selected")&&(0,i.oq)(w,".e-content")&&(0,i.oq)(w,".e-content").classList.contains("e-"+this.depth.toLowerCase())||(0,i.oq)(w,".e-footer-container")&&w.classList.contains("e-today")&&w.classList.contains("e-btn")&&+new Date(+this.value)==+super.generateTodayVal(this.value))&&this.hide(p):(this.hide(p),this.focusOut())}inputKeyActionHandle(p){const w=this.currentView();switch(p.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(p),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(p),"datepicker"===this.getModuleName()&&this.show(null,p);break;case"escape":this.hide(p);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(p),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(p),this.isCalendar()&&(p.preventDefault(),p.stopPropagation());break;case"tab":case"shiftTab":let k=this.inputElement.selectionStart,N=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){let R=this.inputElement.value.length;(0==k&&N==R||N!==R&&"tab"==p.action||0!==k&&"shiftTab"==p.action)&&p.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:p}),k=this.inputElement.selectionStart,N=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(p),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=k,this.inputElement.selectionEnd=N),this.hide(p);break;default:this.defaultAction(p),"select"===p.action&&w===this.depth&&this.hide(p)}}defaultAction(p){this.previousDate=!(0,i.le)(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(super.keyActionHandle(p),this.isCalendar()&&(0,i.Y4)(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))}popupUpdate(){if(((0,i.le)(this.value)&&!(0,i.le)(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+Bn).length>0&&(0,i.IV)(this.popupObj.element.querySelectorAll("."+Bn),[Bn]),!(0,i.le)(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){const p=new Date(this.checkValue(this.value));super.navigateTo("Month",p)}}strictModeUpdate(){let p,w,k,N;p="datetimepicker"===this.getModuleName()?(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString:(0,i.le)(this.formatString)?this.formatString:this.formatString.replace("dd","d"),(0,i.le)(p)||p.split("M").length-1<3&&(p=p.replace("MM","M")),"datetimepicker"===this.getModuleName()?k="Gregorian"===this.calendarMode?{format:(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(w="Gregorian"===this.calendarMode?{format:p,type:"dateTime",skeleton:"yMd"}:{format:p,type:"dateTime",skeleton:"yMd",calendar:"islamic"},k=w),"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,k))?N=this.globalize.parseDate(this.inputElement.value,k):(w="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},N=this.globalize.parseDate(this.inputElement.value,w)):(N=this.globalize.parseDate(this.inputElement.value,k),N=!(0,i.le)(N)&&isNaN(+N)?null:N,!(0,i.le)(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&N.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&N&&N.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&N?(this.updateInputValue(this.globalize.formatDate(N,k)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:N},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:N},!0),this.strictMode&&!N&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),(0,i.le)(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))}createCalendar(){this.popupWrapper=this.createElement("div",{className:hi+" "+As}),(0,i.le)(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),i.AR.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=hi+" e-date-modal",document.body.className+=" "+ns,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new u.GI(this.popupWrapper,{content:this.calendarElement,relateTo:i.AR.isDevice?document.body:this.inputWrapper.container,position:i.AR.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:i.AR.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:()=>{"datetimepicker"!==this.getModuleName()&&document.activeElement!==this.inputElement&&(this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,this.keyConfigs),this.calendarElement.children[1].firstElementChild.focus(),this.calendarKeyboardModules=new i.nv(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.calendarKeyboardModules=new i.nv(this.inputWrapper.container.children[this.index],{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}))},close:()=>{this.isDateIconClicked&&this.inputWrapper.container.children[this.index].focus(),this.value&&this.disabledDates(),this.popupObj&&this.popupObj.destroy(),this.resetCalendar(),(0,i.og)(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.preventArgs=null,this.calendarKeyboardModules=null,this.setAriaAttributes()},targetExitViewport:()=>{i.AR.isDevice||this.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()}setAriaDisabled(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)}modelHeader(){let p;const w=this.createElement("div",{className:"e-model-header"}),k=this.createElement("h1",{className:"e-model-year"}),N=this.createElement("div"),R=this.createElement("span",{className:"e-model-day"}),K=this.createElement("span",{className:"e-model-month"});p="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},k.textContent=""+this.globalize.formatDate(this.value||new Date,p),p="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},R.textContent=this.globalize.formatDate(this.value||new Date,p)+", ",p="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},K.textContent=""+this.globalize.formatDate(this.value||new Date,p),w.appendChild(k),N.appendChild(R),N.appendChild(K),w.appendChild(N),this.calendarElement.insertBefore(w,this.calendarElement.firstElementChild)}changeTrigger(p){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=p||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!(0,i.le)(p),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)}navigatedEvent(){this.trigger("navigated",this.navigatedArgs)}changeEvent(p){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(p),this.changedArgs.event=p||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(p),this.previousElementValue=this.inputElement.value,this.errorClass())}requiredModules(){const p=[];return this&&p.push({args:[this],member:"islamic"}),this.enableMask&&p.push({args:[this],member:"MaskedDateTime"}),p}selectCalendar(p){let w,k,N;k="datetimepicker"===this.getModuleName()&&(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(N="Gregorian"===this.calendarMode?{format:k,type:"dateTime",skeleton:"yMd"}:{format:k,type:"dateTime",skeleton:"yMd",calendar:"islamic"},w=this.globalize.formatDate(this.changedArgs.value,N)):(N="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},w=this.globalize.formatDate(this.changedArgs.value,N)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),(0,i.le)(w)||(this.updateInputValue(w),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))}isCalendar(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+As))}setWidth(p){this.inputWrapper.container.style.width="number"==typeof p?(0,i.Ac)(this.width):"string"==typeof p?p.match(/px|%|em/)?this.width:(0,i.Ac)(this.width):"100%"}show(p,w){if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){let N,k=!0;(0,i.le)(this.value)||+this.value>=+this.min&&+this.value<=+this.max?N=this.value||null:(N=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(super.render(),this.setProperties({value:N||null},!0),this.previousDate=N,this.createCalendar()),i.AR.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:()=>{k=!1},popup:this.popupObj,event:w||null,cancel:!1,appendTo:i.AR.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,K=>{if(this.preventArgs=K,k&&!this.preventArgs.cancel){(0,i.cn)(this.inputWrapper.buttons,Ti),this.preventArgs.appendTo.appendChild(this.popupWrapper),this.popupObj.refreshPosition(this.inputElement);this.popupObj.show(new i.fw({name:"FadeIn",duration:i.AR.isDevice?0:300}),1e3===this.zIndex?this.element:null),super.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,i.AR.isDevice),this.setAriaAttributes()}else this.popupObj.destroy(),this.popupWrapper=this.popupObj=null;!(0,i.le)(this.inputElement)&&""===this.inputElement.value&&!(0,i.le)(this.tableBodyElement)&&this.tableBodyElement.querySelectorAll("td.e-selected").length>0&&((0,i.cn)([this.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),(0,i.IV)(this.tableBodyElement.querySelectorAll("td.e-selected"),Bn)),i.bi.add(document,"mousedown touchstart",this.documentHandler,this)})}}hide(p){if((0,i.le)(this.popupWrapper))i.AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{let w=!0;this.preventArgs={preventDefault:()=>{w=!1},popup:this.popupObj,event:p||null,cancel:!1},(0,i.IV)(this.inputWrapper.buttons,Ti),(0,i.IV)([document.body],ns);const k=this.preventArgs;this.isCalendar()?this.trigger("close",k,N=>{this.closeEventCallback(w,N)}):this.closeEventCallback(w,k)}}closeEventCallback(p,w){this.preventArgs=w,this.isCalendar()&&p&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),(0,i.IV)(this.inputWrapper.buttons,Ti)),this.setAriaAttributes(),i.AR.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),i.AR.isDevice&&((0,i.le)(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),i.bi.remove(document,"mousedown touchstart",this.documentHandler),i.AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}focusIn(p){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),(0,i.cn)([this.inputWrapper.container],[Ot]))}focusOut(){document.activeElement===this.inputElement&&((0,i.IV)([this.inputWrapper.container],[Ot]),this.inputElement.blur())}currentView(){let p;return this.calendarElement&&(p=super.currentView()),p}navigateTo(p,w){this.calendarElement&&super.navigateTo(p,w)}destroy(){this.unBindEvents(),super.destroy(),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&super.destroy(),this.inputElement&&(Ue.II.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),(0,i.le)(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),i.bi.remove(this.inputElement,"blur",this.inputBlurHandler),i.bi.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&(0,i.og)(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),(0,i.IV)([this.inputElement],["e-input"])),(0,i.IV)([this.element],[hi]),(0,i.og)(this.inputWrapper.container)),this.formElement&&i.bi.remove(this.formElement,"reset",this.resetFormHandler)}ensureInputAttribute(){const p=[];for(let w=0;w<this.inputElement.attributes.length;w++)p[w]=this.inputElement.attributes[w].name;for(let w=0;w<p.length;w++)(0,i.le)(this.inputElementCopy.getAttribute(p[w]))?("value"===p[w].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(p[w])):("value"===p[w].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(p[w])),this.inputElement.setAttribute(p[w],this.inputElementCopy.getAttribute(p[w])))}preRender(){this.inputElementCopy=this.element.cloneNode(!0),(0,i.IV)([this.inputElementCopy],[hi,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=(0,i.oq)(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=(0,i.QI)("ej2-datetimepicker"),null!==this.ngTag&&(0,i.Y4)(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=(0,i.QI)("ej2-datepicker"),null!==this.ngTag&&(0,i.Y4)(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),super.preRender()}getDefaultKeyConfig(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs}validationAttribute(p,w){const k=p.getAttribute("name")?p.getAttribute("name"):p.getAttribute("id");w.setAttribute("name",k),p.removeAttribute("name");const N=["required","aria-required","form"];for(let R=0;R<N.length;R++){if((0,i.le)(p.getAttribute(N[R])))continue;const K=p.getAttribute(N[R]);w.setAttribute(N[R],K),p.removeAttribute(N[R])}}checkFormat(){const p=new i.eC(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||(0,i.le)(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{const w=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?p.getDatePattern({skeleton:w,type:"dateTime"}):p.getDatePattern({skeleton:w,type:"date"})}else this.formatString=null}checkHtmlAttributes(p){this.globalize=new i.eC(this.locale),this.checkFormat(),this.checkView();const w=p?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];let k;k="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(const N of w)if(!(0,i.le)(this.inputElement.getAttribute(N)))switch(N){case"disabled":if((0,i.le)(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||p){const R=!("disabled"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N));this.setProperties({enabled:R},!p)}break;case"readonly":if((0,i.le)(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||p){const R="readonly"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N);this.setProperties({readonly:R},!p)}break;case"placeholder":((0,i.le)(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||p)&&this.setProperties({placeholder:this.inputElement.getAttribute(N)},!p);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(N));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(N));break;case"value":if((0,i.le)(this.datepickerOptions)||void 0===this.datepickerOptions.value||p){const R=this.inputElement.getAttribute(N);this.setProperties((0,i.sO)(N,this.globalize.parseDate(R,k),{}),!p)}break;case"min":if(+this.min==+new Date(1900,0,1)||p){const R=this.inputElement.getAttribute(N);this.setProperties((0,i.sO)(N,this.globalize.parseDate(R),{}),!p)}break;case"max":if(+this.max==+new Date(2099,11,31)||p){const R=this.inputElement.getAttribute(N);this.setProperties((0,i.sO)(N,this.globalize.parseDate(R),{}),!p)}break;case"type":"text"!==this.inputElement.getAttribute(N)&&this.inputElement.setAttribute("type","text")}}getModuleName(){return"datepicker"}disabledDates(){let p,w;const k=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),N=this.previousDate;this.minMaxUpdates(),super.render(),this.previousDate=N;const K='*[id^="/id"]'.replace("/id",""+(k&&+k));let G;this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+k)&&this.setProperties({value:k},!0),(0,i.le)(this.calendarElement.querySelectorAll(K)[0])||this.calendarElement.querySelectorAll(K)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?(w=this.globalize.formatDate(k,"Gregorian"===this.calendarMode?{format:(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:(0,i.le)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),G=w):(p="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},G=this.globalize.formatDate(k,p)),this.popupObj||(this.updateInputValue(G),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))}setAriaAttributes(){this.isCalendar()?(Ue.II.addAttributes({"aria-expanded":"true"},this.inputElement),(0,i.Y4)(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(Ue.II.addAttributes({"aria-expanded":"false"},this.inputElement),(0,i.Y4)(this.inputElement,{"aria-activedescendant":"null"}))}errorClass(){const p='*[id^="/id"]'.replace("/id",""+ +this.value),w=this.calendarElement&&this.calendarElement.querySelectorAll(p)[0]&&this.calendarElement.querySelectorAll(p)[0].classList.contains("e-disabled");!(0,i.le)(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&(0,i.le)(this.value)||w?((0,i.cn)([this.inputWrapper.container],bi),(0,i.Y4)(this.inputElement,{"aria-invalid":"true"})):((0,i.IV)([this.inputWrapper.container],bi),(0,i.Y4)(this.inputElement,{"aria-invalid":"false"}))}onPropertyChanged(p,w){for(const k of Object.keys(p)){switch(k){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(p.value),p.value=this.value,this.previousElementValue=this.inputElement.value,(0,i.le)(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":Ue.II.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":Ue.II.setReadonly(this.readonly,this.inputElement);break;case"enabled":Ue.II.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new i.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Ue.II.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":Ue.II.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&super.onPropertyChanged(p,w);break;case"zIndex":this.setProperties({zIndex:p.zIndex},!0);break;case"cssClass":this.updateCssClass(p.cssClass,w.cssClass);break;case"showClearButton":Ue.II.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(p.width);break;case"floatLabelType":this.floatLabelType=p.floatLabelType,Ue.II.removeFloating(this.inputWrapper),Ue.II.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&super.onPropertyChanged(p,w)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}}};di([(0,i.Z9)(null)],js.prototype,"width",void 0),di([(0,i.Z9)(null)],js.prototype,"value",void 0),di([(0,i.Z9)(null)],js.prototype,"cssClass",void 0),di([(0,i.Z9)(!1)],js.prototype,"strictMode",void 0),di([(0,i.Z9)(null)],js.prototype,"format",void 0),di([(0,i.Z9)(!0)],js.prototype,"enabled",void 0),di([(0,i.Z9)({})],js.prototype,"htmlAttributes",void 0),di([(0,i.Z9)(null)],js.prototype,"values",void 0),di([(0,i.Z9)(!1)],js.prototype,"isMultiSelection",void 0),di([(0,i.Z9)(!0)],js.prototype,"showClearButton",void 0),di([(0,i.Z9)(!0)],js.prototype,"allowEdit",void 0),di([(0,i.Z9)(null)],js.prototype,"keyConfigs",void 0),di([(0,i.Z9)(!1)],js.prototype,"enablePersistence",void 0),di([(0,i.Z9)(1e3)],js.prototype,"zIndex",void 0),di([(0,i.Z9)(!1)],js.prototype,"readonly",void 0),di([(0,i.Z9)(null)],js.prototype,"placeholder",void 0),di([(0,i.Z9)("Never")],js.prototype,"floatLabelType",void 0),di([(0,i.Z9)(null)],js.prototype,"serverTimezoneOffset",void 0),di([(0,i.Z9)(!1)],js.prototype,"openOnFocus",void 0),di([(0,i.Z9)(!1)],js.prototype,"enableMask",void 0),di([(0,i.Z9)({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],js.prototype,"maskPlaceholder",void 0),di([(0,i.ju)()],js.prototype,"open",void 0),di([(0,i.ju)()],js.prototype,"cleared",void 0),di([(0,i.ju)()],js.prototype,"close",void 0),di([(0,i.ju)()],js.prototype,"blur",void 0),di([(0,i.ju)()],js.prototype,"focus",void 0),di([(0,i.ju)()],js.prototype,"created",void 0),di([(0,i.ju)()],js.prototype,"destroyed",void 0),js=di([i.Zl],js);var Yt=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const Ls="e-input-group",Rs="e-popup",gi="e-left-calendar",je="e-right-calendar",ti="e-daterangepicker",Fi="e-error",as="e-active",Ns="e-start-date",bn="e-end-date",pn="e-start-btn",ms="e-input-focus",Cs="e-range-hover",Yn="e-other-month",Ln="e-start-label",Rr="e-end-label",rs="e-disabled",hn="e-selected",cn="e-calendar",ln="e-next",qn="e-prev",$n="e-header",gr="e-title",tn="e-icon-container",mr="e-date-range-container",wr="e-presets",Jr="e-today",Nr="e-focused-date",Vr="e-content",Zn="e-day-span",_r="e-week-number",Ur="e-date-disabled",Hr="e-icon-disabled",Io="e-device",Xn="e-overlay",zn="e-list-item",to="e-hover",Eo="e-range-overflow",oo="e-non-edit",Yr="e-daterange-hidden",Bs=["title","class","style"];class uo extends i.rt{}Yt([(0,i.Z9)()],uo.prototype,"label",void 0),Yt([(0,i.Z9)()],uo.prototype,"start",void 0),Yt([(0,i.Z9)()],uo.prototype,"end",void 0);let $s=class extends us{constructor(p,w){super(p,w),this.isCustomRange=!1,this.isCustomWindow=!1,this.presetsItem=[],this.liCollections=[],this.previousEleValue="",this.isKeyPopup=!1,this.dateDisabled=!1,this.isRangeIconClicked=!1,this.isMaxDaysClicked=!1,this.disabledDays=[],this.preventBlur=!1,this.preventFocus=!1,this.invalidValueString=null,this.isAngular=!1,this.preventChange=!1,this.dateRangeOptions=p}render(){this.initialize(),this.setProperties({startDate:this.startValue},!0),this.setProperties({endDate:this.endValue},!0),this.setModelValue(),this.setDataAttribute(!1),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}preRender(){if(this.keyInputConfigs={altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",moveUp:"uparrow",moveDown:"downarrow",spacebar:"space"},this.defaultConstant={placeholder:this.placeholder,startLabel:"Start Date",endLabel:"End Date",customRange:"Custom Range",applyText:"Apply",cancelText:"Cancel",selectedDays:"Selected Days",days:"days"},this.isMobile=window.matchMedia("(max-width:550px)").matches,this.inputElement=this.element,this.angularTag=null,"EJS-DATERANGEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.cloneElement=this.element.cloneNode(!0),(0,i.IV)([this.cloneElement],[ti,"e-control","e-lib"]),this.updateHtmlAttributeToElement(),this.element.getAttribute("id")?null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):(this.element.id=(0,i.QI)("ej2-datetimepicker"),null!==this.angularTag&&(0,i.Y4)(this.inputElement,{id:this.element.id+"_input"})),this.checkInvalidRange(this.value),!this.invalidValueString&&"string"==typeof this.value){const p=this.value.split(" "+this.separator+" ");this.value=[new Date(p[0]),new Date(p[1])]}this.initProperty(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),super.preRender(),this.navNextFunction=this.navNextMonth.bind(this),this.navPrevFunction=this.navPrevMonth.bind(this),this.deviceNavNextFunction=this.deviceNavNext.bind(this),this.deviceNavPrevFunction=this.deviceNavPrevious.bind(this),this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue),this.formElement=(0,i.oq)(this.element,"form")}updateValue(){this.value&&this.value.length>0?(this.value[0]instanceof Date&&!isNaN(+this.value[0])?(this.setProperties({startDate:this.value[0]},!0),this.startValue=this.value[0]):"string"==typeof this.value[0]?0==+this.value[0]||isNaN(+new Date(this.checkValue(this.value[0])))?(this.startValue=null,this.setValue()):(this.setProperties({startDate:new Date(this.checkValue(this.value[0]))},!0),this.startValue=new Date(this.checkValue(this.value[0]))):(this.startValue=null,this.setValue()),this.value[1]instanceof Date&&!isNaN(+this.value[1])?(this.setProperties({endDate:this.value[1]},!0),this.endValue=this.value[1]):"string"==typeof this.value[1]?0==+this.value[0]||isNaN(+new Date(this.checkValue(this.value[0])))?(this.setProperties({endDate:null},!0),this.endValue=null,this.setValue()):(this.setProperties({endDate:new Date(this.checkValue(this.value[1]))},!0),this.endValue=new Date(this.checkValue(this.value[1])),this.setValue()):(this.setProperties({endDate:null},!0),this.endValue=null,this.setValue())):this.value&&this.value.start?(this.value.start instanceof Date&&!isNaN(+this.value.start)?(this.setProperties({startDate:this.value.start},!0),this.startValue=this.value.start):"string"==typeof this.value.start?(this.setProperties({startDate:new Date(this.checkValue(this.value.start))},!0),this.startValue=new Date(this.checkValue(this.value.start))):(this.startValue=null,this.setValue()),this.value.end instanceof Date&&!isNaN(+this.value.end)?(this.setProperties({endDate:this.value.end},!0),this.endValue=this.value.end):"string"==typeof this.value.end?(this.setProperties({endDate:new Date(this.checkValue(this.value.end))},!0),this.endValue=new Date(this.checkValue(this.value.end)),this.setValue()):(this.setProperties({endDate:null},!0),this.endValue=null,this.setValue())):(0,i.le)(this.value)&&(this.endValue=this.checkDateValue(new Date(this.checkValue(this.endDate))),this.startValue=this.checkDateValue(new Date(this.checkValue(this.startDate))),this.setValue())}initProperty(){this.globalize=new i.eC(this.locale),this.checkFormat(),this.checkView(),((0,i.le)(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.updateValue()}checkFormat(){this.formatString=this.format?"string"==typeof this.format?this.format:""===this.format.skeleton||(0,i.le)(this.format.skeleton)?null:this.globalize.getDatePattern({skeleton:this.format.skeleton,type:"date"}):null}initialize(){null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.checkHtmlAttributes(!1),(0,i.TS)(this.defaultKeyConfigs,{shiftTab:"shift+tab"});const p=this.checkDateValue(new Date(this.checkValue(this.startValue)));this.setProperties({startDate:p},!0),this.setProperties({endValue:this.checkDateValue(new Date(this.checkValue(this.endValue)))},!0),this.setValue(),this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.l10n=new i.E7("daterangepicker",this.defaultConstant,this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.processPresets(),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setRangeAllowEdit(),this.bindEvents()}setDataAttribute(p){let w={};if(p)w=this.htmlAttributes;else for(let k=0;k<this.element.attributes.length;k++)w[this.element.attributes[k].name]=this.element.getAttribute(this.element.attributes[k].name);for(const k of Object.keys(w))0===k.indexOf("data")&&(this.firstHiddenChild.setAttribute(k,w[k]),this.secondHiddenChild.setAttribute(k,w[k]))}setRangeAllowEdit(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):(0,i.Y4)(this.inputElement,{readonly:""}),this.updateClearIconState()}updateClearIconState(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&(0,i.IV)([this.inputWrapper.container],[oo]):""===this.inputElement.value?(0,i.IV)([this.inputWrapper.container],[oo]):(0,i.cn)([this.inputWrapper.container],[oo])}validationAttribute(p,w){const k=p.getAttribute("name")?p.getAttribute("name"):p.getAttribute("id");w.setAttribute("name",k),p.removeAttribute("name");const N=["required","aria-required","form"];for(let R=0;R<N.length;R++){if((0,i.le)(p.getAttribute(N[R])))continue;const K=p.getAttribute(N[R]);w.setAttribute(N[R],K),p.removeAttribute(N[R])}}updateHtmlAttributeToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const p of Object.keys(this.htmlAttributes))if(Bs.indexOf(p)>-1)if("class"===p){const w=this.htmlAttributes[p].replace(/\s+/g," ").trim();""!==w&&(0,i.cn)([this.inputWrapper.container],w.split(" "))}else if("style"===p){let w=this.inputWrapper.container.getAttribute(p);w=(0,i.le)(w)?this.htmlAttributes[p]:w+this.htmlAttributes[p],this.inputWrapper.container.setAttribute(p,w)}else this.inputWrapper.container.setAttribute(p,this.htmlAttributes[p])}updateHtmlAttributeToElement(){if(!(0,i.le)(this.htmlAttributes))for(const p of Object.keys(this.htmlAttributes))Bs.indexOf(p)<0&&this.inputElement.setAttribute(p,this.htmlAttributes[p])}updateCssClass(p,w){(0,i.le)(w)||(w=w.replace(/\s+/g," ").trim()),(0,i.le)(p)||(p=p.replace(/\s+/g," ").trim()),Ue.II.setCssClass(p,[this.inputWrapper.container],w),this.popupWrapper&&Ue.II.setCssClass(p,[this.popupWrapper],w)}processPresets(){this.presetsItem=[];let p=0;if(!(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)){for(const N of this.presets){const R=N.label.replace(/\s+/g,"")+"_"+ ++p;this.presetsItem.push("string"==typeof N.end?{id:R,text:N.label,end:new Date(this.checkValue(N.end)),start:new Date(this.checkValue(N.start))}:{id:R,text:N.label,start:N.start,end:N.end})}const w=(0,i.le)(this.startValue)?null:new Date(+this.startValue),k=(0,i.le)(this.endValue)?null:new Date(+this.endValue);this.presetsItem.push({id:"custom_range",text:this.l10n.getConstant("customRange"),start:w,end:k}),!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&(this.isCustomRange=!0,this.activeIndex=this.presetsItem.length-1)}}bindEvents(){i.bi.add(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler,this),i.bi.add(this.inputElement,"focus",this.inputFocusHandler,this),i.bi.add(this.inputElement,"blur",this.inputBlurHandler,this),i.bi.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this),this.isMobile||(this.keyInputConfigs=(0,i.l7)(this.keyInputConfigs,this.keyConfigs),this.inputKeyboardModule=new i.nv(this.inputElement,{eventName:"keydown",keyAction:this.inputHandler.bind(this),keyConfigs:this.keyInputConfigs})),this.formElement&&i.bi.add(this.formElement,"reset",this.formResetHandler,this),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1}unBindEvents(){i.bi.remove(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler),i.bi.remove(this.inputElement,"blur",this.inputBlurHandler),i.bi.remove(this.inputElement,"focus",this.inputFocusHandler),i.bi.remove(this.inputElement,"change",this.inputChangeHandler),this.showClearButton&&this.inputWrapper.clearButton&&i.bi.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.isMobile||(0,i.le)(this.inputKeyboardModule)||this.inputKeyboardModule.destroy(),this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler),this.inputElement.tabIndex=-1}updateHiddenInput(){if(this.firstHiddenChild&&this.secondHiddenChild){const p={type:"datetime",skeleton:"yMd"};"string"==typeof this.startDate&&(this.startDate=this.globalize.parseDate(this.startDate,p)),"string"==typeof this.endDate&&(this.endDate=this.globalize.parseDate(this.endDate,p)),this.firstHiddenChild.value=this.startDate&&this.globalize.formatDate(this.startDate,p)||this.inputElement.value,this.secondHiddenChild.value=this.endDate&&this.globalize.formatDate(this.endDate,p)||this.inputElement.value,this.dispatchEvent(this.firstHiddenChild,"focusout"),this.dispatchEvent(this.firstHiddenChild,"change")}}inputChangeHandler(p){!this.enabled||(p.stopPropagation(),this.updateHiddenInput())}bindClearEvent(){this.showClearButton&&this.inputWrapper.clearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}resetHandler(p){if(!this.enabled)return;this.valueType=this.value,p.preventDefault(),this.clear();const w={event:p};this.setProperties({endDate:this.checkDateValue(this.endValue)},!0),this.setProperties({startDate:this.checkDateValue(this.startValue)},!0),this.trigger("cleared",w),this.changeTrigger(p),this.clearRange(),this.hide(p)}restoreValue(){this.previousEleValue=this.inputElement.value,this.previousStartValue=this.startValue,this.previousEndValue=this.endValue,this.valueType=null,this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue),this.setValue(),this.setModelValue()}formResetHandler(p){if(this.enabled&&this.formElement&&p.target===this.formElement&&!this.inputElement.disabled){let w=this.inputElement.getAttribute("value");(0,i.le)(this.startCopy)?(this.setProperties({value:null,startDate:null,endDate:null},!0),this.startValue=this.endValue=null):((0,i.le)(this.value)||(0,i.le)(this.value.start)?(this.setProperties({value:[this.startCopy,this.endCopy]},!0),this.startValue=this.value[0],this.endValue=this.value[1]):(this.setProperties({value:{start:this.startCopy,end:this.endCopy}},!0),this.startValue=this.value.start,this.endValue=this.value.end),this.setProperties({startDate:this.startValue,endDate:this.endValue},!0)),"EJS-DATERANGEPICKER"===this.element.tagName&&(this.setProperties({value:null,startDate:null,endDate:null},!0),w="",this.startValue=this.endValue=null,this.inputElement.setAttribute("value","")),this.restoreValue(),this.inputElement&&(Ue.II.setValue(w,this.inputElement,this.floatLabelType,this.showClearButton),this.errorClass())}}clear(){null!==this.startValue&&(this.startValue=null),null!==this.endValue&&(this.endValue=null),this.value&&this.value.start&&this.setProperties({value:{start:null,end:null}},!0),null!==this.value&&this.value.length>0&&this.setProperties({value:null},!0),Ue.II.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),(0,i.le)(this.applyButton)||(this.applyButton.disabled=this.applyButton.element.disabled=!0),this.removeSelection()}rangeIconHandler(p){!this.enabled||(this.isMobile&&this.inputElement.setAttribute("readonly",""),p.preventDefault(),this.targetElement=null,this.isPopupOpen()&&document.body.contains(this.popupObj.element)?this.applyFunction(p):(this.isRangeIconClicked=!0,this.inputWrapper.container.children[0].focus(),this.show(null,p),this.isMobile||(0,i.le)(this.leftCalendar)||(this.isRangeIconClicked=!1,this.calendarFocus(),this.isRangeIconClicked=!0),(0,i.cn)([this.inputWrapper.container],[ms])))}checkHtmlAttributes(p){this.globalize=new i.eC(this.locale);const w=p?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["startDate","endDate","minDays","maxDays","min","max","disabled","readonly","style","name","placeholder","type","value"],k={format:this.formatString,type:"date",skeleton:"yMd"};for(const N of w)if(!(0,i.le)(this.inputElement.getAttribute(N)))switch(N){case"disabled":if((0,i.le)(this.dateRangeOptions)||void 0===this.dateRangeOptions.enabled||p){const R="disabled"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N);this.setProperties({enabled:!R},!p)}break;case"readonly":if((0,i.le)(this.dateRangeOptions)||void 0===this.dateRangeOptions.readonly||p){const R="readonly"===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N);this.setProperties({readonly:R},!p)}break;case"placeholder":((0,i.le)(this.dateRangeOptions)||void 0===this.dateRangeOptions.placeholder||p)&&this.setProperties({placeholder:this.inputElement.getAttribute(N)},!p);break;case"value":if((0,i.le)(this.dateRangeOptions)||void 0===this.dateRangeOptions.value||p){const R=this.inputElement.getAttribute(N);this.setProperties((0,i.sO)(N,R,{}),!p)}break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(N));break;case"min":if((0,i.le)(this.min)||+this.min==+new Date(1900,0,1)||p){const R=this.globalize.parseDate(this.inputElement.getAttribute(N),k);this.setProperties((0,i.sO)(N,R,{}),!p)}break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(N));break;case"max":if((0,i.le)(this.max)||+this.max==+new Date(2099,11,31)||p){const R=this.globalize.parseDate(this.inputElement.getAttribute(N),k);this.setProperties((0,i.sO)(N,R,{}),!p)}break;case"startDate":if((0,i.le)(this.startDate)){const R=this.globalize.parseDate(this.inputElement.getAttribute(N),k);this.startValue=R,this.setValue()}break;case"endDate":if((0,i.le)(this.endDate)){const R=this.globalize.parseDate(this.inputElement.getAttribute(N),k);this.endValue=R,this.setValue()}break;case"minDays":(0,i.le)(this.minDays)&&this.setProperties((0,i.sO)(N,parseInt(this.inputElement.getAttribute(N),10),{}),!0);break;case"maxDays":(0,i.le)(this.maxDays)&&this.setProperties((0,i.sO)(N,parseInt(this.inputElement.getAttribute(N),10),{}),!0);break;case"type":"text"!==this.inputElement.getAttribute(N)&&this.inputElement.setAttribute("type","text")}}createPopup(){for(let w=0;w<this.presetsItem.length;w++)w!==this.presetsItem.length-1&&"custom_range"===this.presetsItem[w].id&&this.presetsItem.splice(w,1);this.activeIndex=this.presetsItem.length-1,this.isCustomRange=!0;for(let w=0;w<=this.presetsItem.length-2;w++){const k=this.presetsItem[w].start,N=this.presetsItem[w].end;this.startValue&&this.endValue&&+new Date(k.setHours(0,0,0,0))==+new Date(this.startValue.setHours(0,0,0,0))&&+new Date(N.setHours(0,0,0,0))==+new Date(this.endValue.setHours(0,0,0,0))&&(this.activeIndex=w,this.isCustomRange=!1)}this.popupWrapper=(0,i.az)("div",{id:this.element.id+"_popup",className:ti+" "+Rs}),this.adjustLongHeaderWidth();const p=!this.isCustomRange||this.isMobile;!(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)&&p?(this.isCustomWindow=!1,this.createPresets(),this.listRippleEffect(),this.renderPopup()):(this.isCustomWindow=!0,this.renderControl())}renderControl(){this.createControl(),this.bindCalendarEvents(),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),!(0,i.le)(this.endValue)&&!(0,i.le)(this.startValue)&&this.disabledDateRender(),this.updateHeader()}clearCalendarEvents(){i.bi.clearEvents(this.leftCalPrevIcon),i.bi.clearEvents(this.leftCalNextIcon),i.bi.clearEvents(this.rightCalPrevIcon),i.bi.clearEvents(this.rightCalNextIcon)}updateNavIcons(){super.iconHandler()}calendarIconEvent(){this.clearCalendarEvents(),this.leftCalPrevIcon&&!this.leftCalPrevIcon.classList.contains(rs)&&i.bi.add(this.leftCalPrevIcon,"mousedown",this.navPrevFunction),this.leftCalNextIcon&&!this.leftCalNextIcon.classList.contains(rs)&&i.bi.add(this.leftCalNextIcon,"mousedown",this.navNextFunction),this.rightCalPrevIcon&&!this.rightCalPrevIcon.classList.contains(rs)&&i.bi.add(this.rightCalPrevIcon,"mousedown",this.navPrevFunction),this.rightCalNextIcon&&!this.rightCalNextIcon.classList.contains(rs)&&i.bi.add(this.rightCalNextIcon,"mousedown",this.navNextFunction)}bindCalendarEvents(){this.isMobile?(this.deviceCalendarEvent(),i.bi.add(this.startButton.element,"click",this.deviceHeaderClick,this),i.bi.add(this.endButton.element,"click",this.deviceHeaderClick,this)):(this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.headerTitleElement=this.popupObj.element.querySelector("."+je+" ."+$n+" ."+gr),this.headerTitleElement=this.popupObj.element.querySelector("."+gi+" ."+$n+" ."+gr),this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,this.keyConfigs),this.leftKeyboardModule=new i.nv(this.leftCalendar,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs}),this.rightKeyboardModule=new i.nv(this.rightCalendar,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})),this.start===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate()}calendarIconRipple(){(0,i.qx)(this.leftCalPrevIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),(0,i.qx)(this.leftCalNextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),(0,i.qx)(this.rightCalPrevIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),(0,i.qx)(this.rightCalNextIcon,{selector:".e-next",duration:400,isCenterRipple:!0})}deviceCalendarEvent(){i.bi.clearEvents(this.nextIcon),i.bi.clearEvents(this.previousIcon),(0,i.qx)(this.nextIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),(0,i.qx)(this.previousIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.nextIcon&&!this.nextIcon.classList.contains(rs)&&i.bi.add(this.nextIcon,"mousedown",this.deviceNavNextFunction),this.previousIcon&&!this.previousIcon.classList.contains(rs)&&i.bi.add(this.previousIcon,"mousedown",this.deviceNavPrevFunction)}deviceNavNext(p){const w=(0,i.oq)(p.target,"."+cn);this.updateDeviceCalendar(w),this.navigateNext(p),this.deviceNavigation()}deviceNavPrevious(p){const w=(0,i.oq)(p.target,"."+cn);this.updateDeviceCalendar(w),this.navigatePrevious(p),this.deviceNavigation()}updateDeviceCalendar(p){p&&(this.previousIcon=p.querySelector("."+qn),this.nextIcon=p.querySelector("."+ln),this.calendarElement=p,this.deviceCalendar=p,this.contentElement=p.querySelector("."+Vr),this.tableBodyElement=(0,i.Ys)("."+Vr+" tbody",p),this.table=p.querySelector("."+Vr).getElementsByTagName("table")[0],this.headerTitleElement=p.querySelector("."+$n+" ."+gr),this.headerElement=p.querySelector("."+$n))}deviceHeaderClick(p){if(p.currentTarget.classList.contains(pn)&&!(0,i.le)(this.startValue)){this.endButton.element.classList.remove(as),this.startButton.element.classList.add(as);const k=this.popupObj.element.querySelector("."+cn);this.updateDeviceCalendar(k),(0,i.le)(this.calendarElement.querySelector("."+Ns+":not(.e-other-month)"))&&(this.currentDate=new Date(+this.startValue),(0,i.Od)(this.tableBodyElement),this.createContentBody(),this.deviceNavigation()),this.removeClassDisabled()}else if(!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)){this.startButton.element.classList.remove(as),this.endButton.element.classList.add(as);const k=this.popupObj.element.querySelector("."+cn);this.updateDeviceCalendar(k),(0,i.le)(this.calendarElement.querySelector("."+bn+":not(.e-other-month)"))&&(this.currentDate=new Date(+this.endValue),(0,i.Od)(this.tableBodyElement),this.createContentBody(),this.deviceNavigation()),this.updateMinMaxDays(this.popupObj.element.querySelector("."+cn)),this.selectableDates()}}inputFocusHandler(){this.enabled&&(this.preventBlur=!1,this.preventFocus||this.trigger("focus",{model:this}),this.updateClearIconState(),this.updateHiddenInput(),this.openOnFocus&&!this.preventFocus?(this.preventFocus=!0,this.show()):this.preventFocus=!0)}inputBlurHandler(p){if(this.enabled){if(!this.preventBlur){const w=this.inputElement.value;if((0,i.le)(this.presetsItem)||this.presetsItem.length>0&&this.previousEleValue!==this.inputElement.value&&(this.activeIndex=this.presetsItem.length-1,this.isCustomRange=!0),!(0,i.le)(w)&&""!==w.trim()){const k=w.split(" "+this.separator+" ");if(k.length>1){this.invalidValueString=null;const N={format:this.formatString,type:"date",skeleton:"yMd"},R=this.globalize.parseDate(k[0].trim(),N),K=this.globalize.parseDate(k[1].trim(),N);if(!((0,i.le)(R)||isNaN(+R)||(0,i.le)(K)||isNaN(+K))){const G=this.startValue;this.startValue=R;const ye=this.endValue;return this.endValue=K,this.setValue(),this.refreshControl(),w!==this.previousEleValue&&this.changeTrigger(p),this.preventBlur||document.activeElement===this.inputElement||(this.preventFocus=!1,this.trigger("blur",{model:this})),this.updateHiddenInput(),void(this.isMobile&&this.isPopupOpen()&&(this.startValue=G,this.endValue=ye))}this.strictMode||(this.startValue=null,this.endValue=null,this.setValue())}else this.strictMode||(this.startValue=null,this.endValue=null,this.setValue())}this.strictMode?(!(0,i.le)(w)&&""===w.trim()&&(this.startValue=null,this.endValue=null),Ue.II.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.updateInput()):((0,i.le)(this.popupObj)&&(this.currentDate=null),this.previousStartValue=this.previousEndValue=null,this.startValue=null,this.endValue=null,this.setValue()),this.errorClass(),this.changeTrigger(p),this.preventBlur||document.activeElement===this.inputElement||(this.preventFocus=!1,this.trigger("blur",{model:this}))}this.updateHiddenInput()}}clearRange(){this.previousStartValue=this.previousEndValue=null,this.currentDate=null}errorClass(){const p=this.inputElement.value.trim();((0,i.le)(this.endValue)&&(0,i.le)(this.startValue)&&""!==p||!(0,i.le)(this.startValue)&&+this.startValue<+this.min||!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&+this.startValue>+this.endValue||!(0,i.le)(this.endValue)&&+this.endValue>+this.max||this.startValue&&this.isDateDisabled(this.startValue)||this.endValue&&this.isDateDisabled(this.endValue))&&""!==p?((0,i.cn)([this.inputWrapper.container],Fi),(0,i.Y4)(this.inputElement,{"aria-invalid":"true"})):this.inputWrapper&&((0,i.IV)([this.inputWrapper.container],Fi),(0,i.Y4)(this.inputElement,{"aria-invalid":"false"}))}keyCalendarUpdate(p,w){return this.removeFocusedDate(),p?(this.leftCalCurrentDate=new Date(+this.currentDate),w=this.leftCalendar):(this.rightCalCurrentDate=new Date(+this.currentDate),w=this.rightCalendar),this.updateCalendarElement(w),this.table.focus(),w}navInCalendar(p,w,k,N,R){const K=this.getViewNumber(this.currentView());let G;const ye=this.min;let ee;switch(ee=(0,i.le)(this.maxDays)||!this.isMaxDaysClicked||(0,i.le)(this.startValue)?this.max:new Date(new Date(+this.startValue).setDate(this.startValue.getDate()+(this.maxDays-1))),p.action){case"moveRight":G=new Date(+this.currentDate),this.addDay(G,1,p,ee,ye),w&&+G==+N&&(R=this.keyCalendarUpdate(!1,R)),this.keyboardNavigate(1,K,p,ee,ye),this.keyNavigation(R,p);break;case"moveLeft":G=new Date(+this.currentDate),this.addDay(G,-1,p,ee,ye),w||+G==+k&&(R=this.keyCalendarUpdate(!0,R)),this.keyboardNavigate(-1,K,p,ee,ye),this.keyNavigation(R,p);break;case"moveUp":0===K?(G=new Date(+this.currentDate),this.addDay(G,-7,p,ee,ye),+G<=+k&&!w&&(R=this.keyCalendarUpdate(!0,R)),this.keyboardNavigate(-7,K,p,ee,ye)):this.keyboardNavigate(-4,K,p,this.max,this.min),this.keyNavigation(R,p);break;case"moveDown":0===K?(G=new Date(+this.currentDate),this.addDay(G,7,p,ee,ye),w&&+G>=+N&&(R=this.keyCalendarUpdate(!1,R)),this.keyboardNavigate(7,K,p,ee,ye)):this.keyboardNavigate(4,K,p,this.max,this.min),this.keyNavigation(R,p);break;case"home":this.currentDate=this.firstDay(this.currentDate),(0,i.Od)(this.tableBodyElement),0===K?this.renderMonths(p):1===K?this.renderYears(p):this.renderDecades(p),this.keyNavigation(R,p);break;case"end":this.currentDate=this.lastDay(this.currentDate,K),(0,i.Od)(this.tableBodyElement),0===K?this.renderMonths(p):1===K?this.renderYears(p):this.renderDecades(p),this.keyNavigation(R,p)}}keyInputHandler(p,w){let k,N=this.getViewNumber(this.currentView());const R=new Date(this.rightCalCurrentDate.getFullYear(),this.rightCalCurrentDate.getMonth(),1),K=new Date(this.leftCalCurrentDate.getFullYear(),this.leftCalCurrentDate.getMonth()+1,0);let G=(0,i.oq)(p.target,"."+je);G=(0,i.le)(G)?this.leftCalendar:G;const ye=G.classList.contains(gi);this.updateCalendarElement(G);const ee=this.tableBodyElement.querySelector("tr td.e-selected"),te=G.querySelector("tr td."+Nr),ie=G.querySelector("tr td."+Ns),xe=G.querySelector("tr td."+bn),Ke=this.getViewNumber(this.depth),ct=N===Ke&&this.getViewNumber(this.start)>=Ke,ii=(0,i.oq)(p.target,"."+gi),si=(0,i.oq)(p.target,"."+je),Ri=(0,i.oq)(p.target,"."+wr);switch((0,i.le)(te)?(0,i.le)(xe)||this.dateDisabled?(0,i.le)(ie)||this.dateDisabled?this.dateDisabled||this.currentDate.setDate(1):this.currentDate=new Date(+this.startValue):this.currentDate=new Date(+this.endValue):this.currentDate=this.currentDate,this.effect="",p.action){case"altUpArrow":this.isPopupOpen()&&(this.hide(p),this.preventFocus=!0,this.inputElement.focus(),(0,i.cn)([this.inputWrapper.container],[ms]));break;case"select":if(ct){const qi=(0,i.le)(te)?ie:te;!(0,i.le)(qi)&&!qi.classList.contains(rs)&&this.selectRange(null,qi)}else(!(0,i.le)(ee)&&!ct||!(0,i.le)(te))&&((0,i.le)(this.value)||(w=this.calendarElement.classList.contains(gi)?this.startDate:this.endDate),this.controlDown=p,this.contentClick(null,--N,te||ee,w));p.preventDefault();break;case"controlHome":{const qi=new Date(this.currentDate.getFullYear(),0,1);!ye&&+qi<+K&&(G=this.keyCalendarUpdate(!0,G)),super.navigateTo.call(this,"Month",new Date(this.currentDate.getFullYear(),0,1)),this.keyNavigation(G,p)}break;case"altRightArrow":(0,i.le)(ii)?(0,i.le)(si)?(0,i.le)(Ri)||this.cancelButton.element.focus():(0,i.le)(this.presetElement)?this.cancelButton.element.focus():(this.presetElement.focus(),this.removeFocusedDate()):this.rightCalendar.children[1].firstElementChild.focus(),p.preventDefault();break;case"altLeftArrow":(0,i.le)(ii)?(0,i.le)(si)||this.leftCalendar.children[1].firstElementChild.focus():!0!==this.applyButton.element.disabled?this.applyButton.element.focus():this.cancelButton.element.focus(),p.preventDefault();break;case"controlUp":this.calendarElement.classList.contains(gi),this.calendarNavigation(p,this.calendarElement),p.preventDefault();break;case"controlDown":(!(0,i.le)(ee)||!(0,i.le)(te))&&!ct&&((0,i.le)(this.value)||(w=this.calendarElement.classList.contains(gi)?this.startDate:this.endDate),this.controlDown=p,this.contentClick(null,--N,ee||te,w)),p.preventDefault();break;case"controlEnd":{const qi=new Date(this.currentDate.getFullYear(),11,31);ye&&+qi>+R&&(G=this.keyCalendarUpdate(!1,G)),super.navigateTo.call(this,"Month",new Date(this.currentDate.getFullYear(),11,31)),this.keyNavigation(G,p)}break;case"pageUp":k=new Date(+this.currentDate),this.addMonths(k,-1),!ye&&+k<=+K&&(G=this.keyCalendarUpdate(!0,G)),this.addMonths(this.currentDate,-1),super.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(G,p);break;case"pageDown":k=new Date(+this.currentDate),this.addMonths(k,1),ye&&+k>=+R&&(G=this.keyCalendarUpdate(!1,G)),this.addMonths(this.currentDate,1),super.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(G,p);break;case"shiftPageUp":k=new Date(+this.currentDate),this.addYears(k,-1),!ye&&+k<=+K&&(G=this.keyCalendarUpdate(!0,G)),this.addYears(this.currentDate,-1),super.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(G,p);break;case"shiftPageDown":k=new Date(+this.currentDate),this.addYears(k,1),ye&&+k>=+R&&(G=this.keyCalendarUpdate(!1,G)),this.addYears(this.currentDate,1),super.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(G,p);break;case"shiftTab":(0,i.le)(this.presetElement)||(this.presetElement.setAttribute("tabindex","0"),this.presetElement.focus(),this.removeFocusedDate()),p.preventDefault();break;case"spacebar":this.applyButton&&!this.applyButton.disabled&&this.applyFunction(p);break;default:this.navInCalendar(p,ye,K,R,G),this.checkMinMaxDays()}this.presetHeight()}keyNavigation(p,w){this.bindCalendarCellEvents(p),p.classList.contains(gi)?this.leftCalCurrentDate=new Date(+this.currentDate):this.rightCalCurrentDate=new Date(+this.currentDate),this.updateNavIcons(),this.calendarIconEvent(),this.updateRange([p]),this.dateDisabled=this.isDateDisabled(this.currentDate),w.preventDefault()}inputHandler(p){switch(p.action){case"altDownArrow":this.isPopupOpen()||(""===this.inputElement.value&&(this.clear(),this.changeTrigger(p),this.clearRange()),this.show(null,p),this.isRangeIconClicked=!1,this.isMobile||(0,i.le)(this.leftCalendar)||this.calendarFocus(),this.isKeyPopup=!0);break;case"escape":this.isPopupOpen()&&this.hide(p);break;case"enter":document.activeElement===this.inputElement&&(this.inputBlurHandler(p),this.hide(p));break;case"tab":document.activeElement===this.inputElement&&this.isPopupOpen()&&(this.hide(p),p.preventDefault())}}bindCalendarCellEvents(p){let w;w=p?p.querySelectorAll("."+cn+" td"):this.popupObj.element.querySelectorAll("."+cn+" td");for(const k of w)i.bi.clearEvents(k),!k.classList.contains(rs)&&!k.classList.contains(Ur)&&!k.classList.contains(_r)&&(this.isMobile||i.bi.add(k,"mouseover",this.hoverSelection,this),i.bi.add(k,"mousedown",this.selectRange,this))}removeFocusedDate(){const p=!(0,i.le)(this.startValue)||!(0,i.le)(this.endValue),w=this.popupObj.element.querySelectorAll("."+cn+" ."+Nr);for(const k of w){const N=new Date,R=this.getIdValue(null,k);("Month"===this.depth&&"Month"===this.currentView()&&(!k.classList.contains(Jr)||k.classList.contains(Jr)&&p)||"Year"===this.depth&&"Year"===this.currentView()&&(!this.isSameMonth(N,R)&&!this.isSameYear(N,R)||p)||"Decade"===this.depth&&"Decade"===this.currentView()&&(!this.isSameYear(N,R)||p))&&(k.classList.remove(Nr),!k.classList.contains(Ns)&&!k.classList.contains(bn)&&k.removeAttribute("aria-label"))}}hoverSelection(p,w){const N=this.getIdValue(null,w||p.currentTarget);if(!(0,i.le)(this.startValue)&&+this.startValue>=+this.min&&+this.startValue<=+this.max&&(!this.isDateDisabled(this.endValue)&&!this.isDateDisabled(this.startValue)&&(0,i.le)(this.endValue)&&(0,i.le)(this.startValue)||!(0,i.le)(this.startValue)&&(0,i.le)(this.endValue))){const R=this.popupObj.element.querySelectorAll("."+cn+" td");for(const K of R){const G=!K.classList.contains(rs)||K.classList.contains(Ur);if(!K.classList.contains(_r)&&G){const ye=this.getIdValue(null,K),ee=new Date(+this.startValue);new Date(+ye).setHours(0,0,0,0)>=ee.setHours(0,0,0,0)&&+ye<=+N?(0,i.cn)([K],Cs):(0,i.IV)([K],[Cs])}}}}isSameStartEnd(p,w){let k=!1;return"Month"===this.depth?p.setHours(0,0,0,0)===w.setHours(0,0,0,0)&&(k=!0):"Year"===this.depth?p.getFullYear()===w.getFullYear()&&p.getMonth()===w.getMonth()&&(k=!0):"Decade"===this.depth&&p.getFullYear()===w.getFullYear()&&(k=!0),k}updateRange(p){if(!(0,i.le)(this.startValue))for(const w of p){const k=w.querySelectorAll("."+cn+" td");for(const N of k)if(!N.classList.contains(_r)&&!N.classList.contains(rs)){const R=this.getIdValue(null,N),K=this.getIdValue(null,N);if((0,i.le)(this.endValue)?(0,i.IV)([N],[Cs]):this.currentView()===this.depth&&+K.setHours(0,0,0,0)>=+new Date(+this.startValue).setHours(0,0,0,0)&&+K.setHours(0,0,0,0)<=+new Date(+this.endValue).setHours(0,0,0,0)&&!this.isSameStartEnd(new Date(+this.startValue),new Date(+this.endValue))&&+new Date(+this.startValue).setHours(0,0,0,0)>=+this.min&&+new Date(+this.endValue).setHours(0,0,0,0)<=+this.max&&!(this.isDateDisabled(this.startValue)||this.isDateDisabled(this.endValue))&&(0,i.cn)([N],Cs),N.classList.contains(hn)&&N.classList.contains(bn)&&+K!=+this.endValue&&((0,i.IV)([N],[hn]),(0,i.IV)([N],[bn])),N.classList.contains(Cs)&&+K>+this.endValue&&(0,i.IV)([N],[Cs]),!N.classList.contains(Yn)){const G=new Date(+this.startValue);let ye=new Date(+R);this.currentView()===this.depth&&+ye.setHours(0,0,0,0)==+G.setHours(0,0,0,0)&&+ye.setHours(0,0,0,0)>=+G.setHours(0,0,0,0)&&+this.startValue>=+this.min&&!this.inputWrapper.container.classList.contains("e-error")&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&((0,i.cn)([N],[Ns,hn]),this.addSelectedAttributes(N,this.startValue,!0));const ee=new Date(+this.endValue);"Year"===this.currentView()?ye=new Date(ye.getFullYear(),ye.getMonth()+1,0):"Decade"===this.currentView()&&(ye=new Date(ye.getFullYear(),11,31)),this.currentView()===this.depth&&!(0,i.le)(this.endValue)&&+ye.setHours(0,0,0,0)==+ee.setHours(0,0,0,0)&&+ye.setHours(0,0,0,0)<=+ee.setHours(0,0,0,0)&&+this.startValue>=+this.min&&!this.inputWrapper.container.classList.contains("e-error")&&!(this.isDateDisabled(this.startValue)||this.isDateDisabled(this.endValue))&&((0,i.cn)([N],[bn,hn]),this.addSelectedAttributes(N,this.startValue,!1)),+R==+this.startValue&&!(0,i.le)(this.endValue)&&+R==+this.endValue&&this.addSelectedAttributes(N,this.endValue,!1,!0)}}}}checkMinMaxDays(){(!(0,i.le)(this.minDays)&&this.minDays>0||!(0,i.le)(this.maxDays)&&this.maxDays>0)&&(this.isMobile?this.updateMinMaxDays(this.popupObj.element.querySelector("."+cn)):(this.updateMinMaxDays(this.popupObj.element.querySelector("."+gi)),this.updateMinMaxDays(this.popupObj.element.querySelector("."+je))))}rangeArgs(p){let w,k;const N=(0,i.le)(this.startValue)?null:this.globalize.formatDate(this.startValue,{format:this.formatString,type:"date",skeleton:"yMd"}),R=(0,i.le)(this.endValue)?null:this.globalize.formatDate(this.endValue,{format:this.formatString,type:"date",skeleton:"yMd"});return(0,i.le)(this.endValue)||(0,i.le)(this.startValue)?(w="",k=0):(w=N+" "+this.separator+" "+R,k=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1),{value:this.value,startDate:this.startValue,endDate:this.endValue,daySpan:k,event:p||null,element:this.element,isInteracted:!(0,i.le)(p),text:w}}otherMonthSelect(p,w,k){const N=+this.getIdValue(null,p),R='*[id^="/id"]:not(.e-other-month)'.replace("/id",""+N),K=this.popupObj&&this.popupObj.element.querySelector(R);(0,i.le)(K)||(w?((0,i.cn)([K],[Ns,hn]),this.addSelectedAttributes(K,this.startValue,!0)):((0,i.cn)([K],[bn,hn]),this.addSelectedAttributes(K,this.endValue,!0)),k&&this.addSelectedAttributes(p,this.endValue,!1,!0))}selectRange(p,w){let k,N;p&&p.preventDefault();const R=(0,i.le)(p)?this.getIdValue(null,w):this.getIdValue(p,null),K=R.getFullYear(),G=R.getMonth(),ye=new Date(K,G,1),ee=new Date(K,G+1,0),te=new Date(K,0,1),ie=new Date(K,11,31);(0,i.le)(this.endValue)||(0,i.le)(this.startValue)?this.isMobile&&this.startButton.element.classList.contains(as)&&this.removeSelection():(!this.isMobile||this.isMobile&&!this.endButton.element.classList.contains(as))&&this.removeSelection();const xe=w||p.currentTarget;if((0,i.le)(this.startValue))(0,i.le)(this.previousStartValue)||(R.setHours(this.previousStartValue.getHours()),R.setMinutes(this.previousStartValue.getMinutes()),R.setSeconds(this.previousStartValue.getSeconds())),this.startValue="Month"===this.depth?new Date(this.checkValue(R)):"Year"===this.depth?ye:te,this.endValue=null,this.setValue(),(0,i.cn)([xe],Ns),this.addSelectedAttributes(xe,this.startValue,!0),xe.classList.contains(Yn)&&this.otherMonthSelect(xe,!0),this.checkMinMaxDays(),this.applyButton.disabled=!0,this.applyButton.element.disabled=!0,this.isMobile&&(this.endButton.element.classList.add(as),this.startButton.element.classList.remove(as),this.endButton.element.removeAttribute("disabled"),this.selectableDates()),this.trigger("select",this.rangeArgs(p));else if(+R==+this.startValue||+R>+this.startValue){if(+R==+this.startValue&&!(0,i.le)(this.minDays)&&this.minDays>1)return;this.endValue=null,this.setValue(),(this.isMobile||w)&&this.hoverSelection(p,w),(0,i.le)(this.previousEndValue)||(R.setHours(this.previousEndValue.getHours()),R.setMinutes(this.previousEndValue.getMinutes()),R.setSeconds(this.previousEndValue.getSeconds())),this.endValue="Month"===this.depth?new Date(this.checkValue(R)):"Year"===this.depth?ee:ie,this.setValue();let Ke=this.popupObj.element.querySelectorAll("."+bn);if(this.isMobile){this.startButton.element.classList.remove(as),this.endButton.element.classList.add(as);for(const ct of Ke)ct.removeAttribute("aria-label"),ct.classList.contains(Ns)?(this.addSelectedAttributes(ct,this.startValue,!0),(0,i.IV)([ct],[bn])):(ct.setAttribute("aria-selected","false"),(0,i.IV)([ct],[bn,hn]))}(0,i.cn)([xe],bn),+this.endValue==+this.startValue?this.addSelectedAttributes(xe,this.endValue,!1,!0):this.addSelectedAttributes(xe,this.endValue,!1),xe.classList.contains(Yn)&&(+this.endValue==+this.startValue?this.otherMonthSelect(xe,!1,!0):this.otherMonthSelect(xe,!1)),Ke=this.popupObj.element.querySelectorAll("."+bn);for(const ct of Ke)ct.classList.contains(Ns)&&(0,i.IV)([ct],[Cs]);this.applyButton.disabled=!1,this.applyButton.element.disabled=!1,this.isMobile||this.removeClassDisabled(),this.disabledDateRender(),this.trigger("select",this.rangeArgs(p))}else+R<+this.startValue&&(this.removeClassDisabled(),this.startValue="Month"===this.depth?new Date(this.checkValue(R)):"Year"===this.depth?ye:te,this.setValue(),this.removeSelectedAttributes(),(0,i.IV)(this.popupObj.element.querySelectorAll("."+Ns),[Ns,hn]),(0,i.cn)([xe],Ns),this.addSelectedAttributes(xe,this.startValue,!0),xe.classList.contains(Yn)&&this.otherMonthSelect(xe,!0),this.checkMinMaxDays());p&&(k=(0,i.oq)(p.target,"."+gi)),(0,i.le)(k)?(p&&(N=p&&(0,i.oq)(p.target,"."+je)),(0,i.le)(N)||this.rightCalendar.children[1].firstElementChild.focus()):this.leftCalendar.children[1].firstElementChild.focus(),(0,i.cn)([xe],hn),this.updateHeader(),this.removeFocusedDate()}selectableDates(){if(!(0,i.le)(this.startValue)){const p=this.calendarElement.querySelectorAll("."+cn+" td");let w=!1;if(this.currentView()===this.depth){for(const k of p){if(!k.classList.contains(Ns)&&!k.classList.contains(_r)&&!k.classList.contains(rs)){if(+this.getIdValue(null,k)<+this.startValue){(0,i.cn)([k],[Ur,rs,Xn]),i.bi.clearEvents(k);continue}break}if(k.classList.contains(Ns)&&!k.classList.contains(Yn)){w=!0;break}}w&&(this.previousIcon.classList.contains(rs)||(0,i.cn)([this.previousIcon],[Hr,rs,Xn]))}else{for(const k of p){const N=this.startValue.getMonth(),R=this.startValue.getFullYear(),K=this.getIdValue(null,k);if(this.startButton.element.classList.contains(as)||!("Year"===this.currentView()&&K.getMonth()<N&&K.getFullYear()<=R||"Decade"===this.currentView()&&K.getMonth()<=N&&K.getFullYear()<R))break;(0,i.cn)([k],[rs])}p[0].classList.contains(rs)?this.previousIconHandler(!0):p[p.length-1].classList.contains(rs)&&this.nextIconHandler(!0)}}}updateMinMaxDays(p){if(!(0,i.le)(this.startValue)&&(0,i.le)(this.endValue)||this.isMobile&&this.endButton.element.classList.contains(as)){if(!(0,i.le)(this.minDays)&&this.minDays>0||!(0,i.le)(this.maxDays)&&this.maxDays>0){const w=this.removeTimeValueFromDate(this.startValue);let k=new Date(new Date(+w).setDate(w.getDate()+(this.minDays-1))),N=new Date(new Date(+w).setDate(w.getDate()+(this.maxDays-1)));k=!(0,i.le)(this.minDays)&&this.minDays>0?k:null,N=!(0,i.le)(this.maxDays)&&this.maxDays>0?N:null,"Year"===this.currentView()?(k=(0,i.le)(k)?null:new Date(k.getFullYear(),k.getMonth(),0),N=(0,i.le)(N)?null:new Date(N.getFullYear(),N.getMonth(),1)):"Decade"===this.currentView()&&(k=(0,i.le)(k)?null:new Date(k.getFullYear()-1,11,1),N=(0,i.le)(N)?null:new Date(N.getFullYear(),0,1));const R=p.querySelectorAll("."+cn+" td");let K;for(const G of R)if(!G.classList.contains(Ns)&&!G.classList.contains(_r)){let ye=this.getIdValue(null,G);if(ye=this.removeTimeValueFromDate(ye),!(0,i.le)(k)&&+ye==+k&&G.classList.contains(rs)&&k.setDate(k.getDate()+1),!G.classList.contains(rs)){if(+ye<=+w)continue;!(0,i.le)(k)&&+ye<+k&&((0,i.cn)([G],[Ur,rs,Xn]),i.bi.clearEvents(G)),!(0,i.le)(N)&&+ye>+N&&((0,i.cn)([G],[Ur,rs,Xn]),this.isMaxDaysClicked=!0,i.bi.clearEvents(G),(0,i.le)(K)&&!G.classList.contains(Yn)&&(K=G))}}if(!(0,i.le)(K))if(this.isMobile)this.nextIcon.classList.contains(rs)||(0,i.cn)([this.nextIcon],[Hr,rs,Xn]);else{let G=(0,i.oq)(K,"."+je);G=(0,i.le)(G)?this.leftCalendar:G,G.classList.contains(gi)?(this.rightCalNextIcon.classList.contains(rs)||(0,i.cn)([this.rightCalNextIcon],[Hr,rs,Xn]),this.leftCalNextIcon.classList.contains(rs)||(0,i.cn)([this.leftCalNextIcon],[Hr,rs,Xn]),this.rightCalPrevIcon.classList.contains(rs)||(0,i.cn)([this.rightCalPrevIcon],[Hr,rs,Xn])):this.rightCalNextIcon.classList.contains(rs)||(0,i.cn)([this.rightCalNextIcon],[Hr,rs,Xn])}}}else this.isMaxDaysClicked=!1}removeTimeValueFromDate(p){return new Date(p.getFullYear(),p.getMonth(),p.getDate())}removeClassDisabled(){const p=this.popupObj.element.querySelectorAll("."+cn+" td."+Ur);for(const w of p)w.classList.contains(Ur)&&((0,i.IV)([w],[Ur,rs,Xn]),i.bi.add(w,"click",this.selectRange,this),this.isMobile||i.bi.add(w,"mouseover",this.hoverSelection,this));this.isMobile?(this.nextIcon.classList.contains(Hr)&&(0,i.IV)([this.nextIcon],[Hr,rs,Xn]),this.previousIcon.classList.contains(Hr)&&(0,i.IV)([this.previousIcon],[Hr,rs,Xn])):(this.rightCalNextIcon.classList.contains(Hr)&&(0,i.IV)([this.rightCalNextIcon],[Hr,rs,Xn]),this.rightCalPrevIcon.classList.contains(Hr)&&(0,i.IV)([this.rightCalPrevIcon],[Hr,rs,Xn]),this.leftCalNextIcon.classList.contains(Hr)&&(0,i.IV)([this.leftCalNextIcon],[Hr,rs,Xn]))}updateHeader(){const p={type:"date",skeleton:"yMMMd"};if((0,i.le)(this.endValue)||(0,i.le)(this.startValue))this.popupObj.element.querySelector("."+Zn).textContent=this.l10n.getConstant("selectedDays");else{let w=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1;(0,i.le)(this.disabledDayCnt)||(w-=this.disabledDayCnt,this.disabledDayCnt=null),this.popupObj.element.querySelector("."+Zn).textContent=w.toString()+" "+this.l10n.getConstant("days")}this.isMobile?(this.startButton.element.textContent=(0,i.le)(this.startValue)?this.l10n.getConstant("startLabel"):this.globalize.formatDate(this.startValue,p),this.endButton.element.textContent=(0,i.le)(this.endValue)||(0,i.le)(this.startValue)?this.l10n.getConstant("endLabel"):this.globalize.formatDate(this.endValue,p)):((0,i.le)(this.endValue)||(0,i.le)(this.startValue)?this.popupObj.element.querySelector("."+Rr).textContent=this.l10n.getConstant("endLabel"):this.popupObj.element.querySelector("."+Rr).textContent=this.globalize.formatDate(this.endValue,p),(0,i.le)(this.startValue)?this.popupObj.element.querySelector("."+Ln).textContent=this.l10n.getConstant("startLabel"):this.popupObj.element.querySelector("."+Ln).textContent=this.globalize.formatDate(this.startValue,p)),(this.isDateDisabled(this.startValue)||this.isDateDisabled(this.endValue)||!(0,i.le)(this.startValue)&&+this.startValue<+this.min||!(0,i.le)(this.endValue)&&+this.endValue>+this.max||!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&+this.startValue>+this.endValue)&&(this.isMobile?(this.startButton.element.textContent=this.l10n.getConstant("startLabel"),this.endButton.element.textContent=this.l10n.getConstant("endLabel"),this.popupObj.element.querySelector("."+Zn).textContent=this.l10n.getConstant("selectedDays")):(this.popupObj.element.querySelector("."+Zn).textContent=this.l10n.getConstant("selectedDays"),this.popupObj.element.querySelector("."+Ln).textContent=this.l10n.getConstant("startLabel"),this.popupObj.element.querySelector("."+Rr).textContent=this.l10n.getConstant("endLabel"))),this.popupObj.element.querySelector("#custom_range")&&(this.popupObj.element.querySelector("#custom_range").textContent=""!==this.l10n.getConstant("customRange")?this.l10n.getConstant("customRange"):"Custom Range")}removeSelection(){this.startValue=null,this.endValue=null,this.setValue(),this.removeSelectedAttributes(),this.popupObj&&(this.popupObj.element.querySelectorAll("."+hn).length>0&&(0,i.IV)(this.popupObj.element.querySelectorAll("."+hn),[Ns,bn,hn]),this.popupObj.element.querySelectorAll("."+Nr).length>0&&(0,i.IV)(this.popupObj.element.querySelectorAll("."+Nr),Nr),this.popupObj.element.querySelectorAll("."+Cs).length>0&&(0,i.IV)(this.popupObj.element.querySelectorAll("."+Cs),[Cs]))}addSelectedAttributes(p,w,k,N){if(p){const R=this.globalize.formatDate(w,{type:"date",skeleton:"full"});!(0,i.le)(N)&&N?p.setAttribute("aria-label","The current start and end date is "+R):p.setAttribute("aria-label","The current "+(k?"start":"end")+" date is "+R),p.setAttribute("aria-selected","true")}}removeSelectedAttributes(){if(this.popupObj){const p=this.popupObj.element.querySelectorAll("."+Ns);for(const k of p)k.setAttribute("aria-selected","false"),k.removeAttribute("aria-label");const w=this.popupObj.element.querySelectorAll("."+bn);for(const k of w)k.setAttribute("aria-selected","false"),k.removeAttribute("aria-label")}}updateCalendarElement(p){p.classList.contains(gi)?(this.calendarElement=this.leftCalendar,this.currentDate=this.leftCalCurrentDate,this.previousIcon=this.leftCalPrevIcon,this.nextIcon=this.leftCalNextIcon):(this.calendarElement=this.rightCalendar,this.currentDate=this.rightCalCurrentDate,this.previousIcon=this.rightCalPrevIcon,this.nextIcon=this.rightCalNextIcon),this.contentElement=p.querySelector("."+Vr),this.tableBodyElement=(0,i.Ys)("."+Vr+" tbody",p),this.table=p.querySelector("."+Vr).getElementsByTagName("table")[0],this.headerTitleElement=p.querySelector("."+$n+" ."+gr),this.headerElement=p.querySelector("."+$n)}navPrevMonth(p){p.preventDefault();let w=(0,i.oq)(p.target,"."+gi);w=(0,i.le)(w)?(0,i.oq)(p.target,"."+je):w,this.updateCalendarElement(w),this.navigatePrevious(p),!(0,i.le)(this.startValue)&&(0,i.le)(this.endValue)&&this.updateMinMaxDays(w),this.updateControl(w)}deviceNavigation(p){this.deviceCalendarEvent(),this.updateRange([this.popupObj.element.querySelector("."+cn)]),this.endButton.element.classList.contains(as)&&this.updateMinMaxDays(this.popupObj.element.querySelector("."+cn)),this.endButton.element.classList.contains(as)&&this.selectableDates(),this.currentView()===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate()}updateControl(p){p.classList.contains(je)?this.rightCalCurrentDate=new Date(+this.currentDate):this.leftCalCurrentDate=new Date(+this.currentDate),this.calendarIconEvent(),("Month"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-month")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-month")||"Year"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-year")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-year")||"Decade"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-decade")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-decade")||this.isMobile)&&this.bindCalendarCellEvents(),this.removeFocusedDate(),this.updateRange([p])}navNextMonth(p){p.preventDefault();let w=(0,i.oq)(p.target,"."+gi);w=(0,i.le)(w)?(0,i.oq)(p.target,"."+je):w,this.updateCalendarElement(w),this.navigateNext(p),!(0,i.le)(this.startValue)&&(0,i.le)(this.endValue)&&this.updateMinMaxDays(w),this.updateControl(w)}isPopupOpen(){return!((0,i.le)(this.popupObj)||!this.popupObj.element.classList.contains(Rs))}createRangeHeader(){const p=this.createElement("div",{className:"e-start-end"});if(this.isMobile){const w=this.createElement("button",{className:"e-end-btn"}),k=this.createElement("button",{className:pn});this.startButton=new Zt.zx({content:this.l10n.getConstant("startLabel")},k),this.endButton=new Zt.zx({content:this.l10n.getConstant("endLabel")},w),p.appendChild(k),p.appendChild(w)}else{const w=this.createElement("a",{className:Ln}),k=this.createElement("a",{className:Rr}),N=this.createElement("span",{className:"e-change-icon e-icons"});(0,i.Y4)(w,{"aria-atomic":"true","aria-live":"assertive","aria-label":"Start Date",role:"button"}),(0,i.Y4)(k,{"aria-atomic":"true","aria-live":"assertive","aria-label":"End Date",role:"button"}),p.appendChild(w),p.appendChild(N),p.appendChild(k),w.textContent=this.l10n.getConstant("startLabel"),k.textContent=this.l10n.getConstant("endLabel")}return p}disableInput(){this.strictMode?!(0,i.le)(this.previousStartValue)&&!(0,i.le)(this.previousEndValue)&&(this.startValue=this.previousStartValue,this.endValue=this.previousEndValue,this.setValue(),this.updateInput()):(this.updateInput(),this.clearRange(),this.setProperties({startDate:null},!0),this.setProperties({endDate:null},!0),this.startValue=null,this.endValue=null,this.setValue(),this.errorClass()),this.setProperties({enabled:!1},!0),Ue.II.setEnabled(this.enabled,this.inputElement),this.bindEvents()}validateMinMax(){this.min=(0,i.le)(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=(0,i.le)(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,this.min<=this.max?(!(0,i.le)(this.minDays)&&!(0,i.le)(this.maxDays)&&this.maxDays>0&&this.minDays>0&&this.minDays>this.maxDays&&(this.maxDays=null),!(0,i.le)(this.minDays)&&this.minDays<0&&(this.minDays=null),!(0,i.le)(this.maxDays)&&this.maxDays<0&&(this.maxDays=null)):this.disableInput()}validateRangeStrict(){(0,i.le)(this.startValue)||(+this.startValue<=+this.min?(this.startValue=this.min,this.setValue()):+this.startValue>=+this.min&&+this.startValue>=+this.max&&(this.startValue=this.max)),(0,i.le)(this.endValue)||(+this.endValue>+this.max?(this.endValue=this.max,this.setValue()):+this.endValue<+this.min&&(this.endValue=this.min,this.setValue())),this.validateMinMaxDays()}validateRange(){this.validateMinMaxDays()}validateMinMaxDays(){if(!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)){const p=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1;if(!(0,i.le)(this.minDays)&&this.minDays>0&&!(p>=this.minDays))if(this.strictMode){const w=new Date(+this.startValue);w.setDate(w.getDate()+(this.minDays-1)),+w>+this.max?(this.endValue=this.max,this.setValue()):(this.endValue=w,this.setValue())}else this.startValue=null,this.endValue=null,this.setValue();!(0,i.le)(this.maxDays)&&this.maxDays>0&&!(p<=this.maxDays)&&(this.strictMode?(this.endValue=new Date(+this.startValue),this.endValue.setDate(this.endValue.getDate()+(this.maxDays-1)),this.setValue()):(this.startValue=null,this.endValue=null,this.setValue()))}}renderCalendar(){this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(cn),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),(0,i.Y4)(this.calendarElement,{role:"calendar"}),super.createHeader(),super.createContent()}isSameMonth(p,w){return p.getMonth()===w.getMonth()&&p.getFullYear()===w.getFullYear()}isSameYear(p,w){return p.getFullYear()===w.getFullYear()}isSameDecade(p,w){const k=p.getFullYear(),N=w.getFullYear();return k-k%10==N-N%10}startMonthCurrentDate(){this.isSameMonth(this.min,this.max)||+this.currentDate>+this.max||this.isSameMonth(this.currentDate,this.max)?(this.currentDate=new Date(+this.max),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()-1)):this.currentDate<this.min&&(this.currentDate=new Date(this.checkValue(this.min)))}selectNextMonth(){if((0,i.le)(this.endValue)||(0,i.le)(this.startValue)||this.isSameMonth(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue))return this.currentDate.setDate(1),void this.currentDate.setMonth(this.currentDate.getMonth()+1);if(this.currentDate=new Date(+this.endValue),!(0,i.le)(this.startValue)&&+this.startValue<+this.min||!(0,i.le)(this.endValue)&&+this.endValue>+this.max||!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&+this.startValue>+this.endValue){this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setDate(1);const p=this.currentDate.getMonth()+1;this.currentDate.setMonth(p)}}selectNextYear(){if((0,i.le)(this.endValue)||(0,i.le)(this.startValue)||this.isSameYear(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue)){this.currentDate.setMonth(0);const p=this.currentDate.getFullYear()+1;this.currentDate.setFullYear(p)}else this.currentDate=new Date(+this.endValue),(!(0,i.le)(this.endValue)&&+this.endValue>+this.max||!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&+this.startValue>+this.endValue||!(0,i.le)(this.startValue)&&+this.startValue<+this.min)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setMonth(0),this.currentDate.setFullYear(this.currentDate.getFullYear()+1))}selectNextDecade(){if((0,i.le)(this.endValue)||(0,i.le)(this.startValue)||this.isSameDecade(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue)){const p=this.currentDate.getFullYear()+10;this.currentDate.setFullYear(p)}else this.currentDate=new Date(+this.endValue),(!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&+this.startValue>+this.endValue||!(0,i.le)(this.endValue)&&+this.endValue>+this.max||!(0,i.le)(this.startValue)&&+this.startValue<+this.min)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setFullYear(this.currentDate.getFullYear()+10))}selectStartMonth(){(0,i.le)(this.startValue)?(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.startMonthCurrentDate()):!(0,i.le)(this.max)&&this.isSameMonth(this.startValue,this.max)?(this.currentDate=new Date(+this.max),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()-1)):this.currentDate=this.startValue>=this.min&&this.startValue<=this.max&&!this.isDateDisabled(this.startValue)?new Date(+this.startValue):new Date((new Date).setHours(0,0,0,0)),(!(0,i.le)(this.endValue)&&+this.endValue>+this.max||!(0,i.le)(this.startValue)&&+this.startValue<+this.min||!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue)&&+this.startValue>+this.endValue)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.startMonthCurrentDate()}createCalendar(){const p=this.createElement("div",{className:"e-calendar-container"});if(this.isMobile){(0,i.le)(this.startValue)||(this.currentDate=new Date(+this.startValue)),super.validateDate(),super.minMaxUpdate(),super.render();const w=this.calendarElement.querySelector("."+cn+" ."+qn),k=this.calendarElement.querySelector("."+cn+" ."+ln);(0,i.Od)(this.calendarElement.querySelector("."+cn+" ."+tn)),this.calendarElement.querySelector("."+cn+" ."+$n).appendChild(k),this.calendarElement.querySelector("."+cn+" ."+$n).appendChild(w),(0,i.Ce)([w],this.calendarElement.querySelector("."+cn+" ."+$n)),this.deviceCalendar=this.calendarElement,p.appendChild(this.calendarElement),this.headerTitleElement=this.calendarElement.querySelector("."+cn+" ."+$n+" ."+gr)}else{this.selectStartMonth(),this.renderCalendar(),this.leftCalCurrentDate=new Date(+this.currentDate),this.calendarElement.classList.add(gi),this.leftCalPrevIcon=this.calendarElement.querySelector("."+gi+" ."+qn),this.leftCalNextIcon=this.calendarElement.querySelector("."+gi+" ."+ln),this.leftTitle=this.calendarElement.querySelector("."+gi+" ."+gr),(0,i.Od)(this.calendarElement.querySelector("."+gi+" ."+tn)),this.calendarElement.querySelector("."+gi+" ."+$n).appendChild(this.leftCalNextIcon),this.calendarElement.querySelector("."+gi+" ."+$n).appendChild(this.leftCalPrevIcon),(0,i.Ce)([this.leftCalPrevIcon],this.calendarElement.querySelector("."+gi+" ."+$n)),this.leftCalendar=this.calendarElement;const w=this.createElement("div",{className:"e-left-container"}),k=this.createElement("div",{className:"e-right-container"});w.appendChild(this.leftCalendar),p.appendChild(w),this.isMobile||i.bi.add(this.leftTitle,"click",this.leftNavTitle,this),"Month"===this.start&&this.selectNextMonth(),"Year"===this.start&&this.selectNextYear(),"Decade"===this.start&&this.selectNextDecade(),this.renderCalendar(),this.rightCalCurrentDate=new Date(+this.currentDate),(0,i.cn)([this.calendarElement],je),this.rightCalendar=this.calendarElement,(0,i.IV)([this.leftCalendar&&this.leftCalendar.querySelector(".e-content tbody")],"e-zoomin"),(0,i.IV)([this.rightCalendar&&this.rightCalendar.querySelector(".e-content tbody")],"e-zoomin"),this.rightCalPrevIcon=this.calendarElement.querySelector("."+je+" ."+qn),this.rightCalNextIcon=this.calendarElement.querySelector("."+je+" ."+ln),this.rightTitle=this.calendarElement.querySelector("."+je+" ."+gr),(0,i.Od)(this.calendarElement.querySelector("."+je+" ."+tn)),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+je+" ."+$n).appendChild(this.rightCalNextIcon),this.calendarElement.querySelector("."+je+" ."+$n).appendChild(this.rightCalPrevIcon),(0,i.Ce)([this.rightCalPrevIcon],this.calendarElement.querySelector("."+je+" ."+$n)),k.appendChild(this.rightCalendar),p.appendChild(k),this.isMobile||i.bi.add(this.rightTitle,"click",this.rightNavTitle,this)}return p}leftNavTitle(p){this.isPopupOpen()&&(this.calendarElement=this.leftCalendar,this.calendarNavigation(p,this.calendarElement))}calendarNavigation(p,w){this.table=w.querySelector("table"),this.headerTitleElement=w.querySelector(".e-title"),this.tableBodyElement=w.querySelector("tbody"),this.tableHeadElement=w.querySelector("thead"),this.contentElement=w.querySelector(".e-content"),this.updateCalendarElement(w),super.navigateTitle(p),this.updateNavIcons()}rightNavTitle(p){this.isPopupOpen()&&(this.calendarElement=this.rightCalendar,this.calendarNavigation(p,this.calendarElement))}clickEventEmitter(p){this.isMobile||((0,i.oq)(p.target,".e-calendar.e-left-calendar")?(this.calendarElement=this.leftCalendar,this.updateCalendarElement(this.leftCalendar)):(this.calendarElement=this.rightCalendar,this.updateCalendarElement(this.rightCalendar)))}currentView(){return super.currentView()}getCalendarView(p){return"Year"===p?"Year":"Decade"===p?"Decade":"Month"}navigatedEvent(p){if(this.trigger("navigated",this.navigatedArgs),!(0,i.le)(this.popupObj)){let w;const k=this.getCalendarView(this.currentView());this.isMobile?k===this.depth?(this.bindCalendarCellEvents(),this.deviceNavigation(),this.removeFocusedDate(),this.checkMinMaxDays()):this.selectableDates():this.isMobile||k!==this.depth?(this.updateNavIcons(),this.calendarIconEvent()):(w=this.calendarElement.classList.contains("e-left-calendar")?this.leftCalendar:this.rightCalendar,w!==this.leftCalendar||(!p||p.currentTarget.children[0].classList.contains("e-icons"))&&(0,i.le)(this.controlDown)?(p&&!p.currentTarget.children[0].classList.contains("e-icons")||!(0,i.le)(this.controlDown))&&(this.rightCalCurrentDate=new Date(+this.currentDate),this.effect="",this.currentDate=this.rightCalCurrentDate,this.updateCalendarElement(this.rightCalendar),this.updateControl(this.rightCalendar),this.updateCalendarElement(this.leftCalendar),this.startValue&&(0,i.le)(this.endValue)&&("Month"===k&&this.startValue.getMonth()<this.rightCalCurrentDate.getMonth()&&this.startValue.getFullYear()<=this.rightCalCurrentDate.getFullYear()||"Year"===k&&this.startValue.getFullYear()<this.rightCalCurrentDate.getFullYear())?super.navigateTo.call(this,k,new Date(+this.startValue)):super.navigateTo.call(this,k,this.leftCalCurrentDate),this.updateControl(this.leftCalendar),this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.controlDown=null):(this.leftCalCurrentDate=new Date(+this.currentDate),this.effect="",this.currentDate=this.leftCalCurrentDate,this.updateCalendarElement(this.leftCalendar),this.updateControl(this.leftCalendar),this.updateCalendarElement(this.rightCalendar),super.navigateTo.call(this,k,this.rightCalCurrentDate),this.updateControl(this.rightCalendar),this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.controlDown=null),this.checkMinMaxDays())}}createControl(){const p=this.createElement("div",{className:mr}),w=this.createElement("div",{className:"e-range-header"}),k=this.createRangeHeader();w.appendChild(k);const N=this.createElement("div",{className:Zn});(0,i.Y4)(N,{"aria-label":"Selected Days"}),N.textContent=this.l10n.getConstant("selectedDays"),w.appendChild(N);const R=this.createElement("div",{className:"e-separator"}),K=this.createCalendar();p.appendChild(w),p.appendChild(R),p.appendChild(K);const G=this.createElement("div",{className:"e-footer"}),ye=this.createElement("button",{className:"e-cancel e-flat e-css"}),ee=this.createElement("button");(0,i.cn)([ee],["e-apply","e-flat","e-primary","e-css"]),G.appendChild(ee),G.appendChild(ye);const te=!(0,i.le)(this.startValue)&&!(0,i.le)(this.endValue);this.cancelButton=new Zt.zx({content:this.l10n.getConstant("cancelText")},ye),this.applyButton=new Zt.zx({content:this.l10n.getConstant("applyText"),disabled:!te},ee),i.bi.add(ee,"click",this.applyFunction,this),i.bi.add(ye,"click",this.cancelFunction,this),this.popupWrapper.appendChild(p),this.isMobile||(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||(this.createPresets(),this.listRippleEffect(),(0,i.cn)([p],"e-range-border"),(0,i.cn)([this.popupWrapper],"e-preset-wrapper"),this.popupWrapper.querySelector("."+wr).style.height=this.popupWrapper.querySelector("."+mr).getBoundingClientRect().height+"px"),this.popupWrapper.appendChild(G),this.isMobile&&this.deviceHeaderUpdate(),this.renderPopup()}cancelFunction(p){document.activeElement!==this.inputElement&&(this.preventFocus=!0,this.inputElement.focus(),(0,i.cn)([this.inputWrapper.container],[ms])),p.preventDefault(),this.isKeyPopup&&(this.inputElement.focus(),this.isKeyPopup=!1),this.startValue=null,this.endValue=null,this.removeSelection(),this.hide(p)}deviceHeaderUpdate(){(0,i.le)(this.startValue)&&(0,i.le)(this.endValue)?(this.endButton.element.setAttribute("disabled",""),this.startButton.element.classList.add(as)):(0,i.le)(this.startValue)||this.startButton.element.classList.add(as)}applyFunction(p){let w=!1;"touchstart"!==p.type&&p.preventDefault(),this.closeEventArgs&&this.closeEventArgs.cancel&&(this.startValue=this.popupWrapper.querySelector(".e-start-date")&&this.getIdValue(null,this.popupWrapper.querySelector(".e-start-date")),this.endValue=this.popupWrapper.querySelector(".e-end-date")&&this.getIdValue(null,this.popupWrapper.querySelector(".e-end-date")),this.setValue()),document.activeElement!==this.inputElement&&(this.preventFocus=!0,this.inputElement.focus(),(0,i.cn)([this.inputWrapper.container],[ms])),"touchstart"!==p.type&&this.closeEventArgs&&!this.closeEventArgs.cancel&&p.preventDefault(),(0,i.le)(this.startValue)||(0,i.le)(this.endValue)?this.hide(p||null):(this.previousStartValue=new Date(+this.startValue),this.previousEndValue=new Date(+this.endValue),this.previousEleValue=this.inputElement.value,Ue.II.setValue(this.rangeArgs(p).text,this.inputElement,this.floatLabelType,this.showClearButton),(+this.initStartDate!=+this.startValue||+this.initEndDate!=+this.endValue)&&(w=!0),this.changeTrigger(p),this.hide(p||null),this.errorClass(),w=!0),!(0,i.oq)(p.target,"."+Ls)&&!w&&this.focusOut(),this.isMobile||(this.isKeyPopup=!1,this.isRangeIconClicked&&(this.inputWrapper.container.children[1].focus(),this.keyInputConfigs=(0,i.l7)(this.keyInputConfigs,this.keyConfigs),this.popupKeyboardModule=new i.nv(this.inputWrapper.container.children[1],{eventName:"keydown",keyConfigs:this.keyInputConfigs,keyAction:this.popupKeyActionHandle.bind(this)})))}onMouseClick(p,w){if("touchstart"===p.type)return;const N=(0,i.oq)(w||p.target,"."+zn),R=N&&N.classList.contains(as);N&&N.classList.contains(zn)&&this.setListSelection(N,p),this.preventFocus=!0,this.inputElement.focus(),this.isMobile||(this.preventFocus=!0,N&&N.classList.contains(zn)&&"custom_range"===N.getAttribute("id")?this.leftCalendar.children[1].firstElementChild.focus():!R&&"keydown"===p.type&&this.inputElement.focus())}onMouseOver(p){const w=(0,i.oq)(p.target,"."+zn);w&&w.classList.contains(zn)&&!w.classList.contains(to)&&(0,i.cn)([w],to)}onMouseLeave(p){const w=(0,i.oq)(p.target,"."+to);(0,i.le)(w)||(0,i.IV)([w],to)}setListSelection(p,w){if(p&&(!p.classList.contains(as)||this.isMobile&&p.classList.contains(as))){if(this.isMobile&&p.classList.contains(as))return this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(p),"custom_range"===this.presetsItem[this.activeIndex].id?void this.renderCustomPopup():void 0;this.removeListSelection(),this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(p),(0,i.cn)([p],as),p.setAttribute("aria-selected","true");const k=this.presetsItem[this.activeIndex];"custom_range"===k.id?this.renderCustomPopup():this.applyPresetRange(k,w)}}removeListSelection(){const p=this.presetElement.querySelector("."+as);(0,i.le)(p)||((0,i.IV)([p],as),p.removeAttribute("aria-selected"))}setValue(){this.modelValue=[this.startValue,this.endValue]}applyPresetRange(p,w){this.hide(null),this.presetsItem[this.presetsItem.length-1].start=null,this.presetsItem[this.presetsItem.length-1].end=null,this.startValue=p.start,this.endValue=p.end,this.setValue(),this.refreshControl(),this.trigger("select",this.rangeArgs(w)),this.changeTrigger(w),this.previousEleValue=this.inputElement.value,this.isCustomRange=!1,this.leftCalendar=this.rightCalendar=null,this.isKeyPopup&&(this.isRangeIconClicked=!1,this.inputElement.focus())}showPopup(p,w){this.presetHeight(),this.popupObj.show(null,1e3===this.zIndex?this.element:null),this.isMobile&&this.popupObj.refreshPosition()}renderCustomPopup(){this.isCustomWindow=!0,this.popupObj.hide(),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:ti+" "+Rs}),this.renderControl(),this.openEventArgs.appendTo.appendChild(this.popupWrapper),this.showPopup(),this.isCustomRange=!0,this.isMobile||this.calendarFocus()}listRippleEffect(){for(const p of this.liCollections)(0,i.qx)(p)}createPresets(){if(!(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)){this.presetElement=this.createElement("div",{className:wr,attrs:{tabindex:"0"}});const p=$e.Kh.createList(this.createElement,this.presetsItem,null,!0);(0,i.Y4)(p,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),this.presetElement.appendChild(p),this.popupWrapper.appendChild(this.presetElement);const w=this.presetElement.querySelector("#custom_range");(0,i.le)(w)||(w.textContent=""!==this.l10n.getConstant("customRange")?this.l10n.getConstant("customRange"):"Custom Range"),this.liCollections=this.presetElement.querySelectorAll("."+zn),this.wireListEvents(),this.isMobile&&(this.presetElement.style.width=this.inputWrapper.container.getBoundingClientRect().width+"px"),!(0,i.le)(this.activeIndex)&&this.activeIndex>-1&&(0,i.cn)([this.liCollections[this.activeIndex]],as)}}wireListEvents(){i.bi.add(this.presetElement,"click",this.onMouseClick,this),this.isMobile||(i.bi.add(this.presetElement,"mouseover",this.onMouseOver,this),i.bi.add(this.presetElement,"mouseout",this.onMouseLeave,this))}unWireListEvents(){(0,i.le)(this.presetElement)||(i.bi.remove(this.presetElement,"click touchstart",this.onMouseClick),this.isMobile||(i.bi.remove(this.presetElement,"mouseover",this.onMouseOver),i.bi.remove(this.presetElement,"mouseout",this.onMouseLeave)))}renderPopup(){this.popupWrapper.classList.add("e-control");const p=this.popupWrapper.getBoundingClientRect().width;!(0,i.le)(this.cssClass)&&""!==this.cssClass.trim()&&(this.popupWrapper.className+=" "+this.cssClass),this.isMobile&&this.isCustomWindow&&(this.modal=this.createElement("div"),document.body.appendChild(this.modal)),this.popupObj=new u.GI(this.popupWrapper,{relateTo:this.isMobile&&this.isCustomWindow?document.body:(0,i.le)(this.targetElement)?this.inputWrapper.container:this.targetElement,position:this.isMobile?(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.isCustomWindow?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:this.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||this.enableRtl?0:-p,offsetY:4,collision:this.isMobile?(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.isCustomWindow?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile&&this.isCustomWindow?"container":"relative",enableRtl:this.enableRtl,zIndex:this.zIndex,open:()=>{(0,i.Y4)(this.inputElement,{"aria-expanded":"true"}),(0,i.cn)([this.inputWrapper.buttons[0]],as),this.isMobile||(this.cancelButton&&(this.btnKeyboardModule=new i.nv(this.cancelButton.element,{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),this.btnKeyboardModule=new i.nv(this.applyButton.element,{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}})),(0,i.le)(this.leftCalendar)||this.isRangeIconClicked||this.calendarFocus(),(0,i.le)(this.presetElement)||(this.keyInputConfigs=(0,i.l7)(this.keyInputConfigs,this.keyConfigs),this.presetKeyboardModule=new i.nv(this.presetElement,{eventName:"keydown",keyAction:this.presetKeyActionHandler.bind(this),keyConfigs:this.keyInputConfigs}),this.presetKeyboardModule=new i.nv(this.presetElement,{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),(0,i.le)(this.leftCalendar)?(this.preventBlur=!0,this.presetElement.focus()):this.presetElement.setAttribute("tabindex","-1")),this.popupKeyBoardHandler()),this.isMobile&&!i.AR.isDevice&&i.bi.add(document,"keydown",this.popupCloseHandler,this)},close:()=>{(0,i.Y4)(this.inputElement,{"aria-expanded":"false"}),(0,i.IV)([this.inputWrapper.buttons[0]],as),this.isRangeIconClicked&&this.inputWrapper.container.children[1].focus(),(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.unWireListEvents(),(0,i.le)(this.popupObj)||((0,i.le)(this.popupObj.element.parentElement)||(0,i.og)(this.popupObj.element),this.popupObj.destroy(),this.popupObj=null),this.isMobile&&!i.AR.isDevice&&i.bi.remove(document,"keydown",this.popupCloseHandler)},targetExitViewport:()=>{i.AR.isDevice||this.hide()}}),this.isMobile&&(this.popupObj.element.classList.add(Io),this.isMobile||this.popupObj.element.classList.add("e-bigger")),this.isMobile&&this.isCustomWindow&&((0,i.cn)([this.modal],[Io,ti,"e-range-modal"]),document.body.className+=" "+Eo,this.modal.style.display="block"),i.bi.add(document,"mousedown touchstart",this.documentHandler,this)}popupCloseHandler(p){27===p.keyCode&&this.hide(p)}calendarFocus(){const p=this.popupObj&&this.popupObj.element.querySelector("."+Ns);if(p){let w=(0,i.oq)(p,"."+je);w=(0,i.le)(w)?this.leftCalendar:w,this.isRangeIconClicked?this.inputWrapper.container.focus():(this.preventBlur=!0,w.children[1].firstElementChild.focus()),(0,i.cn)([p],Nr)}else this.isRangeIconClicked?this.inputWrapper.container.focus():(this.preventBlur=!0,this.leftCalendar.children[1].firstElementChild.focus())}presetHeight(){const p=this.popupObj&&this.popupObj.element.querySelector("."+wr),w=this.popupObj&&this.popupObj.element.querySelector("."+mr);!(0,i.le)(p)&&!(0,i.le)(w)&&(p.style.height=w.getBoundingClientRect().height+"px")}presetKeyActionHandler(p){switch(p.action){case"moveDown":this.listMoveDown(p),this.setScrollPosition(),p.preventDefault();break;case"moveUp":this.listMoveUp(p),this.setScrollPosition(),p.preventDefault();break;case"enter":{const w=this.getHoverLI(),k=this.getActiveLI();if(!(0,i.le)(this.leftCalendar)&&!(0,i.le)(k)&&((0,i.le)(w)||!(0,i.le)(k)&&k===w)&&(this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(k),"custom_range"===this.presetsItem[this.activeIndex].id))return this.calendarFocus(),k.classList.remove(to),void p.preventDefault();(!(0,i.le)(w)||!(0,i.le)(k))&&this.onMouseClick(p,w||k),p.preventDefault()}break;case"tab":if(this.leftCalendar){const w=this.getHoverLI();(0,i.le)(w)||w.classList.remove(to)}else this.hide(p),p.preventDefault()}}listMoveDown(p){const w=this.getHoverLI(),k=this.getActiveLI();if((0,i.le)(w))if((0,i.le)(k))(0,i.cn)([this.liCollections[0]],to);else{const N=k.nextElementSibling;!(0,i.le)(N)&&N.classList.contains(zn)&&(0,i.cn)([N],to)}else{const N=w.nextElementSibling;!(0,i.le)(N)&&N.classList.contains(zn)&&((0,i.IV)([w],to),(0,i.cn)([N],to))}}listMoveUp(p){const w=this.getHoverLI(),k=this.getActiveLI();if((0,i.le)(w)){if(!(0,i.le)(k)){const N=k.previousElementSibling;!(0,i.le)(N)&&N.classList.contains(zn)&&(0,i.cn)([N],to)}}else{const N=w.previousElementSibling;!(0,i.le)(N)&&N.classList.contains(zn)&&((0,i.IV)([w],to),(0,i.cn)([N],to))}}getHoverLI(){return this.presetElement.querySelector("."+to)}getActiveLI(){return this.presetElement.querySelector("."+as)}popupKeyBoardHandler(){this.popupKeyboardModule=new i.nv(this.popupWrapper,{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:{escape:"escape"}}),this.keyInputConfigs=(0,i.l7)(this.keyInputConfigs,this.keyConfigs),this.popupKeyboardModule=new i.nv(this.inputWrapper.container.children[1],{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:this.keyInputConfigs})}setScrollPosition(){const p=this.presetElement.getBoundingClientRect().height,w=this.presetElement.querySelector("."+to),k=this.presetElement.querySelector("."+as),N=(0,i.le)(w)?k:w;if(!(0,i.le)(N)){const R=N.nextElementSibling,K=R?R.offsetTop:N.offsetTop,G=N.getBoundingClientRect().height;this.presetElement.scrollTop=K+N.offsetTop>p?R?K-(p/2+G/2):K:0}}popupKeyActionHandle(p){const w=(0,i.oq)(p.target,"."+wr);switch(p.action){case"escape":this.isPopupOpen()?(this.isKeyPopup&&(this.inputElement.focus(),this.isKeyPopup=!1),this.hide(p)):this.inputWrapper.container.children[1].blur();break;case"enter":this.isPopupOpen()?this.inputWrapper.container.children[1].focus():this.show(null,p);break;case"tab":this.hide(p);break;case"altRightArrow":(0,i.le)(w)?document.activeElement===this.cancelButton.element&&!0!==this.applyButton.element.disabled?this.applyButton.element.focus():this.leftCalendar.children[1].firstElementChild.focus():this.cancelButton.element.focus(),p.preventDefault();break;case"altLeftArrow":(0,i.le)(w)?document.activeElement===this.applyButton.element&&!0!==this.applyButton.element.disabled?this.cancelButton.element.focus():(0,i.le)(this.presetElement)||document.activeElement!==this.cancelButton.element?this.rightCalendar.children[1].firstElementChild.focus():this.presetElement.focus():this.rightCalendar.children[1].firstElementChild.focus(),p.preventDefault()}}documentHandler(p){if((0,i.le)(this.popupObj))return;const w=p.target;(!this.inputWrapper.container.contains(w)||!(0,i.le)(this.popupObj)&&!(0,i.oq)(w,'[id="'+this.popupWrapper.id+'"]'))&&"touchstart"!==p.type&&("mousedown"===p.type||this.closeEventArgs&&!this.closeEventArgs.cancel)&&p.preventDefault(),((0,i.le)(this.targetElement)||!(0,i.le)(this.targetElement)&&w!==this.targetElement)&&!(0,i.oq)(w,'[id="'+this.popupWrapper.id+'"]')&&(0,i.oq)(w,"."+Ls)!==this.inputWrapper.container&&(!(0,i.oq)(w,".e-daterangepicker.e-popup")||w.classList.contains("e-day"))&&(this.preventBlur=!1,this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&(this.applyFunction(p),this.isMobile||(this.isRangeIconClicked=!1)))}createInput(){let p=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(p=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Ue.II.createInput({floatLabelType:this.floatLabelType,element:this.inputElement,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:p,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-range-icon e-icons"]},this.createElement),(0,i.Y4)(this.inputElement,{"aria-readonly":this.readonly?"true":"false",tabindex:"0","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_popup","aria-expanded":"false",role:"combobox",autocomplete:"off","aria-disabled":this.enabled?"false":"true",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),Ue.II.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),!(0,i.le)(this.placeholder)&&""!==this.placeholder.trim()&&Ue.II.addAttributes({"aria-placeholder":this.placeholder},this.inputElement),this.setEleWidth(this.width),(0,i.cn)([this.inputWrapper.container],"e-date-range-wrapper"),(0,i.le)(this.inputElement.getAttribute("name"))&&(0,i.Y4)(this.inputElement,{name:this.element.id}),"hidden"===this.inputElement.type&&(this.inputWrapper.container.style.display="none"),this.refreshControl(),this.previousEleValue=this.inputElement.value,this.inputElement.setAttribute("value",this.inputElement.value),this.startCopy=this.startDate,this.endCopy=this.endDate}setEleWidth(p){this.inputWrapper.container.style.width="string"==typeof p?this.width:"number"==typeof p?(0,i.Ac)(this.width):"100%"}adjustLongHeaderWidth(){"Wide"===this.dayHeaderFormat&&(0,i.cn)([this.popupWrapper],"e-daterange-day-header-lg")}refreshControl(){this.validateMinMax(),this.strictMode&&this.validateRangeStrict();const p=this.disabledDates();this.strictMode&&p&&(this.startValue=this.previousStartValue,this.setProperties({startDate:this.startValue},!0),this.endValue=this.previousEndValue,this.setProperties({endDate:this.endValue},!0),this.setValue()),this.updateInput(),this.strictMode||this.validateRange(),!this.strictMode&&p&&this.clearRange(),!(0,i.le)(this.endValue)&&!(0,i.le)(this.startValue)&&!p&&this.disabledDateRender(),this.errorClass(),this.previousStartValue=(0,i.le)(this.startValue)||isNaN(+this.startValue)?null:new Date(+this.startValue),this.previousEndValue=(0,i.le)(this.endValue)||isNaN(+this.endValue)?null:new Date(+this.endValue)}updateInput(){if(!(0,i.le)(this.endValue)&&!(0,i.le)(this.startValue)){const p={format:this.formatString,type:"date",skeleton:"yMd"},w=this.globalize.formatDate(this.startValue,p),k=this.globalize.formatDate(this.endValue,p);Ue.II.setValue(w+" "+this.separator+" "+k,this.inputElement,this.floatLabelType,this.showClearButton),this.previousStartValue=new Date(+this.startValue),this.previousEndValue=new Date(+this.endValue)}!this.strictMode&&(0,i.le)(this.value)&&this.invalidValueString&&Ue.II.setValue(this.invalidValueString,this.inputElement,this.floatLabelType,this.showClearButton)}checkInvalidRange(p){if(!(0,i.le)(p)){let k,N,w=!1,R=null,K=null,G=null,ye=!1,ee=!1,te=!1;if("string"==typeof p){const ie=p.split(" "+this.separator+" ");2===ie.length?(R=ie[0],K=ie[1]):(w=!0,G=p)}else p.length>0?(k=p[0],N=p[1]):(k=p.start,N=p.end),k instanceof Date||"object"==typeof k?k instanceof Date?ye=!0:(0,i.le)(k)||(te=!0):R=this.getstringvalue(k),N instanceof Date||"object"==typeof N?N instanceof Date?ee=!0:(0,i.le)(N)||(te=!0):K=this.getstringvalue(N);((0,i.le)(R)&&!ye&&!(0,i.le)(K)||!(0,i.le)(R)&&!ee&&(0,i.le)(K))&&(w=!0),te&&(R=K=G=null,w=!0),R&&(w=w||this.checkInvalidValue(R)),K&&(w=w||this.checkInvalidValue(K)),w&&(ye&&!te&&(R=k.toLocaleDateString()),ee&&!te&&(K=N.toLocaleDateString()),(0,i.le)(R)||(0,i.le)(K)?(0,i.le)(R)?(0,i.le)(K)||(G=K):G=R:G=R+" "+this.separator+" "+K,this.invalidValueString=G,this.setProperties({value:null},!0),this.setProperties({startValue:null},!0),this.setProperties({endValue:null},!0),this.startDate=null,this.endDate=null)}}getstringvalue(p){let w=null;return(0,i.le)(p)||"number"!=typeof p?!(0,i.le)(p)&&"string"==typeof p&&(w=""+p):w=p.toString(),w}checkInvalidValue(p){const w=p;let k=!1,N=null;if(N={format:this.formatString,type:"date",skeleton:"yMd"},"string"!=typeof w)k=!0;else{const R=new i.eC(this.locale);if(!this.checkDateValue(R.parseDate(w,N))){let K=null,G=null;K=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,G=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,(!K.test(w)&&!G.test(w)||/^[a-zA-Z0-9- ]*$/.test(w)||isNaN(+new Date(this.checkValue(w))))&&(k=!0)}}return k}isDateDisabled(p){if((0,i.le)(p))return!1;const w=new Date(+p);if(+w<+this.min||+w>+this.max)return!0;this.virtualRenderCellArgs={date:w,isDisabled:!1};const k=this.virtualRenderCellArgs;return this.virtualRenderCellEvent(k),!!k.isDisabled}disabledDateRender(){this.disabledDays=[],this.disabledDayCnt=null;const p=new Date(+this.startValue);let w=0;for(;+p<=+this.endValue&&+this.endValue<=+this.max;){this.virtualRenderCellArgs={date:p,isDisabled:!1};const k=this.virtualRenderCellArgs;this.virtualRenderCellEvent(k),k.isDisabled&&(this.disabledDays.push(new Date(+k.date)),+p>+this.startValue&&+p<+this.endValue&&w++),this.addDay(p,1,null,this.max,this.min)}this.disabledDayCnt=w}virtualRenderCellEvent(p){(0,i.l7)(this.virtualRenderCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",p)}disabledDates(){let p=!1,w=!1;return!(0,i.le)(this.endValue)&&!(0,i.le)(this.startValue)&&(p=this.isDateDisabled(this.startValue),w=this.isDateDisabled(this.endValue),this.isPopupOpen()||(this.currentDate=null),this.setValue()),p||w}setModelValue(){this.value||null!==this.startDate||null!==this.endDate?null===this.value||null===this.value.start?null===this.value?this.setProperties({value:[this.startDate,this.endDate]},!0):null===this.value.start&&this.setProperties({value:{start:this.startDate,end:this.endDate}},!0):this.value&&this.value.length>0||this.valueType&&this.valueType.length>0?((+this.startDate!=+this.value[0]||+this.endDate!=+this.value[1])&&this.setProperties({value:[this.startDate,this.endDate]},!0),this.value&&null==this.value[0]&&null==this.value[1]&&this.setProperties({value:null},!0)):this.value&&this.value.start&&this.setProperties({value:{start:this.startDate,end:this.endDate}},!0):this.setProperties({value:null},!0),this.createHiddenInput()}dispatchEvent(p,w){const k=document.createEvent("HTMLEvents");k.initEvent(w,!1,!0),p.dispatchEvent(k),this.firstHiddenChild.dispatchEvent(k)}changeTrigger(p){(+this.initStartDate!=+this.startValue||+this.initEndDate!=+this.endValue)&&(this.setProperties({endDate:this.checkDateValue(this.endValue)},!0),this.setProperties({startDate:this.checkDateValue(this.startValue)},!0),this.setModelValue(),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.rangeArgs(p))),this.previousEleValue=this.inputElement.value,this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue)}navigateTo(p,w){if(this.isPopupOpen()){if("month"===p.toLowerCase())p="Month";else if("year"===p.toLowerCase())p="Year";else{if("decade"!==p.toLowerCase())return;p="Decade"}this.getViewNumber(p)<this.getViewNumber(this.depth)&&(p=this.depth),this.isMobile?super.navigateTo.call(this,p,w):(w<this.min?w=new Date(+this.min):w>=this.max&&(w=new Date(+this.max)),"Month"===p&&this.isSameMonth(w,this.max)?w=new Date(this.max.getFullYear(),this.max.getMonth()-1,this.min.getDate()):"Year"===p&&this.isSameYear(w,this.max)?w=new Date(this.max.getFullYear()-1,this.max.getMonth(),this.max.getDate()):"Decade"===p&&this.isSameDecade(w,this.max)&&(w=new Date(this.max.getFullYear()-10,this.max.getMonth(),this.max.getDate())),this.leftCalCurrentDate=w,this.navigate(this.leftCalendar,this.leftCalCurrentDate,p),w="Month"===p?new Date(this.currentDate.setMonth(this.currentDate.getMonth()+1)):"Year"===p?new Date(this.currentDate.setFullYear(this.currentDate.getFullYear()+1)):new Date(this.currentDate.setFullYear(this.currentDate.getFullYear()+10)),this.rightCalCurrentDate=w,this.navigate(this.rightCalendar,this.rightCalCurrentDate,p),this.leftKeyboardModule=this.rightKeyboardModule=null,this.updateNavIcons()),this.currentView()===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate(),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar])}}navigate(p,w,k){this.calendarElement=p,this.table=p.querySelector("table"),this.tableBodyElement=p.querySelector("tbody"),this.headerTitleElement=p.querySelector(".e-title"),this.tableHeadElement=p.querySelector("thead"),this.contentElement=p.querySelector(".e-content"),this.previousIcon=p.querySelector(".e-prev"),this.nextIcon=p.querySelector(".e-next"),this.effect="e-zoomin",super.navigateTo.call(this,k,w)}focusIn(){document.activeElement!==this.inputElement&&this.enabled&&((0,i.cn)([this.inputWrapper.container],[ms]),this.inputElement.focus())}focusOut(){const p=this.preventBlur;document.activeElement===this.inputElement&&((0,i.IV)([this.inputWrapper.container],[ms]),this.preventBlur=!1,this.inputElement.blur(),this.preventBlur=p)}destroy(){this.unBindEvents(),this.hide(null);const p={"aria-readonly":this.readonly?"true":"false",tabindex:"0","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_popup","aria-expanded":"false",role:"combobox",autocomplete:"off","aria-disabled":this.enabled?"false":"true",autocorrect:"off",autocapitalize:"off","aria-invalid":"false",spellcheck:"false"};this.inputElement&&((0,i.IV)([this.inputElement],[ti]),i.bi.remove(this.inputElement,"blur",this.inputBlurHandler),Ue.II.removeAttributes(p,this.inputElement),(0,i.le)(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.inputElement.classList.remove("e-input"),(0,i.le)(this.inputWrapper)||(i.bi.remove(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),(0,i.og)(this.inputWrapper.container))),!(0,i.le)(this.inputKeyboardModule)&&!this.isMobile&&this.inputKeyboardModule.destroy(),this.popupObj&&(this.isMobile||this.clearCalendarEvents()),super.destroy(),this.inputWrapper=this.popupWrapper=this.popupObj=this.cloneElement=this.presetElement=null,this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler),!(0,i.le)(this.firstHiddenChild)&&!(0,i.le)(this.secondHiddenChild)&&((0,i.og)(this.firstHiddenChild),(0,i.og)(this.secondHiddenChild),this.firstHiddenChild=this.secondHiddenChild=null,this.inputElement.setAttribute("name",this.element.getAttribute("data-name")),this.inputElement.removeAttribute("data-name"))}ensureInputAttribute(){const p=[];for(let w=0;w<this.inputElement.attributes.length;w++)p[w]=this.inputElement.attributes[w].name;for(let w=0;w<p.length;w++)(0,i.le)(this.cloneElement.getAttribute(p[w]))?("value"===p[w].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(p[w])):("value"===p[w].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(p[w])),this.inputElement.setAttribute(p[w],this.cloneElement.getAttribute(p[w])))}getModuleName(){return"daterangepicker"}getPersistData(){return this.addOnPersist(["startDate","endDate","value"])}getSelectedRange(){let p;return(0,i.le)(this.startValue)||(0,i.le)(this.endValue)?p=0:(p=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1,this.disabledDateRender(),(0,i.le)(this.disabledDayCnt)||(p-=this.disabledDayCnt,this.disabledDayCnt=null)),{startDate:this.startValue,endDate:this.endValue,daySpan:p}}show(p,w){this.isMobile&&this.popupObj&&this.popupObj.refreshPosition(),this.enabled&&this.readonly||!this.enabled||this.popupObj||this.isPopupOpen()||(p&&(this.targetElement=p),this.createPopup(),(this.isMobile||i.AR.isDevice)&&(this.mobileRangePopupWrap=this.createElement("div",{className:"e-daterangepick-mob-popup-wrap"}),document.body.appendChild(this.mobileRangePopupWrap)),this.openEventArgs={popup:this.popupObj||null,cancel:!1,date:this.inputElement.value,model:this,event:w||null,appendTo:this.isMobile||i.AR.isDevice?this.mobileRangePopupWrap:document.body},this.trigger("open",this.openEventArgs,N=>{if(this.openEventArgs=N,!this.openEventArgs.cancel){this.openEventArgs.appendTo.appendChild(this.popupWrapper),this.showPopup(p,w);const R=!this.isCustomRange||this.isMobile&&this.isCustomRange;!(0,i.o8)(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)&&R&&this.setScrollPosition(),this.checkMinMaxDays(),this.isMobile&&!(0,i.le)(this.startDate)&&(0,i.le)(this.endDate)&&(this.endButton.element.classList.add(as),this.startButton.element.classList.remove(as),this.endButton.element.removeAttribute("disabled"),this.selectableDates()),super.setOverlayIndex(this.mobileRangePopupWrap,this.popupObj.element,this.modal,this.isMobile||i.AR.isDevice)}}))}hide(p){this.popupObj?((0,i.le)(this.previousEndValue)&&(0,i.le)(this.previousStartValue)?this.clearRange():((0,i.le)(this.previousStartValue)?(this.startValue=null,this.setValue()):(this.startValue=new Date(this.checkValue(this.previousStartValue)),this.setValue(),this.currentDate=new Date(this.checkValue(this.startValue))),(0,i.le)(this.previousEndValue)?(this.endValue=null,this.setValue()):(this.endValue=new Date(this.checkValue(this.previousEndValue)),this.setValue())),this.isPopupOpen()&&(this.closeEventArgs={cancel:!1,popup:this.popupObj,date:this.inputElement.value,model:this,event:p||null},this.trigger("close",this.closeEventArgs,k=>{this.closeEventArgs=k,this.closeEventArgs.cancel?(0,i.IV)([this.inputWrapper.buttons[0]],as):(this.isMobile&&!(0,i.le)(this.startButton)&&!(0,i.le)(this.endButton)&&(i.bi.remove(this.startButton.element,"click touchstart",this.deviceHeaderClick),i.bi.remove(this.endButton.element,"click touchstart",this.deviceHeaderClick)),this.popupObj&&(this.popupObj.hide(),this.preventBlur&&(this.inputElement.focus(),(0,i.cn)([this.inputWrapper.container],[ms]))),this.isMobile||(!(0,i.le)(this.leftKeyboardModule)&&!(0,i.le)(this.rightKeyboardModule)&&(this.leftKeyboardModule.destroy(),this.rightKeyboardModule.destroy()),(0,i.le)(this.presetElement)||this.presetKeyboardModule.destroy(),(0,i.le)(this.cancelButton)||this.btnKeyboardModule.destroy()),this.targetElement=null,(0,i.IV)([document.body],Eo),i.bi.remove(document,"mousedown touchstart",this.documentHandler),this.isMobile&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),(this.isMobile||i.AR.isDevice)&&((0,i.le)(this.mobileRangePopupWrap)||(this.mobileRangePopupWrap.remove(),this.mobileRangePopupWrap=null)),this.isKeyPopup=this.dateDisabled=!1),this.updateClearIconState(),this.updateHiddenInput(),this.isMobile&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")}))):(this.updateClearIconState(),this.updateHiddenInput(),this.isMobile&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"))}setLocale(){this.globalize=new i.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Ue.II.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.updateHiddenInput(),this.changeTrigger()}refreshChange(){this.checkView(),this.refreshControl(),this.changeTrigger()}setDate(){Ue.II.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.refreshChange()}enableInput(){+this.min<=+this.max&&(this.setProperties({enabled:!0},!0),Ue.II.setEnabled(this.enabled,this.inputElement),this.element.hasAttribute("disabled")&&this.bindEvents())}clearModelvalue(p,w){this.setProperties({startDate:null},!0),this.setProperties({endDate:null},!0),w.value&&w.value.length>0?this.setProperties({value:null},!0):(w.value&&w.value.start||w.value&&!w.value.start)&&this.setProperties({value:{start:null,end:null}},!0),this.updateValue(),this.setDate()}createHiddenInput(){(0,i.le)(this.firstHiddenChild)&&(0,i.le)(this.secondHiddenChild)&&(this.firstHiddenChild=this.createElement("input"),this.secondHiddenChild=this.createElement("input")),(0,i.le)(this.inputElement.getAttribute("name"))||(this.inputElement.setAttribute("data-name",this.inputElement.getAttribute("name")),this.inputElement.removeAttribute("name")),(0,i.Y4)(this.firstHiddenChild,{type:"text",name:this.inputElement.getAttribute("data-name"),class:Yr}),(0,i.Y4)(this.secondHiddenChild,{type:"text",name:this.inputElement.getAttribute("data-name"),class:Yr});const p={type:"datetime",skeleton:"yMd"};this.firstHiddenChild.value=this.startDate&&this.globalize.formatDate(this.startDate,p),this.secondHiddenChild.value=this.endDate&&this.globalize.formatDate(this.endDate,p),this.inputElement.parentElement.appendChild(this.firstHiddenChild),this.inputElement.parentElement.appendChild(this.secondHiddenChild)}setMinMaxDays(){this.isPopupOpen()&&(this.removeClassDisabled(),this.checkMinMaxDays(),this.isMobile&&this.selectableDates(),!this.strictMode&&(0,i.le)(this.startValue)&&(0,i.le)(this.endValue)?this.removeSelection():this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),this.updateHeader())}onPropertyChanged(p,w){const k={format:this.formatString,type:"date",skeleton:"yMd"};for(const N of Object.keys(p))switch(["maxDays","minDays","value"].indexOf(N)<0&&this.hide(null),N){case"width":this.setEleWidth(this.width);break;case"separator":this.previousEleValue=this.inputElement.value,this.setProperties({separator:p.separator},!0),this.updateInput(),this.changeTrigger();break;case"placeholder":Ue.II.setPlaceholder(p.placeholder,this.inputElement),this.setProperties({placeholder:p.placeholder},!0);break;case"readonly":Ue.II.setReadonly(this.readonly,this.inputElement),this.inputElement.setAttribute("aria-readonly",""+this.readonly),this.setRangeAllowEdit();break;case"cssClass":this.updateCssClass(p.cssClass,w.cssClass);break;case"enabled":this.setProperties({enabled:p.enabled},!0),Ue.II.setEnabled(this.enabled,this.inputElement),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1;break;case"allowEdit":this.setRangeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:p.enableRtl},!0),Ue.II.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"zIndex":this.setProperties({zIndex:p.zIndex},!0);break;case"format":this.setProperties({format:p.format},!0),this.checkFormat(),this.updateInput(),this.changeTrigger();break;case"locale":this.globalize=new i.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Ue.II.setPlaceholder(this.placeholder,this.inputElement),this.setLocale();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.setDataAttribute(!0),this.checkHtmlAttributes(!0);break;case"showClearButton":Ue.II.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"startDate":"string"==typeof p.startDate&&(p.startDate=this.globalize.parseDate(p.startDate,k)),+this.initStartDate!=+p.startDate&&(this.startValue=this.checkDateValue(new Date(this.checkValue(p.startDate))),this.setDate(),this.setValue());break;case"endDate":"string"==typeof p.endDate&&(p.endDate=this.globalize.parseDate(p.endDate,k)),+this.initEndDate!=+p.endDate&&(this.endValue=this.checkDateValue(new Date(this.checkValue(p.endDate))),this.setDate(),this.setValue());break;case"value":if(this.invalidValueString=null,this.checkInvalidRange(p.value),"string"==typeof p.value)if(this.invalidValueString)this.clearModelvalue(p,w);else{const K=p.value.split(" "+this.separator+" ");this.value=[new Date(K[0]),new Date(K[1])],this.updateValue(),this.setDate()}else!(0,i.le)(p.value)&&p.value.length>0||!(0,i.le)(p.value)&&p.value.start?(this.valueType=p.value,null===p.value[0]||null===p.value.start?(1===p.value.length||p.value.start||null===p.value[1]||null===p.value.start)&&this.clearModelvalue(p,w):(+this.initStartDate!=+p.value[0]||+this.initEndDate!=+p.value[1]||+this.initStartDate!=+(p.value.start||+this.initEndDate!=+p.value.start))&&((1===p.value.length||p.value.start)&&(this.modelValue=p.value),this.updateValue(),this.setDate())):((0,i.le)(this.value)||null==p.value.start)&&(this.valueType=p.value,this.startValue=null,this.endValue=null,this.clearModelvalue(p,w));if(this.isPopupOpen()){if((0,i.le)(this.startValue)&&(0,i.le)(this.endValue))return this.removeSelection(),void(this.isMobile&&this.deviceHeaderUpdate());this.isMobile?(this.navigate(this.deviceCalendar,this.startValue,this.currentView()),this.deviceHeaderUpdate()):(this.navigate(this.leftCalendar,this.startValue,this.currentView()),this.updateControl(this.leftCalendar),this.navigate(this.rightCalendar,this.endValue,this.currentView()),this.updateControl(this.rightCalendar)),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),this.updateHeader(),this.applyButton.disabled=this.applyButton.element.disabled=!1}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"minDays":this.setProperties({minDays:p.minDays},!0),this.refreshChange(),this.setMinMaxDays();break;case"maxDays":this.setProperties({maxDays:p.maxDays},!0),this.refreshChange(),this.setMinMaxDays();break;case"min":this.setProperties({min:this.checkDateValue(new Date(this.checkValue(p.min)))},!0),this.previousEleValue=this.inputElement.value,this.enableInput(),this.refreshChange();break;case"max":this.setProperties({max:this.checkDateValue(new Date(this.checkValue(p.max)))},!0),this.enableInput(),this.refreshChange();break;case"strictMode":this.invalidValueString=null,this.setProperties({strictMode:p.strictMode},!0),this.refreshChange();break;case"presets":this.setProperties({presets:p.presets},!0),this.processPresets();break;case"floatLabelType":this.floatLabelType=p.floatLabelType,Ue.II.removeFloating(this.inputWrapper),Ue.II.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"start":this.setProperties({start:p.start},!0),this.refreshChange();break;case"depth":this.setProperties({depth:p.depth},!0),this.refreshChange()}}};Yt([(0,i.Z9)(null)],$s.prototype,"value",void 0),Yt([(0,i.Z9)(!1)],$s.prototype,"enablePersistence",void 0),Yt([(0,i.Z9)(new Date(1900,0,1))],$s.prototype,"min",void 0),Yt([(0,i.Z9)(new Date(2099,11,31))],$s.prototype,"max",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"locale",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"firstDayOfWeek",void 0),Yt([(0,i.Z9)(!1)],$s.prototype,"weekNumber",void 0),Yt([(0,i.Z9)("Gregorian")],$s.prototype,"calendarMode",void 0),Yt([(0,i.Z9)(!1)],$s.prototype,"openOnFocus",void 0),Yt([(0,i.ju)()],$s.prototype,"created",void 0),Yt([(0,i.ju)()],$s.prototype,"destroyed",void 0),Yt([(0,i.ju)()],$s.prototype,"change",void 0),Yt([(0,i.ju)()],$s.prototype,"cleared",void 0),Yt([(0,i.ju)()],$s.prototype,"navigated",void 0),Yt([(0,i.ju)()],$s.prototype,"renderDayCell",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"startDate",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"endDate",void 0),Yt([(0,i.FE)([{}],uo)],$s.prototype,"presets",void 0),Yt([(0,i.Z9)("")],$s.prototype,"width",void 0),Yt([(0,i.Z9)(1e3)],$s.prototype,"zIndex",void 0),Yt([(0,i.Z9)(!0)],$s.prototype,"showClearButton",void 0),Yt([(0,i.Z9)(!0)],$s.prototype,"showTodayButton",void 0),Yt([(0,i.Z9)("Month")],$s.prototype,"start",void 0),Yt([(0,i.Z9)("Month")],$s.prototype,"depth",void 0),Yt([(0,i.Z9)("")],$s.prototype,"cssClass",void 0),Yt([(0,i.Z9)("-")],$s.prototype,"separator",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"minDays",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"maxDays",void 0),Yt([(0,i.Z9)(!1)],$s.prototype,"strictMode",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"keyConfigs",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"format",void 0),Yt([(0,i.Z9)(!0)],$s.prototype,"enabled",void 0),Yt([(0,i.Z9)(!1)],$s.prototype,"readonly",void 0),Yt([(0,i.Z9)(!0)],$s.prototype,"allowEdit",void 0),Yt([(0,i.Z9)("Never")],$s.prototype,"floatLabelType",void 0),Yt([(0,i.Z9)(null)],$s.prototype,"placeholder",void 0),Yt([(0,i.Z9)({})],$s.prototype,"htmlAttributes",void 0),Yt([(0,i.ju)()],$s.prototype,"open",void 0),Yt([(0,i.ju)()],$s.prototype,"close",void 0),Yt([(0,i.ju)()],$s.prototype,"select",void 0),Yt([(0,i.ju)()],$s.prototype,"focus",void 0),Yt([(0,i.ju)()],$s.prototype,"blur",void 0),$s=Yt([i.Zl],$s);var mn=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const Qr="e-error",ur=(new Date).getDate(),ir=(new Date).getMonth(),qs=(new Date).getFullYear(),$r="e-timepicker",xi="e-active",v="e-hover",M="e-navigation",$="e-disabled",Ce="e-input-focus",pt="e-list-item",Gi="e-time-overflow",sn="e-non-edit",ts=["title","class","style"];var wn;(wn||(wn={})).createListItems=function p(w,k,N,R,K,G){let ye;const ee=6e4*G,te=[],ie=[];ye=+k.setMilliseconds(0);const xe=+N.setMilliseconds(0);for(;xe>=ye;)ie.push(ye),te.push(R.formatDate(new Date(ye),{format:K,type:"time"})),ye+=ee;return{collection:ie,list:$e.Kh.createList(w,te,null,!0)}};class Sn extends i.rt{}mn([(0,i.Z9)("day")],Sn.prototype,"day",void 0),mn([(0,i.Z9)("month")],Sn.prototype,"month",void 0),mn([(0,i.Z9)("year")],Sn.prototype,"year",void 0),mn([(0,i.Z9)("day of the week")],Sn.prototype,"dayOfTheWeek",void 0),mn([(0,i.Z9)("hour")],Sn.prototype,"hour",void 0),mn([(0,i.Z9)("minute")],Sn.prototype,"minute",void 0),mn([(0,i.Z9)("second")],Sn.prototype,"second",void 0);let Ws=class extends i.wA{constructor(p,w){super(p,w),this.liCollections=[],this.timeCollections=[],this.disableItemCollection=[],this.invalidValueString=null,this.isAngular=!1,this.preventChange=!1,this.maskedDateValue="",this.moduleName=this.getModuleName(),this.timeOptions=p}preRender(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),(0,i.IV)([this.cloneElement],[$r,"e-control","e-lib"]),this.inputElement=this.element,this.angularTag=null,this.formElement=(0,i.oq)(this.element,"form"),"EJS-TIMEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.openPopupEventArgs={appendTo:document.body}}render(){this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval(),this.bindEvents(),this.validateDisable(),this.setValue(this.getFormattedValue(this.value)),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.inputEleValue=this.getDateObject(this.inputElement.value),this.renderComplete()}setTimeAllowEdit(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):(0,i.Y4)(this.inputElement,{readonly:""}),this.clearIconState()}clearIconState(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&(0,i.IV)([this.inputWrapper.container],[sn]):""===this.inputElement.value?(0,i.IV)([this.inputWrapper.container],[sn]):(0,i.cn)([this.inputWrapper.container],[sn])}validateDisable(){this.setMinMax(this.initMin,this.initMax),this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null,!isNaN(+this.value)&&null!==this.value&&(this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax)))}validationAttribute(p,w){const k=p.getAttribute("name")?p.getAttribute("name"):p.getAttribute("id");w.setAttribute("name",k),p.removeAttribute("name");const N=["required","aria-required","form"];for(let R=0;R<N.length;R++){if((0,i.le)(p.getAttribute(N[R])))continue;const K=p.getAttribute(N[R]);w.setAttribute(N[R],K),p.removeAttribute(N[R])}}initialize(){this.globalize=new i.eC(this.locale),this.defaultCulture=new i.eC("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(this.scrollTo)))},!0),null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1),this.l10n=new i.E7("timepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,(0,i.le)(this.element.getAttribute("id"))?(this.element.id=(0,i.QI)("ej2_timepicker"),null!==this.angularTag&&(0,i.Y4)(this.inputElement,{id:this.element.id+"_input"})):null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),(0,i.le)(this.inputElement.getAttribute("name"))&&(0,i.Y4)(this.inputElement,{name:this.element.id}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})}checkTimeFormat(){this.formatString=this.format?"string"==typeof this.format?this.format:(0,i.le)(this.format.skeleton)||""===this.format.skeleton?this.globalize.getDatePattern({type:"time",skeleton:"short"}):this.globalize.getDatePattern({type:"time",skeleton:this.format.skeleton}):null}checkDateValue(p){return!(0,i.le)(p)&&p instanceof Date&&!isNaN(+p)?p:null}createInputElement(){let p=this.cssClass,w=!this.enableMask;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(p=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Ue.II.createInput({element:this.inputElement,bindClearAction:w,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:p,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),(0,i.Y4)(this.inputElement,{"aria-haspopup":"true","aria-autocomplete":"list",tabindex:"0","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||Ue.II.addAttributes({style:this.inputStyle},this.inputElement),(0,i.cn)([this.inputWrapper.container],"e-time-wrapper")}getCldrDateTimeFormat(){let w;const k=new i.eC(this.locale).getDatePattern({skeleton:"yMd"});return w=this.isNullOrEmpty(this.formatString)?k+" "+this.cldrFormat("time"):this.formatString,w}checkInvalidValue(p){let w=!1;if("object"!=typeof p&&!(0,i.le)(p)){let k=p;"string"==typeof k&&(k=k.trim());let N=null,R=null;if("number"==typeof p?k=p.toString():"string"==typeof p&&(/^[a-zA-Z0-9- ]*$/.test(p)||(N=this.setCurrentDate(this.getDateObject(p)),(0,i.le)(N)&&(N=this.checkDateValue(this.globalize.parseDate(k,{format:this.getCldrDateTimeFormat(),type:"datetime"})),(0,i.le)(N)&&(N=this.checkDateValue(this.globalize.parseDate(k,{format:this.formatString,type:"dateTime",skeleton:"yMd"})))))),R=this.globalize.parseDate(k,{format:this.getCldrDateTimeFormat(),type:"datetime"}),N=!(0,i.le)(R)&&R instanceof Date&&!isNaN(+R)?R:null,(0,i.le)(N)&&k.replace(/\s/g,"").length){let K=null,G=null;K=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,G=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!K.test(k)&&!G.test(k)||/^[a-zA-Z0-9- ]*$/.test(p)||isNaN(+new Date(""+k))?w=!0:N=new Date(""+k)}w?(this.strictMode||(this.invalidValueString=k),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:N},!0),this.initValue=this.value)}}requiredModules(){const p=[];return this.enableMask&&p.push({args:[this],member:"MaskedDateTime"}),p}cldrFormat(p){let w;return w="en"===this.locale||"en-US"===this.locale?(0,i.NA)("timeFormats.short",(0,i.bD)()):this.getCultureTimeObject(i.qV,""+this.locale),w}destroy(){this.hide(),this.unBindEvents(),this.inputElement&&(Ue.II.removeAttributes({"aria-haspopup":"true","aria-autocomplete":"list",tabindex:"0","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"},this.inputElement),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),(0,i.le)(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),(0,i.le)(this.cloneElement.getAttribute("disabled"))&&Ue.II.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&(0,i.og)(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],(0,i.le)(this.rippleFn)||this.rippleFn(),super.destroy(),this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler)}ensureInputAttribute(){const p=[];for(let w=0;w<this.inputElement.attributes.length;w++)p[w]=this.inputElement.attributes[w].name;for(let w=0;w<p.length;w++)(0,i.le)(this.cloneElement.getAttribute(p[w]))?(this.inputElement.removeAttribute(p[w]),"value"===p[w].toLowerCase()&&(this.inputElement.value="")):(this.inputElement.setAttribute(p[w],this.cloneElement.getAttribute(p[w])),"value"===p[w].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(p[w])))}popupCreation(){this.popupWrapper=this.createElement("div",{className:$r+" e-popup",attrs:{id:this.element.id+"_popup",style:"visibility:hidden"}}),(0,i.le)(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!(0,i.le)(this.step)&&this.step>0&&(this.generateList(),(0,i.R3)([this.listWrapper],this.popupWrapper)),this.openPopupEventArgs.appendTo.appendChild(this.popupWrapper),this.addSelection(),this.renderPopup(),(0,i.og)(this.popupWrapper)}getPopupHeight(){const p=parseInt("240px",10),w=this.popupWrapper.getBoundingClientRect().height;return w>p?p:w}generateList(){this.createListItems(),this.wireListEvents(),this.rippleFn=(0,i.qx)(this.listWrapper,{duration:300,selector:"."+pt}),this.liCollections=this.listWrapper.querySelectorAll("."+pt)}renderPopup(){this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new u.GI(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:i.AR.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:i.AR.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:i.AR.isDevice?document.body:this.inputWrapper.container,offsetY:4,open:()=>{this.popupWrapper.style.visibility="visible",(0,i.cn)([this.inputWrapper.buttons[0]],xi)},close:()=>{(0,i.IV)([this.inputWrapper.buttons[0]],xi),this.unWireListEvents(),this.inputElement.setAttribute("aria-activedescendant","null"),(0,i.Od)(this.popupObj.element),this.popupObj.destroy(),this.popupWrapper.innerHTML="",this.listWrapper=this.popupWrapper=this.listTag=void 0},targetExitViewport:()=>{i.AR.isDevice||this.hide()}}),i.AR.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),this.popupObj.element.style.maxHeight="240px"}getFormattedValue(p){return(0,i.le)(this.checkDateValue(p))?null:this.globalize.formatDate(p,{skeleton:"medium",type:"time"})}getDateObject(p){if(!this.isNullOrEmpty(p)){const w=this.createDateObj(p),k=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(w)){const N=k?this.initValue.getDate():ur,R=k?this.initValue.getMonth():ir,K=k?this.initValue.getFullYear():qs;return new Date(K,R,N,w.getHours(),w.getMinutes(),w.getSeconds())}}return null}updateHtmlAttributeToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const p of Object.keys(this.htmlAttributes))if(ts.indexOf(p)>-1)if("class"===p){const w=this.htmlAttributes[p].replace(/\s+/g," ").trim();""!==w&&(0,i.cn)([this.inputWrapper.container],w.split(" "))}else if("style"===p){let w=this.inputWrapper.container.getAttribute(p);w=(0,i.le)(w)?this.htmlAttributes[p]:w+this.htmlAttributes[p],this.inputWrapper.container.setAttribute(p,w)}else this.inputWrapper.container.setAttribute(p,this.htmlAttributes[p])}updateHtmlAttributeToElement(){if(!(0,i.le)(this.htmlAttributes))for(const p of Object.keys(this.htmlAttributes))ts.indexOf(p)<0&&this.inputElement.setAttribute(p,this.htmlAttributes[p])}updateCssClass(p,w){(0,i.le)(w)||(w=w.replace(/\s+/g," ").trim()),(0,i.le)(p)||(p=p.replace(/\s+/g," ").trim()),Ue.II.setCssClass(p,[this.inputWrapper.container],w),this.popupWrapper&&Ue.II.setCssClass(p,[this.popupWrapper],w)}removeErrorClass(){(0,i.IV)([this.inputWrapper.container],Qr),(0,i.Y4)(this.inputElement,{"aria-invalid":"false"})}checkErrorState(p){const w=this.getDateObject(p);this.validateState(w)&&!this.invalidValueString||this.enableMask&&this.inputElement.value===this.maskedDateValue?this.removeErrorClass():((0,i.cn)([this.inputWrapper.container],Qr),(0,i.Y4)(this.inputElement,{"aria-invalid":"true"}))}validateInterval(){!(0,i.le)(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()}disableTimeIcon(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()}disableElement(p){(0,i.cn)(p,$)}enableElement(p){(0,i.IV)(p,$)}selectInputText(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)}setCursorToEnd(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)}getMeridianText(){let p;return p="en"===this.locale||"en-US"===this.locale?(0,i.NA)("dayPeriods.format.wide",(0,i.bD)()):(0,i.NA)("main."+this.locale+".dates.calendars.gregorian.dayPeriods.format.abbreviated",i.qV),p}getCursorSelection(){const p=this.inputElement;let w=0,k=0;return isNaN(p.selectionStart)||(w=p.selectionStart,k=p.selectionEnd),{start:Math.abs(w),end:Math.abs(k)}}getActiveElement(){return(0,i.le)(this.popupWrapper)?null:this.popupWrapper.querySelectorAll("."+xi)}isNullOrEmpty(p){return!!((0,i.le)(p)||"string"==typeof p&&""===p.trim())}setWidth(p){return"number"==typeof p?(0,i.Ac)(p):"string"==typeof p?p.match(/px|%|em/)?p:(0,i.Ac)(p):"100%"}setPopupWidth(p){return(p=this.setWidth(p)).indexOf("%")>-1&&(p=(this.containerStyle.width*parseFloat(p)/100).toString()+"px"),p}setScrollPosition(){const p=this.selectedElement;(0,i.le)(p)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(p)}findScrollTop(p){const w=this.getPopupHeight(),k=p.nextElementSibling,N=k?k.offsetTop:p.offsetTop,R=p.getBoundingClientRect().height;this.popupWrapper.scrollTop=N+p.offsetTop>w?k?N-(w/2+R/2):N:0}setScrollTo(){let p;if((0,i.le)(this.popupWrapper))this.popupWrapper.scrollTop=0;else{const w=this.popupWrapper.querySelectorAll("."+pt);if(w.length){const k=this.timeCollections[0],N=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();p=w[Math.round((N-k)/(6e4*this.step))]}}(0,i.le)(p)?this.popupWrapper.scrollTop=0:this.findScrollTop(p)}getText(){return(0,i.le)(this.checkDateValue(this.value))?"":this.getValue(this.value)}getValue(p){return(0,i.le)(this.checkDateValue(p))?null:this.globalize.formatDate(p,{format:this.cldrTimeFormat(),type:"time"})}cldrDateFormat(){let p;return p="en"===this.locale||"en-US"===this.locale?(0,i.NA)("dateFormats.short",(0,i.bD)()):this.getCultureDateObject(i.qV,""+this.locale),p}cldrTimeFormat(){let p;return p=this.isNullOrEmpty(this.formatString)?"en"===this.locale||"en-US"===this.locale?(0,i.NA)("timeFormats.short",(0,i.bD)()):this.getCultureTimeObject(i.qV,""+this.locale):this.formatString,p}dateToNumeric(){let p;return p="en"===this.locale||"en-US"===this.locale?(0,i.NA)("timeFormats.medium",(0,i.bD)()):(0,i.NA)("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",i.qV),p}getExactDateTime(p){return(0,i.le)(this.checkDateValue(p))?null:this.globalize.formatDate(p,{format:this.dateToNumeric(),type:"time"})}setValue(p){const w=this.checkValue(p);this.strictMode||this.validateState(w)?this.isNullOrEmpty(w)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(w):(null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)),this.updateInput(!0,this.initValue)}compareFormatChange(p){return(0,i.le)(p)?null:p!==this.getText()?this.getDateObject(p):this.getDateObject(this.value)}updatePlaceHolder(){Ue.II.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)}updateInputValue(p){Ue.II.setValue(p,this.inputElement,this.floatLabelType,this.showClearButton)}preventEventBubbling(p){p.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")}popupHandler(p){!this.enabled||(i.AR.isDevice&&this.inputElement.setAttribute("readonly",""),p.preventDefault(),this.isPopupOpen()?this.closePopup(0,p):(this.inputElement.focus(),this.show(p)))}mouseDownHandler(){!this.enabled||this.readonly||(this.inputElement.setSelectionRange(0,0),i.bi.add(this.inputElement,"mouseup",this.mouseUpHandler,this))}mouseUpHandler(p){if(!this.readonly){if(p.preventDefault(),this.enableMask)return p.preventDefault(),void this.notify("setMaskSelection",{module:"MaskedDateTime"});{i.bi.remove(this.inputElement,"mouseup",this.mouseUpHandler);const w=this.getCursorSelection();0===w.start&&w.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}}}focusSelection(){const p=new RegExp("^[a-zA-Z0-9]+$"),w=this.inputElement.value.split("");w.push(" ");const k=this.getCursorSelection();let N=0,R=0,K=!1;if(this.isTextSelected)N=k.start,R=k.end,this.isTextSelected=!1;else for(let G=0;G<w.length;G++)if(p.test(w[G])||(R=G,K=!0),K){if(k.start>=N&&k.end<=R){this.isTextSelected=!0;break}N=G+1,K=!1}return{start:N,end:R}}inputHandler(p){if(!this.readonly&&this.enabled)switch("right"!==p.action&&"left"!==p.action&&"tab"!==p.action&&p.preventDefault(),p.action){case"home":case"end":case"up":case"down":this.enableMask&&!this.readonly&&!this.isPopupOpen()&&(p.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:p})),(!this.enableMask||this.isPopupOpen())&&this.keyHandler(p);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,p)):this.updateValue(this.inputElement.value,p),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&p.stopPropagation();break;case"open":this.show(p);break;case"escape":this.updateInputValue(this.objToString(this.value)),this.enableMask&&(this.value||this.updateInputValue(this.maskedDateValue),this.createMask()),this.previousState(this.value),this.hide();break;case"close":this.hide();break;case"right":case"left":case"tab":case"shiftTab":!this.isPopupOpen()&&this.enableMask&&!this.readonly&&((0==this.inputElement.selectionStart&&this.inputElement.selectionEnd==this.inputElement.value.length||this.inputElement.selectionEnd!==this.inputElement.value.length&&"tab"==p.action||0!==this.inputElement.selectionStart&&"shiftTab"==p.action||"left"==p.action||"right"==p.action)&&p.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:p}));break;default:this.isNavigate=!1}}onMouseClick(p){const k=this.selectedElement=(0,i.oq)(p.target,"."+pt);this.setSelection(k,p),k&&k.classList.contains(pt)&&this.hide()}closePopup(p,w){if(this.isPopupOpen()&&this.popupWrapper){const k={popup:this.popupObj,event:w||null,cancel:!1,name:"open"};(0,i.IV)([document.body],Gi),this.trigger("close",k,N=>{N.cancel||(this.popupObj.hide(new i.fw({name:"FadeOut",duration:50,delay:p||0})),(0,i.IV)([this.inputWrapper.container],["e-icon-anim"]),(0,i.Y4)(this.inputElement,{"aria-expanded":"false"}),i.bi.remove(document,"mousedown touchstart",this.documentClickHandler)),i.AR.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),i.AR.isDevice&&((0,i.le)(this.mobileTimePopupWrap)||(this.mobileTimePopupWrap.remove(),this.mobileTimePopupWrap=null)),i.AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")})}else i.AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")}disposeServerPopup(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")}checkValueChange(p,w){if(this.strictMode||this.validateState(this.valueWithMinutes))if(w){const k=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!=+k&&this.valueProcess(p,k)}else(this.prevValue!==this.inputElement.value||(0,i.le)(this.checkDateValue(this.value)))&&this.valueProcess(p,this.compareFormatChange(this.inputElement.value));else null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!=+this.value&&this.changeEvent(p)}onMouseOver(p){const w=(0,i.oq)(p.target,"."+pt);this.setHover(w,v)}setHover(p,w){this.enabled&&this.isValidLI(p)&&!p.classList.contains(w)&&(this.removeHover(w),(0,i.cn)([p],w),w===M&&p.setAttribute("aria-selected","true"))}setSelection(p,w){this.isValidLI(p)&&(this.checkValue(p.getAttribute("data-value")),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}),this.selectedElement=p,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(p),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),(0,i.cn)([this.selectedElement],xi),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(w,!0))}onMouseLeave(){this.removeHover(v)}scrollHandler(){"timepicker"===this.getModuleName()&&i.AR.isDevice||this.hide()}setMinMax(p,w){(0,i.le)(this.checkDateValue(p))&&(this.initMin=this.getDateObject("12:00:00 AM")),(0,i.le)(this.checkDateValue(w))&&(this.initMax=this.getDateObject("11:59:59 PM"))}validateMinMax(p,w,k){const N=p instanceof Date?p:this.getDateObject(p);return(0,i.le)(this.checkDateValue(N))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():p=this.strictOperation(this.initMin,this.initMax,p,N),this.strictMode&&(p=this.valueIsDisable(p)?p:null),this.checkErrorState(p),p}valueIsDisable(p){if(this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;const w=p instanceof Date?this.objToString(p):p;for(let k=0;k<this.disableItemCollection.length;k++)if(w===this.disableItemCollection[k])return!1}return!0}validateState(p){if(!this.strictMode){if(!this.valueIsDisable(p))return!1;{const w=this.setCurrentDate(this.getDateObject(p)),k=this.setCurrentDate(this.getDateObject(this.initMax)),N=this.setCurrentDate(this.getDateObject(this.initMin));if((0,i.le)(this.checkDateValue(w))){if(+k<+N||""!==this.inputElement.value)return!1}else if(+w>+k||+w<+N)return!1}}return!0}strictOperation(p,w,k,N){const R=this.createDateObj(this.getFormattedValue(w)),K=this.createDateObj(this.getFormattedValue(p)),G=this.createDateObj(this.getFormattedValue(N));if(this.strictMode){if(+K>+R)return this.disableTimeIcon(),this.initValue=this.getDateObject(R),this.updateInputValue(this.getValue(this.initValue)),this.enableMask&&this.createMask(),this.inputElement.value;if(+K>=+G)return this.getDateObject(K);if(+G>=+R||+K==+R)return this.getDateObject(R)}else if(+K>+R&&(this.disableTimeIcon(),!isNaN(+this.createDateObj(k))))return k;return k}bindEvents(){i.bi.add(this.inputWrapper.buttons[0],"mousedown",this.popupHandler,this),i.bi.add(this.inputElement,"blur",this.inputBlurHandler,this),i.bi.add(this.inputElement,"focus",this.inputFocusHandler,this),i.bi.add(this.inputElement,"change",this.inputChangeHandler,this),i.bi.add(this.inputElement,"input",this.inputEventHandler,this),this.enableMask&&i.bi.add(this.inputElement,"keydown",this.keydownHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&i.bi.add(this.formElement,"reset",this.formResetHandler,this),i.AR.isDevice||(this.keyConfigure=(0,i.l7)(this.keyConfigure,this.keyConfigs),this.inputEvent=new i.nv(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.showClearButton&&this.inputElement&&i.bi.add(this.inputElement,"mousedown",this.mouseDownHandler,this))}keydownHandler(p){"Delete"===p.code&&this.enableMask&&!this.popupObj&&!this.readonly&&this.notify("keyDownHandler",{module:"MaskedDateTime",e:p})}formResetHandler(){if(this.enabled&&!this.inputElement.disabled){let p=this.inputElement.getAttribute("value"),w=this.checkDateValue(this.inputEleValue);"EJS-TIMEPICKER"===this.element.tagName&&(w=null,p="",this.inputElement.setAttribute("value","")),this.setProperties({value:w},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value,this.inputElement&&(this.updateInputValue(p),this.enableMask&&(p||this.updateInputValue(this.maskedDateValue),this.createMask()),this.checkErrorState(p),this.prevValue=this.inputElement.value)}}inputChangeHandler(p){!this.enabled||p.stopPropagation()}inputEventHandler(){this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})}unBindEvents(){this.inputWrapper&&i.bi.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.popupHandler),i.bi.remove(this.inputElement,"blur",this.inputBlurHandler),i.bi.remove(this.inputElement,"focus",this.inputFocusHandler),i.bi.remove(this.inputElement,"change",this.inputChangeHandler),i.bi.remove(this.inputElement,"input",this.inputEventHandler),this.inputEvent&&this.inputEvent.destroy(),i.bi.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),this.showClearButton&&!(0,i.le)(this.inputWrapper.clearButton)&&i.bi.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler)}bindClearEvent(){this.showClearButton&&this.inputWrapper.clearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)}raiseClearedEvent(p){this.trigger("cleared",{event:p})}clearHandler(p){!this.enabled||(p.preventDefault(),(0,i.le)(this.value)?(this.resetState(),this.raiseClearedEvent(p)):this.clear(p),this.popupWrapper&&(this.popupWrapper.scrollTop=0),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}))}clear(p){this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(p),this.changeEvent(p)}setZIndex(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())}checkAttributes(p){const w=p?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"];let k;for(const N of w)if(!(0,i.le)(this.inputElement.getAttribute(N)))switch(N){case"disabled":if((0,i.le)(this.timeOptions)||void 0===this.timeOptions.enabled||p){const R=!("disabled"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N));this.setProperties({enabled:R},!p)}break;case"style":this.inputStyle=this.inputElement.getAttribute(N);break;case"readonly":if((0,i.le)(this.timeOptions)||void 0===this.timeOptions.readonly||p){const R="readonly"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N);this.setProperties({readonly:R},!p)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(N));break;case"step":this.step=parseInt(this.inputElement.getAttribute(N),10);break;case"placeholder":((0,i.le)(this.timeOptions)||void 0===this.timeOptions.placeholder||p)&&this.setProperties({placeholder:this.inputElement.getAttribute(N)},!p);break;case"min":((0,i.le)(this.timeOptions)||void 0===this.timeOptions.min||p)&&(k=new Date(this.inputElement.getAttribute(N)),(0,i.le)(this.checkDateValue(k))||this.setProperties({min:k},!p));break;case"max":((0,i.le)(this.timeOptions)||void 0===this.timeOptions.max||p)&&(k=new Date(this.inputElement.getAttribute(N)),(0,i.le)(this.checkDateValue(k))||this.setProperties({max:k},!p));break;case"value":((0,i.le)(this.timeOptions)||void 0===this.timeOptions.value||p)&&(k=new Date(this.inputElement.getAttribute(N)),(0,i.le)(this.checkDateValue(k))||(this.initValue=k,this.updateInput(!1,this.initValue),this.setProperties({value:k},!p)))}}setCurrentDate(p){return(0,i.le)(this.checkDateValue(p))?null:new Date(qs,ir,ur,p.getHours(),p.getMinutes(),p.getSeconds())}getTextFormat(){let p=0;if("a"===this.cldrTimeFormat().split(" ")[0]||0===this.cldrTimeFormat().indexOf("a"))p=1;else if(this.cldrTimeFormat().indexOf("a")<0){const w=this.cldrTimeFormat().split(" ");for(let k=0;k<w.length;k++)if(w[k].toLowerCase().indexOf("h")>=0){p=k;break}}return p}updateValue(p,w){let k;if(this.isNullOrEmpty(p))this.resetState();else if(k=this.checkValue(p),this.strictMode){const N=null===k&&p.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(N),this.enableMask&&(N||this.updateInputValue(this.maskedDateValue),(0,i.le)(k)&&p!=this.maskedDateValue&&this.createMask(),(0,i.le)(k)&&p==this.maskedDateValue&&this.updateInputValue(this.maskedDateValue))}this.checkValueChange(w,"string"!=typeof p)}previousState(p){const w=this.getDateObject(p);for(let k=0;k<this.timeCollections.length;k++)if(+w===this.timeCollections[k]){this.activeIndex=k,this.selectedElement=this.liCollections[k],this.valueWithMinutes=new Date(this.timeCollections[k]);break}return this.prevValue}resetState(){this.removeSelection(),Ue.II.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.checkErrorState(null)}objToString(p){return(0,i.le)(this.checkDateValue(p))?null:this.globalize.formatDate(p,{format:this.cldrTimeFormat(),type:"time"})}checkValue(p){if(!this.isNullOrEmpty(p)){const w=p instanceof Date?p:this.getDateObject(p);return this.validateValue(w,p)}return this.resetState(),this.valueWithMinutes=null}validateValue(p,w){let k;const N=this.validateMinMax(w,this.min,this.max),R=this.createDateObj(N);if(this.getFormattedValue(R)!==this.getFormattedValue(this.value)?(this.valueWithMinutes=(0,i.le)(R)?null:R,k=this.objToString(this.valueWithMinutes)):(this.strictMode&&(p=R),this.valueWithMinutes=this.checkDateValue(p),k=this.objToString(this.valueWithMinutes)),!this.strictMode&&(0,i.le)(k)){const K=N.trim().length>0?N:"";this.updateInputValue(K),this.enableMask&&(K||this.updateInputValue(this.maskedDateValue))}else this.updateInputValue(k),this.enableMask&&(""==k&&this.updateInputValue(this.maskedDateValue),(0,i.le)(k)&&w!=this.maskedDateValue&&this.createMask(),(0,i.le)(k)&&w==this.maskedDateValue&&this.updateInputValue(this.maskedDateValue));return k}createMask(){this.notify("createMask",{module:"MaskedDateTime"})}findNextElement(p){const w=this.inputElement.value,k=(0,i.le)(this.valueWithMinutes)?this.createDateObj(w):this.getDateObject(this.valueWithMinutes);let N=null;const R=this.liCollections.length,K=this.timeCollections;if((0,i.le)(this.checkDateValue(k))&&(0,i.le)(this.activeIndex))this.selectNextItem(p);else{if("home"===p.action){const G=this.validLiElement(0);N=+this.createDateObj(new Date(this.timeCollections[G])),this.activeIndex=G}else if("end"===p.action){const G=this.validLiElement(K.length-1,!0);N=+this.createDateObj(new Date(this.timeCollections[G])),this.activeIndex=G}else if("down"===p.action)for(let G=0;G<R;G++){if(+k<this.timeCollections[G]){const ye=this.validLiElement(G);N=+this.createDateObj(new Date(this.timeCollections[ye])),this.activeIndex=ye;break}if(G===R-1){const ye=this.validLiElement(0);N=+this.createDateObj(new Date(this.timeCollections[ye])),this.activeIndex=ye;break}}else for(let G=R-1;G>=0;G--){if(+k>this.timeCollections[G]){const ye=this.validLiElement(G,!0);N=+this.createDateObj(new Date(this.timeCollections[ye])),this.activeIndex=ye;break}if(0===G){const ye=this.validLiElement(R-1);N=+this.createDateObj(new Date(this.timeCollections[ye])),this.activeIndex=ye;break}}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue((0,i.le)(N)?null:new Date(N))}}selectNextItem(p){const w=this.validLiElement(0,"down"!==p.action);this.activeIndex=w,this.selectedElement=this.liCollections[w],this.elementValue(new Date(this.timeCollections[w]))}elementValue(p){(0,i.le)(this.checkDateValue(p))||this.checkValue(p)}validLiElement(p,w){let k=null;const N=(0,i.le)(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+pt);let R=!0;if(N.length)if(w)for(let K=p;K>=0;K--){if(!N[K].classList.contains($)){k=K;break}0===K&&R&&(p=K=N.length,R=!1)}else for(let K=p;K<=N.length-1;K++){if(!N[K].classList.contains($)){k=K;break}K===N.length-1&&R&&(p=K=-1,R=!1)}return k}keyHandler(p){if((0,i.le)(this.step)||this.step<=0||this.inputWrapper.buttons[0].classList.contains($))return;const w=this.timeCollections.length;if((0,i.le)(this.getActiveElement())||0===this.getActiveElement().length)if(this.liCollections.length>0)if((0,i.le)(this.value)&&(0,i.le)(this.activeIndex)){const k=this.validLiElement(0,"down"!==p.action);this.activeIndex=k,this.selectedElement=this.liCollections[k],this.elementValue(new Date(this.timeCollections[k]))}else this.findNextElement(p);else this.findNextElement(p);else{let k;if(p.keyCode>=37&&p.keyCode<=40){let N=40===p.keyCode||39===p.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=N=this.activeIndex===w?0:this.activeIndex,this.activeIndex=N=this.activeIndex<0?w-1:this.activeIndex,this.activeIndex=N=this.validLiElement(this.activeIndex,!(40===p.keyCode||39===p.keyCode)),k=(0,i.le)(this.timeCollections[N])?this.timeCollections[0]:this.timeCollections[N]}else if("home"===p.action){const N=this.validLiElement(0);this.activeIndex=N,k=this.timeCollections[N]}else if("end"===p.action){const N=this.validLiElement(w-1,!0);this.activeIndex=N,k=this.timeCollections[N]}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(new Date(k))}this.isNavigate=!0,this.setHover(this.selectedElement,M),this.setActiveDescendant(),this.selectInputText(),this.isPopupOpen()&&null!==this.selectedElement&&(!p||"click"!==p.type)&&this.setScrollPosition()}getCultureTimeObject(p,w){return(0,i.NA)("main."+w+".dates.calendars.gregorian.timeFormats.short",p)}getCultureDateObject(p,w){return(0,i.NA)("main."+w+".dates.calendars.gregorian.dateFormats.short",p)}wireListEvents(){i.bi.add(this.listWrapper,"click",this.onMouseClick,this),i.AR.isDevice||(i.bi.add(this.listWrapper,"mouseover",this.onMouseOver,this),i.bi.add(this.listWrapper,"mouseout",this.onMouseLeave,this))}unWireListEvents(){this.listWrapper&&(i.bi.remove(this.listWrapper,"click",this.onMouseClick),i.AR.isDevice||(i.bi.remove(this.listWrapper,"mouseover",this.onMouseOver),i.bi.remove(this.listWrapper,"mouseout",this.onMouseLeave)))}valueProcess(p,w){const k=(0,i.le)(this.checkDateValue(w))?null:w;+this.prevDate!=+k&&(this.initValue=k,this.changeEvent(p))}changeEvent(p){this.addSelection(),this.updateInput(!0,this.initValue);const w={event:p||null,value:this.value,text:this.inputElement.value,isInteracted:!(0,i.le)(p),element:this.element};w.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",w),this.invalidValueString=null,this.checkErrorState(this.value)}updateInput(p,w){p&&(this.prevValue=this.getValue(w)),this.prevDate=this.valueWithMinutes=w,("number"!=typeof w||(this.value&&+new Date(+this.value).setMilliseconds(0))!==+w)&&(this.setProperties({value:w},!0),this.enableMask&&this.createMask()),!this.strictMode&&(0,i.le)(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()}setActiveDescendant(){(0,i.le)(this.selectedElement)?(0,i.Y4)(this.inputElement,{"aria-activedescendant":"null"}):(0,i.Y4)(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})}removeSelection(){if(this.removeHover(v),!(0,i.le)(this.popupWrapper)){const p=this.popupWrapper.querySelectorAll("."+xi);p.length&&((0,i.IV)(p,xi),p[0].removeAttribute("aria-selected"))}}removeHover(p){const w=this.getHoverItem(p);w&&w.length&&((0,i.IV)(w,p),p===M&&w[0].removeAttribute("aria-selected"))}getHoverItem(p){let w;return(0,i.le)(this.popupWrapper)||(w=this.popupWrapper.querySelectorAll("."+p)),w}setActiveClass(){if(!(0,i.le)(this.popupWrapper)){const p=this.popupWrapper.querySelectorAll("."+pt);if(p.length)for(let w=0;w<p.length;w++)if(this.timeCollections[w]===+this.getDateObject(this.valueWithMinutes)){p[w].setAttribute("aria-selected","true"),this.selectedElement=p[w],this.activeIndex=w;break}}}addSelection(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),(0,i.le)(this.selectedElement)||((0,i.cn)([this.selectedElement],xi),this.selectedElement.setAttribute("aria-selected","true"))}isValidLI(p){return p&&p.classList.contains(pt)&&!p.classList.contains($)}createDateObj(p){let k=this.globalize.formatDate(new Date,{format:null,skeleton:"short",type:"date"}),N=null;return"string"==typeof p?p.toUpperCase().indexOf("AM")>-1||p.toUpperCase().indexOf("PM")>-1?(k=this.defaultCulture.formatDate(new Date,{format:null,skeleton:"short",type:"date"}),N=isNaN(+new Date(k+" "+p))?null:new Date(new Date(k+" "+p).setMilliseconds(0)),(0,i.le)(N)&&(N=this.timeParse(k,p))):N=this.timeParse(k,p):p instanceof Date&&(N=p),N}timeParse(p,w){let k;return k=this.globalize.parseDate(p+" "+w,{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}),k=(0,i.le)(k)?this.globalize.parseDate(p+" "+w,{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):k,k=(0,i.le)(k)?k:new Date(k.setMilliseconds(0)),k}createListItems(){let p;this.listWrapper=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}});const w=6e4*this.step,k=[];this.timeCollections=[],this.disableItemCollection=[],p=+this.getDateObject(this.initMin).setMilliseconds(0);const N=+this.getDateObject(this.initMax).setMilliseconds(0);for(;N>=p;)this.timeCollections.push(p),k.push(this.globalize.formatDate(new Date(p),{format:this.cldrTimeFormat(),type:"time"})),p+=w;this.listTag=$e.Kh.createList(this.createElement,k,{itemCreated:K=>{const G={element:K.item,text:K.text,value:this.getDateObject(K.text),isDisabled:!1};this.trigger("itemRender",G,ye=>{ye.isDisabled&&ye.element.classList.add($),ye.element.classList.contains($)&&this.disableItemCollection.push(ye.element.getAttribute("data-value"))})}},!0),(0,i.Y4)(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),(0,i.R3)([this.listTag],this.listWrapper)}documentClickHandler(p){const w=p.target;!(0,i.le)(this.popupObj)&&(this.inputWrapper.container.contains(w)||this.popupObj.element&&this.popupObj.element.contains(w))&&"touchstart"!==p.type&&p.preventDefault(),(0,i.oq)(w,'[id="'+this.popupObj.element.id+'"]')||w===this.inputElement||w===(this.inputWrapper&&this.inputWrapper.buttons[0])||w===(this.inputWrapper&&this.inputWrapper.clearButton)||w===(this.inputWrapper&&this.inputWrapper.container)?w!==this.inputElement&&(i.AR.isDevice||(this.isPreventBlur=(i.AR.isIE||"edge"===i.AR.info.name)&&document.activeElement===this.inputElement&&w===this.popupWrapper)):this.isPopupOpen()&&(this.hide(),this.focusOut())}setEnableRtl(){Ue.II.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){Ue.II.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?((0,i.IV)([this.inputWrapper.container],$),(0,i.Y4)(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),(0,i.cn)([this.inputWrapper.container],$),(0,i.Y4)(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)}getProperty(p,w){"min"===w?(this.initMin=this.checkDateValue(new Date(this.checkInValue(p.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(p.max))),this.setProperties({max:this.initMax},!0)),""===this.inputElement.value?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)}inputBlurHandler(p){this.enabled&&(this.isPreventBlur&&this.isPopupOpen()?this.inputElement.focus():(this.closePopup(0,p),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&this.inputElement.value==this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&this.updateInputValue(""),(0,i.IV)([this.inputWrapper.container],[Ce]),this.trigger("blur",{model:this}),this.getText()!==this.inputElement.value?this.updateValue(this.inputElement.value,p):0===this.inputElement.value.trim().length&&this.resetState(),this.cursorDetails=null,this.isNavigate=!1,""===this.inputElement.value&&(this.invalidValueString=null)))}focusOut(){document.activeElement===this.inputElement&&(this.inputElement.blur(),(0,i.IV)([this.inputWrapper.container],[Ce]),this.trigger("blur",{model:this}))}isPopupOpen(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+$r))}inputFocusHandler(){if(!this.enabled)return;const p={model:this};!this.readonly&&!i.AR.isDevice&&!this.enableMask&&this.selectInputText(),this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.trigger("focus",p),this.clearIconState(),this.openOnFocus&&this.show()}focusIn(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()}hide(){this.closePopup(100,null),this.clearIconState()}show(p){this.enabled&&this.readonly||!this.enabled||this.popupWrapper||(this.popupCreation(),i.AR.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className=$r+" e-time-modal",document.body.className+=" "+Gi,document.body.appendChild(this.modal)),i.AR.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.popupObj||null,cancel:!1,event:p||null,name:"open",appendTo:i.AR.isDevice?this.mobileTimePopupWrap:document.body},this.trigger("open",this.openPopupEventArgs,k=>{if(this.openPopupEventArgs=k,this.openPopupEventArgs.cancel||this.inputWrapper.buttons[0].classList.contains($))this.popupObj.destroy(),this.popupWrapper=this.listTag=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],this.popupObj=null;else{this.openPopupEventArgs.appendTo.appendChild(this.popupWrapper),this.popupAlignment(this.openPopupEventArgs),this.setScrollPosition(),i.AR.isDevice||this.inputElement.focus();const N={name:"FadeIn",duration:50};this.popupObj.refreshPosition(this.anchor),this.popupObj.show(new i.fw(N),1e3===this.zIndex?this.element:null),this.setActiveDescendant(),(0,i.Y4)(this.inputElement,{"aria-expanded":"true"}),(0,i.cn)([this.inputWrapper.container],Ce),i.bi.add(document,"mousedown touchstart",this.documentClickHandler,this),this.setOverlayIndex(this.mobileTimePopupWrap,this.popupObj.element,this.modal,i.AR.isDevice)}}))}setOverlayIndex(p,w,k,N){if(N&&!(0,i.le)(w)&&!(0,i.le)(k)&&!(0,i.le)(p)){const R=parseInt(w.style.zIndex,10)?parseInt(w.style.zIndex,10):1e3;k.style.zIndex=(R-1).toString(),p.style.zIndex=R.toString()}}formatValues(p){let w;return"number"==typeof p?w=(0,i.Ac)(p):"string"==typeof p&&(w=p.match(/px|%|em/)||isNaN(parseInt(p,10))?p:(0,i.Ac)(p)),w}popupAlignment(p){if(p.popup.position.X=this.formatValues(p.popup.position.X),p.popup.position.Y=this.formatValues(p.popup.position.Y),(!isNaN(parseFloat(p.popup.position.X))||!isNaN(parseFloat(p.popup.position.Y)))&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(p.popup.position.X))||(this.popupObj.offsetX=parseFloat(p.popup.position.X)),isNaN(parseFloat(p.popup.position.Y))||(this.popupObj.offsetY=parseFloat(p.popup.position.Y)),i.AR.isDevice)"center"===p.popup.position.X&&"center"===p.popup.position.Y&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(p.popup.position.X){case"left":break;case"right":p.popup.offsetX=this.containerStyle.width;break;case"center":p.popup.offsetX=-this.containerStyle.width/2}switch(p.popup.position.Y){case"top":case"bottom":break;case"center":p.popup.offsetY=-this.containerStyle.height/2}"center"===p.popup.position.X&&"center"===p.popup.position.Y&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}}getPersistData(){return this.addOnPersist(["value"])}getModuleName(){return"timepicker"}onPropertyChanged(p,w){for(const k of Object.keys(p))switch(k){case"placeholder":Ue.II.setPlaceholder(p.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",p.placeholder);break;case"readonly":Ue.II.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:p.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:p.enableRtl},!0),this.setEnableRtl();break;case"cssClass":this.updateCssClass(p.cssClass,w.cssClass);break;case"zIndex":this.setProperties({zIndex:p.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.getProperty(p,k);break;case"showClearButton":Ue.II.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:p.locale},!0),this.globalize=new i.eC(this.locale),this.l10n.setLocale(this.locale),this.updatePlaceHolder(),this.setValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"width":(0,i.V7)(this.inputWrapper.container,{width:this.setWidth(p.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect();break;case"format":this.setProperties({format:p.format},!0),this.checkTimeFormat(),this.setValue(this.value),this.enableMask&&(this.createMask(),this.value||this.updateInputValue(this.maskedDateValue));break;case"value":this.invalidValueString=null,this.checkInvalidValue(p.value),p.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):("string"==typeof p.value?(this.setProperties({value:this.checkDateValue(new Date(p.value))},!0),p.value=this.value):(p.value&&+new Date(+p.value).setMilliseconds(0))!==+this.value&&(p.value=this.checkDateValue(new Date(""+p.value))),this.initValue=p.value,p.value=this.compareFormatChange(this.checkValue(p.value))),this.checkValueChange(null,!1),this.isPopupOpen()&&this.setScrollPosition(),this.isAngular&&this.preventChange&&(this.preventChange=!1),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"floatLabelType":this.floatLabelType=p.floatLabelType,Ue.II.removeFloating(this.inputWrapper),Ue.II.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"strictMode":this.invalidValueString=null,p.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:p.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1);break;case"scrollTo":this.checkDateValue(new Date(this.checkInValue(p.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(p.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue)):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("")}}checkInValue(p){return p instanceof Date?p.toUTCString():""+p}};mn([(0,i.Z9)(null)],Ws.prototype,"width",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"cssClass",void 0),mn([(0,i.Z9)(!1)],Ws.prototype,"strictMode",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"keyConfigs",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"format",void 0),mn([(0,i.Z9)(!0)],Ws.prototype,"enabled",void 0),mn([(0,i.Z9)(!1)],Ws.prototype,"readonly",void 0),mn([(0,i.Z9)({})],Ws.prototype,"htmlAttributes",void 0),mn([(0,i.Z9)("Never")],Ws.prototype,"floatLabelType",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"placeholder",void 0),mn([(0,i.Z9)(1e3)],Ws.prototype,"zIndex",void 0),mn([(0,i.Z9)(!1)],Ws.prototype,"enablePersistence",void 0),mn([(0,i.Z9)(!0)],Ws.prototype,"showClearButton",void 0),mn([(0,i.Z9)(30)],Ws.prototype,"step",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"scrollTo",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"value",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"min",void 0),mn([(0,i.Z9)(null)],Ws.prototype,"max",void 0),mn([(0,i.Z9)(!0)],Ws.prototype,"allowEdit",void 0),mn([(0,i.Z9)(!1)],Ws.prototype,"openOnFocus",void 0),mn([(0,i.Z9)(!1)],Ws.prototype,"enableMask",void 0),mn([(0,i.Z9)({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],Ws.prototype,"maskPlaceholder",void 0),mn([(0,i.ju)()],Ws.prototype,"change",void 0),mn([(0,i.ju)()],Ws.prototype,"created",void 0),mn([(0,i.ju)()],Ws.prototype,"destroyed",void 0),mn([(0,i.ju)()],Ws.prototype,"open",void 0),mn([(0,i.ju)()],Ws.prototype,"itemRender",void 0),mn([(0,i.ju)()],Ws.prototype,"close",void 0),mn([(0,i.ju)()],Ws.prototype,"cleared",void 0),mn([(0,i.ju)()],Ws.prototype,"blur",void 0),mn([(0,i.ju)()],Ws.prototype,"focus",void 0),Ws=mn([i.Zl],Ws);var ht=function(Ge,p,w,k){var K,N=arguments.length,R=N<3?p:null===k?k=Object.getOwnPropertyDescriptor(p,w):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(Ge,p,w,k);else for(var G=Ge.length-1;G>=0;G--)(K=Ge[G])&&(R=(N<3?K(R):N>3?K(p,w,R):K(p,w))||R);return N>3&&R&&Object.defineProperty(p,w,R),R};const oe=(new Date).getDate(),Ee=(new Date).getMonth(),dt=(new Date).getFullYear(),Bt=(new Date).getHours(),Ii=(new Date).getMinutes(),Yi=(new Date).getSeconds(),Ss=(new Date).getMilliseconds(),Ps="e-datetimepicker",un="e-datetimepopup-wrapper",Jn="e-popup",En="e-input-focus",Ae="e-icon-anim",Le="e-disabled",Et="e-error",_n="e-active",en="e-hover",nr="e-list-item",Yo="e-time-overflow";let Rn=class extends js{constructor(p,w){super(p,w),this.valueWithMinutes=null,this.scrollInvoked=!1,this.moduleName=this.getModuleName(),this.dateTimeOptions=p}focusHandler(){!this.enabled||(0,i.cn)([this.inputWrapper.container],En)}focusIn(){super.focusIn()}focusOut(){document.activeElement===this.inputElement&&(this.inputElement.blur(),(0,i.IV)([this.inputWrapper.container],[En]))}blurHandler(p){if(!this.enabled)return;if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();(0,i.IV)([this.inputWrapper.container],En);const w={model:this};this.isTimePopupOpen()&&this.hide(p),this.trigger("blur",w)}destroy(){this.popupObject&&this.popupObject.element.classList.contains(Jn)&&(this.popupObject.destroy(),(0,i.og)(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],(0,i.le)(this.rippleFn)||this.rippleFn()),this.inputElement&&(Ue.II.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false","aria-haspopup":"true","aria-activedescendant":"null",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.inputElement.removeAttribute("aria-placeholder")),this.isCalendar()&&(this.popupWrapper&&(0,i.og)(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),super.destroy()}render(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,super.updateHtmlAttributeToElement(),this.checkAttributes(!1),this.l10n=new i.E7("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),super.render(),this.createInputElement(),super.updateHtmlAttributeToWrapper(),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&Ue.II.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.renderComplete()}setValue(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){const p=this.validateMinMaxRange(this.initValue);Ue.II.setValue(this.getFormattedValue(p),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:p},!0)}else(0,i.le)(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,super.updateInput()}validateMinMaxRange(p){let w=p;return this.isDateObject(p)?w=this.validateValue(p):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(w),w}checkValidState(p){this.isValidState=!0,this.strictMode||(+p>+this.max||+p<+this.min)&&(this.isValidState=!1),this.checkErrorState()}checkErrorState(){this.isValidState?(0,i.IV)([this.inputWrapper.container],Et):(0,i.cn)([this.inputWrapper.container],Et),(0,i.Y4)(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})}validateValue(p){let w=p;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),w=this.max):+p<+this.min?w=this.min:+p>+this.max&&(w=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),w=p),w}disablePopupButton(p){p?((0,i.cn)([this.inputWrapper.buttons[0],this.timeIcon],Le),this.hide()):(0,i.IV)([this.inputWrapper.buttons[0],this.timeIcon],Le)}getFormattedValue(p){let w;return(0,i.le)(p)?null:(w="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(p,w))}isDateObject(p){return!(0,i.le)(p)&&!isNaN(+p)}createInputElement(){(0,i.IV)([this.inputElement],"e-datepicker"),(0,i.IV)([this.inputWrapper.container],"e-date-wrapper"),(0,i.cn)([this.inputWrapper.container],"e-datetime-wrapper"),(0,i.cn)([this.inputElement],Ps),this.renderTimeIcon()}renderTimeIcon(){this.timeIcon=Ue.II.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)}bindInputEvents(){i.bi.add(this.timeIcon,"mousedown",this.timeHandler,this),i.bi.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),i.bi.add(this.inputElement,"blur",this.blurHandler,this),i.bi.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=(0,i.l7)(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new i.nv(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})}unBindInputEvents(){i.bi.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),i.bi.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(i.bi.remove(this.inputElement,"blur",this.blurHandler),i.bi.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()}cldrTimeFormat(){let p;return p=this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?(0,i.NA)("timeFormats.short",(0,i.bD)()):this.getCultureTimeObject(i.qV,""+this.locale):this.timeFormat,p}cldrDateTimeFormat(){let p;const k=new i.eC(this.locale).getDatePattern({skeleton:"yMd"});return p=this.isNullOrEmpty(this.formatString)?k+" "+this.getCldrFormat("time"):this.formatString,p}getCldrFormat(p){let w;return w="en"===this.locale||"en-US"===this.locale?(0,i.NA)("timeFormats.short",(0,i.bD)()):this.getCultureTimeObject(i.qV,""+this.locale),w}isNullOrEmpty(p){return!!((0,i.le)(p)||"string"==typeof p&&""===p.trim())}getCultureTimeObject(p,w){return(0,i.NA)("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",p)}timeHandler(p){!this.enabled||(this.isIconClicked=!0,i.AR.isDevice&&this.inputElement.setAttribute("readonly",""),p.currentTarget===this.timeIcon&&p.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&super.hide(p),this.isTimePopupOpen()?this.closePopup(p):(this.inputElement.focus(),this.popupCreation("time",p),(0,i.cn)([this.inputWrapper.container],[En]))),this.isIconClicked=!1)}dateHandler(p){!this.enabled||(p.currentTarget===this.inputWrapper.buttons[0]&&p.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(p),(0,i.le)(this.popupWrapper)||this.popupCreation("date",p)))}show(p,w){this.enabled&&this.readonly||!this.enabled||("time"!==p||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(w),super.show(),this.popupCreation("date",w)):(this.isDatePopupOpen()&&this.hide(w),this.popupCreation("time",w)))}toggle(p){this.isDatePopupOpen()?(super.hide(p),this.show("time",null)):this.isTimePopupOpen()?(this.hide(p),super.show(null,p),this.popupCreation("date",null)):this.show(null,p)}listCreation(){let p;p=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});const w=(0,i.le)(this.value)?""!==this.inputElement.value?p:new Date:this.value;this.valueWithMinutes=w,this.listWrapper=(0,i.az)("div",{className:"e-content",attrs:{tabindex:"0"}});const k=this.startTime(w),N=this.endTime(w),R=wn.createListItems(this.createElement,k,N,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=R.collection,this.listTag=R.list,(0,i.Y4)(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),(0,i.R3)([R.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=(0,i.qx)(this.listWrapper,{duration:300,selector:"."+nr}),this.liCollections=this.listWrapper.querySelectorAll("."+nr)}popupCreation(p,w){i.AR.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===p?!this.readonly&&this.popupWrapper&&((0,i.cn)([this.popupWrapper],un),(0,i.Y4)(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=(0,i.az)("div",{className:Ps+" "+Jn,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),(0,i.le)(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!(0,i.le)(this.step)&&this.step>0&&(this.listCreation(),(0,i.R3)([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(w),this.popupObject.refreshPosition(this.inputElement))}openPopup(p){this.preventArgs={cancel:!1,popup:this.popupObject,event:p||null},this.trigger("open",this.preventArgs,k=>{if(this.preventArgs=k,!this.preventArgs.cancel&&!this.readonly){this.popupObject.show(new i.fw({name:"FadeIn",duration:100}),1e3===this.zIndex?this.element:null),(0,i.cn)([this.inputWrapper.container],[Ae]),(0,i.Y4)(this.inputElement,{"aria-expanded":"true"}),i.bi.add(document,"mousedown touchstart",this.documentClickHandler,this)}})}documentClickHandler(p){const w=p.target;!(0,i.le)(this.popupObject)&&(this.inputWrapper.container.contains(w)||this.popupObject.element&&this.popupObject.element.contains(w))&&"touchstart"!==p.type&&p.preventDefault(),(0,i.oq)(w,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||w===this.inputElement||w===this.timeIcon||w===this.inputWrapper.container?w!==this.inputElement&&(i.AR.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(i.AR.isIE||"edge"===i.AR.info.name)&&w===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(p),this.focusOut())}isTimePopupOpen(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+Ps))}isDatePopupOpen(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+un))}renderPopup(){this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),i.AR.isDevice&&(this.timeModal=(0,i.az)("div"),this.timeModal.className=Ps+" e-time-modal",document.body.className+=" "+Yo,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new u.GI(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:i.AR.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:i.AR.isDevice?document.body:this.inputWrapper.container,position:i.AR.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:()=>{this.dateTimeWrapper.style.visibility="visible",(0,i.cn)([this.timeIcon],_n),i.AR.isDevice||(this.timekeyConfigure=(0,i.l7)(this.timekeyConfigure,this.keyConfigs),this.inputEvent=new i.nv(this.inputWrapper.container,{keyAction:this.timeKeyActionHandle.bind(this),keyConfigs:this.timekeyConfigure,eventName:"keydown"}))},close:()=>{(0,i.IV)([this.timeIcon],_n),this.unWireTimeListEvents(),this.inputElement.setAttribute("aria-activedescendant","null"),(0,i.Od)(this.popupObject.element),this.popupObject.destroy(),this.dateTimeWrapper.innerHTML="",this.listWrapper=this.dateTimeWrapper=void 0,this.inputEvent&&this.inputEvent.destroy()},targetExitViewport:()=>{i.AR.isDevice||this.hide()}}),this.popupObject.element.style.maxHeight="250px"}setDimension(p){return"number"==typeof p?p=(0,i.Ac)(p):"string"==typeof p||(p="100%"),p}setPopupWidth(){let p=this.setDimension(this.width);return p.indexOf("%")>-1&&(p=(this.containerStyle.width*parseFloat(p)/100).toString()+"px"),p}wireTimeListEvents(){i.bi.add(this.listWrapper,"click",this.onMouseClick,this),i.AR.isDevice||(i.bi.add(this.listWrapper,"mouseover",this.onMouseOver,this),i.bi.add(this.listWrapper,"mouseout",this.onMouseLeave,this))}unWireTimeListEvents(){this.listWrapper&&(i.bi.remove(this.listWrapper,"click",this.onMouseClick),i.bi.remove(document,"mousedown touchstart",this.documentClickHandler),i.AR.isDevice||(i.bi.add(this.listWrapper,"mouseover",this.onMouseOver,this),i.bi.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))}onMouseOver(p){const w=(0,i.oq)(p.target,"."+nr);this.setTimeHover(w,en)}onMouseLeave(){this.removeTimeHover(en)}setTimeHover(p,w){this.enabled&&this.isValidLI(p)&&!p.classList.contains(w)&&(this.removeTimeHover(w),(0,i.cn)([p],w))}getPopupHeight(){const p=parseInt("250px",10),w=this.dateTimeWrapper.getBoundingClientRect().height;return w>p?p:w}changeEvent(p){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(super.changeEvent(p),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))}updateValue(p){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:p||null,isInteracted:!(0,i.le)(p),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)}setTimeScrollPosition(){const p=this.selectedElement;(0,i.le)(p)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(p)}findScrollTop(p){const w=this.getPopupHeight(),k=p.nextElementSibling,N=k?k.offsetTop:p.offsetTop,R=p.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=N+p.offsetTop>w?k?N-(w/2+R/2):N:0}setScrollTo(){let p;const w=this.dateTimeWrapper.querySelectorAll("."+nr);if(w.length>=0){this.scrollInvoked=!0;const k=this.timeCollections[0],N=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();p=w[Math.round((N-k)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;(0,i.le)(p)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(p)}setInputValue(p){if("date"===p)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{const w=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));Ue.II.setValue(w,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()}getFullDateTime(){let p=null;return p=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(p)}createMask(){this.notify("createMask",{module:"MaskedDateTime"})}combineDateTime(p){if(this.isDateObject(p)){const w=this.previousDate.getDate(),k=this.previousDate.getMonth(),N=this.previousDate.getFullYear(),R=p.getHours(),K=p.getMinutes(),G=p.getSeconds();return new Date(N,k,w,R,K,G)}return this.previousDate}onMouseClick(p){const k=this.selectedElement=(0,i.oq)(p.target,"."+nr);k&&k.classList.contains(nr)&&(this.timeValue=k.getAttribute("data-value"),this.hide(p)),this.setSelection(k,p)}setSelection(p,w){if(this.isValidLI(p)&&!p.classList.contains(_n)){this.selectedElement=p;const k=Array.prototype.slice.call(this.liCollections).indexOf(p);this.activeIndex=k,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),(0,i.cn)([this.selectedElement],_n),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(w)}}setTimeActiveClass(){const p=(0,i.le)(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!(0,i.le)(p)){const w=p.querySelectorAll("."+nr);if(w.length)for(let k=0;k<w.length;k++)if(this.timeCollections[k]===+this.valueWithMinutes){w[k].setAttribute("aria-selected","true"),this.selectedElement=w[k],this.activeIndex=k,this.setTimeActiveDescendant();break}}}setTimeActiveDescendant(){(0,i.le)(this.selectedElement)?(0,i.Y4)(this.inputElement,{"aria-activedescendant":"null"}):(0,i.Y4)(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})}addTimeSelection(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),(0,i.le)(this.selectedElement)||((0,i.cn)([this.selectedElement],_n),this.selectedElement.setAttribute("aria-selected","true"))}removeTimeSelection(){if(this.removeTimeHover(en),!(0,i.le)(this.dateTimeWrapper)){const p=this.dateTimeWrapper.querySelectorAll("."+_n);p.length&&((0,i.IV)(p,_n),p[0].removeAttribute("aria-selected"))}}removeTimeHover(p){const w=this.getTimeHoverItem(p);w&&w.length&&(0,i.IV)(w,p)}getTimeHoverItem(p){const w=(0,i.le)(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;let k;return(0,i.le)(w)||(k=w.querySelectorAll("."+p)),k}isValidLI(p){return p&&p.classList.contains(nr)&&!p.classList.contains(Le)}calculateStartEnd(p,w,k){const N=p.getDate(),R=p.getMonth(),K=p.getFullYear(),G=p.getHours(),ye=p.getMinutes(),ee=p.getSeconds(),te=p.getMilliseconds();return w?"starttime"===k?new Date(K,R,N,0,0,0):new Date(K,R,N,23,59,59):new Date(K,R,N,G,ye,ee,te)}startTime(p){let w,k;const N=this.min,R=null===p?new Date:p;return+R.getDate()==+N.getDate()&&+R.getMonth()==+N.getMonth()&&+R.getFullYear()==+N.getFullYear()||+new Date(R.getFullYear(),R.getMonth(),R.getDate())<=+new Date(N.getFullYear(),N.getMonth(),N.getDate())?(k=!1,w=this.min):+R<+this.max&&+R>+this.min?(k=!0,w=R):+R>=+this.max&&(k=!0,w=this.max),this.calculateStartEnd(w,k,"starttime")}endTime(p){let w,k;const N=this.max,R=null===p?new Date:p;return+R.getDate()==+N.getDate()&&+R.getMonth()==+N.getMonth()&&+R.getFullYear()==+N.getFullYear()||+new Date(R.getUTCFullYear(),R.getMonth(),R.getDate())>=+new Date(N.getFullYear(),N.getMonth(),N.getDate())?(k=!1,w=this.max):+R<+this.max&&+R>+this.min?(k=!0,w=R):+R<=+this.min&&(k=!0,w=this.min),this.calculateStartEnd(w,k,"endtime")}hide(p){if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:p||null};const w=this.preventArgs;(0,i.le)(this.popupObj)?this.trigger("close",w,k=>{this.dateTimeCloseEventCallback(p,k)}):this.dateTimeCloseEventCallback(p,w)}else i.AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}dateTimeCloseEventCallback(p,w){this.preventArgs=w,this.preventArgs.cancel||(this.isDatePopupOpen()?super.hide(p):this.isTimePopupOpen()&&(this.closePopup(p),(0,i.IV)([document.body],Yo),i.AR.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),i.AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}closePopup(p){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new i.fw({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(Ae),(0,i.Y4)(this.inputElement,{"aria-expanded":"false"}),i.bi.remove(document,"mousedown touchstart",this.documentClickHandler))}preRender(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),super.preRender(),(0,i.IV)([this.inputElementCopy],[Ps])}getProperty(p,w){this.setProperties("min"===w?{min:this.validateValue(p.min)}:{max:this.validateValue(p.max)},!0)}checkAttributes(p){const w=p?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];let k;for(const N of w)if(!(0,i.le)(this.inputElement.getAttribute(N)))switch(N){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(N));break;case"step":this.step=parseInt(this.inputElement.getAttribute(N),10);break;case"readonly":if((0,i.le)(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||p){const R="disabled"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N);this.setProperties({readonly:R},!p)}break;case"placeholder":((0,i.le)(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||p)&&this.setProperties({placeholder:this.inputElement.getAttribute(N)},!p);break;case"min":((0,i.le)(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||p)&&(k=new Date(this.inputElement.getAttribute(N)),!this.isNullOrEmpty(k)&&!isNaN(+k)&&this.setProperties({min:k},!p));break;case"disabled":if((0,i.le)(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||p){const R=!("disabled"===this.inputElement.getAttribute(N)||"true"===this.inputElement.getAttribute(N)||""===this.inputElement.getAttribute(N));this.setProperties({enabled:R},!p)}break;case"value":((0,i.le)(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||p)&&(k=new Date(this.inputElement.getAttribute(N)),!this.isNullOrEmpty(k)&&!isNaN(+k)&&this.setProperties({value:k},!p));break;case"max":((0,i.le)(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||p)&&(k=new Date(this.inputElement.getAttribute(N)),!this.isNullOrEmpty(k)&&!isNaN(+k)&&this.setProperties({max:k},!p))}}requiredModules(){const p=[];return this&&p.push({args:[this],member:"islamic"}),this.enableMask&&p.push(this.maskedDateModule()),p}maskedDateModule(){return{args:[this],member:"MaskedDateTime"}}getTimeActiveElement(){return(0,i.le)(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+_n)}createDateObj(p){return p instanceof Date?p:null}getDateObject(p){if(!this.isNullOrEmpty(p)){const w=this.createDateObj(p),k=this.valueWithMinutes,N=!(0,i.le)(k);if(this.checkDateValue(w)){const R=N?k.getDate():oe,K=N?k.getMonth():Ee,G=N?k.getFullYear():dt,ye=N?k.getHours():Bt,ee=N?k.getMinutes():Ii,te=N?k.getSeconds():Yi,ie=N?k.getMilliseconds():Ss;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(G,K,R,w.getHours(),w.getMinutes(),w.getSeconds(),w.getMilliseconds())):new Date(G,K,R,ye,ee,te,ie)}}return null}findNextTimeElement(p){const w=this.inputElement.value,k=(0,i.le)(this.valueWithMinutes)?this.createDateObj(w):this.getDateObject(this.valueWithMinutes);let N=null;const R=this.liCollections.length;if(!(0,i.le)(this.activeIndex)||!(0,i.le)(this.checkDateValue(k))){if("home"===p.action)N=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===p.action)N=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===p.action){for(let K=0;K<R;K++)if(+k<this.timeCollections[K]){N=+this.createDateObj(new Date(this.timeCollections[K])),this.activeIndex=K;break}}else for(let K=R-1;K>=0;K--)if(+k>this.timeCollections[K]){N=+this.createDateObj(new Date(this.timeCollections[K])),this.activeIndex=K;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue((0,i.le)(N)?null:new Date(N))}}setTimeValue(p,w){let k,N;const R=this.validateMinMaxRange(w),K=this.createDateObj(R);return this.getFormattedValue(K)!==((0,i.le)(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=(0,i.le)(K)?null:K,N=new Date(+this.valueWithMinutes)):(this.strictMode&&(p=K),this.valueWithMinutes=this.checkDateValue(p),N=new Date(+this.valueWithMinutes)),k=this.globalize.formatDate(N,"Gregorian"===this.calendarMode?{format:(0,i.le)(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:(0,i.le)(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&(0,i.le)(N),Ue.II.setValue(k,this.inputElement,this.floatLabelType,this.showClearButton),N}timeElementValue(p){if(!(0,i.le)(this.checkDateValue(p))&&!this.isNullOrEmpty(p)){const w=p instanceof Date?p:this.getDateObject(p);return this.setTimeValue(w,p)}return null}timeKeyHandler(p){if((0,i.le)(this.step)||this.step<=0)return;const w=this.timeCollections.length;if((0,i.le)(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&((0,i.le)(this.value)&&(0,i.le)(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(p));else{let k;if(p.keyCode>=37&&p.keyCode<=40){let N=40===p.keyCode||39===p.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=N=this.activeIndex===w?0:this.activeIndex,this.activeIndex=N=this.activeIndex<0?w-1:this.activeIndex,k=(0,i.le)(this.timeCollections[N])?this.timeCollections[0]:this.timeCollections[N]}else"home"===p.action?(this.activeIndex=0,k=this.timeCollections[0]):"end"===p.action&&(this.activeIndex=w-1,k=this.timeCollections[w-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(k))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&null!==this.selectedElement&&(!p||"click"!==p.type)&&this.setTimeScrollPosition()}timeKeyActionHandle(p){if(this.enabled)switch("right"!==p.action&&"left"!==p.action&&"tab"!==p.action&&p.preventDefault(),p.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(p);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(p),this.hide(p),(0,i.cn)([this.inputWrapper.container],En),this.isNavigate=!1,p.stopPropagation();break;case"escape":this.hide(p);break;default:this.isNavigate=!1}}inputKeyAction(p){"altDownArrow"===p.action&&(this.strictModeUpdate(),this.updateInput(),this.toggle(p))}onPropertyChanged(p,w){for(const k of Object.keys(p)){switch(k){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(p.value),p.value=this.value,p.value=this.validateValue(p.value),Ue.II.setValue(this.getFormattedValue(p.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=p.value,this.setProperties({value:p.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(p,k),this.updateInput();break;case"enableRtl":Ue.II.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":(0,i.le)(w.cssClass)||(w.cssClass=w.cssClass.replace(/\s+/g," ").trim()),(0,i.le)(p.cssClass)||(p.cssClass=p.cssClass.replace(/\s+/g," ").trim()),Ue.II.setCssClass(p.cssClass,[this.inputWrapper.container],w.cssClass),this.dateTimeWrapper&&Ue.II.setCssClass(p.cssClass,[this.dateTimeWrapper],w.cssClass);break;case"locale":this.globalize=new i.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Ue.II.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),super.updateInput();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:p.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||Ue.II.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":Ue.II.setPlaceholder(p.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",p.placeholder);break;case"enabled":Ue.II.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(p.width);break;case"readonly":Ue.II.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=p.floatLabelType,Ue.II.removeFloating(this.inputWrapper),Ue.II.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(p.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(p.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),Ue.II.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",Ue.II.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:super.onPropertyChanged(p,w)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}}getModuleName(){return"datetimepicker"}restoreValue(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=(0,i.le)(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)}};ht([(0,i.Z9)(null)],Rn.prototype,"timeFormat",void 0),ht([(0,i.Z9)(30)],Rn.prototype,"step",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"scrollTo",void 0),ht([(0,i.Z9)(1e3)],Rn.prototype,"zIndex",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"value",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"keyConfigs",void 0),ht([(0,i.Z9)({})],Rn.prototype,"htmlAttributes",void 0),ht([(0,i.Z9)(!1)],Rn.prototype,"enablePersistence",void 0),ht([(0,i.Z9)(!0)],Rn.prototype,"allowEdit",void 0),ht([(0,i.Z9)(!1)],Rn.prototype,"isMultiSelection",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"values",void 0),ht([(0,i.Z9)(!0)],Rn.prototype,"showClearButton",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"placeholder",void 0),ht([(0,i.Z9)(!1)],Rn.prototype,"strictMode",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"serverTimezoneOffset",void 0),ht([(0,i.Z9)(new Date(1900,0,1))],Rn.prototype,"min",void 0),ht([(0,i.Z9)(new Date(2099,11,31))],Rn.prototype,"max",void 0),ht([(0,i.Z9)(null)],Rn.prototype,"firstDayOfWeek",void 0),ht([(0,i.Z9)("Gregorian")],Rn.prototype,"calendarMode",void 0),ht([(0,i.Z9)("Month")],Rn.prototype,"start",void 0),ht([(0,i.Z9)("Month")],Rn.prototype,"depth",void 0),ht([(0,i.Z9)(!1)],Rn.prototype,"weekNumber",void 0),ht([(0,i.Z9)(!0)],Rn.prototype,"showTodayButton",void 0),ht([(0,i.Z9)("Short")],Rn.prototype,"dayHeaderFormat",void 0),ht([(0,i.Z9)(!1)],Rn.prototype,"openOnFocus",void 0),ht([(0,i.Z9)(!1)],Rn.prototype,"enableMask",void 0),ht([(0,i.Z9)({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],Rn.prototype,"maskPlaceholder",void 0),ht([(0,i.ju)()],Rn.prototype,"open",void 0),ht([(0,i.ju)()],Rn.prototype,"close",void 0),ht([(0,i.ju)()],Rn.prototype,"cleared",void 0),ht([(0,i.ju)()],Rn.prototype,"blur",void 0),ht([(0,i.ju)()],Rn.prototype,"focus",void 0),ht([(0,i.ju)()],Rn.prototype,"created",void 0),ht([(0,i.ju)()],Rn.prototype,"destroyed",void 0),Rn=ht([i.Zl],Rn)},8526:(An,hs,rt)=>{rt.d(hs,{Uj:()=>Li,eo:()=>gt,iA:()=>We});var i=rt(7220);const u=new Int16Array(286),Ue=new Uint8Array(286),Zt=new Int16Array(30),$e=new Uint8Array(30);let Li=(()=>{class E{constructor(Oe){this.pendingBuffer=new Uint8Array(65536),this.pendingBufLength=0,this.pendingBufCache=0,this.pendingBufBitsInCache=0,this.bufferPosition=0,this.extraBits=0,this.currentHash=0,this.matchStart=0,this.matchLength=0,this.matchPrevAvail=!1,this.blockStart=0,this.stringStart=0,this.lookAhead=0,this.totalBytesIn=0,this.inputOffset=0,this.inputEnd=0,this.windowSize=32768,this.windowMask=this.windowSize-1,this.hashSize=32768,this.hashMask=this.hashSize-1,this.hashShift=Math.floor(17/3),this.maxDist=this.windowSize-262,this.checkSum=1,this.noWrap=!1,E.isHuffmanTreeInitiated||(E.initHuffmanTree(),E.isHuffmanTreeInitiated=!0),this.treeLiteral=new Lt(this,286,257,15),this.treeDistances=new Lt(this,30,1,15),this.treeCodeLengths=new Lt(this,19,4,7),this.arrDistances=new Uint16Array(16384),this.arrLiterals=new Uint8Array(16384),this.stream=[],this.dataWindow=new Uint8Array(2*this.windowSize),this.hashHead=new Int16Array(this.hashSize),this.hashPrevious=new Int16Array(this.windowSize),this.blockStart=this.stringStart=1,this.noWrap=Oe,Oe||this.writeZLibHeader()}get compressedData(){return this.stream}get getCompressedString(){let Oe="";if(void 0!==this.stream)for(let ft=0;ft<this.stream.length;ft++)Oe+=String.fromCharCode.apply(null,this.stream[ft]);return Oe}write(Oe,ft,jt){if(null==Oe)throw new Error("ArgumentException: data cannot null or undefined");let Nt=ft+jt;if(0>ft||ft>Nt||Nt>Oe.length)throw new Error("ArgumentOutOfRangeException: Offset or length is incorrect");if("string"==typeof Oe){let Di=new i.ez(!1);Di.type="Utf8",Nt=ft+(Oe=new Uint8Array(Di.getBytes(Oe,0,Oe.length))).length}for(this.inputBuffer=Oe,this.inputOffset=ft,this.inputEnd=Nt,this.noWrap||(this.checkSum=ut.checksumUpdate(this.checkSum,this.inputBuffer,this.inputOffset,Nt));this.inputEnd!==this.inputOffset||0!==this.pendingBufLength;)this.pendingBufferFlush(),this.compressData(!1)}writeZLibHeader(){let Oe=30720;Oe|=64,Oe+=31-Oe%31,this.pendingBufferWriteShortBytes(Oe)}pendingBufferWriteShortBytes(Oe){this.pendingBuffer[this.pendingBufLength++]=Oe>>8,this.pendingBuffer[this.pendingBufLength++]=Oe}compressData(Oe){let ft;do{this.fillWindow(),ft=this.compressSlow(Oe&&this.inputEnd===this.inputOffset,Oe)}while(0===this.pendingBufLength&&ft);return ft}compressSlow(Oe,ft){if(this.lookAhead<262&&!Oe)return!1;for(;this.lookAhead>=262||Oe;){if(0===this.lookAhead)return this.lookAheadCompleted(ft);this.stringStart>=2*this.windowSize-262&&this.slideWindow();let jt=this.matchStart,Nt=this.matchLength;if(this.lookAhead>=3&&this.discardMatch(),Nt>=3&&this.matchLength<=Nt?Nt=this.matchPreviousBest(jt,Nt):this.matchPreviousAvailable(),this.bufferPosition>=16384)return this.huffmanIsFull(ft)}return!0}discardMatch(){let Oe=this.insertString();0!==Oe&&this.stringStart-Oe<=this.maxDist&&this.findLongestMatch(Oe)&&this.matchLength<=5&&3===this.matchLength&&this.stringStart-this.matchStart>4096&&(this.matchLength=2)}matchPreviousAvailable(){this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!0,this.stringStart++,this.lookAhead--}matchPreviousBest(Oe,ft){this.huffmanTallyDist(this.stringStart-1-Oe,ft),ft-=2;do{this.stringStart++,this.lookAhead--,this.lookAhead>=3&&this.insertString()}while(--ft>0);return this.stringStart++,this.lookAhead--,this.matchPrevAvail=!1,this.matchLength=2,ft}lookAheadCompleted(Oe){return this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!1,this.huffmanFlushBlock(this.dataWindow,this.blockStart,this.stringStart-this.blockStart,Oe),this.blockStart=this.stringStart,!1}huffmanIsFull(Oe){let ft=this.stringStart-this.blockStart;this.matchPrevAvail&&ft--;let jt=Oe&&0===this.lookAhead&&!this.matchPrevAvail;return this.huffmanFlushBlock(this.dataWindow,this.blockStart,ft,jt),this.blockStart+=ft,!jt}fillWindow(){for(this.stringStart>=this.windowSize+this.maxDist&&this.slideWindow();this.lookAhead<262&&this.inputOffset<this.inputEnd;){let Oe=2*this.windowSize-this.lookAhead-this.stringStart;Oe>this.inputEnd-this.inputOffset&&(Oe=this.inputEnd-this.inputOffset),this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset,this.inputOffset+Oe),this.stringStart+this.lookAhead),this.inputOffset+=Oe,this.totalBytesIn+=Oe,this.lookAhead+=Oe}this.lookAhead>=3&&this.updateHash()}slideWindow(){this.dataWindow.set(this.dataWindow.subarray(this.windowSize,this.windowSize+this.windowSize),0),this.matchStart-=this.windowSize,this.stringStart-=this.windowSize,this.blockStart-=this.windowSize;for(let Oe=0;Oe<this.hashSize;++Oe){let ft=65535&this.hashHead[Oe];this.hashHead[Oe]=ft>=this.windowSize?ft-this.windowSize:0}for(let Oe=0;Oe<this.windowSize;Oe++){let ft=65535&this.hashPrevious[Oe];this.hashPrevious[Oe]=ft>=this.windowSize?ft-this.windowSize:0}}insertString(){let Oe,ft=(this.currentHash<<this.hashShift^this.dataWindow[this.stringStart+2])&this.hashMask;return this.hashPrevious[this.stringStart&this.windowMask]=Oe=this.hashHead[ft],this.hashHead[ft]=this.stringStart,this.currentHash=ft,65535&Oe}findLongestMatch(Oe){let Di,ft=4096,jt=258,Nt=this.stringStart,bt=this.stringStart+this.matchLength,Rt=Math.max(this.matchLength,2),z=Math.max(this.stringStart-this.maxDist,0),J=this.stringStart+258-1,ve=this.dataWindow[bt-1],Ne=this.dataWindow[bt],ce=this.dataWindow;Rt>=32&&(ft>>=2),jt>this.lookAhead&&(jt=this.lookAhead);do{if(ce[Oe+Rt]===Ne&&ce[Oe+Rt-1]===ve&&ce[Oe]===ce[Nt]&&ce[Oe+1]===ce[Nt+1]){for(Di=Oe+2,Nt+=2;ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&ce[++Nt]===ce[++Di]&&Nt<J;);if(Nt>bt){if(this.matchStart=Oe,bt=Nt,Rt=Nt-this.stringStart,Rt>=jt)break;ve=ce[bt-1],Ne=ce[bt]}Nt=this.stringStart}}while((Oe=65535&this.hashPrevious[Oe&this.windowMask])>z&&0!=--ft);return this.matchLength=Math.min(Rt,this.lookAhead),this.matchLength>=3}updateHash(){this.currentHash=this.dataWindow[this.stringStart]<<this.hashShift^this.dataWindow[this.stringStart+1]}huffmanTallyLit(Oe){return this.arrDistances[this.bufferPosition]=0,this.arrLiterals[this.bufferPosition++]=Oe,this.treeLiteral.codeFrequencies[Oe]++,this.bufferPosition>=16384}huffmanTallyDist(Oe,ft){this.arrDistances[this.bufferPosition]=Oe,this.arrLiterals[this.bufferPosition++]=ft-3;let jt=this.huffmanLengthCode(ft-3);this.treeLiteral.codeFrequencies[jt]++,jt>=265&&jt<285&&(this.extraBits+=Math.floor((jt-261)/4));let Nt=this.huffmanDistanceCode(Oe-1);return this.treeDistances.codeFrequencies[Nt]++,Nt>=4&&(this.extraBits+=Math.floor(Nt/2-1)),this.bufferPosition>=16384}huffmanFlushBlock(Oe,ft,jt,Nt){this.treeLiteral.codeFrequencies[256]++,this.treeLiteral.buildTree(),this.treeDistances.buildTree(),this.treeLiteral.calculateBLFreq(this.treeCodeLengths),this.treeDistances.calculateBLFreq(this.treeCodeLengths),this.treeCodeLengths.buildTree();let Di=4;for(let z=18;z>Di;z--)this.treeCodeLengths.codeLengths[Lt.huffCodeLengthOrders[z]]>0&&(Di=z+1);let bt=14+3*Di+this.treeCodeLengths.getEncodedLength()+this.treeLiteral.getEncodedLength()+this.treeDistances.getEncodedLength()+this.extraBits,Rt=this.extraBits;for(let z=0;z<286;z++)Rt+=this.treeLiteral.codeFrequencies[z]*Ue[z];for(let z=0;z<30;z++)Rt+=this.treeDistances.codeFrequencies[z]*$e[z];bt>=Rt&&(bt=Rt),ft>=0&&jt+4<bt>>3?this.huffmanFlushStoredBlock(Oe,ft,jt,Nt):bt==Rt?(this.pendingBufferWriteBits(2+(Nt?1:0),3),this.treeLiteral.setStaticCodes(u,Ue),this.treeDistances.setStaticCodes(Zt,$e),this.huffmanCompressBlock(),this.huffmanReset()):(this.pendingBufferWriteBits(4+(Nt?1:0),3),this.huffmanSendAllTrees(Di),this.huffmanCompressBlock(),this.huffmanReset())}huffmanFlushStoredBlock(Oe,ft,jt,Nt){this.pendingBufferWriteBits(0+(Nt?1:0),3),this.pendingBufferAlignToByte(),this.pendingBufferWriteShort(jt),this.pendingBufferWriteShort(~jt),this.pendingBufferWriteByteBlock(Oe,ft,jt),this.huffmanReset()}huffmanLengthCode(Oe){if(255===Oe)return 285;let ft=257;for(;Oe>=8;)ft+=4,Oe>>=1;return ft+Oe}huffmanDistanceCode(Oe){let ft=0;for(;Oe>=4;)ft+=2,Oe>>=1;return ft+Oe}huffmanSendAllTrees(Oe){this.treeCodeLengths.buildCodes(),this.treeLiteral.buildCodes(),this.treeDistances.buildCodes(),this.pendingBufferWriteBits(this.treeLiteral.treeLength-257,5),this.pendingBufferWriteBits(this.treeDistances.treeLength-1,5),this.pendingBufferWriteBits(Oe-4,4);for(let ft=0;ft<Oe;ft++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[Lt.huffCodeLengthOrders[ft]],3);this.treeLiteral.writeTree(this.treeCodeLengths),this.treeDistances.writeTree(this.treeCodeLengths)}huffmanReset(){this.bufferPosition=0,this.extraBits=0,this.treeLiteral.reset(),this.treeDistances.reset(),this.treeCodeLengths.reset()}huffmanCompressBlock(){for(let Oe=0;Oe<this.bufferPosition;Oe++){let ft=255&this.arrLiterals[Oe],jt=this.arrDistances[Oe];if(0!=jt--){let Nt=this.huffmanLengthCode(ft);this.treeLiteral.writeCodeToStream(Nt);let Di=Math.floor((Nt-261)/4);Di>0&&Di<=5&&this.pendingBufferWriteBits(ft&(1<<Di)-1,Di);let bt=this.huffmanDistanceCode(jt);this.treeDistances.writeCodeToStream(bt),Di=Math.floor(bt/2-1),Di>0&&this.pendingBufferWriteBits(jt&(1<<Di)-1,Di)}else this.treeLiteral.writeCodeToStream(ft)}this.treeLiteral.writeCodeToStream(256)}pendingBufferWriteBits(Oe,ft){let jt=new Uint32Array(1);jt[0]=this.pendingBufCache|Oe<<this.pendingBufBitsInCache,this.pendingBufCache=jt[0],this.pendingBufBitsInCache+=ft,this.pendingBufferFlushBits()}pendingBufferFlush(Oe){if(this.pendingBufferFlushBits(),this.pendingBufLength>0){let ft=new Uint8Array(this.pendingBufLength);ft.set(this.pendingBuffer.subarray(0,this.pendingBufLength),0),this.stream.push(ft)}this.pendingBufLength=0}pendingBufferFlushBits(){let Oe=0;for(;this.pendingBufBitsInCache>=8&&this.pendingBufLength<65536;)this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache,this.pendingBufCache>>=8,this.pendingBufBitsInCache-=8,Oe++;return Oe}pendingBufferWriteByteBlock(Oe,ft,jt){let Nt=Oe.subarray(ft,ft+jt);this.pendingBuffer.set(Nt,this.pendingBufLength),this.pendingBufLength+=jt}pendingBufferWriteShort(Oe){this.pendingBuffer[this.pendingBufLength++]=Oe,this.pendingBuffer[this.pendingBufLength++]=Oe>>8}pendingBufferAlignToByte(){this.pendingBufBitsInCache>0&&(this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache),this.pendingBufCache=0,this.pendingBufBitsInCache=0}static initHuffmanTree(){let Oe=0;for(;Oe<144;)u[Oe]=Lt.bitReverse(48+Oe<<8),Ue[Oe++]=8;for(;Oe<256;)u[Oe]=Lt.bitReverse(256+Oe<<7),Ue[Oe++]=9;for(;Oe<280;)u[Oe]=Lt.bitReverse(-256+Oe<<9),Ue[Oe++]=7;for(;Oe<286;)u[Oe]=Lt.bitReverse(-88+Oe<<8),Ue[Oe++]=8;for(Oe=0;Oe<30;Oe++)Zt[Oe]=Lt.bitReverse(Oe<<11),$e[Oe]=5}close(){do{this.pendingBufferFlush(!0),this.compressData(!0)||(this.pendingBufferFlush(!0),this.pendingBufferAlignToByte(),this.noWrap||(this.pendingBufferWriteShortBytes(this.checkSum>>16),this.pendingBufferWriteShortBytes(65535&this.checkSum)),this.pendingBufferFlush(!0))}while(this.inputEnd!==this.inputOffset||0!==this.pendingBufLength)}destroy(){this.stream=[],this.stream=void 0,this.pendingBuffer=void 0,this.treeLiteral=void 0,this.treeDistances=void 0,this.treeCodeLengths=void 0,this.arrLiterals=void 0,this.arrDistances=void 0,this.hashHead=void 0,this.hashPrevious=void 0,this.dataWindow=void 0,this.inputBuffer=void 0,this.pendingBufLength=void 0,this.pendingBufCache=void 0,this.pendingBufBitsInCache=void 0,this.bufferPosition=void 0,this.extraBits=void 0,this.currentHash=void 0,this.matchStart=void 0,this.matchLength=void 0,this.matchPrevAvail=void 0,this.blockStart=void 0,this.stringStart=void 0,this.lookAhead=void 0,this.totalBytesIn=void 0,this.inputOffset=void 0,this.inputEnd=void 0,this.windowSize=void 0,this.windowMask=void 0,this.hashSize=void 0,this.hashMask=void 0,this.hashShift=void 0,this.maxDist=void 0,this.checkSum=void 0,this.noWrap=void 0}}return E.isHuffmanTreeInitiated=!1,E})(),Lt=(()=>{class E{constructor(Oe,ft,jt,Nt){this.writer=Oe,this.codeMinCount=jt,this.maxLength=Nt,this.codeFrequency=new Uint16Array(ft),this.lengthCount=new Int32Array(Nt)}get treeLength(){return this.codeCount}get codeLengths(){return this.codeLength}get codeFrequencies(){return this.codeFrequency}setStaticCodes(Oe,ft){let jt=new Int16Array(Oe.length);jt.set(Oe,0),this.codes=jt;let Nt=new Uint8Array(ft.length);Nt.set(ft,0),this.codeLength=Nt}reset(){for(let Oe=0;Oe<this.codeFrequency.length;Oe++)this.codeFrequency[Oe]=0;this.codes=void 0,this.codeLength=void 0}writeCodeToStream(Oe){this.writer.pendingBufferWriteBits(65535&this.codes[Oe],this.codeLength[Oe])}buildCodes(){let Oe=new Int32Array(this.maxLength);this.codes=new Int16Array(this.codeCount);let ft=0;for(let jt=0;jt<this.maxLength;jt++)Oe[jt]=ft,ft+=this.lengthCount[jt]<<15-jt;for(let jt=0;jt<this.codeCount;jt++){let Nt=this.codeLength[jt];Nt>0&&(this.codes[jt]=E.bitReverse(Oe[Nt-1]),Oe[Nt-1]+=1<<16-Nt)}}static bitReverse(Oe){return E.reverseBits[15&Oe]<<12|E.reverseBits[Oe>>4&15]<<8|E.reverseBits[Oe>>8&15]<<4|E.reverseBits[Oe>>12]}getEncodedLength(){let Oe=0;for(let ft=0;ft<this.codeFrequency.length;ft++)Oe+=this.codeFrequency[ft]*this.codeLength[ft];return Oe}calculateBLFreq(Oe){let ft,jt,Nt,Di=-1,bt=0;for(;bt<this.codeCount;){Nt=1;let Rt=this.codeLength[bt];for(0===Rt?(ft=138,jt=3):(ft=6,jt=3,Di!==Rt&&(Oe.codeFrequency[Rt]++,Nt=0)),Di=Rt,bt++;bt<this.codeCount&&Di===this.codeLength[bt]&&(bt++,!(++Nt>=ft)););Nt<jt?Oe.codeFrequency[Di]+=Nt:0!==Di?Oe.codeFrequency[16]++:Nt<=10?Oe.codeFrequency[17]++:Oe.codeFrequency[18]++}}writeTree(Oe){let ft,jt,Nt,Di=-1,bt=0;for(;bt<this.codeCount;){Nt=1;let Rt=this.codeLength[bt];for(0===Rt?(ft=138,jt=3):(ft=6,jt=3,Di!==Rt&&(Oe.writeCodeToStream(Rt),Nt=0)),Di=Rt,bt++;bt<this.codeCount&&Di===this.codeLength[bt]&&(bt++,!(++Nt>=ft)););if(Nt<jt)for(;Nt-- >0;)Oe.writeCodeToStream(Di);else 0!==Di?(Oe.writeCodeToStream(16),this.writer.pendingBufferWriteBits(Nt-3,2)):Nt<=10?(Oe.writeCodeToStream(17),this.writer.pendingBufferWriteBits(Nt-3,3)):(Oe.writeCodeToStream(18),this.writer.pendingBufferWriteBits(Nt-11,7))}}buildTree(){let Oe=this.codeFrequency.length,ft=new Int32Array(Oe),jt=0,Nt=0;for(let J=0;J<Oe;J++){let ve=this.codeFrequency[J];if(0!==ve){let Ne=jt++,ce=0;for(;Ne>0&&this.codeFrequency[ft[ce=Math.floor((Ne-1)/2)]]>ve;)ft[Ne]=ft[ce],Ne=ce;ft[Ne]=J,Nt=J}}for(;jt<2;)ft[jt++]=Nt<2?++Nt:0;this.codeCount=Math.max(Nt+1,this.codeMinCount);let bt=jt,Rt=new Int32Array(4*jt-2),z=new Int32Array(2*jt-1);for(let J=0;J<jt;J++){let ve=ft[J],Ne=2*J;Rt[Ne]=ve,Rt[Ne+1]=-1,z[J]=this.codeFrequency[ve]<<8,ft[J]=J}this.constructHuffmanTree(ft,jt,z,bt,Rt),this.buildLength(Rt)}constructHuffmanTree(Oe,ft,jt,Nt,Di){do{let bt=Oe[0],Rt=Oe[--ft],z=jt[Rt],J=0,ve=1;for(;ve<ft;)ve+1<ft&&jt[Oe[ve]]>jt[Oe[ve+1]]&&ve++,Oe[J]=Oe[ve],J=ve,ve=2*J+1;for(;(ve=J)>0&&jt[Oe[J=Math.floor((ve-1)/2)]]>z;)Oe[ve]=Oe[J];Oe[ve]=Rt;let Ne=Oe[0];Rt=Nt++,Di[2*Rt]=bt,Di[2*Rt+1]=Ne;let ce=Math.min(255&jt[bt],255&jt[Ne]);for(jt[Rt]=z=jt[bt]+jt[Ne]-ce+1,J=0,ve=1;ve<ft;)ve+1<ft&&jt[Oe[ve]]>jt[Oe[ve+1]]&&ve++,Oe[J]=Oe[ve],J=ve,ve=2*J+1;for(;(ve=J)>0&&jt[Oe[J=Math.floor((ve-1)/2)]]>z;)Oe[ve]=Oe[J];Oe[ve]=Rt}while(ft>1)}buildLength(Oe){this.codeLength=new Uint8Array(this.codeFrequency.length);let ft=Math.floor(Oe.length/2),jt=Math.floor((ft+1)/2),Nt=0;for(let bt=0;bt<this.maxLength;bt++)this.lengthCount[bt]=0;if(Nt=this.calculateOptimalCodeLength(Oe,Nt,ft),0===Nt)return;let Di=this.maxLength-1;do{for(;0===this.lengthCount[--Di];);do{this.lengthCount[Di]--,this.lengthCount[++Di]++,Nt-=1<<this.maxLength-1-Di}while(Nt>0&&Di<this.maxLength-1)}while(Nt>0);this.recreateTree(Oe,Nt,jt)}recreateTree(Oe,ft,jt){this.lengthCount[this.maxLength-1]+=ft,this.lengthCount[this.maxLength-2]-=ft;let Nt=2*jt;for(let Di=this.maxLength;0!==Di;Di--){let bt=this.lengthCount[Di-1];for(;bt>0;){let Rt=2*Oe[Nt++];-1===Oe[Rt+1]&&(this.codeLength[Oe[Rt]]=Di,bt--)}}}calculateOptimalCodeLength(Oe,ft,jt){let Nt=new Int32Array(jt);Nt[jt-1]=0;for(let Di=jt-1;Di>=0;Di--){let bt=2*Di+1;if(-1!==Oe[bt]){let Rt=Nt[Di]+1;Rt>this.maxLength&&(Rt=this.maxLength,ft++),Nt[Oe[bt-1]]=Nt[Oe[bt]]=Rt}else this.lengthCount[Nt[Di]-1]++,this.codeLength[Oe[bt-1]]=Nt[Di]}return ft}}return E.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],E.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E})(),ut=(()=>{class E{static checksumUpdate(Oe,ft,jt,Nt){let Di=new Uint32Array(1);Di[0]=Oe;let bt=Di[0],Rt=Di[0]=65535&bt,z=Di[0]=bt>>E.checkSumBitOffset;for(;Nt>0;){let J=Math.min(Nt,E.checksumIterationCount);for(Nt-=J;--J>=0;)Rt+=Di[0]=255&ft[jt++],z+=Rt;Rt%=E.checksumBase,z%=E.checksumBase}return bt=z<<E.checkSumBitOffset|Rt,bt}}return E.checkSumBitOffset=16,E.checksumBase=65521,E.checksumIterationCount=3800,E})();const Si=[];class We{get compressionLevel(){return this.level}set compressionLevel(at){this.level=at}get length(){return void 0===this.files?0:this.files.length}constructor(){0===Si.length&&We.initCrc32Table(),this.files=[],this.level="Normal",i.vc.isMicrosoftBrowser=!!navigator.msSaveBlob}addItem(at){if(null==at)throw new Error("ArgumentException: item cannot be null or undefined");for(let Oe=0;Oe<this.files.length;Oe++){let ft=this.files[Oe];if(ft instanceof gt&&ft.name===at.name)throw new Error("item with same name already exist")}this.files.push(at)}addDirectory(at){if(null==at)throw new Error("ArgumentException: string cannot be null or undefined");if(0===at.length)throw new Error("ArgumentException: string cannot be empty");if("/"!==at.slice(-1)&&(at+="/"),-1!==this.files.indexOf(at))throw new Error("item with same name already exist");this.files.push(at)}getItem(at){if(at>=0&&at<this.files.length)return this.files[at]}contains(at){return-1!==this.files.indexOf(at)}save(at){if(null==at||0===at.length)throw new Error("ArgumentException: fileName cannot be null or undefined");if(0===this.files.length)throw new Error("InvalidOperation");let Oe=this;return new Promise((jt,Nt)=>{Oe.saveInternal(at,!1).then(()=>{jt(Oe)})})}saveAsBlob(){let at=this;return new Promise((ft,jt)=>{at.saveInternal("",!0).then(Nt=>{ft(Nt)})})}saveInternal(at,Oe){let ft=this;return new Promise((Nt,Di)=>{let bt=[],Rt=0;for(let z=0;z<ft.files.length;z++)this.getCompressedData(this.files[z]).then(ve=>{if(Rt=ft.constructZippedObject(bt,ve,Rt,ve.isDirectory),bt.length===ft.files.length){let Ne=ft.writeZippedContent(at,bt,Rt,Oe);Nt(Ne)}})})}destroy(){if(void 0!==this.files&&this.files.length>0){for(let at=0;at<this.files.length;at++){let Oe=this.files[at];Oe instanceof gt&&Oe.destroy(),Oe=void 0}this.files=[]}this.files=void 0,this.level=void 0}getCompressedData(at){let Oe=this;return new Promise((jt,Nt)=>{if(at instanceof gt){let Di=new FileReader;Di.onload=()=>{let bt=new Uint8Array(Di.result),Rt={fileName:at.name,crc32Value:0,compressedData:[],compressedSize:void 0,uncompressedDataSize:bt.length,compressionType:void 0,isDirectory:!1};if("Normal"===Oe.level){Oe.compressData(bt,Rt,Si);let z=0;for(let J=0;J<Rt.compressedData.length;J++)z+=Rt.compressedData[J].length;Rt.compressedSize=z,Rt.compressionType="\b\0"}else Rt.compressedSize=bt.length,Rt.crc32Value=Oe.calculateCrc32Value(0,bt,Si),Rt.compressionType="\0\0",Rt.compressedData.push(bt);jt(Rt)},Di.readAsArrayBuffer(at.data)}else jt({fileName:at,crc32Value:0,compressedData:"",compressedSize:0,uncompressedDataSize:0,compressionType:"\0\0",isDirectory:!0})})}compressData(at,Oe,ft){let jt=new Li(!0),Nt=0,Di=0;do{if(Nt>=at.length){jt.close();break}Di=Math.min(at.length,Nt+16384);let bt=at.subarray(Nt,Di);Oe.crc32Value=this.calculateCrc32Value(Oe.crc32Value,bt,ft),jt.write(bt,0,Di-Nt),Nt=Di}while(Nt<=at.length);Oe.compressedData=jt.compressedData,jt.destroy()}constructZippedObject(at,Oe,ft,jt){let Nt=0,Di=new Date;jt&&(Nt|=16),Nt|=0;let bt=this.writeHeader(Oe,Di),Rt="PK\x03\x04"+bt+Oe.fileName,z=this.writeCentralDirectory(Oe,bt,ft,Nt);return at.push({localHeader:Rt,centralDir:z,compressedData:Oe}),ft+Rt.length+Oe.compressedSize}writeHeader(at,Oe){let ft="";return ft+="\n\0\0\0",ft+=at.compressionType,ft+=this.getBytes(this.getModifiedTime(Oe),2),ft+=this.getBytes(this.getModifiedDate(Oe),2),ft+=this.getBytes(at.crc32Value,4),ft+=this.getBytes(at.compressedSize,4),ft+=this.getBytes(at.uncompressedDataSize,4),ft+=this.getBytes(at.fileName.length,2),ft+=this.getBytes(0,2),ft}writeZippedContent(at,Oe,ft,jt){let Nt=0,Di=[];for(let Rt=0;Rt<Oe.length;Rt++){let z=Oe[Rt];for(Nt+=z.centralDir.length,Di.push(this.getArrayBuffer(z.localHeader));z.compressedData.compressedData.length;)Di.push(z.compressedData.compressedData.shift().buffer)}for(let Rt=0;Rt<Oe.length;Rt++)Di.push(this.getArrayBuffer(Oe[Rt].centralDir));Di.push(this.getArrayBuffer(this.writeFooter(Oe,Nt,ft)));let bt=new Blob(Di,{type:"application/zip"});return jt||i.vc.save(at,bt),bt}writeCentralDirectory(at,Oe,ft,jt){return"PK\x01\x02"+this.getBytes(20,2)+Oe+this.getBytes(0,2)+"\0\0\0\0"+this.getBytes(jt,4)+this.getBytes(ft,4)+at.fileName}writeFooter(at,Oe,ft){return"PK\x05\x06\0\0\0\0"+this.getBytes(at.length,2)+this.getBytes(at.length,2)+this.getBytes(Oe,4)+this.getBytes(ft,4)+this.getBytes(0,2)}getArrayBuffer(at){let Oe=new Uint8Array(at.length);for(let ft=0;ft<at.length;++ft)Oe[ft]=255&at.charCodeAt(ft);return Oe.buffer}getBytes(at,Oe){let ft="";for(let jt=0;jt<Oe;jt++)ft+=String.fromCharCode(255&at),at>>>=8;return ft}getModifiedTime(at){let Oe=at.getHours();return Oe<<=6,Oe|=at.getMinutes(),Oe<<=5,Oe|at.getSeconds()/2}getModifiedDate(at){let Oe=at.getFullYear()-1980;return Oe<<=4,Oe|=at.getMonth()+1,Oe<<=5,Oe|at.getDate()}calculateCrc32Value(at,Oe,ft){at^=-1;for(let jt=0;jt<Oe.length;jt++)at=at>>>8^ft[255&(at^Oe[jt])];return-1^at}static initCrc32Table(){let at;for(let Oe=0;Oe<256;Oe++){at=Oe;for(let ft=0;ft<8;ft++)at=1&at?3988292384^at>>>1:at>>>1;Si[Oe]=at}}}class gt{get name(){return this.fileName}set name(at){this.fileName=at}constructor(at,Oe){if(null==at)throw new Error("ArgumentException: data cannot be null or undefined");if(null==Oe)throw new Error("ArgumentException: string cannot be null or undefined");if(0===Oe.length)throw new Error("string cannot be empty");this.data=at,this.name=Oe}destroy(){this.fileName=void 0,this.data=void 0}}},4028:(An,hs,rt)=>{rt.d(hs,{$G:()=>Ue,AE:()=>u,BH:()=>bt,hm:()=>Di,j4:()=>$e,lM:()=>Si});var i=rt(7628);class u{constructor(z){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof z?this.fromTable=z:z&&z instanceof Array&&(this.lookups=z),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}setKey(z){return this.key=z,this}using(z){return this.dataManager=z,this}execute(z,J,ve,Ne){return(z=z||this.dataManager)?z.executeQuery(this,J,ve,Ne):$e.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')}executeLocal(z){return(z=z||this.dataManager)?z.executeLocal(this):$e.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')}clone(){let z=new u;return z.queries=this.queries.slice(0),z.key=this.key,z.isChild=this.isChild,z.dataManager=this.dataManager,z.fromTable=this.fromTable,z.params=this.params.slice(0),z.expands=this.expands.slice(0),z.sortedColumns=this.sortedColumns.slice(0),z.groupedColumns=this.groupedColumns.slice(0),z.subQuerySelector=this.subQuerySelector,z.subQuery=this.subQuery,z.fKey=this.fKey,z.isCountRequired=this.isCountRequired,z.distincts=this.distincts.slice(0),z.lazyLoad=this.lazyLoad.slice(0),z}from(z){return this.fromTable=z,this}addParams(z,J){return this.params.push("function"==typeof J?{key:z,fn:J}:{key:z,value:J}),this}distinct(z){return this.distincts="string"==typeof z?[].slice.call([z],0):z.slice(0),this}expand(z){return this.expands="string"==typeof z?[].slice.call([z],0):z.slice(0),this}where(z,J,ve,Ne,ce){J=J?J.toLowerCase():null;let be=null;return"string"==typeof z?be=new Ue(z,J,ve,Ne,ce):z instanceof Ue&&(be=z),this.queries.push({fn:"onWhere",e:be}),this}search(z,J,ve,Ne,ce){return"string"==typeof J&&(J=[J]),(!ve||"none"===ve)&&(ve="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:J,operator:ve,searchKey:z,ignoreCase:Ne,ignoreAccent:ce,comparer:$e.fnOperators[ve]}}),this}sortBy(z,J,ve){return this.sortByForeignKey(z,J,ve)}sortByForeignKey(z,J,ve,Ne){let be,Se,ce=(0,i.le)(Ne)?"ascending":Ne;if("string"==typeof z&&$e.endsWith(z.toLowerCase()," desc")&&(z=z.replace(/ desc$/i,""),J="descending"),(!J||"string"==typeof J)&&(ce=J?J.toLowerCase():"ascending",J=$e.fnSort(J)),ve){be=u.filterQueries(this.queries,"onSortBy");for(let ue=0;ue<be.length;ue++)if(Se=be[ue].e.fieldName,"string"==typeof Se){if(Se===z)return this}else if(Se instanceof Array)for(let _e=0;_e<Se.length;_e++)if(Se[_e]===z||z.toLowerCase()===Se[_e]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:z,comparer:J,direction:ce}}),this}sortByDesc(z){return this.sortBy(z,"descending")}group(z,J,ve){return this.sortBy(z,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:z,comparer:J||null,format:ve||null}}),this}page(z,J){return this.queries.push({fn:"onPage",e:{pageIndex:z,pageSize:J}}),this}range(z,J){return this.queries.push({fn:"onRange",e:{start:z,end:J}}),this}take(z){return this.queries.push({fn:"onTake",e:{nos:z}}),this}skip(z){return this.queries.push({fn:"onSkip",e:{nos:z}}),this}select(z){return"string"==typeof z&&(z=[].slice.call([z],0)),this.queries.push({fn:"onSelect",e:{fieldNames:z}}),this}hierarchy(z,J){return this.subQuerySelector=J,this.subQuery=z,this}foreignKey(z){return this.fKey=z,this}requiresCount(){return this.isCountRequired=!0,this}aggregate(z,J){return this.queries.push({fn:"onAggregates",e:{field:J,type:z}}),this}static filterQueries(z,J){return z.filter(ve=>ve.fn===J)}static filterQueryLists(z,J){let ve=z.filter(ce=>-1!==J.indexOf(ce.fn)),Ne={};for(let ce=0;ce<ve.length;ce++)Ne[ve[ce].fn]||(Ne[ve[ce].fn]=ve[ce].e);return Ne}}class Ue{constructor(z,J,ve,Ne=!1,ce){return this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof z?(this.field=z,this.operator=J.toLowerCase(),this.value=ve,this.ignoreCase=Ne,this.ignoreAccent=ce,this.isComplex=!1,this.comparer=$e.fnOperators.processOperator(this.operator)):(z instanceof Ue&&ve instanceof Ue||ve instanceof Array)&&(this.isComplex=!0,this.condition=J.toLowerCase(),this.predicates=[z],ve instanceof Array?[].push.apply(this.predicates,ve):this.predicates.push(ve)),this}static and(...z){return Ue.combinePredicates([].slice.call(z,0),"and")}and(z,J,ve,Ne,ce){return Ue.combine(this,z,J,ve,"and",Ne,ce)}static or(...z){return Ue.combinePredicates([].slice.call(z,0),"or")}or(z,J,ve,Ne,ce){return Ue.combine(this,z,J,ve,"or",Ne,ce)}static fromJson(z){if(z instanceof Array){let ve=[];for(let Ne=0,ce=z.length;Ne<ce;Ne++)ve.push(this.fromJSONData(z[Ne]));return ve}return this.fromJSONData(z)}validate(z){let ve,Ne,J=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,$e.getObject(this.field,z),this.value,this.ignoreCase,this.ignoreAccent);ve="and"===this.condition;for(let ce=0;ce<J.length;ce++)if(Ne=J[ce].validate(z),ve){if(!Ne)return!1}else if(Ne)return!0;return ve}toJson(){let z,J;if(this.isComplex){z=[],J=this.predicates;for(let ve=0;ve<J.length;ve++)z.push(J[ve].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:z}}static combinePredicates(z,J){if(1===z.length){if(!(z[0]instanceof Array))return z[0];z=z[0]}return new Ue(z[0],J,z.slice(1))}static combine(z,J,ve,Ne,ce,be,Se){return J instanceof Ue?Ue[ce](z,J):"string"==typeof J?Ue[ce](z,new Ue(J,ve,Ne,be,Se)):$e.throwError("Predicate - "+ce+" : invalid arguments")}static fromJSONData(z){let ce,J=z.predicates||[],ve=J.length,Ne=[];for(let be=0;be<ve;be++)Ne.push(this.fromJSONData(J[be]));return ce=z.isComplex?new Ue(Ne[0],z.condition,Ne.slice(1)):new Ue(z.field,z.operator,z.value,z.ignoreCase,z.ignoreAccent),ce}}const Zt={GroupGuid:"{271bbba0-1ee7}"};let $e=(()=>{class Rt{static getValue(J,ve){return"function"==typeof J?J.call(ve||{}):J}static endsWith(J,ve){return J.slice&&J.slice(-ve.length)===ve}static startsWith(J,ve){return J.slice(0,ve.length)===ve}static fnSort(J){return"ascending"===(J=J?Rt.toLowerCase(J):"ascending")?this.fnAscending:this.fnDescending}static fnAscending(J,ve){return(0,i.le)(J)&&(0,i.le)(ve)||null==ve?-1:"string"==typeof J?J.localeCompare(ve):null==J?1:J-ve}static fnDescending(J,ve){return(0,i.le)(J)&&(0,i.le)(ve)?-1:null==ve?1:"string"==typeof J?-1*J.localeCompare(ve):null==J?-1:ve-J}static extractFields(J,ve){let Ne={};for(let ce=0;ce<ve.length;ce++)Ne=this.setValue(ve[ce],this.getObject(ve[ce],J),Ne);return Ne}static select(J,ve){let Ne=[];for(let ce=0;ce<J.length;ce++)Ne.push(this.extractFields(J[ce],ve));return Ne}static group(J,ve,Ne,ce,be,Se,ue){ce=ce||1;let _e=J,lt="GroupGuid";if(_e.GroupGuid===Zt[lt]){for(let de=0;de<_e.length;de++)if((0,i.le)(be))_e[de].items=this.group(_e[de].items,ve,Ne,_e.level+1,null,Se,ue),_e[de].count=_e[de].items.length;else{let Be=-1,Fe=be.filter(xt=>xt.key===_e[de].key);Be=be.indexOf(Fe[0]),_e[de].items=this.group(_e[de].items,ve,Ne,_e.level+1,be[Be].items,Se,ue),_e[de].count=be[Be].count}return _e.childLevels+=1,_e}let Xe={},B=[];B.GroupGuid=Zt[lt],B.level=ce,B.childLevels=0,B.records=_e;for(let de=0;de<_e.length;de++){let Be=this.getVal(_e,de,ve);if((0,i.le)(Se)||(Be=Se(Be,ve)),!Xe[Be]&&(Xe[Be]={key:Be,count:0,items:[],aggregates:{},field:ve},B.push(Xe[Be]),!(0,i.le)(be))){let Fe=be.filter(xt=>xt.key===Xe[Be].key);Xe[Be].count=Fe[0].count}Xe[Be].count=(0,i.le)(be)?Xe[Be].count+=1:Xe[Be].count,(!ue||ue&&Ne.length)&&Xe[Be].items.push(_e[de])}if(Ne&&Ne.length)for(let de=0;de<B.length;de++){let Fe,Be={},xt=Ne;for(let $t=0;$t<Ne.length;$t++)if(Fe=Rt.aggregates[Ne[$t].type],(0,i.le)(be))Fe&&(Be[xt[$t].field+" - "+xt[$t].type]=Fe(B[de].items,xt[$t].field));else{let ji=be.filter(is=>is.key===B[de].key);Fe&&(Be[xt[$t].field+" - "+xt[$t].type]=Fe(ji[0].items,xt[$t].field))}B[de].aggregates=Be}if(ue&&B.length&&Ne.length)for(let de=0;de<B.length;de++)B[de].items=[];return _e.length&&B||_e}static buildHierarchy(J,ve,Ne,ce,be){let Se,_e,ue={};for(ce.result&&(ce=ce.result),ce.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),Se=0;Se<ce.length;Se++){let lt=this.getObject(J,ce[Se]);_e=ue[lt]||(ue[lt]=[]),_e.push(ce[Se])}for(Se=0;Se<Ne.length;Se++){let lt=this.getObject(be||J,Ne[Se]);Ne[Se][ve]=ue[lt]}}static getFieldList(J,ve,Ne){if(void 0===Ne&&(Ne=""),null==ve)return this.getFieldList(J,[],Ne);let ce=J,be=Object.keys(J);for(let Se of be)"object"!=typeof ce[Se]||ce[Se]instanceof Array?ve.push(Ne+Se):this.getFieldList(ce[Se],ve,Ne+Se+".");return ve}static getObject(J,ve){if(!J)return ve;if(!ve)return;if(-1===J.indexOf("."))return ve[J];let Ne=ve,ce=J.split(".");for(let be=0;be<ce.length&&null!=Ne;be++)Ne=Ne[ce[be]];return Ne}static setValue(J,ve,Ne){let ue,lt,ce=J.toString().split("."),be=Ne||{},Se=be,_e=ce.length;for(ue=0;ue<_e;ue++)lt=ce[ue],ue+1===_e?Se[lt]=void 0===ve?void 0:ve:(0,i.le)(Se[lt])&&(Se[lt]={}),Se=Se[lt];return be}static sort(J,ve,Ne){if(J.length<=1)return J;let ce=parseInt((J.length/2).toString(),10),be=J.slice(0,ce),Se=J.slice(ce);return be=this.sort(be,ve,Ne),Se=this.sort(Se,ve,Ne),this.merge(be,Se,ve,Ne)}static ignoreDiacritics(J){return"string"!=typeof J?J:J.split("").map(ce=>ce in Rt.diacritics?Rt.diacritics[ce]:ce).join("")}static merge(J,ve,Ne,ce){let Se,be=[];for(;J.length>0||ve.length>0;)Se=J.length>0&&ve.length>0?ce?ce(this.getVal(J,0,Ne),this.getVal(ve,0,Ne),J[0],ve[0])<=0?J:ve:J[0][Ne]<J[0][Ne]?J:ve:J.length>0?J:ve,be.push(Se.shift());return be}static getVal(J,ve,Ne){return Ne?this.getObject(Ne,J[ve]):J[ve]}static toLowerCase(J){return J?"string"==typeof J?J.toLowerCase():J.toString():0===J||!1===J?J.toString():""}static callAdaptorFunction(J,ve,Ne,ce){if(ve in J){let be=J[ve](Ne,ce);(0,i.le)(be)||(Ne=be)}return Ne}static getAddParams(J,ve,Ne){let ce={};return Rt.callAdaptorFunction(J,"addParams",{dm:ve,query:Ne,params:Ne.params,reqParams:ce}),ce}static isPlainObject(J){return!!J&&J.constructor===Object}static isCors(){let J=null;try{J=new window.XMLHttpRequest}catch{}return!!J&&"withCredentials"in J}static getGuid(J){let Ne;return(J||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(ce,be)=>{if("crypto"in window&&"getRandomValues"in crypto){let Se=new Uint8Array(1);window.crypto.getRandomValues(Se),Ne=Se[0]%16|0}else Ne=16*Math.random()|0;return"0123456789abcdef"[19===be?3&Ne|8:Ne]})}static isNull(J){return null==J}static getItemFromComparer(J,ve,Ne){let ce,be,Se,ue=0,_e="string"==typeof Rt.getVal(J,0,ve);if(J.length)for(;(0,i.le)(ce)&&ue<J.length;)ce=Rt.getVal(J,ue,ve),Se=J[ue++];for(;ue<J.length;ue++)be=Rt.getVal(J,ue,ve),!(0,i.le)(be)&&(_e&&(ce=+ce,be=+be),Ne(ce,be)>0&&(ce=be,Se=J[ue]));return Se}static distinct(J,ve,Ne){Ne=!(0,i.le)(Ne)&&Ne;let be,ce=[],Se={};return J.forEach((ue,_e)=>{be="object"==typeof J[_e]?Rt.getVal(J,_e,ve):J[_e],be in Se||(ce.push(Ne?J[_e]:be),Se[be]=1)}),ce}static processData(J,ve){let Ne=this.prepareQuery(J),ce=new Di(ve);J.requiresCounts&&Ne.requiresCount();let be=ce.executeLocal(Ne),Se={result:J.requiresCounts?be.result:be,count:be.count,aggregates:JSON.stringify(be.aggregates)};return J.requiresCounts?Se:be}static prepareQuery(J){let ve=new u;return J.select&&ve.select(J.select),J.where&&Rt.parse.parseJson(J.where).filter(ce=>{if((0,i.le)(ce.condition))ve.where(ce.field,ce.operator,ce.value,ce.ignoreCase,ce.ignoreAccent);else{let be=[];ce.field?be.push(new Ue(ce.field,ce.operator,ce.value,ce.ignoreCase,ce.ignoreAccent)):be=be.concat(this.getPredicate(ce.predicates)),"or"==ce.condition?ve.where(Ue.or(be)):"and"==ce.condition&&ve.where(Ue.and(be))}}),J.search&&Rt.parse.parseJson(J.search).filter(ce=>ve.search(ce.key,ce.fields,ce.operator,ce.ignoreCase,ce.ignoreAccent)),J.aggregates&&J.aggregates.filter(Ne=>ve.aggregate(Ne.type,Ne.field)),J.sorted&&J.sorted.filter(Ne=>ve.sortBy(Ne.name,Ne.direction)),J.skip&&ve.skip(J.skip),J.take&&ve.take(J.take),J.group&&J.group.filter(Ne=>ve.group(Ne)),ve}static getPredicate(J){let ve=[];for(let Ne=0;Ne<J.length;Ne++){let ce=J[Ne];if(ce.field)ve.push(new Ue(ce.field,ce.operator,ce.value,ce.ignoreCase,ce.ignoreAccent));else{let be=[],Se=this.getPredicate(ce.predicates);for(const ue of Object.keys(Se))be.push(Se[ue]);ve.push("or"==ce.condition?Ue.or(be):Ue.and(be))}}return ve}}return Rt.serverTimezoneOffset=null,Rt.timeZoneHandling=!0,Rt.throwError=z=>{try{throw new Error(z)}catch(J){throw J.message+"\n"+J.stack}},Rt.aggregates={sum:(z,J)=>{let Ne,ve=0,ce="number"!=typeof Rt.getVal(z,0,J);for(let be=0;be<z.length;be++)Ne=Rt.getVal(z,be,J),!isNaN(Ne)&&null!==Ne&&(ce&&(Ne=+Ne),ve+=Ne);return ve},average:(z,J)=>Rt.aggregates.sum(z,J)/z.length,min:(z,J)=>{let ve;return"function"==typeof J&&(ve=J,J=null),Rt.getObject(J,Rt.getItemFromComparer(z,J,ve||Rt.fnAscending))},max:(z,J)=>{let ve;return"function"==typeof J&&(ve=J,J=null),Rt.getObject(J,Rt.getItemFromComparer(z,J,ve||Rt.fnDescending))},truecount:(z,J)=>new Di(z).executeLocal((new u).where(J,"equal",!0,!0)).length,falsecount:(z,J)=>new Di(z).executeLocal((new u).where(J,"equal",!1,!0)).length,count:(z,J)=>z.length},Rt.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},Rt.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},Rt.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},Rt.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},Rt.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},Rt.fnOperators={equal:(z,J,ve,Ne)=>(Ne&&(z=Rt.ignoreDiacritics(z),J=Rt.ignoreDiacritics(J)),ve?Rt.toLowerCase(z)===Rt.toLowerCase(J):z===J),notequal:(z,J,ve,Ne)=>(Ne&&(z=Rt.ignoreDiacritics(z),J=Rt.ignoreDiacritics(J)),!Rt.fnOperators.equal(z,J,ve)),lessthan:(z,J,ve)=>ve?Rt.toLowerCase(z)<Rt.toLowerCase(J):((0,i.le)(z)&&(z=void 0),z<J),greaterthan:(z,J,ve)=>ve?Rt.toLowerCase(z)>Rt.toLowerCase(J):z>J,lessthanorequal:(z,J,ve)=>ve?Rt.toLowerCase(z)<=Rt.toLowerCase(J):((0,i.le)(z)&&(z=void 0),z<=J),greaterthanorequal:(z,J,ve)=>ve?Rt.toLowerCase(z)>=Rt.toLowerCase(J):z>=J,contains:(z,J,ve,Ne)=>(Ne&&(z=Rt.ignoreDiacritics(z),J=Rt.ignoreDiacritics(J)),ve?!(0,i.le)(z)&&!(0,i.le)(J)&&-1!==Rt.toLowerCase(z).indexOf(Rt.toLowerCase(J)):!(0,i.le)(z)&&!(0,i.le)(J)&&-1!==z.toString().indexOf(J)),notnull:z=>null!==z,isnull:z=>null===z,startswith:(z,J,ve,Ne)=>(Ne&&(z=Rt.ignoreDiacritics(z),J=Rt.ignoreDiacritics(J)),ve?z&&J&&Rt.startsWith(Rt.toLowerCase(z),Rt.toLowerCase(J)):z&&J&&Rt.startsWith(z,J)),endswith:(z,J,ve,Ne)=>(Ne&&(z=Rt.ignoreDiacritics(z),J=Rt.ignoreDiacritics(J)),ve?z&&J&&Rt.endsWith(Rt.toLowerCase(z),Rt.toLowerCase(J)):z&&J&&Rt.endsWith(z,J)),processSymbols:z=>{let J=Rt.operatorSymbols[z];return J?Rt.fnOperators[J]:Rt.throwError("Query - Process Operator : Invalid operator")},processOperator:z=>Rt.fnOperators[z]||Rt.fnOperators.processSymbols(z)},Rt.parse={parseJson:z=>("string"==typeof z?z=JSON.parse(z,Rt.parse.jsonReviver):z instanceof Array?Rt.parse.iterateAndReviveArray(z):"object"==typeof z&&null!==z&&Rt.parse.iterateAndReviveJson(z),z),iterateAndReviveArray:z=>{for(let J=0;J<z.length;J++)"object"==typeof z[J]&&null!==z[J]?Rt.parse.iterateAndReviveJson(z[J]):z[J]="string"!=typeof z[J]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(z[J])?Rt.parse.parseJson(z[J]):Rt.parse.jsonReviver("",z[J])},iterateAndReviveJson:z=>{let J,ve=Object.keys(z);for(let Ne of ve)Rt.startsWith(Ne,"__")||(J=z[Ne],"object"==typeof J?J instanceof Array?Rt.parse.iterateAndReviveArray(J):J&&Rt.parse.iterateAndReviveJson(J):z[Ne]=Rt.parse.jsonReviver(z[Ne],J))},jsonReviver:(z,J)=>{if("string"==typeof J){let ve=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(J),Ne=Rt.timeZoneHandling?Rt.serverTimezoneOffset:null;if(ve)return Rt.dateParse.toTimeZone(new Date(parseInt(ve[1],10)),Ne,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(J)){let ce=J.indexOf("Z")>-1||J.indexOf("z")>-1,be=J.split(/[^0-9.]/);if(ce)J=Rt.dateParse.toTimeZone(new Date(parseInt(be[0],10),parseInt(be[1],10)-1,parseInt(be[2],10),parseInt(be[3],10),parseInt(be[4],10),parseInt(be[5],10)),Rt.serverTimezoneOffset,!1);else{let Se=new Date(parseInt(be[0],10),parseInt(be[1],10)-1,parseInt(be[2],10),parseInt(be[3],10),parseInt(be[4],10),parseInt(be[5],10)),ue=parseInt(be[6],10),_e=parseInt(be[7],10);if(isNaN(ue)&&isNaN(_e))return Se;J.indexOf("+")>-1?Se.setHours(Se.getHours()-ue,Se.getMinutes()-_e):Se.setHours(Se.getHours()+ue,Se.getMinutes()+_e),J=Rt.dateParse.toTimeZone(Se,Rt.serverTimezoneOffset,!1)}null==Rt.serverTimezoneOffset&&(J=Rt.dateParse.addSelfOffset(J))}}return J},isJson:z=>"string"==typeof z[0]?z:Rt.parse.parseJson(z),isGuid:z=>null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(z),replacer:(z,J)=>Rt.isPlainObject(z)?Rt.parse.jsonReplacer(z,J):z instanceof Array?Rt.parse.arrayReplacer(z):z instanceof Date?Rt.parse.jsonReplacer({val:z},J).val:z,jsonReplacer:(z,J)=>{let ve,Ne=Object.keys(z);for(let ce of Ne){if(ve=z[ce],!(ve instanceof Date))continue;let be=ve;null==Rt.serverTimezoneOffset?z[ce]=Rt.dateParse.toTimeZone(be,null).toJSON():(be=new Date(+be+36e5*Rt.serverTimezoneOffset),z[ce]=Rt.dateParse.toTimeZone(Rt.dateParse.addSelfOffset(be),null).toJSON())}return z},arrayReplacer:z=>{for(let J=0;J<z.length;J++)Rt.isPlainObject(z[J])?z[J]=Rt.parse.jsonReplacer(z[J]):z[J]instanceof Date&&(z[J]=Rt.parse.jsonReplacer({date:z[J]}).date);return z},jsonDateReplacer:(z,J)=>{if("value"===z&&J){if("string"==typeof J){let ve=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(J);if(ve)J=Rt.dateParse.toTimeZone(new Date(parseInt(ve[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(J)){let Ne=J.split(/[^0-9]/);J=Rt.dateParse.toTimeZone(new Date(parseInt(Ne[0],10),parseInt(Ne[1],10)-1,parseInt(Ne[2],10),parseInt(Ne[3],10),parseInt(Ne[4],10),parseInt(Ne[5],10)),null,!0)}}if(J instanceof Date)return J=Rt.dateParse.addSelfOffset(J),null===Rt.serverTimezoneOffset?Rt.dateParse.toTimeZone(Rt.dateParse.addSelfOffset(J),null).toJSON():(J=Rt.dateParse.toTimeZone(J,J.getTimezoneOffset()/60*2-Rt.serverTimezoneOffset,!1)).toJSON()}return J}},Rt.dateParse={addSelfOffset:z=>new Date(+z-6e4*z.getTimezoneOffset()),toUTC:z=>new Date(+z+6e4*z.getTimezoneOffset()),toTimeZone:(z,J,ve)=>{if(null===J)return z;let Ne=ve?Rt.dateParse.toUTC(z):z;return new Date(+Ne-36e5*J)},toLocalTime:z=>{let J=z,ve=-J.getTimezoneOffset(),Ne=ve>=0?"+":"-",ce=Se=>{let ue=Math.floor(Math.abs(Se));return(ue<10?"0":"")+ue};return J.getFullYear()+"-"+ce(J.getMonth()+1)+"-"+ce(J.getDate())+"T"+ce(J.getHours())+":"+ce(J.getMinutes())+":"+ce(J.getSeconds())+Ne+ce(ve/60)+":"+ce(ve%60)}},Rt})();const Li={GroupGuid:"{271bbba0-1ee7}"};class Lt{constructor(z){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=Lt,this.dataSource=z,this.pvt={}}processResponse(z,J,ve,Ne){return z}}class ut extends Lt{processQuery(z,J){let be,Se,Xe,ve=z.dataSource.json.slice(0),Ne=ve.length,ce=!0,ue={},_e=0,lt=[];for(let de=0;de<J.lazyLoad.length;de++)_e++,ue[J.lazyLoad[de].key]=J.lazyLoad[de].value;let B={};for(let de=0;de<J.queries.length;de++)Se=J.queries[de],"onPage"!==Se.fn&&"onGroup"!==Se.fn||!J.lazyLoad.length?(be=this[Se.fn].call(this,ve,Se.e,J),"onAggregates"===Se.fn?B[Se.e.field+" - "+Se.e.type]=be:ve=void 0!==be?be:ve,("onPage"===Se.fn||"onSkip"===Se.fn||"onTake"===Se.fn||"onRange"===Se.fn)&&(ce=!1),ce&&(Ne=ve.length)):("onGroup"===Se.fn&&lt.push(Se.e),"onPage"===Se.fn&&(Xe=Se.e));if(_e){let Be=this.lazyLoadGroup({query:J,lazyLoad:ue,result:ve,group:lt,page:Xe});ve=Be.result,Ne=Be.count}return J.isCountRequired&&(ve={result:ve,count:Ne,aggregates:B}),ve}lazyLoadGroup(z){let J=0,ve=this.getAggregate(z.query),Ne=z.result;if((0,i.le)(z.lazyLoad.onDemandGroupInfo)){Ne=$e.group(Ne,z.group[0].fieldName,ve,null,null,z.group[0].comparer,!0),J=Ne.length;let be=Ne;z.page&&(Ne=this.onPage(Ne,z.page,z.query)),this.formGroupResult(Ne,be)}else{let ce=z.lazyLoad.onDemandGroupInfo;for(let Se=ce.where.length-1;Se>=0;Se--)Ne=this.onWhere(Ne,ce.where[Se]);z.group.length!==ce.level&&(Ne=$e.group(Ne,z.group[ce.level].fieldName,ve,null,null,z.group[0].comparer,!0)),J=Ne.length;let be=Ne;Ne=Ne.slice(ce.skip),Ne=Ne.slice(0,ce.take),z.group.length!==ce.level&&this.formGroupResult(Ne,be)}return{result:Ne,count:J}}formGroupResult(z,J){if(z.length&&J.length){let ve="GroupGuid",Ne="childLevels",ce="level",be="records";z[ve]=J[ve],z[Ne]=J[Ne],z[ce]=J[ce],z[be]=J[be]}return z}getAggregate(z){let J=u.filterQueries(z.queries,"onAggregates"),ve=[];if(J.length){let Ne;for(let ce=0;ce<J.length;ce++)Ne=J[ce].e,ve.push({type:Ne.type,field:$e.getValue(Ne.field,z)})}return ve}batchRequest(z,J,ve){let Ne,ce=J.deletedRecords.length;for(Ne=0;Ne<J.addedRecords.length;Ne++)this.insert(z,J.addedRecords[Ne]);for(Ne=0;Ne<J.changedRecords.length;Ne++)this.update(z,ve.key,J.changedRecords[Ne]);for(Ne=0;Ne<ce;Ne++)this.remove(z,ve.key,J.deletedRecords[Ne]);return J}onWhere(z,J){return z&&z.length?z.filter(ve=>{if(J)return J.validate(ve)}):z}onAggregates(z,J){let ve=$e.aggregates[J.type];return z&&ve&&0!==z.length?ve(z,J.field):null}onSearch(z,J){return z&&z.length?(0===J.fieldNames.length&&$e.getFieldList(z[0],J.fieldNames),z.filter(ve=>{for(let Ne=0;Ne<J.fieldNames.length;Ne++)if(J.comparer.call(ve,$e.getObject(J.fieldNames[Ne],ve),J.searchKey,J.ignoreCase,J.ignoreAccent))return!0;return!1})):z}onSortBy(z,J,ve){if(!z||!z.length)return z;let Ne,ce=$e.getValue(J.fieldName,ve);if(!ce)return z.sort(J.comparer);if(ce instanceof Array){ce=ce.slice(0);for(let be=ce.length-1;be>=0;be--)!ce[be]||(Ne=J.comparer,$e.endsWith(ce[be]," desc")&&(Ne=$e.fnSort("descending"),ce[be]=ce[be].replace(" desc","")),z=$e.sort(z,ce[be],Ne));return z}return $e.sort(z,ce,J.comparer)}onGroup(z,J,ve){if(!z||!z.length)return z;let Ne=this.getAggregate(ve);return $e.group(z,$e.getValue(J.fieldName,ve),Ne,null,null,J.comparer)}onPage(z,J,ve){let Ne=$e.getValue(J.pageSize,ve),ce=($e.getValue(J.pageIndex,ve)-1)*Ne;return z&&z.length?z.slice(ce,ce+Ne):z}onRange(z,J){return z&&z.length?z.slice($e.getValue(J.start),$e.getValue(J.end)):z}onTake(z,J){return z&&z.length?z.slice(0,$e.getValue(J.nos)):z}onSkip(z,J){return z&&z.length?z.slice($e.getValue(J.nos)):z}onSelect(z,J){return z&&z.length?$e.select(z,$e.getValue(J.fieldNames)):z}insert(z,J,ve,Ne,ce){return(0,i.le)(ce)?z.dataSource.json.push(J):z.dataSource.json.splice(ce,0,J)}remove(z,J,ve,Ne){let be,ce=z.dataSource.json;for("object"==typeof ve&&!(ve instanceof Date)&&(ve=$e.getObject(J,ve)),be=0;be<ce.length&&$e.getObject(J,ce[be])!==ve;be++);return be!==ce.length?ce.splice(be,1):null}update(z,J,ve,Ne){let be,Se,ce=z.dataSource.json;for((0,i.le)(J)||(Se=(0,i.NA)(J,ve)),be=0;be<ce.length&&((0,i.le)(J)||(0,i.NA)(J,ce[be])!==Se);be++);return be<ce.length?(0,i.TS)(ce[be],ve):null}}class Si extends Lt{processQuery(z,J,ve){let ue,_e,Ne=this.getQueryRequest(J),ce=u.filterQueryLists(J.queries,["onSelect","onPage","onSkip","onTake","onRange"]),be=J.params,Se=z.dataSource.url,lt=null,Xe=this.options,B={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in ce?(ue=ce.onPage,_e=$e.getValue(ue.pageIndex,J),lt=$e.getValue(ue.pageSize,J),_e=(_e-1)*lt):"onRange"in ce&&(ue=ce.onRange,_e=ue.start,lt=ue.end-ue.start);for(let xt=0;xt<Ne.sorts.length;xt++)ue=$e.getValue(Ne.sorts[xt].e.fieldName,J),B.sorts.push($e.callAdaptorFunction(this,"onEachSort",{name:ue,direction:Ne.sorts[xt].e.direction},J));ve&&(ue=this.getFiltersFrom(ve,J),ue&&B.filters.push($e.callAdaptorFunction(this,"onEachWhere",ue.toJson(),J)));for(let xt=0;xt<Ne.filters.length;xt++){let $t=$e.callAdaptorFunction(this,"onEachWhere",Ne.filters[xt].e.toJson(),J);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!(0,i.le)(Ne.filters[xt].e.key)&&Ne.filters.length>1&&($t="("+$t+")"),B.filters.push($t);let ji="object"==typeof B.filters[xt]?Object.keys(B.filters[xt]):[];for(let is of ji)$e.isNull(B[is])&&delete B[is]}for(let xt=0;xt<Ne.searches.length;xt++)ue=Ne.searches[xt].e,B.searches.push($e.callAdaptorFunction(this,"onEachSearch",{fields:ue.fieldNames,operator:ue.operator,key:ue.searchKey,ignoreCase:ue.ignoreCase},J));for(let xt=0;xt<Ne.groups.length;xt++)B.groups.push($e.getValue(Ne.groups[xt].e.fieldName,J));for(let xt=0;xt<Ne.aggregates.length;xt++)ue=Ne.aggregates[xt].e,B.aggregates.push({type:ue.type,field:$e.getValue(ue.field,J)});let de={};if(this.getRequestQuery(Xe,J,ce,B,de),$e.callAdaptorFunction(this,"addParams",{dm:z,query:J,params:be,reqParams:de}),J.lazyLoad.length)for(let xt=0;xt<J.lazyLoad.length;xt++)de[J.lazyLoad[xt].key]=J.lazyLoad[xt].value;let Be=Object.keys(de);for(let xt of Be)($e.isNull(de[xt])||""===de[xt]||0===de[xt].length)&&delete de[xt];(!(Xe.skip in de)||!(Xe.take in de))&&null!==lt&&(de[Xe.skip]=$e.callAdaptorFunction(this,"onSkip",_e,J),de[Xe.take]=$e.callAdaptorFunction(this,"onTake",lt,J));let Fe=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(de,$e.parse.jsonDateReplacer),url:Se,pvtData:Fe,type:"POST",contentType:"application/json; charset=utf-8"}:(ue=this.convertToQueryString(de,J,z),ue=(-1!==z.dataSource.url.indexOf("?")?"&":"/")+ue,{type:"GET",url:ue.length?Se.replace(/\/*$/,ue):Se,pvtData:Fe})}getRequestQuery(z,J,ve,Ne,ce){let Se=ce;Se[z.from]=J.fromTable,z.apply&&J.distincts.length&&(Se[z.apply]="onDistinct"in this?$e.callAdaptorFunction(this,"onDistinct",J.distincts):""),!J.distincts.length&&z.expand&&(Se[z.expand]="onExpand"in this&&"onSelect"in ve?$e.callAdaptorFunction(this,"onExpand",{selects:$e.getValue(ve.onSelect.fieldNames,J),expands:J.expands},J):J.expands),Se[z.select]="onSelect"in ve&&!J.distincts.length?$e.callAdaptorFunction(this,"onSelect",$e.getValue(ve.onSelect.fieldNames,J),J):"",Se[z.count]=J.isCountRequired?$e.callAdaptorFunction(this,"onCount",J.isCountRequired,J):"",Se[z.search]=Ne.searches.length?$e.callAdaptorFunction(this,"onSearch",Ne.searches,J):"",Se[z.skip]="onSkip"in ve?$e.callAdaptorFunction(this,"onSkip",$e.getValue(ve.onSkip.nos,J),J):"",Se[z.take]="onTake"in ve?$e.callAdaptorFunction(this,"onTake",$e.getValue(ve.onTake.nos,J),J):"",Se[z.where]=Ne.filters.length||Ne.searches.length?$e.callAdaptorFunction(this,"onWhere",Ne.filters,J):"",Se[z.sortBy]=Ne.sorts.length?$e.callAdaptorFunction(this,"onSortBy",Ne.sorts,J):"",Se[z.group]=Ne.groups.length?$e.callAdaptorFunction(this,"onGroup",Ne.groups,J):"",Se[z.aggregates]=Ne.aggregates.length?$e.callAdaptorFunction(this,"onAggregates",Ne.aggregates,J):"",Se.param=[]}convertToQueryString(z,J,ve){return""}processResponse(z,J,ve,Ne,ce,be){if(Ne&&Ne.getResponseHeader("Content-Type")&&-1!==Ne.getResponseHeader("Content-Type").indexOf("application/json")){let de=$e.timeZoneHandling;J&&!J.timeZoneHandling&&($e.timeZoneHandling=!1),z=$e.parse.parseJson(z),$e.timeZoneHandling=de}let Se=ce,ue=Se.pvtData||{},_e=z?z.groupDs:[];if(Ne&&Ne.getResponseHeader("Content-Type")&&-1!==Ne.getResponseHeader("Content-Type").indexOf("xml"))return ve.isCountRequired?{result:[],count:0}:[];let lt=JSON.parse(Se.data);if(lt&&"batch"===lt.action&&z&&z.addedRecords)return be.addedRecords=z.addedRecords,be;z&&z.d&&(z=z.d);let Xe={};z&&"count"in z&&(Xe.count=z.count),Xe.result=z&&z.result?z.result:z;let B=!1;if(Array.isArray(z.result)&&z.result.length){let de="key",Be="value",Fe="level";if((0,i.le)(z.result[0][de])||(Xe.result=this.formRemoteGroupedData(Xe.result,1,ue.groups.length-1)),ve&&ve.lazyLoad.length&&ue.groups.length)for(let xt=0;xt<ve.lazyLoad.length;xt++)"onDemandGroupInfo"===ve.lazyLoad[xt][de]&&ue.groups.length===ve.lazyLoad[xt][Be][Fe]&&(B=!0)}return B||this.getAggregateResult(ue,z,Xe,_e,ve),$e.isNull(Xe.count)?Xe.result:{result:Xe.result,count:Xe.count,aggregates:Xe.aggregates}}formRemoteGroupedData(z,J,ve){for(let ue=0;ue<z.length;ue++)z[ue].items.length&&Object.keys(z[ue].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(z[ue].items,J+1,ve-1);let Ne="GroupGuid",Se="records";return z[Ne]=Li[Ne],z.level=J,z.childLevels=ve,z[Se]=z[0].items.length?this.getGroupedRecords(z,!(0,i.le)(z[0].items[Se])):[],z}getGroupedRecords(z,J){let ve=[];for(let ce=0;ce<z.length;ce++)if(J)ve=ve.concat(z[ce].items.records);else for(let be=0;be<z[ce].items.length;be++)ve.push(z[ce].items[be]);return ve}onGroup(z){return this.pvt.groups=z,z}onAggregates(z){this.pvt.aggregates=z}batchRequest(z,J,ve,Ne,ce){return{type:"POST",url:z.dataSource.batchUrl||z.dataSource.crudUrl||z.dataSource.removeUrl||z.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify((0,i.l7)({},{changed:J.changedRecords,added:J.addedRecords,deleted:J.deletedRecords,action:"batch",table:ve[void 0],key:ve[void 0]},$e.getAddParams(this,z,Ne)))}}beforeSend(z,J){}insert(z,J,ve,Ne){return{url:z.dataSource.insertUrl||z.dataSource.crudUrl||z.dataSource.url,data:JSON.stringify((0,i.l7)({},{value:J,table:ve,action:"insert"},$e.getAddParams(this,z,Ne)))}}remove(z,J,ve,Ne,ce){return{type:"POST",url:z.dataSource.removeUrl||z.dataSource.crudUrl||z.dataSource.url,data:JSON.stringify((0,i.l7)({},{key:ve,keyColumn:J,table:Ne,action:"remove"},$e.getAddParams(this,z,ce)))}}update(z,J,ve,Ne,ce){return{type:"POST",url:z.dataSource.updateUrl||z.dataSource.crudUrl||z.dataSource.url,data:JSON.stringify((0,i.l7)({},{value:ve,action:"update",keyColumn:J,key:$e.getObject(J,ve),table:Ne},$e.getAddParams(this,z,ce)))}}getFiltersFrom(z,J){let Ne,ve=J.fKey,ce=ve,be=J.key,Se=[];"object"!=typeof z[0]&&(ce=null);for(let ue=0;ue<z.length;ue++)Ne="object"==typeof z[0]?$e.getObject(be||ce,z[ue]):z[ue],Se.push(new Ue(ve,"equal",Ne));return Ue.or(Se)}getAggregateResult(z,J,ve,Ne,ce){let be=J;if(J&&J.result&&(be=J.result),z&&z.aggregates&&z.aggregates.length){let lt,_e=z.aggregates,Xe=be,B={};J.aggregate&&(Xe=J.aggregate);for(let de=0;de<_e.length;de++)lt=$e.aggregates[_e[de].type],lt&&(B[_e[de].field+" - "+_e[de].type]=lt(Xe,_e[de].field));ve.aggregates=B}let ue=Array.isArray(J.result)&&J.result.length&&!(0,i.le)(J.result[0].key);if(z&&z.groups&&z.groups.length&&!ue){let _e=z.groups;for(let lt=0;lt<_e.length;lt++){let Xe=null;(0,i.le)(Ne)||(Ne=$e.group(Ne,_e[lt]));let B=u.filterQueries(ce.queries,"onGroup")[lt].e;be=$e.group(be,_e[lt],z.aggregates,Xe,Ne,B.comparer)}ve.result=be}return ve}getQueryRequest(z){let J={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return J.sorts=u.filterQueries(z.queries,"onSortBy"),J.groups=u.filterQueries(z.queries,"onGroup"),J.filters=u.filterQueries(z.queries,"onWhere"),J.searches=u.filterQueries(z.queries,"onSearch"),J.aggregates=u.filterQueries(z.queries,"onAggregates"),J}addParams(z){let J=z.reqParams;z.params.length&&(J.params={});for(let ve of z.params){if(J[ve.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");J[ve.key]=ve.value,ve.fn&&(J[ve.key]=ve.fn.call(z.query,ve.key,z.query,z.dm)),J.params[ve.key]=J[ve.key]}}}class We extends Si{constructor(z){super(),this.options=(0,i.l7)({},this.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),(0,i.l7)(this.options,z||{})}getModuleName(){return"ODataAdaptor"}onPredicate(z,J,ve){let ce,be,Ne="",Se=z.value,ue=typeof Se,_e=z.field?We.getField(z.field):null;if(Se instanceof Date&&(Se="datetime'"+$e.parse.replacer(Se)+"'"),"string"===ue&&(Se=Se.replace(/'/g,"''"),z.ignoreCase&&(Se=Se.toLowerCase()),Se=encodeURIComponent(Se),Se="'"+Se+"'",ve&&(_e="cast("+_e+", 'Edm.String')"),$e.parse.isGuid(Se)&&(be="guid"),z.ignoreCase&&(be||(_e="tolower("+_e+")"),Se=Se.toLowerCase())),ce=$e.odBiOperator[z.operator],ce)return Ne+=_e,Ne+=ce,be&&(Ne+=be),Ne+Se;if(ce=(0,i.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$e.odUniOperator[z.operator]:$e.odv4UniOperator[z.operator],"substringof"===ce){let lt=Se;Se=_e,_e=lt}return Ne+=ce+"(",Ne+=_e+",",be&&(Ne+=be),Ne+=Se+")",Ne}addParams(z){super.addParams(z),delete z.reqParams.params}onComplexPredicate(z,J,ve){let Ne=[];for(let ce=0;ce<z.predicates.length;ce++)Ne.push("("+this.onEachWhere(z.predicates[ce],J,ve)+")");return Ne.join(" "+z.condition+" ")}onEachWhere(z,J,ve){return z.isComplex?this.onComplexPredicate(z,J,ve):this.onPredicate(z,J,ve)}onWhere(z){return this.pvt.search&&z.push(this.onEachWhere(this.pvt.search,null,!0)),z.join(" and ")}onEachSearch(z){z.fields&&0===z.fields.length&&$e.throwError("Query() - Search : oData search requires list of field names to search");let J=this.pvt.search||[];for(let ve=0;ve<z.fields.length;ve++)J.push(new Ue(z.fields[ve],z.operator,z.key,z.ignoreCase));this.pvt.search=J}onSearch(z){return this.pvt.search=Ue.or(this.pvt.search),""}onEachSort(z){let J=[];if(z.name instanceof Array)for(let ve=0;ve<z.name.length;ve++)J.push(We.getField(z.name[ve])+("descending"===z.direction?" desc":""));else J.push(We.getField(z.name)+("descending"===z.direction?" desc":""));return J.join(",")}onSortBy(z){return z.reverse().join(",")}onGroup(z){return this.pvt.groups=z,[]}onSelect(z){for(let J=0;J<z.length;J++)z[J]=We.getField(z[J]);return z.join(",")}onAggregates(z){return this.pvt.aggregates=z,""}onCount(z){return!0===z?"allpages":""}beforeSend(z,J,ve){$e.endsWith(ve.url,this.options.batch)&&"post"===ve.type.toLowerCase()?(J.setRequestHeader("Accept",this.options.multipartAccept),J.setRequestHeader("DataServiceVersion","2.0"),J.overrideMimeType("text/plain; charset=x-user-defined")):J.setRequestHeader("Accept",this.options.accept),J.setRequestHeader("DataServiceVersion","2.0"),J.setRequestHeader("MaxDataServiceVersion","2.0")}processResponse(z,J,ve,Ne,ce,be){let Se="odata.metadata";if(ce&&"GET"===ce.type&&!this.rootUrl&&z[Se]){let Fe=z[Se].split("/$metadata#");this.rootUrl=Fe[0],this.resourceTableName=Fe[1]}if(!(0,i.le)(z.d)){let Fe=ve&&ve.isCountRequired?z.d.results:z.d,xt="__metadata";if(!(0,i.le)(Fe))for(let $t=0;$t<Fe.length;$t++)(0,i.le)(Fe[$t][xt])||delete Fe[$t][xt]}let _e=ce&&ce.pvtData,lt=this.processBatchResponse(z,ve,Ne,ce,be);if(lt)return lt;let Xe=Ne&&ce.getResponseHeader("DataServiceVersion"),B=null,de=Xe&&parseInt(Xe,10)||2;if(ve&&ve.isCountRequired){let Fe="__count";(z[Fe]||z["odata.count"])&&(B=z[Fe]||z["odata.count"]),z.d&&(z=z.d),(z[Fe]||z["odata.count"])&&(B=z[Fe]||z["odata.count"])}3===de&&z.value&&(z=z.value),z.d&&(z=z.d),de<3&&z.results&&(z=z.results);let Be={};return Be.count=B,Be.result=z,this.getAggregateResult(_e,z,Be,null,ve),$e.isNull(B)?Be.result:{result:Be.result,count:Be.count,aggregates:Be.aggregates}}convertToQueryString(z,J,ve){let Ne=[],be=z.table||"";delete z.table,ve.dataSource.requiresFormat&&(z.$format="json");let ue=Object.keys(z);for(let _e of ue)Ne.push(_e+"="+z[_e]);return Ne=Ne.join("&"),ve.dataSource.url&&-1!==ve.dataSource.url.indexOf("?")&&!be?Ne:Ne.length?be+"?"+Ne:be||""}localTimeReplacer(z,J){for(let ve of(0,i.le)(J)?[]:Object.keys(J))J[ve]instanceof Date&&(J[ve]=$e.dateParse.toLocalTime(J[ve]));return J}insert(z,J,ve){return{url:(z.dataSource.insertUrl||z.dataSource.url).replace(/\/*$/,ve?"/"+ve:""),data:JSON.stringify(J,this.options.localTime?this.localTimeReplacer:null)}}remove(z,J,ve,Ne){let ce;return ce="string"!=typeof ve||$e.parse.isGuid(ve)?`(${ve})`:`('${ve}')`,{type:"DELETE",url:(z.dataSource.removeUrl||z.dataSource.url).replace(/\/*$/,Ne?"/"+Ne:"")+ce}}update(z,J,ve,Ne,ce,be){let Se;return"PATCH"===this.options.updateType&&!(0,i.le)(be)&&(ve=this.compareAndRemove(ve,be,J)),Se="string"!=typeof ve[J]||$e.parse.isGuid(ve[J])?`(${ve[J]})`:`('${ve[J]}')`,{type:this.options.updateType,url:(z.dataSource.updateUrl||z.dataSource.url).replace(/\/*$/,Ne?"/"+Ne:"")+Se,data:JSON.stringify(ve,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}}batchRequest(z,J,ve,Ne,ce){let be=ve.guid=$e.getGuid(this.options.batchPre),Se=this.rootUrl?this.rootUrl+"/"+this.options.batch:z.dataSource.url.replace(/\/*$/,"/"+this.options.batch);ve.url=this.resourceTableName?this.resourceTableName:ve.url;let ue={url:ve.url,key:ve.key,cid:1,cSet:$e.getGuid(this.options.changeSet)},_e="--"+be+"\n";return _e+="Content-Type: multipart/mixed; boundary="+ue.cSet.replace("--","")+"\n",this.pvt.changeSet=0,_e+=this.generateInsertRequest(J.addedRecords,ue,z),_e+=this.generateUpdateRequest(J.changedRecords,ue,z,ce?ce.changedRecords:[]),_e+=this.generateDeleteRequest(J.deletedRecords,ue,z),_e+=ue.cSet+"--\n",_e+="--"+be+"--",{type:"POST",url:Se,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+be,data:_e}}generateDeleteRequest(z,J,ve){if(!z)return"";let Ne="";return Ne=this.generateBodyContent(z,J,{method:"DELETE ",url:(be,Se,ue)=>{let _e=$e.getObject(ue,be[Se]);return"number"==typeof _e||$e.parse.isGuid(_e)?"("+_e+")":_e instanceof Date?"("+be[Se][ue].toJSON()+")":`('${_e}')`},data:(be,Se)=>""},ve),Ne+"\n"}generateInsertRequest(z,J,ve){if(!z)return"";let Ne="";return Ne=this.generateBodyContent(z,J,{method:"POST ",url:(be,Se,ue)=>"",data:(be,Se)=>JSON.stringify(be[Se])+"\n\n"},ve),Ne}generateUpdateRequest(z,J,ve,Ne){if(!z)return"";let ce="";return z.forEach(Se=>Se=this.compareAndRemove(Se,Ne.filter(ue=>$e.getObject(J.key,ue)===$e.getObject(J.key,Se))[0],J.key)),ce=this.generateBodyContent(z,J,{method:this.options.updateType+" ",url:(Se,ue,_e)=>"number"==typeof Se[ue][_e]||$e.parse.isGuid(Se[ue][_e])?"("+Se[ue][_e]+")":Se[ue][_e]instanceof Date?"("+Se[ue][_e].toJSON()+")":`('${Se[ue][_e]}')`,data:(Se,ue)=>JSON.stringify(Se[ue])+"\n\n"},ve),ce}static getField(z){return z.replace(/\./g,"/")}generateBodyContent(z,J,ve,Ne){let ce="";for(let be=0;be<z.length;be++)ce+="\n"+J.cSet+"\n",ce+=this.options.changeSetContent+"\n\n",ce+=ve.method,"POST "===ve.method?ce+=(Ne.dataSource.insertUrl||Ne.dataSource.crudUrl||J.url)+ve.url(z,be,J.key)+" HTTP/1.1\n":"PUT "===ve.method||"PATCH "===ve.method?ce+=(Ne.dataSource.updateUrl||Ne.dataSource.crudUrl||J.url)+ve.url(z,be,J.key)+" HTTP/1.1\n":"DELETE "===ve.method&&(ce+=(Ne.dataSource.removeUrl||Ne.dataSource.crudUrl||J.url)+ve.url(z,be,J.key)+" HTTP/1.1\n"),ce+="Accept: "+this.options.accept+"\n",ce+="Content-Id: "+this.pvt.changeSet+++"\n",ce+=this.options.batchChangeSetContentType+"\n",(0,i.le)(z[be]["@odata.etag"])?ce+="\n":(ce+="If-Match: "+z[be]["@odata.etag"]+"\n\n",delete z[be]["@odata.etag"]),ce+=ve.data(z,be);return ce}processBatchResponse(z,J,ve,Ne,ce){if(ve&&ve.getResponseHeader("Content-Type")&&-1!==ve.getResponseHeader("Content-Type").indexOf("xml"))return J.isCountRequired?{result:[],count:0}:[];if(Ne&&this.options.batch&&$e.endsWith(Ne.url,this.options.batch)&&"post"===Ne.type.toLowerCase()){let Se,ue,be=ve.getResponseHeader("Content-Type"),_e=z+"";if(be=be.substring(be.indexOf("=batchresponse")+1),_e=_e.split(be),_e.length<2)return{};_e=_e[1];let lt=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(_e);lt&&_e.replace(lt[0],""),_e=_e.split(lt?lt[1]:"");for(let B=_e.length;B>-1;B--)!/\bContent-ID:/i.test(_e[B])||!/\bHTTP.+201/.test(_e[B])||(Se=parseInt(/\bContent-ID: (\d+)/i.exec(_e[B])[1],10),ce.addedRecords[Se]&&(ue=$e.parse.parseJson(/^\{.+\}/m.exec(_e[B])[0]),(0,i.l7)({},ce.addedRecords[Se],this.processResponse(ue))));return ce}return null}compareAndRemove(z,J,ve){return(0,i.le)(J)||Object.keys(z).forEach(Ne=>{Ne!==ve&&"@odata.etag"!==Ne&&($e.isPlainObject(z[Ne])?(this.compareAndRemove(z[Ne],J[Ne]),0===Object.keys(z[Ne]).filter(be=>"@odata.etag"!==be).length&&delete z[Ne]):(z[Ne]===J[Ne]||z[Ne]&&J[Ne]&&z[Ne].valueOf()===J[Ne].valueOf())&&delete z[Ne])}),z}}class Oe extends ut{constructor(){super(),(0,i.sO)("beforeSend",Si.prototype.beforeSend,this)}insert(z,J,ve,Ne,ce){return this.pvt.position=ce,this.updateType="add",{url:z.dataSource.insertUrl||z.dataSource.crudUrl||z.dataSource.url,data:JSON.stringify((0,i.l7)({},{value:J,table:ve,action:"insert"},$e.getAddParams(this,z,Ne)))}}remove(z,J,ve,Ne,ce){return super.remove(z,J,ve),{type:"POST",url:z.dataSource.removeUrl||z.dataSource.crudUrl||z.dataSource.url,data:JSON.stringify((0,i.l7)({},{key:ve,keyColumn:J,table:Ne,action:"remove"},$e.getAddParams(this,z,ce)))}}update(z,J,ve,Ne,ce){return this.updateType="update",this.updateKey=J,{type:"POST",url:z.dataSource.updateUrl||z.dataSource.crudUrl||z.dataSource.url,data:JSON.stringify((0,i.l7)({},{value:ve,action:"update",keyColumn:J,key:ve[J],table:Ne},$e.getAddParams(this,z,ce)))}}processResponse(z,J,ve,Ne,ce,be,Se){let ue;if(z="batch"===(ce?JSON.parse(ce.data):z).action?$e.parse.parseJson(z):z,"add"===this.updateType&&super.insert(J,z,null,null,this.pvt.position),"update"===this.updateType&&super.update(J,this.updateKey,z),this.updateType=void 0,z.added)for(ue=0;ue<z.added.length;ue++)super.insert(J,z.added[ue]);if(z.changed)for(ue=0;ue<z.changed.length;ue++)super.update(J,Se.key,z.changed[ue]);if(z.deleted)for(ue=0;ue<z.deleted.length;ue++)super.remove(J,Se.key,z.deleted[ue]);return z}batchRequest(z,J,ve,Ne,ce){return{type:"POST",url:z.dataSource.batchUrl||z.dataSource.crudUrl||z.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify((0,i.l7)({},{changed:J.changedRecords,added:J.addedRecords,deleted:J.deletedRecords,action:"batch",table:ve.url,key:ve.key},$e.getAddParams(this,z,Ne)))}}addParams(z){(new Si).addParams(z)}}class ft extends Si{constructor(z){super(),this.options=(0,i.l7)({},this.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),(0,i.l7)(this.options,z||{})}getModuleName(){return"CustomDataAdaptor"}}class Nt extends Si{constructor(z,J,ve){super(),this.isCrudAction=!1,this.isInsertAction=!1,(0,i.le)(z)||(this.cacheAdaptor=z),this.pageSize=ve,this.guidId=$e.getGuid("cacheAdaptor"),window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));let ce=this.guidId;(0,i.le)(J)||setInterval(()=>{let be;be=$e.parse.parseJson(window.localStorage.getItem(ce));let Se=[];for(let ue=0;ue<be.results.length;ue++){let _e=+new Date,lt=+new Date(be.results[ue].timeStamp);be.results[ue].timeStamp=_e-lt,_e-lt>J&&Se.push(ue)}for(let ue=0;ue<Se.length;ue++)be.results.splice(Se[ue],1),be.keys.splice(Se[ue],1);window.localStorage.removeItem(ce),window.localStorage.setItem(ce,JSON.stringify(be))},J)}generateKey(z,J){let ve=this.getQueryRequest(J),Ne=u.filterQueryLists(J.queries,["onSelect","onPage","onSkip","onTake","onRange"]),ce=z;"onPage"in Ne&&(ce+=Ne.onPage.pageIndex),ve.sorts.forEach(Se=>{ce+=Se.e.direction+Se.e.fieldName}),ve.groups.forEach(Se=>{ce+=Se.e.fieldName}),ve.searches.forEach(Se=>{ce+=Se.e.searchKey});for(let Se=0;Se<ve.filters.length;Se++){let ue=ve.filters[Se];if(ue.e.isComplex){let _e=J.clone();_e.queries=[];for(let lt=0;lt<ue.e.predicates.length;lt++)_e.queries.push({fn:"onWhere",e:ue.e.predicates[lt],filter:J.queries.filter});ce+=ue.e.condition+this.generateKey(z,_e)}else ce+=ue.e.field+ue.e.operator+ue.e.value}return ce}processQuery(z,J,ve){let ce,Ne=this.generateKey(z.dataSource.url,J);ce=$e.parse.parseJson(window.localStorage.getItem(this.guidId));let be=ce?ce.results[ce.keys.indexOf(Ne)]:null;return null==be||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):be}processResponse(z,J,ve,Ne,ce,be){if(this.isInsertAction||ce&&this.cacheAdaptor.options.batch&&$e.endsWith(ce.url,this.cacheAdaptor.options.batch)&&"post"===ce.type.toLowerCase())return this.cacheAdaptor.processResponse(z,J,ve,Ne,ce,be);z=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));let Se=ve?this.generateKey(J.dataSource.url,ve):J.dataSource.url,ue={};ue=$e.parse.parseJson(window.localStorage.getItem(this.guidId));let _e=ue.keys.indexOf(Se);for(-1!==_e&&(ue.results.splice(_e,1),ue.keys.splice(_e,1)),ue.results[ue.keys.push(Se)-1]={keys:Se,result:z.result,timeStamp:new Date,count:z.count};ue.results.length>this.pageSize;)ue.results.splice(0,1),ue.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(ue)),z}beforeSend(z,J,ve){!(0,i.le)(this.cacheAdaptor.options.batch)&&$e.endsWith(ve.url,this.cacheAdaptor.options.batch)&&"post"===ve.type.toLowerCase()&&J.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),z.dataSource.crossDomain||J.setRequestHeader("Accept",this.cacheAdaptor.options.accept)}update(z,J,ve,Ne){return this.isCrudAction=!0,this.cacheAdaptor.update(z,J,ve,Ne)}insert(z,J,ve){return this.isInsertAction=!0,this.cacheAdaptor.insert(z,J,ve)}remove(z,J,ve,Ne){return this.isCrudAction=!0,this.cacheAdaptor.remove(z,J,ve,Ne)}batchRequest(z,J,ve){return this.cacheAdaptor.batchRequest(z,J,ve)}}class Di{constructor(z,J,ve){let Ne;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],!z&&!this.dataSource&&(z=[]),ve=ve||z.adaptor,z&&!1===z.timeZoneHandling&&(this.timeZoneHandling=z.timeZoneHandling),z instanceof Array?Ne={json:z,offline:!0}:"object"==typeof z?(z.json||(z.json=[]),Ne={url:z.url,insertUrl:z.insertUrl,removeUrl:z.removeUrl,updateUrl:z.updateUrl,crudUrl:z.crudUrl,batchUrl:z.batchUrl,json:z.json,headers:z.headers,accept:z.accept,data:z.data,timeTillExpiration:z.timeTillExpiration,cachingPageSize:z.cachingPageSize,enableCaching:z.enableCaching,requestType:z.requestType,key:z.key,crossDomain:z.crossDomain,jsonp:z.jsonp,dataType:z.dataType,offline:void 0!==z.offline?z.offline:!(z.adaptor instanceof Oe||z.adaptor instanceof ft||z.url),requiresFormat:z.requiresFormat}):$e.throwError("DataManager: Invalid arguments"),void 0===Ne.requiresFormat&&!$e.isCors()&&(Ne.requiresFormat=!!(0,i.le)(Ne.crossDomain)||Ne.crossDomain),void 0===Ne.dataType&&(Ne.dataType="json"),this.dataSource=Ne,this.defaultQuery=J,Ne.url&&Ne.offline&&!Ne.json.length?(this.isDataAvailable=!1,this.adaptor=ve||new We,this.dataSource.offline=!1,this.ready=this.executeQuery(J||new u),this.ready.then(ce=>{this.dataSource.offline=!0,this.isDataAvailable=!0,Ne.json=ce.result,this.adaptor=new ut})):this.adaptor=Ne.offline?new ut:new We,!Ne.jsonp&&this.adaptor instanceof We&&(Ne.jsonp="callback"),this.adaptor=ve||this.adaptor,Ne.enableCaching&&(this.adaptor=new Nt(this.adaptor,Ne.timeTillExpiration,Ne.cachingPageSize)),this}setDefaultQuery(z){return this.defaultQuery=z,this}executeLocal(z){!this.defaultQuery&&!(z instanceof u)&&$e.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||$e.throwError("DataManager - executeLocal() : Json data is required to execute");let J=this.adaptor.processQuery(this,z=z||this.defaultQuery);if(z.subQuery){let ve=z.subQuery.fromTable,Ne=z.subQuery.lookups,ce=z.isCountRequired?J.result:J;Ne&&Ne instanceof Array&&$e.buildHierarchy(z.subQuery.fKey,ve,ce,Ne,z.subQuery.key);for(let be=0;be<ce.length;be++)ce[be][ve]instanceof Array&&(ce[be]=(0,i.l7)({},{},ce[be]),ce[be][ve]=this.adaptor.processResponse(z.subQuery.using(new Di(ce[be][ve].slice(0))).executeLocal(),this,z))}return this.adaptor.processResponse(J,this,z)}executeQuery(z,J,ve,Ne){let ce="makeRequest";"function"==typeof z&&(Ne=ve,ve=J,J=z,z=null),z||(z=this.defaultQuery),z instanceof u||$e.throwError("DataManager - executeQuery() : A query is required to execute");let be=new bt,Se={query:z};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!(0,i.le)(this.adaptor[ce])||this.isCustomDataAdaptor(this.adaptor)){let ue=this.adaptor.processQuery(this,z);(0,i.le)(this.adaptor[ce])?!(0,i.le)(ue.url)||this.isCustomDataAdaptor(this.adaptor)?this.makeRequest(ue,be,Se,z):(Se=Di.getDeferedArgs(z,ue,Se),be.resolve(Se)):this.adaptor[ce](ue,be,Se,z)}else Di.nextTick(()=>{let ue=this.executeLocal(z);Se=Di.getDeferedArgs(z,ue,Se),be.resolve(Se)});return(J||ve)&&be.promise.then(J,ve),Ne&&be.promise.then(Ne,Ne),be.promise}static getDeferedArgs(z,J,ve){return z.isCountRequired?(ve.result=J.result,ve.count=J.count,ve.aggregates=J.aggregates):ve.result=J,ve}static nextTick(z){(window.setImmediate||window.setTimeout)(z,0)}extendRequest(z,J,ve){return(0,i.l7)({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:J,onFailure:ve},z)}makeRequest(z,J,ve,Ne){let ce=!!Ne.subQuerySelector,be=Xe=>{ve.error=Xe,J.reject(ve)},Se=(Xe,B,de,Be,Fe,xt,$t)=>{ve.xhr=de,ve.count=B?parseInt(B.toString(),10):0,ve.result=Xe,ve.request=Be,ve.aggregates=xt,ve.actual=Fe,ve.virtualSelectRecords=$t,J.resolve(ve)},ue=(Xe,B)=>{let de=new bt,Be={parent:ve};Ne.subQuery.isChild=!0;let Fe=this.adaptor.processQuery(this,Ne.subQuery,Xe?this.adaptor.processResponse(Xe):B),xt=this.makeRequest(Fe,de,Be,Ne.subQuery);return ce||de.then($t=>{Xe&&($e.buildHierarchy(Ne.subQuery.fKey,Ne.subQuery.fromTable,Xe,$t,Ne.subQuery.key),Se(Xe,$t.count,$t.xhr))},be),xt},lt=this.extendRequest(z,(Xe,B)=>{if(this.isGraphQLAdaptor(this.adaptor)&&!(0,i.le)(Xe.errors))return be(Xe.errors);this.isCustomDataAdaptor(this.adaptor)&&(B=(0,i.l7)({},this.ajaxReqOption,B)),-1===B.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&this.dateParse&&(Xe=$e.parse.parseJson(Xe));let de=this.adaptor.processResponse(Xe,this,Ne,B.httpRequest,B),Be=0,Fe=null,$t=Xe.virtualSelectRecords;Ne.isCountRequired&&(Be=de.count,Fe=de.aggregates,de=de.result),Ne.subQuery?ce||ue(de,B):Se(de,Be,B.httpRequest,B.type,Xe,Fe,$t)},be);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=lt,this.adaptor.options.getData({data:lt.data,onSuccess:lt.onSuccess,onFailure:lt.onFailure});else{let Xe=new i.tk(lt);Xe.beforeSend=()=>{this.beforeSend(Xe.httpRequest,Xe)},lt=Xe.send(),lt.catch(B=>!0),this.requests.push(Xe)}if(ce){let Xe,B=Ne.subQuerySelector.call(this,{query:Ne.subQuery,parent:Ne});B&&B.length?(Xe=Promise.all([lt,ue(null,B)]),Xe.then((...de)=>{let Be=de[0],Fe=this.adaptor.processResponse(Be[0],this,Ne,this.requests[0].httpRequest,this.requests[0]),xt=0;Ne.isCountRequired&&(xt=Fe.count,Fe=Fe.result);let $t=this.adaptor.processResponse(Be[1],this,Ne.subQuery,this.requests[1].httpRequest,this.requests[1]);xt=0,Ne.subQuery.isCountRequired&&(xt=$t.count,$t=$t.result),$e.buildHierarchy(Ne.subQuery.fKey,Ne.subQuery.fromTable,Fe,$t,Ne.subQuery.key),ce=!1,Se(Fe,xt,this.requests[0].httpRequest)})):ce=!1}return lt}beforeSend(z,J){this.adaptor.beforeSend(this,z,J);let Ne,ve=this.dataSource.headers;for(let ce=0;ve&&ce<ve.length;ce++){Ne=[];let be=Object.keys(ve[ce]);for(let Se of be)Ne.push(Se),z.setRequestHeader(Se,ve[ce][Se])}}saveChanges(z,J,ve,Ne,ce){ve instanceof u&&(Ne=ve,ve=null);let be={url:ve,key:J||this.dataSource.key},Se=this.adaptor.batchRequest(this,z,be,Ne||new u,ce),ue="doAjaxRequest";if(this.dataSource.offline)return Se;if((0,i.le)(this.adaptor[ue])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(Se,this.adaptor.options.batchUpdate);{let _e=new bt,lt=new i.tk(Se);return lt.beforeSend=()=>{this.beforeSend(lt.httpRequest,lt)},lt.onSuccess=(Xe,B)=>{this.isGraphQLAdaptor(this.adaptor)&&((0,i.le)(Xe.errors)||lt.onFailure(JSON.stringify(Xe.errors))),_e.resolve(this.adaptor.processResponse(Xe,this,null,B.httpRequest,B,z,be))},lt.onFailure=Xe=>{_e.reject([{error:Xe}])},lt.send().catch(Xe=>!0),_e.promise}}return this.adaptor[ue](Se)}insert(z,J,ve,Ne){J instanceof u&&(ve=J,J=null);let ce=this.adaptor.insert(this,z,J,ve,Ne),be="doAjaxRequest";return this.dataSource.offline?ce:(0,i.le)(this.adaptor[be])?this.doAjaxRequest(ce,this.adaptor.options.addRecord):this.adaptor[be](ce)}remove(z,J,ve,Ne){"object"==typeof J&&(J=$e.getObject(z,J)),ve instanceof u&&(Ne=ve,ve=null);let ce=this.adaptor.remove(this,z,J,ve,Ne),be="doAjaxRequest";return this.dataSource.offline?ce:(0,i.le)(this.adaptor[be])?this.doAjaxRequest(ce,this.adaptor.options.deleteRecord):this.adaptor[be](ce)}update(z,J,ve,Ne,ce){ve instanceof u&&(Ne=ve,ve=null);let be=this.adaptor.update(this,z,J,ve,Ne,ce),Se="doAjaxRequest";return this.dataSource.offline?be:(0,i.le)(this.adaptor[Se])?this.doAjaxRequest(be,this.adaptor.options.updateRecord):this.adaptor[Se](be)}isCustomDataAdaptor(z){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()}isGraphQLAdaptor(z){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()}successFunc(z,J){if(this.isGraphQLAdaptor(this.adaptor)){let ve=JSON.parse(z);(0,i.le)(ve.errors)||this.failureFunc(JSON.stringify(ve.errors))}this.isCustomDataAdaptor(this.adaptor)&&(J=(0,i.l7)({},this.ajaxReqOption,J));try{$e.parse.parseJson(z)}catch{z=[]}z=this.adaptor.processResponse($e.parse.parseJson(z),this,null,J.httpRequest,J),this.ajaxDeffered.resolve(z)}failureFunc(z){this.ajaxDeffered.reject([{error:z}])}doAjaxRequest(z,J){if(z=(0,i.l7)({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},z),this.ajaxDeffered=new bt,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=z,J.call(this,{data:z.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{let ve=new i.tk(z);ve.beforeSend=()=>{this.beforeSend(ve.httpRequest,ve)},ve.onSuccess=this.successFunc.bind(this),ve.onFailure=this.failureFunc.bind(this),ve.send().catch(Ne=>!0)}return this.ajaxDeffered.promise}}class bt{constructor(){this.promise=new Promise((z,J)=>{this.resolve=z,this.reject=J}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}},8608:(An,hs,rt)=>{rt.d(hs,{NB:()=>Be,NU:()=>Vs,Qc:()=>je});var i=rt(7628),u=rt(4028),Ue=rt(7520),Zt=rt(5774),$e=rt(3155),Li=rt(2162),Lt=rt(9528);let ut="",Si="",We=[],E="";function Oe(xi,v,M,$){const fe=v;$=$??!0;const Ce={item:null,index:null};if(xi&&xi.length){const pt=xi.length,Mt=$?xi.toLocaleLowerCase():xi;for(let wi=0,Gi=fe;wi<Gi.length;wi++){const Vi=Gi[wi],sn=($?Vi.textContent.toLocaleLowerCase():Vi.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===M&&sn===Mt||"StartsWith"===M&&sn.substr(0,pt)===Mt||"EndsWith"===M&&sn.substr(sn.length-Mt.length)===Mt||"Contains"===M&&new RegExp(Mt,"g").test(sn))return Ce.item=Vi,Ce.index=wi,{item:Vi,index:wi}}return Ce}return Ce}function jt(xi,v,M,$){if(""!==v){const fe=M?"gim":"gm";v=/^[a-zA-Z0-9- ]*$/.test(v)?v:v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Nt(xi,new RegExp("StartsWith"===$?"^("+v+")":"EndsWith"===$?"("+v+")$":"("+v+")",fe))}}function Nt(xi,v){for(let M=0;xi.childNodes&&M<xi.childNodes.length;M++){if(3===xi.childNodes[M].nodeType&&""!==xi.childNodes[M].textContent.trim()){const $=xi.childNodes[M].nodeValue.trim().replace(v,'<span class="e-highlight">$1</span>');xi.childNodes[M].nodeValue="",xi.innerHTML=xi.innerHTML.trim()+$;break}Nt(xi.childNodes[M],v)}}function Di(xi){const v=xi.querySelectorAll(".e-highlight");for(let M=v.length-1;M>=0;M--){const $=v[M].parentNode,fe=document.createTextNode(v[M].textContent);$.replaceChild(fe,v[M])}}var bt=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};let Rt=(()=>{class xi extends i.rt{}return bt([(0,i.Z9)()],xi.prototype,"text",void 0),bt([(0,i.Z9)()],xi.prototype,"value",void 0),bt([(0,i.Z9)()],xi.prototype,"iconCss",void 0),bt([(0,i.Z9)()],xi.prototype,"groupBy",void 0),bt([(0,i.Z9)()],xi.prototype,"htmlAttributes",void 0),xi})();const z_root="e-dropdownbase",z_noData="e-nodata",z_focus="e-item-focus",z_li="e-list-item",z_group="e-list-group-item";let lt=(()=>{let xi=class extends i.wA{constructor(M,$){super(M,$),this.preventChange=!1,this.isAngular=!1,this.isPreventChange=!1,this.isDynamicDataChange=!1}getPropObject(M,$,fe){const Ce=new Object,pt=new Object;Ce[M]=$[M],pt[M]=fe[M];const wi=new Object;return wi.newProperty=Ce,wi.oldProperty=pt,wi}getValueByText(M,$,fe){let Ce=null;return(0,i.le)(this.listData)||(Ce=this.checkValueCase(M,!!$,fe)),Ce}checkValueCase(M,$,fe,Ce){let pt=null;Ce&&(pt=M);const Mt=this.listData,wi=this.fields,Gi=this.typeOfData(Mt).typeof;if("string"===Gi||"number"===Gi||"boolean"===Gi)for(const Vi of Mt)(0,i.le)(Vi)||(fe?pt=this.checkingAccent(String(Vi),M,$):$?this.checkIgnoreCase(String(Vi),M)&&(pt=this.getItemValue(String(Vi),M,$)):this.checkNonIgnoreCase(String(Vi),M)&&(pt=this.getItemValue(String(Vi),M,$,Ce)));else if($)Mt.filter(Vi=>{const sn=(0,i.NA)(wi.value,Vi);!(0,i.le)(sn)&&this.checkIgnoreCase((0,i.NA)(wi.text,Vi).toString(),M)&&(pt=(0,i.NA)(wi.value,Vi))});else if(Ce){let Vi=null;Vi=pt,Mt.filter(sn=>{const ts=(0,i.NA)(wi.value,sn);!(0,i.le)(ts)&&!(0,i.le)(pt)&&ts.toString()===Vi.toString()&&(pt=(0,i.NA)(wi.text,sn))})}else Mt.filter(Vi=>{this.checkNonIgnoreCase((0,i.NA)(wi.text,Vi),M)&&(pt=(0,i.NA)(wi.value,Vi))});return pt}checkingAccent(M,$,fe){const Ce=u.j4.ignoreDiacritics(String(M)),pt=u.j4.ignoreDiacritics($.toString());let Mt=null;return fe?this.checkIgnoreCase(Ce,pt)&&(Mt=this.getItemValue(String(M),$,fe)):this.checkNonIgnoreCase(String(M),$)&&(Mt=this.getItemValue(String(M),$,fe)),Mt}checkIgnoreCase(M,$){return String(M).toLowerCase()===$.toString().toLowerCase()}checkNonIgnoreCase(M,$){return String(M)===$.toString()}getItemValue(M,$,fe,Ce){let pt=null;const wi=this.typeOfData(this.listData).typeof;return pt=Ce?M.toString():fe?"string"===wi?String(M):this.getFormattedValue(String(M)):"string"===wi?$:this.getFormattedValue($),pt}templateCompiler(M){let $=!1;if(M)try{$=!!(0,i.td)(M,document).length}catch{$=!1}return $}l10nUpdate(M){const $="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){const fe=M?this.actionFailureTemplate:this.noRecordsTemplate;let Ce;const pt=M?this.actionFailureTemplateId:this.noRecordsTemplateId;$.innerHTML="",Ce=this.templateCompiler(fe)?(0,i.MY)((0,i.Ys)(fe,document).innerHTML.trim()):(0,i.MY)(fe);const Gi=Ce({},this,M?"actionFailureTemplate":"noRecordsTemplate",pt,this.isStringTemplate,null,$);if(Gi&&Gi.length>0)for(let Vi=0;Vi<Gi.length;Vi++)$.appendChild(Gi[Vi]);this.renderReactTemplates()}else{const fe={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},Ce=new i.E7(this.getLocaleName(),{},this.locale);this.l10n=""!==Ce.getConstant("actionFailureTemplate")?Ce:new i.E7("listbox"===this.getModuleName()?"listbox":"dropdowns",fe,this.locale);const pt=this.l10n.getConstant(M?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){const Mt=this.createElement("li");Mt.textContent=pt,$.appendChild(Mt),Mt.classList.add("e-list-nrt")}else $.innerHTML=pt}}getLocaleName(){return"drop-down-base"}getTextByValue(M){return this.checkValueCase(M,!1,!1,!0)}getFormattedValue(M){if(this.listData&&this.listData.length){const $=this.typeOfData(this.listData);if("number"==typeof(0,i.NA)(this.fields.value?this.fields.value:"value",$.item)||"number"===$.typeof)return parseFloat(M);if("boolean"==typeof(0,i.NA)(this.fields.value?this.fields.value:"value",$.item)||"boolean"===$.typeof)return"true"===M||""+M=="true"}return M}setEnableRtl(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?(0,i.cn)(this.enableRtlElements,"e-rtl"):(0,i.IV)(this.enableRtlElements,"e-rtl")}initialize(){if(this.bindEvent=!0,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,"UL"===this.element.tagName){const M=Ue.Kh.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(M,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!(0,i.le)(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}getPersistData(){return this.addOnPersist([])}setEnabled(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}updateDataAttribute(M){const $=["class","style","id","type"],fe={};for(let Ce=0;Ce<this.element.attributes.length;Ce++)-1===$.indexOf(this.element.attributes[Ce].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[Ce].name)&&(fe[this.element.attributes[Ce].name]=this.element.getAttribute(this.element.attributes[Ce].name));(0,i.l7)(fe,M,fe),this.setProperties({htmlAttributes:fe},!0)}renderItemsBySelect(){const M=this.element,$={value:"value",text:"text"},fe=[],Ce=M.querySelectorAll("select>optgroup"),pt=M.querySelectorAll("select>option");if(this.getJSONfromOption(fe,pt,$),Ce.length){for(let Mt=0;Mt<Ce.length;Mt++){const wi=Ce[Mt],Gi={};Gi[$.text]=wi.label,Gi.isHeader=!0;const Vi=wi.querySelectorAll("option");fe.push(Gi),this.getJSONfromOption(fe,Vi,$)}M.querySelectorAll("select>option")}this.updateFields($.text,$.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(fe,$)}updateFields(M,$,fe,Ce,pt){const Mt={fields:{text:M,value:$,groupBy:(0,i.le)(fe)?this.fields&&this.fields.groupBy:fe,htmlAttributes:(0,i.le)(Ce)?this.fields&&this.fields.htmlAttributes:Ce,iconCss:(0,i.le)(pt)?this.fields&&this.fields.iconCss:pt}};this.setProperties(Mt,!0)}getJSONfromOption(M,$,fe){for(const Ce of $){const pt={};pt[fe.text]=Ce.innerText,pt[fe.value]=(0,i.le)(Ce.getAttribute(fe.value))?Ce.innerText:Ce.getAttribute(fe.value),M.push(pt)}}preRender(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=`${this.element.id}ItemTemplate`,this.valueTemplateId=`${this.element.id}ValueTemplate`,this.groupTemplateId=`${this.element.id}GroupTemplate`,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`}setListData(M,$,fe){let Ce;$=$||this.fields,this.isActive=!0;const pt={cancel:!1,data:M,query:fe};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",pt,Mt=>{if(!Mt.cancel)if(this.showSpinner(),M instanceof u.hm){if(this.isRequested=!0,this.isDataFetched)return void this.emptyDataRequest($);Mt.data.executeQuery(this.getQuery(Mt.query)).then(wi=>{this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",wi,Gi=>{if(!Gi.cancel){const Vi=Gi.result;0===Vi.length&&(this.isDataFetched=!0),Ce=this.renderItems(Vi,$),this.onActionComplete(Ce,Vi,Gi),this.groupTemplate&&this.renderGroupTemplate(Ce),this.isRequested=!1,this.bindChildItems(Vi,Ce,$,Gi)}})}).catch(wi=>{this.isRequested=!1,this.onActionFailure(wi),this.hideSpinner()})}else{const wi=new u.hm(Mt.data),Vi={cancel:!1,result:this.getQuery(Mt.query).executeLocal(wi)};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",Vi,sn=>{sn.cancel||(Ce=this.renderItems(sn.result,$),this.onActionComplete(Ce,sn.result),this.groupTemplate&&this.renderGroupTemplate(Ce),this.bindChildItems(sn.result,Ce,$),setTimeout(()=>{"multiselect"===this.getModuleName()&&null!=this.itemTemplate&&Ce.childElementCount>0&&(Ce.children[0].childElementCount>0||this.fields.groupBy&&Ce.children[1]&&Ce.children[1].childElementCount>0)&&this.updateDataList()}))})}})}bindChildItems(M,$,fe,Ce){M.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(()=>{const pt=this.remainingItems(this.sortedData,fe);(0,i.R3)(pt,$),this.liCollections=this.list.querySelectorAll("."+z_li),this.updateListValues(),this.raiseDataBound(M,Ce)},0):this.raiseDataBound(M,Ce)}updateListValues(){}findListElement(M,$,fe,Ce){let pt=null;if(M){const Mt=[].slice.call(M.querySelectorAll($));for(let wi=0;wi<Mt.length;wi++)if(Mt[wi].getAttribute(fe)===Ce+""){pt=Mt[wi];break}}return pt}raiseDataBound(M,$){this.hideSpinner(),this.trigger("dataBound",{items:M,e:$})}remainingItems(M,$){const fe=new u.hm(M).executeLocal((new u.AE).skip(100));if(this.itemTemplate){const pt=this.templateListItem(fe,$);return[].slice.call(pt.childNodes)}const Ce=this.typeOfData(fe).typeof;return"string"===Ce||"number"===Ce||"boolean"===Ce?Ue.Kh.createListItemFromArray(this.createElement,fe,!0,this.listOption(fe,$),this):Ue.Kh.createListItemFromJson(this.createElement,fe,this.listOption(fe,$),1,!0,this)}emptyDataRequest(M){const $=[];this.onActionComplete(this.renderItems($,M),$),this.isRequested=!1,this.hideSpinner()}showSpinner(){}hideSpinner(){}onActionFailure(M){this.liCollections=[],this.trigger("actionFailure",M),this.l10nUpdate(!0),(0,i.cn)([this.list],z_noData)}onActionComplete(M,$,fe){if(this.listData=$,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=(0,i.le)(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(let Ce=0;Ce<M.childElementCount;Ce++)M.children[Ce].classList.contains("e-list-group-item")&&((0,i.le)(M.children[Ce].innerHTML)||""==M.children[Ce].innerHTML)&&(0,i.cn)([M.children[Ce]],"e-hide-group-header");(0,i.le)(this.list)||(this.list.innerHTML="",this.list.appendChild(M),this.liCollections=this.list.querySelectorAll("."+z_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,$,this.bindEvent))}postRender(M,$,fe){const Ce=M.querySelector("."+z_li),pt=M.querySelector(".e-active");Ce&&!pt&&Ce.classList.add(z_focus),$.length<=0?(this.l10nUpdate(),(0,i.cn)([M],z_noData)):M.classList.remove(z_noData)}getQuery(M){return M||(this.query?this.query:new u.AE)}renderGroupTemplate(M){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+z_group)){const $=this.dataSource,fe={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},Ce=M.querySelectorAll("."+z_group);if(this.templateCompiler(this.groupTemplate)){const Mt=(0,i.Ys)(this.groupTemplate,document).innerHTML.trim(),wi=Ue.Kh.renderGroupTemplate(Mt,$,this.fields.properties,Ce,fe,this);if(this.isGroupChecking)for(let Gi=0;Gi<wi.length;Gi++)this.notify("addItem",{module:"CheckBoxSelection",item:wi[Gi]})}else{const Mt=Ue.Kh.renderGroupTemplate(this.groupTemplate,$,this.fields.properties,Ce,fe,this);if(this.isGroupChecking)for(let wi=0;wi<Mt.length;wi++)this.notify("addItem",{module:"CheckBoxSelection",item:Mt[wi]})}this.renderReactTemplates()}}createListItems(M,$){M&&$.groupBy||this.element.querySelector("optgroup")?($.groupBy&&("None"!==this.sortOrder&&(M=this.getSortedDataSource(M)),M=Ue.Kh.groupDataSource(M,$.properties,this.sortOrder)),(0,i.cn)([this.list],"e-dd-group")):M=this.getSortedDataSource(M);const fe=this.listOption(M,$),Ce=M.length>100?new u.hm(M).executeLocal((new u.AE).take(100)):M;return this.sortedData=M,Ue.Kh.createList(this.createElement,"autocomplete"===this.getModuleName()?Ce:M,fe,!0,this)}listOption(M,$){const fe=!(0,i.le)($.iconCss),Ce=(0,i.le)($.properties)?$:$.properties;return(0,i.l7)({},null!==$.text||null!==$.value?{fields:Ce,showIcon:fe,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},$,!0)}setFloatingHeader(M){(0,i.le)(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(z_group)||(this.fixedHeaderElement.style.display="none"),(0,i.Ce)([this.fixedHeaderElement],this.list),this.setFixedHeader()),!(0,i.le)(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(M)}scrollStop(M){let $=(0,i.le)(M)?this.list:M.target,fe=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10);const Ce=Math.round($.scrollTop/fe),pt=this.list.querySelectorAll("li:not(.e-hide-listitem)");for(let Mt=Ce;Mt>-1;Mt--){if(!(0,i.le)(pt[Mt])&&pt[Mt].classList.contains(z_group)){this.fixedHeaderElement.innerHTML=pt[Mt].innerHTML,this.fixedHeaderElement.style.top=$.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}getValidLi(){return this.liCollections[0]}renderItems(M,$){let fe;if(this.itemTemplate&&M){let Ce=M;Ce&&$.groupBy?("None"!==this.sortOrder&&(Ce=this.getSortedDataSource(Ce)),Ce=Ue.Kh.groupDataSource(Ce,$.properties,this.sortOrder)):Ce=this.getSortedDataSource(Ce),this.sortedData=Ce;const pt=Ce.length>100?new u.hm(Ce).executeLocal((new u.AE).take(100)):Ce;fe=this.templateListItem("autocomplete"===this.getModuleName()?pt:Ce,$)}else fe=this.createListItems(M,$);return fe}templateListItem(M,$){const fe=this.listOption(M,$);if(fe.templateID=this.itemTemplateId,fe.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){const pt=(0,i.Ys)(this.itemTemplate,document).innerHTML.trim();return Ue.Kh.renderContentTemplate(this.createElement,pt,M,$.properties,fe,this)}return Ue.Kh.renderContentTemplate(this.createElement,this.itemTemplate,M,$.properties,fe,this)}typeOfData(M){for(let fe=0;!(0,i.le)(M)&&fe<M.length;fe++)if(!(0,i.le)(M[fe])&&!(0,i.le)("string"==typeof M[fe]||"number"==typeof M[fe]||"boolean"==typeof M[fe]?M[fe]:(0,i.NA)(this.fields.value?this.fields.value:"value",M[fe])))return{typeof:typeof M[fe],item:M[fe]};return{typeof:null,item:null}}setFixedHeader(){this.list.parentElement.style.display="block";let M=0;this.list&&this.list.parentElement&&(M=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(M))&&(M=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));const $=this.getValidLi().offsetWidth-M;this.fixedHeaderElement.style.width=$.toString()+"px",(0,i.V7)(this.fixedHeaderElement,{zIndex:10});const fe=this.ulElement.querySelector("."+z_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=fe.innerHTML}getSortedDataSource(M){if(M&&"None"!==this.sortOrder){let $=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(M).typeof||"number"===this.typeOfData(M).typeof||"boolean"===this.typeOfData(M).typeof)&&($=""),M=Ue.Kh.getDataSource(M,Ue.Kh.addSorting(this.sortOrder,$))}return M}getIndexByValue(M){let $;const fe=this.getItems();for(let Ce=0;Ce<fe.length;Ce++)if(!(0,i.le)(M)&&fe[Ce].getAttribute("data-value")===M.toString()){$=Ce;break}return $}dispatchEvent(M,$){const fe=document.createEvent("HTMLEvents");fe.initEvent($,!1,!0),M.dispatchEvent(fe)}setFields(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")}resetList(M,$,fe){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(M instanceof Array?M.length>0:!(0,i.le)(M))&&this.selectData&&this.selectData.length>0&&(M=this.selectData),this.setListData(M,$,fe))}updateSelectElementData(M){M&&(0,i.le)(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}updateSelection(){}renderList(){this.render()}updateDataSource(M){this.resetList(this.dataSource)}setUpdateInitial(M,$){this.isDataFetched=!1;const fe={};for(let Ce=0;M.length>Ce;Ce++)$[M[Ce]]&&"fields"===M[Ce]?(this.setFields(),fe[M[Ce]]=$[M[Ce]]):$[M[Ce]]&&(fe[M[Ce]]=$[M[Ce]]);Object.keys(fe).length>0&&(-1===Object.keys(fe).indexOf("dataSource")&&(fe.dataSource=this.dataSource),this.updateDataSource(fe))}onPropertyChanged(M,$){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],M),this.setUpdateInitial(["sortOrder","itemTemplate"],M);for(const fe of Object.keys(M))switch(fe){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){const Ce=this.ulElement.querySelector("."+z_group);this.fixedHeaderElement.innerHTML=Ce.innerHTML}break;case"locale":this.list&&!(0,i.le)(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:M.zIndex},!0),this.setZIndex()}}render(M){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(z_root),this.setFields(),this.rippleFun=(0,i.qx)(this.list,{duration:300,selector:"."+z_li});const fe=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!(0,i.le)(fe))&&!this.isGroupChecking&&i.bi.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),(0,i.IV)([this.element],z_root),this.element.style.display="none";const Ce=this.createElement("div");this.element.parentElement.insertBefore(Ce,this.element),Ce.appendChild(this.element),Ce.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),M||this.initialize()}getModuleName(){return"dropdownbase"}getItems(){return this.ulElement.querySelectorAll("."+z_li)}addItem(M,$){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&(0,i.le)($)){let Gi=[].slice.call(this.listData);Gi.push(M),Gi=this.getSortedDataSource(Gi),this.fields.groupBy&&(Gi=Ue.Kh.groupDataSource(Gi,this.fields.properties,this.sortOrder)),$=Gi.indexOf(M)}const fe=this.getItems().length,Ce=this.list.querySelector(".e-active");let pt;M=M instanceof Array?M:[M],pt=(0,i.le)($)||$<0||$>fe-1?fe:$;const Mt=this.fields;M&&Mt.groupBy&&(M=Ue.Kh.groupDataSource(M,Mt.properties));const wi=[];for(let Gi=0;Gi<M.length;Gi++){const Vi=M[Gi],sn=Vi.isHeader,ts=this.createElement("li",{className:sn?z_group:z_li,id:"option-add-"+Gi}),wn=Vi instanceof Object?(0,i.NA)(Mt.text,Vi):Vi;if(sn&&(ts.innerText=wn),this.itemTemplate&&!sn){const ht=(this.templateCompiler(this.itemTemplate)?(0,i.MY)((0,i.Ys)(this.itemTemplate,document).innerHTML.trim()):(0,i.MY)(this.itemTemplate))(Vi,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,ts);ht&&(0,i.R3)(ht,ts)}else sn||ts.appendChild(document.createTextNode(wn));ts.setAttribute("data-value",Vi instanceof Object?(0,i.NA)(Mt.value,Vi):Vi),ts.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:ts}),wi.push(ts),this.listData.push(Vi),"None"===this.sortOrder&&(0,i.le)($)&&0===pt&&(pt=null),this.updateActionCompleteData(ts,Vi,pt),this.trigger("beforeItemRender",{element:ts,item:Vi})}if(0===fe&&(0,i.le)(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(z_noData),this.list.appendChild(this.ulElement),this.liCollections=wi,(0,i.R3)(wi,this.ulElement),this.updateAddItemList(this.list,fe);else{"listbox"===this.getModuleName()&&0===fe&&(this.ulElement.innerHTML="");const Gi=[];for(let Vi=0;Vi<M.length;Vi++){const sn=this.ulElement.querySelectorAll(".e-list-group-item");for(let wn=0;wn<sn.length;wn++)Gi[wn]=sn[wn].innerText;if(Gi.indexOf(wi[Vi].innerText)>-1&&Mt.groupBy){for(let wn=0;wn<sn.length;wn++)if(Gi[wn]===wi[Vi].innerText){this.ulElement.insertBefore(wi[Vi+1],"None"===this.sortOrder?sn[wn+1]:this.ulElement.childNodes[$]),Vi+=1;break}}else this.liCollections[pt]?this.liCollections[pt].parentNode.insertBefore(wi[Vi],this.liCollections[pt]):this.ulElement.appendChild(wi[Vi]);const ts=[].slice.call(this.liCollections);ts.splice(pt,0,wi[Vi]),this.liCollections=ts,pt+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(Ce||0===$)&&this.updateSelection()}validationAttribute(M,$){const fe=M.getAttribute("name")?M.getAttribute("name"):M.getAttribute("id");$.setAttribute("name",fe),M.removeAttribute("name");const Ce=["required","aria-required","form"];for(let pt=0;pt<Ce.length;pt++){if(!M.getAttribute(Ce[pt]))continue;const Mt=M.getAttribute(Ce[pt]);$.setAttribute(Ce[pt],Mt),M.removeAttribute(Ce[pt])}}setZIndex(){}updateActionCompleteData(M,$,fe){}updateAddItemList(M,$){}updateDataList(){}getDataByValue(M){if(!(0,i.le)(this.listData)){const $=this.typeOfData(this.listData).typeof;if("string"===$||"number"===$||"boolean"===$){for(const fe of this.listData)if(!(0,i.le)(fe)&&fe===M)return fe}else for(const fe of this.listData)if(!(0,i.le)(fe)&&(0,i.NA)(this.fields.value?this.fields.value:"value",fe)===M)return fe}return null}destroy(){document.body.contains(this.list)&&(i.bi.remove(this.list,"scroll",this.setFloatingHeader),(0,i.le)(this.rippleFun)||this.rippleFun(),(0,i.og)(this.list)),super.destroy()}};return bt([(0,i.Zz)({text:null,value:null,iconCss:null,groupBy:null},Rt)],xi.prototype,"fields",void 0),bt([(0,i.Z9)(!1)],xi.prototype,"enablePersistence",void 0),bt([(0,i.Z9)(null)],xi.prototype,"itemTemplate",void 0),bt([(0,i.Z9)(null)],xi.prototype,"groupTemplate",void 0),bt([(0,i.Z9)("No records found")],xi.prototype,"noRecordsTemplate",void 0),bt([(0,i.Z9)("Request failed")],xi.prototype,"actionFailureTemplate",void 0),bt([(0,i.Z9)("None")],xi.prototype,"sortOrder",void 0),bt([(0,i.Z9)(!0)],xi.prototype,"enabled",void 0),bt([(0,i.Z9)([])],xi.prototype,"dataSource",void 0),bt([(0,i.Z9)(null)],xi.prototype,"query",void 0),bt([(0,i.Z9)("StartsWith")],xi.prototype,"filterType",void 0),bt([(0,i.Z9)(!0)],xi.prototype,"ignoreCase",void 0),bt([(0,i.Z9)(1e3)],xi.prototype,"zIndex",void 0),bt([(0,i.Z9)(!1)],xi.prototype,"ignoreAccent",void 0),bt([(0,i.Z9)()],xi.prototype,"locale",void 0),bt([(0,i.ju)()],xi.prototype,"actionBegin",void 0),bt([(0,i.ju)()],xi.prototype,"actionComplete",void 0),bt([(0,i.ju)()],xi.prototype,"actionFailure",void 0),bt([(0,i.ju)()],xi.prototype,"select",void 0),bt([(0,i.ju)()],xi.prototype,"dataBound",void 0),bt([(0,i.ju)()],xi.prototype,"created",void 0),bt([(0,i.ju)()],xi.prototype,"destroyed",void 0),xi=bt([i.Zl],xi),xi})();var Xe=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};const B={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:z_li,disable:"e-disabled",base:z_root,focus:z_focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},de={container:null,buttons:[]};let Be=class extends lt{constructor(v,M){super(v,M),this.isListSearched=!1,this.preventChange=!1,this.isAngular=!1}preRender(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),super.preRender(),this.activeIndex=this.index,this.queryString=""}initializeData(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}renderList(v){super.render(v),this.unWireListEvents(),this.wireListEvents()}floatLabelChange(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){const v=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?(0,i.s1)(v,["e-label-top"],["e-label-bottom"]):(0,i.s1)(v,["e-label-bottom"],["e-label-top"])}}resetHandler(v){v.preventDefault(),this.clearAll(v)}resetFocusElement(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!(0,i.le)(this.ulElement)){const v=this.ulElement.querySelector("."+B.li);v&&v.classList.add(B.focus)}}clearAll(v,M){((0,i.le)(M)||!(0,i.le)(M)&&((0,i.le)(M.dataSource)||!(M.dataSource instanceof u.hm)&&0===M.dataSource.length))&&(this.isActive=!0,this.resetSelection(M));const $=this.getItemData();this.previousValue!==$.value&&this.onChangeEvent(v)}resetSelection(v){this.list&&((0,i.le)(v)||!(0,i.le)(v.dataSource)&&(v.dataSource instanceof u.hm||0!==v.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!(0,i.le)(this.actionCompleteData.ulElement)&&!(0,i.le)(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(v.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&((0,i.og)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const v of Object.keys(this.htmlAttributes))if("class"===v){const M=this.htmlAttributes[v].replace(/\s+/g," ").trim();""!==M&&(0,i.cn)([this.inputWrapper.container],M.split(" "))}else if("disabled"===v&&"disabled"===this.htmlAttributes[v])this.enabled=!1,this.setEnable();else if("readonly"!==v||(0,i.le)(this.htmlAttributes[v]))if("style"===v)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[v]);else{const M=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],$=["name","required"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&M.push("tabindex"),$.indexOf(v)>-1||0===v.indexOf("data")?this.hiddenElement.setAttribute(v,this.htmlAttributes[v]):M.indexOf(v)>-1?"placeholder"===v?$e.II.setPlaceholder(this.htmlAttributes[v],this.inputElement):this.inputElement.setAttribute(v,this.htmlAttributes[v]):this.inputWrapper.container.setAttribute(v,this.htmlAttributes[v])}else this.readonly=!0,this.dataBind();("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}setEnableRtl(){$e.II.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){$e.II.setEnabled(this.enabled,this.inputElement),this.enabled?((0,i.IV)([this.inputWrapper.container],B.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),(0,i.cn)([this.inputWrapper.container],B.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-list"}preventTabIndex(v){"dropdownlist"===this.getModuleName()&&(v.tabIndex=-1)}targetElement(){return this.inputWrapper.container}getNgDirective(){return"EJS-DROPDOWNLIST"}getElementByText(v){return this.getElementByValue(this.getValueByText(v))}getElementByValue(v){let M;const $=this.getItems();for(const fe of $)if(this.getFormattedValue(fe.getAttribute("data-value"))===v){M=fe;break}return M}initValue(){this.renderList(),this.dataSource instanceof u.hm?this.initRemoteRender=!0:this.updateValues()}updateValues(){if((0,i.le)(this.value))if(this.text&&(0,i.le)(this.value)){const v=this.getElementByText(this.text);if((0,i.le)(v))return void this.setProperties({text:null});this.setSelection(v,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),$e.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onBlurHandler(v){if(!this.enabled)return;const M=v.relatedTarget,$=v.target,fe=this.isPreventBlur;this.isPreventBlur=!1,!fe||this.isDocumentClick||!this.isPopupOpen||(0,i.le)($)&&(this.isFilterLayout()||!(0,i.le)(M))?this.isDocumentClick||!(0,i.le)(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(B.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&M!==this.inputElement&&(document.activeElement!==M||document.activeElement===M&&$.classList.contains(B.inputFocus))||(0,i.le)(M)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&$!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(M)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(v),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}focusOutAction(v){this.isInteracted=!1,this.focusOut(v),this.onFocusOut()}onFocusOut(){!this.enabled||(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&(0,i.cn)([this.inputWrapper.clearButton],B.clearIconHide),this.trigger("blur"))}onFocus(v){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!v,event:v})),this.updateIconState()}resetValueHandler(v){const M=(0,i.oq)(this.inputElement,"form");if(M&&v.target===M){const $=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=$}}wireEvent(){i.bi.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),i.bi.add(this.inputWrapper.container,"focus",this.focusIn,this),i.bi.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}bindCommonEvent(){i.bi.add(this.targetElement(),"blur",this.onBlurHandler,this);const v=(0,i.oq)(this.inputElement,"form");v&&i.bi.add(v,"reset",this.resetValueHandler,this),this.keyboardModule=new i.nv(this.targetElement(),i.AR.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}bindClearEvent(){this.showClearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}unBindCommonEvent(){this.targetElement()&&i.bi.remove(this.targetElement(),"blur",this.onBlurHandler);const v=this.inputElement&&(0,i.oq)(this.inputElement,"form");v&&i.bi.remove(v,"reset",this.resetValueHandler),i.AR.isDevice||this.keyboardModule.destroy(),this.showClearButton&&i.bi.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}updateIconState(){this.showClearButton&&(""===this.inputElement.value||this.readonly?(0,i.cn)([this.inputWrapper.clearButton],B.clearIconHide):(0,i.IV)([this.inputWrapper.clearButton],B.clearIconHide))}wireListEvents(){i.bi.add(this.list,"click",this.onMouseClick,this),i.bi.add(this.list,"mouseover",this.onMouseOver,this),i.bi.add(this.list,"mouseout",this.onMouseLeave,this)}onSearch(v){32!==v.charCode&&13!==v.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=v,this.onServerIncrementalSearch(v))}onServerIncrementalSearch(v){!this.isRequested&&!(0,i.le)(this.list)&&!(0,i.le)(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(v)}onMouseClick(v){const $=(0,i.oq)(v.target,"."+z_li);!this.isValidLI($)||(this.setSelection($,v),i.AR.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}onMouseOver(v){const M=(0,i.oq)(v.target,"."+z_li);this.setHover(M)}setHover(v){this.enabled&&this.isValidLI(v)&&!v.classList.contains("e-hover")&&(this.removeHover(),(0,i.cn)([v],"e-hover"))}onMouseLeave(){this.removeHover()}removeHover(){if(this.list){const v=this.list.querySelectorAll(".e-hover");v&&v.length&&(0,i.IV)(v,"e-hover")}}isValidLI(v){return v&&v.hasAttribute("role")&&"option"===v.getAttribute("role")}incrementalSearch(v){if(this.liCollections.length>0){const M=function at(xi,v,M,$,fe){let Ce;if(ut+=String.fromCharCode(xi),setTimeout(()=>{ut=""},1e3),ut=$?ut.toLowerCase():ut,E===fe&&Si===ut){for(let pt=0;pt<We.length;pt++)if(We[pt].classList.contains("e-active")){Ce=pt;break}return Ce+=1,We[Ce]?We[Ce]:We[0]}{const pt=v,Mt=ut.length;let wi,Gi,Vi=M=M?M+1:0;We=[];do{Vi===pt.length&&(Vi=-1),Ce=-1===Vi?0:Vi,Gi=pt[Ce],wi=$?Gi.innerText.toLowerCase():Gi.innerText,wi.substr(0,Mt)===ut&&We.push(pt[Ce]),Vi++}while(Vi!==M);return Si=ut,E=fe,We[0]}}(v.charCode,this.liCollections,this.activeIndex,!0,this.element.id);(0,i.le)(M)||(this.setSelection(M,v),this.setScrollPosition())}}hideSpinner(){(0,i.le)(this.spinnerElement)||((0,Zt.v3)(this.spinnerElement),(0,i.IV)([this.spinnerElement],B.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}showSpinner(){(0,i.le)(this.spinnerElement)&&(this.spinnerElement=i.AR.isDevice&&!(0,i.le)(this.filterInputObj)&&this.filterInputObj.buttons[1]||!(0,i.le)(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],(0,i.cn)([this.spinnerElement],B.disableIcon),(0,Zt.rj)({target:this.spinnerElement,width:i.AR.isDevice?"16px":"14px"},this.createElement),(0,Zt.yh)(this.spinnerElement))}keyActionHandler(v){if(!this.enabled)return;const M="pageUp"===v.action||"pageDown"===v.action,$="dropdownlist"!==this.getModuleName()&&("home"===v.action||"end"===v.action);this.isEscapeKey="escape"===v.action,this.isTabKey=!this.isPopupOpen&&"tab"===v.action;const Ce="down"===v.action||"up"===v.action||"pageUp"===v.action||"pageDown"===v.action||"home"===v.action||"end"===v.action;if((!(this.isEditTextBox()||M||$)||this.isPopupOpen)&&!this.readonly){const pt="tab"===v.action||"close"===v.action;if(void 0===this.list&&!this.isRequested&&!pt&&"escape"!==v.action&&(this.searchKeyEvent=v,this.renderList()),(0,i.le)(this.list)||!(0,i.le)(this.liCollections)&&Ce&&0===this.liCollections.length||this.isRequested)return;switch((pt&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===v.action)&&v.preventDefault(),this.isSelected="escape"!==v.action&&this.isSelected,this.isTyped=!Ce&&"escape"!==v.action&&this.isTyped,v.action){case"down":case"up":this.updateUpDownAction(v);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),v),v.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),v),v.preventDefault();break;case"home":case"end":this.updateHomeEndAction(v);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(v),this.focusDropDown(v);break;case"enter":this.selectCurrentItem(v);break;case"tab":this.selectCurrentValueOnTab(v);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(v),this.focusDropDown(v))}}}updateUpDownAction(v){const M=this.list.querySelector("."+B.focus);if(this.isSelectFocusItem(M))this.setSelection(M,v);else if(!(0,i.le)(this.liCollections)){let $="down"===v.action?this.activeIndex+1:this.activeIndex-1,fe=0;"autocomplete"===this.getModuleName()&&(fe="down"===v.action&&(0,i.le)(this.activeIndex)?0:this.liCollections.length-1,$=$<0?this.liCollections.length-1:$===this.liCollections.length?0:$);const Ce=(0,i.le)(this.activeIndex)?this.liCollections[fe]:this.liCollections[$];(0,i.le)(Ce)||this.setSelection(Ce,v)}v.preventDefault()}updateHomeEndAction(v){if("dropdownlist"===this.getModuleName()){let M=0;if(M="home"===v.action?0:this.getItems().length-1,v.preventDefault(),this.activeIndex===M)return;this.setSelection(this.liCollections[M],v)}}selectCurrentValueOnTab(v){"autocomplete"===this.getModuleName()?this.selectCurrentItem(v):this.isPopupOpen&&(this.hidePopup(v),this.focusDropDown(v))}mobileKeyActionHandler(v){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=v,this.renderList()),(0,i.le)(this.list)||!(0,i.le)(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===v.action&&this.selectCurrentItem(v)}}selectCurrentItem(v){if(this.isPopupOpen){const M=this.list.querySelector("."+B.focus);M&&(this.setSelection(M,v),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(v)),this.hidePopup(),this.focusDropDown(v)}else this.showPopup()}isSelectFocusItem(v){return!(0,i.le)(v)}getPageCount(){const v=this.list.classList.contains(z_noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(v,10))}pageUpSelection(v,M){this.setSelection(v>=0?this.liCollections[v+1]:this.liCollections[0],M)}pageDownSelection(v,M){const $=this.getItems();this.setSelection(v<=$.length?this.liCollections[v-1]:this.liCollections[$.length-1],M)}unWireEvent(){i.bi.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),i.bi.remove(this.inputWrapper.container,"keypress",this.onSearch),i.bi.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}unWireListEvents(){i.bi.remove(this.list,"click",this.onMouseClick),i.bi.remove(this.list,"mouseover",this.onMouseOver),i.bi.remove(this.list,"mouseout",this.onMouseLeave)}checkSelector(v){return'[id="'+v.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'}onDocumentClick(v){const M=v.target;if(!(0,i.le)(this.popupObj)&&(0,i.oq)(M,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(v.target))M!==this.inputElement&&(!this.allowFiltering||M!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!i.AR.isDevice||M!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(i.AR.isIE||"edge"===i.AR.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),v.preventDefault());else if(this.inputWrapper.container.classList.contains(B.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;const $=this.isRequested;this.isInteracted=!1,this.hidePopup(v),$||(this.onFocusOut(),this.inputWrapper.container.classList.remove(B.inputFocus))}}activeStateChange(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(B.inputFocus))}focusDropDown(v){!this.initial&&this.isFilterLayout()&&this.focusIn(v)}dropDownClick(v){if(3===v.which||2===v.button||this.targetElement().classList.contains(B.disable)||this.inputWrapper.clearButton===v.target)return;const M=v.target;if(M!==this.inputElement&&!(this.allowFiltering&&M===this.filterInput)&&"combobox"!==this.getModuleName()&&v.preventDefault(),this.readonly)this.focusIn(v);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(v)):(this.focusIn(v),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());const $=this,fe=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(()=>{$.cloneElements(),$.isSecondClick=!0},fe)}}cloneElements(){if(this.list){let v=this.list.querySelector("ul");v&&(v=v.cloneNode?v.cloneNode(!0):v,this.actionCompleteData.ulElement=v)}}updateSelectedItem(v,M,$,fe){this.removeSelection(),v.classList.add("e-active"),this.removeHover();const Ce=this.getFormattedValue(v.getAttribute("data-value")),pt=this.getDataByValue(Ce);if(this.initial||$||(0,i.le)(M))this.selectEventCallback(v,M,$,pt,Ce),fe&&this.setSelectOptions(v,M);else{const Mt=this.detachChanges(pt);this.isSelected=!0,this.trigger("select",{e:M,item:v,itemData:Mt,isInteracted:!!M,cancel:!1},Gi=>{Gi.cancel?v.classList.remove("e-active"):(this.selectEventCallback(v,M,$,pt,Ce),fe&&this.setSelectOptions(v,M))})}}selectEventCallback(v,M,$,fe,Ce){this.previousItemData=(0,i.le)(this.itemData)?null:this.itemData,this.item=v,this.itemData=fe;const pt=this.list.querySelector("."+z_focus);pt&&(0,i.IV)([pt],z_focus),v.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(Ce)}activeItem(v){this.isValidLI(v)&&!v.classList.contains("e-active")&&(this.removeSelection(),v.classList.add("e-active"),this.removeHover(),v.setAttribute("aria-selected","true"))}setValue(v){const M=this.getItemData();$e.II.setValue(null===M.value?null:M.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!(0,i.le)(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&((0,i.og)(this.valueTempElement),this.inputElement.style.display="block");let $=B.clearIcon,Ce=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+$);return this.isFiltering()&&Ce&&Ce.style.removeProperty("visibility"),this.previousValue===M.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}setSelection(v,M){this.isValidLI(v)&&(!v.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&v.classList.contains("e-active"))?this.updateSelectedItem(v,M,!1,!0):this.setSelectOptions(v,M)}setSelectOptions(v,M){this.list&&this.removeHover(),this.previousSelectedLI=(0,i.le)(this.selectedLI)?null:this.selectedLI,this.selectedLI=v,!this.setValue(M)&&(this.isPopupOpen&&((0,i.Y4)(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&(0,i.Y4)(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!(0,i.le)(v)||this.isPopupOpen&&!(0,i.le)(M)&&("keydown"!==M.type||"keydown"===M.type&&"enter"===M.action))&&(this.isSelectCustom=!1,this.onChangeEvent(M)),this.isPopupOpen&&!(0,i.le)(this.selectedLI)&&null!==this.itemData&&(!M||"click"!==M.type)&&this.setScrollPosition(M),"mozilla"!==i.AR.info.name&&((0,i.Y4)(this.inputElement,{"aria-label":this.inputElement.value}),(0,i.Y4)(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}dropdownCompiler(v){let M=!1;if(v)try{M=!!document.querySelectorAll(v).length}catch{M=!1}return M}setValueTemplate(){let v;this.isReact&&this.clearTemplate(["valueTemplate"]),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:B.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="",v=this.dropdownCompiler(this.valueTemplate)?(0,i.MY)(document.querySelector(this.valueTemplate).innerHTML.trim()):(0,i.MY)(this.valueTemplate);const $=v(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if($&&$.length>0)for(let fe=0;fe<$.length;fe++)this.valueTempElement.appendChild($[fe]);this.renderReactTemplates()}removeSelection(){if(this.list){const v=this.list.querySelectorAll(".e-active");v.length&&((0,i.IV)(v,"e-active"),v[0].removeAttribute("aria-selected"))}}getItemData(){const v=this.fields;let $,fe,M=null;return M=this.itemData,(0,i.le)(M)||($=(0,i.NA)(v.value,M),fe=(0,i.NA)(v.text,M)),{value:(0,i.le)(M)||(0,i.o8)($)?M:$,text:(0,i.le)(M)||(0,i.o8)($)?M:fe}}onChangeEvent(v){const M=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:M.text,value:M.value},!0),this.detachChangeEvent(v)}detachChanges(v){let M;return M="string"==typeof v||"boolean"==typeof v||"number"==typeof v?Object.defineProperties({},{value:{value:v,enumerable:!0},text:{value:v,enumerable:!0}}):v,M}detachChangeEvent(v){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=(0,i.le)(this.text)?"":this.text,!this.initial){const M=this.detachChanges(this.itemData);let $;$="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();const fe={e:v,item:this.item,itemData:M,previousItem:this.previousSelectedLI,previousItemData:$,isInteracted:!!v,value:this.value,element:this.element,event:v};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",fe)}((0,i.le)(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&(0,i.IV)([this.inputWrapper.container],"e-valid-input")}setHiddenValue(){if((0,i.le)(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){const v=this.hiddenElement.querySelector("option");v.textContent=this.text,v.setAttribute("value",this.value.toString())}else this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString())}onFilterUp(v){if(v.ctrlKey&&86===v.keyCode||!this.isValidKey&&40!==v.keyCode&&38!==v.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,v.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(v)),this.preventAltUp=!1,v.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(v)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(v),"autocomplete"===this.getModuleName()&&this.hidePopup())),v.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(v)}}onFilterDown(v){switch(v.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,v.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&v.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}removeFillSelection(){if(this.isInteracted){const v=this.getSelectionPoints();this.inputElement.setSelectionRange(v.end,v.end)}}getQuery(v){let M;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){M=v?v.clone():this.query?this.query.clone():new u.AE;const $=""===this.typedString?"contains":this.filterType,fe=this.typeOfData(this.dataSource).typeof;M.where((this.dataSource instanceof u.hm||"string"!==fe)&&"number"!==fe&&this.fields.text?this.fields.text:"",$,this.typedString,this.ignoreCase,this.ignoreAccent)}else M=v?v.clone():this.query?this.query.clone():new u.AE;return M}getSelectionPoints(){const v=this.inputElement;return{start:Math.abs(v.selectionStart),end:Math.abs(v.selectionEnd)}}searchLists(v){if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+B.clearIcon)&&(this.filterInput.parentElement.querySelector("."+B.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){const M={preventDefaultAction:!1,text:this.filterInput.value,updateData:($,fe,Ce)=>{M.cancel||(this.isCustomFilter=!0,this.filteringAction($,fe,Ce))},baseEventArgs:v,cancel:!1};this.trigger("filtering",M,$=>{!$.cancel&&!this.isCustomFilter&&!$.preventDefaultAction&&this.filteringAction(this.dataSource,null,this.fields)})}}filter(v,M,$){this.isCustomFilter=!0,this.filteringAction(v,M,$)}filteringAction(v,M,$){(0,i.le)(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,M=""===this.filterInput.value.trim()?null:M,this.resetList(v,$,M)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!(0,i.le)(this.actionCompleteData.ulElement)&&!(0,i.le)(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!(0,i.le)(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())}setSearchBox(v){if(this.isFiltering()){const M=v.querySelector("."+B.filterParent)?v.querySelector("."+B.filterParent):this.createElement("span",{className:B.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:B.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);let $=!1;return i.AR.isDevice&&($=!0),this.filterInputObj=$e.II.createInput({element:this.filterInput,buttons:$?[B.backIcon,B.filterBarClearIcon]:[B.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),(0,i.le)(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?(0,i.cn)([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&(0,i.cn)([this.filterInputObj.container],"e-filled")),(0,i.R3)([this.filterInputObj.container],M),(0,i.Ce)([M],v),(0,i.Y4)(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+B.clearIcon),!i.AR.isDevice&&this.clearIconElement&&(i.bi.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new i.nv(this.filterInput,i.AR.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),i.bi.add(this.filterInput,"input",this.onInput,this),i.bi.add(this.filterInput,"keyup",this.onFilterUp,this),i.bi.add(this.filterInput,"keydown",this.onFilterDown,this),i.bi.add(this.filterInput,"blur",this.onBlurHandler,this),i.bi.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return de}onInput(v){this.isValidKey=!0,i.AR.isDevice&&"mozilla"===i.AR.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(v))}pasteHandler(v){setTimeout(()=>{this.typedString=this.filterInput.value,this.searchLists(v)})}onActionFailure(v){super.onActionFailure(v),this.beforePopupOpen&&this.renderPopup()}onActionComplete(v,M,$,fe){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){const Ce=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(super.onActionComplete(v,M,$),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!(0,i.le)(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!(0,i.le)(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,(0,i.le)(v)||(0,i.Y4)(v,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof u.hm)){const pt=(0,i.le)(this.fields.value)?this.fields.text:this.fields.value;M.some(wi=>wi[pt]===this.value)||this.dataSource.executeQuery(this.getQuery(this.query).where(new u.$G(pt,"equal",this.value))).then(wi=>{wi.result.length>0&&(this.addItem(wi.result,M.length),this.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||(0,i.le)(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof u.hm||!(0,i.le)(this.dataSource)&&!(0,i.le)(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.updateActionCompleteDataValues(v,M)},0):this.updateActionCompleteDataValues(v,M)),this.addNewItem(M,Ce),(0,i.le)(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}updateActionCompleteDataValues(v,M){this.actionCompleteData={ulElement:v.cloneNode(!0),list:M,isUpdated:!0},(0,i.le)(this.actionData.ulElement)&&(0,i.le)(this.actionData.list)&&(this.actionData=this.actionCompleteData)}addNewItem(v,M){if(!(0,i.le)(this.itemData)&&!(0,i.le)(M)){const $=this.getItemData().value;v.some(Ce=>("string"==typeof Ce||"number"==typeof Ce)&&Ce===$||(0,i.NA)(this.fields.value,Ce)===$)||this.addItem(this.itemData)}}updateActionCompleteData(v,M,$){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.actionCompleteDataUpdate(v,M,$)},0):this.actionCompleteDataUpdate(v,M,$))}actionCompleteDataUpdate(v,M,$){null!=$?this.actionCompleteData.ulElement.insertBefore(v.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[$]):this.actionCompleteData.ulElement.appendChild(v.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(M)<0&&this.actionCompleteData.list.push(M)}focusIndexItem(){const v=this.getItemData().value;this.activeIndex=this.getIndexByValue(v);const M=this.findListElement(this.list,"li","data-value",v);this.selectedLI=M,this.activeItem(M),this.removeFocus()}updateSelection(){const v=this.list.querySelector(".e-active");v?(this.setProperties({index:this.getIndexByValue(v.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+z_li).classList.add(B.focus))}removeFocus(){const v=this.list.querySelectorAll("."+B.focus);v&&v.length&&(0,i.IV)(v,B.focus)}renderPopup(){this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},M=>{if(M.cancel)this.beforePopupOpen=!1;else{const $=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup "+(null!=this.cssClass?this.cssClass:"")}),fe=this.setSearchBox($);if(this.listHeight=(0,i.Ac)(this.popupHeight),this.headerTemplate&&this.setHeaderTemplate($),(0,i.R3)([this.list],$),this.footerTemplate&&this.setFooterTemplate($),document.body.appendChild($),$.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,(0,i.le)(fe.container)||(this.searchBoxHeight=fe.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){this.header=this.header?this.header:$.querySelector(".e-ddl-header");const ts=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(ts+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){this.footer=this.footer?this.footer:$.querySelector(".e-ddl-footer");const ts=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(ts+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",$.style.maxHeight=(0,i.Ac)(this.popupHeight)}else $.style.height="auto";let pt,Ce=0;if(!(0,i.le)(this.selectedLI)&&!(0,i.le)(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,i.AR.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){Ce=this.getOffsetValue($);const ts=this.isEmptyList()?this.list:this.liCollections[0];pt=-(parseInt(getComputedStyle(ts).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup($,Ce,pt),this.checkCollision($),i.AR.isDevice&&(this.popupObj.element.classList.add(B.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(B.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),(0,i.Y4)(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),(0,i.cn)([document.body,this.popupObj.element],B.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=fe.container.querySelector(".e-back-icon"),this.clearIconElement=fe.container.querySelector("."+B.clearIcon),i.bi.add(this.backIconElement,"click",this.clickOnBackIcon,this),i.bi.add(this.clearIconElement,"click",this.clearText,this))),$.style.visibility="visible",(0,i.cn)([$],"e-popup-close");const Mt=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const ts of Mt)i.bi.add(ts,"scroll",this.scrollHandler,this);i.AR.isDevice&&this.isFilterLayout()&&i.bi.add(this.list,"scroll",this.listScroll,this),(0,i.le)(this.list)||(this.unWireListEvents(),this.wireListEvents()),(0,i.Y4)(this.targetElement(),{"aria-expanded":"true"});const wi=this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container;(0,i.cn)([wi],[B.inputFocus]);const Gi={name:"FadeIn",duration:100};this.beforePopupOpen=!0,this.trigger("open",{popup:this.popupObj,cancel:!1,animation:Gi},ts=>{ts.cancel?(this.beforePopupOpen=!1,this.destroyPopup()):((0,i.cn)([this.inputWrapper.container],[B.iconAnimation]),this.renderReactTemplates(),this.popupObj.show(new i.fw(ts.animation),1e3===this.zIndex?this.element:null))})}})}checkCollision(v){(!i.AR.isDevice||i.AR.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&((0,Zt.vF)(v).length>0&&(v.style.marginTop=-parseInt(getComputedStyle(v).marginTop,10)+"px"),this.popupObj.resolveCollision())}getOffsetValue(v){const M=getComputedStyle(v),$=parseInt(M.borderTopWidth,10),fe=parseInt(M.borderBottomWidth,10);return this.setPopupPosition($+fe)}createPopup(v,M,$){this.popupObj=new Zt.GI(v,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:M,enableRtl:this.enableRtl,offsetX:$,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:()=>{this.isDocumentClick||this.focusDropDown(),this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate"]),this.getModuleName(),this.isNotSearchList=!1,this.isDocumentClick=!1,this.destroyPopup(),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list[0]&&(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0))},open:()=>{i.bi.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0;const fe=this.actionCompleteData&&this.actionCompleteData.ulElement&&this.actionCompleteData.ulElement.querySelector("li"),Ce=this.list.querySelector("ul li");this.isFiltering()&&this.itemTemplate&&this.element.tagName===this.getNgDirective()&&fe&&Ce&&fe.textContent!==Ce.textContent&&"EJS-COMBOBOX"!==this.element.tagName&&this.cloneElements(),this.isFilterLayout()&&((0,i.IV)([this.inputWrapper.container],[B.inputFocus]),this.isFilterFocus=!0,this.filterInput.focus(),this.inputWrapper.clearButton&&(0,i.cn)([this.inputWrapper.clearButton],B.clearIconHide)),this.activeStateChange()},targetExitViewport:()=>{i.AR.isDevice||this.hidePopup()}})}isEmptyList(){return!(0,i.le)(this.liCollections)&&0===this.liCollections.length}getFocusElement(){}isFilterLayout(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}scrollHandler(){i.AR.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}setSearchBoxPosition(){const v=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-v+"px",this.list.style.height=window.innerHeight-v+"px";const M=this.filterInput.parentElement.querySelector("."+B.clearIcon);(0,i.og)(this.filterInput),M.parentElement.insertBefore(this.filterInput,M)}setPopupPosition(v){let M;const $=v,fe=this.list.querySelector("."+B.focus)||this.selectedLI,Ce=this.isEmptyList()?this.list:this.liCollections[0],pt=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],Mt=Ce.getBoundingClientRect().height,wi=this.list.offsetHeight/2,Gi=(0,i.le)(fe)?Ce.offsetTop:fe.offsetTop;if(pt.offsetTop-wi<Gi&&!(0,i.le)(this.liCollections)&&this.liCollections.length>0&&!(0,i.le)(fe)){const ts=this.list.offsetHeight/Mt,wn=parseInt(getComputedStyle(this.list).paddingBottom,10);M=(ts-(this.liCollections.length-this.activeIndex))*Mt-$+wn,this.list.scrollTop=fe.offsetTop}else Gi>wi?(M=wi-Mt/2,this.list.scrollTop=Gi-wi+Mt/2):M=Gi;return M=M+Mt+$-(Mt-this.inputWrapper.container.offsetHeight)/2,-M}setWidth(){let v=(0,i.Ac)(this.popupWidth);if(v.indexOf("%")>-1&&(v=(this.inputWrapper.container.offsetWidth*parseFloat(v)/100).toString()+"px"),i.AR.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){const M=this.isEmptyList()?this.list:this.liCollections[0];v=parseInt(v,10)+2*(parseInt(getComputedStyle(M).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return v}scrollBottom(v){if(!(0,i.le)(this.selectedLI)){const M=this.list.offsetHeight,$=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;let fe=this.list.scrollTop+$-M;fe=v?fe+2*parseInt(getComputedStyle(this.list).paddingTop,10):fe;let Ce=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;Ce=this.fields.groupBy&&!(0,i.le)(this.fixedHeaderElement)?Ce-this.fixedHeaderElement.offsetHeight:Ce,0===this.activeIndex?this.list.scrollTop=0:($>M||!(Ce>0&&this.list.offsetHeight>Ce))&&(this.list.scrollTop=fe)}}scrollTop(){if(!(0,i.le)(this.selectedLI)){let v=this.selectedLI.offsetTop-this.list.scrollTop;v=this.fields.groupBy&&!(0,i.le)(this.fixedHeaderElement)?v-this.fixedHeaderElement.offsetHeight:v;const M=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:v<0?this.list.scrollTop=this.list.scrollTop+v:M>0&&this.list.offsetHeight>M||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!(0,i.le)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}isEditTextBox(){return!1}isFiltering(){return this.allowFiltering}isPopupButton(){return!0}setScrollPosition(v){if((0,i.le)(v))this.scrollBottom(!0);else switch(v.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}clearText(){this.filterInput.value=this.typedString="",this.searchLists(null)}listScroll(){this.filterInput.blur()}setEleWidth(v){(0,i.le)(v)||("number"==typeof v?this.inputWrapper.container.style.width=(0,i.Ac)(v):"string"==typeof v&&(this.inputWrapper.container.style.width=v.match(/px|%|em/)?v:(0,i.Ac)(v)))}closePopup(v){if(this.isTyped=!1,!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen))return;i.bi.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;const M=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const pt of M)i.bi.remove(pt,"scroll",this.scrollHandler);i.AR.isDevice&&this.isFilterLayout()&&((0,i.IV)([document.body,this.popupObj.element],B.popupFullScreen),i.bi.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(i.AR.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&i.bi.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(i.bi.remove(this.backIconElement,"click",this.clickOnBackIcon),i.bi.remove(this.clearIconElement,"click",this.clearText)),i.bi.remove(this.filterInput,"input",this.onInput),i.bi.remove(this.filterInput,"keyup",this.onFilterUp),i.bi.remove(this.filterInput,"keydown",this.onFilterDown),i.bi.remove(this.filterInput,"blur",this.onBlurHandler),i.bi.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),(0,i.Y4)(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(B.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:v||0}},pt=>{if(!(0,i.le)(this.popupObj)&&!(0,i.le)(this.popupObj.element.querySelector(".e-fixed-head"))){const Mt=this.popupObj.element.querySelector(".e-fixed-head");Mt.parentNode.removeChild(Mt),this.fixedHeaderElement=null}pt.cancel||("autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new i.fw(pt.animation)):this.destroyPopup())})}destroyPopup(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),(0,i.og)(this.popupObj.element)}clickOnBackIcon(){this.hidePopup(),this.focusIn()}render(){"INPUT"===this.element.tagName?(this.inputElement=this.element,(0,i.le)(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),(0,i.le)(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));let v=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(v=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=$e.II.createInput({element:this.inputElement,buttons:this.isPopupButton()?[B.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:v,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:B.hiddenElement}}),(0,i.Ce)([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=(0,i.Ac)(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");const M=this.element.getAttribute("id")?this.element.getAttribute("id"):(0,i.QI)("ej2_dropdownlist");if(this.element.id=M,this.hiddenElement.id=M+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),(0,i.Y4)(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){const $=this.element;this.value=$.options[$.selectedIndex].value,this.text=(0,i.le)(this.value)?null:$.options[$.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=$=>{$.stopImmediatePropagation()},this.inputElement.onchange=$=>{$.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),(0,i.le)(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}setFooterTemplate(v){let M;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),(0,i.cn)([this.footer],B.footer)),M=this.dropdownCompiler(this.footerTemplate)?(0,i.MY)((0,i.Ys)(this.footerTemplate,document).innerHTML.trim()):(0,i.MY)(this.footerTemplate);const fe=M({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(fe&&fe.length>0)for(let Ce=0;Ce<fe.length;Ce++)this.footer.appendChild(fe[Ce]);(0,i.R3)([this.footer],v)}setHeaderTemplate(v){let M;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),(0,i.cn)([this.header],B.header)),M=this.dropdownCompiler(this.headerTemplate)?(0,i.MY)((0,i.Ys)(this.headerTemplate,document).innerHTML.trim()):(0,i.MY)(this.headerTemplate);const fe=M({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(fe&&fe.length)for(let pt=0;pt<fe.length;pt++)this.header.appendChild(fe[pt]);const Ce=v.querySelector("div.e-content");v.insertBefore(this.header,Ce)}setOldText(v){this.text=v}setOldValue(v){this.value=v}refreshPopup(){!(0,i.le)(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!i.AR.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&((0,i.IV)([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}checkData(v){v.dataSource&&!(0,i.le)(Object.keys(v.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&v.dataSource instanceof u.hm)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;const M=-1!==Object.keys(v).indexOf("value")&&(0,i.le)(v.value),$=-1!==Object.keys(v).indexOf("text")&&(0,i.le)(v.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(M||$)&&(this.itemData=null),this.allowFiltering&&v.dataSource&&!(0,i.le)(Object.keys(v.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&v.query&&!(0,i.le)(Object.keys(v.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)}updateDataSource(v){(""!==this.inputElement.value||!(0,i.le)(v)&&((0,i.le)(v.dataSource)||!(v.dataSource instanceof u.hm)&&0===v.dataSource.length))&&this.clearAll(null,v),this.fields.groupBy&&v.fields&&!this.isGroupChecking&&(i.bi.remove(this.list,"scroll",this.setFloatingHeader),i.bi.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!(0,i.le)(v)&&((0,i.le)(v.dataSource)||!(v.dataSource instanceof u.hm)&&0===v.dataSource.length))||v.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const v=this.getItemData();this.setProperties({text:v.text,value:v.value})}updateInputFields(){"dropdownlist"===this.getModuleName()&&$e.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onPropertyChanged(v,M){"dropdownlist"===this.getModuleName()&&(this.checkData(v),this.setUpdateInitial(["fields","query","dataSource"],v));for(const $ of Object.keys(v))switch($){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(v.width);break;case"placeholder":$e.II.setPlaceholder(v.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&$e.II.setPlaceholder(v.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&$e.II.setReadonly(v.readonly,this.inputElement),this.setReadOnly();break;case"cssClass":this.setCssClass(v.cssClass,M.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===v.text){this.clearAll();break}if(this.list||(this.dataSource instanceof u.hm&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const fe=this.getElementByText(v.text);if(!this.checkValidLi(fe))if(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100)this.setSelectionData(v.text,M.text,"text");else if(v.text&&this.dataSource instanceof u.hm){const Ce=this.getItems().length,pt=(0,i.le)(this.fields.text)?this.fields.value:this.fields.text;this.typedString="",this.dataSource.executeQuery(this.getQuery(this.query).where(new u.$G(pt,"equal",v.text))).then(Mt=>{Mt.result.length>0?(this.addItem(Mt.result,Ce),this.updateValues()):this.setOldText(M.text)})}else this.setOldText(M.text);this.updateInputFields()}break;case"value":if(null===v.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:v}),this.list||(this.dataSource instanceof u.hm&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const fe=this.getElementByValue(v.value);if(!this.checkValidLi(fe))if(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100)this.setSelectionData(v.value,M.value,"value");else if(v.value&&this.dataSource instanceof u.hm){const Ce=this.getItems().length,pt=(0,i.le)(this.fields.value)?this.fields.text:this.fields.value;this.typedString="",this.dataSource.executeQuery(this.getQuery(this.query).where(new u.$G(pt,"equal",v.value))).then(Mt=>{Mt.result.length>0?(this.addItem(Mt.result,Ce),this.updateValues()):this.setOldValue(M.value)})}else this.setOldValue(M.value);this.updateInputFields(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}break;case"index":if(null===v.index){this.clearAll();break}this.list||(this.dataSource instanceof u.hm&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[v.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(v.index,M.index,"index"):this.index=M.index),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":!(0,i.le)(this.itemData)&&null!=this.valueTemplate&&this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.actionData=this.actionCompleteData,this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":$e.II.removeFloating(this.inputWrapper),$e.II.addFloating(this.inputElement,v.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":$e.II.setClearButton(v.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:{const fe=this.getPropObject($,v,M);super.onPropertyChanged(fe.newProperty,fe.oldProperty)}}}checkValidLi(v){return!!this.isValidLI(v)&&(this.setSelection(v,null),!0)}setSelectionData(v,M,$){let fe;this.updateListValues=()=>{"text"===$?(fe=this.getElementByText(v),this.checkValidLi(fe)||this.setOldText(M)):"value"===$?(fe=this.getElementByValue(v),this.checkValidLi(fe)||this.setOldValue(M)):"index"===$&&(fe=this.liCollections[v],this.checkValidLi(fe)||(this.index=M))}}setReadOnly(){this.readonly?(0,i.cn)([this.inputWrapper.container],["e-readonly"]):(0,i.IV)([this.inputWrapper.container],["e-readonly"])}setCssClass(v,M){(0,i.le)(M)||(M=M.replace(/\s+/g," ").trim()),(0,i.le)(v)||(v=v.replace(/\s+/g," ").trim()),$e.II.setCssClass(v,[this.inputWrapper.container],M),this.popupObj&&$e.II.setCssClass(v,[this.popupObj.element],M)}getModuleName(){return"dropdownlist"}showPopup(){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof u.hm&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):((0,i.le)(this.list)||!(0,i.o8)(this.list)&&(this.list.classList.contains(z_noData)||this.list.querySelectorAll("."+z_li).length<=0))&&this.renderList(),this.invokeRenderPopup()}}invokeRenderPopup(){if(i.AR.isDevice&&this.isFilterLayout()){const v=this;window.onpopstate=()=>{v.hidePopup()},history.pushState({},"")}(!(0,i.le)(this.list.children[0])||this.list.classList.contains(z_noData))&&this.renderPopup(),(0,i.Y4)(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}renderHightSearch(){}hidePopup(v){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if($e.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,(0,i.le)(this.index))this.resetSelection();else{const fe=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||fe,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();const M=this.getItemData(),$=!(0,i.le)(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||$&&this.inputElement.value!==M.text)&&(this.isSelectCustom=!1,this.clearAll(v))}focusIn(v){if(!this.enabled||this.targetElement().classList.contains(B.disable))return;let M=!1;this.preventFocus&&i.AR.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,M=!0),M||this.targetElement().focus(),(0,i.cn)([this.inputWrapper.container],[B.inputFocus]),this.onFocus(v)}focusOut(v){!this.enabled||(this.isTyped=!0,this.hidePopup(v),this.targetElement()&&this.targetElement().blur(),(0,i.IV)([this.inputWrapper.container],[B.inputFocus]))}destroy(){if(this.isActive=!1,function ft(xi){E===xi&&(E="",Si="",ut="",We=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){const v=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"];for(let M=0;M<v.length;M++)this.inputElement.removeAttribute(v[M]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),$e.II.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),(0,i.og)(this.inputWrapper.container),super.destroy()}}getItems(){return this.list||(this.dataSource instanceof u.hm&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?super.getItems():[]}getDataByValue(v){return super.getDataByValue(v)}clear(){this.value=null}};Xe([(0,i.Z9)(null)],Be.prototype,"cssClass",void 0),Xe([(0,i.Z9)("100%")],Be.prototype,"width",void 0),Xe([(0,i.Z9)("300px")],Be.prototype,"popupHeight",void 0),Xe([(0,i.Z9)("100%")],Be.prototype,"popupWidth",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"placeholder",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"filterBarPlaceholder",void 0),Xe([(0,i.Z9)({})],Be.prototype,"htmlAttributes",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"query",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"valueTemplate",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"headerTemplate",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"footerTemplate",void 0),Xe([(0,i.Z9)(!1)],Be.prototype,"allowFiltering",void 0),Xe([(0,i.Z9)(!1)],Be.prototype,"readonly",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"text",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"value",void 0),Xe([(0,i.Z9)(null)],Be.prototype,"index",void 0),Xe([(0,i.Z9)("Never")],Be.prototype,"floatLabelType",void 0),Xe([(0,i.Z9)(!1)],Be.prototype,"showClearButton",void 0),Xe([(0,i.ju)()],Be.prototype,"filtering",void 0),Xe([(0,i.ju)()],Be.prototype,"change",void 0),Xe([(0,i.ju)()],Be.prototype,"beforeOpen",void 0),Xe([(0,i.ju)()],Be.prototype,"open",void 0),Xe([(0,i.ju)()],Be.prototype,"close",void 0),Xe([(0,i.ju)()],Be.prototype,"blur",void 0),Xe([(0,i.ju)()],Be.prototype,"focus",void 0),Be=Xe([i.Zl],Be);var Fe=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};const ji="e-ddt-hidden",is="e-input-group-icon e-ddt-icon e-icons",zi="e-show-chip",ui="e-show-clear",Ut="e-show-dd-icon",oi="e-chip-input",us="e-input-focus",Us="e-input-group",$i="e-icon-anim",Kt="e-chips",ni="e-chipcontent",Tt="e-chips-close",qt="e-icon-hide",Ci="e-ddt-icon-hide",Jt="e-list-parent",At="e-dropdown",li="e-disabled",Gt="e-selectall-parent",Dt="e-hide-selectall",ot="e-all-text",hi="e-frame",Ei="e-check",Ui="e-checkbox-wrapper",As="e-filter-wrap",bs="e-ddt-icon",kt="e-ddt-footer",wt="e-ddt-header",Ai="e-no-data",Ds="e-remain",on="e-overflow",Bn="e-show-text",Kn="e-total-count",Dn="e-wrap-count";class In extends i.rt{}Fe([(0,i.Z9)("child")],In.prototype,"child",void 0),Fe([(0,i.Z9)([])],In.prototype,"dataSource",void 0),Fe([(0,i.Z9)("expanded")],In.prototype,"expanded",void 0),Fe([(0,i.Z9)("hasChildren")],In.prototype,"hasChildren",void 0),Fe([(0,i.Z9)("htmlAttributes")],In.prototype,"htmlAttributes",void 0),Fe([(0,i.Z9)("iconCss")],In.prototype,"iconCss",void 0),Fe([(0,i.Z9)("imageUrl")],In.prototype,"imageUrl",void 0),Fe([(0,i.Z9)("parentValue")],In.prototype,"parentValue",void 0),Fe([(0,i.Z9)(null)],In.prototype,"query",void 0),Fe([(0,i.Z9)("selected")],In.prototype,"selected",void 0),Fe([(0,i.Z9)(null)],In.prototype,"tableName",void 0),Fe([(0,i.Z9)("text")],In.prototype,"text",void 0),Fe([(0,i.Z9)("tooltip")],In.prototype,"tooltip",void 0),Fe([(0,i.Z9)("value")],In.prototype,"value",void 0);class js extends i.rt{}Fe([(0,i.Z9)(!1)],js.prototype,"autoCheck",void 0),Fe([(0,i.Z9)("Auto")],js.prototype,"expandOn",void 0),Fe([(0,i.Z9)(!1)],js.prototype,"loadOnDemand",void 0);let Yt=class extends i.wA{constructor(v,M){super(v,M),this.filterTimer=null,this.isFilteredData=!1,this.isFilterRestore=!1,this.selectedData=[],this.filterDelayTime=300,this.isClicked=!1}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-tree"}preRender(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`,this.customTemplateId=`${this.element.id}CustomTemplate`,this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}}render(){const v=(0,i.Ys)("#"+this.element.id+"_tree",document);if(v){const $=(0,i.Ys)("#"+this.element.id+"_popup",document);(0,i.og)($||v.parentElement)}this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,(0,i.le)(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),(0,i.le)(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=$e.II.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[is]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(Us)||this.inputWrapper.classList.add(Us),this.showDropDownIcon&&this.inputWrapper.classList.add(Ut),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content",attrs:{tabindex:"0"}}),this.popupDiv.classList.add(At),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),(0,i.cn)([this.popupDiv],Ci),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof u.hm,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),!this.wrapText&&"Custom"!==this.mode&&(this.overFlowWrapper=this.createElement("span",{className:on+" "+qt}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&(0,i.cn)([this.overFlowWrapper],Bn))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();const M=(0,i.Ys)("."+Jt,this.treeObj.element);M&&M.getAttribute("aria-multiselectable")&&M.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()}ensureAutoCheck(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)}hideCheckAll(v){const M=(0,i.le)(this.popupEle)?null:this.popupEle.querySelector("."+Gt);(0,i.le)(M)||(v&&!M.classList.contains(Dt)?(0,i.cn)([M],Dt):!v&&M.classList.contains(Dt)&&(0,i.IV)([M],Dt))}renderFilter(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:As});const v=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(v),(0,i.Ce)([this.filterContainer],this.popupEle),this.filterObj=new $e.zC({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")}filterChangeHandler(v){(0,i.le)(v.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(()=>{this.filterHandler(v.value,v.event)},this.filterDelayTime))}filterHandler(v,M){this.isFilteredData||(this.treeData=this.treeObj.getTreeData());const $=this.cloneFields(this.fields);this.trigger("filtering",{cancel:!1,preventDefaultAction:!1,event:M,text:v,fields:$},Ce=>{if(!Ce.cancel){let Mt,pt=!1;if(this.isFilteredData=!0,""===v?(this.isFilteredData=!1,this.isFilterRestore=!0,Mt=this.cloneFields(this.fields)):Ce.preventDefaultAction?Mt=Ce.fields:1===this.treeDataType?Mt=this.selfReferencefilter(v,Ce.fields):this.fields.dataSource instanceof u.hm?pt=!0:Mt=this.nestedFilter(v,Ce.fields),this.hideCheckAll(this.isFilteredData),pt)return;this.treeObj.fields=this.getTreeFields(Mt),this.treeObj.dataBind()}})}nestedFilter(v,M){const $=[];for(let fe=0;fe<this.treeData.length;fe++){const Ce=this.nestedChildFilter(v,this.treeData[fe]);(0,i.le)(Ce)||$.push(Ce)}return M.dataSource=$,M}nestedChildFilter(v,M){const $=M[this.fields.child];if((0,i.le)($))return this.isMatchedNode(v,M)?M:null;{const fe=[];for(let Ce=0;Ce<$.length;Ce++){const pt=this.nestedChildFilter(v,$[Ce]);(0,i.le)(pt)||fe.push(pt)}return 0!==fe.length?(M[this.fields.child]=fe,M):(M[this.fields.child]=null,this.isMatchedNode(v,M)?M:null)}}selfReferencefilter(v,M){const $=[],fe=[];for(let Ce=0;Ce<this.treeData.length;Ce++)this.isMatchedNode(v,this.treeData[Ce])&&$.push(this.treeData[Ce]);for(let Ce=0;Ce<$.length;Ce++)if(-1===fe.indexOf($[Ce])){fe.push($[Ce]);let pt=$[Ce][this.fields.parentValue];for(;!(0,i.le)(pt);){let Mt=null;for(let wi=0;wi<this.treeData.length;wi++){const Gi=this.treeData[wi][this.fields.value];if(!(0,i.le)(Gi)&&Gi===pt){Mt=this.treeData[wi];break}}if((0,i.le)(Mt)||-1!==fe.indexOf(Mt))break;fe.push(Mt),pt=Mt[this.fields.parentValue]}}return M.dataSource=fe,M}isMatchedNode(v,M){let $=M[this.fields.text];return this.ignoreCase&&($=$.toLowerCase(),v=v.toLowerCase()),this.ignoreAccent&&($=u.j4.ignoreDiacritics($),v=u.j4.ignoreDiacritics(v)),"StartsWith"===this.filterType?$.slice(0,v.length)===v:"EndsWith"===this.filterType?$.slice(-v.length)===v:-1!==$.indexOf(v)}wireEvents(){i.bi.add(this.inputWrapper,"mouseup",this.dropDownClick,this),i.bi.add(this.inputWrapper,"focus",this.focusIn,this),i.bi.add(this.inputWrapper,"blur",this.focusOut,this),i.bi.add(this.inputWrapper,"mousemove",this.mouseIn,this),i.bi.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),i.bi.add(this.overAllClear,"mousedown",this.clearAll,this),i.bi.add(window,"resize",this.windowResize,this);const v=(0,i.oq)(this.inputWrapper,"form");v&&i.bi.add(v,"reset",this.resetValueHandler,this),this.keyboardModule=new i.nv(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}wireTreeEvents(){this.keyboardModule=new i.nv(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}wireCheckAllWrapperEvents(){this.keyboardModule=new i.nv(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){i.bi.remove(this.inputWrapper,"mouseup",this.dropDownClick),i.bi.remove(this.inputWrapper,"focus",this.focusIn),i.bi.remove(this.inputWrapper,"blur",this.focusOut),i.bi.remove(this.inputWrapper,"mousemove",this.mouseIn),i.bi.remove(this.inputWrapper,"mouseout",this.onMouseLeave),i.bi.remove(this.overAllClear,"mousedown",this.clearAll),i.bi.remove(window,"resize",this.windowResize);const v=(0,i.oq)(this.inputWrapper,"form");v&&i.bi.remove(v,"reset",this.resetValueHandler)}dropDownClick(v){if(this.enabled&&!this.readonly){if(this.isClearButtonClick)return void(this.isClearButtonClick=!1);this.isPopupOpen?this.hidePopup():(this.focusIn(v),this.renderPopup()),this.showOverAllClear()}}mouseIn(){(this.enabled||!this.readonly)&&this.showOverAllClear()}onMouseLeave(){this.inputFocus||((0,i.cn)([this.overAllClear],qt),(0,i.IV)([this.inputWrapper],ui))}getDirective(){return"EJS-DROPDOWNTREE"}focusOut(v){if(!this.enabled||this.readonly||!this.inputFocus||(i.AR.isIE||"edge"===i.AR.info.name)&&v.target===this.inputWrapper)return;const M=v.relatedTarget;M!==this.inputEle&&(0,i.le)(M)&&(v.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(v)}onFocusOut(v){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=(0,i.Ys)(".e-clear-icon",this.inputWrapper).offsetWidth,(0,i.cn)([this.overAllClear],qt),(0,i.IV)([this.inputWrapper],ui)),(0,i.IV)([this.inputWrapper],[us]),this.allowMultiSelection||this.showCheckBox){const M=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&((0,i.cn)([this.chipWrapper],qt),(0,i.IV)([this.inputWrapper],zi),(0,i.IV)([this.inputEle],oi)),!this.wrapText&&M&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(v),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")}updateView(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?(0,i.cn)([this.inputWrapper,this.overFlowWrapper],Bn):(0,i.cn)([this.inputWrapper],zi),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&(0,i.cn)([this.chipWrapper],qt),(0,i.cn)([this.inputEle],oi),this.updateOverFlowView(),this.ensurePlaceHolder()))}triggerChangeEvent(v){this.ddtCompareValues(this.oldValue,this.value)&&!this.isChipDelete||this.removeValue||(this.trigger("change",{e:v,oldValue:this.oldValue,value:this.value,isInteracted:!!v,element:this.element}),this.oldValue=this.value)}ddtCompareValues(v,M){if(null===v||null===M)return(null===v||0===v.length)&&M===v;if(v.length!==M.length)return!1;for(let $=0;$<v.length;$++)if(v[$]!==M[$])return!1;return!0}focusIn(v){!this.enabled||this.readonly||this.inputFocus||(this.showOverAllClear(),this.inputFocus=!0,(0,i.cn)([this.inputWrapper],[us]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&((0,i.IV)([this.chipWrapper],qt),(0,i.cn)([this.inputEle],oi)),(0,i.cn)([this.inputWrapper],zi),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&"Custom"!==this.mode&&(this.inputWrapper.contains(this.overFlowWrapper)&&(0,i.cn)([this.overFlowWrapper],qt),"Delimiter"===this.mode?((0,i.IV)([this.inputWrapper],zi),(0,i.IV)([this.inputEle],oi)):(0,i.cn)([this.inputWrapper],zi),(0,i.IV)([this.inputWrapper],Bn),this.ensurePlaceHolder())),this.trigger("focus",{isInteracted:!!v,event:v}))}treeAction(v){this.trigger("keyPress",{cancel:!1,event:v},$=>{if($.cancel)v.stopImmediatePropagation();else switch(v.action){case"escape":case"altUp":this.inputWrapper.focus(),v.preventDefault(),this.isPopupOpen&&this.hidePopup();break;case"tab":case"shiftTab":this.isPopupOpen&&this.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.showCheckBox||(this.isValueChange=!0,this.keyEventArgs=v);break;case"space":this.isValueChange=!0,this.keyEventArgs=v;break;case"ctrlA":this.allowMultiSelection&&this.selectAll(!0)}})}keyActionHandler(v){this.trigger("keyPress",{cancel:!1,event:v},$=>{if(!$.cancel)switch(v.action){case"escape":case"altUp":this.isPopupOpen&&this.hidePopup();break;case"shiftTab":case"tab":this.isPopupOpen&&this.hidePopup(),this.inputFocus&&this.onFocusOut();break;case"altDown":this.isPopupOpen||(this.showPopup(),v.preventDefault());break;case"moveDown":this.showSelectAll&&this.showCheckBox&&this.checkAllParent.focus()}})}checkAllAction(v){this.trigger("keyPress",{cancel:!1,event:v},$=>{if(!$.cancel)switch(v.action){case"space":this.clickHandler(v);break;case"moveDown":this.treeObj.element.focus()}})}windowResize(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())}resetValueHandler(v){const M=(0,i.oq)(this.inputWrapper,"form");M&&v.target===M&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)}getAriaAttributes(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}}updateOverFlowView(){if(this.overFlowWrapper.classList.remove(Kn),(0,i.IV)([this.overFlowWrapper],qt),this.value&&this.value.length){let M,$,fe,pt,Mt,v="",Ce=1,wi=0;this.overFlowWrapper.innerHTML="";const Gi={overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};this.l10n=new i.E7(this.getLocaleName(),Gi,this.locale);const Vi=this.l10n.getConstant("overflowCountTemplate"),sn=this.l10n.getConstant("totalCountTemplate"),ts=this.createElement("span",{className:Ds});this.overFlowWrapper.appendChild(ts),ts.innerText=Vi.replace("${count}",this.value.length.toString());const wn=ts.offsetWidth;if((0,i.Od)(ts),this.showDropDownIcon&&(wi=(0,i.Ys)("."+bs,this.inputWrapper).offsetWidth),!(0,i.le)(this.value))if("Box"!==this.mode)for(let Sn=0;!(0,i.le)(this.value[Sn]);Sn++){if(v+=0===Sn?"":this.delimiterChar+" ",$=this.getOverflowVal(Sn),v+=$,$=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=v,pt=this.overFlowWrapper.offsetWidth,M=this.inputWrapper.offsetWidth,pt+wi+this.clearIconWidth>M){for(void 0!==fe&&""!==fe&&($=fe,Sn=Ce+1),this.overFlowWrapper.innerHTML=$,Mt=this.value.length-Sn,pt=this.overFlowWrapper.offsetWidth;pt+wn+wi+this.clearIconWidth>=M&&0!==pt&&""!==this.overFlowWrapper.innerHTML;){const Ws=this.overFlowWrapper.innerHTML.split(this.delimiterChar);Ws.pop(),this.overFlowWrapper.innerHTML=Ws.join(this.delimiterChar),Mt++,pt=this.overFlowWrapper.offsetWidth}break}pt+wn+wi+this.clearIconWidth<=M?(fe=v,Ce=Sn):0===Sn&&(fe="",Ce=-1)}else{(0,i.cn)([this.chipWrapper],qt);const Sn=this.chipWrapper.cloneNode(!0),Ws=(0,i.td)("."+Kt,Sn);for(let ht=0;ht<Ws.length;ht++){if($=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(Ws[ht]),v=this.overFlowWrapper.innerHTML,pt=this.overFlowWrapper.offsetWidth,M=this.inputWrapper.offsetWidth,pt+wi+this.clearIconWidth>M){for(void 0!==fe&&""!==fe&&($=fe,ht=Ce+1),this.overFlowWrapper.innerHTML=$,Mt=this.value.length-ht,pt=this.overFlowWrapper.offsetWidth;pt+wn+wi+this.clearIconWidth>=M&&0!==pt&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),Mt++,pt=this.overFlowWrapper.offsetWidth;break}pt+wn+wi+this.clearIconWidth<=M?(fe=v,Ce=ht):0===ht&&(fe="",Ce=-1)}}Mt>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(ts,Mt,Vi,sn)),"Box"===this.mode&&!this.overFlowWrapper.classList.contains(Kn)&&(0,i.cn)([ts],Dn)}else this.overFlowWrapper.innerHTML="",(0,i.cn)([this.overFlowWrapper],qt);this.updateDelimMode()}updateRemainTemplate(v,M,$,fe){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),v.innerHTML="",v.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?fe.replace("${count}",M.toString()):$.replace("${count}",M.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?((0,i.cn)([this.overFlowWrapper],Kn),(0,i.IV)([this.overFlowWrapper],Dn)):(0,i.IV)([this.overFlowWrapper],Kn),v}getOverflowVal(v){const M=this.getSelectedData(this.value[v]);return(0,i.NA)(this.treeSettings.loadOnDemand?this.fields.text:"text",M)}updateDelimMode(){"Box"!==this.mode?(0,i.Ys)("."+Ds,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(Kn)?((0,i.cn)([this.overFlowWrapper],Dn),(0,i.cn)([this.overFlowWrapper],Bn)):(this.overFlowWrapper.classList.remove(Dn),(0,i.IV)([this.overFlowWrapper],Dn)):(0,i.Ys)("."+Ds,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(Dn)}createHiddenElement(){this.hiddenElement=this.createElement("select",this.allowMultiSelection||this.showCheckBox?{attrs:{"aria-hidden":"true",class:ji,tabindex:"-1",multiple:""}}:{attrs:{"aria-hidden":"true",tabindex:"-1",class:ji}}),(0,i.Ce)([this.hiddenElement],this.inputWrapper),this.validationAttribute()}createClearIcon(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),(0,i.cn)([this.overAllClear],qt),(0,i.IV)([this.inputWrapper],ui),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])}validationAttribute(){const v=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",v),this.inputEle.removeAttribute("name");const M=["required","aria-required","form"];for(let $=0;$<M.length;$++){const fe=this.inputEle.getAttribute(M[$]);fe&&(this.hiddenElement.setAttribute(M[$],fe),this.inputEle.removeAttribute(M[$]))}}createChip(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),(0,i.cn)([this.inputWrapper],zi),this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?(0,i.cn)([this.inputEle],oi):(null===this.value||this.value&&0===this.value.length)&&(0,i.cn)([this.chipWrapper],qt))}getValidMode(){return!(!this.allowMultiSelection&&!this.showCheckBox||"Box"!==this.mode&&("Default"!==this.mode||!this.inputFocus))}createSelectAllWrapper(){this.checkAllParent=this.createElement("div",{className:Gt,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:ot}),this.selectAllSpan.textContent="";const v=(0,i.oq)(this.element,".e-bigger"),M=(0,i.le)(v)?"":"e-small";this.checkBoxElement=(0,Li.eE)(this.createElement,!0,{cssClass:M}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),i.bi.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()}clickHandler(v){let M;if(M=v.currentTarget&&v.currentTarget.classList.contains(Gt)?v.currentTarget.firstElementChild.lastElementChild:v.target,this.checkWrapper=(0,i.oq)(M,"."+Ui),!(0,i.le)(this.checkWrapper)){this.isClicked=!0;const $=(0,i.Ys)("."+hi,this.checkWrapper);this.changeState(this.checkWrapper,$.classList.contains(Ei)?"uncheck":"check",v),this.isClicked=!1}v.preventDefault()}changeState(v,M,$){let fe;const Ce=v.getElementsByClassName(hi)[0];"check"!==M||Ce.classList.contains(Ei)?"uncheck"===M&&Ce.classList.contains(Ei)&&(Ce.classList.remove(Ei),fe="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent($)),this.setLocale(!1)):(Ce.classList.add(Ei),fe="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent($)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),fe="check"===M?"true":"false",(0,i.le)(fe)||v.setAttribute("aria-checked",fe)}setLocale(v){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){const M=v?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";const $=(0,i.MY)(M),fe=v?"unSelectAllText":"selectAllText";for(const Ce of $({},this,fe,null,!this.isStringTemplate))this.selectAllSpan.textContent=Ce.textContent}else this.selectAllSpan.textContent=v?this.unSelectAllText:this.selectAllText}setAttributes(){this.inputEle.setAttribute("tabindex","-1");const v=this.element.getAttribute("id");this.hiddenElement.id=v+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),(0,i.Y4)(this.inputWrapper,this.getAriaAttributes())}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const v of Object.keys(this.htmlAttributes))if("class"===v)this.inputWrapper.classList.add(this.htmlAttributes[v]);else if("disabled"===v&&"disabled"===this.htmlAttributes[v])this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"!==v||(0,i.le)(this.htmlAttributes[v]))if("style"===v)this.inputWrapper.setAttribute("style",this.htmlAttributes[v]);else{const M=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],$=["name","required"];0===v.indexOf("data")||$.indexOf(v)>-1?this.hiddenElement.setAttribute(v,this.htmlAttributes[v]):M.indexOf(v)>-1?"placeholder"===v?$e.II.setPlaceholder(this.htmlAttributes[v],this.inputEle):this.inputEle.setAttribute(v,this.htmlAttributes[v]):this.inputWrapper.setAttribute(v,this.htmlAttributes[v])}else this.setProperties({readonly:!0},!0),this.dataBind()}updateDataAttribute(){const v=this.htmlAttributes,M=["class","style","id","type"],$={};for(let fe=0;fe<this.element.attributes.length;fe++)-1===M.indexOf(this.element.attributes[fe].name)&&"readonly"!==this.element.attributes[fe].name&&($[this.element.attributes[fe].name]=this.element.getAttribute(this.element.attributes[fe].name));(0,i.l7)($,v,$),this.setProperties({htmlAttributes:$},!0)}showOverAllClear(){!this.enabled||this.readonly||this.overAllClear&&(this.value&&this.value.length&&this.showClearButton?((0,i.IV)([this.overAllClear],qt),(0,i.cn)([this.inputWrapper],ui)):((0,i.cn)([this.overAllClear],qt),(0,i.IV)([this.inputWrapper],ui)))}setTreeValue(){if(null!==this.value&&0!==this.value.length){let v;if(this.showCheckBox||this.allowMultiSelection){for(let M=0;M<this.value.length;M++)v=this.treeObj.getTreeData(this.value[M])[0],(0,i.le)(v)&&this.value.splice(this.value.indexOf(this.value[M]),1);0!==this.value.length&&this.setValidValue()}else v=this.treeObj.getTreeData(this.value[0])[0],(0,i.le)(v)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:v[this.fields.text]},!0),this.setValidValue())}}setTreeText(){if((null===this.value||this.isInitialized)&&null!==this.text){let v;const M=[];if(this.showCheckBox||this.allowMultiSelection){const $=this.text.split(this.delimiterChar);for(let fe=0;fe<$.length;fe++)v=this.getItems($[fe]),(0,i.le)(v)||M.push(v[this.fields.value].toString());0!==M.length?(this.oldValue=this.value,this.setProperties({value:M},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else v=this.getItems(this.text),(0,i.le)(v)?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[v[this.fields.value].toString()]},!0),this.setValidValue())}}setSelectedValue(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),(0,i.sO)("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))}setValidValue(){if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.value.filter(M=>-1===this.treeObj.checkedNodes.indexOf(M)).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{$e.II.setValue(this.text,this.inputEle,this.floatLabelType);const v=this.value[0].toString();this.treeObj.selectedNodes[0]!==v&&(0,i.sO)("selectedNodes",[v],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()}getItems(v){let M;if(1===this.treeDataType)for(let $=0;$<this.treeItems.length;$++){const fe=(0,i.NA)(this.fields.text,this.treeItems[$]);if(!(0,i.le)(this.treeItems[$])&&!(0,i.le)(fe)&&fe===v){M=this.treeItems[$];break}}else M=this.getNestedItems(this.treeItems,this.fields,v);return M}getNestedItems(v,M,$){let fe;for(let Ce=0,pt=v.length;Ce<pt;Ce++){const Mt=(0,i.NA)(this.fields.text,v[Ce]);if(v[Ce]&&Mt&&Mt.toString()===$)return v[Ce];if("string"!=typeof M.child||(0,i.le)((0,i.NA)(M.child,v[Ce]))){if(this.fields.dataSource instanceof u.hm&&!(0,i.le)((0,i.NA)("child",v[Ce]))&&(fe=this.getNestedItems((0,i.NA)("child",v[Ce]),this.getChildType(M),$),void 0!==fe))break}else{const wi=(0,i.NA)(M.child,v[Ce]);if(fe=this.getNestedItems(wi,this.getChildType(M),$),void 0!==fe)break}}return fe}getChildType(v){return"string"==typeof v.child||(0,i.le)(v.child)?v:v.child}renderTree(){this.treeObj=new Lt.LQ({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.appendTo("#"+this.tree.id)}renderPopup(){this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));let v=!1;this.trigger("beforeOpen",{cancel:!1},$=>{if($.cancel?v=!0:((0,i.cn)([this.inputWrapper],[$i]),this.isFirstRender?(this.popupEle=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddt e-popup "+(null!=this.cssClass?this.cssClass:"")}),document.body.appendChild(this.popupEle),this.createPopup(this.popupEle)):this.popupEle=this.popupObj.element),this.isFirstRender&&!v&&((0,i.Ce)([this.popupDiv],this.popupEle),(0,i.IV)([this.popupDiv],Ci),this.allowFiltering&&this.renderFilter(),this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(Ai)&&(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)),this.headerTemplate&&this.setHeaderTemplate(),this.footerTemplate&&this.setFooterTemplate(),this.isFirstRender=!1,this.hasTemplate&&this.portals&&(this.portals=this.portals.concat(this.treeObj.portals),this.renderReactTemplates())),!v){if((0,i.Y4)(this.inputWrapper,{"aria-expanded":"true"}),this.popupObj.show(null,1e3===this.zIndex?this.inputEle:null),(0,i.IV)([this.popupEle],Ci),this.updatePopupHeight(),this.popupObj.refreshPosition(),!(this.showCheckBox&&this.showSelectAll)&&!this.popupDiv.classList.contains(Ai)&&this.treeItems.length>0&&this.treeObj.element.focus(),this.checkSelectAll&&this.checkBoxElement){const Ce=(0,i.oq)(this.checkBoxElement,"."+Ui);this.changeState(Ce,"check"),this.checkSelectAll=!1}this.allowFiltering&&((0,i.IV)([this.inputWrapper],[us]),this.filterObj.element.focus()),this.trigger("open",{popup:this.popupObj})}})}updatePopupHeight(){if(this.isFirstRender)return;let v=this.getHeight();if(this.popupEle.style.maxHeight=v,this.allowFiltering){const $=Math.round(this.filterContainer.getBoundingClientRect().height);v=(0,i.Ac)(parseInt(v,10)-$+"px")}if(this.headerTemplate){const $=Math.round(this.header.getBoundingClientRect().height);v=(0,i.Ac)(parseInt(v,10)-$+"px")}if(this.showCheckBox&&this.showSelectAll){const $=Math.round(this.checkAllParent.getBoundingClientRect().height);v=(0,i.Ac)(parseInt(v,10)-$+"px")}if(this.footerTemplate){const $=Math.round(this.footer.getBoundingClientRect().height);v=(0,i.Ac)(parseInt(v,10)-$+"px")}let M=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);M+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),v=(0,i.Ac)(parseInt(v,10)-M+"px"),this.popupDiv.style.maxHeight=v}createPopup(v){this.isFirstRender&&(this.popupObj=new Zt.GI(v,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:()=>{this.isPopupOpen=!1},open:()=>{i.bi.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0},targetExitViewport:()=>{i.AR.isDevice||this.hidePopup()}}))}setElementWidth(v){const M=this.inputWrapper;(0,i.le)(v)||("number"==typeof v?M.style.width=(0,i.Ac)(v):"string"==typeof v&&(M.style.width=v.match(/px|%|em/)?v:(0,i.Ac)(v)))}setWidth(){let v=(0,i.Ac)(this.popupWidth);return v.indexOf("%")>-1?v=(this.inputWrapper.offsetWidth*parseFloat(v)/100).toString()+"px":"string"==typeof this.popupWidth&&(v=this.popupWidth.match(/px|em/)?this.popupWidth:v),v}getHeight(){let v=(0,i.Ac)(this.popupHeight);return v.indexOf("%")>-1?v=(document.documentElement.clientHeight*parseFloat(v)/100).toString()+"px":"string"==typeof this.popupHeight&&(v=this.popupHeight.match(/px|em/)?this.popupHeight:v),v}onDocumentClick(v){const M=v.target,$=(0,i.oq)(M,"."+Jt),fe=(0,i.oq)(M,"."+As),Ce=(0,i.oq)(M,"."+wt),pt=(0,i.oq)(M,"."+kt),Mt=!!M.classList.contains(At)||(0,i.wB)(M,".e-ddt .e-popup")||(0,i.wB)(M,".e-ddt .e-treeview");this.isPopupOpen&&(this.inputWrapper.contains(M)||$||fe||Mt||Ce||pt)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&M.classList.contains(Tt)||this.isPopupOpen&&(M.classList.contains(Gt)||M.classList.contains(ot)||M.classList.contains(hi)))?(this.isDocumentClick=!1,v.preventDefault()):!this.inputWrapper.contains(M)&&this.inputFocus&&this.focusOut(v)}onActionFailure(v){this.trigger("actionFailure",v),this.l10nUpdate(!0),(0,i.cn)([this.popupDiv],Ai)}OnDataBound(v){this.treeItems=v.data,this.treeItems.length<=0?(this.l10nUpdate(),(0,i.cn)([this.popupDiv],Ai),this.hideCheckAll(!0)):this.popupDiv.classList.contains(Ai)&&this.treeItems.length>=1&&((0,i.IV)([this.popupDiv],Ai),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus()),this.trigger("dataBound",{data:v.data}),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)}restoreFilterSelection(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]}setCssClass(v,M){const $=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!(0,i.le)(M)&&""!==M&&(0,i.IV)($,M.split(" ")),!(0,i.le)(v)&&""!==v&&(0,i.cn)($,v.split(" "))}setEnableRTL(v){v?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=v,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=v,this.treeObj.dataBind())}setEnable(){$e.II.setEnabled(this.enabled,this.inputEle),this.enabled?((0,i.IV)([this.inputWrapper],li),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),(0,i.cn)([this.inputWrapper],li),this.inputWrapper&&this.inputWrapper.classList.contains(us)&&(0,i.IV)([this.inputWrapper],[us]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))}cloneFields(v){return{dataSource:v.dataSource,value:v.value,text:v.text,parentValue:v.parentValue,child:this.cloneChildField(v.child),hasChildren:v.hasChildren,expanded:v.expanded,iconCss:v.iconCss,imageUrl:v.imageUrl,htmlAttributes:v.htmlAttributes,query:v.query,selected:v.selected,tableName:v.tableName,tooltip:v.tooltip}}cloneChildField(v){return"string"==typeof v?v:{dataSource:v.dataSource,value:v.value,text:v.text,parentValue:v.parentValue,child:v.child?this.cloneChildField(v.child):null,hasChildren:v.hasChildren,expanded:v.expanded,iconCss:v.iconCss,imageUrl:v.imageUrl,htmlAttributes:v.htmlAttributes,query:v.query,selected:v.selected,tableName:v.tableName,tooltip:v.tooltip}}getTreeFields(v){return{dataSource:v.dataSource,id:v.value,text:v.text,parentID:v.parentValue,child:this.getTreeChildren(v.child),hasChildren:v.hasChildren,expanded:v.expanded,iconCss:v.iconCss,imageUrl:v.imageUrl,isChecked:v.selected,htmlAttributes:v.htmlAttributes,query:v.query,selected:v.selected,tableName:v.tableName,tooltip:v.tooltip}}getTreeChildren(v){if("string"==typeof v)return v;if(!(0,i.le)(v)){const M=v=this.getActualProperties(v);return v.value&&(M.id=v.value),v.parentValue&&(M.parentID=v.parentValue),v.child&&(M.child=this.getTreeChildren(v.child)),v.selected&&this.showCheckBox&&(M.isChecked=v.selected),M}return null}getTreeDataType(v,M){if(this.fields.dataSource instanceof u.hm){for(let $=0;$<v.length;$++)if("string"==typeof M.child&&(0,i.le)((0,i.NA)(M.child,v[$])))return 1;return 2}for(let $=0,fe=v.length;$<fe;$++){if("string"==typeof M.child&&!(0,i.le)((0,i.NA)(M.child,v[$])))return 2;if(!(0,i.le)((0,i.NA)(M.parentValue,v[$]))||!(0,i.le)((0,i.NA)(M.hasChildren,v[$])))return 1}return 1}setFields(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()}getEventArgs(v){let fe;return this.showCheckBox&&("check"===v.action?fe="select":"uncheck"===v.action&&(fe="un-select")),{action:this.showCheckBox?fe:v.action,isInteracted:!!this.isClicked||v.isInteracted,item:v.node,itemData:this.showCheckBox?v.data[0]:v.nodeData}}onBeforeSelect(v){v.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))}updateHiddenValue(){this.allowMultiSelection||this.showCheckBox||(this.hiddenElement.innerHTML=this.value&&this.value.length?'<option selected value ="'+this.value[0]+'">'+this.text+"</option>":"")}onNodeSelected(v){if(this.showCheckBox)return;let M;if(v.isInteracted){const fe=(0,i.NA)("id",v.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[fe]},!0),M=this.itemTemplate?(0,i.NA)("text",this.treeObj.getNode(fe)):(0,i.NA)("text",v.nodeData).toString(),$e.II.setValue(M,this.inputEle,this.floatLabelType),this.setProperties({text:M},!0),this.currentText=this.text,this.currentValue=this.value,(0,i.Y4)(this.inputWrapper,{"aria-describedby":this.element.id}),(0,i.Y4)(this.inputWrapper,{"aria-activedescendant":fe.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}const $=this.getEventArgs(v);this.trigger("select",$),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}onNodeClicked(v){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(v.event),this.isNodeSelected=!1);const M=v.event.target;(M.classList.contains("e-fullrow")||M.classList.contains("e-list-text"))&&this.showCheckBox&&(this.isClicked=!0,"true"===this.treeObj.getNode(v.node).isChecked?this.treeObj.uncheckAll([v.node]):this.treeObj.checkAll([v.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()),!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(v.event)}onNodeChecked(v){const M=this.getEventArgs(v);if(this.trigger("select",M),this.isFilteredData&&"uncheck"===v.action){const $=(0,i.NA)("id",v.data[0]).toString();this.removeSelectedData($,!0)}if(!this.isChipDelete&&v.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){const $=this.treeObj.element.querySelectorAll("li"),fe=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),Ce=(0,i.oq)(this.checkBoxElement,"."+Ui);Ce&&"uncheck"===v.action?(this.isReverseUpdate=!0,this.changeState(Ce,"uncheck"),this.isReverseUpdate=!1):Ce&&"check"===v.action&&fe.length===$.length&&(this.isReverseUpdate=!0,this.changeState(Ce,"check"),this.isReverseUpdate=!1)}}beforeCheck(v){v.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)}updateClearButton(v){if(v?this.inputWrapper.contains(this.overAllClear)?((0,i.IV)([this.overAllClear],qt),(0,i.cn)([this.inputWrapper],ui)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):((0,i.cn)([this.overAllClear],qt),(0,i.IV)([this.inputWrapper],ui)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper){const M=(0,i.td)("."+Tt,this.chipWrapper);for(let $=0;$<M.length;$++)v?(0,i.IV)([M[$]],qt):(0,i.cn)([M[$]],qt)}}updateDropDownIconState(v){const M=(0,i.Ys)("."+bs,this.inputWrapper);v?(M?(0,i.IV)([M],qt):$e.II.appendSpan(is,this.inputWrapper,this.createElement),(0,i.cn)([this.inputWrapper],Ut)):((0,i.cn)([M],qt),(0,i.IV)([this.inputWrapper],Ut))}updateMode(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();const v=this.getValidMode();this.chipWrapper.classList.contains(qt)&&v?((0,i.IV)([this.chipWrapper],qt),(0,i.cn)([this.inputWrapper],zi)):v||((0,i.cn)([this.chipWrapper],qt),(0,i.IV)([this.inputWrapper],zi));const M=null!==this.value&&0!==this.value.length;v&&M?(0,i.cn)([this.inputEle],oi):(0,i.IV)([this.inputEle],oi)}else this.inputEle.classList.contains(oi)&&((0,i.IV)([this.inputEle],oi),this.chipWrapper&&((0,i.cn)([this.chipWrapper],qt),(0,i.IV)([this.inputWrapper],zi)))}ensurePlaceHolder(){this.value&&0===this.value.length&&((0,i.IV)([this.inputEle],oi),this.chipWrapper&&(0,i.cn)([this.chipWrapper],qt))}ensureClearIconPosition(v){"Never"!==v&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])}setMultiSelectValue(v){if(this.isFilteredData){const M=(0,i.le)(this.value)?[]:this.value;for(let $=0;$<v.length;$++)((0,i.le)(this.value)||-1===this.value.indexOf(v[$]))&&M.push(v[$]);this.setProperties({value:M},!0)}else this.setProperties({value:v},!0),v&&0!==v.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())}setMultiSelect(){this.showCheckBox&&!this.isDynamicChange?this.setMultiSelectValue(this.treeObj.checkedNodes.slice()):(this.setMultiSelectValue(this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())),this.selectedText=[];const v=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!v&&((0,i.IV)([this.inputEle],oi),(0,i.og)(this.chipWrapper)),this.getValidMode()&&null!==this.value&&((0,i.cn)([this.inputEle],oi),this.chipWrapper&&(0,i.IV)([this.chipWrapper],qt)),this.chipWrapper&&"Box"===this.mode&&!(this.value&&this.value.length)&&((0,i.cn)([this.chipWrapper],qt),(0,i.IV)([this.inputEle],oi)),this.updateSelectedValues()}getSelectedData(v){let M=null;if(this.isFilteredData)for(let $=0;$<this.selectedData.length;$++)if((0,i.NA)(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[$]).toString()===v){M=this.selectedData[$];break}return(0,i.le)(M)&&(M=this.treeSettings.loadOnDemand?this.getNodeData(v):this.treeObj.getNode(v),(0,i.le)(M)||this.selectedData.push(M)),M}getNodeData(v){let M;if((0,i.le)(v))return M;if(1!==this.treeDataType)return this.getChildNodeData(this.treeItems,this.fields,v);for(let $=0,fe=this.treeItems.length;$<fe;$++){let Ce=(0,i.NA)(this.fields.value,this.treeItems[$]);if(!(0,i.le)(this.treeItems[$])&&!(0,i.le)(Ce)&&Ce.toString()===v)return this.treeItems[$]}return M}getChildNodeData(v,M,$){let fe;if((0,i.le)(v))return fe;for(let Ce=0,pt=v.length;Ce<pt;Ce++){let Mt=(0,i.NA)(M.value,v[Ce]);if(v[Ce]&&Mt&&Mt.toString()===$)return v[Ce];if("string"!=typeof M.child||(0,i.le)((0,i.NA)(M.child,v[Ce]))){if(this.fields.dataSource instanceof u.hm&&!(0,i.le)((0,i.NA)("child",v[Ce]))&&(fe=this.getChildNodeData((0,i.NA)("child",v[Ce]),this.getChildMapperFields(M),$),void 0!==fe))break}else{let wi=(0,i.NA)(M.child,v[Ce]);if(fe=this.getChildNodeData(wi,this.getChildMapperFields(M),$),void 0!==fe)break}}return fe}getChildMapperFields(v){return"string"==typeof v.child||(0,i.le)(v.child)?v:v.child}removeSelectedData(v,M){const $=(0,i.le)(this.value)?[]:this.value.slice();$.splice($.indexOf(v),1),this.setProperties({value:$},M);for(let fe=0;fe<this.selectedData.length;fe++)if((0,i.NA)(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[fe]).toString()===v){this.selectedData.splice(fe,1);break}}updateSelectedValues(){this.dataValue="";let v,M,fe,$="";this.hiddenElement.innerHTML="";let Ce="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!(0,i.le)(this.value)){for(let Mt=0,wi=this.value.length;Mt<wi;Mt++)fe=this.getSelectedData(this.value[Mt]),M=(0,i.NA)(this.treeSettings.loadOnDemand?this.fields.text:"text",fe),this.selectedText.push(M),v=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+v,$+=","+v):(this.dataValue+=v,$+=v),"Custom"!==this.mode&&"Delimiter"!==this.mode&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(v,this.value[Mt]),Ce+='<option selected value ="'+this.value[Mt]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:$},!0),this.hiddenElement.innerHTML=Ce,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}const pt=this.getValidMode();"Custom"!==this.mode&&"Box"!==this.mode&&(this.allowMultiSelection||this.showCheckBox)&&!pt&&this.chipWrapper&&((0,i.cn)([this.chipWrapper],qt),(0,i.IV)([this.inputWrapper],zi)),$e.II.setValue(this.dataValue,this.inputEle,this.floatLabelType),this.setProperties(""===$?{text:null}:{text:$},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value}setChipValues(v,M){this.inputWrapper.contains(this.chipWrapper)||this.createChip();const $=this.createElement("span",{className:Kt,attrs:{"data-value":M}}),fe=this.createElement("span",{className:ni}),Ce=this.createElement("span",{className:Tt+" e-icons"});fe.innerHTML=v,$.appendChild(fe),this.chipCollection.appendChild($),this.showClearButton&&($.appendChild(Ce),i.bi.add(Ce,"mousedown",this.removeChip,this))}setTagValues(){if(null===this.value||null==this.text)return;this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(zi)||(0,i.cn)([this.inputWrapper],zi);const v=this.createElement("span",{className:Kt});this.inputEle.classList.contains(oi)||(0,i.cn)([this.inputEle],oi),this.chipWrapper.classList.contains(qt)&&(0,i.IV)([this.chipWrapper],qt);const M=this.createElement("span",{className:ni}),fe=this.customTemplateId;let Mt=this.templateComplier(this.customTemplate)({value:this.value,text:this.text},this,"customTemplate",fe,this.isStringTemplate,void 0,M);Mt&&(Mt=Array.prototype.slice.call(Mt),(0,i.R3)(Mt,M)),v.appendChild(M),this.chipCollection.appendChild(v)}setSelectAllWrapper(v){this.isFirstRender||(v&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&((0,i.og)(this.checkAllParent),this.checkAllParent=null))}setHeaderTemplate(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),(0,i.cn)([this.header],wt));let M=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);M&&(M=Array.prototype.slice.call(M),(0,i.R3)(M,this.header)),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)}templateComplier(v){if(v)try{if(document.querySelectorAll(v).length)return(0,i.MY)(document.querySelector(v).innerHTML.trim())}catch{return(0,i.MY)(v)}return(0,i.MY)(v)}setFooterTemplate(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),(0,i.cn)([this.footer],kt));let M=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);M&&(M=Array.prototype.slice.call(M),(0,i.R3)(M,this.footer)),(0,i.R3)([this.footer],this.popupEle)}clearAll(v){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),v&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(v))}removeChip(v){if(!this.enabled||this.readonly)return;const M=v.target.parentElement,$=M.getAttribute("data-value");this.chipCollection&&M&&(0,i.Od)(M),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData($,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([$]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(v),this.isChipDelete=!1,this.ensurePlaceHolder()}resetValue(v){this.value==[]&&null==this.text||($e.II.setValue(null,this.inputEle,this.floatLabelType),v||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],(0,i.sO)("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.checkedNodes=[],this.treeObj.dataBind(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||v?v&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))}clearCheckAll(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)}selectAllItems(v){if(this.showCheckBox)v?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(v){const M=(0,i.td)("li",this.treeObj.element);let $;const fe=[];for(let Ce=0;Ce<M.length;Ce++)$=M[Ce].getAttribute("data-uid").toString(),fe.push($);this.treeObj.selectedNodes=fe}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(v?this.updateView():this.updateOverflowWrapper(!0))}updateTreeSettings(v){const M=Object.keys(v.treeSettings)[0];if("autoCheck"===M)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===M)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===M)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)}updateCheckBoxState(v){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=v,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1}updateTemplate(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)}l10nUpdate(v){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),(0,i.cn)([this.noRecord],"e-ddt-nodata"),(0,i.Ce)([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){const $=v?this.actionFailureTemplateId:this.noRecordsTemplateId,fe=v?"actionFailureTemplate":"noRecordsTemplate";let pt=this.templateComplier(v?this.actionFailureTemplate:this.noRecordsTemplate)({},this,fe,$,this.isStringTemplate,void 0,this.noRecord);pt&&(pt=Array.prototype.slice.call(pt),(0,i.R3)(pt,this.noRecord))}else{const M={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new i.E7(this.getLocaleName(),M,this.locale),this.noRecord.innerHTML=this.l10n.getConstant(v?"actionFailureTemplate":"noRecordsTemplate")}}updateRecordTemplate(v){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(v),this.hasTemplate&&this.updateTemplate())}updateOverflowWrapper(v){v?this.inputWrapper.contains(this.overFlowWrapper)&&v&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:on+" "+qt}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))}updateMultiSelection(v){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=v,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()}updateAllowFiltering(v){this.isFirstRender||(v?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()}updateFilterPlaceHolder(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))}updateValue(v){this.isDynamicChange=!0,(0,i.le)(v)||0===v.length?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1}updateText(v){(0,i.le)(v)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()}updateModelMode(){if(this.allowMultiSelection||this.showCheckBox){if(!this.wrapText){const M=(0,i.Ys)("."+on,this.inputWrapper);M&&(M.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),(0,i.cn)([this.inputEle],oi),"Box"===this.mode?(0,i.IV)([this.overFlowWrapper,this.inputWrapper],Bn):(0,i.cn)([this.overFlowWrapper,this.inputWrapper],Bn))}}updateOption(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")}onPropertyChanged(v,M){for(const $ of Object.keys(v))switch($){case"width":this.setElementWidth(v.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":$e.II.setPlaceholder(v.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(v.cssClass,M.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":$e.II.setReadonly(v.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":$e.II.removeFloating(this.inputObj),$e.II.addFloating(this.inputEle,v.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(v.floatLabelType);break;case"showClearButton":this.updateClearButton(v.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(v.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=M.value,this.updateValue(v.value);break;case"text":this.updateText(v.text);break;case"allowMultiSelection":this.updateMultiSelection(v.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&(0,i.og)(this.overFlowWrapper),this.chipWrapper&&(0,i.og)(this.chipWrapper),this.setTagValues()):("Custom"===M.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(v.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(v.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(v);break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=v.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(v.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=v.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=v.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?((0,i.cn)([this.overFlowWrapper],qt),this.chipWrapper&&"Box"===this.mode?(0,i.IV)([this.chipWrapper],qt):((0,i.IV)([this.inputWrapper],zi),(0,i.IV)([this.inputEle],oi)),this.ensurePlaceHolder()):this.updateView()}}clear(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)}destroy(){this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({value:[]},!0),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),(0,i.og)(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),$e.II.setValue(null,this.inputEle,this.floatLabelType),(0,i.og)(this.inputWrapper),(0,i.og)(this.popupDiv),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(oi),super.destroy()}destroyFilter(){this.filterObj&&(this.filterObj.destroy(),(0,i.og)(this.filterObj.element),(0,i.og)(this.filterContainer),this.filterObj=null)}ensureVisible(v){this.treeObj.ensureVisible(v)}getData(v){return this.treeObj.getTreeData(v)}hidePopup(){const v={popup:this.popupObj};this.inputWrapper.classList.remove($i),this.popupEle&&(0,i.cn)([this.popupEle],Ci),(0,i.Y4)(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&(0,i.cn)([this.inputWrapper],[us])),this.trigger("close",v))}selectAll(v){this.selectAllItems(v)}showPopup(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())}getModuleName(){return"dropdowntree"}};Fe([(0,i.Z9)("The Request Failed")],Yt.prototype,"actionFailureTemplate",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"allowFiltering",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"allowMultiSelection",void 0),Fe([(0,i.Z9)(!0)],Yt.prototype,"changeOnBlur",void 0),Fe([(0,i.Z9)("")],Yt.prototype,"cssClass",void 0),Fe([(0,i.Z9)("${value.length} item(s) selected")],Yt.prototype,"customTemplate",void 0),Fe([(0,i.Z9)(",")],Yt.prototype,"delimiterChar",void 0),Fe([(0,i.Z9)(!0)],Yt.prototype,"enabled",void 0),Fe([(0,i.Zz)({},In)],Yt.prototype,"fields",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"filterBarPlaceholder",void 0),Fe([(0,i.Z9)("StartsWith")],Yt.prototype,"filterType",void 0),Fe([(0,i.Z9)("Never")],Yt.prototype,"floatLabelType",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"footerTemplate",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"ignoreAccent",void 0),Fe([(0,i.Z9)(!0)],Yt.prototype,"ignoreCase",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"headerTemplate",void 0),Fe([(0,i.Z9)({})],Yt.prototype,"htmlAttributes",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"itemTemplate",void 0),Fe([(0,i.Z9)("Default")],Yt.prototype,"mode",void 0),Fe([(0,i.Z9)("No Records Found")],Yt.prototype,"noRecordsTemplate",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"placeholder",void 0),Fe([(0,i.Z9)("300px")],Yt.prototype,"popupHeight",void 0),Fe([(0,i.Z9)("100%")],Yt.prototype,"popupWidth",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"readonly",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"showSelectAll",void 0),Fe([(0,i.Z9)("Select All")],Yt.prototype,"selectAllText",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"showCheckBox",void 0),Fe([(0,i.Z9)(!0)],Yt.prototype,"showClearButton",void 0),Fe([(0,i.Z9)(!0)],Yt.prototype,"showDropDownIcon",void 0),Fe([(0,i.Z9)("None")],Yt.prototype,"sortOrder",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"text",void 0),Fe([(0,i.Zz)({},js)],Yt.prototype,"treeSettings",void 0),Fe([(0,i.Z9)("Unselect All")],Yt.prototype,"unSelectAllText",void 0),Fe([(0,i.Z9)(null)],Yt.prototype,"value",void 0),Fe([(0,i.Z9)("100%")],Yt.prototype,"width",void 0),Fe([(0,i.Z9)(1e3)],Yt.prototype,"zIndex",void 0),Fe([(0,i.Z9)(!1)],Yt.prototype,"wrapText",void 0),Fe([(0,i.ju)()],Yt.prototype,"actionFailure",void 0),Fe([(0,i.ju)()],Yt.prototype,"beforeOpen",void 0),Fe([(0,i.ju)()],Yt.prototype,"change",void 0),Fe([(0,i.ju)()],Yt.prototype,"close",void 0),Fe([(0,i.ju)()],Yt.prototype,"blur",void 0),Fe([(0,i.ju)()],Yt.prototype,"created",void 0),Fe([(0,i.ju)()],Yt.prototype,"dataBound",void 0),Fe([(0,i.ju)()],Yt.prototype,"destroyed",void 0),Fe([(0,i.ju)()],Yt.prototype,"filtering",void 0),Fe([(0,i.ju)()],Yt.prototype,"focus",void 0),Fe([(0,i.ju)()],Yt.prototype,"keyPress",void 0),Fe([(0,i.ju)()],Yt.prototype,"open",void 0),Fe([(0,i.ju)()],Yt.prototype,"select",void 0),Yt=Fe([i.Zl],Yt);var Xi=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};const Ls="e-atc-spinner-icon";B.root="e-combobox";const cr={container:null,buttons:[]};let Rs=class extends Be{constructor(v,M){super(v,M)}preRender(){super.preRender()}getLocaleName(){return"combo-box"}wireEvent(){"combobox"===this.getModuleName()&&(i.bi.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),i.bi.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),(0,i.le)(this.inputWrapper.buttons[0])||i.bi.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),i.bi.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(i.bi.add(this.inputElement,"input",this.onInput,this),i.bi.add(this.inputElement,"keyup",this.onFilterUp,this),i.bi.add(this.inputElement,"keydown",this.onFilterDown,this),i.bi.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()}preventBlur(v){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(B.input)&&i.AR.isDevice||!i.AR.isDevice)&&v.preventDefault()}onBlurHandler(v){const M=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;!(0,i.le)(this.listData)&&!(0,i.le)(M)&&M!==this.text&&this.customValue(v),super.onBlurHandler(v)}targetElement(){return this.inputElement}setOldText(v){$e.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()}setOldValue(v){this.valueMuteChange(this.allowCustom?this.value:null),this.removeSelection(),this.setHiddenValue()}valueMuteChange(v){const M=(0,i.le)(v)?null:v.toString();$e.II.setValue(M,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:v,text:v,index:null},!0),this.activeIndex=this.index;const $=this.fields,fe={};fe[$.text]=(0,i.le)(v)?null:v.toString(),fe[$.value]=(0,i.le)(v)?null:v.toString(),this.itemData=fe,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)}updateValues(){if((0,i.le)(this.value))if(this.text&&(0,i.le)(this.value)){const v=this.getElementByText(this.text);v?this.setSelection(v,null):($e.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{const v=this.getElementByValue(this.value);v?this.setSelection(v,null):this.valueMuteChange(this.allowCustom?this.value:null)}this.setHiddenValue(),$e.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}updateIconState(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?(0,i.IV)([this.inputWrapper.clearButton],B.clearIconHide):(0,i.cn)([this.inputWrapper.clearButton],B.clearIconHide))}getAriaAttributes(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}}searchLists(v){this.isTyped=!0,this.isFiltering()?(super.searchLists(v),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+B.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+B.li)),this.incrementalSearch(v))}getNgDirective(){return"EJS-COMBOBOX"}setSearchBox(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:cr}onActionComplete(v,M,$,fe){super.onActionComplete(v,M,$),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout(()=>{this.inlineSearch()})}getFocusElement(){const v=this.isSelectCustom?{text:""}:this.getItemData(),M=this.list.querySelector("."+B.selected);if(v.text===this.inputElement.value&&!(0,i.le)(M))return M;if((i.AR.isDevice&&!this.isDropDownClick||!i.AR.isDevice)&&!(0,i.le)(this.liCollections)&&this.liCollections.length>0){const pt=Oe(this.inputElement.value,this.liCollections,this.filterType,!0).item;if((0,i.le)(pt))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{const Mt=this.getIndexByValue(pt.getAttribute("data-value"))-1,wi=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);isNaN(wi)||"autocomplete"===this.getModuleName()||(this.removeFocus(),this.list.scrollTop=Mt*wi+(this.fields.groupBy?this.liCollections[0].offsetHeight:0),(0,i.cn)([pt],B.focus))}return pt}return null}setValue(v){return v&&"keydown"===v.type&&"enter"===v.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&v&&"keydown"===v.type&&"enter"!==v.action?(this.preventAutoFill=!1,this.inlineSearch(v),!1):super.setValue(v)}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const v=this.getItemData();this.allowCustom&&(0,i.le)(v.value)&&(0,i.le)(v.text)||this.setProperties({value:v.value,text:v.text},!this.allowCustom)}showSpinner(){(0,i.le)(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||$e.II.appendSpan("e-input-group-icon "+Ls,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,(0,i.cn)([this.spinnerElement],B.disableIcon),(0,Zt.rj)({target:this.spinnerElement,width:i.AR.isDevice?"16px":"14px"},this.createElement),(0,Zt.yh)(this.spinnerElement))}hideSpinner(){(0,i.le)(this.spinnerElement)||((0,Zt.v3)(this.spinnerElement),(0,i.IV)([this.spinnerElement],B.disableIcon),this.spinnerElement.classList.contains(Ls)?(0,i.og)(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}setAutoFill(v,M){if(M||this.setHoverList(v),this.autofill&&!this.preventAutoFill){const $=this.getTextByValue(v.getAttribute("data-value")).toString(),fe=this.getFormattedValue(v.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===fe?this.updateSelectedItem(v,null,!0):(this.updateSelectedItem(v,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(v.getAttribute("data-value")))),this.isAndroidAutoFill($)||this.setAutoFillSelection($)}}isAndroidAutoFill(v){if(i.AR.isAndroid){const M=this.getSelectionPoints(),$=this.prevSelectPoints.end,fe=M.end,Ce=this.prevSelectPoints.start,pt=M.start;return 0!==$&&($===v.length&&Ce===v.length||Ce>pt&&$>fe||$===fe&&Ce===pt)}return!1}clearAll(v,M){((0,i.le)(M)||!(0,i.le)(M)&&(0,i.le)(M.dataSource))&&super.clearAll(v),this.isFiltering()&&!(0,i.le)(v)&&v.target===this.inputWrapper.clearButton&&this.searchLists(v)}isSelectFocusItem(v){return!(0,i.le)(v)}inlineSearch(v){const M=v&&("down"===v.action||"up"===v.action||"home"===v.action||"end"===v.action||"pageUp"===v.action||"pageDown"===v.action),$=M?this.liCollections[this.activeIndex]:this.getFocusElement();if((0,i.le)($))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;const fe=this.list.querySelector("."+B.li);this.setHoverList(fe)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!M){const fe=this.getFormattedValue($.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(fe),this.activeIndex=(0,i.le)(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill($,M)}}incrementalSearch(v){this.showPopup(),(0,i.le)(this.listData)||(this.inlineSearch(v),v.preventDefault())}setAutoFillSelection(v){const M=this.getSelectionPoints(),$=this.inputElement.value.substr(0,M.start);if($&&$.toLowerCase()===v.substr(0,M.start).toLowerCase()){const fe=$+v.substr($.length,v.length);$e.II.setValue(fe,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(M.start,this.inputElement.value.length)}else $e.II.setValue(v,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)}getValueByText(v){return super.getValueByText(v,!0,this.ignoreAccent)}unWireEvent(){"combobox"===this.getModuleName()&&(i.bi.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),i.bi.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),(0,i.le)(this.inputWrapper.buttons[0])||i.bi.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(i.bi.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(i.bi.remove(this.inputElement,"input",this.onInput),i.bi.remove(this.inputElement,"keyup",this.onFilterUp),i.bi.remove(this.inputElement,"keydown",this.onFilterDown),i.bi.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()}setSelection(v,M){super.setSelection(v,M),!(0,i.le)(v)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()}selectCurrentItem(v){let M;this.isPopupOpen&&(M=this.list.querySelector(this.isSelected?"."+B.selected:"."+B.focus),M&&(this.setSelection(M,v),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(v))),"enter"===v.action&&""===this.inputElement.value.trim()?this.clearAll(v):this.isTyped&&!this.isSelected&&(0,i.le)(M)&&this.customValue(v),this.hidePopup()}setHoverList(v){this.removeSelection(),this.isValidLI(v)&&!v.classList.contains(B.selected)&&(this.removeFocus(),v.classList.add(B.focus))}targetFocus(v){i.AR.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(v)}dropDownClick(v){v.preventDefault(),i.AR.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),super.dropDownClick(v)}customValue(v){const M=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){const $=this.value;if((0,i.le)(M)){const fe=""===this.inputElement.value?null:this.inputElement.value,Ce={text:fe,item:{}};this.initial?this.updateCustomValueCallback(fe,Ce,$):this.trigger("customValueSpecifier",Ce,pt=>{this.updateCustomValueCallback(fe,pt,$,v)})}else this.isSelectCustom=!1,this.setProperties({value:M}),$!==this.value&&this.onChangeEvent(v)}else this.allowCustom&&(this.isSelectCustom=!0);else{const $=this.previousValue,fe=this.value;this.setProperties({value:M}),(0,i.le)(this.value)&&$e.II.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&$===this.value&&fe!==this.value&&this.onChangeEvent(null)}}updateCustomValueCallback(v,M,$,fe){const Ce=this.fields,pt=M.item;let Mt={};pt&&(0,i.NA)(Ce.text,pt)&&(0,i.NA)(Ce.value,pt)?Mt=pt:((0,i.sO)(Ce.text,v,Mt),(0,i.sO)(Ce.value,v,Mt)),this.itemData=Mt;const wi={text:(0,i.NA)(Ce.text,this.itemData),value:(0,i.NA)(Ce.value,this.itemData),index:null};this.setProperties(wi,!0),this.setSelection(null,null),this.isSelectCustom=!0,$!==this.value&&this.onChangeEvent(fe)}onPropertyChanged(v,M){"combobox"===this.getModuleName()&&(this.checkData(v),this.setUpdateInitial(["fields","query","dataSource"],v));for(const $ of Object.keys(v))switch($){case"readonly":$e.II.setReadonly(this.readonly,this.inputElement),this.readonly?(i.bi.remove(this.inputElement,"input",this.onInput),i.bi.remove(this.inputElement,"keyup",this.onFilterUp),i.bi.remove(this.inputElement,"keydown",this.onFilterDown)):(i.bi.add(this.inputElement,"input",this.onInput,this),i.bi.add(this.inputElement,"keyup",this.onFilterUp,this),i.bi.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&(0,i.le)(this.list)&&super.renderList();break;case"allowCustom":break;default:{const fe=this.getPropObject($,v,M);super.onPropertyChanged(fe.newProperty,fe.oldProperty),this.isFiltering()&&"dataSource"===$&&(0,i.le)(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&super.renderList();break}}}render(){super.render(),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&(0,i.le)(this.list)&&super.renderList(),this.renderComplete()}getModuleName(){return"combobox"}addItem(v,M){super.addItem(v,M)}filter(v,M,$){super.filter(v,M,$)}showPopup(){super.showPopup()}hidePopup(v){const M=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!(0,i.le)(this.listData)){const $=this.isEscapeKey;this.isEscapeKey&&($e.II.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();const fe=this.isSelectCustom?{text:""}:this.getItemData(),Ce=this.list.querySelector("."+B.selected);if(this.inputElement&&fe.text===this.inputElement.value&&!(0,i.le)(Ce))return this.isSelected&&(this.onChangeEvent(v),this.isSelectCustom=!1),void super.hidePopup(v);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){const pt=Oe(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=pt.item,(0,i.le)(pt.index)&&(pt.index=Oe(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=pt.index,(0,i.le)(this.selectedLI)?$&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(v)}(0,i.le)(this.listData)&&this.allowCustom&&!(0,i.le)(M)&&M!==this.value&&this.customValue(),super.hidePopup(v)}focusIn(){!this.enabled||(i.AR.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),super.focusIn())}clear(){this.value=null}focusOut(v){super.focusOut(v)}getItems(){return super.getItems()}getDataByValue(v){return super.getDataByValue(v)}renderHightSearch(){}};Xi([(0,i.Z9)(!1)],Rs.prototype,"autofill",void 0),Xi([(0,i.Z9)(!0)],Rs.prototype,"allowCustom",void 0),Xi([(0,i.Z9)({})],Rs.prototype,"htmlAttributes",void 0),Xi([(0,i.Z9)(!1)],Rs.prototype,"allowFiltering",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"query",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"index",void 0),Xi([(0,i.Z9)(!0)],Rs.prototype,"showClearButton",void 0),Xi([(0,i.Z9)(!1)],Rs.prototype,"enableRtl",void 0),Xi([(0,i.ju)()],Rs.prototype,"customValueSpecifier",void 0),Xi([(0,i.ju)()],Rs.prototype,"filtering",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"valueTemplate",void 0),Xi([(0,i.Z9)("Never")],Rs.prototype,"floatLabelType",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"filterBarPlaceholder",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"cssClass",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"headerTemplate",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"footerTemplate",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"placeholder",void 0),Xi([(0,i.Z9)("100%")],Rs.prototype,"width",void 0),Xi([(0,i.Z9)("300px")],Rs.prototype,"popupHeight",void 0),Xi([(0,i.Z9)("100%")],Rs.prototype,"popupWidth",void 0),Xi([(0,i.Z9)(!1)],Rs.prototype,"readonly",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"text",void 0),Xi([(0,i.Z9)(null)],Rs.prototype,"value",void 0),Rs=Xi([i.Zl],Rs);var gi=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};B.root="e-autocomplete",B.icon="e-input-group-icon e-ddl-icon e-search-icon";let je=class extends Rs{constructor(v,M){super(v,M),this.isFiltered=!1,this.searchList=!1}preRender(){super.preRender()}getLocaleName(){return"auto-complete"}getNgDirective(){return"EJS-AUTOCOMPLETE"}getQuery(v){const M=v?v.clone():this.query?this.query.clone():new u.AE,$=""!==this.queryString||(0,i.le)(this.value)?this.filterType:"equal",fe=""!==this.queryString||(0,i.le)(this.value)?this.queryString:this.value;if(this.isFiltered)return M;if(null!==this.queryString&&""!==this.queryString){const Ce=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof u.hm||"string"!==Ce)&&"number"!==Ce){const pt=(0,i.le)(this.fields.value)?"":this.fields.value;M.where(pt,$,fe,this.ignoreCase,this.ignoreAccent)}else M.where("",$,fe,this.ignoreCase,this.ignoreAccent)}if(!(0,i.le)(this.suggestionCount)){if(20!==this.suggestionCount)for(let Ce=0;Ce<M.queries.length;Ce++)"onTake"===M.queries[Ce].fn&&M.queries.splice(Ce,1);M.take(this.suggestionCount)}return M}searchLists(v){if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,(0,i.le)(this.list)&&super.renderList(!0),this.queryString=this.filterInput.value,"mousedown"!==v.type&&(40===v.keyCode||38===v.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;const M={preventDefaultAction:!1,text:this.filterInput.value,updateData:($,fe,Ce)=>{M.cancel||(this.isFiltered=!0,this.filterAction($,fe,Ce))},cancel:!1};this.trigger("filtering",M,$=>{!$.cancel&&!this.isFiltered&&!$.preventDefaultAction&&(this.searchList=!0,this.filterAction(this.dataSource,null,this.fields))})}filter(v,M,$){this.isFiltered=!0,this.filterAction(v,M,$)}filterAction(v,M,$){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(v,$,M):(this.hidePopup(),this.beforePopupOpen=!1),this.renderReactTemplates()}clearAll(v,M){((0,i.le)(M)||!(0,i.le)(M)&&(0,i.le)(M.dataSource))&&super.clearAll(v),this.beforePopupOpen&&this.hidePopup()}onActionComplete(v,M,$,fe){this.fixedHeaderElement=null,super.onActionComplete(v,M,$);const Ce=this.list.querySelector("."+B.li);(0,i.le)(Ce)||(0,i.IV)([Ce],B.focus),this.postBackAction()}postBackAction(){if(this.autofill&&!(0,i.le)(this.liCollections[0])&&this.searchList){const M=Oe(this.inputElement.value,[this.liCollections[0]],"StartsWith",this.ignoreCase);this.searchList=!1,(0,i.le)(M.item)||super.setAutoFill(this.liCollections[0],!0)}}setSelection(v,M){if(this.isValidLI(v))if(!(0,i.le)(M)&&"keydown"===M.type&&"enter"!==M.action&&"tab"!==M.action&&this.isValidLI(v)){const $=this.getFormattedValue(v.getAttribute("data-value"));this.activeIndex=this.getIndexByValue($),this.setHoverList(v),this.selectedLI=v,this.setScrollPosition(M),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,super.setAutoFill(v)),(0,i.Y4)(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else super.setSelection(v,M)}listOption(v,M){const $=super.listOption(v,M);if((0,i.le)($.itemCreated))$.itemCreated=fe=>{this.highlight&&(this.element.tagName===this.getNgDirective()&&this.itemTemplate?setTimeout(()=>{jt(fe.item,this.queryString,this.ignoreCase,this.filterType)},0):jt(fe.item,this.queryString,this.ignoreCase,this.filterType))};else{const fe=$.itemCreated;$.itemCreated=Ce=>{this.highlight&&jt(Ce.item,this.queryString,this.ignoreCase,this.filterType),fe.apply(this,[Ce])}}return $}isFiltering(){return!0}renderPopup(){this.list.scrollTop=0,super.renderPopup()}isEditTextBox(){return""!==this.inputElement.value.trim()}isPopupButton(){return this.showPopupButton}isSelectFocusItem(v){return!1}showPopup(){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,(0,i.le)(this.list)?this.renderList():this.resetList(this.dataSource,this.fields)}}hidePopup(){super.hidePopup(),this.activeIndex=-1}onPropertyChanged(v,M){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],v);for(const $ of Object.keys(v))switch($){case"showPopupButton":if(this.showPopupButton){const fe=$e.II.appendSpan(B.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=fe,this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&i.bi.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else(0,i.og)(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:{const fe=this.getPropObject($,v,M);super.onPropertyChanged(fe.newProperty,fe.oldProperty);break}}}renderHightSearch(){if(this.highlight)for(let v=0;v<this.liCollections.length;v++)this.ulElement.querySelector(".e-active")||(Di(this.liCollections[v]),jt(this.liCollections[v],this.queryString,this.ignoreCase,this.filterType))}getModuleName(){return"autocomplete"}render(){super.render()}};gi([(0,i.Zz)({value:null,iconCss:null,groupBy:null},Rt)],je.prototype,"fields",void 0),gi([(0,i.Z9)(!0)],je.prototype,"ignoreCase",void 0),gi([(0,i.Z9)(!1)],je.prototype,"showPopupButton",void 0),gi([(0,i.Z9)(!1)],je.prototype,"highlight",void 0),gi([(0,i.Z9)(20)],je.prototype,"suggestionCount",void 0),gi([(0,i.Z9)({})],je.prototype,"htmlAttributes",void 0),gi([(0,i.Z9)(null)],je.prototype,"query",void 0),gi([(0,i.Z9)(1)],je.prototype,"minLength",void 0),gi([(0,i.Z9)("Contains")],je.prototype,"filterType",void 0),gi([(0,i.ju)()],je.prototype,"filtering",void 0),gi([(0,i.Z9)(null)],je.prototype,"index",void 0),gi([(0,i.Z9)("Never")],je.prototype,"floatLabelType",void 0),gi([(0,i.Z9)(null)],je.prototype,"valueTemplate",void 0),gi([(0,i.Z9)(null)],je.prototype,"filterBarPlaceholder",void 0),gi([(0,i.Z9)(!1)],je.prototype,"allowFiltering",void 0),gi([(0,i.Z9)(null)],je.prototype,"text",void 0),je=gi([i.Zl],je);const Re="e-float-line",tt="e-float-text",ti="e-label-top",ci="e-label-bottom";function pi(xi,v,M,$,fe,Ce,pt){const Mt=(0,i.az)("span",{className:Re}),wi=(0,i.az)("label",{className:tt});!(0,i.le)(M.id)&&""!==M.id&&(wi.id="label_"+M.id.replace(/ /g,"_"),(0,i.Y4)(M,{"aria-labelledby":wi.id})),!(0,i.le)($.placeholder)&&""!==$.placeholder&&(wi.innerText=pn($.placeholder),$.removeAttribute("placeholder")),wi.innerText=pn(pt),v.appendChild(Mt),v.appendChild(wi),xi.classList.add("e-float-input"),function Fi(xi,v){xi&&xi.length>0?((0,i.cn)([v],ti),(0,i.IV)([v],ci)):((0,i.IV)([v],ti),(0,i.cn)([v],ci))}(fe,wi),"Always"===Ce&&(wi.classList.contains(ci)&&(0,i.IV)([wi],ci),(0,i.cn)([wi],ti))}function Es(xi,v,M){v.placeholder=xi&&xi.length?"":M}function pn(xi){let v="";if(!(0,i.le)(xi)&&""!==xi){const M=document.createElement("span");M.innerHTML='<input  placeholder="'+xi+'"/>',v=M.children[0].placeholder}return v}var ms=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};const dn="e-input-focus",Cs="e-disabled",rs="e-hide-listitem",ln="e-chips",$n="e-chips-close",gr="e-chip-selected",mr="e-delimiter",Cn="e-zero-size",ro="e-chips-close e-close-hooker",Br="e-delim-values",Zn="e-close-icon-hide",Bi="e-ddl-disable-icon",Vn="e-ms-spinner-icon",Io="e-input-group-icon e-ddl-icon",Xn="e-icon-anim",sr="e-delim-total",to="e-search-custom-width",Eo="e-input-filter";let Vs=class extends lt{constructor(v,M){super(v,M),this.clearIconWidth=0,this.isValidKey=!1,this.selectAllEventData=[],this.selectAllEventEle=[],this.scrollFocusStatus=!1,this.keyDownStatus=!1}enableRTL(v){v?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=v,this.popupObj.dataBind())}requiredModules(){const v=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){const M=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=M}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,v.push({member:"CheckBoxSelection",args:[this]})}return v}updateHTMLAttribute(){if(Object.keys(this.htmlAttributes).length)for(const v of Object.keys(this.htmlAttributes))switch(v){case"class":{const M=this.htmlAttributes[v].replace(/\s+/g," ").trim();""!==M&&((0,i.cn)([this.overAllWrapper],M.split(" ")),(0,i.cn)([this.popupWrapper],M.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(v,this.htmlAttributes[v]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{const $=["name","required","aria-required","form"],fe=["title","role","style","class"];["id"].indexOf(v)>-1?this.element.setAttribute(v,this.htmlAttributes[v]):0===v.indexOf("data")||$.indexOf(v)>-1?this.hiddenElement.setAttribute(v,this.htmlAttributes[v]):fe.indexOf(v)>-1?this.overAllWrapper.setAttribute(v,this.htmlAttributes[v]):this.inputElement.setAttribute(v,this.htmlAttributes[v]);break}}}updateReadonly(v){v||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")}updateClearButton(v){v?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(Zn)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(Zn))}updateCssClass(){if(!(0,i.le)(this.cssClass)&&""!==this.cssClass){let v=this.cssClass;v=this.cssClass.replace(/\s+/g," ").trim(),""!==v&&((0,i.cn)([this.overAllWrapper],v.split(" ")),(0,i.cn)([this.popupWrapper],v.split(" ")))}}updateOldPropCssClass(v){!(0,i.le)(v)&&""!==v&&""!==(v=v.replace(/\s+/g," ").trim())&&((0,i.IV)([this.overAllWrapper],v.split(" ")),(0,i.IV)([this.popupWrapper],v.split(" ")))}onPopupShown(){if(i.AR.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){const $=this;window.onpopstate=()=>{$.hidePopup(),$.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}},$=>{$.cancel||(this.focusAtFirstListItem(),document.body.appendChild(this.popupObj.element),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!(0,i.le)(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===this.mode||this.showDropDownIcon)&&(0,i.cn)([this.overAllWrapper],[Xn]),this.refreshPopup(),this.renderReactTemplates(),this.popupObj.show($.animation,1e3===this.zIndex?this.element:null),(0,i.Y4)(this.inputElement,{"aria-expanded":"true"}),this.isFirstClick&&this.loadTemplate())})}updateListItems(v,M){for(let $=0;$<v.length;$++)this.findGroupStart(v[$]),this.findGroupStart(M[$]);this.deselectHeader()}loadTemplate(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}setScrollPosition(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!(0,i.le)(this.value)&&this.value.length>0){const v=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);(0,i.le)(v)||this.scrollBottom(v)}}focusAtFirstListItem(){if(this.ulElement&&this.ulElement.querySelector("li."+z_li)){let v;if("CheckBox"===this.mode)return void this.removeFocus();v=this.ulElement.querySelector("li."+z_li+":not(."+rs+")"),null!==v&&(this.removeFocus(),this.addListFocus(v))}}focusAtLastListItem(v){let M;v?M=Oe(v,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?Oe(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):M=null,M&&null!==M.item&&(this.addListFocus(M.item),this.scrollBottom(M.item,M.index))}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}}updateListARIA(){(0,i.le)(this.ulElement)||(0,i.Y4)(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});const v=!!this.inputElement.disabled;(0,i.Y4)(this.inputElement,this.getAriaAttributes()),v&&(0,i.Y4)(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(v?"true":"false")}ensureAriaDisabled(v){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){const M=this.htmlAttributes;(0,i.l7)(M,{"aria-disabled":v},M),this.setProperties({htmlAttributes:M},!0)}}removelastSelection(v){const M=this.chipCollectionWrapper.querySelectorAll("span."+ln),$=M[M.length-1].getAttribute("data-value");(0,i.le)(this.value)||(this.tempValues=this.value.slice());let fe=this.getFormattedValue($);this.allowCustomValue&&("false"!==$&&!1===fe||!(0,i.le)(fe)&&"NaN"===fe.toString())&&(fe=$),this.removeValue(fe,v),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,v),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()}onActionFailure(v){super.onActionFailure(v),this.renderPopup(),this.onPopupShown()}targetElement(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value}getForQuery(v){let M;const $=(0,i.le)(this.fields.value)?this.fields.text:this.fields.value;for(let fe=0;fe<v.length;fe++)M=0===fe?new u.$G($,"equal",v[fe]):M.or($,"equal",v[fe]);return this.getQuery(this.query).where(M)}onActionComplete(v,M,$,fe){super.onActionComplete(v,M,$),this.updateSelectElementData(this.allowFiltering);const Ce=this;if(!(0,i.le)(this.value)&&!this.allowCustomValue)for(let pt=0;pt<this.value.length;pt++)this.findListElement(this.allowFiltering&&!(0,i.le)(this.mainList)?this.mainList:v,"li","data-value",Ce.value[pt])||(this.value.splice(pt,1),pt-=1);this.updateActionList(v,M,$),this.dataSource instanceof u.hm&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()}updateActionList(v,M,$,fe){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?((0,i.le)(this.mainData)||0===this.mainData.length)&&(this.mainData=M):(this.mainList=v.cloneNode?v.cloneNode(!0):v,this.mainData=M,this.mainListCollection=this.liCollections),(this.remoteCustomValue||M.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof u.hm&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),(0,i.le)(this.setInitialValue)||this.setInitialValue(),(0,i.le)(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!(0,i.le)(this.text)&&((0,i.le)(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))}refreshSelection(){let v,M;const $=this.hideSelectedItem?rs:"e-active";if(!(0,i.le)(this.value))for(let fe=0;!(0,i.le)(this.value[fe]);fe++)if(v=this.value[fe],M=this.findListElement(this.list,"li","data-value",v),M){if((0,i.cn)([M],$),this.hideSelectedItem&&M.previousSibling&&M.previousElementSibling.classList.contains(z_group)&&(!M.nextElementSibling||M.nextElementSibling.classList.contains(z_group))&&(0,i.cn)([M.previousElementSibling],$),this.hideSelectedItem&&this.fields.groupBy&&!M.previousElementSibling.classList.contains(rs)&&this.hideGroupItem(v),this.hideSelectedItem&&M.classList.contains(z_focus)){(0,i.IV)([M],z_focus);const Ce=M.parentElement.querySelectorAll("."+z_li+":not(."+rs+")");Ce.length>0?(0,i.cn)([Ce[0]],z_focus):this.list&&this.list.querySelectorAll("."+z_li).length>0||(this.l10nUpdate(),(0,i.cn)([this.list],z_noData))}if(M.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&M.classList.contains("e-active")){const Ce=M.firstElementChild.getAttribute("aria-checked");((0,i.le)(Ce)||"false"===Ce)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:M,e:null})}}this.checkSelectAll(),this.checkMaxSelection()}hideGroupItem(v){let M,$;const fe=this.hideSelectedItem?rs:"e-active";$=M=this.findListElement(this.ulElement,"li","data-value",v);let Ce=0,pt=0,Mt=!0,wi=!0;do{M&&M.previousElementSibling&&!M.previousElementSibling.classList.contains(rs)&&M.previousElementSibling.classList.contains(z_li)&&(Mt=!1),!Mt||!M||M.previousElementSibling&&M.previousElementSibling.classList.contains(z_group)?Ce=10:M=M.previousElementSibling,$&&$.nextElementSibling&&!$.nextElementSibling.classList.contains(rs)&&$.nextElementSibling.classList.contains(z_li)&&(wi=!1),!wi||!$||$.nextElementSibling&&$.nextElementSibling.classList.contains(z_group)?pt=10:$=$.nextElementSibling}while(Ce<10||pt<10);Mt&&wi&&!M.previousElementSibling.classList.contains(rs)?(0,i.cn)([M.previousElementSibling],fe):Mt&&wi&&M.previousElementSibling.classList.contains(rs)&&(0,i.IV)([M.previousElementSibling],fe)}getValidLi(){let v=this.ulElement.querySelector("li."+z_li+":not(."+rs+")");return(0,i.le)(v)?this.liCollections[0]:v}checkSelectAll(){const v=this.list.querySelectorAll("li.e-list-group-item.e-active").length,M=this.list.querySelectorAll("li.e-list-item"),$=this.list.querySelectorAll("li."+z_li).length;let fe=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!(0,i.le)(this.fields.groupBy)&&(fe-=v),$!==fe&&fe!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?$!==fe&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(let Ce=0;Ce<M.length;Ce++)this.findGroupStart(M[Ce]);this.deselectHeader()}}openClick(v){this.openOnClick||"CheckBox"===this.mode?!this.openOnClick&&"CheckBox"===this.mode&&!this.isPopupOpen()&&this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()}keyUp(v){if("CheckBox"===this.mode&&!this.openOnClick){const $=String.fromCharCode(v.keyCode).match(/\w/);(0,i.le)($)||(this.isValidKey=!0)}this.isValidKey=this.isPopupOpen()&&8===v.keyCode||this.isValidKey,this.isValidKey=(!v.ctrlKey||86!==v.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(v))}filter(v,M,$){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(v,M,$)}getQuery(v){const M=v?v.clone():this.query?this.query.clone():new u.AE;if(this.filterAction){if(null!==this.targetElement()){const $=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof u.hm||"string"!==$)&&"number"!==$){const fe=this.fields;M.where((0,i.le)(fe.text)?"":fe.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else M.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return M}return v||(this.query?this.query:new u.AE)}dataUpdater(v,M,$){if(this.isDataFetched=!1,""===this.targetElement().trim()){const fe=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.allowCustomValue&&0==fe.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.onActionComplete(fe,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(v,$,M),this.allowCustomValue&&(v instanceof u.hm?(this.remoteCustomValue=!0,this.tempQuery=M):this.checkForCustomValue(M,$));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()}checkForCustomValue(v,M){const $=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&$){const fe=this.inputElement.value,Ce=M||this.fields,pt=!(0,i.le)(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if("string"!=typeof pt&&"number"!=typeof pt&&"boolean"!=typeof pt){const Mt={};(0,i.sO)(Ce.text,fe,Mt),"number"==typeof(0,i.NA)(this.fields.value?this.fields.value:"value",pt)?(0,i.sO)(Ce.value,Math.random(),Mt):(0,i.sO)(Ce.value,fe,Mt);const wi=JSON.parse(JSON.stringify(this.listData));wi.splice(0,0,Mt),this.resetList(wi,Ce,v)}else{const Mt=[this.inputElement.value];Mt[0]="number"!=typeof pt||isNaN(parseFloat(Mt[0]))?Mt[0]:parseFloat(Mt[0]),Mt[0]="boolean"==typeof pt?"true"===Mt[0]||"false"!==Mt[0]&&Mt[0]:Mt[0],this.resetList(Mt,Ce)}}this.value&&this.value.length&&this.refreshSelection()}getNgDirective(){return"EJS-MULTISELECT"}wrapperClick(v){if(this.setDynValue=!1,this.enabled){if(v.target===this.overAllClear)return void v.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(v.target&&-1!==v.target.classList.toString().indexOf($n))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&v.target&&v.target.className===Io)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(dn)||this.overAllWrapper.classList.add(dn)))}this.targetElement()&&""!==this.targetElement()||v.preventDefault()}}enable(v){v?(this.overAllWrapper.classList.remove(Cs),this.inputElement.removeAttribute("disabled"),(0,i.Y4)(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(Cs),this.inputElement.setAttribute("disabled","true"),(0,i.Y4)(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==v&&(this.enabled=v),this.hidePopup()}onBlurHandler(v,M){let $;if((0,i.le)(v)||($=v.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains($))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&(0,i.cn)([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&((0,i.le)(this.value)||0===this.value.length)&&(0,i.IV)([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&i.AR.isIE&&!(0,i.le)(v)&&!M)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(dn);if(this.scrollFocusStatus)return(0,i.le)(v)||v.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(dn),this.addTagOnBlur){const fe=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),Ce=this.findListElement(this.list,"li","data-value",fe),pt=this.hideSelectedItem?rs:"e-active";Ce&&!Ce.classList.contains(pt)&&(this.updateListSelection(Ce,v),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(v,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,i.AR.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function bn(xi,v,M,$,fe){xi.classList.remove("e-input-focus");const Ce=v.querySelector("."+tt);M&&M.length<=0&&"Auto"===$&&!(0,i.le)(Ce)&&(Ce.classList.contains(ti)&&(0,i.IV)([Ce],ti),(0,i.cn)([Ce],ci))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!(0,i.le)(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}}checkPlaceholderSize(){if(this.showDropDownIcon){const v=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(v)}else(0,i.le)(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)}setPlaceholderSize(v){(0,i.le)(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(v+10)+"px":(0,i.cn)([this.searchWrapper],to):(0,i.le)(this.value)||(this.searchWrapper.removeAttribute("style"),(0,i.IV)([this.searchWrapper],to))}refreshInputHight(){this.value&&this.value.length||!(0,i.le)(this.text)&&""!==this.text?this.searchWrapper.classList.add(Cn):this.searchWrapper.classList.remove(Cn)}validateValues(v,M){return JSON.stringify(v.slice().sort())!==JSON.stringify(M.slice().sort())}updateValueState(v,M,$){if(this.initStatus&&this.validateValues(M||[],$||[])){const pt={e:v,oldValue:$,value:M,isInteracted:!!v,element:this.element,event:v};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",pt),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}}updateTempValue(){this.tempValues=this.value?this.value.slice():this.value}getPagingCount(){const v=this.list.classList.contains(z_noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(v,10))}pageUpSelection(v){const M=this.list.querySelectorAll("li."+z_li+":not(."+rs+"):not(.e-reorder-hide)"),$=v>=0?M[v+1]:M[0];this.addListFocus($),this.scrollBottom($,this.getIndexByValue($.getAttribute("data-value")))}pageDownSelection(v){this.getItems();const $=this.list.querySelectorAll("li."+z_li+":not(."+rs+"):not(.e-reorder-hide)"),fe=v<=$.length?$[v-1]:$[$.length-1];this.addListFocus(fe),this.scrollBottom(fe,this.getIndexByValue(fe.getAttribute("data-value")))}getItems(){return this.list||super.render(),this.ulElement&&this.ulElement.querySelectorAll("."+z_li).length>0?this.ulElement.querySelectorAll("."+z_li+":not(."+rs+")"):[]}focusInHandler(v){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(Cn),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!v,event:v}),this.focused=!1),this.overAllWrapper.classList.contains(dn)||this.overAllWrapper.classList.add(dn),function Ns(xi,v){xi.classList.add("e-input-focus");const M=v.querySelector("."+tt);(0,i.le)(M)||((0,i.cn)([M],ti),M.classList.contains(ci)&&(0,i.IV)([M],ci))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0)}showDelimWrapper(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(mr)}hideDelimWrapper(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(mr)}expandTextbox(){let v=5;this.placeholder&&(v=v>this.inputElement.placeholder.length?v:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>v?this.inputElement.value.length:v}isPopupOpen(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement}refreshPopup(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())}checkTextLength(){return this.targetElement().length<1}popupKeyActions(v){switch(v.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),v.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),v.preventDefault())}}updateAriaAttribute(){const v=this.list.querySelector("."+z_focus);if(!(0,i.le)(v))if(this.inputElement.setAttribute("aria-activedescendant",v.id),this.allowFiltering){var M=this.popupWrapper.querySelector("."+Eo);M&&M.setAttribute("aria-activedescendant",v.id)}else"CheckBox"==this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",v.id)}homeNavigation(v){this.removeFocus();const M=this.ulElement.querySelectorAll("li."+z_li+":not(."+rs+"):not(.e-reorder-hide)");if(M.length>0){const $=M[v?0:M.length-1];$.classList.add(z_focus),this.scrollBottom($)}}onKeyDown(v){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyCode=v.keyCode,this.keyDownStatus=!0,!(v.keyCode>111&&v.keyCode<124))){if(v.altKey)return void this.popupKeyActions(v);if(this.isPopupOpen()){const M=this.list.querySelector("."+z_focus);let $;switch(v.keyCode){case 36:case 35:this.homeNavigation(36===v.keyCode);break;case 33:return v.preventDefault(),void(M&&(this.getIndexByValue(M.getAttribute("data-value")),this.pageUpSelection($-this.getPagingCount()),this.updateAriaAttribute()));case 34:return v.preventDefault(),void(M&&(this.getIndexByValue(M.getAttribute("data-value")),this.pageDownSelection($+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(v);break;case 40:this.arrowDown(v);break;case 27:return v.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return v.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(v),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(v);case 9:v.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add(dn)}}else switch(v.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return v.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(v),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(v),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup()}}arrowDown(v){v.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains(Eo)||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&i.bi.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()}arrowUp(v){v.preventDefault(),this.keyAction=!0;let M=this.list.querySelectorAll("li."+z_li+":not(."+rs+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!(0,i.le)(this.fields.groupBy)&&(M=this.list.querySelectorAll("li."+z_li+",li."+z_group+":not(."+rs+"):not(.e-reorder-hide)"));const $=this.list.querySelector("li."+z_focus);Array.prototype.slice.call(M).indexOf($)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()}spaceKeySelection(v){"CheckBox"===this.mode&&(document.activeElement.classList.contains(Eo)||(v.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(v)),this.checkPlaceholderSize()}checkBackCommand(v){this.backCommand=8!==v.keyCode||""!==this.targetElement()}keyNavigation(v){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(v.keyCode){case 37:v.preventDefault(),this.moveBy(-1,v);break;case 39:v.preventDefault(),this.moveBy(1,v);break;case 8:this.removelastSelection(v);break;case 46:this.removeSelectedChip(v)}else if(8===v.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){v.preventDefault();const M=this.value[this.value.length-1];this.removeValue(M,v),this.updateDelimeter(this.delimiterChar,v),this.focusAtLastListItem(M)}}selectByKey(v){this.removeChipSelection(),this.selectListByKey(v),this.hideSelectedItem&&this.focusAtFirstListItem()}escapeAction(){const v=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,v)&&("CheckBox"!==this.mode&&(this.value=v,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()}scrollBottom(v,M){const $=this.list.offsetHeight,fe=v.offsetTop+v.offsetHeight-this.list.scrollTop,Ce=this.list.scrollTop+fe-$;let pt=v.offsetTop+v.offsetHeight-this.list.scrollTop;pt=this.fields.groupBy&&!(0,i.le)(this.fixedHeaderElement)?pt-this.fixedHeaderElement.offsetHeight:pt,0===M?this.list.scrollTop=0:fe>$?this.list.scrollTop=Ce:pt>0&&this.list.offsetHeight>pt||(this.list.scrollTop=Ce)}scrollTop(v,M){let $=v.offsetTop-this.list.scrollTop;$=this.fields.groupBy&&!(0,i.o8)(this.fixedHeaderElement)?$-this.fixedHeaderElement.offsetHeight:$;const fe=v.offsetTop+v.offsetHeight-this.list.scrollTop;0===M?this.list.scrollTop=0:$<0?this.list.scrollTop=this.list.scrollTop+$:fe>0&&this.list.offsetHeight>fe||(this.list.scrollTop=v.offsetTop-(this.fields.groupBy&&!(0,i.o8)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}selectListByKey(v){const M=this.list.querySelector("li."+z_focus);let fe,$=this.value&&this.value.length?this.value.length:0;null!==M&&(M.classList.contains("e-active")&&($-=1),this.isValidLI(M)&&$<this.maximumSelectionLength?(this.updateListSelection(M,v),this.addListFocus(M),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,v),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!(0,i.le)(this.fields.groupBy)&&(fe=M.firstElementChild.lastElementChild,this.findGroupStart(fe),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,v),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(M.textContent),this.changeOnBlur||this.updateValueState(v,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(M)&&$<this.maximumSelectionLength&&(fe=M.firstElementChild.lastElementChild,fe.classList.contains("e-check")?this.selectAllItem(!1,v,M):this.selectAllItem(!0,v,M)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()}refreshListItems(v){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){const M=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(M,this.mainData),this.focusAtLastListItem(v),this.value&&this.value.length&&this.refreshSelection()}}removeSelectedChip(v){const M=this.chipCollectionWrapper.querySelector("span."+gr);let $;null!==M&&((0,i.le)(this.value)||(this.tempValues=this.value.slice()),$=M.nextElementSibling,null!==$&&(this.removeChipSelection(),this.addChipSelection($,v)),this.removeValue(M.getAttribute("data-value"),v),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()}moveByTop(v){const M=this.list.querySelectorAll("li."+z_li);let $;M.length>1&&(this.removeFocus(),$=v?0:M.length-1,this.addListFocus(M[$]),this.scrollBottom(M[$],$)),this.updateAriaAttribute()}moveByList(v){if(this.list){let M=this.list.querySelectorAll("li."+z_li+":not(."+rs+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!(0,i.le)(this.fields.groupBy)&&(M=this.list.querySelectorAll("li."+z_li+",li."+z_group+":not(."+rs+"):not(.e-reorder-hide)"));const $=this.list.querySelector("li."+z_focus);let fe=-1;if(M.length){for(let Ce=0;Ce<M.length;Ce++)if(M[Ce]===$){fe=Ce;break}v>0?fe<M.length-1&&(this.removeFocus(),this.addListFocus(M[++fe]),this.updateCheck(M[fe]),this.scrollBottom(M[fe],fe)):fe>0&&(this.removeFocus(),this.addListFocus(M[--fe]),this.updateCheck(M[fe]),this.scrollTop(M[fe],fe))}}}updateCheck(v){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!(0,i.le)(this.fields.groupBy)&&(v.firstElementChild.lastElementChild.classList.contains("e-check")?v.classList.add("e-active"):v.classList.remove("e-active"))}moveBy(v,M){let $;const fe=this.chipCollectionWrapper.querySelectorAll("span."+ln),Ce=this.chipCollectionWrapper.querySelector("span."+gr);null===Ce?v<0&&this.addChipSelection(fe[fe.length-1],M):v<0?($=Ce.previousElementSibling,null!==$&&(this.removeChipSelection(),this.addChipSelection($,M))):($=Ce.nextElementSibling,this.removeChipSelection(),null!==$&&this.addChipSelection($,M))}chipClick(v){if(this.enabled){const M=(0,i.oq)(v.target,"."+ln);this.removeChipSelection(),this.addChipSelection(M,v)}}removeChipSelection(){this.chipCollectionWrapper&&this.removeChipFocus()}addChipSelection(v,M){(0,i.cn)([v],gr),this.trigger("chipSelection",M)}onChipRemove(v){if(3!==v.which&&2!==v.button&&this.enabled&&!this.readonly){const $=v.target.parentElement.getAttribute("data-value");let fe=this.getFormattedValue($);if(this.allowCustomValue&&("false"!==$&&!1===fe||!(0,i.le)(fe)&&"NaN"===fe.toString())&&(fe=$),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(fe,v),(0,i.le)(this.findListElement(this.list,"li","data-value",fe))&&this.mainList&&this.listData){const Ce=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(Ce,this.mainData)}this.updateDelimeter(this.delimiterChar,v),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",v.preventDefault()}}makeTextBoxEmpty(){this.inputElement.value="",this.refreshPlaceHolder()}refreshPlaceHolder(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!(0,i.le)(this.text)&&""!==this.text?"":pn(this.placeholder):this.setFloatLabelType(),this.expandTextbox()}removeAllItems(v,M,$,fe,Ce){let pt=this.value.indexOf(v);const Mt=this.value.slice(0);Mt.splice(pt,1),this.setProperties({value:[].concat([],Mt)},!0),fe.setAttribute("aria-selected","false"),(0,i.IV)([fe],this.hideSelectedItem?rs:"e-active"),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:fe,e:this,index:pt}),this.invokeCheckboxSelection(fe,M,$),this.updateMainList(!0,v,Ce),this.updateChipStatus()}invokeCheckboxSelection(v,M,$){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:v,e:M}),(0,i.Y4)(this.inputElement,{"aria-activedescendant":v.id}),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!$&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})}removeValue(v,M,$,fe){let Ce=this.value.indexOf(this.getFormattedValue(v));-1===Ce&&this.allowCustomValue&&!(0,i.le)(v)&&(Ce=this.value.indexOf(v.toString()));const pt=M&&M.target;fe=!!(fe||pt&&pt.classList.contains("e-close-hooker"))||null;const Mt=this.hideSelectedItem?rs:"e-active";if(-1!==Ce){const wi=this.findListElement(this.list,"li","data-value",v),Gi=this.getDataByValue(v);this.trigger("removing",{e:M,item:wi,itemData:Gi,isInteracted:!!M,cancel:!1},sn=>{if(sn.cancel)this.removeIndex++;else{const ts=this.value.slice(0);if(ts.splice(Ce,1),this.setProperties({value:[].concat([],ts)},!0),null!==wi){const ht=this.findListElement(this.mainList,"li","data-value",v);wi.setAttribute("aria-selected","false"),(0,i.IV)([wi],Mt),ht&&(ht.setAttribute("aria-selected","false"),(0,i.IV)([wi,ht],Mt)),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:wi,e:this,index:Ce}),this.invokeCheckboxSelection(wi,M,fe)}if(this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(v),this.hideSelectedItem&&this.fixedHeaderElement&&this.fields.groupBy&&"CheckBox"!==this.mode&&this.isPopupOpen()&&super.scrollStop(),this.updateMainList(!0,v),this.removeChip(v),this.updateChipStatus(),(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength){const ht=this.list.querySelectorAll("li."+z_li+":not(.e-active)");(0,i.IV)(ht,"e-disable")}this.trigger("removed",sn);const Sn=M&&M.currentTarget,Ws=!(!Sn||!Sn.classList.contains("e-selectall-parent"))||null;!this.changeOnBlur&&!fe&&M&&$&&!Ws&&this.updateValueState(M,this.value,this.tempValues),$&&(this.selectAllEventData.push(Gi),this.selectAllEventEle.push(wi)),1===$&&(this.changeOnBlur||this.updateValueState(M,this.value,this.tempValues),this.trigger("selectedAll",{event:M,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!M,isChecked:!1}),this.selectAllEventData=[],this.selectAllEventEle=[]),fe&&(1===$||null===$)&&this.clearAllCallback(M,fe)}})}}updateMainList(v,M,$){if(this.allowFiltering||"CheckBox"===this.mode){const fe=$||this.findListElement(this.mainList,"li","data-value",M);fe&&(v?(fe.setAttribute("aria-selected","false"),(0,i.IV)([fe],this.hideSelectedItem?rs:"e-active"),"CheckBox"===this.mode&&(fe.firstElementChild.setAttribute("aria-checked","false"),(0,i.IV)([fe.firstElementChild.lastElementChild],"e-check"))):(fe.setAttribute("aria-selected","true"),(0,i.cn)([fe],this.hideSelectedItem?rs:"e-active"),"CheckBox"===this.mode&&(fe.firstElementChild.setAttribute("aria-checked","true"),(0,i.cn)([fe.firstElementChild.lastElementChild],"e-check"))))}}removeChip(v){if(this.chipCollectionWrapper){const M=this.findListElement(this.chipCollectionWrapper,"span","data-value",v);M&&(0,i.Od)(M)}}setWidth(v){(0,i.le)(v)||("number"==typeof v?this.overAllWrapper.style.width=(0,i.Ac)(v):"string"==typeof v&&(this.overAllWrapper.style.width=v.match(/px|%|em/)?v:(0,i.Ac)(v)))}updateChipStatus(){this.value&&this.value.length?((0,i.le)(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper(),this.showOverAllClear()):((0,i.le)(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),(0,i.le)(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())}addValue(v,M,$){this.value||(this.value=[]),this.value.indexOf(v)<0&&this.setProperties({value:[].concat([],this.value,[v])},!0);const fe=this.findListElement(this.list,"li","data-value",v);this.removeFocus(),fe&&(this.addListFocus(fe),this.addListSelection(fe)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(M,v,$),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(v),this.updateChipStatus(),this.checkMaxSelection()}checkMaxSelection(){if((this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength){const M=this.list.querySelectorAll("li."+z_li+":not(.e-active)");(0,i.cn)(M,"e-disable")}}dispatchSelect(v,M,$,fe,Ce){const pt=this.listData;if(this.initStatus&&!fe){const Mt=this.getDataByValue(v);this.trigger("select",{e:M,item:$,itemData:Mt,isInteracted:!!M,cancel:!1},Gi=>{Gi.cancel||(Ce&&(this.selectAllEventData.push(Mt),this.selectAllEventEle.push($)),1===Ce&&(this.trigger("selectedAll",{event:M,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!M,isChecked:!0}),this.selectAllEventData=[]),this.allowCustomValue&&this.isServerRendered&&this.listData!==pt&&(this.listData=pt),this.updateListSelectEventCallback(v,$,M),this.hideSelectedItem&&this.fixedHeaderElement&&this.fields.groupBy&&"CheckBox"!==this.mode&&super.scrollStop())})}}addChip(v,M,$){this.chipCollectionWrapper&&this.getChip(v,M,$)}removeChipFocus(){const v=this.chipCollectionWrapper.querySelectorAll("span."+ln),M=this.chipCollectionWrapper.querySelectorAll("span."+$n.split(" ")[0]);if((0,i.IV)(v,gr),i.AR.isDevice)for(let $=0;$<M.length;$++)M[$].style.display="none"}onMobileChipInteraction(v){const M=(0,i.oq)(v.target,"."+ln),$=M.querySelector("span."+$n.split(" ")[0]);this.enabled&&!this.readonly&&(M.classList.contains(gr)||(this.removeChipFocus(),$.style.display="",M.classList.add(gr)),this.refreshPopup(),v.preventDefault())}multiCompiler(v){let M=!1;if(v)try{M=!!(0,i.td)(v,document).length}catch{M=!1}return M}getChip(v,M,$){let fe={text:M,value:M};const Ce=this.createElement("span",{className:ln,attrs:{"data-value":M,title:v}});let pt;const Mt=this.createElement("span",{className:"e-chipcontent"}),wi=this.createElement("span",{className:$n});if(this.mainData&&(fe=this.getDataByValue(M)),this.valueTemplate&&!(0,i.le)(fe)){pt=this.multiCompiler(this.valueTemplate)?(0,i.MY)((0,i.Ys)(this.valueTemplate,document).innerHTML.trim()):(0,i.MY)(this.valueTemplate);let sn=pt(fe,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,Mt);if(sn&&sn.length>0)for(let ts=0;ts<sn.length;ts++)Mt.appendChild(sn[ts]);this.renderReactTemplates()}else this.enableHtmlSanitizer?Mt.innerText=v:Mt.innerHTML=v;Ce.appendChild(Mt);const Gi={isInteracted:!!$,itemData:fe,e:$,setClass:Vi=>{(0,i.cn)([Ce],Vi)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",Gi,Vi=>{Vi.cancel||(i.AR.isDevice?(Ce.classList.add("e-mob-chip"),(0,i.R3)([wi],Ce),wi.style.display="none",i.bi.add(Ce,"click",this.onMobileChipInteraction,this)):(i.bi.add(Ce,"mousedown",this.chipClick,this),this.showClearButton&&Ce.appendChild(wi)),i.bi.add(wi,"mousedown",this.onChipRemove,this),this.chipCollectionWrapper.appendChild(Ce),!this.changeOnBlur&&$&&this.updateValueState($,this.value,this.tempValues))})}calcPopupWidth(){let v=(0,i.Ac)(this.popupWidth);return v.indexOf("%")>-1&&(v=(this.componentWrapper.offsetWidth*parseFloat(v)/100).toString()+"px"),v}mouseIn(){this.enabled&&!this.readonly&&this.showOverAllClear()}mouseOut(){this.inputFocus||(this.overAllClear.style.display="none")}listOption(v,M){const $=!(0,i.le)(M.iconCss),fe=(0,i.le)(M.properties)?M:M.properties;return this.listCurrentOptions=null!==M.text||null!==M.value?{fields:fe,showIcon:$,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},(0,i.l7)(this.listCurrentOptions,this.listCurrentOptions,M,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:v,fieldProperty:fe}),this.listCurrentOptions}renderPopup(){if(this.list||super.render(),!this.popupObj){document.body.appendChild(this.popupWrapper);const v=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&v&&this.filterParent&&(v.remove(),this.filterParent=null);let M=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),M-=this.header.offsetHeight),(0,i.R3)([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),M-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),M-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"===this.mode&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),M=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(M-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(M-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),M=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){const $={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",$),M-=this.searchBoxHeight),(0,i.cn)([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=(0,i.Ac)(M),this.popupWrapper.style.maxHeight=(0,i.Ac)(this.popupHeight)):this.list.style.maxHeight=(0,i.Ac)(this.popupHeight),this.popupObj=new Zt.GI(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:()=>{if(this.popupObj.element.parentElement){this.popupObj.unwireScrollEvents();const $=this.popupWrapper.querySelector("."+Eo);"CheckBox"===this.mode&&$&&document.activeElement===$&&$.blur(),(0,i.og)(this.popupObj.element)}},open:()=>{if(this.popupObj.resolveCollision(),!this.isFirstClick){const $=this.list.querySelector("ul");$&&("CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||(this.mainList=$.cloneNode?$.cloneNode(!0):$)),this.isFirstClick=!0}this.popupObj.wireScrollEvents(),"CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||this.loadTemplate(),this.setScrollPosition(),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})},targetExitViewport:()=>{i.AR.isDevice||this.hidePopup()}}),"CheckBox"===this.mode&&i.AR.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}}setHeaderTemplate(){let v;this.header&&this.header.remove(),this.header=this.createElement("div"),(0,i.cn)([this.header],"e-ddl-header"),v=this.multiCompiler(this.headerTemplate)?(0,i.MY)((0,i.Ys)(this.headerTemplate,document).innerHTML.trim()):(0,i.MY)(this.headerTemplate);let $=v({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if($&&$.length>0)for(let fe=0;fe<$.length;fe++)this.header.appendChild($[fe]);"CheckBox"===this.mode&&this.showSelectAll?(0,i.Ce)([this.header],this.popupWrapper):(0,i.R3)([this.header],this.popupWrapper),i.bi.add(this.header,"mousedown",this.onListMouseDown,this)}setFooterTemplate(){let v;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),(0,i.cn)([this.footer],"e-ddl-footer"),v=this.multiCompiler(this.footerTemplate)?(0,i.MY)((0,i.Ys)(this.footerTemplate,document).innerHTML.trim()):(0,i.MY)(this.footerTemplate);let $=v({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if($&&$.length>0)for(let fe=0;fe<$.length;fe++)this.footer.appendChild($[fe]);(0,i.R3)([this.footer],this.popupWrapper),i.bi.add(this.footer,"mousedown",this.onListMouseDown,this)}clearAll(v){if(this.enabled&&!this.readonly){let M;if(this.value&&this.value.length>0){const $=this.list&&this.list.querySelectorAll("li.e-list-item");if($&&$.length>0)this.selectAllItems(!1,v);else for(this.removeIndex=0,M=this.value[this.removeIndex];this.removeIndex<this.value.length;M=this.value[this.removeIndex])this.removeValue(M,v,null,!0)}else this.clearAllCallback(v)}}clearAllCallback(v,M){const $=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){const fe=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(fe,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,v),"Box"!==this.mode&&(!this.inputFocus||"CheckBox"===this.mode)&&this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(v,this.value,$),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&M&&((0,i.le)(this.value)||0===this.value.length)&&this.updateValueState(v,this.value,this.tempValues)),!this.changeOnBlur&&M&&((0,i.le)(this.value)||0===this.value.length)&&this.updateValueState(v,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!(0,i.le)(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),v.preventDefault()}windowResize(){this.refreshPopup(),(!this.inputFocus||"CheckBox"===this.mode)&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()}resetValueHandler(v){const M=(0,i.oq)(this.inputElement,"form");if(M&&v.target===M){const $=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=$}}wireEvent(){i.bi.add(this.componentWrapper,"mousedown",this.wrapperClick,this),i.bi.add(window,"resize",this.windowResize,this),i.bi.add(this.inputElement,"focus",this.focusInHandler,this),i.bi.add(this.inputElement,"keydown",this.onKeyDown,this),i.bi.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&i.bi.add(this.inputElement,"input",this.onInput,this),i.bi.add(this.inputElement,"blur",this.onBlurHandler,this),i.bi.add(this.componentWrapper,"mouseover",this.mouseIn,this);const v=(0,i.oq)(this.inputElement,"form");v&&i.bi.add(v,"reset",this.resetValueHandler,this),i.bi.add(this.componentWrapper,"mouseout",this.mouseOut,this),i.bi.add(this.overAllClear,"mouseup",this.clearAll,this),i.bi.add(this.inputElement,"paste",this.pasteHandler,this)}onInput(v){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,i.AR.isDevice&&"mozilla"===i.AR.info.name&&this.search(v)}pasteHandler(v){setTimeout(()=>{this.expandTextbox(),this.search(v)})}search(v){if((0,i.le)(v)||(this.keyCode=v.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(v),!this.checkTextLength()||this.allowFiltering||(0,i.le)(v)||8===v.keyCode){const M=this.targetElement();if(this.allowFiltering){const $={preventDefaultAction:!1,text:this.targetElement(),updateData:(fe,Ce,pt)=>{$.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(fe,Ce,pt))},event:v,cancel:!1};this.trigger("filtering",$,fe=>{fe.cancel||!this.isFiltered&&!fe.preventDefaultAction&&(this.filterAction=!0,this.dataUpdater(this.dataSource,null,this.fields))})}else if(this.allowCustomValue){let $=new u.AE;$=""!==M?$.where(this.fields.text,"startswith",M,this.ignoreCase,this.ignoreAccent):$,this.dataUpdater(this.mainData,$,this.fields)}else{const $=this.list.querySelectorAll("li."+z_li+":not(.e-hide-listitem)"),fe=Oe(this.targetElement(),$,"StartsWith",this.ignoreCase);fe&&null!==fe.item?(this.addListFocus(fe.item),this.list.scrollTop=fe.item.offsetHeight*fe.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()}preRender(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),super.preRender()}getLocaleName(){return"multi-select"}initializeData(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0}updateData(v,M){let $="";const fe="Delimiter"===this.mode||"CheckBox"===this.mode,Ce=[];let pt;const Mt=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!(0,i.le)(this.value))for(let Vi=0;!(0,i.le)(this.value[Vi]);Vi++){const sn=this.findListElement((0,i.le)(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[Vi]);(0,i.le)(sn)&&!this.allowCustomValue?(this.value.splice(Vi,1),Vi-=1):(pt=this.listData?this.getTextByValue(this.value[Vi]):this.value[Vi],$+=pt+v+" ",Ce.push(pt)),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[Vi]+'">'+Vi+"</option>"}this.setProperties({text:Ce.toString()},!0),fe&&(this.updateWrapperText(this.delimiterWrapper,$),this.delimiterWrapper.setAttribute("id",(0,i.QI)("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id));const wi=M&&M.target,Gi=!(!wi||!wi.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&M&&!Gi||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(M,this.value,this.tempValues)),this.listData=Mt,this.addValidInputClass()}initialTextUpdate(){if((0,i.le)(this.text))this.setProperties({value:null},!0);else{const v=this.text.split(this.delimiterChar),M=[];for(let $=0;v.length>$;$++){const fe=this.getValueByText(v[$]);(0,i.le)(fe)?this.allowCustomValue&&M.push(v[$]):M.push(fe)}M&&M.length&&this.setProperties({value:M},!0)}}renderList(v){!v&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(v=!0),super.render(v),this.unwireListEvents(),this.wireListEvents()}initialValueUpdate(){if(this.list){let v,M,$;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!(0,i.le)(this.value))for(let fe=0;!(0,i.le)(this.value[fe]);fe++)if($=this.value[fe],M=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",$),v=this.getTextByValue($),M&&"true"!==M.getAttribute("aria-selected")||M&&"true"===M.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(v,$),this.addListSelection(M);else if($&&this.allowCustomValue){const Ce=this.listData.length,pt={};(0,i.sO)(this.fields.text,$,pt),(0,i.sO)(this.fields.value,$,pt);const Mt=this.popupWrapper.querySelector(".e-nodata");this.addItem(pt,Ce),M=M||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",$),this.popupWrapper.contains(Mt)&&(this.list.setAttribute("style",Mt.getAttribute("style")),this.popupWrapper.replaceChild(this.list,Mt),this.wireListEvents()),this.addChip(v,$),this.addListSelection(M)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"===this.mode&&this.showSelectAll&&((0,i.le)(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper()}}updateActionCompleteData(v,M){this.value&&this.value.indexOf(v.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,this.hideSelectedItem&&(0,i.cn)([v],rs))}updateAddItemList(v,M){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&v?(this.list=v,this.mainList=this.ulElement=v.querySelector("ul"),(0,i.Od)(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=v,this.mainList=this.ulElement=v.querySelector("ul"))}updateDataList(){if(this.mainList&&this.ulElement){let M=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,$=this.itemTemplate&&this.ulElement.childElementCount>0&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(this.mainList.childElementCount<this.ulElement.childElementCount||M||$)&&(this.mainList=this.ulElement)}}isValidLI(v){return v&&!v.classList.contains("e-disabled")&&!v.classList.contains(z_group)&&v.classList.contains(z_li)}updateListSelection(v,M,$){const fe=v.getAttribute("data-value");let Ce=this.getFormattedValue(fe);this.allowCustomValue&&("false"!==fe&&!1===Ce||!(0,i.le)(Ce)&&"NaN"===Ce.toString())&&(Ce=fe),this.removeHover(),this.value&&-1!==this.value.indexOf(Ce)?this.removeValue(Ce,M,$):this.dispatchSelect(Ce,M,v,"true"===v.getAttribute("aria-selected"),$)}updateListSelectEventCallback(v,M,$){const fe=this.getTextByValue(v);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",v))this.remoteCustomValue=!1,this.addValue(v,fe,$);else{const Ce=M.cloneNode(!0),pt=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&"number"==typeof(0,i.NA)(pt,this.mainData[0])&&(v=isNaN(parseFloat(v.toString()))?v:parseFloat(v.toString()));const Mt=this.getDataByValue(v);this.trigger("customValueSelection",{newData:Mt,cancel:!1},Gi=>{Gi.cancel||((0,i.R3)([Ce],this.mainList),this.mainData.push(Mt),this.remoteCustomValue=!1,this.addValue(v,fe,$))})}}removeListSelection(){const v=this.hideSelectedItem?rs:"e-active",M=this.list.querySelectorAll("."+v);let $=M.length;if(M&&M.length)for((0,i.IV)(M,v);$>0;)M[$-1].setAttribute("aria-selected","false"),$--;if(!(0,i.le)(this.mainList)){const fe=this.mainList.querySelectorAll("."+v);let Ce=fe.length;if(fe&&fe.length)for((0,i.IV)(fe,v);Ce>0;)fe[Ce-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(M&&M.length>Ce-1&&(M[Ce-1].firstElementChild.setAttribute("aria-checked","false"),(0,i.IV)([M[Ce-1].firstElementChild.lastElementChild],"e-check")),fe[Ce-1].firstElementChild.setAttribute("aria-checked","false"),(0,i.IV)([fe[Ce-1].firstElementChild.lastElementChild],"e-check")),Ce--}}removeHover(){const v=this.list.querySelectorAll(".e-hover");v&&v.length&&(0,i.IV)(v,"e-hover")}removeFocus(){if(this.list&&this.mainList){const v=this.list.querySelectorAll("."+z_focus),M=this.mainList.querySelectorAll("."+z_focus);v&&v.length&&((0,i.IV)(v,z_focus),(0,i.IV)(M,z_focus))}}addListHover(v){(this.enabled&&this.isValidLI(v)||null!==v&&v.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!(0,i.le)(this.fields.groupBy))&&(this.removeHover(),(0,i.cn)([v],"e-hover"))}addListFocus(v){this.enabled&&this.isValidLI(v)?(this.removeFocus(),(0,i.cn)([v],z_focus)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!(0,i.le)(this.fields.groupBy)&&(0,i.cn)([v],z_focus)}addListSelection(v,M){const $=this.hideSelectedItem?rs:"e-active";if(this.isValidLI(v)&&!v.classList.contains("e-hover")){if((0,i.cn)([v],$),this.updateMainList(!1,v.getAttribute("data-value"),M),v.setAttribute("aria-selected","true"),"CheckBox"===this.mode){const fe=v.firstElementChild.getAttribute("aria-checked");("false"===fe||(0,i.le)(fe))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:v,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:v,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),(0,i.Y4)(this.inputElement,{"aria-activedescendant":v.id})}}updateDelimeter(v,M){this.updateData(v,M)}onMouseClick(v){this.keyCode=null,this.scrollFocusStatus=!1;let M=v.target;const $=(0,i.oq)(M,"."+z_li);if((0,i.oq)(M,"."+z_group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)M=M.classList.contains("e-list-group-item")?M.firstElementChild.lastElementChild:v.target,M.classList.contains("e-check")?(this.selectAllItem(!1,v),M.classList.remove("e-check"),M.classList.remove("e-stop"),(0,i.oq)(M,".e-list-group-item").classList.remove("e-active"),M.setAttribute("aria-selected","false")):(this.selectAllItem(!0,v),M.classList.remove("e-stop"),M.classList.add("e-check"),(0,i.oq)(M,".e-list-group-item").classList.add("e-active"),M.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI($)){let Ce=this.value&&this.value.length?this.value.length:0;$.classList.contains("e-active")&&(Ce-=1),Ce<this.maximumSelectionLength&&(this.updateListSelection($,v),this.checkPlaceholderSize(),this.addListFocus($),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem($.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(()=>{this.updateDelimeter(this.delimiterChar,v)},0):this.updateDelimeter(this.delimiterChar,v),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,v),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():v.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(M),"CheckBox"!==this.mode&&this.refreshListItems((0,i.le)($)?null:$.textContent)}else v.preventDefault();this.refreshPlaceHolder(),this.deselectHeader()}}findGroupStart(v){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!(0,i.le)(this.fields.groupBy)){let Ce;if(this.itemTemplate&&!v.getElementsByClassName("e-frame").length)for(;!v.getElementsByClassName("e-frame").length;)v=v.parentElement;for(v.classList.contains("e-frame")&&(v=v.parentElement.parentElement),Ce=this.findGroupAttrtibutes(v,0,0,0,0),Ce=this.findGroupAttrtibutes(v,Ce[0],Ce[1],Ce[2],1);!v.classList.contains("e-list-group-item")&&(v.classList.contains("e-list-icon")&&(v=v.parentElement),null!=(v=v.previousElementSibling)););this.updateCheckBox(v,Ce[0],Ce[1],Ce[2])}}findGroupAttrtibutes(v,M,$,fe,Ce){for(;!v.classList.contains("e-list-group-item")&&(v.classList.contains("e-list-icon")&&(v=v.parentElement),v.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&v.classList.contains("e-list-item")?M++:v.classList.contains("e-list-item")&&$++,fe++,null!=(v=Ce?v.nextElementSibling:v.previousElementSibling)););return[M,$,fe]}updateCheckBox(v,M,$,fe){if(null===v)return;const Ce=v.getElementsByClassName("e-frame")[0];fe===M?(Ce.classList.remove("e-stop"),Ce.classList.add("e-check"),(0,i.oq)(Ce,".e-list-group-item").classList.add("e-active"),v.setAttribute("aria-selected","true")):fe===$?(Ce.classList.remove("e-check"),Ce.classList.remove("e-stop"),(0,i.oq)(Ce,".e-list-group-item").classList.remove("e-active"),v.setAttribute("aria-selected","false")):this.maximumSelectionLength===M-1?(Ce.classList.remove("e-stop"),v.setAttribute("aria-selected","true"),(0,i.oq)(Ce,".e-list-group-item").classList.add("e-active"),Ce.classList.add("e-check")):(Ce.classList.remove("e-check"),Ce.classList.add("e-stop"),(0,i.oq)(Ce,".e-list-group-item").classList.add("e-active"),v.setAttribute("aria-selected","false"))}deselectHeader(){const v=this.value&&this.value.length?this.value.length:0,M=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");v<this.maximumSelectionLength&&(0,i.IV)(M,"e-disable"),v===this.maximumSelectionLength&&(0,i.cn)(M,"e-disable")}onMouseOver(v){let M=(0,i.oq)(v.target,"."+z_li);null===M&&"CheckBox"===this.mode&&!(0,i.le)(this.fields.groupBy)&&this.enableGroupCheckBox&&(M=(0,i.oq)(v.target,"."+z_group)),this.addListHover(M)}onMouseLeave(){this.removeHover()}onListMouseDown(v){v.preventDefault(),this.scrollFocusStatus=!0}onDocumentClick(v){if("CheckBox"!==this.mode){const M=v.target;this.scrollFocusStatus=!!(!(0,i.le)(this.popupObj)&&(0,i.oq)(M,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(v.target))&&(i.AR.isIE||"edge"===i.AR.info.name)&&document.activeElement===this.inputElement}}wireListEvents(){(0,i.le)(this.list)||(i.bi.add(document,"mousedown",this.onDocumentClick,this),i.bi.add(this.list,"mousedown",this.onListMouseDown,this),i.bi.add(this.list,"mouseup",this.onMouseClick,this),i.bi.add(this.list,"mouseover",this.onMouseOver,this),i.bi.add(this.list,"mouseout",this.onMouseLeave,this))}unwireListEvents(){i.bi.remove(document,"mousedown",this.onDocumentClick),this.list&&(i.bi.remove(this.list,"mousedown",this.onListMouseDown),i.bi.remove(this.list,"mouseup",this.onMouseClick),i.bi.remove(this.list,"mouseover",this.onMouseOver),i.bi.remove(this.list,"mouseout",this.onMouseLeave))}hideOverAllClear(){(!this.value||!this.value.length||""===this.inputElement.value)&&(this.overAllClear.style.display="none")}showOverAllClear(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"}focusIn(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()}focusOut(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()}showSpinner(){if((0,i.le)(this.spinnerElement)){let v=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||v?this.spinnerElement=v||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:ro+" "+Vn}),this.componentWrapper.appendChild(this.spinnerElement)),(0,Zt.rj)({target:this.spinnerElement,width:i.AR.isDevice?"16px":"14px"},this.createElement),(0,i.cn)([this.spinnerElement],Bi),(0,Zt.yh)(this.spinnerElement)}}hideSpinner(){(0,i.le)(this.spinnerElement)||((0,Zt.v3)(this.spinnerElement),(0,i.IV)([this.spinnerElement],Bi),this.spinnerElement.classList.contains(Vn)?(0,i.og)(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}updateWrapperText(v,M){this.valueTemplate||!this.enableHtmlSanitizer?v.innerHTML=M:v.innerText=i.pJ.sanitize(M)}updateDelimView(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(sr),this.value&&this.value.length){let M,$,Ce,pt,wi,v="",fe=1,Mt=0;this.updateWrapperText(this.viewWrapper,v);const Gi={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};let Vi=new i.E7(this.getLocaleName(),Gi,this.locale);""===Vi.getConstant("actionFailureTemplate")&&(Vi=new i.E7("dropdowns",Gi,this.locale)),""===Vi.getConstant("noRecordsTemplate")&&(Vi=new i.E7("dropdowns",Gi,this.locale));const sn=Vi.getConstant("overflowCountTemplate"),ts=Vi.getConstant("totalCountTemplate"),wn=this.createElement("span",{className:"e-remain"});let Sn=sn.replace("${count}",this.value.length.toString());wn.innerText=Sn,this.viewWrapper.appendChild(wn),this.renderReactTemplates();const Ws=wn.offsetWidth;if((0,i.Od)(wn),this.showDropDownIcon&&(Mt=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!(0,i.le)(this.value))for(let ht=0;!(0,i.le)(this.value[ht]);ht++){if(v+=0===ht?"":this.delimiterChar+" ",M=this.getOverflowVal(ht),v+=M,M=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,v),Ce=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),wi=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),Ce+Mt+this.clearIconWidth>wi){for(void 0!==$&&""!==$&&(M=$,ht=fe+1),this.updateWrapperText(this.viewWrapper,M),pt=this.value.length-ht,Ce=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);Ce+Ws+Mt+this.clearIconWidth>wi&&0!==Ce&&""!==this.viewWrapper.innerHTML;)this.viewWrapper.innerHTML=[].join(this.delimiterChar),pt=this.value.length,Ce=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);break}Ce+Ws+Mt+this.clearIconWidth<=wi?($=v,fe=ht):0===ht&&($="",fe=-1)}if(pt>0){const ht=wi-Mt-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(wn,this.viewWrapper,pt,sn,ts,ht)),this.updateRemainWidth(this.viewWrapper,ht),this.updateRemainingText(wn,Mt,pt,sn,ts)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"}checkClearIconWidth(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)}updateRemainWidth(v,M){v.classList.contains(sr)&&M<v.offsetWidth+parseInt(window.getComputedStyle(v).paddingLeft,10)+parseInt(window.getComputedStyle(v).paddingLeft,10)&&(v.style.width=M+"px")}updateRemainTemplate(v,M,$,fe,Ce,pt){M.firstChild&&3===M.firstChild.nodeType&&""===M.firstChild.nodeValue&&M.removeChild(M.firstChild),v.innerHTML="";let Mt=fe.replace("${count}",$.toString()),wi=Ce.replace("${count}",$.toString());return v.innerText=M.firstChild&&3===M.firstChild.nodeType?Mt:wi,M.firstChild&&3===M.firstChild.nodeType?M.classList.remove(sr):(M.classList.add(sr),this.updateRemainWidth(M,pt)),v}updateRemainingText(v,M,$,fe,Ce){const pt=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10);let Mt=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(Mt+M>=pt&&0!==Mt&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;Mt+M>pt&&0!==Mt&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){const Gi=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);Gi.pop(),this.viewWrapper.firstChild.nodeValue=Gi.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),$++,Mt=this.viewWrapper.offsetWidth}this.updateRemainTemplate(v,this.viewWrapper,$,fe,Ce,pt-M)}}getOverflowVal(v){let M;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){const $=this.listData;this.listData=this.mainData,M=this.getTextByValue(this.value[v]),this.listData=$}else M=this.getTextByValue(this.value[v]);else M=this.value[v];return M}unWireEvent(){i.bi.remove(this.componentWrapper,"mousedown",this.wrapperClick),i.bi.remove(window,"resize",this.windowResize),i.bi.remove(this.inputElement,"focus",this.focusInHandler),i.bi.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&i.bi.remove(this.inputElement,"input",this.onInput),i.bi.remove(this.inputElement,"keyup",this.keyUp);const v=(0,i.oq)(this.inputElement,"form");v&&i.bi.remove(v,"reset",this.resetValueHandler),i.bi.remove(this.inputElement,"blur",this.onBlurHandler),i.bi.remove(this.componentWrapper,"mouseover",this.mouseIn),i.bi.remove(this.componentWrapper,"mouseout",this.mouseOut),i.bi.remove(this.overAllClear,"mousedown",this.clearAll),i.bi.remove(this.inputElement,"paste",this.pasteHandler)}selectAllItem(v,M,$){let fe;if(fe=this.list.querySelectorAll(v?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&M&&M.target&&(0,i.oq)(M.target,".e-close-hooker")&&this.allowFiltering&&(fe=this.mainList.querySelectorAll(v?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!(0,i.le)(this.fields.groupBy)){let Ce=M?this.groupTemplate?(0,i.oq)(M.target,".e-list-group-item"):M.target:null;if(Ce=M&&32===M.keyCode?$:Ce,Ce=Ce&&Ce.classList.contains("e-frame")?Ce.parentElement.parentElement:Ce,Ce&&Ce.classList.contains("e-list-group-item")){let pt=Ce.nextElementSibling;if((0,i.le)(pt))return;for(;pt.classList.contains("e-list-item");){if(v){if(!pt.firstElementChild.lastElementChild.classList.contains("e-check")){let Mt=this.value&&this.value.length?this.value.length:0;pt.classList.contains("e-active")&&(Mt-=1),Mt<this.maximumSelectionLength&&this.updateListSelection(pt,M)}}else pt.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(pt,M);if(pt=pt.nextElementSibling,null==pt)break}if(Ce.classList.contains("e-list-group-item")){const Mt=this.list.getElementsByClassName("e-item-focus")[0];Mt&&Mt.classList.remove("e-item-focus"),v?Ce.classList.add("e-active"):Ce.classList.remove("e-active"),Ce.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&M&&this.updateValueState(M,this.value,this.tempValues)}else this.updateValue(M,fe,v)}else this.updateValue(M,fe,v)}updateValue(v,M,$){const fe=M.length,Ce={event:v,items:$?M:[],itemData:$?this.listData:[],isInteracted:!!v,isChecked:$,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",Ce),M&&M.length){let pt=0,Mt=0;if(Mt=this.enableGroupCheckBox?$?this.maximumSelectionLength-(this.value?this.value.length:0):M.length:$?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,Ce.preventSelectEvent){for(let Gi=0;Gi<M.length&&Gi<Mt;Gi++){this.removeHover();let Vi=M[Gi].getAttribute("data-value"),sn=this.getFormattedValue(Vi),ts=this.mainList?this.mainList.querySelectorAll($?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[Gi]:null;$?(this.value=this.value?this.value:[],this.value.indexOf(sn)<0&&this.setProperties({value:[].concat([],this.value,[sn])},!0),this.removeFocus(),this.addListSelection(M[Gi],ts),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(sn,v,!1,M[Gi],ts),this.enableGroupCheckBox&&this.findGroupStart(M[Gi])}if(!$&&(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength){const Vi=this.list.querySelectorAll("li."+z_li+":not(.e-active)");(0,i.IV)(Vi,"e-disable")}this.trigger("selectedAll",{event:v,items:$?M:[],itemData:$?this.listData:[],isInteracted:!!v,isChecked:$})}else{for(;pt<fe&&pt<=50&&pt<Mt;)this.updateListSelection(M[pt],v,fe-pt),this.enableGroupCheckBox&&this.findGroupStart(M[pt]),pt++;fe>50&&setTimeout(()=>{for(;pt<fe&&pt<Mt;)this.updateListSelection(M[pt],v,fe-pt),this.enableGroupCheckBox&&this.findGroupStart(M[pt]),pt++;this.updatedataValueItems(v),this.changeOnBlur||(this.updateValueState(v,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement()},0)}}this.updatedataValueItems(v),this.checkPlaceholderSize(),fe<=50&&!Ce.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(v,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())}updateHiddenElement(){let v="",M="",$="";const fe=[];"CheckBox"===this.mode&&(this.value.map((Ce,pt)=>{v+='<option selected value ="'+Ce+'">'+pt+"</option>",$=this.listData?this.getTextByValue(Ce):Ce,M+=$+this.delimiterChar+" ",fe.push($)}),this.hiddenElement.innerHTML=v,this.updateWrapperText(this.delimiterWrapper,M),this.delimiterWrapper.setAttribute("id",(0,i.QI)("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id),this.setProperties({text:fe.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())}updatedataValueItems(v){this.deselectHeader(),this.textboxValueUpdate(v)}textboxValueUpdate(v){const M=v&&v.target&&((0,i.oq)(v.target,".e-selectall-parent")||(0,i.oq)(v.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||M)?this.searchWrapper.classList.remove(Cn):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),M||this.isSelectAll||this.updateDelimeter(this.delimiterChar,v),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,v),this.refreshPlaceHolder()}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}updateDataSource(v){(0,i.le)(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())}onLoadSelect(){this.setDynValue=!0,this.renderPopup()}selectAllItems(v,M){(0,i.le)(this.list)?(this.selectAllAction=()=>{"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:v?"check":"uncheck"}),this.selectAllItem(v,M),this.selectAllAction=null},super.render()):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:v?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(v,M))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(v,M){(v.dataSource&&!(0,i.le)(Object.keys(v.dataSource))||v.query&&!(0,i.le)(Object.keys(v.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],v));for(const $ of Object.keys(v))switch($){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&((0,i.le)(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(v.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,M.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(v.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:v.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(v.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(M.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(v.enableRtl),super.onPropertyChanged(v,M);break;case"readonly":this.updateReadonly(v.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(v.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){let fe=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=(0,i.Ac)(fe),this.popupWrapper.style.maxHeight=(0,i.Ac)(this.popupHeight)):this.list.style.maxHeight=(0,i.Ac)(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:{const fe=this.getPropObject($,v,M);super.onPropertyChanged(fe.newProperty,fe.oldProperty)}}}reInitializePoup(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()}presentItemValue(v){let M=[];for(let $=0;$<this.value.length;$++)this.findListElement(this.allowFiltering&&!(0,i.le)(this.mainList)?this.mainList:v,"li","data-value",this.value[$])||M.push(this.value[$]);return M}addNonPresentItems(v,M,$,fe){this.dataSource.executeQuery(this.getForQuery(v)).then(Ce=>{this.addItem(Ce.result,$.length),this.updateActionList(M,$,fe)})}updateVal(v,M,$){if(this.list)if(!(this.dataSource instanceof u.hm)||this.listData&&this.mainList&&this.mainData){let fe=[];if(!(0,i.le)(this.value)&&!this.allowCustomValue&&(fe=this.presentItemValue(this.ulElement)),"value"==$&&fe.length>0&&this.dataSource instanceof u.hm&&!(0,i.le)(this.value)&&null!=this.listData)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(fe,this.ulElement,this.listData);else{if("text"===$&&(this.initialTextUpdate(),v=this.value),((0,i.le)(this.value)||0===this.value.length)&&(this.tempValues=M),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){const Ce=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(Ce,this.mainData)}this.initialValueUpdate(),"Box"!==this.mode&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,v,M),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect();this.changeOnBlur||this.updateValueState(null,v,M)}addItem(v,M){super.addItem(v,M)}hidePopup(){this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100}},fe=>{fe.cancel||(this.fields.groupBy&&"CheckBox"!==this.mode&&this.fixedHeaderElement&&((0,i.Od)(this.fixedHeaderElement),this.fixedHeaderElement=null),this.beforePopupOpen=!1,this.overAllWrapper.classList.remove(Xn),this.popupObj.hide(new i.fw(fe.animation)),(0,i.Y4)(this.inputElement,{"aria-expanded":"false"}),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"clear"}),this.popupObj.hide(),(0,i.IV)([document.body,this.popupObj.element],"e-popup-full-page"),i.bi.remove(this.list,"keydown",this.onKeyDown))})}showPopup(){this.enabled&&this.trigger("beforeOpen",{cancel:!1},M=>{if(!M.cancel){if(!this.ulElement)return this.beforePopupOpen=!0,super.render(),void("CheckBox"===this.mode&&i.AR.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}));"CheckBox"===this.mode&&i.AR.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode});const $=this.ulElement.querySelectorAll("li.e-list-item").length,fe=this.ulElement.querySelectorAll("li."+z_li+"."+rs).length;if($>0&&$===fe&&fe===this.mainData.length)return void(this.beforePopupOpen=!1);this.onPopupShown()}})}selectAll(v){this.isSelectAll=!0,this.selectAllItems(v)}getModuleName(){return"multiselect"}clear(){this.selectAll(!1),this.value&&this.value.length?setTimeout(()=>{this.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)}render(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view "+Br,styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:ro,styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&(0,i.cn)([this.overAllWrapper],"e-checkbox"),i.AR.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:Br,styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",(0,i.QI)("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",(0,i.QI)("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!i.AR.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(Zn),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),("Default"===this.mode||"Box"===this.mode)&&(this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.chipCollectionWrapper.id)),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?pi(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";const v=this.element.getAttribute("id")?this.element.getAttribute("id"):(0,i.QI)("ej2_dropdownlist");this.element.id=v,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}checkInitialValue(){const v=this.dataSource instanceof Array?this.dataSource.length>0:!(0,i.le)(this.dataSource);if((!this.value||!this.value.length)&&(0,i.le)(this.text)&&!v&&"SELECT"===this.element.tagName&&this.element.options.length>0){const M=this.element.options,$=[];let fe="";for(let Ce=0,pt=M.length;Ce<pt;Ce++){const Mt=M[Ce];(0,i.le)(Mt.getAttribute("selected"))||(Mt.getAttribute("value")?$.push(Mt.getAttribute("value")):fe+=Mt.text+this.delimiterChar)}$.length>0?this.setProperties({value:$},!0):""!==fe&&this.setProperties({text:fe},!0),($.length>0||""!==fe)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!(0,i.le)(this.text))&&(this.list||super.render()),!(0,i.le)(this.text)&&((0,i.le)(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof u.hm?this.setInitialValue=()=>{this.initStatus=!1,this.initialValueUpdate(),this.initialUpdate(),this.setInitialValue=null,this.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),(0,i.le)(this.text)||this.element.setAttribute("data-initial-value",this.text)}checkAutoFocus(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()}setFloatLabelType(){(function as(xi,v,M,$,fe,Ce,pt){const Mt=v.querySelector("."+tt),wi=v.querySelector("."+Re);let Gi;(0,i.le)(Mt)?(Gi=null!==pt?pt:"",Es(fe,$,Gi)):(Gi=Mt.innerText,(0,i.og)(M.querySelector("."+tt)),Es(fe,$,Gi),(0,i.le)(wi)||(0,i.og)(M.querySelector("."+Re))),xi.classList.remove("e-float-input")})(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,0,this.placeholder),"Never"!==this.floatLabelType&&pi(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)}addValidInputClass(){!(0,i.le)(this.value)&&this.value.length||"Always"===this.floatLabelType?(0,i.cn)([this.overAllWrapper],"e-valid-input"):(0,i.IV)([this.overAllWrapper],"e-valid-input")}dropDownIcon(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:Io}),this.componentWrapper.appendChild(this.dropIcon),(0,i.cn)([this.componentWrapper],["e-down-icon"])):(0,i.le)(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),(0,i.IV)([this.componentWrapper],["e-down-icon"]))}initialUpdate(){"Box"!==this.mode&&!(this.setDynValue&&"Default"===this.mode&&this.inputFocus)&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()}destroy(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,super.destroy();const v=["readonly","aria-disabled","aria-placeholder","placeholder"];let M=v.length;for(;M>0;)this.inputElement.removeAttribute(v[M-1]),M--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),(0,i.Od)(this.overAllWrapper))}};ms([(0,i.Zz)({text:null,value:null,iconCss:null,groupBy:null},Rt)],Vs.prototype,"fields",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"enablePersistence",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"groupTemplate",void 0),ms([(0,i.Z9)("No records found")],Vs.prototype,"noRecordsTemplate",void 0),ms([(0,i.Z9)("Request failed")],Vs.prototype,"actionFailureTemplate",void 0),ms([(0,i.Z9)("None")],Vs.prototype,"sortOrder",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"enabled",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"enableHtmlSanitizer",void 0),ms([(0,i.Z9)([])],Vs.prototype,"dataSource",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"query",void 0),ms([(0,i.Z9)("StartsWith")],Vs.prototype,"filterType",void 0),ms([(0,i.Z9)(1e3)],Vs.prototype,"zIndex",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"ignoreAccent",void 0),ms([(0,i.Z9)()],Vs.prototype,"locale",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"enableGroupCheckBox",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"cssClass",void 0),ms([(0,i.Z9)("100%")],Vs.prototype,"width",void 0),ms([(0,i.Z9)("300px")],Vs.prototype,"popupHeight",void 0),ms([(0,i.Z9)("100%")],Vs.prototype,"popupWidth",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"placeholder",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"filterBarPlaceholder",void 0),ms([(0,i.Z9)({})],Vs.prototype,"htmlAttributes",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"valueTemplate",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"headerTemplate",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"footerTemplate",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"itemTemplate",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"allowFiltering",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"changeOnBlur",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"allowCustomValue",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"showClearButton",void 0),ms([(0,i.Z9)(1e3)],Vs.prototype,"maximumSelectionLength",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"readonly",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"text",void 0),ms([(0,i.Z9)(null)],Vs.prototype,"value",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"hideSelectedItem",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"closePopupOnSelect",void 0),ms([(0,i.Z9)("Default")],Vs.prototype,"mode",void 0),ms([(0,i.Z9)(",")],Vs.prototype,"delimiterChar",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"ignoreCase",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"showDropDownIcon",void 0),ms([(0,i.Z9)("Never")],Vs.prototype,"floatLabelType",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"showSelectAll",void 0),ms([(0,i.Z9)("Select All")],Vs.prototype,"selectAllText",void 0),ms([(0,i.Z9)("Unselect All")],Vs.prototype,"unSelectAllText",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"enableSelectionOrder",void 0),ms([(0,i.Z9)(!0)],Vs.prototype,"openOnClick",void 0),ms([(0,i.Z9)(!1)],Vs.prototype,"addTagOnBlur",void 0),ms([(0,i.ju)()],Vs.prototype,"change",void 0),ms([(0,i.ju)()],Vs.prototype,"removing",void 0),ms([(0,i.ju)()],Vs.prototype,"removed",void 0),ms([(0,i.ju)()],Vs.prototype,"beforeSelectAll",void 0),ms([(0,i.ju)()],Vs.prototype,"selectedAll",void 0),ms([(0,i.ju)()],Vs.prototype,"beforeOpen",void 0),ms([(0,i.ju)()],Vs.prototype,"open",void 0),ms([(0,i.ju)()],Vs.prototype,"close",void 0),ms([(0,i.ju)()],Vs.prototype,"blur",void 0),ms([(0,i.ju)()],Vs.prototype,"focus",void 0),ms([(0,i.ju)()],Vs.prototype,"chipSelection",void 0),ms([(0,i.ju)()],Vs.prototype,"filtering",void 0),ms([(0,i.ju)()],Vs.prototype,"tagging",void 0),ms([(0,i.ju)()],Vs.prototype,"customValueSelection",void 0),Vs=ms([i.Zl],Vs);var qs,ir=function(xi,v,M,$){var pt,fe=arguments.length,Ce=fe<3?v:null===$?$=Object.getOwnPropertyDescriptor(v,M):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ce=Reflect.decorate(xi,v,M,$);else for(var Mt=xi.length-1;Mt>=0;Mt--)(pt=xi[Mt])&&(Ce=(fe<3?pt(Ce):fe>3?pt(v,M,Ce):pt(v,M))||Ce);return fe>3&&Ce&&Object.defineProperty(v,M,Ce),Ce};class $r extends i.rt{}ir([(0,i.Z9)("Multiple")],$r.prototype,"mode",void 0),ir([(0,i.Z9)(!1)],$r.prototype,"showCheckbox",void 0),ir([(0,i.Z9)(!1)],$r.prototype,"showSelectAll",void 0),ir([(0,i.Z9)("Left")],$r.prototype,"checkboxPosition",void 0);class Ir extends i.rt{}ir([(0,i.Z9)([])],Ir.prototype,"items",void 0),ir([(0,i.Z9)("Right")],Ir.prototype,"position",void 0);let Pn=qs=class extends lt{constructor(v,M){super(v,M),this.isValidKey=!1,this.isDataSourceUpdate=!1,this.keyDownStatus=!1}addItem(v,M){super.addItem(v,M)}render(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,super.render(),this.renderComplete()}initWrapper(){const v=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(v,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(z_focus),this.itemTemplate&&this.renderReactTemplates(),(0,i.IV)([this.list],["e-content",z_root]),this.validationAttribute(this.element,v),this.list.setAttribute("role","listbox"),(0,i.Y4)(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()}updateSelectionSettings(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){const v=new i.E7(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=v.getConstant("selectAllText"),this.unSelectAllText=v.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}}initDraggable(){this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new Ue.bt(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:()=>this.createElement("span",{className:"e-placeholder"}),helper:v=>{const M=this.list.cloneNode(),$=v.sender.cloneNode(!0);M.appendChild($);const fe=this.getItems()[0];return M.style.width=fe.offsetWidth+"px",M.style.height=fe.offsetHeight+"px",(this.value&&this.value.length)>1&&this.isSelected($)&&$.appendChild(this.createElement("span",{className:"e-list-badge",innerHTML:this.value.length+""})),M.style.zIndex=(0,Zt.TE)(this.element)+"",M}})}updateActionCompleteData(v,M){this.jsonData.push(M)}initToolbar(){const v=this.toolbarSettings.position,M=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){const fe=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),Ce=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+v.toLowerCase()});this.list.parentElement.insertBefore(Ce,this.list),Ce.appendChild("Right"===v?this.list:fe),Ce.appendChild("Right"===v?fe:this.list),this.createButtons(fe),this.element.id||(this.element.id=(0,i.QI)("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}const $=this.element.getAttribute("data-value");M&&$&&M!==$?(this.tBListBox=(0,i.Xr)(document.getElementById(M),this.getModuleName()),this.tBListBox.updateToolBarState()):$&&(this.tBListBox=(0,i.Xr)(document.getElementById($),this.getModuleName()),this.tBListBox.updateToolBarState())}createButtons(v){let M,$,fe;const Ce=new i.E7(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(pt=>{fe=Ce.getConstant(pt),$=this.createElement("button",{attrs:{type:"button","data-value":pt,title:fe,"aria-label":fe}}),v.appendChild($),M=new Li.zx({iconCss:"e-icons e-"+pt.toLowerCase()},$),M.createElement=this.createElement})}validationAttribute(v,M){super.validationAttribute(v,M),M.required=v.required,v.required=!1}setHeight(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=(0,i.Ac)(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?(0,i.cn)([this.list],"e-filter-list"):(0,i.IV)([this.list],"e-filter-list")}setCssClass(){this.cssClass&&(0,i.cn)([this.toolbarSettings.items.length?this.list.parentElement:this.list],this.cssClass.split(" ")),this.enableRtl&&(0,i.cn)([this.list],"e-rtl")}setEnable(){const v=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?(0,i.IV)([v],Ue.Nc.disabled):(0,i.cn)([v],Ue.Nc.disabled)}showSpinner(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=(0,i.Ac)(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),(0,Zt.rj)({target:this.spinner},this.createElement),(0,Zt.yh)(this.spinner)}hideSpinner(){this.spinner.querySelector(".e-spinner-pane")&&(0,Zt.v3)(this.spinner),this.spinner.parentElement&&(0,i.og)(this.spinner)}onInput(){this.isDataSourceUpdate=!1,this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,this.refreshClearIcon()}clearText(){this.filterInput.value="",this.refreshClearIcon();const v=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(v)}refreshClearIcon(){this.filterInput.parentElement.querySelector("."+ks.clearIcon)&&(this.filterInput.parentElement.querySelector("."+ks.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")}onActionComplete(v,M,$){let fe;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(fe=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===M.length){const Ce=v.childNodes[0];Ce&&v.removeChild(Ce)}if(super.onActionComplete(v,M,$),this.allowFiltering&&!(0,i.le)(fe)&&(this.list.insertBefore(fe,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(fe)),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],(0,i.l7)(this.jsonData,M,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],(0,i.l7)(this.jsonData,M,[]),this.isDataSourceUpdate=!1),this.allowFiltering){const Ce=this.list.getElementsByClassName("e-input-filter")[0],pt=this.filterInput.value.length;Ce.selectionStart=pt,Ce.selectionEnd=pt,Ce.focus()}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!(0,i.le)($)){const Ce=this.scope.replace("#","");(0,i.Xr)(document.getElementById(Ce),this.getModuleName()).initToolbar()}this.initLoad=!1}initToolbarAndStyles(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()}triggerDragStart(v){let M;v=(0,i.l7)(this.getDragArgs(v),{dragSelected:!0}),i.AR.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",v,$=>{this.allowDragAll=$.dragSelected,this.allowDragAll||(M=this.ulElement.getElementsByClassName("e-list-badge")[0],M&&(0,i.og)(M))})}triggerDrag(v){let M,$,pt,Ce=v.event;if(v.target&&(v.target.classList.contains("e-listbox-wrapper")||v.target.classList.contains("e-list-item")||v.target.classList.contains("e-filter-parent")||v.target.classList.contains("e-input-group"))&&(pt=v.target.classList.contains("e-list-item")||v.target.classList.contains("e-filter-parent")||v.target.classList.contains("e-input-group")?v.target.closest(".e-listbox-wrapper"):v.target,M=this.allowFiltering?pt.querySelector(".e-list-parent"):pt,$=M.getBoundingClientRect(),$.y+M.offsetHeight-(Ce.pageY+36)<1?M.scrollTop=M.scrollTop+10:Ce.pageY-36-$.y<1&&(M.scrollTop=M.scrollTop-10)),null===v.target)return;this.trigger("drag",this.getDragArgs(v));const Mt=this.getComponent(v.target);if(Mt&&0===Mt.listData.length){const wi=Mt.ulElement.childNodes[0];wi&&Mt.ulElement.removeChild(wi)}}beforeDragEnd(v){const M=this.getFormattedValue(v.droppedElement.getAttribute("data-value"));v.items=this.value.indexOf(M)>-1?this.getDataByValues(this.value):this.getDataByValues([M]),this.trigger("beforeDrop",v)}dragEnd(v){let M,$,fe,Ce,pt,Mt;const wi=this.getFormattedValue(v.droppedElement.getAttribute("data-value")),Gi=this.getComponent(v.droppedElement),Vi=this.getDragArgs({target:v.droppedElement},!0),sn={previousData:this.dataSource},ts={previousData:Gi.dataSource};let wn=(0,i.l7)({},Vi,{target:v.target,source:{previousData:this.dataSource},previousIndex:v.previousIndex,currentIndex:v.currentIndex});if(Gi!==this){const Sn=(0,i.l7)(sn,{currentData:this.listData});wn=(0,i.l7)(wn,{source:Sn,destination:ts})}if(i.AR.isIos&&(this.list.style.overflow=""),Gi===this){const Sn=this.ulElement;M=[].slice.call(this.listData),$=[].slice.call(this.liCollections),fe=[].slice.call(this.jsonData),Mt=[].slice.call(this.sortedData);const Ws=v.currentIndex;let ht=v.currentIndex=this.getCurIdx(this,v.currentIndex);const S=M.indexOf(this.getDataByValue(wi)),I=fe.indexOf(this.getDataByValue(wi)),j=Mt.indexOf(this.getDataByValue(wi));M.splice(ht,0,M.splice(S,1)[0]),Mt.splice(Ws,0,Mt.splice(j,1)[0]),fe.splice(ht,0,fe.splice(I,1)[0]),$.splice(ht,0,$.splice(S,1)[0]),this.allowDragAll&&(pt=this.value&&Array.prototype.indexOf.call(this.value,wi)>-1?this.value:[wi],pt.forEach(oe=>{if(oe!==wi){const Ee=M.indexOf(this.getDataByValue(oe)),dt=fe.indexOf(this.getDataByValue(oe)),Bt=Mt.indexOf(this.getDataByValue(oe));Ee>ht&&ht++,fe.splice(ht,0,fe.splice(dt,1)[0]),M.splice(ht,0,M.splice(Ee,1)[0]),Mt.splice(Ws,0,Mt.splice(Bt,1)[0]),$.splice(ht,0,$.splice(Ee,1)[0]),Sn.insertBefore(this.getItems()[this.getIndexByValue(oe)],Sn.getElementsByClassName("e-placeholder")[0])}})),this.listData=M,this.jsonData=fe,this.sortedData=Mt,this.liCollections=$}else{let Sn;const Ws=[].slice.call(this.liCollections);let ht=v.currentIndex=this.getCurIdx(Gi,v.currentIndex);const S=Gi.ulElement;M=[].slice.call(Gi.listData),$=[].slice.call(Gi.liCollections),fe=[].slice.call(Gi.jsonData),Mt=[].slice.call(Gi.sortedData),pt=this.value&&Array.prototype.indexOf.call(this.value,wi)>-1&&this.allowDragAll?this.value:[wi];const I=[].slice.call(this.listData),j=[].slice.call(this.sortedData);if(pt.forEach((oe,Ee)=>{Ce=this.getDataByValue(oe);const dt=this.listData.indexOf(Ce),Bt=this.jsonData.indexOf(Ce),Ii=this.sortedData.indexOf(Ce);I.splice(dt,1),this.jsonData.splice(Bt,1),j.splice(Ii,1),this.listData=I,this.sortedData=j;const Yi=oe===wi?v.currentIndex:ht;if(M.splice(Yi,0,Ce),fe.splice(Yi,0,Ce),Mt.splice(Yi,0,Ce),$.splice(Yi,0,Ws.splice(dt,1)[0]),oe)Sn=this.getItems()[this.getIndexByValue(oe)];else{const Ss=this.getItems();for(let Ps=0;Ps<Ss.length;Ps++)if(null===Ss[Ps].getAttribute("data-value")&&Ss[Ps].classList.contains("e-list-item")){Sn=Ss[Ps];break}}Sn||(Sn=v.helper),this.removeSelected(this,oe===wi?[v.droppedElement]:[Sn]),S.insertBefore(Sn,S.getElementsByClassName("e-placeholder")[0]),ht++}),this.fields.groupBy){let oe=this.renderItems(this.listData,this.fields);this.updateListItems(oe,this.ulElement),this.setSelection()}if("None"!==Gi.sortOrder||this.selectionSettings.showCheckbox!==Gi.selectionSettings.showCheckbox||Gi.fields.groupBy||Gi.itemTemplate||this.itemTemplate){const oe=(0,i.Xr)(S,"sortable");let Ee=Gi.renderItems(M,Gi.fields);Gi.updateListItems(Ee,S),this.setSelection(),oe.placeHolderElement&&S.appendChild(oe.placeHolderElement),S.appendChild(v.helper),Gi.setSelection()}this.liCollections=Ws,Gi.liCollections=$,Gi.jsonData=(0,i.l7)([],[],fe,!1),Gi.listData=(0,i.l7)([],[],M,!1),Gi.sortedData=(0,i.l7)([],[],Mt,!1),0===this.listData.length&&this.l10nUpdate()}if(this===Gi){const Sn=(0,i.l7)(sn,{currentData:M});wn=(0,i.l7)(wn,{source:Sn})}else{const Sn=(0,i.l7)(ts,{currentData:M});wn=(0,i.l7)(wn,{destination:Sn})}this.trigger("drop",wn)}updateListItems(v,M){for(M.innerHTML="";0<v.childNodes.length;)M.appendChild(v.childNodes[0])}removeSelected(v,M){v.selectionSettings.showCheckbox?M.forEach($=>{$.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):(0,i.IV)(M,Ue.Nc.selected)}getCurIdx(v,M){return v.fields.groupBy&&(M-=[].slice.call(v.ulElement.children).slice(0,M).filter($=>$.classList.contains(Ue.Nc.group)).length),M}getComponent(v){let M;const $="EJS-LISTBOX"===this.element.tagName?(0,i.oq)(v,".e-listbox"):(0,i.oq)(v,".e-listbox-wrapper")&&(0,i.oq)(v,".e-listbox-wrapper").querySelector(".e-listbox");return $&&(M=(0,i.Xr)($,this.getModuleName())),M}listOption(v,M){return this.listCurrentOptions=super.listOption(v,M),this.listCurrentOptions=(0,i.l7)({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions}triggerBeforeItemRender(v){v.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:v.item,item:v.curData})}requiredModules(){const v=[];return this.selectionSettings.showCheckbox&&v.push({member:"CheckBoxSelection",args:[this]}),v}enableItems(v,M=!0,$){let fe;v.forEach(Ce=>{fe=this.findListElement(this.list,"li","data-value",$?Ce:this.getValueByText(Ce)),fe&&(M?((0,i.IV)([fe],Ue.Nc.disabled),fe.removeAttribute("aria-disabled")):((0,i.cn)([fe],Ue.Nc.disabled),fe.setAttribute("aria-disabled","true")))})}selectItems(v,M=!0,$){this.setSelection(v,M,!$),this.updateSelectedOptions()}selectAll(v=!0){this.selectAllItems(v)}addItems(v,M){super.addItem(v,M)}removeItems(v,M){this.removeItem(v,M)}removeItem(v,M){const $=[],fe=this.list.querySelectorAll("."+z_li);if(v){v=v instanceof Array?v:[v];const Ce=this.fields;let pt,Mt;const wi=[];let Gi;(0,i.l7)(wi,[],this.listData);const Vi=[],sn=[];for(let ts=0;ts<v.length;ts++){pt=v[ts]instanceof Object?(0,i.NA)(Ce.value,v[ts]):v[ts].toString();for(let wn=0,Sn=wi.length;wn<Sn;wn++)if(Mt=wi[wn]instanceof Object?(0,i.NA)(Ce.value,wi[wn]):wi[wn].toString(),Mt===pt){Gi=this.getIndexByValue(pt);const Ws=Gi===wn?Gi:wn;$.push(fe[Ws]),Vi.push(Ws),sn.push(Ws)}}for(let ts=Vi.length-1;ts>=0;ts--)this.listData.splice(Vi[ts],1);for(let ts=Vi.length-1;ts>=0;ts--)this.jsonData.splice(Vi[ts],1);for(let ts=sn.length-1;ts>=0;ts--)this.updateLiCollection(sn[ts])}else $.push(fe[M=M||0]),this.listData.splice(M,1),this.jsonData.splice(M,1),this.updateLiCollection(M);for(let Ce=0;Ce<$.length;Ce++)this.ulElement.removeChild($[Ce]);0===this.listData.length&&this.l10nUpdate()}getDataByValues(v){const M=[];for(let $=0;$<v.length;$++)M.push(this.getDataByValue(v[$]));return M}moveUp(v){const M=v?this.getElemByValue(v):this.getSelectedItems();this.moveUpDown(!0,!1,M)}moveDown(v){const M=v?this.getElemByValue(v):this.getSelectedItems();this.moveUpDown(!1,!1,M)}moveTo(v,M,$){const fe=v?this.getElemByValue(v):this.getSelectedItems(),Ce=$?(0,i.Xr)($,qs):this.getScopedListBox();this.moveData(this,Ce,!1,fe,M)}moveAllTo(v,M){if(this.listData.length>0){const $=v?(0,i.Xr)(v,qs):this.getScopedListBox();this.moveAllData(this,$,!1,M)}}getDataList(){return this.jsonData}getSortedList(){let v,M;if(v=M=this.sortedData,this.fields.groupBy){v=[];for(let $=0;$<M.length;$++)M[$].isHeader||v.push(M[$])}return v}getElemByValue(v){const M=[];for(let $=0;$<v.length;$++)M.push(this.ulElement.querySelector('[data-value ="'+v[$]+'"]'));return M}updateLiCollection(v){const M=[].slice.call(this.liCollections);M.splice(v,1),this.liCollections=M}selectAllItems(v,M){if([].slice.call(this.getItems()).forEach($=>{if(!$.classList.contains(Ue.Nc.disabled))if(this.selectionSettings.showCheckbox){const fe=$.getElementsByClassName("e-check")[0];(!fe&&v||fe&&!v)&&(this.notify("updatelist",{li:$,module:"listbox"}),this.maximumSelectionLength>=this.list.querySelectorAll(".e-list-item span.e-check").length&&this.checkMaxSelection())}else v?$.classList.add(Ue.Nc.selected):$.classList.remove(Ue.Nc.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){const $=this.list.getElementsByTagName("li");let fe=0;if(v)for(fe=0;fe<$.length;fe++){const Ce=this.getFormattedValue($[fe].getAttribute("data-value"));this.value.some(pt=>pt===Ce)||this.value.push(this.getFormattedValue($[fe].getAttribute("data-value")))}else for(fe=0;fe<$.length;fe++){const Ce=this.getFormattedValue($[fe].getAttribute("data-value"));this.value=this.value.filter(pt=>pt!==Ce)}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),M)}updateMainList(){const v=this.mainList.querySelectorAll(".e-list-item"),M=this.ulElement.querySelectorAll(".e-list-item"),$=v.length,fe=M.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||$!==fe){let Ce=0,pt=0,Mt=0;for(;Ce<$;){if(this.value)for(;pt<this.value.length;pt++)v[Ce].getAttribute("data-value")===this.value[pt]&&Mt++;!Mt&&this.selectionSettings.showCheckbox&&v[Ce].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&Mt&&$!==fe?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[Ce]),Ce=0):Ce++,Mt=0,pt=0}}}wireEvents(){const v=(0,i.oq)(this.element,"form"),M="EJS-LISTBOX"===this.element.tagName?this.element:this.list;i.bi.add(this.list,"click",this.clickHandler,this),i.bi.add(M,"keydown",this.keyDownHandler,this),i.bi.add(M,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&i.bi.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&i.bi.remove(this.list,"scroll",this.setFloatingHeader),v&&i.bi.add(v,"reset",this.formResetHandler,this)}wireToolbarEvent(){this.toolbarSettings.items.length&&i.bi.add(this.getToolElem(),"click",this.toolbarClickHandler,this)}unwireEvents(){const v=(0,i.oq)(this.element,"form"),M="EJS-LISTBOX"===this.element.tagName?this.element:this.list;i.bi.remove(this.list,"click",this.clickHandler),i.bi.remove(M,"keydown",this.keyDownHandler),i.bi.remove(M,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&i.bi.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&i.bi.remove(this.getToolElem(),"click",this.toolbarClickHandler),v&&i.bi.remove(v,"reset",this.formResetHandler)}clickHandler(v){this.selectHandler(v)}checkSelectAll(){let v=0;const M=this.list.querySelectorAll("li."+z_li);for(let fe=0;fe<M.length;fe++)M[fe].classList.contains("e-disabled")||v++;const $=this.getSelectedItems().length;this.showSelectAll&&v&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:v===$?"check":0===$?"uncheck":"indeterminate"})}getQuery(v){let M=v?v.clone():this.query?this.query.clone():new u.AE;if(this.allowFiltering){const $=""===this.inputString?"contains":this.filterType,fe=this.typeOfData(this.dataSource).typeof;M.where((this.dataSource instanceof u.hm||"string"!==fe)&&"number"!==fe&&this.fields.text?this.fields.text:"",$,this.inputString,this.ignoreCase,this.ignoreAccent)}else M=v||(this.query?this.query:new u.AE);return M}setFiltering(){let v;if(this.initLoad||(0,i.le)(this.filterParent))return this.filterParent=this.createElement("span",{className:ks.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:ks.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),v=$e.II.createInput({element:this.filterInput,buttons:[ks.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),(0,i.R3)([v.container],this.filterParent),(0,i.Ce)([this.filterParent],this.list),(0,i.Y4)(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.height.toString().indexOf("%")<0&&(0,i.cn)([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),v}filterWireEvents(v){v&&(this.filterInput=v.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+ks.clearIcon),this.clearFilterIconElem&&(i.bi.add(this.clearFilterIconElem,"click",this.clearText,this),v||(this.clearFilterIconElem.style.visibility="hidden")),i.bi.add(this.filterInput,"input",this.onInput,this),i.bi.add(this.filterInput,"keyup",this.KeyUp,this),i.bi.add(this.filterInput,"keydown",this.onKeyDown,this)}selectHandler(v,M){let fe,$=!0;const Ce=(0,i.oq)(v.target,".e-list-item");let pt=[Ce];if(Ce&&Ce.parentElement){if(fe=[].slice.call(Ce.parentElement.children).indexOf(Ce),this.selectionSettings.showCheckbox?$=!Ce.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(v.ctrlKey||i.AR.isDevice)&&this.isSelected(Ce)?(Ce.classList.remove(Ue.Nc.selected),Ce.removeAttribute("aria-selected"),$=!1):"Multiple"===this.selectionSettings.mode&&(v.ctrlKey||i.AR.isDevice)||(this.getSelectedItems().forEach(Mt=>{Mt.removeAttribute("aria-selected")}),(0,i.IV)(this.getSelectedItems(),Ue.Nc.selected)),v.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?pt=[].slice.call(Ce.parentElement.children).slice(Math.min(fe,this.prevSelIdx),Math.max(fe,this.prevSelIdx)+1).filter(Mt=>Mt.classList.contains("e-list-item")):this.prevSelIdx=[].slice.call(Ce.parentElement.children).indexOf(Ce),$&&(this.selectionSettings.showCheckbox||(0,i.cn)(pt,Ue.Nc.selected),pt.forEach(Mt=>{Mt.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",Ce.id)),!M&&(this.maximumSelectionLength>(this.value&&this.value.length)||!$)&&(this.maximumSelectionLength>=(this.value&&this.value.length)||!$)&&!(this.maximumSelectionLength<(this.value&&this.value.length))&&this.notify("updatelist",{li:Ce,e:v,module:"listbox"}),this.allowFiltering&&!M){const Mt=this.getFormattedValue(Ce.getAttribute("data-value"));if($){const wi=[];(0,i.l7)(wi,this.value),wi.push(Mt),this.value=wi}else this.value=this.value.filter(wi=>wi!==Mt);document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),v),this.checkMaxSelection()}}triggerChange(v,M){this.trigger("change",{elements:v,items:this.getDataByElements(v),value:this.value,event:M})}getDataByElems(v){const M=[];for(let $=0,fe=v.length;$<fe;$++)M.push(this.getDataByValue(this.getFormattedValue(v[$].getAttribute("data-value"))));return M}getDataByElements(v){const M=[];let $,fe=0;if(!(0,i.le)(this.listData)){const Ce=this.typeOfData(this.listData).typeof;if("string"===Ce||"number"===Ce||"boolean"===Ce)for(const pt of this.listData){for(let Mt=fe,wi=v.length;Mt<wi;Mt++)if($=this.getFormattedValue(v[Mt].getAttribute("data-value")),!(0,i.le)(pt)&&pt===$){fe=Mt,M.push(pt);break}if(v.length===M.length)break}else for(const pt of this.listData){for(let Mt=fe,wi=v.length;Mt<wi;Mt++)if($=this.getFormattedValue(v[Mt].getAttribute("data-value")),!(0,i.le)(pt)&&(0,i.NA)(this.fields.value?this.fields.value:"value",pt)===$){fe=Mt,M.push(pt);break}if(v.length===M.length)break}return M}return null}checkMaxSelection(){const v=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){let M=0;const $=this.list.getElementsByClassName("e-list-item");for(;M<$.length;M++)$[M].querySelector(".e-frame.e-check")||(v===this.maximumSelectionLength?$[M].classList.add("e-disable"):$[M].classList.contains("e-disable")&&$[M].classList.remove("e-disable"))}}toolbarClickHandler(v){const M=(0,i.oq)(v.target,"button");if(M){if(this.toolbarAction=M.getAttribute("data-value"),M.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}}moveUpDown(v,M,$){let fe=this.getSelectedItems();if($&&(fe=$),(v&&this.isSelected(this.ulElement.firstElementChild)||!v&&this.isSelected(this.ulElement.lastElementChild))&&!$)return;const Ce=this.getDataByElems(fe),pt={cancel:!1,items:Ce,eventName:this.toolbarAction};this.trigger("actionBegin",pt),!pt.cancel&&((v?fe:fe.reverse()).forEach(Mt=>{const wi=Array.prototype.indexOf.call(this.ulElement.querySelectorAll(".e-list-item"),Mt),Gi=Array.prototype.indexOf.call(this.ulElement.children,Mt);(0,Ue.Ao)(this.ulElement,this.ulElement,[Gi],v?Gi-1:Gi+2),this.changeData(Gi,v?Gi-1:Gi+1,v?wi-1:wi+1,Mt)}),this.trigger("actionComplete",{items:Ce,eventName:this.toolbarAction}),fe[0].focus(),!M&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(v?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}moveItemTo(){this.moveData(this,this.getScopedListBox())}moveItemFrom(){this.moveData(this.getScopedListBox(),this)}moveData(v,M,$,fe,Ce){const pt=[],Mt=[],wi=[],Gi=[],Vi=[].slice.call(v.listData),sn=[].slice.call(M.listData),ts=[].slice.call(v.sortedData);let wn=[].slice.call(M.sortedData);const Sn=[].slice.call(v.liCollections),Ws=[],ht=[].slice.call(M.liCollections),S=[],I=[];let j=v.getSelectedItems();fe&&(j=fe);const oe="None"!==M.sortOrder||M.selectionSettings.showCheckbox!==v.selectionSettings.showCheckbox||M.fields.groupBy||M.itemTemplate||v.itemTemplate;if(v.value=[],j.length){this.removeSelected(v,j),j.forEach(Ii=>{pt.push(Array.prototype.indexOf.call(v.ulElement.children,Ii)),Ws.push(Array.prototype.indexOf.call(v.ulElement.querySelectorAll(".e-list-item"),Ii)),Mt.push(Array.prototype.indexOf.call(v.listData,v.getDataByElems([Ii])[0])),Gi.push(Array.prototype.indexOf.call(v.sortedData,v.getDataByElems([Ii])[0])),wi.push(Array.prototype.indexOf.call(v.jsonData,v.getDataByElems([Ii])[0]))}),"None"!==this.sortOrder?Gi.forEach(Ii=>{S.push(v.sortedData[Ii])}):wi.forEach(Ii=>{S.push(v.jsonData[Ii])});const Ee={cancel:!1,items:S,eventName:this.toolbarAction};if(v.trigger("actionBegin",Ee),Ee.cancel)return;const dt=[];if(Ws.sort((Ii,Yi)=>Ii-Yi).reverse().forEach(Ii=>{dt.push(Sn.splice(Ii,1)[0])}),v.liCollections=Sn,Ce){const Ii=ht.splice(0,Ce);M.liCollections=Ii.concat(dt.reverse()).concat(ht)}else M.liCollections=ht.concat(dt.reverse());if(0===M.listData.length){const Ii=M.ulElement.childNodes[0];Ii&&M.ulElement.removeChild(Ii)}if(Mt.sort((Ii,Yi)=>Yi-Ii).forEach(Ii=>{Vi.splice(Ii,1)}),Gi.sort((Ii,Yi)=>Yi-Ii).forEach(Ii=>{ts.splice(Ii,1)}),wi.slice().reverse().forEach(Ii=>{I.push(v.jsonData.splice(Ii,1)[0])}),oe)if(v.fields.groupBy){let Ii=v.renderItems(Vi,v.fields);v.updateListItems(Ii,v.ulElement)}else j.forEach(Ii=>{(0,i.og)(Ii)});else(0,Ue.Ao)(v.ulElement,M.ulElement,pt,Ce),v.trigger("actionComplete",{items:S,eventName:this.toolbarAction});M.mainList.childElementCount!==M.jsonData.length&&(M.mainList=M.ulElement),v.updateMainList();const Bt=[].slice.call(M.jsonData);wn=[].slice.call(M.sortedData),this.selectNextList(j,Ws,Mt,v),$&&this.list.focus(),v.listData=Vi,v.sortedData=ts,Ce=Ce||sn.length;for(let Ii=S.length-1;Ii>=0;Ii--)sn.splice(Ce,0,S[Ii]),Bt.splice(Ce,0,S[Ii]),wn.splice(Ce,0,S[Ii]);if(M.listData=sn,M.jsonData=Bt,M.sortedData=wn,oe){let Ii=M.renderItems(sn,M.fields);M.updateListItems(Ii,M.ulElement),M.setSelection(),v.trigger("actionComplete",{items:S,eventName:this.toolbarAction})}v.updateSelectedOptions(),0===v.listData.length&&v.l10nUpdate()}1===v.value.length&&v.getSelectedItems().length&&(v.value[0]=v.getFormattedValue(v.getSelectedItems()[0].getAttribute("data-value")))}selectNextList(v,M,$,fe){const Ce=fe.ulElement.querySelectorAll(".e-list-item").length;let pt,Mt,wi=-1;1===v.length&&Ce&&!fe.selectionSettings.showCheckbox&&(Mt=Ce<=M[0]?Ce-1:M[0],pt=fe.ulElement.querySelectorAll(".e-list-item")[Mt],wi=fe.getValidIndex(pt,Mt,Ce===$[0]?38:40),wi>-1&&fe.ulElement.querySelectorAll(".e-list-item")[wi].classList.add(Ue.Nc.selected))}moveAllItemTo(){this.moveAllData(this,this.getScopedListBox())}moveAllItemFrom(){this.moveAllData(this.getScopedListBox(),this)}moveAllData(v,M,$,fe){let Ce=[].slice.call(M.listData);const pt=[].slice.call(M.jsonData),Mt="None"!==M.sortOrder||M.selectionSettings.showCheckbox!==v.selectionSettings.showCheckbox||M.fields.groupBy||M.itemTemplate||v.itemTemplate;this.removeSelected(v,v.getSelectedItems());const wi=[].slice.call(v.jsonData),Gi={cancel:!1,items:wi,eventName:this.toolbarAction};if(v.trigger("actionBegin",Gi),Gi.cancel)return;if(0===M.listData.length){const ts=M.ulElement.childNodes[0];ts&&M.ulElement.removeChild(ts)}if(Mt){const ts=v.ulElement.childNodes[0];ts&&v.ulElement.removeChild(ts)}(0,Ue.Ao)(v.ulElement,M.ulElement,Array.apply(null,{length:v.ulElement.childElementCount}).map(Number.call,Number),fe),this.trigger("actionComplete",{items:wi,eventName:this.toolbarAction}),$&&this.list.focus(),fe=fe||Ce.length;for(let ts=0;ts<v.listData.length;ts++)Ce.splice(fe+ts,0,v.listData[ts]);for(let ts=0;ts<v.jsonData.length;ts++)pt.splice(fe+ts,0,v.jsonData[ts]);const Vi=[].slice.call(v.liCollections),sn=[].slice.call(M.liCollections);if(v.liCollections=[],fe){const ts=sn.splice(0,fe);M.liCollections=ts.concat(Vi).concat(sn)}else M.liCollections=sn.concat(Vi);if(v.value=[],Ce=Ce.filter(ts=>!0!==ts.isHeader),M.listData=Ce,M.jsonData=pt,v.listData=v.sortedData=v.jsonData=[],Mt){let ts=M.renderItems(Ce,M.fields);M.updateListItems(ts,M.ulElement),this.trigger("actionComplete",{items:wi,eventName:this.toolbarAction})}else M.sortedData=Ce;v.updateSelectedOptions(),0===v.listData.length&&v.l10nUpdate()}changeData(v,M,$,fe){const Ce=[].slice.call(this.listData),pt=[].slice.call(this.jsonData),Mt=[].slice.call(this.sortedData),wi=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([fe])[0]),Gi=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([fe])[0]),Vi=[].slice.call(this.liCollections);Ce.splice(M,0,Ce.splice(v,1)[0]),pt.splice($,0,pt.splice(wi,1)[0]),Mt.splice(M,0,Mt.splice(Gi,1)[0]),Vi.splice(M,0,Vi.splice(v,1)[0]),this.listData=Ce,this.jsonData=pt,this.liCollections=Vi,this.sortedData=Mt}getSelectedItems(){let v=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(M=>{v.push((0,i.oq)(M,".e-list-item"))}):v=[].slice.call(this.ulElement.getElementsByClassName(Ue.Nc.selected)),v}getScopedListBox(){let v;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(M=>{(0,i.Xr)(M,this.getModuleName())&&(v=(0,i.Xr)(M,this.getModuleName()))}),v}getGrabbedItems(){return Array.prototype.slice.call(this.element.querySelectorAll(".e-grabbed"))}getDragArgs(v,M){let $=this.getGrabbedItems();return $.length?M&&$.push(v.target):$=[v.target],{elements:$,items:this.getDataByElems($)}}onKeyDown(v){this.keyDownHandler(v),v.stopPropagation()}keyDownHandler(v){if([32,35,36,37,38,39,40,65].indexOf(v.keyCode)>-1&&!this.allowFiltering){if(v.target&&v.target.className.indexOf("e-edit-template")>-1)return;if(v.preventDefault(),32===v.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:v.ctrlKey,shiftKey:v.shiftKey});else if(65===v.keyCode&&v.ctrlKey)this.selectAll();else if((38===v.keyCode||40===v.keyCode)&&v.ctrlKey&&v.shiftKey)this.moveUpDown(38===v.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==v.keyCode&&37!==v.keyCode||!v.ctrlKey)37!==v.keyCode&&39!==v.keyCode&&this.upDownKeyHandler(v);else{const M=this.tBListBox||this.getScopedListBox();39===v.keyCode?v.shiftKey?this.moveAllData(this,M,!0):this.moveData(this,M,!0):v.shiftKey?this.moveAllData(M,this,!0):this.moveData(M,this,!0)}}else this.allowFiltering&&(40===v.keyCode||38===v.keyCode)&&this.upDownKeyHandler(v)}upDownKeyHandler(v){const M=this.ulElement;let fe=40===v.keyCode||36===v.keyCode?0:M.childElementCount-1;const Ce=M.getElementsByClassName("e-focused")[0]||M.getElementsByClassName(Ue.Nc.selected)[0];if(Ce){if(35!==v.keyCode&&36!==v.keyCode&&(fe=Array.prototype.indexOf.call(M.children,Ce),40===v.keyCode?fe++:fe--,fe<0||fe>M.childElementCount-1))return;(0,i.IV)([Ce],"e-focused")}const pt=M.children[fe];if(pt){if(fe=this.getValidIndex(pt,fe,v.keyCode),-1===fe)return void(0,i.cn)([Ce],"e-focused");M.children[fe].focus(),M.children[fe].classList.add("e-focused"),v.ctrlKey||this.selectHandler({target:M.children[fe],ctrlKey:v.ctrlKey,shiftKey:v.shiftKey},!0)}}KeyUp(v){const $=String.fromCharCode(v.keyCode).match(/\w/);if((0,i.le)($)||(this.isValidKey=!0),this.isValidKey=8===v.keyCode||46===v.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.allowFiltering)){const fe={preventDefaultAction:!1,text:this.targetElement(),updateData:(Ce,pt,Mt)=>{fe.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(Ce,pt,Mt))},event:v,cancel:!1};this.trigger("filtering",fe,Ce=>{this.isDataFetched=!1,!(Ce.cancel||""!==this.filterInput.value&&this.isFiltered)&&(!Ce.cancel&&!this.isCustomFiltering&&!Ce.preventDefaultAction&&(this.inputString=this.filterInput.value,this.filteringAction(this.jsonData,new u.AE,this.fields)),!this.isFiltered&&!this.isCustomFiltering&&!Ce.preventDefaultAction&&this.dataUpdater(this.jsonData,new u.AE,this.fields))})}}filter(v,M,$){this.isCustomFiltering=!0,this.filteringAction(v,M,$)}filteringAction(v,M,$){this.resetList(v,$,M)}targetElement(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value}dataUpdater(v,M,$){if(this.isDataFetched=!1,""===this.targetElement().trim()){const Ce=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(Ce,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(v,$,M)}focusOutHandler(){const v=this.list.getElementsByClassName("e-focused")[0];v&&v.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()}getValidIndex(v,M,$){const fe=this.ulElement;return(v.classList.contains("e-disabled")||v.classList.contains(Ue.Nc.group))&&(40===$||36===$?M++:M--),M<0||M===fe.childElementCount?-1:(((v=fe.querySelectorAll(".e-list-item")[M]).classList.contains("e-disabled")||v.classList.contains(Ue.Nc.group))&&(M=this.getValidIndex(v,M,$)),M)}updateSelectedOptions(){const v=[],M=[];if((0,i.l7)(M,this.value),this.getSelectedItems().forEach($=>{$.classList.contains("e-grabbed")||v.push(this.getFormattedValue($.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(let $=0;$<v.length;$++)M.indexOf(v[$])>-1||M.push(v[$]);this.setProperties({value:M},!0)}else this.setProperties({value:v},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()}clearSelection(v=this.value){if(this.selectionSettings.showCheckbox){let M;this.getSelectedItems().forEach($=>{M=this.getFormattedValue($.getAttribute("data-value")),v.indexOf(M)<0&&($.getElementsByClassName("e-check")[0].classList.remove("e-check"),$.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),$.removeAttribute("aria-selected"))})}}setSelection(v=this.value,M=!0,$=!1){let fe,Ce;v&&v.forEach(pt=>{let Mt;Mt=$?this.getValueByText(pt):pt,fe=this.list.querySelector('[data-value="'+Mt+'"]'),fe&&(Ce=this.selectionSettings.showCheckbox?fe.getElementsByClassName("e-frame")[0].classList.contains("e-check"):fe.classList.contains("e-selected"),(!M&&Ce||M&&!Ce&&fe)&&(this.selectionSettings.showCheckbox?this.notify("updatelist",{li:fe,module:"listbox"}):M?(fe.classList.add(Ue.Nc.selected),fe.setAttribute("aria-selected","true")):(fe.classList.remove(Ue.Nc.selected),fe.removeAttribute("aria-selected"))))}),this.updateSelectTag()}updateSelectTag(){const v=this.getSelectTag();let M="";if(v.innerHTML="",this.value){for(let $=0,fe=this.value.length;$<fe;$++)M+='<option selected value="'+this.value[$]+'"></option>';v.innerHTML+=M}this.checkSelectAll()}checkDisabledState(v){return 0===v.ulElement.querySelectorAll("."+Ue.Nc.li).length}updateToolBarState(){if(this.toolbarSettings.items.length){const v=this.getScopedListBox(),M=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach($=>{const fe=M.querySelector('[data-value="'+$+'"]');switch($){case"moveAllTo":fe.disabled=this.checkDisabledState(this);break;case"moveAllFrom":fe.disabled=this.checkDisabledState(v);break;case"moveFrom":fe.disabled=!(v.value&&v.value.length);break;case"moveUp":fe.disabled=!(this.value&&this.value.length&&!this.isSelected(this.ulElement.children[0]));break;case"moveDown":fe.disabled=!(this.value&&this.value.length&&!this.isSelected(this.ulElement.children[this.ulElement.childElementCount-1]));break;default:fe.disabled=!(this.value&&this.value.length)}})}}setCheckboxPosition(){const v=this.list;!this.initLoad&&"Left"===this.selectionSettings.checkboxPosition&&v.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&v.classList.add("e-right")}showCheckbox(v){let M=0;const $=this.list.lastElementChild.querySelectorAll("li"),fe=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(v){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){const Ce=new i.E7(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=Ce.getConstant("selectAllText"),this.unSelectAllText=Ce.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);M<fe;M++)$[M].classList.contains("e-list-item")&&$[M].removeChild($[M].getElementsByClassName("e-checkbox-wrapper")[0]),$[M].hasAttribute("aria-selected")&&$[M].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]}isSelected(v){return!(0,i.le)(v)&&(v.classList.contains(Ue.Nc.selected)||null!==v.querySelector(".e-check"))}getSelectTag(){return this.list.getElementsByClassName("e-hidden-select")[0]}getToolElem(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]}formResetHandler(){this.value=this.initialSelectedOptions}getModuleName(){return"listbox"}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"listbox"}destroy(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),(0,i.og)(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),super.destroy(),this.itemTemplate&&this.clearTemplate()}onPropertyChanged(v,M){const $=this.toolbarSettings.items.length?this.list.parentElement:this.list;super.onPropertyChanged(v,M),this.setUpdateInitial(["fields","query","dataSource"],v);for(const fe of Object.keys(v))switch(fe){case"cssClass":M.cssClass&&(0,i.IV)([$],M.cssClass.split(" ")),v.cssClass&&(0,i.cn)([$],v.cssClass.split(" "));break;case"enableRtl":v.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":(0,i.IV)(this.list.querySelectorAll("."+Ue.Nc.selected),Ue.Nc.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":v.allowDragAndDrop?this.initDraggable():(0,i.Xr)(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,(0,i.IV)([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&$e.II.setPlaceholder(v.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&((0,i.Xr)(this.ulElement,"sortable").scope=v.scope),this.toolbarSettings.items.length&&(M.scope&&((0,i.Xr)(document.querySelector(M.scope),this.getModuleName()).tBListBox=null),v.scope&&((0,i.Xr)(document.querySelector(v.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":{let Ce;const pt=v.toolbarSettings.position,Mt=this.getToolElem();pt&&((0,i.IV)([$],["e-right","e-left"]),$.classList.add("e-"+pt.toLowerCase()),"Left"===pt?$.insertBefore(Mt,this.list):$.appendChild(Mt)),v.toolbarSettings.items&&(M.toolbarSettings&&M.toolbarSettings.items.length&&(Ce=this.list.parentElement,Ce.parentElement.insertBefore(this.list,Ce),(0,i.og)(Ce)),this.initToolbarAndStyles(),this.wireToolbarEvent());break}case"selectionSettings":{const Ce=v.selectionSettings.showSelectAll,pt=v.selectionSettings.showCheckbox;if(!(0,i.le)(Ce)){if(this.showSelectAll=Ce,this.showSelectAll){const Mt=new i.E7(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=Mt.getConstant("selectAllText"),this.unSelectAllText=Mt.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}(0,i.le)(pt)||this.showCheckbox(pt),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break}case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}}};ir([(0,i.Z9)("")],Pn.prototype,"cssClass",void 0),ir([(0,i.Z9)([])],Pn.prototype,"value",void 0),ir([(0,i.Z9)("")],Pn.prototype,"height",void 0),ir([(0,i.Z9)(!1)],Pn.prototype,"allowDragAndDrop",void 0),ir([(0,i.Z9)(1e3)],Pn.prototype,"maximumSelectionLength",void 0),ir([(0,i.Z9)(!1)],Pn.prototype,"allowFiltering",void 0),ir([(0,i.Z9)("")],Pn.prototype,"scope",void 0),ir([(0,i.Z9)(!0)],Pn.prototype,"ignoreCase",void 0),ir([(0,i.Z9)(null)],Pn.prototype,"filterBarPlaceholder",void 0),ir([(0,i.ju)()],Pn.prototype,"beforeItemRender",void 0),ir([(0,i.ju)()],Pn.prototype,"filtering",void 0),ir([(0,i.ju)()],Pn.prototype,"select",void 0),ir([(0,i.ju)()],Pn.prototype,"change",void 0),ir([(0,i.ju)()],Pn.prototype,"beforeDrop",void 0),ir([(0,i.ju)()],Pn.prototype,"dragStart",void 0),ir([(0,i.ju)()],Pn.prototype,"drag",void 0),ir([(0,i.ju)()],Pn.prototype,"drop",void 0),ir([(0,i.ju)()],Pn.prototype,"dataBound",void 0),ir([(0,i.Z9)(null)],Pn.prototype,"groupTemplate",void 0),ir([(0,i.Z9)("Request failed")],Pn.prototype,"actionFailureTemplate",void 0),ir([(0,i.Z9)(1e3)],Pn.prototype,"zIndex",void 0),ir([(0,i.Z9)(!1)],Pn.prototype,"ignoreAccent",void 0),ir([(0,i.Zz)({},Ir)],Pn.prototype,"toolbarSettings",void 0),ir([(0,i.Zz)({},$r)],Pn.prototype,"selectionSettings",void 0),Pn=qs=ir([i.Zl],Pn);const ks={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"}},461:(An,hs,rt)=>{rt.d(hs,{IE:()=>_e});var i=rt(8526),u=rt(7628);class Ue{constructor(){this.numFmtId=0,this.backColor="none",this.fontName="Calibri",this.fontSize=10.5,this.fontColor="#000000",this.italic=!1,this.bold=!1,this.underline=!1,this.strikeThrough=!1,this.wrapText=!1,this.hAlign="general",this.vAlign="bottom",this.indent=0,this.rotation=0,this.numberFormat="GENERAL",this.type="datetime",this.borders=new gt,this.isGlobalStyle=!1}}class Zt{constructor(){this.sz=10.5,this.name="Calibri",this.u=!1,this.b=!1,this.i=!1,this.color="FF000000",this.strike=!1}}class $e{}class Li{}class Lt{}class ut{constructor(){this.name="Normal",this.xfId=0}}class Si{constructor(B,de){this.numFmtId=B,this.formatCode=de}}class We{constructor(B,de){this.lineStyle=B,this.color=de}}class gt{constructor(){this.left=new We("none","#FFFFFF"),this.right=new We("none","#FFFFFF"),this.top=new We("none","#FFFFFF"),this.bottom=new We("none","#FFFFFF"),this.all=new We("none","#FFFFFF")}}class E{}class at extends Array{constructor(){super(...arguments),this.add=B=>{let de=!1,Be=0;for(let Fe of this)Fe.index===B.index&&(this[Be]=B,de=!0),Be++;de||this.push(B)}}}class Oe{}class ft{}class jt extends Array{constructor(){super(...arguments),this.add=B=>{this.push(B)}}}class Nt extends Array{}class Di{constructor(){this.isSummaryRowBelow=!0,this.showGridLines=!0,this.enableRtl=!1}}class bt{}class Rt{}class z{}class J{}class ve extends Array{constructor(){super(...arguments),this.add=B=>{let de=!1,Be=0;for(let Fe of this){if(ve.isIntersecting(Fe,B)){let xt=new J;xt.x=Math.min(Fe.x,B.x),xt.y=Math.min(Fe.Y,B.y),xt.width=Math.max(Fe.Width+Fe.X,B.width+B.x),xt.height=Math.max(Fe.Height+Fe.Y,B.height+B.y),xt.ref=this[Be].ref.split(":")[0]+":"+B.ref.split(":")[1],this[Be]=xt,B=xt,de=!0}Be++}return de||this.push(B),B}}static isIntersecting(B,de){return B.x<=de.x+de.width&&de.x<=B.x+B.width&&B.y<=de.y+de.height&&de.y<=B.y+B.height}}class Ne{}class ce{constructor(B){this.intl=new u.eC}getFormatFunction(B,de){return B.type?(de&&(B.isServerRendered=!0),this.intl.getDateFormat(B)):this.intl.getNumberFormat(B)}toView(B,de){let Be=B;return!(0,u.le)(de)&&!(0,u.le)(B)&&(Be=de(B)),Be}displayText(B,de,Be){return this.toView(B,this.getFormatFunction(de,Be))}}class be{constructor(B,de){if(this.csvStr="",this.separator=de??",",this.formatter=new ce,this.isMicrosoftBrowser=!!navigator.msSaveBlob,null!=B.isServerRendered&&(this.isServerRendered=B.isServerRendered),null!=B.styles){this.globalStyles=new Map;for(let Be=0;Be<B.styles.length;Be++)void 0!==B.styles[Be].name&&void 0!==B.styles[Be].numberFormat&&this.globalStyles.set(B.styles[Be].name,B.styles[Be].numberFormat)}null!=B.worksheets&&this.parseWorksheet(B.worksheets[0])}parseWorksheet(B){null!=B.rows&&this.parseRows(B.rows)}parseRows(B){let de=1;for(let Be of B){if(null==Be.index)throw Error("Row index is missing.");for(;de<Be.index;)this.csvStr+="\n",de++;this.parseRow(Be)}}parseRow(B){if(null!=B.cells){let de=1;for(let Be of B.cells){if(null==Be.index)throw Error("Cell index is missing.");for(;de<Be.index;)this.csvStr+=this.separator,de++;this.parseCell(Be)}}}parseCell(B){let de=this.csvStr;if(void 0!==B.value)if(B.value instanceof Date)if(void 0!==B.style&&void 0!==B.style.numberFormat)try{de+=this.parseCellValue(this.formatter.displayText(B.value,{type:"dateTime",skeleton:B.style.numberFormat},this.isServerRendered))}catch{de+=this.parseCellValue(this.formatter.displayText(B.value,{type:"dateTime",format:B.style.numberFormat},this.isServerRendered))}else if(void 0!==B.style&&void 0!==B.style.name&&this.globalStyles.has(B.style.name))try{de+=this.parseCellValue(this.formatter.displayText(B.value,{type:"dateTime",skeleton:this.globalStyles.get(B.style.name)},this.isServerRendered))}catch{de+=this.parseCellValue(this.formatter.displayText(B.value,{type:"dateTime",format:this.globalStyles.get(B.style.name)},this.isServerRendered))}else de+=B.value;else"boolean"==typeof B.value?de+=B.value?"TRUE":"FALSE":"number"==typeof B.value?void 0!==B.style&&void 0!==B.style.numberFormat?de+=this.parseCellValue(this.formatter.displayText(B.value,{format:B.style.numberFormat},this.isServerRendered)):void 0!==B.style&&void 0!==B.style.name&&this.globalStyles.has(B.style.name)?de+=this.parseCellValue(this.formatter.displayText(B.value,{format:this.globalStyles.get(B.style.name)},this.isServerRendered)):de+=B.value:de+=this.parseCellValue(B.value);this.csvStr=de}parseCellValue(B){let de="",Be=B.length;for(let Fe=0;Fe<Be;Fe++)de+='"'===B[Fe]?B[Fe].replace('"','""'):B[Fe];return-1!==(B=de).indexOf(this.separator)||-1!==B.indexOf("\n")?B='"'+B+'"':B}save(B){if(this.buffer=new Blob(["\ufeff"+this.csvStr],{type:"text/csv;charset=UTF-8"}),this.isMicrosoftBrowser)navigator.msSaveBlob(this.buffer,B);else{let de=window.URL.createObjectURL(this.buffer),Be=document.createElementNS("http://www.w3.org/1999/xhtml","a");Be.download=B,Be.href=de;let Fe=document.createEvent("MouseEvent");Fe.initEvent("click",!0,!0),Be.dispatchEvent(Fe),setTimeout(()=>{window.URL.revokeObjectURL(de)})}}saveAsBlob(){return new Blob(["\ufeff"+this.csvStr],{type:"text/csv;charset=UTF-8"})}}class Se{constructor(){this.parts=[]}append(B){this.parts.push(B),this.blob=void 0}getBlob(){return new Blob(this.parts,{type:"text/plain"})}}class ue{}class _e{constructor(B,de,Be,Fe,xt){if(this.sharedStringCount=0,this.unitsProportions=[1.28,.32,96,96/25.4,96/2.54,1,96/72,96/72/12700],this.hyperlinkStyle={fontColor:"#0000FF",underline:!0},this.culture=void 0!==Be?Be:"en-US",this.currency=void 0!==Fe?Fe:"USD",this.intl=new u.eC(this.culture),this.mSaveType=de,"xlsx"===de){if(this.mArchive=new i.iA,this.sharedString=[],this.mFonts=[],this.mBorders=[],this.mStyles=[],this.printTitles=new Map,this.cellStyles=new Map,this.mNumFmt=new Map,this.mFills=new Map,this.mStyles.push(new Ue),this.mFonts.push(new Zt),this.cellStyles.set("Normal",new ut),this.mCellXfs=[],this.mCellStyleXfs=[],this.drawingCount=0,this.imageCount=0,null!=B.styles){this.globalStyles=new Map;for(let $t=0;$t<B.styles.length;$t++)if(void 0!==B.styles[$t].name){if(this.cellStyles.has(B.styles[$t].name))throw Error("Style name "+B.styles[$t].name+" is already existed");{let ji=new Ue;ji.isGlobalStyle=!0,this.parserCellStyle(B.styles[$t],ji,"none");let is=new ut;is.name=ji.name,is.xfId=ji.index-1,this.cellStyles.set(is.name,is);let zi={};void 0!==B.styles[$t].numberFormat&&(zi.format=B.styles[$t].numberFormat),zi.type=void 0!==B.styles[$t].type?B.styles[$t].type:"datetime",void 0!==zi.format&&this.globalStyles.set(B.styles[$t].name,zi)}}}if(null==B.worksheets)throw Error("Worksheet is expected.");this.parserWorksheets(B.worksheets),null!=B.builtInProperties&&(this.builtInProperties=new lt,this.parserBuiltInProperties(B.builtInProperties,this.builtInProperties))}else this.csvHelper=new be(B,xt)}parserBuiltInProperties(B,de){null!=B.author&&(de.author=B.author),null!=B.comments&&(de.comments=B.comments),null!=B.category&&(de.category=B.category),null!=B.company&&(de.company=B.company),null!=B.manager&&(de.manager=B.manager),null!=B.subject&&(de.subject=B.subject),null!=B.title&&(de.title=B.title),null!=B.createdDate&&(de.createdDate=B.createdDate),null!=B.modifiedDate&&(de.modifiedDate=B.modifiedDate),null!=B.tags&&(de.tags=B.tags),null!=B.status&&(de.status=B.status)}parserWorksheets(B){this.worksheets=new Nt;let de=B.length;for(let Be=0;Be<de;Be++){let Fe=B[Be],xt=new Di;this.mergeCells=new ve,this.mergedCellsStyle=new Map,this.mHyperLinks=[],xt.name=null!=Fe.name?Fe.name:"Sheet"+(Be+1).toString(),null!=Fe.enableRtl&&(xt.enableRtl=Fe.enableRtl),xt.index=Be+1,null!=Fe.columns&&this.parserColumns(Fe.columns,xt),null!=Fe.rows&&this.parserRows(Fe.rows,xt),null!=Fe.showGridLines&&(xt.showGridLines=Fe.showGridLines),null!=Fe.freeze&&this.parserFreezePanes(Fe.freeze,xt),null!=Fe.printTitle&&this.parserPrintTitle(Fe.printTitle,xt),void 0!==Fe.pageSetup&&void 0!==Fe.pageSetup.isSummaryRowBelow&&(xt.isSummaryRowBelow=Fe.pageSetup.isSummaryRowBelow),void 0!==Fe.images&&this.parserImages(Fe.images,xt),null!=Fe.autoFilters&&this.parseFilters(Fe.autoFilters,xt),xt.index=Be+1,xt.mergeCells=this.mergeCells,xt.hyperLinks=this.mHyperLinks,this.worksheets.push(xt)}}mergeOptions(B,de){let Be={};return this.applyProperties(B,Be),this.applyProperties(de,Be),Be}applyProperties(B,de){let Be=Object.keys(B);for(let Fe=0;Fe<Be.length;Fe++)"name"!==Be[Fe]&&(de[Be[Fe]]=B[Be[Fe]])}getCellName(B,de){return this.getColumnName(de)+B.toString()}getColumnName(B){B--;let de="";do{let Be=B%26;B=B/26-1,de=String.fromCharCode(65+Be)+de}while(B>=0);return de}parserPrintTitle(B,de){let Fe,xt,Be="";if(null!=B.fromRow){let ji;ji=null!=B.toRow?B.toRow:B.fromRow,Fe="$"+B.fromRow+":$"+ji}if(null!=B.fromColumn){let ji;ji=null!=B.toColumn?B.toColumn:B.fromColumn,xt="$"+this.getColumnName(B.fromColumn)+":$"+this.getColumnName(ji)}void 0!==Fe&&(Be+=de.name+"!"+Fe),void 0!==xt&&void 0!==Fe?Be+=","+de.name+"!"+xt:void 0!==xt&&(Be+=de.name+"!"+xt),""!==Be&&this.printTitles.set(de.index-1,Be)}parserFreezePanes(B,de){de.freezePanes=new z,de.freezePanes.row=null!=B.row?B.row:0,de.freezePanes.column=null!=B.column?B.column:0,de.freezePanes.leftCell=this.getCellName(de.freezePanes.row+1,de.freezePanes.column+1)}parserColumns(B,de){let Be=B.length;de.columns=[];for(let Fe=0;Fe<Be;Fe++){let xt=new Oe;if(null==B[Fe].index)throw Error("Column index is missing.");xt.index=B[Fe].index,null!=B[Fe].width&&(xt.width=B[Fe].width),de.columns.push(xt)}}parserRows(B,de){let Be=B.length;de.rows=new jt;let Fe=0;for(let xt=0;xt<Be;xt++){let $t=this.parserRow(B[xt],Fe);Fe=$t.index,de.rows.add($t)}this.insertMergedCellsStyle(de)}insertMergedCellsStyle(B){this.mergeCells.length>0&&this.mergedCellsStyle.forEach((de,Be)=>{let Fe=B.rows.filter(xt=>xt.index===de.y)[0];if((0,u.le)(Fe)){let xt=B.rows.filter(is=>is.index<=de.y),$t=new ft;$t.index=de.y,$t.cells=new at,$t.cells.add(this.createCell(de,Be));let ji=0;xt.length>0&&(ji=B.rows.indexOf(xt[xt.length-1])+1),B.rows.splice(ji,0,$t)}else{let xt=Fe.cells.filter($t=>$t.index===de.x)[0];if((0,u.le)(xt)){let $t=Fe.cells.filter(is=>is.index<=de.x),ji=0;$t.length>0&&(ji=Fe.cells.indexOf($t[$t.length-1])+1),Fe.cells.splice(ji,0,this.createCell(de,Be))}else xt.styleIndex=de.styleIndex}})}createCell(B,de){let Be=new E;return Be.refName=de,Be.index=B.x,Be.cellStyle=new Ue,Be.styleIndex=B.styleIndex,Be}parserRow(B,de){let Be=new ft;if(null!=B.height&&(Be.height=B.height),null==B.index)throw Error("Row index is missing.");return Be.index=B.index,null!=B.grouping&&this.parseGrouping(B.grouping,Be),this.parseCells(B.cells,Be),Be}parseGrouping(B,de){de.grouping=new Rt,void 0!==B.outlineLevel&&(de.grouping.outlineLevel=B.outlineLevel),void 0!==B.isCollapsed&&(de.grouping.isCollapsed=B.isCollapsed),void 0!==B.isHidden&&(de.grouping.isHidden=B.isHidden)}parseCells(B,de){de.cells=new at;let Be=void 0!==B?B.length:0,Fe=1,xt=1;for(let $t=0;$t<Be;$t++){let ji=B[$t],is=new E;if(null==ji.index)throw Error("Cell index is missing.");if(is.index=ji.index,is.index<Fe?Fe=is.index:is.index>xt&&(xt=is.index),is.refName=this.getCellName(de.index,is.index),is.rowSpan=null!=ji.rowSpan?ji.rowSpan-1:0,is.colSpan=null!=ji.colSpan?ji.colSpan-1:0,null!=ji.hyperlink){let zi=new bt;void 0!==ji.hyperlink.target&&(zi.target=ji.hyperlink.target,is.value=void 0!==ji.hyperlink.displayText?ji.hyperlink.displayText:ji.hyperlink.target,is.type=this.getCellValueType(is.value),zi.ref=is.refName,zi.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(zi),is.cellStyle=new Ue,this.parserCellStyle(void 0!==ji.style?this.mergeOptions(ji.style,this.hyperlinkStyle):this.hyperlinkStyle,is.cellStyle,"string"),is.styleIndex=is.cellStyle.index)}null!=ji.formula&&(is.formula=ji.formula,is.type="formula"),null!=ji.value&&(void 0!==is.formula?is.value=0:(is.value=ji.value,is.type=this.getCellValueType(is.value))),null!=ji.style&&void 0===is.styleIndex?(is.cellStyle=new Ue,is.value instanceof Date?this.parserCellStyle(ji.style,is.cellStyle,is.type,14):this.parserCellStyle(ji.style,is.cellStyle,is.type),is.styleIndex=is.cellStyle.index):is.value instanceof Date&&(is.cellStyle=new Ue,this.parserCellStyle({},is.cellStyle,is.type,14),is.styleIndex=is.cellStyle.index),this.parseCellType(is),this.mergeCells=this.processMergeCells(is,de.index,this.mergeCells),de.cells.add(is)}de.spans=Fe+":"+xt}GetColors(){let B;return B=new Map,B.set("WHITE","FFFFFFFF"),B.set("SILVER","FFC0C0C0"),B.set("GRAY","FF808080"),B.set("BLACK","FF000000"),B.set("RED","FFFF0000"),B.set("MAROON","FF800000"),B.set("YELLOW","FFFFFF00"),B.set("OLIVE","FF808000"),B.set("LIME","FF00FF00"),B.set("GREEN","FF008000"),B.set("AQUA","FF00FFFF"),B.set("TEAL","FF008080"),B.set("BLUE","FF0000FF"),B.set("NAVY","FF000080"),B.set("FUCHSIA","FFFF00FF"),B.set("PURPLE","FF800080"),B}processColor(B){return 0===B.indexOf("#")?B.replace("#","FF"):(B=B.toUpperCase(),this.rgbColors=this.GetColors(),B=this.rgbColors.has(B)?this.rgbColors.get(B):"FF000000")}processCellValue(B,de){let Be=B;if(-1!==B.indexOf("<font")||-1!==B.indexOf("<a")||-1!==B.indexOf("<b>")||-1!==B.indexOf("<i>")||-1!==B.indexOf("<u>")){let Fe="",xt=B.indexOf("<",0),$t=B.indexOf(">",xt+1);if(xt>=0&&$t>=0){for(0!==xt&&(Fe+='<r><t xml:space="preserve">'+this.processString(B.substring(0,xt))+"</t></r>");xt>=0&&$t>=0;)if($t=B.indexOf(">",xt+1),$t>=0){let ji=B.substring(xt+1,$t);xt=B.indexOf("<",$t+1),xt<0&&(xt=Be.length);let is=Be.substring($t+1,xt);if(0!==is.length){let zi=ji.split(" ");if(zi.length>0&&(Fe+="<r><rPr>"),zi.length>1)for(let ui of zi)switch(ui.trim().substring(0,5)){case"size=":Fe+='<sz val="'+ui.substring(6,ui.length-1)+'"/>';break;case"face=":Fe+='<rFont val="'+ui.substring(6,ui.length-1)+'"/>';break;case"color":Fe+='<color rgb="'+this.processColor(ui.substring(7,ui.length-1))+'"/>';break;case"href=":let oi=new bt;oi.target=ui.substring(6,ui.length-1).trim(),oi.ref=de.refName,oi.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(oi),Fe+='<color rgb="FF0000FF"/><u/><b/>'}else if(1===zi.length)switch(zi[0].trim()){case"b":Fe+="<b/>";break;case"i":Fe+="<i/>";break;case"u":Fe+="<u/>"}Fe+='</rPr><t xml:space="preserve">'+this.processString(is)+"</t></r>"}}return""===Fe?Be:Fe}return Be}return Be}applyGlobalStyle(B,de){this.cellStyles.has(B.name)&&(de.index=this.mStyles.filter(Be=>Be.name===B.name)[0].index,de.name=B.name)}parserCellStyle(B,de,Be,Fe){if(null!=B.name){if(!de.isGlobalStyle)return void this.applyGlobalStyle(B,de);de.name=B.name}null!=B.backColor&&(de.backColor=B.backColor),de.borders=new gt,null!=B.borders&&this.parserBorder(B.borders,de.borders.all),null!=B.leftBorder&&this.parserBorder(B.leftBorder,de.borders.left),null!=B.rightBorder&&this.parserBorder(B.rightBorder,de.borders.right),null!=B.topBorder&&this.parserBorder(B.topBorder,de.borders.top),null!=B.bottomBorder&&this.parserBorder(B.bottomBorder,de.borders.bottom),null!=B.fontName&&(de.fontName=B.fontName),null!=B.fontSize&&(de.fontSize=B.fontSize),null!=B.fontColor&&(de.fontColor=B.fontColor),null!=B.italic&&(de.italic=B.italic),null!=B.bold&&(de.bold=B.bold),null!=B.hAlign&&(de.hAlign=B.hAlign.toLowerCase()),null!=B.indent&&(de.indent=B.indent,"left"===de.hAlign||"right"===de.hAlign||(de.hAlign="left")),null!=B.rotation&&(de.rotation=B.rotation),null!=B.vAlign&&(de.vAlign=B.vAlign.toLowerCase()),null!=B.underline&&(de.underline=B.underline),null!=B.strikeThrough&&(de.strikeThrough=B.strikeThrough),null!=B.wrapText&&(de.wrapText=B.wrapText),null!=B.numberFormat?de.numberFormat=this.getNumberFormat(B.numberFormat,null!=B.type?B.type:Be):(void 0!==Fe&&(de.numFmtId=14),de.numberFormat="GENERAL"),de.index=this.processCellStyle(de)}switchNumberFormat(B,de){let Be=this.getNumberFormat(B,de);if(Be!==B){let Fe=this.mNumFmt.get(B);if(void 0!==Fe&&(Fe.formatCode=Be,this.mNumFmt.has(Be))){for(let xt of this.mCellStyleXfs)xt.numFmtId===Fe.numFmtId&&(xt.numFmtId=this.mNumFmt.get(Be).numFmtId);for(let xt of this.mCellXfs)xt.numFmtId===Fe.numFmtId&&(xt.numFmtId=this.mNumFmt.get(Be).numFmtId)}}}getNumberFormat(B,de){let Be;switch(de){case"number":try{Be=this.intl.getNumberPattern({format:B,currency:this.currency,useGrouping:!0},!0)}catch{Be=B}break;case"datetime":try{Be=this.intl.getDatePattern({skeleton:B,type:"dateTime"},!0)}catch{try{Be=this.intl.getDatePattern({format:B,type:"dateTime"},!0)}catch{Be=B}}break;case"date":try{Be=this.intl.getDatePattern({skeleton:B,type:"date"},!0)}catch{try{Be=this.intl.getDatePattern({format:B,type:"date"},!0)}catch{Be=B}}break;case"time":try{Be=this.intl.getDatePattern({skeleton:B,type:"time"},!0)}catch{try{Be=this.intl.getDatePattern({format:B,type:"time"},!0)}catch{Be=B}}break;default:Be=B}return Be}parserBorder(B,de){de.color=null!=B.color?B.color:"#000000",de.lineStyle=null!=B.lineStyle?B.lineStyle:"thin"}processCellStyle(B){if(B.isGlobalStyle)return this.processNumFormatId(B),this.mStyles.push(B),this.mStyles.length;{let de=this.compareStyle(B);return de.result?de.index:(this.processNumFormatId(B),this.mStyles.push(B),this.mStyles.length)}}processNumFormatId(B){"GENERAL"===B.numberFormat||this.mNumFmt.has(B.numberFormat)||this.mNumFmt.set(B.numberFormat,new Si(this.mNumFmt.size+164,B.numberFormat))}isNewFont(B){let de=!1,Be=0;for(let Fe of this.mFonts){let xt;if(Be++,void 0!==B.fontColor&&(xt="FF"+B.fontColor.replace("#","")),de=Fe.color===xt&&Fe.b===B.bold&&Fe.i===B.italic&&Fe.u===B.underline&&Fe.strike===B.strikeThrough&&Fe.name===B.fontName&&Fe.sz===B.fontSize,de)break}return Be-=1,{index:Be,result:de}}isNewBorder(B){let de=new Ue;return this.isAllBorder(B.borders)?de.borders.all.color===B.borders.all.color&&de.borders.all.lineStyle===B.borders.all.lineStyle:de.borders.left.color===B.borders.left.color&&de.borders.left.lineStyle===B.borders.left.lineStyle&&de.borders.right.color===B.borders.right.color&&de.borders.right.lineStyle===B.borders.right.lineStyle&&de.borders.top.color===B.borders.top.color&&de.borders.top.lineStyle===B.borders.top.lineStyle&&de.borders.bottom.color===B.borders.bottom.color&&de.borders.bottom.lineStyle===B.borders.bottom.lineStyle}isAllBorder(B){let de=new Ue;return de.borders.all.color!==B.all.color&&de.borders.all.lineStyle!==B.all.lineStyle}compareStyle(B){let de=!0,Be=0;for(let Fe of this.mStyles)if(de=!Fe.isGlobalStyle&&Fe.backColor===B.backColor&&Fe.bold===B.bold&&Fe.numFmtId===B.numFmtId&&Fe.numberFormat===B.numberFormat&&Fe.type===B.type&&Fe.fontColor===B.fontColor&&Fe.fontName===B.fontName&&Fe.fontSize===B.fontSize&&Fe.hAlign===B.hAlign&&Fe.italic===B.italic&&Fe.underline===B.underline&&Fe.strikeThrough===B.strikeThrough&&Fe.vAlign===B.vAlign&&Fe.indent===B.indent&&Fe.rotation===B.rotation&&Fe.wrapText===B.wrapText&&Fe.borders.all.color===B.borders.all.color&&Fe.borders.all.lineStyle===B.borders.all.lineStyle&&Fe.borders.left.color===B.borders.left.color&&Fe.borders.left.lineStyle===B.borders.left.lineStyle&&Fe.borders.right.color===B.borders.right.color&&Fe.borders.right.lineStyle===B.borders.right.lineStyle&&Fe.borders.top.color===B.borders.top.color&&Fe.borders.top.lineStyle===B.borders.top.lineStyle&&Fe.borders.bottom.color===B.borders.bottom.color&&Fe.borders.bottom.lineStyle===B.borders.bottom.lineStyle,de){Be=Fe.index;break}return{index:Be,result:de}}contains(B,de){let Be=B.indexOf(de);return Be>-1&&Be<B.length}getCellValueType(B){return B instanceof Date?"datetime":"boolean"==typeof B?"boolean":"number"==typeof B?"number":"string"}parseCellType(B){let Be,Fe=B.value;switch(B.type){case"datetime":if(Fe=this.toOADate(Fe),void 0!==B.cellStyle&&void 0!==B.cellStyle.name&&this.globalStyles.has(B.cellStyle.name)){let $t=this.globalStyles.get(B.cellStyle.name);this.switchNumberFormat($t.format,$t.type)}Be="n";break;case"boolean":Fe=Fe?1:0,Be="b";break;case"number":Be="n",void 0!==B.cellStyle&&void 0!==B.cellStyle.name&&this.globalStyles.has(B.cellStyle.name)&&this.switchNumberFormat(this.globalStyles.get(B.cellStyle.name).format,"number");break;case"string":this.sharedStringCount++,Be="s";let xt=this.processCellValue(Fe,B);this.contains(this.sharedString,xt)||this.sharedString.push(xt),Fe=this.sharedString.indexOf(xt)}B.saveType=Be,B.value=Fe}parserImages(B,de){let Be=B.length;de.images=[];for(let Fe=0;Fe<Be;Fe++){let xt=this.parserImage(B[Fe]);de.images.push(xt)}}parseFilters(B,de){if(de.autoFilters=new ue,null==B.row)throw new Error("Argument Null Exception: row null or empty");if(de.autoFilters.row=B.row,null==B.lastRow)throw new Error("Argument Null Exception: lastRow cannot be null or empty");if(de.autoFilters.lastRow=B.lastRow,null==B.column)throw new Error("Argument Null Exception: column cannot be null or empty");if(de.autoFilters.column=B.column,null===B.lastColumn||void 0===B.row)throw new Error("Argument Null Exception: lastColumn cannot be null or empty");de.autoFilters.lastColumn=B.lastColumn}parserImage(B){let de=new Ne;return null!=B.image&&(de.image=B.image),null!=B.row&&(de.row=B.row),null!=B.column&&(de.column=B.column),null!=B.lastRow&&(de.lastRow=B.lastRow),null!=B.lastColumn&&(de.lastColumn=B.lastColumn),null!=B.width&&(de.width=B.width),null!=B.height&&(de.height=B.height),null!=B.horizontalFlip&&(de.horizontalFlip=B.horizontalFlip),null!=B.verticalFlip&&(de.verticalFlip=B.verticalFlip),null!=B.rotation&&(de.rotation=B.rotation),de}saveAsBlob(B){return new Promise("text/csv"===B?(de,Be)=>{let Fe={};Fe.blobData=this.csvHelper.saveAsBlob(),de(Fe)}:(de,Be)=>{this.saveInternal(),this.mArchive.saveAsBlob().then(Fe=>{let xt={};xt.blobData=new Blob([Fe],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),de(xt)})})}save(B,de){if(null==B||""===B)throw new Error("Argument Null Exception: fileName cannot be null or empty");let Be=B.match(".xlsx$"),Fe=B.match(".csv$");if(null!==Be&&Be[0]==="."+this.mSaveType)this.saveInternal(),this.mArchive.save(B).then(()=>{this.mArchive.destroy()});else{if(null===Fe||Fe[0]!=="."+this.mSaveType)throw Error("Save type and file extension is different.");this.csvHelper.save(B)}}saveInternal(){this.saveWorkbook(),this.saveWorksheets(),this.saveSharedString(),this.saveStyles(),this.saveApp(this.builtInProperties),this.saveCore(this.builtInProperties),this.saveContentType(),this.saveTopLevelRelation(),this.saveWorkbookRelation()}saveWorkbook(){let B='<?xml version="1.0" encoding="utf-8"?><workbook xmlns:r = "http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns= "http://schemas.openxmlformats.org/spreadsheetml/2006/main"><workbookPr codeName="ThisWorkbook" defaultThemeVersion= "153222"/><bookViews><workbookView activeTab="0"/></bookViews>',de="<sheets>",Be=this.worksheets.length;for(let Fe=0;Fe<Be;Fe++){let xt=this.worksheets[Fe].name;xt=xt.replace("&","&amp;"),xt=xt.replace("<","&lt;"),xt=xt.replace(">","&gt;"),xt=xt.replace('"',"&quot;"),de+='<sheet name="'+xt+'" sheetId="'+(Fe+1).toString()+'" r:id ="rId'+(Fe+1).toString()+'" />'}if(de+="</sheets>",B+=de,this.printTitles.size>0){let Fe="<definedNames>";this.printTitles.forEach((xt,$t)=>{Fe+='<definedName name="_xlnm.Print_Titles" localSheetId="'+$t+'">'+xt+"</definedName>"}),Fe+="</definedNames>",B+=Fe}this.addToArchive(B+"</workbook>","xl/workbook.xml")}saveWorksheets(){let B=this.worksheets.length;for(let de=0;de<B;de++)this.saveWorksheet(this.worksheets[de],de)}saveWorksheet(B,de){let Be=new Se,Fe='<?xml version="1.0" encoding="utf-8" standalone="yes"?><worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';if(Fe+=B.isSummaryRowBelow?"<sheetPr />":'<sheetPr><outlinePr summaryBelow="0" ></outlinePr></sheetPr>',Fe+=this.saveSheetView(B),void 0!==B.columns){let xt="<cols>";for(let $t of B.columns)xt+=void 0!==$t.width?'<col min="'+$t.index+'" max="'+$t.index+'" width="'+this.pixelsToColumnWidth($t.width)+'" customWidth="1" />':'<col min="'+$t.index+'" max="'+$t.index+'" width="8.43" customWidth="1" />';Fe+=xt+"</cols>"}if(Fe+="<sheetData>",Be.append(Fe),Fe="",void 0!==B.rows)for(let xt of B.rows){let $t='<row r="'+xt.index+'" ';(0,u.le)(xt.spans)||($t+='spans="'+xt.spans+'" '),void 0!==xt.height&&($t+='ht="'+this.pixelsToRowHeight(xt.height)+'" customHeight="1" '),void 0!==xt.grouping&&(xt.grouping.isHidden&&($t+='hidden="1" '),void 0!==xt.grouping.outlineLevel&&($t+='outlineLevel="'+xt.grouping.outlineLevel+'" '),xt.grouping.isCollapsed&&($t+='collapsed="1" ')),$t+=">";for(let ji of xt.cells)void 0!==ji&&(void 0!==ji.value||void 0!==ji.cellStyle)&&($t+='<c r="'+ji.refName+'" ',void 0!==ji.saveType&&($t+='t="'+ji.saveType+'" '),void 0!==ji.styleIndex&&($t+='s="'+ji.styleIndex+'" '),$t+=" >",void 0!==ji.formula&&($t+="<f>"+ji.formula+"</f>"),$t+=void 0!==ji.value?"<v>"+ji.value+"</v></c>":"</c>");$t+="</row>",Be.append($t)}if(Fe+="</sheetData>",null!=B.autoFilters&&(Fe+='<autoFilter ref="'+this.getCellName(B.autoFilters.row,B.autoFilters.column)+":"+this.getCellName(B.autoFilters.lastRow,B.autoFilters.lastColumn)+'"/>'),B.mergeCells.length>0){Fe+='<mergeCells count="'+B.mergeCells.length+'">';for(let xt of B.mergeCells)Fe+='<mergeCell ref="'+xt.ref+'" />';Fe+="</mergeCells>"}if(B.hyperLinks.length>0){Fe+="<hyperlinks>";for(let xt of B.hyperLinks)Fe+='<hyperlink ref="'+xt.ref+'" r:id="rId'+xt.rId+'" />';Fe+="</hyperlinks>"}Fe+='<pageMargins left="0.75" right="0.75" top="1" bottom="1" header="0.5" footer="0.5" /><headerFooter scaleWithDoc="1" alignWithMargins="0" differentFirst="0" differentOddEven="0" />',null!=B.images&&B.images.length>0&&(this.drawingCount++,this.saveDrawings(B,B.index),Fe+='<drawing r:id="rId'+(B.hyperLinks.length+1)+'"/>'),this.addToArchive(this.saveSheetRelations(B),"xl/worksheets/_rels/sheet"+B.index+".xml.rels"),Be.append(Fe+"</worksheet>"),this.addToArchive(Be.getBlob(),"xl/worksheets/sheet"+(de+1)+".xml")}saveDrawings(B,de){let Be=new Se,Fe='<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">';if(void 0!==B.images){let xt=0;for(let $t of B.images){void 0!==$t.height&&void 0!==$t.width?(this.updatelastRowOffset(B,$t),this.updatelastColumnOffSet(B,$t)):void 0!==$t.lastRow&&void 0!==$t.lastColumn&&($t.lastRowOffset=0,$t.lastColOffset=0),xt++,Fe+='<xdr:twoCellAnchor editAs="oneCell">',Fe+="<xdr:from><xdr:col>",Fe+=$t.column-1,Fe+="</xdr:col><xdr:colOff>",Fe+=0,Fe+="</xdr:colOff><xdr:row>",Fe+=$t.row-1,Fe+="</xdr:row><xdr:rowOff>",Fe+=0,Fe+="</xdr:rowOff></xdr:from>",Fe+="<xdr:to><xdr:col>",Fe+=$t.lastColumn,Fe+="</xdr:col><xdr:colOff>",Fe+=$t.lastColOffset,Fe+="</xdr:colOff><xdr:row>",Fe+=$t.lastRow,Fe+="</xdr:row><xdr:rowOff>",Fe+=$t.lastRowOffset,Fe+="</xdr:rowOff></xdr:to>",Fe+="<xdr:pic>",Fe+="<xdr:nvPicPr>",Fe+='<xdr:cNvPr id="'+xt+'" name="Picture '+xt+'"> </xdr:cNvPr>',Fe+='<xdr:cNvPicPr><a:picLocks noChangeAspect="1"/></xdr:cNvPicPr> </xdr:nvPicPr>',Fe+="<xdr:blipFill>",Fe+='<a:blip xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:embed="rId'+xt+'" cstate="print">',Fe+="</a:blip><a:stretch><a:fillRect /></a:stretch></xdr:blipFill>",Fe+="<xdr:spPr>",Fe+="<a:xfrm",null!=$t.rotation&&$t.rotation<=3600&&$t.rotation>=-3600&&(Fe+=' rot="'+6e4*$t.rotation+'"'),null!=$t.verticalFlip&&0!=$t.verticalFlip&&(Fe+=' flipV="1"'),null!=$t.horizontalFlip&&0!=$t.horizontalFlip&&(Fe+=' flipH="1"'),Fe+="/>",Fe+='<a:prstGeom prst="rect"><a:avLst /></a:prstGeom></xdr:spPr>',Fe+="</xdr:pic><xdr:clientData /></xdr:twoCellAnchor>";let ji=this.convertBase64toImage($t.image);this.imageCount+=1,this.addToArchive(ji,"xl/media/image"+this.imageCount+".png")}Be.append(Fe),Be.append("</xdr:wsDr>"),this.saveDrawingRelations(B),this.addToArchive(Be.getBlob(),"xl/drawings/drawing"+this.drawingCount+".xml")}}updatelastRowOffset(B,de){let Be=de.height,Fe=de.row,xt=0;for(;Be>=0;){let $t=0;$t=this.convertToPixels(void 0!==B.rows&&void 0!==B.rows[Fe-1]?void 0===B.rows[Fe-1].height?15:B.rows[Fe-1].height:15);let ji=$t-xt*$t/256;if(ji>Be){de.lastRow=Fe,de.lastRowOffset=xt+256*Be/$t;let is=0;is=this.convertToPixels(void 0!==B.rows&&void 0!==B.rows[Fe-1]?void 0===B.rows[Fe-1].height?15:B.rows[Fe-1].height:15),de.lastRowOffset=is*de.lastRowOffset/256,de.lastRowOffset=Math.round(de.lastRowOffset/this.unitsProportions[7]);break}Be-=ji,Fe++,xt=0}}updatelastColumnOffSet(B,de){let Be=de.width,Fe=de.column,xt=0;for(;Be>=0;){let $t=0;$t=this.ColumnWidthToPixels(void 0!==B.columns&&void 0!==B.columns[Fe-1]?void 0===B.columns[Fe-1].width?8.43:B.columns[Fe-1].width:8.43);let ji=$t-xt*$t/1024;if(ji>Be){de.lastColumn=Fe,de.lastColOffset=xt+1024*Be/$t;let is=0;is=this.ColumnWidthToPixels(void 0!==B.columns&&void 0!==B.columns[Fe-1]?void 0===B.columns[Fe-1].width?8.43:B.columns[Fe].width:8.43),de.lastColOffset=is*de.lastColOffset/1024,de.lastColOffset=Math.round(de.lastColOffset/this.unitsProportions[7]);break}Be-=ji,Fe++,xt=0}}convertToPixels(B){return B*this.unitsProportions[6]}convertBase64toImage(B){const de=window.atob(B),Be=new ArrayBuffer(de.length),Fe=new Uint8Array(Be);for(let $t=0;$t<de.length;$t++)Fe[$t]=de.charCodeAt($t);return new Blob([Fe],{type:"image/png"})}saveDrawingRelations(B){let de='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',Be=B.images.length,Fe=this.imageCount-B.images.length;for(let xt=1;xt<=Be;xt++)Fe++,de+='<Relationship Id="rId'+xt+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="../media/image'+Fe+'.png" />';this.addToArchive(de+"</Relationships>","xl/drawings/_rels/drawing"+this.drawingCount+".xml.rels")}pixelsToColumnWidth(B){let Be=B>12?this.trunc((B-5)/7*100+.5)/100:B/12;return Be>1?(7*Be+5)/7*256/256:12*Be/7*256/256}ColumnWidthToPixels(B){return this.trunc((256*(B>1?(7*B+5)/7*256/256:12*B/7*256/256)+this.trunc(128/7))/256*7)}trunc(B){let de=B-B%1;return 0===de&&(B<0||0===B&&1/B!=1/0)?-0:de}pixelsToRowHeight(B){return B*this.unitsProportions[5]/this.unitsProportions[6]}saveSheetRelations(B){let de='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';for(let Be of B.hyperLinks)de+='<Relationship Id="rId'+Be.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+this.processString(Be.target)+'" TargetMode="External" />';return null!=B.images&&B.images.length>0&&(de+='<Relationship Id="rId'+(B.hyperLinks.length+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+this.drawingCount+'.xml" />'),de+="</Relationships>",de}saveSheetView(B){let de='<sheetViews><sheetView workbookViewId="0" ';return!0===B.enableRtl&&(de+='rightToLeft="1"'),de+=!1===B.showGridLines?'showGridLines="0" >':">",void 0!==B.freezePanes&&(de+='<pane state="frozen" topLeftCell="'+B.freezePanes.leftCell+'" ',0!==B.freezePanes.row&&(de+='ySplit="'+B.freezePanes.row+'" '),0!==B.freezePanes.column&&(de+='xSplit="'+B.freezePanes.column+'" '),de+="/>"),de+="</sheetView></sheetViews > ",de}saveSharedString(){let B=this.sharedString.length;if(B>0){let de='<?xml version="1.0" encoding="utf-8"?><sst uniqueCount="'+B+'" count="'+this.sharedStringCount+'" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',Be="";for(let Fe=0;Fe<B;Fe++)0!==this.sharedString[Fe].indexOf("<r>")?(Be+="<si><t>",Be+=this.processString(this.sharedString[Fe]),Be+="</t></si>"):(Be+="<si>",Be+=this.sharedString[Fe],Be+="</si>");Be+="</sst>",this.addToArchive(de+Be,"xl/sharedStrings.xml")}}processString(B){return-1!==B.indexOf("&")&&(B=B.replace(/&/g,"&amp;")),-1!==B.indexOf("<")&&(B=B.replace(/</g,"&lt;")),-1!==B.indexOf(">")&&(B=B.replace(/>/g,"&gt;")),B}saveStyles(){this.updateCellXfsStyleXfs();let B='<?xml version="1.0" encoding="utf-8"?><styleSheet xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';B+=this.saveNumberFormats(),B+=this.saveFonts(),B+=this.saveFills(),B+=this.saveBorders(),B+=this.saveCellStyleXfs(),B+=this.saveCellXfs(),B+=this.saveCellStyles(),this.addToArchive(B+"</styleSheet>","xl/styles.xml")}updateCellXfsStyleXfs(){for(let B of this.mStyles){let de;B.isGlobalStyle?(de=new Lt,de.xfId=B.index-1):(de=new $e,de.xfId=0);let Be=this.isNewFont(B);if(Be.result)de.fontId=Be.index;else{let Fe=new Zt;Fe.b=B.bold,Fe.i=B.italic,Fe.name=B.fontName,Fe.sz=B.fontSize,Fe.u=B.underline,Fe.strike=B.strikeThrough,Fe.color="FF"+B.fontColor.replace("#",""),this.mFonts.push(Fe),de.fontId=this.mFonts.length-1}if("none"!==B.backColor){let Fe="FF"+B.backColor.replace("#","");if(this.mFills.has(Fe)){let xt=this.mFills.get(Fe);de.fillId=xt}else{let xt=this.mFills.size+2;this.mFills.set(Fe,xt),de.fillId=xt}}else de.fillId=0;if(this.isNewBorder(B)?de.borderId=0:(this.mBorders.push(B.borders),de.borderId=this.mBorders.length),"GENERAL"!==B.numberFormat)if(this.mNumFmt.has(B.numberFormat)){let Fe=this.mNumFmt.get(B.numberFormat);de.numFmtId=Fe.numFmtId}else{let Fe=this.mNumFmt.size+164;this.mNumFmt.set(B.numberFormat,new Si(Fe,B.numberFormat)),de.numFmtId=Fe}else de.numFmtId="GENERAL"===B.numberFormat&&14===B.numFmtId?14:0;B.isGlobalStyle||(de.applyAlignment=1),de.alignment=new Li,de.alignment.indent=B.indent,de.alignment.horizontal=B.hAlign,de.alignment.vertical=B.vAlign,de.alignment.wrapText=B.wrapText?1:0,de.alignment.rotation=B.rotation,B.isGlobalStyle?(this.mCellStyleXfs.push(de),this.mCellXfs.push(de)):this.mCellXfs.push(de)}}saveNumberFormats(){if(this.mNumFmt.size>=1){let B='<numFmts count="'+this.mNumFmt.size+'">';return this.mNumFmt.forEach((de,Be)=>{B+='<numFmt numFmtId="'+de.numFmtId+'" formatCode="'+de.formatCode.replace(/"/g,"&quot;")+'" />'}),B+="</numFmts>"}return""}saveFonts(){let B='<fonts count="'+this.mFonts.length+'">';if(this.mFonts.length>=1)for(let de of this.mFonts)B+="<font>",de.b&&(B+="<b />"),de.i&&(B+="<i />"),de.u&&(B+="<u />"),de.strike&&(B+="<strike />"),B+='<sz val="'+de.sz+'" />',B+='<color rgb="'+de.color+'" />',B+='<name val="'+de.name+'" /></font>';return B+"</fonts>"}saveFills(){let B='<fills count="'+(this.mFills.size+2)+'"><fill><patternFill patternType="none"></patternFill></fill><fill><patternFill patternType="gray125"></patternFill></fill>';return this.mFills.size>=1&&this.mFills.forEach((de,Be)=>{B+='<fill><patternFill patternType="solid"><fgColor rgb="'+Be+'" /><bgColor rgb="FFFFFFFF" /></patternFill></fill>'}),B+"</fills>"}saveBorders(){let B='<borders count="'+(this.mBorders.length+1)+'"><border><left /><right /><top /><bottom /><diagonal /></border>';if(this.mBorders.length>=1)for(let de of this.mBorders)if(this.isAllBorder(de)){let Be=de.all.color.replace("#",""),Fe=de.all.lineStyle;B+='<border><left style="'+Fe+'"><color rgb="FF'+Be+'" /></left><right style="'+Fe+'"><color rgb="FF'+Be+'" /></right><top style="'+Fe+'"><color rgb="FF'+Be+'" /></top><bottom style="'+Fe+'"><color rgb="FF'+Be+'" /></bottom></border>'}else B+='<border><left style="'+de.left.lineStyle+'"><color rgb="FF'+de.left.color.replace("#","")+'" /></left><right style="'+de.right.lineStyle+'"><color rgb="FF'+de.right.color.replace("#","")+'" /></right><top style="'+de.top.lineStyle+'"><color rgb="FF'+de.top.color.replace("#","")+'" /></top><bottom style="'+de.bottom.lineStyle+'"><color rgb="FF'+de.bottom.color.replace("#","")+'" /></bottom></border>';return B+"</borders>"}saveCellStyles(){let B='<cellStyles  count="'+this.cellStyles.size+'">';return this.cellStyles.forEach((de,Be)=>{B+='<cellStyle name="'+Be+'" xfId="'+this.cellStyles.get(Be).xfId+'"',"Normal"===Be&&(B+=' builtinId="0"'),B+=" />"}),B+="</cellStyles>"}saveCellStyleXfs(){let B='<cellStyleXfs count="'+(this.mCellStyleXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" />';if(this.mCellStyleXfs.length>=1)for(let de of this.mCellStyleXfs)B+='<xf numFmtId="'+de.numFmtId+'" fontId="'+de.fontId+'" fillId="'+de.fillId+'" borderId="'+de.borderId+'" ',B+=void 0!==de.alignment?">"+this.saveAlignment(de)+"</xf>":" />";return B+"</cellStyleXfs>"}saveCellXfs(){let B='<cellXfs count="'+(this.mCellXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />';if(this.mCellXfs.length>=1)for(let de of this.mCellXfs)B+='<xf numFmtId="'+de.numFmtId+'" fontId="'+de.fontId+'" fillId="'+de.fillId+'" borderId="'+de.borderId+'" xfId="'+de.xfId+'" ',1===de.applyAlignment&&(B+='applyAlignment="1"'),B+=">"+this.saveAlignment(de)+"</xf>";return B+"</cellXfs>"}saveAlignment(B){let de="<alignment ";return void 0!==B.alignment.horizontal&&(de+='horizontal="'+B.alignment.horizontal+'" '),void 0!==B.alignment.indent&&0!==B.alignment.indent?de+='indent="'+B.alignment.indent+'" ':void 0!==B.alignment.rotation&&0!==B.alignment.rotation&&(de+='textRotation="'+B.alignment.rotation+'" '),void 0!==B.alignment.vertical&&(de+='vertical="'+B.alignment.vertical+'" '),de+='wrapText="'+B.alignment.wrapText+'" />',de}saveApp(B){let de='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>Essential XlsIO</Application>';void 0!==B&&(void 0!==B.manager&&(de+="<Manager>"+B.manager+"</Manager>"),void 0!==B.company&&(de+="<Company>"+B.company+"</Company>")),this.addToArchive(de+"</Properties>","docProps/app.xml")}saveCore(B){let de=new Date,Be='<?xml version="1.0" encoding="utf-8" standalone="yes"?><cp:coreProperties xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties">';void 0!==this.builtInProperties?(void 0!==B.author&&(Be+="<dc:creator>"+B.author+"</dc:creator>"),void 0!==B.subject&&(Be+="<dc:subject>"+B.subject+"</dc:subject>"),void 0!==B.category&&(Be+="<cp:category>"+B.category+"</cp:category>"),void 0!==B.comments&&(Be+="<dc:description>"+B.comments+"</dc:description>"),void 0!==B.title&&(Be+="<dc:title>"+B.title+"</dc:title>"),void 0!==B.tags&&(Be+="<cp:keywords>"+B.tags+"</cp:keywords>"),void 0!==B.status&&(Be+="<cp:contentStatus>"+B.status+"</cp:contentStatus>"),Be+=void 0!==B.createdDate?'<dcterms:created xsi:type="dcterms:W3CDTF">'+B.createdDate.toISOString()+"</dcterms:created>":'<dcterms:created xsi:type="dcterms:W3CDTF">'+de.toISOString()+"</dcterms:created>",Be+=void 0!==B.modifiedDate?'<dcterms:modified xsi:type="dcterms:W3CDTF">'+B.modifiedDate.toISOString()+"</dcterms:modified>":'<dcterms:modified xsi:type="dcterms:W3CDTF">'+de.toISOString()+"</dcterms:modified>"):(Be+='<dcterms:created xsi:type="dcterms:W3CDTF">'+de.toISOString()+"</dcterms:created>",Be+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+de.toISOString()+"</dcterms:modified>"),Be+="</cp:coreProperties>",this.addToArchive(Be,"docProps/core.xml")}saveTopLevelRelation(){this.addToArchive('<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml" /><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml" /><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml" /></Relationships>',"_rels/.rels")}saveWorkbookRelation(){let B='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',de=this.worksheets.length,Be=0;for(let Fe=0;Fe<de;Fe++,Be++)B+='<Relationship Id="rId'+(Fe+1).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(Fe+1).toString()+'.xml" />';B+='<Relationship Id="rId'+(++Be).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />',this.sharedStringCount>0&&(B+='<Relationship Id="rId'+(++Be).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />'),this.addToArchive(B+"</Relationships>","xl/_rels/workbook.xml.rels")}saveContentType(){let B='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />',de="",Be=this.worksheets.length;for(let Fe=0;Fe<Be;Fe++)de+='<Override PartName="/xl/worksheets/sheet'+(Fe+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />',null!=this.worksheets[Fe].images&&this.worksheets[Fe].images.length>0&&(de+='<Override PartName="/xl/drawings/drawing'+(Fe+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml" />');this.imageCount>0&&(de+='<Default Extension="png" ContentType="image/png" />'),this.sharedStringCount>0&&(B+='<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" />'),this.addToArchive(B+de+"</Types>","[Content_Types].xml")}addToArchive(B,de){if("string"==typeof B){let Be=new Blob([B],{type:"text/plain"}),Fe=new i.eo(Be,de);this.mArchive.addItem(Fe)}else{let Be=new i.eo(B,de);this.mArchive.addItem(Be)}}processMergeCells(B,de,Be){if(0!==B.rowSpan||0!==B.colSpan){let Fe=new J;Fe.x=B.index,Fe.width=B.colSpan,Fe.y=de,Fe.height=B.rowSpan;let xt=this.getCellName(Fe.y,Fe.x),$t=this.getCellName(de+Fe.height,B.index+Fe.width);Fe.ref=xt+":"+$t,Be.add(Fe),this.updatedMergedCellStyles({x:Fe.x,y:Fe.y},{x:B.index+Fe.width,y:de+Fe.height},B)}return Be}updatedMergedCellStyles(B,de,Be){for(let Fe=B.x;Fe<=de.x;Fe++)for(let xt=B.y;xt<=de.y;xt++)this.mergedCellsStyle.set(this.getCellName(xt,Fe),{x:Fe,y:xt,styleIndex:Be.styleIndex})}dateToTicks(B,de,Be){let xt=[0,31,59,90,120,151,181,212,243,273,304,334,365],$t=[0,31,60,91,121,152,182,213,244,274,305,335,366];if(B>=1&&B<=9999&&de>=1&&de<=12){let is=B-1;return 864e9*(365*is+(is/4|0)-(is/100|0)+(is/400|0)+(this.isLeapYear(B)?$t:xt)[de-1]+Be-1)}throw new Error("Not a valid date")}timeToTicks(B,de,Be){if(B>=0&&B<24&&de>=0&&de<60&&Be>=0&&Be<60)return 1e4*(3600*B+60*de+Be)*1e3;throw new Error("Not valid time")}isLeapYear(B){return B%4==0&&(B%100!=0||B%400==0)}toOADate(B){let de=0;if(de=this.dateToTicks(B.getFullYear(),B.getMonth()+1,B.getDate())+this.timeToTicks(B.getHours(),B.getMinutes(),B.getSeconds()),0===de)return 0;if(de<31241376e9)throw new Error("Arg_OleAutDateInvalid");return(de-599264352e9)/1e4/864e5}}class lt{}},7220:(An,hs,rt)=>{rt.d(hs,{LF:()=>ut,ez:()=>Li,vc:()=>i});class i{constructor(){}static save(We,gt){if(null==We||""===We)throw new Error("ArgumentException: fileName cannot be undefined, null or empty");let E=We.substring(We.lastIndexOf(".")+1,We.length),at=this.getMimeType(E);if(""!==at&&(gt=new Blob([gt],{type:at})),this.isMicrosoftBrowser)navigator.msSaveBlob(gt,We);else{let Oe=document.createElementNS("http://www.w3.org/1999/xhtml","a");this.saveInternal(We,E,gt,Oe,"download"in Oe)}}static saveInternal(We,gt,E,at,Oe){if(Oe){at.download=We;let ft=window.URL.createObjectURL(E);at.href=ft;let jt=document.createEvent("MouseEvent");jt.initEvent("click",!0,!0),at.dispatchEvent(jt),setTimeout(()=>{window.URL.revokeObjectURL(ft),ft=void 0})}else if("docx"!==gt&&"xlsx"!==gt){let ft=window.URL.createObjectURL(E);window.open(ft,"_blank")||(window.location.href=ft)}else{let ft=new FileReader;ft.onloadend=()=>{window.open(ft.result,"_blank")||(window.location.href=ft.result)},ft.readAsDataURL(E)}}static getMimeType(We){let gt="";switch(We){case"html":gt="text/html";break;case"pdf":gt="application/pdf";break;case"docx":gt="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case"xlsx":gt="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":gt="text/plain"}return gt}}class Li{constructor(We){this.emitBOM=!0,this.encodingType="Ansi",this.initBOM(We)}get includeBom(){return this.emitBOM}get type(){return this.encodingType}set type(We){this.encodingType=We}initBOM(We){this.emitBOM=We??!0}getByteCount(We){return Lt(We,"string"),""===We?this.utf8Len(We.charCodeAt(0)):(null==this.type&&(this.type="Ansi"),this.getByteCountInternal(We,0,We.length))}utf8Len(We){return We<=127?1:We<=2047?2:We<=65535?3:We<=2097151?4:0}isHighSurrogate(We){return We>=55296&&We<=56319}toCodepoint(We,gt){return 65536+((We=(1023&We)<<10)|1023&gt)}getByteCountInternal(We,gt,E){let at=0;if("Utf8"===this.encodingType||"Unicode"===this.encodingType){let Oe="Utf8"===this.encodingType;for(let ft=0;ft<E;ft++){let jt=We.charCodeAt(Oe?gt:gt++);if(this.isHighSurrogate(jt))if(Oe){let Nt=jt,Di=We.charCodeAt(++gt);at+=this.utf8Len(this.toCodepoint(Nt,Di))}else at+=4,++ft;else at+=Oe?this.utf8Len(jt):2;Oe&&gt++}return at}return at=E,at}getBytes(We,gt,E){if(Lt(We,"string"),Lt(gt,"charIndex"),Lt(E,"charCount"),gt<0||E<0)throw new RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero");if(We.length-gt<E)throw new RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string");let at;if(""===We)return at=new ArrayBuffer(0),at;null==this.type&&(this.type="Ansi");let Oe=this.getByteCountInternal(We,gt,E);switch(this.type){case"Utf8":return at=this.getBytesOfUtf8Encoding(Oe,We,gt,E),at;case"Unicode":return at=this.getBytesOfUnicodeEncoding(Oe,We,gt,E),at;default:return at=this.getBytesOfAnsiEncoding(Oe,We,gt,E),at}}getString(We,gt,E){if(Lt(We,"bytes"),Lt(gt,"index"),Lt(E,"count"),gt<0||E<0)throw new RangeError("Argument Out Of Range Exception: index or count is less than zero");if(We.byteLength-gt<E)throw new RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes");if(0===We.byteLength||0===E)return"";null==this.type&&(this.type="Ansi");let at="",Oe=new Uint8Array(We);switch(this.type){case"Utf8":return this.getStringOfUtf8Encoding(Oe,gt,E);case"Unicode":let jt=new Uint16Array(We);return at=this.getStringofUnicodeEncoding(jt,gt,E),at;default:let Nt=gt;for(let Di=0;Di<E;Di++)at+=String.fromCharCode(Oe[Nt]),Nt++;return at}}getBytesOfAnsiEncoding(We,gt,E,at){let Oe=new ArrayBuffer(We),ft=new Uint8Array(Oe),jt=0;for(let Nt=0;Nt<at;Nt++){let Di=gt.charCodeAt(E++);ft[jt]=Di<2048?Di:63,jt++}return Oe}getBytesOfUtf8Encoding(We,gt,E,at){let Oe=new ArrayBuffer(We),ft=new Uint8Array(Oe),jt=E,Nt=0;for(let Di=0;Di<at;Di++){let bt=gt.charCodeAt(jt);bt<=127?ft[Nt]=bt:bt<2048?(ft[Nt]=192|bt>>6,ft[++Nt]=128|63&bt):bt<55296||bt>=57344?(ft[Nt]=224|bt>>12,ft[++Nt]=128|bt>>6&63,ft[++Nt]=128|63&bt):(ft[Nt]=239,ft[++Nt]=191,ft[++Nt]=189),++Nt,++jt}return Oe}getBytesOfUnicodeEncoding(We,gt,E,at){let Oe=new ArrayBuffer(We),ft=new Uint16Array(Oe);for(let jt=0;jt<at;jt++){let Nt=gt.charCodeAt(jt);ft[jt]=Nt}return Oe}getStringOfUtf8Encoding(We,gt,E){let at=0,Oe=gt,ft="";for(;at<E;at++){let jt=We[Oe++];for(;Oe>We.length;)return ft;jt>127&&(jt>191&&jt<224&&Oe<E?jt=(31&jt)<<6|63&We[Oe]:jt>223&&jt<240&&Oe<We.byteLength?jt=(15&jt)<<12|(63&We[Oe])<<6|63&We[++Oe]:jt>239&&jt<248&&Oe<We.byteLength&&(jt=(7&jt)<<18|(63&We[Oe])<<12|(63&We[++Oe])<<6|63&We[++Oe]),++Oe),ft+=String.fromCharCode(jt)}return ft}getStringofUnicodeEncoding(We,gt,E){if(E>We.length)throw new RangeError("ArgumentOutOfRange_Count");let at=new Uint16Array(E),Oe="";for(let ft=0;ft<E&&ft<We.length;ft++)at[ft]=We[gt++];return Oe=String.fromCharCode.apply(null,at),Oe}destroy(){this.emitBOM=void 0,this.encodingType=void 0}}function Lt(Si,We){if(null==Si)throw new Error("ArgumentException: "+We+" cannot be null or undefined")}class ut{get buffer(){return this.flush(),this.bufferBlob}get encoding(){return this.enc}constructor(We){this.bufferBlob=new Blob([""]),this.bufferText="",this.init(We),i.isMicrosoftBrowser=!!navigator.msSaveBlob}init(We){null==We?(this.enc=new Li(!1),this.enc.type="Utf8"):(this.enc=We,this.setBomByte())}setBomByte(){if(this.encoding.includeBom)switch(this.encoding.type){case"Unicode":let We=new ArrayBuffer(2),gt=new Uint8Array(We);gt[0]=255,gt[1]=254,this.bufferBlob=new Blob([We]);break;case"Utf8":let E=new ArrayBuffer(3),at=new Uint8Array(E);at[0]=239,at[1]=187,at[2]=191,this.bufferBlob=new Blob([E]);break;default:this.bufferBlob=new Blob([""])}}save(We){""!==this.bufferText&&this.flush(),i.save(We,this.buffer)}write(We){if(void 0===this.encoding)throw new Error("Object Disposed Exception: current writer is disposed");Lt(We,"string"),this.bufferText+=We,this.bufferText.length>=10240&&this.flush()}flush(){if(null==this.bufferText||0===this.bufferText.length)return;let We=this.encoding.getBytes(this.bufferText,0,this.bufferText.length);this.bufferText="",this.bufferBlob=new Blob([this.bufferBlob,We])}writeLine(We){if(void 0===this.encoding)throw new Error("Object Disposed Exception: current writer is disposed");Lt(We,"string"),this.bufferText=this.bufferText+We+"\r\n",this.bufferText.length>=10240&&this.flush()}destroy(){this.bufferBlob=void 0,this.bufferText=void 0,this.enc instanceof Li&&this.enc.destroy(),this.enc=void 0}}},3155:(An,hs,rt)=>{rt.d(hs,{II:()=>$e,No:()=>z,Pc:()=>Ws,Qm:()=>zn,Tl:()=>je,g3:()=>ws,iR:()=>Xi,zC:()=>ts,zH:()=>Mt});var i=rt(7628),u=rt(5774),Ue=rt(215);var $e;!function(ht){let S,I=!0;function oe(k){Ee(k.floatLabelType,k.element),k.element.addEventListener("focus",function(){const N=Ar(this);(N.classList.contains("e-input-group")||N.classList.contains("e-outline")||N.classList.contains("e-filled"))&&N.classList.add("e-input-focus")}),k.element.addEventListener("blur",function(){const N=Ar(this);(N.classList.contains("e-input-group")||N.classList.contains("e-outline")||N.classList.contains("e-filled"))&&N.classList.remove("e-input-focus")}),k.element.addEventListener("input",()=>{Ee(S,k.element)})}function Ee(k,N){const R=N.value;""!==R&&!(0,i.le)(R)&&N.parentElement?N.parentElement.classList.add("e-valid-input"):"Always"!==k&&N.parentElement&&N.parentElement.classList.remove("e-valid-input")}function dt(){const k=Ar(this).getElementsByClassName("e-float-text")[0];(0,i.le)(k)||((0,i.cn)([k],"e-label-top"),k.classList.contains("e-label-bottom")&&(0,i.IV)([k],"e-label-bottom"))}function Bt(){const k=Ar(this);if(k.getElementsByTagName("textarea")[0]?""===k.getElementsByTagName("textarea")[0].value:""===k.getElementsByTagName("input")[0].value){const N=k.getElementsByClassName("e-float-text")[0];(0,i.le)(N)||(N.classList.contains("e-label-top")&&(0,i.IV)([N],"e-label-top"),(0,i.cn)([N],"e-label-bottom"))}}function Ii(k){k.addEventListener("focus",dt),k.addEventListener("blur",Bt)}function Ss(k,N,R){const K=(0,i.le)(R)?i.az:R;"Auto"===k.floatLabelType&&Ii(k.element),(0,i.le)(N.container)?(N.container=Le(k,"e-float-input","e-float-custom-tag","div",K),k.element.parentNode&&k.element.parentNode.insertBefore(N.container,k.element)):((0,i.le)(k.customTag)||N.container.classList.add("e-float-custom-tag"),N.container.classList.add("e-float-input"));const G=K("span",{className:"e-float-line"}),ye=K("label",{className:"e-float-text"});if(!(0,i.le)(k.element.id)&&""!==k.element.id&&(ye.id="label_"+k.element.id.replace(/ /g,"_"),(0,i.Y4)(k.element,{"aria-labelledby":ye.id})),!(0,i.le)(k.element.placeholder)&&""!==k.element.placeholder&&(ye.innerText=Et(k.element.placeholder),k.element.removeAttribute("placeholder")),!(0,i.le)(k.properties)&&!(0,i.le)(k.properties.placeholder)&&""!==k.properties.placeholder&&(ye.innerText=Et(k.properties.placeholder)),ye.innerText||N.container.classList.add("e-no-float-label"),N.container.classList.contains("e-float-icon-left")){const ee=N.container.querySelector(".e-input-in-wrap");ee.appendChild(k.element),ee.appendChild(G),ee.appendChild(ye)}else N.container.appendChild(k.element),N.container.appendChild(G),N.container.appendChild(ye);Jn(k.element.value,ye),"Always"===k.floatLabelType&&(ye.classList.contains("e-label-bottom")&&(0,i.IV)([ye],"e-label-bottom"),(0,i.cn)([ye],"e-label-top")),"Auto"===k.floatLabelType&&(k.element.addEventListener("input",ee=>{Jn(k.element.value,ye,k.element)}),k.element.addEventListener("blur",ee=>{Jn(k.element.value,ye)})),(0,i.le)(k.element.getAttribute("id"))||ye.setAttribute("for",k.element.getAttribute("id"))}function Ps(k,N){"Always"===k&&N.classList.contains("e-outline")&&N.classList.add("e-valid-input")}function Xs(k,N){k?(0,i.IV)([N],"e-clear-icon-hide"):(0,i.cn)([N],"e-clear-icon-hide")}function Jn(k,N,R=null){k?((0,i.cn)([N],"e-label-top"),N.classList.contains("e-label-bottom")&&(0,i.IV)([N],"e-label-bottom")):(null==R||R!==document.activeElement)&&(N.classList.contains("e-label-top")&&(0,i.IV)([N],"e-label-top"),(0,i.cn)([N],"e-label-bottom"))}function Ar(k){let N=(0,i.le)(k.parentNode)?k:k.parentNode;return N&&N.classList.contains("e-input-in-wrap")&&(N=N.parentNode),N}function Ie(k,N,R){(null==I||I)&&N.addEventListener("click",K=>{k.classList.contains("e-disabled")||k.readOnly||(K.preventDefault(),k!==document.activeElement&&k.focus(),k.value="",(0,i.cn)([N],"e-clear-icon-hide"))}),k.addEventListener("input",K=>{Xs(k.value,N)}),k.addEventListener("focus",K=>{Xs(k.value,N)}),k.addEventListener("blur",K=>{setTimeout(()=>{(0,i.cn)([N],"e-clear-icon-hide")},200)})}function Ae(k,N){if(Ar(k).classList.contains("e-float-input")&&"Auto"===N){const K=Ar(k).getElementsByClassName("e-float-text")[0];Jn(k.value,K,k)}}function Le(k,N,R,K,G){const ye=(0,i.le)(G)?i.az:G;let ee;return(0,i.le)(k.customTag)?ee=ye(K,{className:N}):(ee=ye(k.customTag,{className:N}),ee.classList.add(R)),ee.classList.add("e-control-wrapper"),ee}function Et(k){let N="";if(!(0,i.le)(k)&&""!==k){const R=document.createElement("span");R.innerHTML='<input  placeholder="'+k+'"/>',N=R.children[0].placeholder}return N}function _s(k,N,R){!(0,i.le)(R)&&""!==R&&(0,i.IV)(N,R.split(" ")),!(0,i.le)(k)&&""!==k&&(0,i.cn)(N,k.split(" "))}function en(k,N){k=Et(k);const R=Ar(N);R.classList.contains("e-float-input")?(0,i.le)(k)||""===k?(R.classList.add("e-no-float-label"),R.getElementsByClassName("e-float-text")[0].textContent=""):(R.getElementsByClassName("e-float-text")[0].textContent=k,R.classList.remove("e-no-float-label"),N.removeAttribute("placeholder")):(0,i.le)(k)||""===k?(N.removeAttribute("placeholder"),N.removeAttribute("aria-placeholder")):(0,i.Y4)(N,{placeholder:k,"aria-placeholder":k})}function po(k,N,R){k?(0,i.Y4)(N,{readonly:""}):N.removeAttribute("readonly"),(0,i.le)(R)||Ae(N,R)}function jo(k,N){k?(0,i.cn)(N,"e-rtl"):(0,i.IV)(N,"e-rtl")}function nr(k,N,R,K){const G={disabled:"disabled","aria-disabled":"true"},ye=!(0,i.le)(K);k?(N.classList.remove("e-disabled"),Yo(G,N),ye&&(0,i.IV)([K],"e-disabled")):(N.classList.add("e-disabled"),Rn(G,N),ye&&(0,i.cn)([K],"e-disabled")),(0,i.le)(R)||Ae(N,R)}function hr(k,N,R,K,G){const ye=(0,i.le)(G)?i.az:G;k?R.clearButton=function En(k,N,R,K){const ye=((0,i.le)(K)?i.az:K)("span",{className:"e-clear-icon"}),ee=N.container;return(0,i.le)(R)?(N.container.classList.contains("e-float-input")?N.container.querySelector(".e-float-text"):k).insertAdjacentElement("afterend",ye):ee.appendChild(ye),!(0,i.le)(ee)&&ee.classList.contains("e-float-input")&&(0,i.cn)([ee],"e-input-group"),(0,i.cn)([ye],"e-clear-icon-hide"),Ie(k,ye),ye.setAttribute("aria-label","close"),ye}(N,R,K,ye):((0,i.Od)(R.clearButton),R.clearButton=null)}function Yo(k,N){for(const R of Object.keys(k)){const K=Ar(N);"disabled"===R&&N.classList.remove("e-disabled"),"disabled"===R&&K.classList.contains("e-input-group")&&K.classList.remove("e-disabled"),"placeholder"===R&&K.classList.contains("e-float-input")?K.getElementsByClassName("e-float-text")[0].textContent="":N.removeAttribute(R)}}function Rn(k,N){for(const R of Object.keys(k)){const K=Ar(N);"disabled"===R&&N.classList.add("e-disabled"),"disabled"===R&&K.classList.contains("e-input-group")&&K.classList.add("e-disabled"),"placeholder"===R&&K.classList.contains("e-float-input")?K.getElementsByClassName("e-float-text")[0].textContent=k[R]:N.setAttribute(R,k[R])}}function Mr(k,N,R){const K=[];K.push(R);const G=(0,i.le)(R)?N.querySelectorAll(".e-input-group-icon"):K;if(k&&G.length>0)for(let ye=0;ye<G.length;ye++)G[ye].addEventListener("mousedown",ze,!1),G[ye].addEventListener("mouseup",Go,!1);else if(G.length>0)for(let ye=0;ye<G.length;ye++)G[ye].removeEventListener("mousedown",ze,this),G[ye].removeEventListener("mouseup",Go,this)}function ze(){let N=this.parentElement;for(;!N.classList.contains("e-input-group");)N=N.parentElement;!function ko(k,N){!k.classList.contains("e-disabled")&&!k.querySelector("input").readOnly&&N.classList.add("e-input-btn-ripple")}(N,this)}function Go(){const k=this;setTimeout(()=>{k.classList.remove("e-input-btn-ripple")},500)}function $o(k,N){const R=N("span",{className:k});return R.classList.add("e-input-group-icon"),R}function Ge(k,N,R,K){const G=(0,i.le)(K)?i.az:K,ye=$o(k,G);N.classList.add("e-float-icon-left");let ee=N.querySelector(".e-input-in-wrap");if((0,i.le)(ee)){ee=G("span",{className:"e-input-in-wrap"}),R.parentNode.insertBefore(ee,R);const te=N.querySelectorAll(R.tagName+" ~ *");ee.appendChild(R);for(let ie=0;ie<te.length;ie++)ee.appendChild(te[ie])}return ee.parentNode.insertBefore(ye,ee),N.classList.contains("e-input-group")||N.classList.add("e-input-group"),Mr(!0,N,ye),ye}function p(k,N,R){const G=$o(k,(0,i.le)(R)?i.az:R);return N.classList.contains("e-input-group")||N.classList.add("e-input-group"),(N.classList.contains("e-float-icon-left")?N.querySelector(".e-input-in-wrap"):N).appendChild(G),Mr(!0,N,G),G}function w(k,N){"hidden"===N.type?k.classList.add("e-hidden"):k.classList.contains("e-hidden")&&k.classList.remove("e-hidden")}ht.createInput=function j(k,N){const R=(0,i.le)(N)?i.az:N;let K={container:null,buttons:[],clearButton:null};if(S=k.floatLabelType,I=k.bindClearAction,(0,i.le)(k.floatLabelType)||"Never"===k.floatLabelType?(K.container=Le(k,"e-input-group","e-input-custom-tag","span",R),k.element.parentNode.insertBefore(K.container,k.element),(0,i.cn)([k.element],"e-input"),K.container.appendChild(k.element)):Ss(k,K,R),oe(k),!(0,i.le)(k.properties)&&!(0,i.le)(k.properties.showClearButton)&&k.properties.showClearButton&&"TEXTAREA"!==k.element.tagName&&(hr(k.properties.showClearButton,k.element,K,!0,R),K.clearButton.setAttribute("role","button"),K.container.classList.contains("e-float-input")&&(0,i.cn)([K.container],"e-input-group")),!(0,i.le)(k.buttons)&&"TEXTAREA"!==k.element.tagName)for(let G=0;G<k.buttons.length;G++)K.buttons.push(p(k.buttons[G],K.container,R));return!(0,i.le)(k.element)&&"TEXTAREA"===k.element.tagName&&(0,i.cn)([K.container],"e-multi-line-input"),w(K.container,k.element),K=function un(k,N){if(!(0,i.le)(k.properties))for(const R of Object.keys(k.properties))switch(R){case"cssClass":_s(k.properties.cssClass,[N.container]),Ps(k.floatLabelType,N.container);break;case"enabled":nr(k.properties.enabled,k.element,k.floatLabelType,N.container);break;case"enableRtl":jo(k.properties.enableRtl,[N.container]);break;case"placeholder":en(k.properties.placeholder,k.element);break;case"readonly":po(k.properties.readonly,k.element)}return N}(k,K),K},ht.bindInitialEvent=oe,ht.wireFloatingEvents=Ii,ht.wireClearBtnEvents=Ie,ht.setValue=function Ji(k,N,R,K){if(N.value=k,!(0,i.le)(R)&&"Auto"===R&&Ae(N,R),!(0,i.le)(K)&&K){const G=Ar(N);if(!(0,i.le)(G)){const ye=G.getElementsByClassName("e-clear-icon")[0];(0,i.le)(ye)||(N.value&&G.classList.contains("e-input-focus")?(0,i.IV)([ye],"e-clear-icon-hide"):(0,i.cn)([ye],"e-clear-icon-hide"))}}Ee(R,N)},ht.setCssClass=_s,ht.setWidth=function _n(k,N){"number"==typeof k?N.style.width=(0,i.Ac)(k):"string"==typeof k&&(N.style.width=k.match(/px|%|em/)?k:(0,i.Ac)(k))},ht.setPlaceholder=en,ht.setReadonly=po,ht.setEnableRtl=jo,ht.setEnabled=nr,ht.setClearButton=hr,ht.removeAttributes=Yo,ht.addAttributes=Rn,ht.removeFloating=function Do(k){const N=k.container;if(!(0,i.le)(N)&&N.classList.contains("e-float-input")){const R=N.querySelector("textarea")?N.querySelector("textarea"):N.querySelector("input"),K=N.querySelector(".e-float-text").textContent,G=null!==N.querySelector(".e-clear-icon");(0,i.og)(N.querySelector(".e-float-line")),(0,i.og)(N.querySelector(".e-float-text")),(0,i.s1)(N,["e-input-group"],["e-float-input"]),function Yi(k){k.removeEventListener("focus",dt),k.removeEventListener("blur",Bt)}(R),(0,i.Y4)(R,{placeholder:K}),R.classList.add("e-input"),!G&&"INPUT"===R.tagName&&R.removeAttribute("required")}},ht.addFloating=function qo(k,N,R,K){const G=(0,i.le)(K)?i.az:K,ye=(0,i.oq)(k,".e-input-group");if(S=N,"Never"!==N){let ee=ye.tagName;ee="DIV"!==ee&&"SPAN"!==ee?ee:null;const te={element:k,floatLabelType:N,customTag:ee,properties:{placeholder:R}};let ie=ye.querySelector(".e-clear-icon");const xe={container:ye};k.classList.remove("e-input"),Ss(te,xe,G);const Ke=ye.classList.contains("e-float-icon-left");if((0,i.le)(ie)&&(ie=Ke?ye.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):ye.querySelector(".e-input-group-icon")),(0,i.le)(ie))Ke&&(ie=ye.querySelector(".e-input-group-icon")),(0,i.le)(ie)&&ye.classList.remove("e-input-group");else{const ct=ye.querySelector(".e-float-line"),ii=ye.querySelector(".e-float-text"),si=Ke?ye.querySelector(".e-input-in-wrap"):ye;si.insertBefore(k,ie),si.insertBefore(ct,ie),si.insertBefore(ii,ie)}}Ps(N,k.parentElement)},ht.setRipple=function zr(k,N){for(let R=0;R<N.length;R++)Mr(k,N[R].container)},ht.addIcon=function Mn(k,N,R,K,G){const ye="string"==typeof N?N.split(","):N;if("append"===k.toLowerCase())for(const ee of ye)p(ee,R,G);else for(const ee of ye)Ge(ee,R,K,G)},ht.prependSpan=Ge,ht.appendSpan=p,ht.validateInputType=w}($e||($e={}));var Li=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};const ut="e-input-group-icon",Si="e-spin-up",gt="e-error",E="increment",at="decrement",Oe=new RegExp("^(-)?(\\d*)$"),Di="e-input-focus",Rt=["title","style","class"];let z=(()=>{let ht=class extends i.wA{constructor(I,j){super(I,j),this.isVue=!1,this.preventChange=!1,this.isAngular=!1,this.isDynamicChange=!1,this.numericOptions=I}preRender(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;const I=(0,i.NA)("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),(0,i.IV)([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=(0,i.oq)(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const oe=this.createElement("input");let Ee=0;for(;Ee<this.element.attributes.length;Ee++)"id"!==this.element.attributes[Ee].nodeName&&(oe.setAttribute(this.element.attributes[Ee].nodeName,this.element.attributes[Ee].nodeValue),oe.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(oe),this.element=oe,(0,i.sO)("ej2_instances",I,this.element)}(0,i.Y4)(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new i.E7("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()}render(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete())}checkAttributes(I){const j=I?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];for(const oe of j)if(!(0,i.le)(this.element.getAttribute(oe)))switch(oe){case"disabled":if((0,i.le)(this.numericOptions)||void 0===this.numericOptions.enabled||I){const Ee=!("disabled"===this.element.getAttribute(oe)||""===this.element.getAttribute(oe)||"true"===this.element.getAttribute(oe));this.setProperties({enabled:Ee},!I)}break;case"readonly":if((0,i.le)(this.numericOptions)||void 0===this.numericOptions.readonly||I){const Ee="readonly"===this.element.getAttribute(oe)||""===this.element.getAttribute(oe)||"true"===this.element.getAttribute(oe);this.setProperties({readonly:Ee},!I)}break;case"placeholder":((0,i.le)(this.numericOptions)||void 0===this.numericOptions.placeholder||I)&&this.setProperties({placeholder:this.element.placeholder},!I);break;case"value":if((0,i.le)(this.numericOptions)||void 0===this.numericOptions.value||I){const Ee=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(oe));this.setProperties((0,i.sO)(oe,Ee,{}),!I)}break;case"min":if((0,i.le)(this.numericOptions)||void 0===this.numericOptions.min||I){const Ee=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(oe));null!==Ee&&!isNaN(Ee)&&this.setProperties((0,i.sO)(oe,Ee,{}),!I)}break;case"max":if((0,i.le)(this.numericOptions)||void 0===this.numericOptions.max||I){const Ee=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(oe));null!==Ee&&!isNaN(Ee)&&this.setProperties((0,i.sO)(oe,Ee,{}),!I)}break;case"step":if((0,i.le)(this.numericOptions)||void 0===this.numericOptions.step||I){const Ee=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(oe));null!==Ee&&!isNaN(Ee)&&this.setProperties((0,i.sO)(oe,Ee,{}),!I)}break;case"style":this.inputStyle=this.element.getAttribute(oe);break;case"name":this.inputName=this.element.getAttribute(oe);break;default:{const Ee=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(oe));(null!==Ee&&!isNaN(Ee)||"value"===oe)&&this.setProperties((0,i.sO)(oe,Ee,{}),!0)}}}updatePlaceholder(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}initCultureFunc(){this.instance=new i.eC(this.locale)}initCultureInfo(){this.cultureInfo.format=this.format,null!==(0,i.NA)("currency",this)&&((0,i.sO)("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}createWrapper(){let I=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(I=this.getNumericValidClassList(this.cssClass));const j=$e.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:I,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=j,this.container=j.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&(0,i.Y4)(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),(0,i.Y4)(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&(0,i.Y4)(this.container,{style:this.inputStyle})}updateDataAttribute(I){let j={};if(I)j=this.htmlAttributes;else for(let oe=0;oe<this.element.attributes.length;oe++)j[this.element.attributes[oe].name]=this.element.getAttribute(this.element.attributes[oe].name);for(const oe of Object.keys(j))0===oe.indexOf("data")&&this.hiddenInput.setAttribute(oe,j[oe])}updateHTMLAttrToElement(){if(!(0,i.le)(this.htmlAttributes))for(const I of Object.keys(this.htmlAttributes))Rt.indexOf(I)<0&&this.element.setAttribute(I,this.htmlAttributes[I])}updateCssClass(I,j){$e.setCssClass(this.getNumericValidClassList(I),[this.container],this.getNumericValidClassList(j))}getNumericValidClassList(I){let j=I;return!(0,i.le)(I)&&""!==I&&(j=I.replace(/\s+/g," ").trim()),j}updateHTMLAttrToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const I of Object.keys(this.htmlAttributes))if(Rt.indexOf(I)>-1)if("class"===I){const j=this.getNumericValidClassList(this.htmlAttributes[I]);""!==j&&(0,i.cn)([this.container],j.split(" "))}else if("style"===I){let j=this.container.getAttribute(I);j=(0,i.le)(j)?this.htmlAttributes[I]:j+this.htmlAttributes[I],this.container.setAttribute(I,j)}else this.container.setAttribute(I,this.htmlAttributes[I])}setElementWidth(I){(0,i.le)(I)||("number"==typeof I?this.container.style.width=(0,i.Ac)(I):"string"==typeof I&&(this.container.style.width=I.match(/px|%|em/)?I:(0,i.Ac)(I)))}spinBtnCreation(){this.spinDown=$e.appendSpan(ut+" e-spin-down",this.container,this.createElement),(0,i.Y4)(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=$e.appendSpan(ut+" "+Si,this.container,this.createElement),(0,i.Y4)(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}validateMinMax(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),(0,i.Y4)(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}formattedValue(I,j){return this.instance.getNumberFormat({maximumFractionDigits:I,minimumFractionDigits:I,useGrouping:!1})(j)}validateStep(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}action(I,j){this.isInteract=!0;const oe=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(oe,this.step,I)),this.raiseChangeEvent(j)}checkErrorClass(){this.isValidState?(0,i.IV)([this.container],gt):(0,i.cn)([this.container],gt),(0,i.Y4)(this.element,{"aria-invalid":this.isValidState?"false":"true"})}bindClearEvent(){this.showClearButton&&i.bi.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(I){I.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(I),this.isInteract=!0,this.raiseChangeEvent(I)}clear(I){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",(0,i.oq)(this.element,"form")){const oe=this.element.nextElementSibling,Ee=document.createEvent("KeyboardEvent");Ee.initEvent("keyup",!1,!0),oe.dispatchEvent(Ee)}}resetFormHandler(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}setSpinButton(){(0,i.le)(this.spinDown)||(0,i.Y4)(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),(0,i.le)(this.spinUp)||(0,i.Y4)(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}wireEvents(){i.bi.add(this.element,"focus",this.focusHandler,this),i.bi.add(this.element,"blur",this.focusOutHandler,this),i.bi.add(this.element,"keydown",this.keyDownHandler,this),i.bi.add(this.element,"keyup",this.keyUpHandler,this),i.bi.add(this.element,"input",this.inputHandler,this),i.bi.add(this.element,"keypress",this.keyPressHandler,this),i.bi.add(this.element,"change",this.changeHandler,this),i.bi.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&i.bi.add(this.formEle,"reset",this.resetFormHandler,this))}wireSpinBtnEvents(){i.bi.add(this.spinUp,i.AR.touchStartEvent,this.mouseDownOnSpinner,this),i.bi.add(this.spinDown,i.AR.touchStartEvent,this.mouseDownOnSpinner,this),i.bi.add(this.spinUp,i.AR.touchEndEvent,this.mouseUpOnSpinner,this),i.bi.add(this.spinDown,i.AR.touchEndEvent,this.mouseUpOnSpinner,this),i.bi.add(this.spinUp,i.AR.touchMoveEvent,this.touchMoveOnSpinner,this),i.bi.add(this.spinDown,i.AR.touchMoveEvent,this.touchMoveOnSpinner,this)}unwireEvents(){i.bi.remove(this.element,"focus",this.focusHandler),i.bi.remove(this.element,"blur",this.focusOutHandler),i.bi.remove(this.element,"keyup",this.keyUpHandler),i.bi.remove(this.element,"input",this.inputHandler),i.bi.remove(this.element,"keydown",this.keyDownHandler),i.bi.remove(this.element,"keypress",this.keyPressHandler),i.bi.remove(this.element,"change",this.changeHandler),i.bi.remove(this.element,"paste",this.pasteHandler),this.formEle&&i.bi.remove(this.formEle,"reset",this.resetFormHandler)}unwireSpinBtnEvents(){i.bi.remove(this.spinUp,i.AR.touchStartEvent,this.mouseDownOnSpinner),i.bi.remove(this.spinDown,i.AR.touchStartEvent,this.mouseDownOnSpinner),i.bi.remove(this.spinUp,i.AR.touchEndEvent,this.mouseUpOnSpinner),i.bi.remove(this.spinDown,i.AR.touchEndEvent,this.mouseUpOnSpinner),i.bi.remove(this.spinUp,i.AR.touchMoveEvent,this.touchMoveOnSpinner),i.bi.remove(this.spinDown,i.AR.touchMoveEvent,this.touchMoveOnSpinner)}changeHandler(I){I.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);const j=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(j,I)}raiseChangeEvent(I){if(this.prevValue!==this.value){const j={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:I},I&&(this.changeEventArgs.event=I),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),(0,i.TS)(j,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",j)}}pasteHandler(){if(!this.enabled||this.readonly)return;const I=this.element.value;setTimeout(()=>{this.numericRegex().test(this.element.value)||this.setElementValue(I)})}preventHandler(){const I=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(()=>{if(this.element.selectionStart>0){const j=this.element.selectionStart,oe=this.element.selectionStart-1,Ee=0,dt=this.element.value.split(""),Bt=(0,i.NE)(this.locale),Ii=(0,i.NA)("decimal",Bt),Yi=Ii.charCodeAt(0);" "===this.element.value[oe]&&this.element.selectionStart>0&&!I?((0,i.le)(this.prevVal)?this.element.value=this.element.value.trim():0!==oe?this.element.value=this.prevVal:0===oe&&(this.element.value=this.element.value.trim()),this.element.setSelectionRange(oe,oe)):isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&45!==this.element.value[this.element.selectionStart-1].charCodeAt(0)?(dt.indexOf(this.element.value[this.element.selectionStart-1])!==dt.lastIndexOf(this.element.value[this.element.selectionStart-1])&&this.element.value[this.element.selectionStart-1].charCodeAt(0)===Yi||this.element.value[this.element.selectionStart-1].charCodeAt(0)!==Yi)&&(this.element.value=this.element.value.substring(0,oe)+this.element.value.substring(j,this.element.value.length),this.element.setSelectionRange(oe,oe),isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&this.element.selectionStart>0&&this.element.value.length&&this.preventHandler()):isNaN(parseFloat(this.element.value[this.element.selectionStart-2]))&&this.element.selectionStart>1&&45!==this.element.value[this.element.selectionStart-2].charCodeAt(0)&&(dt.indexOf(this.element.value[this.element.selectionStart-2])!==dt.lastIndexOf(this.element.value[this.element.selectionStart-2])&&this.element.value[this.element.selectionStart-2].charCodeAt(0)===Yi||this.element.value[this.element.selectionStart-2].charCodeAt(0)!==Yi)&&(this.element.setSelectionRange(oe,oe),this.nextEle=this.element.value[this.element.selectionStart],this.cursorPosChanged=!0,this.preventHandler()),!0===this.cursorPosChanged&&this.element.value[this.element.selectionStart]===this.nextEle&&isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&(this.element.setSelectionRange(this.element.selectionStart+1,this.element.selectionStart+1),this.cursorPosChanged=!1,this.nextEle=null),""===this.element.value.trim()&&this.element.setSelectionRange(Ee,Ee),this.element.selectionStart>0&&(45===this.element.value[this.element.selectionStart-1].charCodeAt(0)&&this.element.selectionStart>1&&(this.element.value=(0,i.le)(this.prevVal)?this.element.value:this.prevVal,this.element.setSelectionRange(this.element.selectionStart,this.element.selectionStart)),this.element.value[this.element.selectionStart-1]===Ii&&0===this.decimals&&this.validateDecimalOnType&&(this.element.value=this.element.value.substring(0,oe)+this.element.value.substring(j,this.element.value.length))),this.prevVal=this.element.value}})}keyUpHandler(){if(!this.enabled||this.readonly)return;(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&i.AR.isDevice&&this.preventHandler();let j=this.instance.getNumberParser({format:"n"})(this.element.value);if(j=null===j||isNaN(j)?null:j,this.hiddenInput.value=j||0===j?j.toString():null,(0,i.oq)(this.element,"form")){const Ee=this.element.nextElementSibling,dt=document.createEvent("KeyboardEvent");dt.initEvent("keyup",!1,!0),Ee.dispatchEvent(dt)}}inputHandler(I){const j=this;if(!this.enabled||this.readonly)return;const oe=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||oe)&&i.AR.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==(0,i.NA)("decimal",(0,i.NE)(this.locale))&&this.element.value!==(0,i.NA)("minusSign",(0,i.NE)(this.locale))){let dt=this.instance.getNumberParser({format:"n"})(this.element.value);dt=isNaN(dt)?null:dt,j.localChange({value:dt}),this.preventChange=!0}if(this.isVue){let dt=this.instance.getNumberParser({format:"n"})(this.element.value);const Bt=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);new RegExp("[^1-9]+$").test(this.element.value)&&(dt=this.value);const Yi={event:I,value:null===dt||isNaN(dt)?null:dt,previousValue:null===Bt||isNaN(Bt)?null:Bt};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",Yi)}}keyDownHandler(I){if(!this.readonly)switch(I.keyCode){case 38:I.preventDefault(),this.action(E,I);break;case 40:I.preventDefault(),this.action(at,I)}}performAction(I,j,oe){(null===I||isNaN(I))&&(I=0);let Ee=oe===E?I+j:I-j;return Ee=this.correctRounding(I,j,Ee),this.strictMode?this.trimValue(Ee):Ee}correctRounding(I,j,oe){const Ee=new RegExp("[,.](.*)"),dt=Ee.test(I.toString()),Bt=Ee.test(j.toString());if(dt||Bt){const Ii=dt?Ee.exec(I.toString())[0].length:0,Yi=Bt?Ee.exec(j.toString())[0].length:0,Ss=Math.max(Ii,Yi);return this.roundValue(oe,Ss)}return oe}roundValue(I,j){j=j||0;const oe=Math.pow(10,j);return Math.round(I*=oe)/oe}updateValue(I,j){j&&(this.isInteract=!0),null!==I&&!isNaN(I)&&this.decimals&&(I=this.roundNumber(I,this.decimals)),this.changeValue(null===I||isNaN(I)?null:this.strictMode?this.trimValue(I):I),this.isDynamicChange||this.raiseChangeEvent(j)}updateCurrency(I,j){(0,i.sO)(I,j,this.cultureInfo),this.updateValue(this.value)}changeValue(I){if(I||0===I){const j=this.getNumberOfDecimals(I);this.setProperties({value:this.roundNumber(I,j)},!0)}else this.setProperties({value:I=null},!0);this.modifyText(),this.strictMode||this.validateState()}modifyText(){if(this.value||0===this.value){const I=this.formatNumber(),j=this.isFocused?I:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(j),(0,i.Y4)(this.element,{"aria-valuenow":I}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}setElementValue(I,j){$e.setValue(I,j||this.element,this.floatLabelType,this.showClearButton)}validateState(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}getNumberOfDecimals(I){let j;const oe=new RegExp("[eE][-+]?([0-9]+)");let Ee=I.toString();if(oe.test(Ee)){const Bt=oe.exec(Ee);(0,i.le)(Bt)||(Ee=I.toFixed(Math.min(parseInt(Bt[1],10),20)))}const dt=Ee.split(".")[1];return j=dt&&dt.length?dt.length:0,null!==this.decimals&&(j=j<this.decimals?j:this.decimals),j}formatNumber(){const I=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:I,minimumFractionDigits:I,useGrouping:!1})(this.value)}trimValue(I){return I>this.max?this.max:I<this.min?this.min:I}roundNumber(I,j){let oe=I;const Ee=j||0,dt=oe.toString().split("e");oe=Math.round(Number(dt[0]+"e"+(dt[1]?Number(dt[1])+Ee:Ee)));const Bt=oe.toString().split("e");return oe=Number(Bt[0]+"e"+(Bt[1]?Number(Bt[1])-Ee:-Ee)),Number(oe.toFixed(Ee))}cancelEvent(I){return I.preventDefault(),!1}keyPressHandler(I){if(!this.enabled||this.readonly)return!0;if(!i.AR.isDevice&&"11.0"===i.AR.info.version&&13===I.keyCode){const Ee=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(Ee,I),!0}if(0===I.which||I.metaKey||I.ctrlKey||8===I.keyCode||13===I.keyCode)return!0;const j=String.fromCharCode(I.which);let oe=this.element.value;return oe=oe.substring(0,this.element.selectionStart)+j+oe.substring(this.element.selectionEnd),!!this.numericRegex().test(oe)||(I.preventDefault(),I.stopPropagation(),!1)}numericRegex(){const I=(0,i.NE)(this.locale);let j=(0,i.NA)("decimal",I),oe="*";return"."===j&&(j="\\"+j),0===this.decimals&&this.validateDecimalOnType?Oe:(this.decimals&&this.validateDecimalOnType&&(oe="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+j+"\\d"+oe+")?)|("+j+"\\d"+oe+")))?$"))}mouseWheel(I){let j;I.preventDefault(),I.wheelDelta?j=I.wheelDelta/120:I.detail&&(j=-I.detail/3),j>0?this.action(E,I):j<0&&this.action(at,I),this.cancelEvent(I)}focusHandler(I){if(this.focusEventArgs={event:I,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,(0,i.IV)([this.container],gt),this.prevValue=this.value,this.value||0===this.value){const j=this.formatNumber();this.setElementValue(j),this.isPrevFocused||(i.AR.isDevice||"11.0"!==i.AR.info.version?setTimeout(()=>{this.element.setSelectionRange(0,j.length)},i.AR.isDevice&&i.AR.isIos?600:0):this.element.setSelectionRange(0,j.length))}i.AR.isDevice||i.bi.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}focusOutHandler(I){if(this.blurEventArgs={event:I,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(I.preventDefault(),i.AR.isDevice){const oe=this.element.value;this.element.focus(),this.isPrevFocused=!1;const Ee=this.element;setTimeout(()=>{this.setElementValue(oe,Ee)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);const oe=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(oe),i.AR.isDevice||i.bi.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if((0,i.oq)(this.element,"form")){const oe=this.element.nextElementSibling,Ee=document.createEvent("FocusEvent");Ee.initEvent("focusout",!1,!0),oe.dispatchEvent(Ee)}}}mouseDownOnSpinner(I){if(this.isFocused&&(this.isPrevFocused=!0,I.preventDefault()),!this.getElementData(I))return;this.getElementData(I);const oe=I.currentTarget,Ee=oe.classList.contains(Si)?E:at;i.bi.add(oe,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(()=>{this.isCalled=!0,this.action(Ee,I)},150),i.bi.add(document,"mouseup",this.mouseUpClick,this)}touchMoveOnSpinner(I){let j;if("touchmove"===I.type){let oe=I.touches;j=oe.length&&document.elementFromPoint(oe[0].pageX,oe[0].pageY)}else j=document.elementFromPoint(I.clientX,I.clientY);j.classList.contains(ut)||clearInterval(this.timeOut)}mouseUpOnSpinner(I){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),i.AR.isDevice||(this.isPrevFocused=!1)),i.AR.isDevice||I.preventDefault(),!this.getElementData(I))return;const j=I.currentTarget,oe=j.classList.contains(Si)?E:at;if(i.bi.remove(j,"mouseleave",this.mouseUpClick),this.isCalled||this.action(oe,I),this.isCalled=!1,i.bi.remove(document,"mouseup",this.mouseUpClick),(0,i.oq)(this.element,"form")){const dt=this.element.nextElementSibling,Bt=document.createEvent("KeyboardEvent");Bt.initEvent("keyup",!1,!0),dt.dispatchEvent(Bt)}}getElementData(I){return!(I.which&&3===I.which||I.button&&2===I.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}floatLabelTypeUpdate(){$e.removeFloating(this.inputWrapper);const I=this.hiddenInput;this.hiddenInput.remove(),$e.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(I,this.container.childNodes[1])}mouseUpClick(I){I.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,i.bi.remove(this.spinUp,"mouseleave",this.mouseUpClick),i.bi.remove(this.spinDown,"mouseleave",this.mouseUpClick)}increment(I=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,I,E)),this.raiseChangeEvent()}decrement(I=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,I,at)),this.raiseChangeEvent()}destroy(){this.unwireEvents(),(0,i.og)(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),(0,i.og)(this.spinUp),(0,i.og)(this.spinDown));const I=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"];for(let j=0;j<I.length;j++)this.element.removeAttribute(I[j]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),(0,i.og)(this.container),super.destroy()}getText(){return this.element.value}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),(0,i.cn)([this.container],[Di]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),(0,i.IV)([this.container],[Di]))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(I,j){for(const oe of Object.keys(I))switch(oe){case"width":this.setElementWidth(I.width);break;case"cssClass":this.updateCssClass(I.cssClass,j.cssClass);break;case"enabled":$e.setEnabled(I.enabled,this.element);break;case"enableRtl":$e.setEnableRtl(I.enableRtl,[this.container]);break;case"readonly":$e.setReadonly(I.readonly,this.element),this.readonly?(0,i.Y4)(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),$e.validateInputType(this.container,this.element);break;case"placeholder":$e.setPlaceholder(I.placeholder,this.element);break;case"step":this.step=I.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(I);break;case"showClearButton":this.updateClearButton(I);break;case"floatLabelType":this.floatLabelType=I.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(I.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":(0,i.sO)(oe,(0,i.NA)(oe,I),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=I.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),$e.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{const Ee=(0,i.NA)(oe,I);this.setProperties({currencyCode:Ee},!0),this.updateCurrency(oe,Ee)}break;case"currencyCode":{const Ee=(0,i.NA)(oe,I);this.setProperties({currency:Ee},!0),this.updateCurrency("currency",Ee)}break;case"format":(0,i.sO)(oe,(0,i.NA)(oe,I),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=I.decimals,this.updateValue(this.value)}}updateClearButton(I){$e.setClearButton(I.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}updateSpinButton(I){I.showSpinButton?this.spinBtnCreation():((0,i.og)(this.spinUp),(0,i.og)(this.spinDown))}getModuleName(){return"numerictextbox"}};return Li([(0,i.Z9)("")],ht.prototype,"cssClass",void 0),Li([(0,i.Z9)(null)],ht.prototype,"value",void 0),Li([(0,i.Z9)(-Number.MAX_VALUE)],ht.prototype,"min",void 0),Li([(0,i.Z9)(Number.MAX_VALUE)],ht.prototype,"max",void 0),Li([(0,i.Z9)(1)],ht.prototype,"step",void 0),Li([(0,i.Z9)(null)],ht.prototype,"width",void 0),Li([(0,i.Z9)(null)],ht.prototype,"placeholder",void 0),Li([(0,i.Z9)({})],ht.prototype,"htmlAttributes",void 0),Li([(0,i.Z9)(!0)],ht.prototype,"showSpinButton",void 0),Li([(0,i.Z9)(!1)],ht.prototype,"readonly",void 0),Li([(0,i.Z9)(!0)],ht.prototype,"enabled",void 0),Li([(0,i.Z9)(!1)],ht.prototype,"showClearButton",void 0),Li([(0,i.Z9)(!1)],ht.prototype,"enablePersistence",void 0),Li([(0,i.Z9)("n2")],ht.prototype,"format",void 0),Li([(0,i.Z9)(null)],ht.prototype,"decimals",void 0),Li([(0,i.Z9)(null)],ht.prototype,"currency",void 0),Li([(0,i.Z9)(null)],ht.prototype,"currencyCode",void 0),Li([(0,i.Z9)(!0)],ht.prototype,"strictMode",void 0),Li([(0,i.Z9)(!1)],ht.prototype,"validateDecimalOnType",void 0),Li([(0,i.Z9)("Never")],ht.prototype,"floatLabelType",void 0),Li([(0,i.ju)()],ht.prototype,"created",void 0),Li([(0,i.ju)()],ht.prototype,"destroyed",void 0),Li([(0,i.ju)()],ht.prototype,"change",void 0),Li([(0,i.ju)()],ht.prototype,"focus",void 0),Li([(0,i.ju)()],ht.prototype,"blur",void 0),ht=Li([i.Zl],ht),ht})();const J="e-error",be="e-label-top",ue={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^\x7f ]+",C:"[^\x7f]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function _e(){if((0,i.Y4)(this.element,{role:"textbox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive","aria-valuenow":""}),this.mask){const ht=this.mask.split("]");for(let I=0;I<ht.length;I++)if("\\"===ht[I][ht[I].length-1]){ht[I]=ht[I]+"]";const j=ht[I].split("[");for(let oe=0;oe<j.length;oe++)"\\"===j[oe][j[oe].length-1]&&(j[oe]=j[oe]+"["),is.call(this,j[oe])}else{const j=ht[I].split("[");if(j.length>1){let oe=!1;for(let Ee=0;Ee<j.length;Ee++)"\\"===j[Ee]?(this.customRegExpCollec.push("["),this.hiddenMask+=j[Ee]+"["):""===j[Ee]?oe=!0:""!==j[Ee]&&oe||Ee===j.length-1?(this.customRegExpCollec.push("["+j[Ee]+"]"),this.hiddenMask+=this.promptChar,oe=!1):is.call(this,j[Ee])}else is.call(this,j[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!(0,i.le)(this.customCharacters))for(let I=0;I<this.promptMask.length;I++)(0,i.le)(this.customCharacters[this.promptMask[I]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[I],"g"),this.promptChar));let S=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(let I=0;I<this.hiddenMask.length;I++){let j=0;I>=1&&(j=I),S=this.hiddenMask.length-this.promptMask.length,j-=S,I>0&&"\\"!==this.hiddenMask[I-1]&&(">"===this.hiddenMask[I]||"<"===this.hiddenMask[I]||"|"===this.hiddenMask[I])&&(this.promptMask=this.promptMask.substring(0,j)+this.promptMask.substring(I+1-S,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,j)+this.escapeMaskValue.substring(I+1-S,this.escapeMaskValue.length)),"\\"===this.hiddenMask[I]&&(this.promptMask=this.promptMask.substring(0,j)+this.hiddenMask[I+1]+this.promptMask.substring(I+2-S,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,j)+this.escapeMaskValue[I+1]+this.escapeMaskValue.substring(I+2-S,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");(0,i.Y4)(this.element,{"aria-invalid":"false"})}}function lt(){ot.call(this,this.promptMask),di.call(this,this.value)}function Xe(){i.bi.add(this.element,"keydown",Xt,this),i.bi.add(this.element,"keypress",qt,this),i.bi.add(this.element,"keyup",gs,this),i.bi.add(this.element,"input",zt,this),i.bi.add(this.element,"focus",Ut,this),i.bi.add(this.element,"blur",us,this),i.bi.add(this.element,"paste",Us,this),i.bi.add(this.element,"cut",$i,this),i.bi.add(this.element,"drop",et,this),i.bi.add(this.element,"mousedown",zi,this),i.bi.add(this.element,"mouseup",ui,this),this.enabled&&(de.call(this),this.formElement&&i.bi.add(this.formElement,"reset",xt,this))}function B(){i.bi.remove(this.element,"keydown",Xt),i.bi.remove(this.element,"keypress",qt),i.bi.remove(this.element,"keyup",gs),i.bi.remove(this.element,"input",zt),i.bi.remove(this.element,"focus",Ut),i.bi.remove(this.element,"blur",us),i.bi.remove(this.element,"paste",Us),i.bi.remove(this.element,"cut",$i),i.bi.remove(this.element,"mousedown",zi),i.bi.remove(this.element,"mouseup",ui),this.formElement&&i.bi.remove(this.formElement,"reset",xt)}function de(){this.showClearButton&&i.bi.add(this.inputObj.clearButton,"mousedown touchstart",Be,this)}function Be(ht){ht.preventDefault(),(!this.inputObj.clearButton.classList.contains("e-clear-icon-hide")||this.inputObj.container.classList.contains("e-static-clear"))&&(Fe.call(this,ht),this.value="")}function Fe(ht){const S=this.element.value;ot.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Ci.call(this,ht,S),this.element.setSelectionRange(0,0)}function xt(){"EJS-MASKEDTEXTBOX"===this.element.tagName?ot.call(this,this.promptMask):this.value=this.initInputValue}function $t(ht){return ht.value}function ji(ht,S){let I="",j=0,oe=!1;const Ee=!(0,i.le)(S)||(0,i.le)(ht)||(0,i.le)(this)?S:ht.value;if(Ee!==this.promptMask)for(let dt=0;dt<this.customRegExpCollec.length;dt++)oe&&(oe=!1),(">"===this.customRegExpCollec[j]||"<"===this.customRegExpCollec[j]||"|"===this.customRegExpCollec[j]||"\\"===this.customRegExpCollec[j])&&(--dt,oe=!0),oe||Ee[dt]!==this.promptChar&&!(0,i.le)(this.customRegExpCollec[j])&&(this._callPasteHandler||!(0,i.le)(this.regExpCollec[this.customRegExpCollec[j]])||this.customRegExpCollec[j].length>2&&"["===this.customRegExpCollec[j][0]&&"]"===this.customRegExpCollec[j][this.customRegExpCollec[j].length-1]||!(0,i.le)(this.customCharacters)&&!(0,i.le)(this.customCharacters[this.customRegExpCollec[j]]))&&""!==Ee&&(I+=Ee[dt]),++j;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(I=Ee),I}function is(ht){for(let S=0;S<ht.length;S++)this.hiddenMask+=ht[S],"\\"!==ht[S]&&this.customRegExpCollec.push(ht[S])}function zi(){this.isClicked=!0}function ui(){this.isClicked=!1}function Ut(ht){const S=this.element;let I=0;const j=ji.call(this,S);let oe=!1,Ee=!1,dt={selectionStart:S.selectionStart,event:ht,value:this.value,maskedValue:S.value,container:this.inputObj.container,selectionEnd:S.selectionEnd};if(this.isClicked||oi.call(this,dt,S),this.mask&&(!(null===j||""===j)||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(S.value=this.promptMask),setTimeout(()=>{if(S.selectionStart===this.promptMask.length||S.value[S.selectionStart]===this.promptChar)oe=!0;else for(let Bt=S.selectionStart;Bt<this.promptMask.length;Bt++){if(S.value[Bt]===this.promptChar){oe=!0;break}if(S.value[Bt]!==this.promptMask[Bt]){oe=!1;break}}}),setTimeout(()=>{const Bt=S.selectionStart-1;if(Bt===this.promptMask.length-1||S.value[Bt]===this.promptChar)Ee=!0;else for(let Ii=Bt;Ii>=0;Ii--){if(S.value[Ii]===this.promptChar){Ee=!0;break}if(S.value[Ii]!==this.promptMask[Ii]){Ee=!1;break}}}),this.isClicked||"Always"!==this.floatLabelType&&(null===j||""===j)&&null!==this.placeholder&&""!==this.placeholder)){for(I=0;I<this.promptMask.length;I++)if(S.value[I]===this.promptChar){setTimeout(()=>{(oe||Ee)&&(S.selectionEnd=I,S.selectionStart=I),dt={selectionStart:S.selectionStart,event:ht,value:this.value,maskedValue:S.value,container:this.inputObj.container,selectionEnd:S.selectionEnd},oi.call(this,dt,S)});break}(0,i.le)(S.value.match(this.promptChar))&&(dt={selectionStart:S.selectionStart,event:ht,value:this.value,maskedValue:S.value,container:this.inputObj.container,selectionEnd:S.selectionEnd},oi.call(this,dt,S)),this.isClicked=!1}}function oi(ht,S){this.trigger("focus",ht,I=>{S.selectionStart=I.selectionStart,S.selectionEnd=I.selectionEnd})}function us(ht){if(this.blurEventArgs={event:ht,value:this.value,maskedValue:this.element.value,container:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){ot.call(this,"");const S=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!(0,i.le)(S)&&S.classList.contains(be)&&(0,i.IV)([S],be)}}function Us(ht){if(this.mask&&!this.readonly){const S=this.element.selectionStart,I=this.element.selectionEnd,j=this.element.value;ot.call(this,""),this._callPasteHandler=!0,setTimeout(()=>{let oe=this.element.value.replace(/ /g,"");this.redoCollec.length>0&&this.redoCollec[0].value===this.element.value&&(oe=ji.call(this,this.element)),ot.call(this,j),this.element.selectionStart=S,this.element.selectionEnd=I;let Ee=0;this.maskKeyPress=!0;do{At.call(this,oe[Ee],!1,null),++Ee}while(Ee<oe.length);if(this.maskKeyPress=!1,this._callPasteHandler=!1,this.element.value===j){let dt=0;this.maskKeyPress=!0;do{At.call(this,oe[dt],!1,null),++dt}while(dt<oe.length);this.maskKeyPress=!1}else Ci.call(this,ht,j)},1)}}function $i(ht){if(this.mask&&!this.readonly){const S=this.element.value,I=this.element.selectionStart,j=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});const oe=this.element.value.substring(0,I)+this.promptMask.substring(I,j)+this.element.value.substring(j);setTimeout(()=>{ot.call(this,oe),this.element.selectionStart=this.element.selectionEnd=I,this.element.value!==S&&Ci.call(this,ht,null)},0)}}function et(ht){ht.preventDefault()}function zt(ht){if((!0!==i.AR.isIE||""!==this.element.value||"Never"!==this.floatLabelType)&&((0,i.l7)(ht,{ctrlKey:!1,keyCode:229}),this.mask)){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||Tt.call(this,ht),this.element.value.length>this.promptMask.length){const j=this.element.selectionStart,Ee=this.element.value.substring(j-(this.element.value.length-this.promptMask.length),j);this.maskKeyPress=!1;let dt=0;do{At.call(this,Ee[dt],ht.ctrlKey,ht),++dt}while(dt<Ee.length);this.element.value!==this.preEleVal&&Ci.call(this,ht,null)}const I=ji.call(this,this.element);this.prevValue=I,this.value=I,""===I&&(ot.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}function Xt(ht){if(this.mask&&!this.readonly){229!==ht.keyCode&&(ht.ctrlKey&&(89===ht.keyCode||90===ht.keyCode)&&ht.preventDefault(),Tt.call(this,ht));const S=this.element.value;if(ht.ctrlKey&&(89===ht.keyCode||90===ht.keyCode)){let I;90===ht.keyCode&&this.undoCollec.length>0&&S!==this.undoCollec[this.undoCollec.length-1].value?(I=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),ot.call(this,I.value),this.element.selectionStart=I.startIndex,this.element.selectionEnd=I.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===ht.keyCode&&this.redoCollec.length>0&&S!==this.redoCollec[0].value&&(I=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),ot.call(this,I.value),this.element.selectionStart=I.startIndex,this.element.selectionEnd=I.endIndex,this.redoCollec.splice(0,1))}}}function Kt(){let ht;const S=this.element.selectionStart,I=this.element.selectionEnd;this.redoCollec.length>0?(ht=this.redoCollec[0],ot.call(this,ht.value),ht.startIndex-S==1?(this.element.selectionStart=ht.startIndex,this.element.selectionEnd=ht.endIndex):(this.element.selectionStart=S+1,this.element.selectionEnd=I+1)):(ot.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=S)}function ni(ht,S,I){return"input"===I.type&&(ht=!1,S=this.element.value,ot.call(this,this.promptMask),di.call(this,S)),ht}function Tt(ht){let I,S=!1,j=!1;this.element.value.length<this.promptMask.length&&(S=!0,I=this.element.value,S=ni.call(this,S,I,ht),Kt.call(this)),this.element.value.length>=this.promptMask.length&&"input"===ht.type&&(S=ni.call(this,S,I,ht));const oe=this.element.selectionStart,Ee=this.element.selectionEnd;let dt=this.element.selectionStart;const Bt=this.element.selectionEnd,Ii=this.hiddenMask.replace(/[>|\\<]/g,"");let Yi=Ii[dt-1];const Ss=this.element.selectionEnd;if(S||8===ht.keyCode||46===ht.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:Bt});let Ps=!1;const un=this.element.value;if(dt>0||(8===ht.keyCode||46===ht.keyCode)&&dt<this.element.value.length&&this.element.selectionEnd-dt!==this.element.value.length){let Xs=dt;dt!==Bt?(dt=Bt,46===ht.keyCode&&(Ps=!0)):46===ht.keyCode?++Xs:--Xs;for(let Jn=dt;8===ht.keyCode||S||Ps?Jn>Xs:Jn<Xs;8===ht.keyCode||S||Ps?Jn--:Jn++)for(let Ar=dt;8===ht.keyCode||S||Ps?Ar>0:Ar<this.element.value.length;8===ht.keyCode||S||Ps?Ar--:Ar++){let En;(8===ht.keyCode||Ps)&&(oe!==Ee&&oe!==dt||oe===Ee)||S?(Yi=Ii[Ar-1],En=dt-1):(Yi=Ii[Ar],En=dt,++dt);let Ie=this.element.value[En];if((0,i.le)(this.regExpCollec[Yi])&&!(0,i.le)(this.customCharacters)&&(0,i.le)(this.customCharacters[Yi])&&this.hiddenMask[En]!==this.promptChar&&"["!==this.customRegExpCollec[En][0]&&"]"!==this.customRegExpCollec[En][this.customRegExpCollec[En].length-1]||this.promptMask[En]!==this.promptChar&&(0,i.le)(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=En,ht.preventDefault(),46===ht.keyCode&&!Ps&&++this.element.selectionStart;else{const Ae=this.element.value,Le=this.promptChar,Et=Ae.substring(0,En)+Le+Ae.substring(dt,Ae.length);ot.call(this,Et),ht.preventDefault(),46===ht.keyCode&&!Ps&&En++,this.element.selectionStart=this.element.selectionEnd=En,j=!0}if(dt=this.element.selectionStart,!j&&8===ht.keyCode||Ps||!j&&46!==ht.keyCode?En=dt-1:(En=dt,j=!1),Ie=this.element.value[En],oe!==Ee&&this.element.selectionStart===oe||this.promptMask[En]===this.promptChar||Ie!==this.promptMask[En]&&this.promptMask[En]!==this.promptChar&&!(0,i.le)(this.customCharacters))break}}46===ht.keyCode&&Ps&&j&&(this.element.selectionStart=this.element.selectionEnd=Ss),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(ot.call(this,this.promptMask),ht.preventDefault(),this.element.selectionStart=this.element.selectionEnd=dt),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==un&&Ci.call(this,ht,I)}}function qt(ht){if(this.mask&&!this.readonly){const S=this.element.value;if(!ht.ctrlKey||ht.ctrlKey&&"KeyA"!==ht.code&&"KeyY"!==ht.code&&"KeyZ"!==ht.code&&"KeyX"!==ht.code&&"KeyC"!==ht.code&&"KeyV"!==ht.code){this.maskKeyPress=!0;let I=ht.key;"Spacebar"===I&&(I=String.fromCharCode(ht.keyCode)),I?I&&1===I.length&&(At.call(this,I,ht.ctrlKey,ht),ht.preventDefault()):(this.isIosInvalid=!0,At.call(this,String.fromCharCode(ht.keyCode),ht.ctrlKey,ht),ht.preventDefault(),this.isIosInvalid=!1),32===ht.keyCode&&" "===I&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-I.length)}this.element.value!==S&&Ci.call(this,ht,S)}}function Ci(ht,S){const I=this.isProtectedOnChange;if(!(0,i.le)(this.changeEventArgs)&&!this.isInitial){const j={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=ji.call(this,this.element)),(0,i.le)(ht)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=ht),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=I,(0,i.TS)(j,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",j)}this.preEleVal=this.element.value,this.prevValue=ji.call(this,this.element),(0,i.Y4)(this.element,{"aria-valuenow":this.element.value})}function gs(ht){if(this.mask&&!this.readonly){let S;if(this.maskKeyPress||229!==ht.keyCode)Dt.call(this);else{let j;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){const oe=this.element.selectionStart,Ee=this.element.value.length-this.promptMask.length;let dt=this.element.value.substring(oe-Ee,oe);if(this.undoCollec.length>0){S=this.undoCollec[this.undoCollec.length-1];const Bt=this.element.selectionStart;j=S.value;const Ii=S.value.substring(Bt-Ee,Bt);S=this.redoCollec[0],dt=dt.trim();const Yi=i.AR.isAndroid&&""===dt;Yi||Ii===dt||S.value.substring(Bt-Ee,Bt)===dt?Yi&&Oi.call(this,ht,Bt-1,this.element.selectionEnd-1,dt,ht.ctrlKey,!1):At.call(this,dt,ht.ctrlKey,ht)}else j=this.promptMask,At.call(this,dt,ht.ctrlKey,ht);this.maskKeyPress=!1,Ci.call(this,ht,j)}}const I=ji.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==I||""===I&&this.value!==I)&&(this.prevValue=I,this.value=I)}else Ci.call(this,ht);if(0===this.element.selectionStart&&0===this.element.selectionEnd){const S=this.element;setTimeout(()=>{S.setSelectionRange(0,0)},0)}}function Jt(ht){if(ht.length>1&&this.promptMask.length+ht.length<this.element.value.length){const S=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+ht+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);ot.call(this,S),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+ht.length}this.element.selectionStart=this.element.selectionStart-ht.length,this.element.selectionEnd=this.element.selectionEnd-ht.length}function Wt(ht){this.maskKeyPress||Jt.call(this,ht)}function At(ht,S,I){if(Wt.call(this,ht),(0,i.le)(this)||(0,i.le)(ht))return;let j=this.element.selectionStart;const oe=j;let Ee,dt=!1;const Bt=this.element.value;let Ii,Yi=!1,Ss=!1;for(let Ps=0;Ps<ht.length;Ps++){const un=ht[Ps];if(j=this.element.selectionStart,!this.maskKeyPress&&oe===j&&(j+=Ps),!this.maskKeyPress||j<this.promptMask.length){for(let Xs=j;Xs<this.promptMask.length;Xs++)Ee=this.escapeMaskValue[j],"\\"===this.hiddenMask[j]&&this.hiddenMask[j+1]===ht&&(Ss=!0),((0,i.le)(this.regExpCollec[Ee])&&((0,i.le)(this.customCharacters)||!(0,i.le)(this.customCharacters)&&(0,i.le)(this.customCharacters[Ee]))&&this.hiddenMask[j]!==this.promptChar&&"["!==this.customRegExpCollec[j][0]&&"]"!==this.customRegExpCollec[j][this.customRegExpCollec[j].length-1]||this.promptMask[j]!==this.promptChar&&(0,i.le)(this.customCharacters)||this.promptChar===Ee&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=j+1,j=this.element.selectionStart,Ee=this.hiddenMask[j]);if((0,i.le)(this.customCharacters)||(0,i.le)(this.customCharacters[Ee]))(!(0,i.le)(this.regExpCollec[Ee])&&un.match(new RegExp(this.regExpCollec[Ee]))&&this.promptMask[j]===this.promptChar||this.promptMask[j]===this.promptChar&&"["===this.customRegExpCollec[j][0]&&"]"===this.customRegExpCollec[j][this.customRegExpCollec[j].length-1]&&un.match(new RegExp(this.customRegExpCollec[j])))&&(dt=!0);else{const Jn=this.customCharacters[Ee].split(",");for(let Ar=0;Ar<Jn.length;Ar++)if(un.match(new RegExp("["+Jn[Ar]+"]"))){dt=!0;break}}if((!this.maskKeyPress||j<this.hiddenMask.length)&&dt){if(0===Ps)if(this.maskKeyPress)this.undoCollec.push({value:Bt,startIndex:j,endIndex:j});else{const Xs=this.element.selectionStart,Jn=this.element.selectionEnd;this.redoCollec.length>0?(Ii=this.redoCollec[0].value,ot.call(this,Ii),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:j,endIndex:j}),Ii=this.promptMask,ot.call(this,Ii)),this.element.selectionStart=Xs,this.element.selectionEnd=Jn}j=this.element.selectionStart,li.call(this,I,j,un,Ii,Ss),Yi=!0,Ps===ht.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),dt=!1}else j=this.element.selectionStart,Oi.call(this,I,j,oe,ht,S,Yi);Ps===ht.length-1&&!dt&&(!i.AR.isAndroid||i.AR.isAndroid&&j<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1===ht.length&&!S&&!(0,i.le)(I)&&Gt.call(this)}}function li(ht,S,I,j,oe){if(this.hiddenMask.length>this.promptMask.length&&(I=Pt.call(this,I,this.element.value)),!oe){const Ee=this.element.value,dt=Ee.substring(0,S)+I+Ee.substring(S+1,Ee.length);ot.call(this,dt),this.element.selectionStart=this.element.selectionEnd=S+1}}function Oi(ht,S,I,j,oe,Ee){if(!this.maskKeyPress){const dt=this.element.value;S>=this.promptMask.length?ot.call(this,dt.substring(0,S)):(ot.call(this,I===S?dt.substring(0,S)+dt.substring(S+1,dt.length):this.promptMask.length===this.element.value.length?dt.substring(0,S)+dt.substring(S,dt.length):dt.substring(0,I)+dt.substring(I+1,dt.length)),this.element.selectionStart=this.element.selectionEnd=Ee||this.element.value[I]!==this.promptChar?S:I),Gt.call(this)}1===j.length&&!oe&&!(0,i.le)(ht)&&Gt.call(this)}function Gt(){const ht=this.element.parentNode;let S=200;ht.classList.contains("e-input-group")||ht.classList.contains("e-float-input")?(0,i.cn)([ht],J):(0,i.cn)([this.element],J),!0===this.isIosInvalid&&(S=400),(0,i.Y4)(this.element,{"aria-invalid":"true"}),setTimeout(()=>{this.maskKeyPress||Dt.call(this)},S)}function Dt(){const ht=this.element.parentNode;(0,i.le)(ht)||(0,i.IV)([ht],J),(0,i.IV)([this.element],J),(0,i.Y4)(this.element,{"aria-invalid":"false"})}function Pt(ht,S){let I,j,oe=S,Ee=0;for(j=0;j<this.hiddenMask.length;j++)if("\\"===this.hiddenMask[j]&&(I=oe.substring(0,j)+"\\"+oe.substring(j,oe.length)),(">"===this.hiddenMask[j]||"<"===this.hiddenMask[j]||"|"===this.hiddenMask[j])&&(this.hiddenMask[j]!==oe[j]&&(I=oe.substring(0,j)+this.hiddenMask[j]+oe.substring(j,oe.length)),++Ee),I){if(I[j]===this.promptChar&&j>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+Ee===j){Ee=0;break}oe=I}for(;j>=0&&I;){if(0===j||"\\"!==I[j-1]){if(">"===I[j]){ht=ht.toUpperCase();break}if("<"===I[j]){ht=ht.toLowerCase();break}if("|"===I[j])break}--j}return ht}function di(ht){if(this.mask&&void 0!==ht&&(void 0===this.prevValue||this.prevValue!==ht)){if(this.maskKeyPress=!0,ot.call(this,this.promptMask),""!==ht&&!(null===ht&&"Never"===this.floatLabelType&&this.placeholder)&&(this.element.selectionStart=0,this.element.selectionEnd=0),null!==ht)for(let j=0;j<ht.length;j++)At.call(this,ht[j],!1,null);const S=ji.call(this,this.element);this.prevValue=S,this.value=S,Ci.call(this,null,null),this.maskKeyPress=!1;const I=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!(0,i.le)(I)&&I.classList.contains(be)&&!this.isFocus&&((0,i.IV)([I],be),(0,i.cn)([I],"e-label-bottom"),ot.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&ot.call(this,this.value)}function ot(ht,S){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&(0,i.le)(this.value)&&(ht="");const I=ji.call(this,S||this.element,ht);null===I||""===I?($e.setValue(ht,S||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):$e.setValue(ht,S||this.element,this.floatLabelType,this.showClearButton)}var wt=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};const ns="e-input-focus",ls=["title","style","class"];let ws=class extends i.wA{constructor(S,I){super(S,I),this.initInputValue="",this.isAngular=!1,this.preventChange=!1,this.isClicked=!1,this.maskOptions=S}getModuleName(){return"maskedtextbox"}preRender(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=ue,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;const S=(0,i.NA)("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),(0,i.IV)([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=(0,i.oq)(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const I=this.createElement("input");for(let j=0;j<this.element.attributes.length;j++)I.setAttribute(this.element.attributes[j].nodeName,this.element.attributes[j].nodeValue),I.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(I),this.element=I,(0,i.sO)("ej2_instances",S,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)}getPersistData(){return this.addOnPersist(["value"])}render(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&(0,i.cn)([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,!i.AR.isDevice&&("11.0"===i.AR.info.version||"edge"===i.AR.info.name)&&this.element.blur(),i.AR.isDevice&&i.AR.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),this.renderComplete())}updateHTMLAttrToElement(){if(!(0,i.le)(this.htmlAttributes))for(const S of Object.keys(this.htmlAttributes))ls.indexOf(S)<0&&this.element.setAttribute(S,this.htmlAttributes[S])}updateCssClass(S,I){$e.setCssClass(this.getValidClassList(S),[this.inputObj.container],this.getValidClassList(I))}getValidClassList(S){let I=S;return!(0,i.le)(S)&&""!==S&&(I=S.replace(/\s+/g," ").trim()),I}updateHTMLAttrToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const S of Object.keys(this.htmlAttributes))if(ls.indexOf(S)>-1)if("class"===S){const I=this.htmlAttributes[S].replace(/\s+/g," ").trim();""!==I&&(0,i.cn)([this.inputObj.container],I.split(" "))}else if("style"===S){let I=this.inputObj.container.getAttribute(S);I=(0,i.le)(I)?this.htmlAttributes[S]:I+this.htmlAttributes[S],this.inputObj.container.setAttribute(S,I)}else this.inputObj.container.setAttribute(S,this.htmlAttributes[S])}resetMaskedTextBox(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),_e.call(this),lt.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&ot.call(this,this.value);const S=ji.call(this,this.element);this.prevValue=S,this.value=S,this.isInitial||B.call(this),Xe.call(this)}setMaskPlaceholder(S,I){(I||this.placeholder)&&($e.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&S&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&ot.call(this,""))}setWidth(S){if(!(0,i.le)(S))if("number"==typeof S)this.inputObj.container.style.width=(0,i.Ac)(S),this.element.style.width=(0,i.Ac)(S);else if("string"==typeof S){const I=S.match(/px|%|em/)?S:(0,i.Ac)(S);this.inputObj.container.style.width=I,this.element.style.width=I}}checkHtmlAttributes(S){const I=S?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];for(const j of I)if(!(0,i.le)(this.element.getAttribute(j)))switch(j){case"placeholder":((0,i.le)(this.maskOptions)||void 0===this.maskOptions.placeholder||S)&&this.setProperties({placeholder:this.element.placeholder},!S);break;case"disabled":if((0,i.le)(this.maskOptions)||void 0===this.maskOptions.enabled||S){const oe=!("disabled"===this.element.getAttribute(j)||""===this.element.getAttribute(j)||"true"===this.element.getAttribute(j));this.setProperties({enabled:oe},!S)}break;case"value":((0,i.le)(this.maskOptions)||void 0===this.maskOptions.value||S)&&this.setProperties({value:this.element.value},!S);break;case"readonly":if((0,i.le)(this.maskOptions)||void 0===this.maskOptions.readonly||S){const oe="readonly"===this.element.getAttribute(j)||""===this.element.getAttribute(j)||"true"===this.element.getAttribute(j);this.setProperties({readonly:oe},!S)}}}createWrapper(){let S=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(S=this.getValidClassList(this.cssClass)),this.inputObj=$e.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:S,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))}onPropertyChanged(S,I){for(const j of Object.keys(S))switch(j){case"value":di.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(S.width);break;case"cssClass":this.updateCssClass(S.cssClass,I.cssClass);break;case"enabled":$e.setEnabled(S.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":$e.setReadonly(S.readonly,this.element);break;case"enableRtl":$e.setEnableRtl(S.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=S.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":$e.setClearButton(S.showClearButton,this.element,this.inputObj,void 0,this.createElement),de.call(this);break;case"floatLabelType":this.floatLabelType=S.floatLabelType,$e.removeFloating(this.inputObj),$e.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":{const oe=this.value;this.mask=S.mask,this.updateValue(oe)}break;case"promptChar":{S.promptChar.length>1&&(S.promptChar=S.promptChar[0]),this.promptChar=S.promptChar?S.promptChar:"_";let oe=this.element.value.replace(new RegExp("["+I.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(oe=this.promptMask.replace(new RegExp("["+I.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+I.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],ot.call(this,oe);break}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}updateValue(S){this.resetMaskedTextBox(),di.call(this,S)}getMaskedValue(){return $t.call(this,this.element)}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),(0,i.cn)([this.inputObj.container],[ns]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),(0,i.IV)([this.inputObj.container],[ns]))}destroy(){B.call(this);const S=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-valuenow","aria-invalid"];for(let I=0;I<S.length;I++)this.element.removeAttribute(S[I]);this.element.classList.remove("e-input"),this.inputObj.container.insertAdjacentElement("afterend",this.element),(0,i.og)(this.inputObj.container),super.destroy()}};wt([(0,i.Z9)(null)],ws.prototype,"cssClass",void 0),wt([(0,i.Z9)(null)],ws.prototype,"width",void 0),wt([(0,i.Z9)(null)],ws.prototype,"placeholder",void 0),wt([(0,i.Z9)("Never")],ws.prototype,"floatLabelType",void 0),wt([(0,i.Z9)({})],ws.prototype,"htmlAttributes",void 0),wt([(0,i.Z9)(!0)],ws.prototype,"enabled",void 0),wt([(0,i.Z9)(!1)],ws.prototype,"readonly",void 0),wt([(0,i.Z9)(!1)],ws.prototype,"showClearButton",void 0),wt([(0,i.Z9)(!1)],ws.prototype,"enablePersistence",void 0),wt([(0,i.Z9)(null)],ws.prototype,"mask",void 0),wt([(0,i.Z9)("_")],ws.prototype,"promptChar",void 0),wt([(0,i.Z9)(null)],ws.prototype,"value",void 0),wt([(0,i.Z9)(null)],ws.prototype,"customCharacters",void 0),wt([(0,i.ju)()],ws.prototype,"created",void 0),wt([(0,i.ju)()],ws.prototype,"destroyed",void 0),wt([(0,i.ju)()],ws.prototype,"change",void 0),wt([(0,i.ju)()],ws.prototype,"focus",void 0),wt([(0,i.ju)()],ws.prototype,"blur",void 0),ws=wt([i.Zl],ws);var Ds=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};class on extends i.rt{}Ds([(0,i.Z9)("None")],on.prototype,"placement",void 0),Ds([(0,i.Z9)(10)],on.prototype,"largeStep",void 0),Ds([(0,i.Z9)(1)],on.prototype,"smallStep",void 0),Ds([(0,i.Z9)(!1)],on.prototype,"showSmallTicks",void 0),Ds([(0,i.Z9)(null)],on.prototype,"format",void 0);class Bn extends i.rt{}Ds([(0,i.Z9)(null)],Bn.prototype,"color",void 0),Ds([(0,i.Z9)(null)],Bn.prototype,"start",void 0),Ds([(0,i.Z9)(null)],Bn.prototype,"end",void 0);class Kn extends i.rt{}Ds([(0,i.Z9)(!1)],Kn.prototype,"enabled",void 0),Ds([(0,i.Z9)(null)],Kn.prototype,"minStart",void 0),Ds([(0,i.Z9)(null)],Kn.prototype,"minEnd",void 0),Ds([(0,i.Z9)(null)],Kn.prototype,"maxStart",void 0),Ds([(0,i.Z9)(null)],Kn.prototype,"maxEnd",void 0),Ds([(0,i.Z9)(!1)],Kn.prototype,"startHandleFixed",void 0),Ds([(0,i.Z9)(!1)],Kn.prototype,"endHandleFixed",void 0);class Dn extends i.rt{}Ds([(0,i.Z9)("")],Dn.prototype,"cssClass",void 0),Ds([(0,i.Z9)("Before")],Dn.prototype,"placement",void 0),Ds([(0,i.Z9)("Focus")],Dn.prototype,"showOn",void 0),Ds([(0,i.Z9)(!1)],Dn.prototype,"isVisible",void 0),Ds([(0,i.Z9)(null)],Dn.prototype,"format",void 0);let Xi=class extends i.wA{constructor(S,I){super(S,I),this.horDir="left",this.verDir="bottom",this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},this.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},this.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",this.customAriaText=null,this.drag=!0,this.isDragComplete=!1,this.initialTooltip=!0}preRender(){this.l10n=new i.E7("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()}formChecker(){const S=(0,i.oq)(this.element,"form");S?(this.isForm=!0,(0,i.le)(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!(0,i.le)(this.formResetValue)&&"object"==typeof this.formResetValue?(0,i.le)(this.formResetValue)&&(this.formResetValue=parseFloat((0,i.Ac)(this.min))):this.formResetValue=[parseFloat((0,i.Ac)(this.min)),parseFloat((0,i.Ac)(this.max))],this.formElement=S):this.isForm=!1}initCultureFunc(){this.internationalization=new i.eC(this.locale)}initCultureInfo(){this.tooltipFormatInfo.format=(0,i.le)(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=(0,i.le)(this.ticks.format)?null:this.ticks.format}formatString(S,I){let j=null,oe=null;if(S||0===S){j=this.formatNumber(S);const Ee=this.numberOfDecimals(S);oe=this.internationalization.getNumberFormat(I)(this.makeRoundNumber(S,Ee))}return{elementVal:j,formatString:oe}}formatNumber(S){const I=this.numberOfDecimals(S);return this.internationalization.getNumberFormat({maximumFractionDigits:I,minimumFractionDigits:I,useGrouping:!1})(S)}numberOfDecimals(S){const I=S.toString().split(".")[1];return I&&I.length?I.length:0}makeRoundNumber(S,I){return Number(S.toFixed(I||0))}fractionalToInteger(S){S=0===this.numberOfDecimals(S)?Number(S).toFixed(this.noOfDecimals):S;let I=1;for(let j=0;j<this.noOfDecimals;j++)I*=10;return Number((S*I).toFixed(0))}render(){this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(()=>{this.refresh()},0)}initialize(){(0,i.cn)([this.element],"e-slider"),this.setCSSClass()}setElementWidth(S){(0,i.le)(S)||("number"==typeof S?this.sliderContainer.style.width=(0,i.Ac)(S):"string"==typeof S&&(this.sliderContainer.style.width=S.match(/px|%|em/)?S:(0,i.Ac)(S)))}setCSSClass(S){S&&(0,i.IV)([this.element],S.split(" ")),this.cssClass&&(0,i.cn)([this.element],this.cssClass.split(" "))}setEnabled(){this.enabled?((0,i.IV)([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove("e-disabled"),this.wireEvents()):((0,i.cn)([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add("e-disabled"),this.unwireEvents())}getTheme(S){return window.getComputedStyle(S,":after").getPropertyValue("content").replace(/['"]+/g,"")}initRender(){this.sliderContainer=this.createElement("div",{className:"e-slider-container e-control-wrapper"}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:"e-slider-track"}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:(0,i.le)(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:"e-slider-input"}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=(0,i.le)(this.value)?parseFloat((0,i.Ac)(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat((0,i.Ac)(this.value.toString()))):[this.checkHandleValue(parseFloat((0,i.Ac)(this.value[0].toString()))),this.checkHandleValue(parseFloat((0,i.Ac)(this.value[1].toString())))],this.previousChanged=this.previousVal,(0,i.le)(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?(0,i.IV)([this.sliderContainer],["e-disabled"]):(0,i.cn)([this.sliderContainer],["e-disabled"]),this.readonly?(0,i.cn)([this.sliderContainer],["e-read-only"]):(0,i.IV)([this.sliderContainer],["e-read-only"])}getThemeInitialization(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible}createRangeBar(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:"e-range"}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&this.rangeBar.classList.add("Horizontal"===this.orientation?"e-drag-horizontal":"e-drag-vertical"))}createLimitBar(){let S="Range"!==this.type?"e-limit-bar":"e-limit-first";S+=" e-limits",this.limitBarFirst=this.createElement("div",{attrs:{class:S}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:"e-limit-second e-limits"}}),this.element.appendChild(this.limitBarSecond))}setOrientClass(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove("e-vertical"),this.sliderContainer.classList.add("e-horizontal"),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove("e-horizontal"),this.sliderContainer.classList.add("e-vertical"),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))}setAriaAttributes(S){let I=this.min,j=this.max;!(0,i.le)(this.customValues)&&this.customValues.length>0&&(I=this.customValues[0],j=this.customValues[this.customValues.length-1]),"Range"!==this.type?(0,i.Y4)(S,{"aria-valuemin":I.toString(),"aria-valuemax":j.toString()}):(!(0,i.le)(this.customValues)&&this.customValues.length>0?[[I.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),j.toString()]]:[[I.toString(),this.value[1].toString()],[this.value[0].toString(),j.toString()]]).forEach((Ee,dt)=>{const Bt=0===dt?this.firstHandle:this.secondHandle;Bt&&(0,i.Y4)(Bt,{"aria-valuemin":Ee[0],"aria-valuemax":Ee[1]})})}createSecondHandle(){this.secondHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0"}}),this.secondHandle.classList.add("e-handle-second"),this.element.appendChild(this.secondHandle)}createFirstHandle(){this.firstHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0"}}),this.firstHandle.classList.add("e-handle-first"),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:"e-handle e-material-handle"}}),this.element.appendChild(this.materialHandle))}wireFirstHandleEvt(S){S?(i.bi.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),i.bi.remove(this.firstHandle,"transitionend",this.transitionEnd),i.bi.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),i.bi.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(i.bi.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),i.bi.add(this.firstHandle,"transitionend",this.transitionEnd,this),i.bi.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),i.bi.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))}wireSecondHandleEvt(S){S?(i.bi.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),i.bi.remove(this.secondHandle,"transitionend",this.transitionEnd),i.bi.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),i.bi.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(i.bi.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),i.bi.add(this.secondHandle,"transitionend",this.transitionEnd,this),i.bi.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),i.bi.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))}handleStart(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"]("e-material-tooltip-start")))}transitionEnd(S){"transform"!==S.propertyName&&(this.handleStart(),this.getHandle().style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())}handleFocusOut(){this.firstHandle.classList.contains("e-handle-focused")&&this.firstHandle.classList.remove("e-handle-focused"),"Range"===this.type&&this.secondHandle.classList.contains("e-handle-focused")&&this.secondHandle.classList.remove("e-handle-focused")}handleFocus(S){this.focusSliderElement(),this.sliderBarClick(S),S.currentTarget===this.firstHandle?(this.firstHandle.classList.add("e-handle-focused"),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add("e-handle-focused"),this.secondHandle.classList.add("e-tab-handle")),i.bi.add(document,"mousemove touchmove",this.sliderBarMove,this),i.bi.add(document,"mouseup touchend",this.sliderBarUp,this)}handleOver(S){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(S.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())}handleLeave(S){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&!S.currentTarget.classList.contains("e-handle-focused")&&!S.currentTarget.classList.contains("e-tab-handle")&&this.closeTooltip()}setHandler(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()}setEnableRTL(){this.enableRtl&&"Vertical"!==this.orientation?(0,i.cn)([this.sliderContainer],"e-rtl"):(0,i.IV)([this.sliderContainer],"e-rtl");let S="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),S!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&((0,i.V7)(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&(0,i.V7)(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()}tooltipValue(){let S;const I={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),I.text=S=this.tooltipObj.content,this.trigger("tooltipChange",I,j=>{this.addTooltipClass(j.text),S!==j.text&&(this.customAriaText=j.text,this.tooltipObj.content=j.text,this.setAriaAttrValue(this.firstHandle),"Range"===this.type&&this.setAriaAttrValue(this.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))}setTooltipContent(){let S;S=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=S}formatContent(S,I){let j="",oe=this.handleVal1,Ee=this.handleVal2;return!(0,i.le)(this.customValues)&&this.customValues.length>0&&(oe=this.customValues[this.handleVal1],Ee=this.customValues[this.handleVal2]),I?("Range"===this.type?j=this.enableRtl&&"Vertical"!==this.orientation?(0,i.le)(this.tooltip)||(0,i.le)(this.tooltip.format)?Ee.toString()+" - "+oe.toString():this.formatString(Ee,S).elementVal+" - "+this.formatString(oe,S).elementVal:(0,i.le)(this.tooltip)||(0,i.le)(this.tooltip.format)?oe.toString()+" - "+Ee.toString():this.formatString(oe,S).elementVal+" - "+this.formatString(Ee,S).elementVal:(0,i.le)(oe)||(j=(0,i.le)(this.tooltip)||(0,i.le)(this.tooltip.format)?oe.toString():this.formatString(oe,S).elementVal),j):("Range"===this.type?j=this.enableRtl&&"Vertical"!==this.orientation?(0,i.le)(S.format)?Ee.toString()+" - "+oe.toString():this.formatString(Ee,S).formatString+" - "+this.formatString(oe,S).formatString:(0,i.le)(S.format)?oe.toString()+" - "+Ee.toString():this.formatString(oe,S).formatString+" - "+this.formatString(Ee,S).formatString:(0,i.le)(oe)||(j=(0,i.le)(S.format)?oe.toString():this.formatString(oe,S).formatString),j)}addTooltipClass(S){if(this.isMaterialTooltip){let I=S.toString().length;if(this.tooltipElement){let j=I>4?{oldCss:"e-material-default",newCss:"e-material-range"}:{oldCss:"e-material-range",newCss:"e-material-default"};this.tooltipElement.classList.remove(j.oldCss),this.tooltipElement.classList.contains(j.newCss)||(this.tooltipElement.classList.add(j.newCss),this.tooltipElement.style.transform=I>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else this.tooltipObj.cssClass="e-slider-tooltip "+(I>4?"e-material-range":"e-material-default")}}tooltipPlacement(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"}tooltipBeforeOpen(S){this.tooltipElement=S.element,this.tooltip.cssClass&&(0,i.cn)([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(I=>I)),S.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add("e-material-tooltip-hide"),this.handleStart(),this.setTooltipTransform())}tooltipCollision(S){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){const I=this.isBootstrap4?3:6;switch(S){case"TopCenter":this.tooltipObj.setProperties({offsetY:-I},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:I},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-I},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:I},!1)}}}materialTooltipEventCallBack(S){this.sliderBarClick(S),i.bi.add(document,"mousemove touchmove",this.sliderBarMove,this),i.bi.add(document,"mouseup touchend",this.sliderBarUp,this)}wireMaterialTooltipEvent(S){this.isMaterialTooltip&&(S?i.bi.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):i.bi.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))}tooltipPositionCalculation(S){let I;switch(S){case"TopCenter":I="e-slider-horizontal-before";break;case"BottomCenter":I="e-slider-horizontal-after";break;case"LeftCenter":I="e-slider-vertical-before";break;case"RightCenter":I="e-slider-vertical-after"}return I}getTooltipTransformProperties(S){let I;if(this.tooltipElement){let j="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;I="Horizontal"===this.orientation?"e-slider-horizontal-before"===S?{rotate:"rotate(45deg)",translate:`translateY(${j}px)`}:{rotate:"rotate(225deg)",translate:`translateY(${-j}px)`}:"e-slider-vertical-before"===S?{rotate:"rotate(-45deg)",translate:`translateX(${j}px)`}:{rotate:"rotate(-225deg)",translate:`translateX(${-j}px)`}}return I}openMaterialTooltip(){if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);let S=this.tooltipElement.firstElementChild;S.classList.remove("e-material-tooltip-hide"),S.classList.add("e-material-tooltip-show"),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add("e-material-tooltip-open"),this.materialHandle.style.transform="scale(0)",this.tooltipElement.style.transform=S.innerText.length>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(()=>{this.tooltipElement.style.transition=this.transition.handle},2500):setTimeout(()=>{this.tooltipElement.style.transition="none"},2500)}}closeMaterialTooltip(){if(this.isMaterialTooltip){let S=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,S.classList.remove("e-material-tooltip-show"),S.classList.add("e-material-tooltip-hide"),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove("e-material-tooltip-open"),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(()=>{this.tooltipElement.style.transition="none"},2500)}}checkTooltipPosition(S){let I=this.tooltipPositionCalculation(S.collidedPosition);(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==S.collidedPosition||!S.element.classList.contains(I))&&(this.isMaterialTooltip&&(void 0!==I&&(S.element.classList.remove(this.previousTooltipClass),S.element.classList.add(I),this.previousTooltipClass=I),S.element.style.transform&&S.element.classList.contains("e-material-tooltip-open")&&S.element.firstElementChild.innerText.length<=4&&(S.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=S.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()}setTooltipTransform(){let S=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.style.transform=this.tooltipElement.firstElementChild.innerText.length>4?`${S.translate} scale(0.01)`:`${S.translate} ${S.rotate} scale(0.01)`}renderTooltip(){this.tooltipObj=new u.u({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4||this.isTailwind||this.isBootstrap5,cssClass:"e-slider-tooltip",height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()}initializeTooltipProps(){this.setProperties({tooltip:{showOn:"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(I=>{(0,i.le)(I)||(I.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add("e-material-slider"),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))}tooltipBeforeClose(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0}setButtons(){this.firstBtn=this.createElement("div",{className:"e-slider-button e-first-button"}),this.firstBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:"e-slider-button e-second-button"}),this.secondBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add("e-slider-btn"),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()}buttonTitle(){let S=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);let I=this.l10n.getConstant("decrementTitle"),j=this.l10n.getConstant("incrementTitle");(0,i.Y4)(S?this.secondBtn:this.firstBtn,{"aria-label":I,title:I}),(0,i.Y4)(S?this.firstBtn:this.secondBtn,{"aria-label":j,title:j})}buttonFocusOut(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")}repeatButton(S){let oe,I=this.handleValueUpdate(),j=this.enableRtl&&"Vertical"!==this.orientation;S.target.parentElement.classList.contains("e-first-button")||S.target.classList.contains("e-first-button")?oe=this.add(I,parseFloat(this.step.toString()),!!j):(S.target.parentElement.classList.contains("e-second-button")||S.target.classList.contains("e-second-button"))&&(oe=this.add(I,parseFloat(this.step.toString()),!j)),this.limits.enabled&&(oe=this.getLimitCorrectedValues(oe)),oe>=this.min&&oe<=this.max&&(this.changeHandleValue(oe),this.tooltipToggle(this.getHandle()))}repeatHandlerMouse(S){S.preventDefault(),("mousedown"===S.type||"touchstart"===S.type)&&(this.buttonClick(S),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,S))}materialChange(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")}focusHandle(){this.getHandle().classList.contains("e-tab-handle")||this.getHandle().classList.add("e-tab-handle")}repeatHandlerUp(S){this.changeEvent("changed",S),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()}customTickCounter(S){let I=4;return!(0,i.le)(this.customValues)&&this.customValues.length>0&&(S>4&&(I=3),S>7&&(I=2),S>14&&(I=1),S>28&&(I=0)),I}renderScale(){let S="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:"e-scale e-"+S+"-scale e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",i.AR.isAndroid&&"h"===S&&this.ul.classList.add("e-tick-pos");let I=this.ticks.smallStep;this.ticks.showSmallTicks?I<=0&&(I=parseFloat((0,i.Ac)(this.step))):I=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat((0,i.Ac)(this.max))-parseFloat((0,i.Ac)(this.min));let j=this.fractionalToInteger(this.min),oe=this.fractionalToInteger(this.max),Ee=this.fractionalToInteger(I),dt=!(0,i.le)(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,Bt=this.customTickCounter(dt),Ii=!(0,i.le)(this.customValues)&&this.customValues.length>0?dt*Bt+dt:Math.abs((oe-j)/Ee);this.element.appendChild(this.ul);let Yi,Ss=parseFloat(this.min.toString());"v"===S&&(Ss=parseFloat(this.max.toString()));let un,Ps=0,Xs=100/Ii;Xs===1/0&&(Xs=5);for(let Jn=0,Ar=!(0,i.le)(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,En=0;Jn<=Ii;Jn++){if(Yi=this.createElement("li",{attrs:{class:"e-tick",role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!(0,i.le)(this.customValues)&&this.customValues.length>0)un=Jn%(Bt+1)==0,un&&("h"===S?(Ss=this.customValues[En],En++):(Ss=this.customValues[Ar],Ar--),Yi.setAttribute("title",Ss.toString()));else if(Yi.setAttribute("title",Ss.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))un="h"===S?(Ss-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(Ss-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{let Le=this.fractionalToInteger(this.ticks.largeStep),Et=this.fractionalToInteger(Ss);un="h"===S?(Et-j)%Le==0:Math.abs(Et-parseFloat(oe.toString()))%Le==0}un&&Yi.classList.add("e-large"),"h"===S?Yi.style.width=Xs+"%":Yi.style.height=Xs+"%";let Ae,Ie=un?"Both"===this.ticks.placement?2:1:0;if(un)for(let Le=0;Le<Ie;Le++)this.createTick(Yi,Ss,Xs);else(0,i.le)(this.customValues)&&this.formatTicksValue(Yi,Ss);this.ul.appendChild(Yi),this.tickElementCollection.push(Yi),(0,i.le)(this.customValues)&&(Ae=this.numberOfDecimals(I)>this.numberOfDecimals(Ss)?this.numberOfDecimals(I):this.numberOfDecimals(Ss),Ss=this.makeRoundNumber("h"===S?Ss+I:Ss-I,Ae),Ps=this.makeRoundNumber(Ps+I,Ae))}this.ticksAlignment(S,Xs)}ticksAlignment(S,I,j=!0){this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add("e-first-tick"),this.lastChild.classList.add("e-last-tick"),this.sliderContainer.classList.add("e-scale-"+this.ticks.placement.toLowerCase()),"h"===S?(this.firstChild.style.width=I/2+"%",this.lastChild.style.width=I/2+"%"):(this.firstChild.style.height=I/2+"%",this.lastChild.style.height=I/2+"%"),j&&this.trigger("renderedTicks",{ticksWrapper:this.ul,tickElements:this.tickElementCollection}),this.scaleAlignment()}createTick(S,I,j){let oe=this.createElement("span",{className:"e-tick-value e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});S.appendChild(oe),(0,i.le)(this.customValues)?this.formatTicksValue(S,I,oe,j):oe.innerHTML=this.enableHtmlSanitizer?i.pJ.sanitize(I.toString()):I.toString()}formatTicksValue(S,I,j,oe){const Ee=this.formatNumber(I),dt=(0,i.le)(this.ticks)||(0,i.le)(this.ticks.format)?Ee:this.formatString(I,this.ticksFormatInfo).formatString;this.trigger("renderingTicks",{value:I,text:dt,tickElement:S},Ii=>{S.setAttribute("title",Ii.text.toString()),j&&(j.innerHTML=this.enableHtmlSanitizer?i.pJ.sanitize(Ii.text.toString()):Ii.text.toString())})}scaleAlignment(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size"):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size")}tickValuePosition(){this.firstChild=this.element.querySelector("ul").children[0];let I,j,S=this.firstChild.getBoundingClientRect(),oe=this.ticks.smallStep,Ee=Math.abs(parseFloat((0,i.Ac)(this.max))-parseFloat((0,i.Ac)(this.min)))/oe;this.firstChild.children.length>0&&(I=this.firstChild.children[0].getBoundingClientRect());let Bt,dt=[this.sliderContainer.querySelectorAll(".e-tick.e-large .e-tick-value")];Bt=[].slice.call(dt[0],"Both"===this.ticks.placement?2:1);let Ii="Vertical"===this.orientation?2*S.height:2*S.width;for(let Yi=0;Yi<this.firstChild.children.length;Yi++)"Vertical"===this.orientation?this.firstChild.children[Yi].style.top=-I.height/2+"px":this.firstChild.children[Yi].style.left=this.enableRtl?(Ii-this.firstChild.children[Yi].getBoundingClientRect().width)/2+"px":-I.width/2+"px";for(let Yi=0;Yi<Bt.length;Yi++)j=Bt[Yi].getBoundingClientRect(),(0,i.V7)(Bt[Yi],"Vertical"===this.orientation?{top:(Ii-j.height)/2+"px"}:{left:(Ii-j.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==Ee&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===Ee&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove("e-last-tick"))}setAriaAttrValue(S){let I;const j=!(0,i.le)(this.ticks)&&!(0,i.le)(this.ticks.format);let oe=this.formatContent(j?this.tooltipFormatInfo:this.ticksFormatInfo,!1);const Ee=this.formatContent(j?this.ticksFormatInfo:this.tooltipFormatInfo,!0);oe=this.customAriaText?this.customAriaText:oe,I=2===oe.split(" - ").length?oe.split(" - "):[oe,oe],this.setAriaAttributes(S),(0,i.Y4)(S,"Range"!==this.type?{"aria-valuenow":Ee,"aria-valuetext":oe}:this.enableRtl?S===this.firstHandle?{"aria-valuenow":Ee.split(" - ")[1],"aria-valuetext":I[1]}:{"aria-valuenow":Ee.split(" - ")[0],"aria-valuetext":I[0]}:S===this.firstHandle?{"aria-valuenow":Ee.split(" - ")[0],"aria-valuetext":I[0]}:{"aria-valuenow":Ee.split(" - ")[1],"aria-valuetext":I[1]})}handleValueUpdate(){let S;return S="Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1,S}getLimitCorrectedValues(S){return"MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(S,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(S,this.limits.maxStart,this.limits.maxEnd)[0]}focusSliderElement(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)}buttonClick(S){let I;this.focusSliderElement();const j=this.enableRtl&&"Vertical"!==this.orientation,oe=this.handleValueUpdate();40===S.keyCode||37===S.keyCode||S.currentTarget.classList.contains("e-first-button")?I=this.add(oe,parseFloat(this.step.toString()),!!j):38===S.keyCode||39===S.keyCode||S.currentTarget.classList.contains("e-second-button")?I=this.add(oe,parseFloat(this.step.toString()),!j):33===S.keyCode||S.currentTarget.classList.contains("e-first-button")?I=this.add(oe,parseFloat(this.ticks.largeStep.toString()),!j):34===S.keyCode||S.currentTarget.classList.contains("e-second-button")?I=this.add(oe,parseFloat(this.ticks.largeStep.toString()),!!j):36===S.keyCode?I=parseFloat(this.min.toString()):35===S.keyCode&&(I=parseFloat(this.max.toString())),this.limits.enabled&&(I=this.getLimitCorrectedValues(I)),this.changeHandleValue(I),this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),S.currentTarget.classList.contains("e-first-button")&&i.bi.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),S.currentTarget.classList.contains("e-second-button")&&i.bi.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)}tooltipToggle(S){this.isMaterialTooltip?this.tooltipElement.classList.contains("e-material-tooltip-open")?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(S):this.openTooltip(S)}buttonUp(S){S.currentTarget.classList.contains("e-first-button")&&i.bi.remove(this.firstBtn,"mouseup touchend",this.buttonUp),S.currentTarget.classList.contains("e-second-button")&&i.bi.remove(this.secondBtn,"mouseup touchend",this.buttonUp)}setRangeBar(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",(0,i.V7)(this.rangeBar,{width:(0,i.le)(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",(0,i.V7)(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",(0,i.V7)(this.rangeBar,{height:(0,i.le)(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",(0,i.V7)(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))}checkValidValueAndPos(S){return S=this.checkHandleValue(S),this.checkHandlePosition(S)}setLimitBarPositions(S,I,j,oe){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=S+"px",this.limitBarFirst.style.width=I-S+"px"):(this.limitBarFirst.style.left=S+"px",this.limitBarFirst.style.width=I-S+"px"):(this.limitBarFirst.style.bottom=S+"px",this.limitBarFirst.style.height=I-S+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=j+"px",this.limitBarSecond.style.width=oe-j+"px"):(this.limitBarSecond.style.left=j+"px",this.limitBarSecond.style.width=oe-j+"px"):(this.limitBarSecond.style.bottom=j+"px",this.limitBarSecond.style.height=oe-j+"px"))}setLimitBar(){if("Default"===this.type||"MinRange"===this.type){let S=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];S=this.checkValidValueAndPos(S);let I=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];I=this.checkValidValueAndPos(I),this.setLimitBarPositions(S,I)}else if("Range"===this.type){let S=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];S=this.checkValidValueAndPos(S);let I=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];I=this.checkValidValueAndPos(I);let j=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];j=this.checkValidValueAndPos(j);let oe=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];oe=this.checkValidValueAndPos(oe),this.setLimitBarPositions(S,I,j,oe)}}getLimitValueAndPosition(S,I,j,oe){return(0,i.le)(I)&&(I=this.min,(0,i.le)(S)&&oe&&(S=I)),(0,i.le)(j)&&(j=this.max,(0,i.le)(S)&&oe&&(S=j)),S<I&&(S=I),S>j&&(S=j),[S,this.checkHandlePosition(S)]}setValue(){if(!(0,i.le)(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=(0,i.le)(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,this.activeHandle=(0,i.le)(this.activeHandle)?"Range"===this.type?2:1:this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){const S=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=S[0],this.handlePos1=S[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()}rangeValueUpdate(){(null===this.value||"object"!=typeof this.value)&&(this.value=[parseFloat((0,i.Ac)(this.min)),parseFloat((0,i.Ac)(this.max))])}validateRangeValue(){this.rangeValueUpdate(),this.setRangeValue()}modifyZindex(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=(0,u.TE)(this.element)+"")}setHandlePosition(S){let I;const j=1===this.activeHandle?this.handlePos1:this.handlePos2;I=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),I.forEach(oe=>{"Horizontal"===this.orientation?this.enableRtl?oe.style.right=`${j}px`:oe.style.left=`${j}px`:oe.style.bottom=`${j}px`}),this.changeEvent("change",S)}getHandle(){return 1===this.activeHandle?this.firstHandle:this.secondHandle}setRangeValue(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1}changeEvent(S,I){let j="change"===S?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),j!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(S,this.changeEventArgs(S,I)),this.initialTooltip=!0,this.setPreviousVal(S,this.value)),this.setAriaAttrValue(this.firstHandle);else{let oe=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:oe},!0),(j.length===this.value.length&&this.value[0]!==j[0]||this.value[1]!==j[1])&&(this.initialTooltip=!1,this.trigger(S,this.changeEventArgs(S,I)),this.initialTooltip=!0,this.setPreviousVal(S,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()}changeEventArgs(S,I){let j;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),j={value:this.value,previousValue:"change"===S?this.previousVal:this.previousChanged,action:S,text:this.tooltipObj.content,isInteracted:!(0,i.le)(I)}):j={value:this.value,previousValue:"change"===S?this.previousVal:this.previousChanged,action:S,text:(0,i.le)(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!(0,i.le)(I)},j}setPreviousVal(S,I){"change"===S?this.previousVal=I:this.previousChanged=I}updateRangeValue(){const S=this.value.toString().split(",").map(Number);if(this.value=this.enableRtl&&"Vertical"!==this.orientation||this.rtl?[S[1],S[0]]:[S[0],S[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;let I=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=I[0],this.handlePos1=I[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,I=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=I[0],this.handlePos2=I[1],this.preHandlePos2=this.handlePos2}}checkHandlePosition(S){let I;return S=100*(S-parseFloat((0,i.Ac)(this.min)))/(parseFloat((0,i.Ac)(this.max))-parseFloat((0,i.Ac)(this.min))),I="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(S/100):this.element.getBoundingClientRect().height*(S/100),parseFloat((0,i.Ac)(this.max))===parseFloat((0,i.Ac)(this.min))&&(I="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),I}checkHandleValue(S){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat((0,i.Ac)(this.max));let I=this.tempStartEnd();return S<I.start?S=I.start:S>I.end&&(S=I.end),S}reposition(){this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=`${this.handlePos1}px`:this.firstHandle.style.left=`${this.handlePos1}px`,this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=`${this.handlePos1}px`:this.materialHandle.style.left=`${this.handlePos1}px`),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",(0,i.V7)(this.rangeBar,{width:(0,i.le)(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=`${this.handlePos2}px`:this.secondHandle.style.left=`${this.handlePos2}px`,this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",(0,i.V7)(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=`${this.handlePos1}px`,this.isMaterialTooltip&&(this.materialHandle.style.bottom=`${this.handlePos1}px`),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",(0,i.V7)(this.rangeBar,{height:(0,i.le)(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=`${this.handlePos2}px`,this.rangeBar.style.bottom=this.handlePos1+"px",(0,i.V7)(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(()=>{this.firstHandle.style.transition=this.scaleTransform,"Range"===this.type&&(this.secondHandle.style.transition=this.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()}changeHandleValue(S){let I=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(S),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(I=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(S),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(I=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==I&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))}tempStartEnd(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}}xyToPosition(S){let I;if(this.min===this.max)return 100;if("Horizontal"===this.orientation){let oe=S.x-this.element.getBoundingClientRect().left;this.val=oe/(this.element.offsetWidth/100)}else{let oe=S.y-this.element.getBoundingClientRect().top;this.val=100-oe/(this.element.offsetHeight/100)}let j=this.stepValueCalculation(this.val);return j<0?j=0:j>100&&(j=100),this.enableRtl&&"Vertical"!==this.orientation&&(j=100-j),I="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(j/100):this.element.getBoundingClientRect().height*(j/100),I}stepValueCalculation(S){0===this.step&&(this.step=1);let I=parseFloat((0,i.Ac)(this.step))/((parseFloat((0,i.Ac)(this.max))-parseFloat((0,i.Ac)(this.min)))/100),j=S%Math.abs(I);return 0!==j&&(I/2>j?S-=j:S+=Math.abs(I)-j),S}add(S,I,j){let dt,Ee=Math.pow(10,3);return dt=j?(Math.round(S*Ee)+Math.round(I*Ee))/Ee:(Math.round(S*Ee)-Math.round(I*Ee))/Ee,dt}positionToValue(S){let I,j=parseFloat((0,i.Ac)(this.max))-parseFloat((0,i.Ac)(this.min));return I="Horizontal"===this.orientation?S/this.element.getBoundingClientRect().width*j:S/this.element.getBoundingClientRect().height*j,this.add(I,parseFloat(this.min.toString()),!0)}sliderBarClick(S){let I;S.preventDefault(),"mousedown"===S.type||"mouseup"===S.type||"click"===S.type?I={x:S.clientX,y:S.clientY}:("touchend"===S.type||"touchstart"===S.type)&&(I={x:S.changedTouches[0].clientX,y:S.changedTouches[0].clientY});let j=this.xyToPosition(I),oe=this.positionToValue(j);if("Range"===this.type&&this.handlePos2-j<j-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled){let Ii=this.getLimitValueAndPosition(oe,this.limits.maxStart,this.limits.maxEnd);oe=Ii[0],j=Ii[1]}this.secondHandle.classList.add("e-handle-active"),this.handlePos2=this.preHandlePos2=j,this.handleVal2=oe}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){let Ii=this.getLimitValueAndPosition(oe,this.limits.minStart,this.limits.minEnd);oe=Ii[0],j=Ii[1]}this.firstHandle.classList.add("e-handle-active"),this.handlePos1=this.preHandlePos1=j,this.handleVal1=oe}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add("e-tooltip-active");let Ee=this.element.querySelector(".e-tab-handle");if(Ee&&this.getHandle()!==Ee&&Ee.classList.remove("e-tab-handle"),S.target===(1===this.activeHandle?this.firstHandle:this.secondHandle))return this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.sliderBarUp(S),void this.tooltipToggle(this.getHandle());if(!this.checkRepeatedValue(oe))return;let Bt=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=Bt.handle,"Default"!==this.type&&(this.rangeBar.style.transition=Bt.rangeBar),this.setHandlePosition(S),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",S),"Default"!==this.type&&this.setRangeBar()}handleValueAdjust(S,I,j){1===j?(this.handleVal1=I,this.handleVal2=this.handleVal1+this.minDiff):2===j&&(this.handleVal2=I,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)}dragRangeBarMove(S){let I,j,oe;if("touchmove"!==S.type&&S.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none",[j,oe]="mousemove"===S.type?[S.clientX,S.clientY]:[S.changedTouches[0].clientX,S.changedTouches[0].clientY],!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(I=this.enableRtl?{x:j+this.secondPartRemain,y:oe+this.secondPartRemain}:{x:j-this.firstPartRemain,y:oe+this.secondPartRemain},this.handlePos1=this.xyToPosition(I),this.handleVal1=this.positionToValue(this.handlePos1),I=this.enableRtl?{x:j-this.firstPartRemain,y:oe-this.firstPartRemain}:{x:j+this.secondPartRemain,y:oe-this.firstPartRemain},this.handlePos2=this.xyToPosition(I),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){let Ee=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=Ee[0],this.handlePos1=Ee[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),Ee=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=Ee[0],this.handlePos2=Ee[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(S),this.activeHandle=2,this.setHandlePosition(S),this.tooltipToggle(this.rangeBar),this.setRangeBar()}sliderBarUp(S){this.changeEvent("changed",S),this.handleFocusOut(),this.firstHandle.classList.remove("e-handle-active"),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove("e-handle-active")),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove("e-tooltip-active")),i.bi.remove(document,"mousemove touchmove",this.sliderBarMove),i.bi.remove(document,"mouseup touchend",this.sliderBarUp)}sliderBarMove(S){let I;"touchmove"!==S.type&&S.preventDefault(),I="mousemove"===S.type?{x:S.clientX,y:S.clientY}:{x:S.changedTouches[0].clientX,y:S.changedTouches[0].clientY};let j=this.xyToPosition(I),oe=this.positionToValue(j);if(j=Math.round(j),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){let Ee=this.getLimitValueAndPosition(oe,this.limits.minStart,this.limits.minEnd);j=Ee[1],oe=Ee[0]}this.handlePos1=j,this.handleVal1=oe}this.firstHandle.classList.add("e-handle-active")}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.startHandleFixed||(j>this.handlePos2&&(j=this.handlePos2,oe=this.handleVal2),j===this.preHandlePos1))){if(this.limits.enabled){let Ee=this.getLimitValueAndPosition(oe,this.limits.minStart,this.limits.minEnd);oe=Ee[0],j=Ee[1]}this.handlePos1=this.preHandlePos1=j,this.handleVal1=oe,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.endHandleFixed||(j<this.handlePos1&&(j=this.handlePos1,oe=this.handleVal1),j===this.preHandlePos2)))){if(this.limits.enabled){let Ee=this.getLimitValueAndPosition(oe,this.limits.maxStart,this.limits.maxEnd);oe=Ee[0],j=Ee[1]}this.handlePos2=this.preHandlePos2=j,this.handleVal2=oe,this.activeHandle=2}!this.checkRepeatedValue(oe)||(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(S),this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())}dragRangeBarUp(S){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(S)),this.changeEvent("changed",S),this.closeTooltip(),i.bi.remove(document,"mousemove touchmove",this.dragRangeBarMove),i.bi.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1}checkRepeatedValue(S){if("Range"===this.type){if(S===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(S===this.previousVal)return 0;return 1}refreshTooltip(S){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),S&&(this.tooltipObj.refresh(S),this.tooltipTarget=S))}openTooltip(S){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(S),this.tooltipTarget=S)}closeTooltip(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)}keyDown(S){switch(S.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:S.preventDefault(),this.buttonClick(S)}}wireButtonEvt(S){S?(i.bi.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),i.bi.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),i.bi.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),i.bi.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),i.bi.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),i.bi.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),i.bi.remove(this.firstBtn,"focusout",this.sliderFocusOut),i.bi.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(i.bi.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),i.bi.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),i.bi.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),i.bi.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),i.bi.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),i.bi.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),i.bi.add(this.firstBtn,"focusout",this.sliderFocusOut,this),i.bi.add(this.secondBtn,"focusout",this.sliderFocusOut,this))}rangeBarMousedown(S){if(S.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&S.target===this.rangeBar){let I,j;"mousedown"===S.type?[I,j]=[S.clientX,S.clientY]:"touchstart"===S.type&&([I,j]=[S.changedTouches[0].clientX,S.changedTouches[0].clientY]),"Horizontal"===this.orientation?(this.firstPartRemain=I-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-I):(this.firstPartRemain=j-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-j),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);let oe=this.element.querySelector(".e-tab-handle");oe&&oe.classList.remove("e-tab-handle"),i.bi.add(document,"mousemove touchmove",this.dragRangeBarMove,this),i.bi.add(document,"mouseup touchend",this.dragRangeBarUp,this)}}elementClick(S){this.isDragComplete?this.isDragComplete=!1:(S.preventDefault(),this.focusSliderElement(),this.sliderBarClick(S),this.focusHandle())}wireEvents(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(i.bi.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&i.bi.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),i.bi.add(this.sliderContainer,"keydown",this.keyDown,this),i.bi.add(this.sliderContainer,"keyup",this.keyUp,this),i.bi.add(this.element,"focusout",this.sliderFocusOut,this),i.bi.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&i.bi.add(this.formElement,"reset",this.formResetHandler,this))}unwireEvents(){i.bi.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&i.bi.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),i.bi.remove(this.sliderContainer,"keydown",this.keyDown),i.bi.remove(this.sliderContainer,"keyup",this.keyUp),i.bi.remove(this.element,"focusout",this.sliderFocusOut),i.bi.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),i.bi.remove(this.element,"reset",this.formResetHandler)}formResetHandler(){this.setProperties({value:this.formResetValue},!0),this.setValue()}keyUp(S){if(9===S.keyCode&&S.target.classList.contains("e-handle")&&(this.focusSliderElement(),!S.target.classList.contains("e-tab-handle"))){this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),S.target.classList.add("e-tab-handle");let I=S.target.parentElement;I===this.element&&(I.querySelector(".e-slider-track").classList.add("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&I.querySelector(".e-range").classList.add("e-tab-range")),"Range"===this.type&&(this.activeHandle=S.target.previousSibling.classList.contains("e-handle")?2:1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",S)}hover(S){if(!(0,i.le)(S))if("mouseover"===S.type||"touchmove"===S.type||"mousemove"===S.type||"pointermove"===S.type||"touchstart"===S.type)this.sliderContainer.classList.add("e-slider-hover");else{this.sliderContainer.classList.remove("e-slider-hover");const I=S.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!I.classList.contains("e-handle-focused")&&!I.classList.contains("e-tab-handle")&&this.closeMaterialTooltip()}}sliderFocusOut(S){S.relatedTarget!==this.secondHandle&&S.relatedTarget!==this.firstHandle&&S.relatedTarget!==this.element&&S.relatedTarget!==this.firstBtn&&S.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),this.element.querySelector(".e-tab-track")&&(this.element.querySelector(".e-tab-track").classList.remove("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&this.element.querySelector(".e-tab-range")&&this.element.querySelector(".e-tab-range").classList.remove("e-tab-range")),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)}removeElement(S){S.parentNode&&S.parentNode.removeChild(S)}changeSliderType(S,I){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove("e-material-slider"),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==S&&("Range"===S&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!(0,i.le)(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===S||"Default"===S?(0,i.le)(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):(0,i.le)(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==I&&this.updateConfig()}changeRtl(){if(!this.enableRtl&&"Range"===this.type&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){let S=this.enableRtl&&"Vertical"!==this.orientation;(0,i.Y4)(S?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),(0,i.Y4)(S?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}}changeOrientation(){this.changeSliderType(this.type,"null")}updateConfig(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()}limitsPropertyChange(){this.limits.enabled?((0,i.le)(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),(0,i.le)(this.limitBarFirst)&&(0,i.le)(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):((0,i.le)(this.limitBarFirst)||(0,i.og)(this.limitBarFirst),(0,i.le)(this.limitBarSecond)||(0,i.og)(this.limitBarSecond))}getPersistData(){return this.addOnPersist(["value"])}destroy(){super.destroy(),this.unwireEvents(),window.removeEventListener("resize",this.onresize),(0,i.IV)([this.sliderContainer],["e-disabled"]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),(0,i.og)(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""}onPropertyChanged(S,I){for(let j of Object.keys(S))switch(j){case"cssClass":this.setCSSClass(I.cssClass);break;case"value":if(S&&I){let oe=(0,i.le)(S.value)?"Range"===this.type?[this.min,this.max]:this.min:S.value;this.setProperties({value:oe},!0),!(0,i.le)(I.value)&&I.value.toString()!==oe.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(this.activeHandle=(0,i.le)(S.value)||I.value[1]===oe[1]?1:2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!(0,i.le)(S.tooltip)&&!(0,i.le)(I.tooltip)&&this.setTooltip(j);break;case"type":!(0,i.le)(I)&&Object.keys(I).length&&!(0,i.le)(I.type)&&(this.changeSliderType(I.type,j),this.setZindex());break;case"enableRtl":I.enableRtl!==S.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=I.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":(0,i.le)(this.sliderContainer.querySelector(".e-scale"))||((0,i.og)(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,oe=>{oe.match(/e-scale-/)&&this.sliderContainer.classList.remove(oe)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":S.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove("e-slider-btn"),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(S.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}setReadOnly(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add("e-read-only")):(this.wireEvents(),this.sliderContainer.classList.remove("e-read-only"))}setMinMaxValue(){this.setValue(),this.refreshTooltip(this.tooltipTarget),(0,i.le)(this.sliderContainer.querySelector(".e-scale"))||this.ul&&((0,i.og)(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,S=>{S.match(/e-scale-/)&&this.sliderContainer.classList.remove(S)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())}setZindex(){this.zIndex=6,!(0,i.le)(this.ticks)&&"None"!==this.ticks.placement&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!(0,i.le)(this.ticks)&&"Both"===this.ticks.placement&&(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")}setTooltip(S){this.changeSliderType(this.type,S)}setBarColor(){let S,I,j=this.sliderTrack.lastElementChild;for(;j;)this.sliderTrack.removeChild(j),j=this.sliderTrack.lastElementChild;for(let oe=0;oe<this.colorRange.length;oe++)if(!(0,i.le)(this.colorRange[oe].start)&&!(0,i.le)(this.colorRange[oe].end)&&this.colorRange[oe].end>this.colorRange[oe].start){this.colorRange[oe].start<this.min&&(this.colorRange[oe].start=this.min),this.colorRange[oe].end>this.max&&(this.colorRange[oe].end=this.max);const Ee=this.checkHandlePosition(this.colorRange[oe].start),dt=this.checkHandlePosition(this.colorRange[oe].end),Bt=this.createElement("div");Bt.style.backgroundColor=this.colorRange[oe].color,Bt.style.border="1px solid "+this.colorRange[oe].color,"Horizontal"===this.orientation?(I="e-slider-horizantal-color",S=this.enableRtl?(0,i.le)(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[oe].end):this.checkHandlePosition(this.customValues.length-this.colorRange[oe].end-1):this.checkHandlePosition(this.colorRange[oe].start),Bt.style.width=dt-Ee+"px",Bt.style.left=S+"px"):(I="e-slider-vertical-color",S=this.checkHandlePosition(this.colorRange[oe].start),Bt.style.height=dt-Ee+"px",Bt.style.bottom=S+"px"),Bt.classList.add(I),this.sliderTrack.appendChild(Bt)}}getModuleName(){return"slider"}};Ds([(0,i.Z9)(null)],Xi.prototype,"value",void 0),Ds([(0,i.Z9)(null)],Xi.prototype,"customValues",void 0),Ds([(0,i.Z9)(1)],Xi.prototype,"step",void 0),Ds([(0,i.Z9)(null)],Xi.prototype,"width",void 0),Ds([(0,i.Z9)(0)],Xi.prototype,"min",void 0),Ds([(0,i.Z9)(100)],Xi.prototype,"max",void 0),Ds([(0,i.Z9)(!1)],Xi.prototype,"readonly",void 0),Ds([(0,i.Z9)("Default")],Xi.prototype,"type",void 0),Ds([(0,i.FE)([{}],Bn)],Xi.prototype,"colorRange",void 0),Ds([(0,i.Zz)({},on)],Xi.prototype,"ticks",void 0),Ds([(0,i.Zz)({},Kn)],Xi.prototype,"limits",void 0),Ds([(0,i.Z9)(!0)],Xi.prototype,"enabled",void 0),Ds([(0,i.Zz)({},Dn)],Xi.prototype,"tooltip",void 0),Ds([(0,i.Z9)(!1)],Xi.prototype,"showButtons",void 0),Ds([(0,i.Z9)(!0)],Xi.prototype,"enableAnimation",void 0),Ds([(0,i.Z9)("Horizontal")],Xi.prototype,"orientation",void 0),Ds([(0,i.Z9)("")],Xi.prototype,"cssClass",void 0),Ds([(0,i.Z9)(!1)],Xi.prototype,"enableHtmlSanitizer",void 0),Ds([(0,i.ju)()],Xi.prototype,"created",void 0),Ds([(0,i.ju)()],Xi.prototype,"change",void 0),Ds([(0,i.ju)()],Xi.prototype,"changed",void 0),Ds([(0,i.ju)()],Xi.prototype,"renderingTicks",void 0),Ds([(0,i.ju)()],Xi.prototype,"renderedTicks",void 0),Ds([(0,i.ju)()],Xi.prototype,"tooltipChange",void 0),Xi=Ds([i.Zl],Xi);var cr,Ls=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};const Rs={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var gi=(()=>{return(ht=gi||(gi={}))[ht.Message=0]="Message",ht[ht.Label=1]="Label",gi;var ht})();let je=cr=class extends i.XY{constructor(S,I){super(I,S),this.validated=[],this.errorRules=[],this.allowSubmit=!1,this.required="required",this.infoElement=null,this.inputElement=null,this.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",this.localyMessage={},this.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof this.rules>"u"&&(this.rules={}),this.l10n=new i.E7("formValidator",this.defaultMessages,this.locale),this.locale&&this.localeFunc(),i.VD.on("notifyExternalChange",this.afterLocalization,this),S="string"==typeof S?(0,i.Ys)(S,document):S,null!=this.element&&(this.element.setAttribute("novalidate",""),this.inputElements=(0,i.td)(this.selectQuery,this.element),this.createHTML5Rules(),this.wireEvents())}addRules(S,I){S&&(this.rules.hasOwnProperty(S)?(0,i.l7)(this.rules[S],I,{}):this.rules[S]=I)}removeRules(S,I){if(S||I)if(this.rules[S]&&!I)delete this.rules[S];else{if((0,i.le)(this.rules[S]&&I))return;for(let j=0;j<I.length;j++)delete this.rules[S][I[j]]}else this.rules={}}validate(S){const I=Object.keys(this.rules);if(S&&I.length)return this.validateRules(S),-1!==I.indexOf(S)&&0===this.errorRules.filter(j=>j.name===S).length;this.errorRules=[];for(const j of I)this.validateRules(j);return 0===this.errorRules.length}reset(){this.element.reset(),this.clearForm()}getInputElement(S){return this.inputElement=(0,i.Ys)('[name="'+S+'"]',this.element),this.inputElement}destroy(){this.reset(),this.unwireEvents(),this.rules={};const S=(0,i.td)("."+this.errorClass+", ."+this.validClass,this.element);for(const I of S)(0,i.og)(I);super.destroy(),i.VD.off("notifyExternalChange",this.afterLocalization)}onPropertyChanged(S,I){for(const j of Object.keys(S))"locale"===j&&this.localeFunc()}localeFunc(){for(const S of Object.keys(this.defaultMessages)){this.l10n.setLocale(this.locale);const I=this.l10n.getConstant(S);this.localyMessage[S]=I}}getModuleName(){return"formValidator"}afterLocalization(S){this.locale=S.locale,this.localeFunc()}refresh(){this.unwireEvents(),this.inputElements=(0,i.td)(this.selectQuery,this.element),this.wireEvents()}clearForm(){this.errorRules=[],this.validated=[];const S=(0,i.td)(this.selectQuery,this.element);for(const I of S){const j=I;j.removeAttribute("aria-invalid"),j.classList.remove(this.errorClass),j.name.length>0&&(this.getInputElement(j.name),this.getErrorElement(j.name),this.hideMessage(j.name)),j.classList.remove(this.validClass)}}createHTML5Rules(){const S=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],I=["hidden","email","url","date","number","tel"];for(const j of this.inputElements){const oe={};for(let Ee of S)if(null!==j.getAttribute(Ee))switch(Ee){case"required":this.defRule(j,oe,Ee,j.required);break;case"data-validation":Ee=j.getAttribute(Ee),this.defRule(j,oe,Ee,!0);break;case"type":-1!==I.indexOf(j.type)&&this.defRule(j,oe,j.type,!0);break;case"rangeLength":case"range":this.defRule(j,oe,Ee,JSON.parse(j.getAttribute(Ee)));break;case"equalTo":{const dt=j.getAttribute(Ee);this.defRule(j,oe,Ee,dt)}break;default:"true"===j.getAttribute("data-val")?this.annotationRule(j,oe,Ee,j.getAttribute(Ee)):this.defRule(j,oe,Ee,j.getAttribute(Ee))}0!==Object.keys(oe).length&&this.addRules(j.name,oe)}}annotationRule(S,I,j,oe){const Ee=j.split("-"),dt=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],Bt=Ee[Ee.length-1],Ii=Ee[Ee.length-2];if(-1!==dt.indexOf(Bt))switch(Bt){case"required":this.defRule(S,I,"required",oe);break;case"creditcard":this.defRule(S,I,"creditcard",oe);break;case"phone":this.defRule(S,I,"tel",oe)}else if(-1!==dt.indexOf(Ii))switch(Ii){case"maxlength":this.defRule(S,I,"maxLength",oe);break;case"minlength":this.defRule(S,I,"minLength",oe);break;case"range":{const Yi=S.getAttribute("data-val-range-min"),Ss=S.getAttribute("data-val-range-max");this.defRule(S,I,"range",[Yi,Ss])}break;case"equalto":{const Yi=S.getAttribute(j).split(".");this.defRule(S,I,"equalTo",Yi[Yi.length-1])}break;case"regex":this.defRule(S,I,"regex",oe)}}defRule(S,I,j,oe){const Ee=S.getAttribute("data-"+j+"-message"),dt=S.getAttribute("data-val-"+j);let Bt;this.rules[S.name]&&"validateHidden"!==j&&"hidden"!==j&&(this.getInputElement(S.name),Bt=this.getErrorMessage(this.rules[S.name][j],j)),Ee?oe=[oe,Ee]:dt?oe=[oe,dt]:Bt&&(oe=[oe,Bt]),I[j]=oe}wireEvents(){for(const S of this.inputElements)cr.isCheckable(S)?i.bi.add(S,"click",this.clickHandler,this):"SELECT"===S.tagName?i.bi.add(S,"change",this.changeHandler,this):(i.bi.add(S,"focusout",this.focusOutHandler,this),i.bi.add(S,"keyup",this.keyUpHandler,this));i.bi.add(this.element,"submit",this.submitHandler,this),i.bi.add(this.element,"reset",this.resetHandler,this)}unwireEvents(){for(const S of this.inputElements)i.bi.clearEvents(S);i.bi.remove(this.element,"submit",this.submitHandler),i.bi.remove(this.element,"reset",this.resetHandler)}focusOutHandler(S){this.trigger("focusout",S);const I=S.target;this.rules[I.name]&&(this.rules[I.name][this.required]||I.value.length>0?this.validate(I.name):-1===this.validated.indexOf(I.name)&&this.validated.push(I.name))}keyUpHandler(S){this.trigger("keyup",S);const I=S.target;9===S.which&&(!this.rules[I.name]||this.rules[I.name]&&!this.rules[I.name][this.required])||-1!==this.validated.indexOf(I.name)&&this.rules[I.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(S.which)&&this.validate(I.name)}clickHandler(S){this.trigger("click",S);const I=S.target;"submit"!==I.type?this.validate(I.name):null!==I.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}changeHandler(S){this.trigger("change",S),this.validate(S.target.name)}submitHandler(S){this.trigger("submit",S),this.allowSubmit||this.validate()?this.allowSubmit=!1:S.preventDefault()}resetHandler(){this.clearForm()}validateRules(S){if(!this.rules[S])return;const I=Object.keys(this.rules[S]);let j=!1,oe=!1;const Ee=I.indexOf("validateHidden"),dt=I.indexOf("hidden");if(this.getInputElement(S),-1!==dt&&(j=!0),-1!==Ee&&(oe=!0),!j||j&&oe){-1!==Ee&&I.splice(Ee,1),-1!==dt&&I.splice(dt-1,1),this.getErrorElement(S);for(const Bt of I){const Ii=this.getErrorMessage(this.rules[S][Bt],Bt),Yi={name:S,message:Ii},Ss={inputName:S,element:this.inputElement,message:Ii};if(!this.isValid(S,Bt)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(S),this.errorRules.push(Yi),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(Yi):this.createErrorElement(S,Yi.message,this.inputElement),Ss.errorElement=this.infoElement,Ss.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(S,Ss),this.trigger("validationComplete",Ss),"required"===Bt&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(S),Ss.status="success",this.trigger("validationComplete",Ss)}}}optionalValidationStatus(S,I){!this.rules[S][this.required]&&!this.inputElement.value.length&&!(0,i.le)(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),I.status="",this.hideMessage(S))}isValid(S,I){const j=this.rules[S][I],Ee=this.rules[S][I],dt={value:this.inputElement.value,param:j instanceof Array&&"string"==typeof j[1]?j[0]:j,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",dt),!dt.param&&"required"===I||(Ee&&"function"==typeof Ee[0]?Ee[0].call(this,{element:this.inputElement,value:this.inputElement.value}):cr.isCheckable(this.inputElement)?"required"!==I||(0,i.td)('input[name="'+S+'"]:checked',this.element).length>0:cr.checkValidator[I](dt))}getErrorMessage(S,I){let j=this.inputElement.getAttribute("data-"+I+"-message")?this.inputElement.getAttribute("data-"+I+"-message"):S instanceof Array&&"string"==typeof S[1]?S[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[I]:this.defaultMessages[I];const oe=j.match(/{(\d)}/g);if(!(0,i.le)(oe))for(let Ee=0;Ee<oe.length;Ee++)j=j.replace(oe[Ee],S instanceof Array?S[Ee]:S);return j}createErrorElement(S,I,j){let oe=(0,i.az)(this.errorElement,{className:this.errorClass,innerHTML:I,attrs:{for:S}});if(this.errorOption===gi.Message&&(oe.classList.remove(this.errorClass),oe.classList.add("e-message"),oe=(0,i.az)(this.errorContainer,{className:this.errorClass,innerHTML:oe.outerHTML})),oe.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+j.id+'"]'))this.element.querySelector('[data-valmsg-for="'+j.id+'"]').appendChild(oe);else if(!0===j.hasAttribute("data-msg-containerid")){const Ee=j.getAttribute("data-msg-containerid");(0,i.Ys)("#"+Ee,this.element).appendChild(oe)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,oe):this.inputElement.parentNode.insertBefore(oe,this.inputElement.nextSibling);oe.style.display="block",this.getErrorElement(S),this.validated.push(S),this.checkRequired(S)}getErrorElement(S){return this.infoElement=(0,i.Ys)(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=(0,i.Ys)(this.errorElement+"."+this.errorClass+'[for="'+S+'"]',this.element)),this.infoElement}removeErrorRules(S){for(let I=0;I<this.errorRules.length;I++)this.errorRules[I].name===S&&this.errorRules.splice(I,1)}showMessage(S){this.infoElement.style.display="block",this.infoElement.innerHTML=S.message,this.checkRequired(S.name)}hideMessage(S){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(S),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}checkRequired(S){!this.rules[S][this.required]&&!this.inputElement.value.length&&!(0,i.le)(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(S))}static isCheckable(S){const I=S.getAttribute("type");return I&&("checkbox"===I||"radio"===I||"submit"===I)}};je.checkValidator={required:ht=>isNaN(Date.parse(ht.value))?ht.value.toString().length>0:!isNaN(new Date(ht.value).getTime()),email:ht=>Rs.EMAIL.test(ht.value),url:ht=>Rs.URL.test(ht.value),dateIso:ht=>Rs.DATE_ISO.test(ht.value),tel:ht=>Rs.PHONE.test(ht.value),creditcard:ht=>Rs.CREDITCARD.test(ht.value),number:ht=>!isNaN(Number(ht.value))&&-1===ht.value.indexOf(" "),digits:ht=>Rs.DIGITS.test(ht.value),maxLength:ht=>ht.value.length<=ht.param,minLength:ht=>ht.value.length>=ht.param,rangeLength:ht=>{const S=ht.param;return ht.value.length>=S[0]&&ht.value.length<=S[1]},range:ht=>{const S=ht.param;return!isNaN(Number(ht.value))&&Number(ht.value)>=S[0]&&Number(ht.value)<=S[1]},date:ht=>!isNaN(new Date(ht.value).getTime()),max:ht=>isNaN(Number(ht.value))?new Date(ht.value).getTime()<=new Date(JSON.parse(JSON.stringify(ht.param))).getTime():+ht.value<=ht.param,min:ht=>{if(isNaN(Number(ht.value))){if(-1!==ht.value.indexOf(",")){const S=ht.value.replace(/,/g,"");return parseFloat(S)>=ht.param}return new Date(ht.value).getTime()>=new Date(JSON.parse(JSON.stringify(ht.param))).getTime()}return+ht.value>=ht.param},regex:ht=>new RegExp(ht.param).test(ht.value),equalTo:ht=>{const S=ht.formElement.querySelector("#"+ht.param);return ht.param=S.value,ht.param===ht.value}},Ls([(0,i.Z9)("")],je.prototype,"locale",void 0),Ls([(0,i.Z9)("e-hidden")],je.prototype,"ignore",void 0),Ls([(0,i.Z9)()],je.prototype,"rules",void 0),Ls([(0,i.Z9)("e-error")],je.prototype,"errorClass",void 0),Ls([(0,i.Z9)("e-valid")],je.prototype,"validClass",void 0),Ls([(0,i.Z9)("label")],je.prototype,"errorElement",void 0),Ls([(0,i.Z9)("div")],je.prototype,"errorContainer",void 0),Ls([(0,i.Z9)(gi.Label)],je.prototype,"errorOption",void 0),Ls([(0,i.ju)()],je.prototype,"focusout",void 0),Ls([(0,i.ju)()],je.prototype,"keyup",void 0),Ls([(0,i.ju)()],je.prototype,"click",void 0),Ls([(0,i.ju)()],je.prototype,"change",void 0),Ls([(0,i.ju)()],je.prototype,"submit",void 0),Ls([(0,i.ju)()],je.prototype,"validationBegin",void 0),Ls([(0,i.ju)()],je.prototype,"validationComplete",void 0),Ls([(0,i.ju)()],je.prototype,"customPlacement",void 0),je=cr=Ls([i.Zl],je);var Re=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};const ti="e-file-select",ci="e-file-drop",Fi="e-upload-files",as="e-upload-file-list",Es="e-file-status",ms="e-file-name",dn="e-file-type",Cs="e-file-size",Yn="e-file-remove-btn",Ln="e-file-delete-btn",Rr="e-spinner-pane",rs="e-file-abort-btn",hn="e-file-reload-btn",cn="e-upload-drag-hover",ln="e-upload-progress-wrap",qn="e-upload-progress-bar",$n="e-progress-bar-text",gr="e-upload-progress",tn="e-upload-success",mr="e-upload-fails",Cn="e-file-container",wr="e-validation-fails",Br="e-disabled",Jr="e-rtl-container",Nr="e-clear-icon-focus",Zn="e-file-pause-btn",_r="e-file-play-btn",Ur="e-restrict-retry",Hr=["title","style","class"],Bi="e-form-upload",co="e-file-invalid";class Io extends i.rt{}Re([(0,i.Z9)("")],Io.prototype,"name",void 0),Re([(0,i.Z9)(null)],Io.prototype,"size",void 0),Re([(0,i.Z9)("")],Io.prototype,"type",void 0);class Xn extends i.rt{}Re([(0,i.Z9)("Browse...")],Xn.prototype,"browse",void 0),Re([(0,i.Z9)("Upload")],Xn.prototype,"upload",void 0),Re([(0,i.Z9)("Clear")],Xn.prototype,"clear",void 0);class sr extends i.rt{}Re([(0,i.Z9)("")],sr.prototype,"saveUrl",void 0),Re([(0,i.Z9)("")],sr.prototype,"removeUrl",void 0),Re([(0,i.Z9)(0)],sr.prototype,"chunkSize",void 0),Re([(0,i.Z9)(3)],sr.prototype,"retryCount",void 0),Re([(0,i.Z9)(500)],sr.prototype,"retryAfterDelay",void 0);let zn=class extends i.wA{constructor(S,I){super(S,I),this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.tabIndex="0",this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.dragCounter=0,this.fileList=[],this.filesData=[],this.uploaderOptions=S}onPropertyChanged(S,I){for(const j of Object.keys(S))switch(j){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=(0,i.le)(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=(0,i.le)(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=(0,i.le)(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=(0,i.NA)("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(I.cssClass)}}setLocalizedTexts(){(0,i.le)(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!(0,i.le)(this.uploadWrapper.querySelector("."+ci))&&(this.uploadWrapper.querySelector("."+ci).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())}getKeyValue(S){let I;for(const j of Object.keys(this.preLocaleObj))this.preLocaleObj[j]===S&&(I=j);return I}updateFileList(){let S;if(this.fileList.length>0&&!(0,i.le)(this.uploadWrapper.querySelector("."+Fi)))for(let I=0;I<this.fileList.length;I++)S=this.fileList[I].querySelector(".e-file-status"),S.innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[I].status)),this.filesData[I].status=this.localizedTexts(this.getKeyValue(this.filesData[I].status)),this.fileList[I].classList.contains(tn)&&this.fileList[I].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[I].querySelector(".e-file-play-btn")&&this.fileList[I].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[I].querySelector(".e-file-remove-btn")&&this.fileList[I].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[I].querySelector(".e-file-reload-btn")&&this.fileList[I].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))}reRenderFileList(){this.listParent&&((0,i.og)(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))}preRender(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new i.E7("uploader",this.localeText,this.locale),this.preLocaleObj=(0,i.NA)("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);const S=(0,i.NA)("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){const I=this.createElement("input",{attrs:{type:"file"}});let j=0;for(;j<this.element.attributes.length;j++)I.setAttribute(this.element.attributes[j].nodeName,this.element.attributes[j].nodeValue),I.innerHTML=this.element.innerHTML;I.hasAttribute("name")||I.setAttribute("name","UploadFiles"),this.element.appendChild(I),this.element=I,(0,i.sO)("ej2_instances",S,this.element)}S[0].isPureReactComponent&&((0,i.le)(S[0].props.name)?!(0,i.le)(S[0].props.id)&&(0,i.le)(S[0].props.name)?this.element.setAttribute("name",S[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",S[0].props.name)),(0,i.le)(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=i.AR.info.name,this.uploaderName=this.element.getAttribute("name")}formRendered(){let S=(0,i.oq)(this.element,"form");if(!(0,i.le)(S))for(;S&&S!==document.documentElement;S=S.parentElement)"FORM"===S.tagName&&(this.isForm=!0,this.formElement=S,S.setAttribute("enctype","multipart/form-data"),S.setAttribute("encoding","multipart/form-data"))}getPersistData(){return this.addOnPersist(["filesData"])}getModuleName(){return"uploader"}updateDirectoryAttributes(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))}render(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()}renderBrowseButton(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")}renderActionButtons(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()}serverActionButtonsEventBind(S){S&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=S,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())}wireActionButtonEvents(){i.bi.add(this.uploadButton,"click",this.uploadButtonClick,this),i.bi.add(this.clearButton,"click",this.clearButtonClick,this)}unwireActionButtonEvents(){i.bi.remove(this.uploadButton,"click",this.uploadButtonClick),i.bi.remove(this.clearButton,"click",this.clearButtonClick)}removeActionButtons(){this.actionButtons&&(this.unwireActionButtonEvents(),(0,i.og)(this.actionButtons),this.actionButtons=null)}renderButtonTemplates(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){const S=(0,i.le)(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=S,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){const S=(0,i.le)(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=S,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}}initializeUpload(){this.element.setAttribute("tabindex","-1");const S=this.createElement("span",{className:ti});this.element.parentElement.insertBefore(S,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),S.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(S),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()}renderPreLoadFiles(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if((0,i.le)(this.files[0].size))return;this.isPreloadFiles=!0;let S=[].slice.call(this.files);const I=[];this.multiple||(this.clearData(),S=[S[0]]);for(const j of S){const oe={name:j.name+"."+j.type.split(".")[j.type.split(".").length-1],rawFile:"",size:j.size,status:this.localizedTexts("uploadSuccessMessage"),type:j.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};I.push(oe),this.filesData.push(oe)}this.createFileList(I),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}}checkActionButtonStatus(){if(this.actionButtons){const S=this.uploadWrapper.querySelectorAll("."+wr).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+tn).length+this.uploadWrapper.querySelectorAll("span."+gr).length;S>0&&S===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}}setDropArea(){const S=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:(0,i.Ys)(this.dropArea,document);let I=this.element,j=!1;for(;I.parentNode;)I=I.parentNode,I===this.dropZoneElement&&(j=!0,S?S.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!j&&S&&(0,i.Od)(S)}else!(0,i.le)(this.uploaderOptions)&&void 0===this.uploaderOptions.dropArea&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()}updateDropArea(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;const S=this.dropAreaWrapper.querySelector(".e-file-drop");S&&(0,i.Od)(S)}}createDropTextHint(){const S=this.createElement("span",{className:ci});S.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(S)}updateHTMLAttrToElement(){if(!(0,i.le)(this.htmlAttributes))for(const S of Object.keys(this.htmlAttributes))Hr.indexOf(S)<0&&this.element.setAttribute(S,this.htmlAttributes[S])}updateHTMLAttrToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const S of Object.keys(this.htmlAttributes))if(Hr.indexOf(S)>-1)if("class"===S){const I=this.htmlAttributes[S].replace(/\s+/g," ").trim();""!==I&&(0,i.cn)([this.uploadWrapper],I.split(" "))}else if("style"===S){let I=this.uploadWrapper.getAttribute(S);I=(0,i.le)(I)?this.htmlAttributes[S]:I+this.htmlAttributes[S],this.uploadWrapper.setAttribute(S,I)}else this.uploadWrapper.setAttribute(S,this.htmlAttributes[S])}setMultipleSelection(){if(this.multiple&&!this.element.hasAttribute("multiple")){const S=document.createAttribute("multiple");S.value="multiple",this.element.setAttributeNode(S)}else this.multiple||this.element.removeAttribute("multiple")}checkAutoUpload(S){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(S):this.upload(S),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()}sequenceUpload(S){if(this.filesData.length-S.length==0||"1"!==this.filesData[this.filesData.length-S.length-1].statusCode){++this.count;const I=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],I),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(S)):--this.count}}setCSSClass(S){let I=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(I=this.cssClass.replace(/\s+/g," ").trim()),!(0,i.le)(this.cssClass)&&""!==I&&(0,i.cn)([this.uploadWrapper],I.split(I.indexOf(",")>-1?",":" "));let j=S;(0,i.le)(S)||(j=S.replace(/\s+/g," ").trim()),!(0,i.le)(S)&&""!==j&&(0,i.IV)([this.uploadWrapper],j.split(" "))}wireEvents(){i.bi.add(this.browseButton,"click",this.browseButtonClick,this),i.bi.add(this.element,"change",this.onSelectFiles,this),i.bi.add(document,"click",this.removeFocus,this),this.keyboardModule=new i.nv(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&i.bi.add(this.formElement,"reset",this.resetForm,this)}unWireEvents(){i.bi.remove(this.browseButton,"click",this.browseButtonClick),i.bi.remove(this.element,"change",this.onSelectFiles),i.bi.remove(document,"click",this.removeFocus),this.isForm&&i.bi.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()}resetForm(){this.clearAll()}keyActionHandler(S){const I=S.target;if("enter"===S.action){if(S.target===this.clearButton)this.clearButtonClick();else if(S.target===this.uploadButton)this.uploadButtonClick();else if(S.target===this.browseButton)this.browseButtonClick();else if(I.classList.contains(Zn)){const j=this.getCurrentMetaData(null,S);j.file.statusCode="4",j.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(j,!1)}else if(I.classList.contains(_r))this.resumeUpload(this.getCurrentMetaData(null,S),S);else if(I.classList.contains(hn)){const j=this.getCurrentMetaData(null,S);if((0,i.le)(j)){const Ee=this.filesData[this.fileList.indexOf(S.target.parentElement)];this.retry(Ee)}else j.file.statusCode="1",j.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(j.file)}else this.removeFiles(S),I.classList.contains(rs)||this.browseButton.focus();S.preventDefault(),S.stopPropagation()}}getCurrentMetaData(S,I){let j,oe;j=(0,i.le)(S)?this.filesData[this.fileList.indexOf(I.target.parentElement)]:S;for(let Ee=0;Ee<this.uploadMetaData.length;Ee++)this.uploadMetaData[Ee].file.name===j.name&&(oe=this.uploadMetaData[Ee]);return oe}removeFocus(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+Nr)&&(document.activeElement.blur(),this.listParent.querySelector("."+Nr).classList.remove(Nr))}browseButtonClick(){this.element.click()}uploadButtonClick(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)}clearButtonClick(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0}bindDropEvents(){this.dropZoneElement&&(i.bi.add(this.dropZoneElement,"drop",this.dropElement,this),i.bi.add(this.dropZoneElement,"dragover",this.dragHover,this),i.bi.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),i.bi.add(this.dropZoneElement,"paste",this.onPasteFile,this),i.bi.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))}unBindDropEvents(){this.dropZoneElement&&(i.bi.remove(this.dropZoneElement,"drop",this.dropElement),i.bi.remove(this.dropZoneElement,"dragover",this.dragHover),i.bi.remove(this.dropZoneElement,"dragleave",this.onDragLeave),i.bi.remove(this.dropZoneElement,"dragenter",this.onDragEnter))}onDragEnter(S){!this.enabled||(this.dropZoneElement.classList.add(cn),this.dragCounter=this.dragCounter+1,S.preventDefault(),S.stopPropagation())}onDragLeave(){!this.enabled||(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(cn))}dragHover(S){!this.enabled||("Default"!==this.dropEffect&&(S.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),S.preventDefault(),S.stopPropagation())}dropElement(S){this.dragCounter=0,this.dropZoneElement.classList.remove(cn),this.onSelectFiles(S),S.preventDefault(),S.stopPropagation()}onPasteFile(S){const I=S.clipboardData.items;if(1!==I.length)return;const j=[].slice.call(I)[0];"file"===j.kind&&j.type.match("^image/")&&this.renderSelectedFiles(S,[j.getAsFile()],!1,!0)}getSelectedFiles(S){const I=[],j=this.fileList[S],oe=this.getFilesData(),Ee=+j.getAttribute("data-files-count");let dt=0;for(let Bt=0;Bt<S;Bt++)dt+=+this.fileList[Bt].getAttribute("data-files-count");for(let Bt=dt;Bt<dt+Ee;Bt++)I.push(oe[Bt]);return I}removeFiles(S){if(!this.enabled)return;const j=this.fileList.indexOf(S.target.parentElement),oe=this.fileList[j],Ee=this.isFormUpload(),dt=Ee?this.getSelectedFiles(j):this.getFilesInArray(this.filesData[j]);if(!(0,i.le)(dt)){if(S.target.classList.contains(rs)&&!Ee){if(dt[0].statusCode="5",!(0,i.le)(oe)){const Bt=oe.querySelector("."+rs);(0,u.rj)({target:Bt,width:"20px"}),(0,u.yh)(Bt)}this.sequentialUpload&&this.uploadSequential(),oe.classList.contains(Ur)||this.checkActionComplete(!0)}else(0,i.oq)(S.target,"."+Rr)||this.remove(dt,!1,!1,!0,S);this.element.value="",this.checkActionButtonStatus()}}removeFilesData(S,I){let j;if(I)return void(this.showFileList||(j=this.filesData.indexOf(S),this.filesData.splice(j,1)));const oe=this.getLiElement(S);(0,i.le)(oe)||((0,i.og)(oe),j=this.fileList.indexOf(oe),this.fileList.splice(j,1),this.filesData.splice(j,1),0===this.fileList.length&&!(0,i.le)(this.listParent)&&((0,i.og)(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&j<=this.count&&--this.count)}removeUploadedFile(S,I,j,oe){const Ee=S,dt=new i.tk(this.asyncSettings.removeUrl,"POST",!0,null);dt.emitError=!1;const Bt=new FormData;dt.beforeSend=Ii=>{I.currentRequest=dt.httpRequest,j?this.removingEventCallback(I,Bt,Ee,S):this.trigger("removing",I,Yi=>{Yi.cancel?Ii.cancel=!0:this.removingEventCallback(Yi,Bt,Ee,S)})},dt.onLoad=Ii=>(this.removeCompleted(Ii,Ee,oe),{}),dt.onError=Ii=>(this.removeFailed(Ii,Ee,oe),{}),dt.send(Bt)}removingEventCallback(S,I,j,oe){const Ee=this.element.getAttribute("name"),dt=this.getLiElement(oe);if(!((0,i.le)(dt)||(0,i.le)(dt.querySelector("."+Ln))&&(0,i.le)(dt.querySelector("."+Yn)))){const Bt=dt.querySelector("."+Ln)?dt.querySelector("."+Ln):dt.querySelector("."+Yn);(0,u.rj)({target:Bt,width:"20px"}),(0,u.yh)(Bt)}S.postRawFile&&!(0,i.le)(j.rawFile)&&""!==j.rawFile?I.append(Ee,j.rawFile,j.name):I.append(Ee,j.name),this.updateFormData(I,S.customFormData)}updateFormData(S,I){if(I.length>0&&I[0])for(let j=0;j<I.length;j++){const oe=I[j],Ee=Object.keys(oe).map(function(dt){return oe[dt]});S.append(Object.keys(oe)[0],Ee)}}updateCustomheader(S,I){if(I.length>0&&I[0])for(let j=0;j<I.length;j++){const oe=I[j],Ee=Object.keys(oe).map(function(dt){return oe[dt]});S.setRequestHeader(Object.keys(oe)[0],Ee)}}removeCompleted(S,I,j){const oe=S&&S.currentTarget?this.getResponse(S):null,Ee=S.target;if(4===Ee.readyState&&Ee.status>=200&&Ee.status<=299){const dt={e:S,response:oe,operation:"remove",file:this.updateStatus(I,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",dt),this.removeFilesData(I,j);const Bt=this.uploadedFilesData.indexOf(I);this.uploadedFilesData.splice(Bt,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(S,I,j)}removeFailed(S,I,j){const Ee={e:S,response:S&&S.currentTarget?this.getResponse(S):null,operation:"remove",file:this.updateStatus(I,this.localizedTexts("removedFailedMessage"),"0")};if(!j){const Bt=this.filesData.indexOf(I),Ii=this.fileList[Bt];if(Ii){Ii.classList.remove(tn),Ii.classList.add(mr);const Yi=Ii.querySelector("."+Es);Yi&&(Yi.classList.remove(tn),Yi.classList.add(mr))}this.checkActionButtonStatus()}this.trigger("failure",Ee);const dt=this.getLiElement(I);if(!(0,i.le)(dt)&&!(0,i.le)(dt.querySelector("."+Ln))){const Bt=dt.querySelector("."+Ln);(0,u.v3)(Bt),(0,i.og)(dt.querySelector(".e-spinner-pane"))}}getFilesFromFolder(S){this.filesEntries=[];const I=this.multiple?S.dataTransfer.items:[S.dataTransfer.items[0]];if(this.checkDirectoryUpload(I))for(let oe=0;oe<I.length;oe++){const Ee=I[oe].webkitGetAsEntry();if(Ee.isFile){const dt=[];Ee.file(Bt=>{dt.push({path:Ee.fullPath,file:Bt})}),this.renderSelectedFiles(S,dt,!0)}else Ee.isDirectory&&this.traverseFileTree(Ee,S)}}checkDirectoryUpload(S){for(let I=0;S&&I<S.length;I++)if(S[I].webkitGetAsEntry().isDirectory)return!0;return!1}traverseFileTree(S,I){if(S.isFile)this.filesEntries.push(S);else if(S.isDirectory){const j=S.createReader();this.readFileFromDirectory(j,I)}}readFileFromDirectory(S,I){S.readEntries(j=>{for(let oe=0;oe<j.length;oe++)this.traverseFileTree(j[oe],I);this.pushFilesEntries(I),j.length&&this.readFileFromDirectory(S)})}pushFilesEntries(S){const I=[];for(let j=0;j<this.filesEntries.length;j++)this.filesEntries[j].file(oe=>{this.filesEntries.length&&(I.push({path:this.filesEntries[j].fullPath,file:oe}),j===this.filesEntries.length-1&&(this.filesEntries=[],this.renderSelectedFiles(S,I,!0)))})}onSelectFiles(S){if(!this.enabled)return;let I;if("drop"===S.type)if(this.directoryUpload)this.getFilesFromFolder(S);else{const j=this.sortFilesList=S.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=j),j.length>0&&(I=this.multiple?this.sortFileList(j):[j[0]],this.renderSelectedFiles(S,I))}else I=[].slice.call(S.target.files),this.renderSelectedFiles(S,I)}getBase64(S){return new Promise((I,j)=>{const oe=new FileReader;oe.readAsDataURL(S),oe.onload=()=>I(oe.result),oe.onerror=Ee=>j(Ee)})}renderSelectedFiles(S,I,j,oe){this.base64String=[];const Ee={event:S,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(I.length<1)return Ee.isCanceled=!0,void this.trigger("selected",Ee);this.flag=!0;let dt=[];this.multiple||(this.clearData(!0),I=[I[0]]);for(let Bt=0;Bt<I.length;Bt++)this.updateInitialFileDetails(S,I,j?I[Bt].file:I[Bt],Bt,dt,j,oe);Ee.filesData=dt,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(dt=this.checkExtension(dt)),this.trigger("selected",Ee,Bt=>{this._internalRenderSelect(Bt,dt)})}updateInitialFileDetails(S,I,j,oe,Ee,dt,Bt){const Yi={name:dt?I[oe].path.substring(1,I[oe].path.length):Bt?(0,i.QI)(j.name.substring(0,j.name.lastIndexOf(".")))+"."+this.getFileType(j.name):this.directoryUpload?I[oe].webkitRelativePath:j.name,rawFile:j,size:j.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(j.name),validationMessages:this.validatedFileSize(j.size),statusCode:"1",id:(0,i.QI)(j.name.substring(0,j.name.lastIndexOf(".")))+"."+this.getFileType(j.name)};Bt&&(Yi.fileSource="paste"),Yi.status=""!==Yi.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==Yi.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):Yi.status,(""!==Yi.validationMessages.minSize||""!==Yi.validationMessages.maxSize)&&(Yi.statusCode="0"),Ee.push(Yi)}_internalRenderSelect(S,I){if(!S.cancel){if(this.selectedFiles=this.selectedFiles.concat(I),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(S.isModified&&S.modifiedFilesData.length>0){for(let oe=0;oe<S.modifiedFilesData.length;oe++)for(let Ee=0;Ee<I.length;Ee++)S.modifiedFilesData[oe].id===I[Ee].id&&(S.modifiedFilesData[oe].rawFile=I[Ee].rawFile);const j=this.allTypes?S.modifiedFilesData:this.checkExtension(S.modifiedFilesData);this.updateSortedFileList(j),this.filesData=j,(!this.isForm||this.allowUpload())&&this.checkAutoUpload(j)}else this.createFileList(I,!0),this.filesData=this.filesData.concat(I),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(I);!(0,i.le)(S.progressInterval)&&""!==S.progressInterval&&(this.progressInterval=S.progressInterval)}else this.filesData=this.filesData.concat(I),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}}allowUpload(){let S=!1;return this.isForm&&!(0,i.le)(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(S=!0),S}isFormUpload(){let S=!1;return this.isForm&&((0,i.le)(this.asyncSettings.saveUrl)||""===this.asyncSettings.saveUrl)&&((0,i.le)(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl)&&(S=!0),S}clearData(S){(0,i.le)(this.listParent)||((0,i.og)(this.listParent),this.listParent=null),"msie"!==this.browserName&&!S&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()}updateSortedFileList(S){const I=this.createElement("div",{id:"clonewrapper"});let oe,j=-1;if(this.listParent){for(let dt=0;dt<this.listParent.querySelectorAll("li").length;dt++){const Bt=this.listParent.querySelectorAll("li")[dt];I.appendChild(Bt.cloneNode(!0))}oe=this.listParent.querySelectorAll("li");for(const dt of oe)(0,i.og)(dt);this.removeActionButtons();const Ee=[].slice.call(I.childNodes);(0,i.og)(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(let dt=0;dt<S.length;dt++){for(let Bt=0;Bt<this.filesData.length;Bt++)this.filesData[Bt].name===S[dt].name&&(this.listParent.appendChild(Ee[Bt]),i.bi.add(Ee[Bt].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(Ee[Bt]),j=dt);j!==dt&&this.createFileList([S[dt]])}}else this.createFileList(S)}isBlank(S){return!S||/^\s*$/.test(S)}checkExtension(S){const I=S;if(!this.isBlank(this.allowedExtensions)){const j=[],oe=this.allowedExtensions.split(",");for(const Ee of oe)j.push(Ee.trim().toLocaleLowerCase());for(let Ee=0;Ee<S.length;Ee++)-1===j.indexOf(("."+S[Ee].type).toLocaleLowerCase())&&(S[Ee].status=this.localizedTexts("invalidFileType"),S[Ee].statusCode="0")}return I}validatedFileSize(S){let I="",j="";return S<this.minFileSize?I=this.localizedTexts("invalidMinFileSize"):S>this.maxFileSize?j=this.localizedTexts("invalidMaxFileSize"):(I="",j=""),{minSize:I,maxSize:j}}isPreLoadFile(S){let I=!1;for(let j=0;j<this.files.length;j++)this.files[j].name===S.name.slice(0,S.name.lastIndexOf("."))&&this.files[j].type===S.type&&(I=!0);return I}createCustomfileList(S){this.createParentUL();for(const I of S){const j=this.createElement("li",{className:as,attrs:{"data-file-name":I.name}});this.uploadTemplateFn=this.templateComplier(this.template);const oe=this.uploadTemplateFn(I,this,"template",this.element.id+"Template",this.isStringTemplate,null,j);if(oe){const Ii=[].slice.call(oe);(0,i.R3)(Ii,j)}const Ee=S.indexOf(I),dt={element:j,fileInfo:I,index:Ee,isPreload:this.isPreLoadFile(I)},Bt={element:j,fileInfo:I,index:Ee,isPreload:this.isPreLoadFile(I)};this.trigger("rendering",dt),this.trigger("fileListRendering",Bt),this.listParent.appendChild(j),this.fileList.push(j)}this.renderReactTemplates()}createParentUL(){(0,i.le)(this.listParent)&&(this.listParent=this.createElement("ul",{className:Fi}),this.uploadWrapper.appendChild(this.listParent))}formFileList(S,I){const j=this.createElement("li",{className:as});j.setAttribute("data-files-count",S.length+"");const oe=this.createElement("span",{className:Cn});let Ee;for(const Ss of S){const Ps=this.createElement("span",{className:ms});Ps.innerHTML=this.getFileNameOnly(Ss.name);const un=this.createElement("span",{className:dn}),Xs=this.getFileType(Ss.name);if(un.innerHTML="."+Xs,Xs||un.classList.add("e-hidden"),this.enableRtl){const Jn=this.createElement("span",{className:Jr});Jn.appendChild(un),Jn.appendChild(Ps),oe.appendChild(Jn)}else oe.appendChild(Ps),oe.appendChild(un);this.truncateName(Ps),Ee=this.formValidateFileInfo(Ss,j)}j.appendChild(oe),this.setListToFileInfo(S,j);const dt=this.listParent.querySelectorAll("li").length,Bt=this.createElement("span");if(j.classList.contains(co)?(Bt.classList.add(Es),Bt.classList.add(co),Bt.innerText=S.length>1?this.localizedTexts("invalidFileSelection"):Ee):(Bt.classList.add(S.length>1?"e-file-information":Cs),Bt.innerText=S.length>1?this.localizedTexts("totalFiles")+": "+S.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(S)):this.bytesToSize(S[0].size),this.createFormInput(S)),oe.appendChild(Bt),(0,i.le)(j.querySelector(".e-icons"))){const Ss=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&Ss.classList.add("e-msie"),Ss.setAttribute("title",this.localizedTexts("remove")),j.appendChild(oe),j.appendChild(Ss),i.bi.add(Ss,"click",this.removeFiles,this),Ss.classList.add(Yn)}const Ii={element:j,fileInfo:this.mergeFileInfo(S,j),index:dt,isPreload:this.isPreLoadFile(this.mergeFileInfo(S,j))},Yi={element:j,fileInfo:this.mergeFileInfo(S,j),index:dt,isPreload:this.isPreLoadFile(this.mergeFileInfo(S,j))};this.trigger("rendering",Ii),this.trigger("fileListRendering",Yi),this.listParent.appendChild(j),this.fileList.push(j)}formValidateFileInfo(S,I){let j=S.status;const oe=this.validatedFileSize(S.size);(""!==oe.minSize||""!==oe.maxSize)&&(this.addInvalidClass(I),j=""!==oe.minSize?this.localizedTexts("invalidMinFileSize"):""!==oe.maxSize?this.localizedTexts("invalidMaxFileSize"):j);const Ee=this.checkExtension(this.getFilesInArray(S))[0].status;return Ee===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(I),j=Ee),j}addInvalidClass(S){S.classList.add(co)}createFormInput(S){const I=this.element.cloneNode(!0);I.classList.add("e-hidden-file-input");for(const j of S)j.input=I;I.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+ti).appendChild(I),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}getFileSize(S){let I=0;for(const j of S)I+=j.size;return I}mergeFileInfo(S,I){const j={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:I},oe=[];let Ee="";for(const dt of S)oe.push(dt.name),Ee=dt.type;return j.name=oe.join(", "),j.size=this.getFileSize(S),j.type=Ee,j.status=this.statusForFormUpload(S,I),j}statusForFormUpload(S,I){let oe,j=!0;for(const Ee of S){oe=Ee.status;const dt=this.validatedFileSize(Ee.size);(""!==dt.minSize||""!==dt.maxSize)&&(j=!1,oe=""!==dt.minSize?this.localizedTexts("invalidMinFileSize"):""!==dt.maxSize?this.localizedTexts("invalidMaxFileSize"):oe);const Bt=this.checkExtension(this.getFilesInArray(Ee))[0].status;Bt===this.localizedTexts("invalidFileType")&&(j=!1,oe=Bt)}return j?oe=this.localizedTexts("totalFiles")+": "+S.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(S)):(I.classList.add(co),oe=S.length>1?this.localizedTexts("invalidFileSelection"):oe),oe}formCustomFileList(S,I){this.createParentUL();const j=this.createElement("li",{className:as});j.setAttribute("data-files-count",S.length+""),this.setListToFileInfo(S,j);const oe=this.mergeFileInfo(S,j);j.setAttribute("data-file-name",oe.name),this.uploadTemplateFn=this.templateComplier(this.template);const Ee=this.uploadTemplateFn(oe,this,"template",this.element.id+"Template",this.isStringTemplate,null,j);if(Ee){const Yi=[].slice.call(Ee);(0,i.R3)(Yi,j)}const dt=this.listParent.querySelectorAll("li").length;j.classList.contains(co)||this.createFormInput(S);const Bt={element:j,fileInfo:oe,index:dt,isPreload:this.isPreLoadFile(oe)},Ii={element:j,fileInfo:oe,index:dt,isPreload:this.isPreLoadFile(oe)};this.trigger("rendering",Bt),this.trigger("fileListRendering",Ii),this.listParent.appendChild(j),this.fileList.push(j),this.renderReactTemplates()}createFileList(S,I){if(this.createParentUL(),""===this.template||(0,i.le)(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add(Bi),this.formFileList(S,this.element.files);else for(const j of S){const oe=this.createElement("li",{className:as,attrs:{"data-file-name":j.name,"data-files-count":"1"}}),Ee=this.createElement("span",{className:Cn}),dt=this.createElement("span",{className:ms,attrs:{title:j.name}});dt.innerHTML=this.getFileNameOnly(j.name);const Bt=this.createElement("span",{className:dn}),Ii=this.getFileType(j.name);if(Bt.innerHTML="."+Ii,Ii||Bt.classList.add("e-hidden"),this.enableRtl){const En=this.createElement("span",{className:Jr});En.appendChild(Bt),En.appendChild(dt),Ee.appendChild(En)}else Ee.appendChild(dt),Ee.appendChild(Bt);const Yi=this.createElement("span",{className:Cs});Yi.innerHTML=this.bytesToSize(j.size),Ee.appendChild(Yi);const Ss=this.createElement("span",{className:Es});Ee.appendChild(Ss),Ss.innerHTML=j.status,oe.appendChild(Ee);const Ps=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&Ps.classList.add("e-msie"),Ps.setAttribute("title",this.localizedTexts("remove")),oe.appendChild(Ps),i.bi.add(Ps,"click",this.removeFiles,this),"2"===j.statusCode?(Ss.classList.add(tn),Ps.classList.add(Ln),Ps.setAttribute("title",this.localizedTexts("delete"))):"1"!==j.statusCode&&(Ss.classList.remove(tn),Ss.classList.add(wr)),this.autoUpload&&"1"===j.statusCode&&""!==this.asyncSettings.saveUrl&&(Ss.innerHTML=""),Ps.classList.contains(Ln)||Ps.classList.add(Yn);const un=S.indexOf(j),Xs={element:oe,fileInfo:j,index:un,isPreload:this.isPreLoadFile(j)},Jn={element:oe,fileInfo:j,index:un,isPreload:this.isPreLoadFile(j)};this.trigger("rendering",Xs),this.trigger("fileListRendering",Jn),this.listParent.appendChild(oe),this.fileList.push(oe),this.truncateName(dt);const Ar=this.flag;this.isPreLoadFile(j)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=Ar)}else this.isFormUpload()?(this.uploadWrapper.classList.add(Bi),this.formCustomFileList(S,this.element.files)):this.createCustomfileList(S)}getSlicedName(S){const I=S.textContent;S.dataset.tail=I.slice(I.length-10)}setListToFileInfo(S,I){for(const j of S)j.list=I}truncateName(S){("edge"!==this.browserName&&S.offsetWidth<S.scrollWidth||S.offsetWidth+1<S.scrollWidth)&&this.getSlicedName(S)}getFileType(S){let I;const j=S.lastIndexOf(".");return j>=0&&(I=S.substring(j+1)),I||""}getFileNameOnly(S){let I=this.getFileType(S);return S.split("."+I)[0]}setInitialAttributes(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){const S=document.createAttribute("multiple");this.element.setAttributeNode(S)}}filterfileList(S){const I=[];let j;for(let oe=0;oe<S.length;oe++)j=this.getLiElement(S[oe]),j.classList.contains(tn)||I.push(S[oe]);return I}updateStatus(S,I,j,oe=!0){if(!(""===I||(0,i.le)(I))&&!(""===j||(0,i.le)(j))&&(S.status=I,S.statusCode=j),oe){const Ee=this.getLiElement(S);(0,i.le)(Ee)||!(0,i.le)(Ee.querySelector("."+Es))&&""!==I&&!(0,i.le)(I)&&(Ee.querySelector("."+Es).textContent=I)}return S}getLiElement(S){let I;for(let j=0;j<this.filesData.length;j++)!(0,i.le)(S)&&((0,i.le)(this.filesData[j].id)||(0,i.le)(S.id)?this.filesData[j].name===S.name:this.filesData[j].name===S.name&&this.filesData[j].id===S.id)&&(I=j);return this.fileList[I]}createProgressBar(S){const I=this.createElement("span",{className:ln}),j=this.createElement("progressbar",{className:qn,attrs:{value:"0",max:"100"}}),oe=this.createElement("span",{className:"e-progress-inner-wrap"});j.setAttribute("style","width: 0%");const Ee=this.createElement("span",{className:$n});Ee.textContent="0%",oe.appendChild(j),I.appendChild(oe),I.appendChild(Ee),S.querySelector("."+Cn).appendChild(I)}updateProgressbar(S,I){if(!isNaN(Math.round(S.loaded/S.total*100))&&!(0,i.le)(I.querySelector("."+qn)))if((0,i.le)(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(I,Math.round(S.loaded/S.total*100).toString()+"%");else{const j=Math.round(S.loaded/S.total*100)%parseInt(this.progressInterval,10);(0===j||100===j)&&this.changeProgressValue(I,Math.round(S.loaded/S.total*100).toString()+"%")}}changeProgressValue(S,I){S.querySelector("."+qn).setAttribute("style","width:"+I),S.querySelector("."+$n).textContent=I}uploadInProgress(S,I,j,oe){const Ee=this.getLiElement(I);if((0,i.le)(Ee)&&!j)return;if((0,i.le)(Ee))this.cancelUploadingFile(I,S,oe);else{"5"===I.statusCode&&this.cancelUploadingFile(I,S,oe,Ee),!(Ee.querySelectorAll("."+ln).length>0)&&Ee.querySelector("."+Es)&&(Ee.querySelector("."+Es).classList.add(gr),this.createProgressBar(Ee),this.updateProgressBarClasses(Ee,gr),Ee.querySelector("."+Es).classList.remove(mr)),this.updateProgressbar(S,Ee);const Bt=Ee.querySelector("."+Yn);(0,i.le)(Bt)||(Bt.classList.add(rs,gr),Bt.setAttribute("title",this.localizedTexts("abort")),Bt.classList.remove(Yn))}const dt={e:S,operation:"upload",file:this.updateStatus(I,this.localizedTexts("inProgress"),"3")};this.trigger("progress",dt)}cancelUploadingFile(S,I,j,oe){"5"===S.statusCode&&this.trigger("canceling",{event:I,fileData:S,cancel:!1,customFormData:[]},dt=>{if(dt.cancel){if(S.statusCode="3",!(0,i.le)(oe)){const Bt=oe.querySelector("."+rs);(0,i.le)(Bt)||((0,u.v3)(Bt),(0,i.og)(oe.querySelector(".e-spinner-pane")))}}else{j.emitError=!1,j.httpRequest.abort();const Bt=new FormData;if("5"===S.statusCode){const Ii=this.element.getAttribute("name");Bt.append(Ii,S.name),Bt.append("cancel-uploading",S.name),this.updateFormData(Bt,dt.customFormData);const Yi=new i.tk(this.asyncSettings.removeUrl,"POST",!0,null);Yi.emitError=!1,Yi.onLoad=Ss=>(this.removecanceledFile(Ss,S),{}),Yi.send(Bt)}}})}removecanceledFile(S,I){const j=this.getLiElement(I);if(j.querySelector("."+hn)||(0,i.le)(j.querySelector("."+rs)))return;this.updateStatus(I,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(S,I,j);const oe=j.querySelector("."+Yn);(0,i.le)(j)||((0,u.v3)(oe),(0,i.le)(j.querySelector(".e-spinner-pane"))||(0,i.og)(j.querySelector(".e-spinner-pane")));const Ee=S&&S.currentTarget?this.getResponse(S):null;this.trigger("success",{event:S,response:Ee,operation:"cancel",file:I})}renderFailureState(S,I,j){this.updateProgressBarClasses(j,mr),this.removeProgressbar(j,"failure"),(0,i.le)(j.querySelector(".e-file-status"))||j.querySelector(".e-file-status").classList.add(mr);const oe=j.querySelector("."+rs);(0,i.le)(oe)||(oe.classList.remove(rs,gr),oe.classList.add(Yn),oe.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),oe.parentElement.insertBefore(this.pauseButton,oe),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),j.querySelector("."+hn).addEventListener("click",dt=>{this.reloadcanceledFile(dt,I,j,!1)},!1))}reloadcanceledFile(S,I,j,oe){I.statusCode="1",I.status=this.localizedTexts("readyToUploadMessage"),oe||((0,i.le)(j.querySelector("."+Es))||j.querySelector("."+Es).classList.remove(mr),(0,i.le)(j.querySelector("."+hn))||(0,i.og)(j.querySelector("."+hn)),this.pauseButton=null),j.classList.add(Ur),this.upload([I])}uploadComplete(S,I,j){const oe=S.target;if(4===oe.readyState&&oe.status>=200&&oe.status<=299){const Ee=this.getLiElement(I);if((0,i.le)(Ee)&&(!j||(0,i.le)(j)))return;if(!(0,i.le)(Ee)){this.updateProgressBarClasses(Ee,tn),this.removeProgressbar(Ee,"success");const dt=Ee.querySelector("."+rs);(0,i.le)(dt)||(dt.classList.add(Ln),dt.setAttribute("title",this.localizedTexts("delete")),dt.classList.remove(rs),dt.classList.remove(gr))}this.raiseSuccessEvent(S,I)}else this.uploadFailed(S,I)}getResponse(S){const I=S.currentTarget;return{readyState:I.readyState,statusCode:I.status,statusText:I.statusText,headers:I.getAllResponseHeaders(),withCredentials:I.withCredentials}}raiseSuccessEvent(S,I){const j=S&&S.currentTarget?this.getResponse(S):null,oe=this.localizedTexts("uploadSuccessMessage"),Ee={e:S,response:j,operation:"upload",file:this.updateStatus(I,oe,"2",!1),statusText:oe},dt=this.getLiElement(I);if(!(0,i.le)(dt)){const Bt=dt.querySelector("."+Rr);(0,i.le)(Bt)||((0,u.v3)(dt),(0,i.og)(Bt))}this.trigger("success",Ee,Bt=>{this.updateStatus(I,Bt.statusText,"2"),this.uploadedFilesData.push(I),this.trigger("change",{file:this.uploadedFilesData}),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(I).classList.contains(Ur)?this.getLiElement(I).classList.remove(Ur):(this.uploadSequential(),this.checkActionComplete(!0)))})}uploadFailed(S,I){const j=this.getLiElement(I),oe=S&&S.currentTarget?this.getResponse(S):null,Ee=this.localizedTexts("uploadFailedMessage"),dt={e:S,response:oe,operation:"upload",file:this.updateStatus(I,Ee,"0",!1),statusText:Ee};(0,i.le)(j)||this.renderFailureState(S,I,j),this.trigger("failure",dt,Bt=>{this.updateStatus(I,Bt.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0)})}uploadSequential(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())}checkActionComplete(S){S?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()}raiseActionComplete(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;const S={fileData:[]};S.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",S)}}getSelectedFileStatus(S){const I=[];let j=0;for(let oe=0;oe<S.length;oe++){const Ee=S[oe];for(let dt=0;dt<this.filesData.length;dt++)this.filesData[dt].name===Ee.name&&(I[j]=this.filesData[dt],++j)}return I}updateProgressBarClasses(S,I){const j=S.querySelector("."+qn);(0,i.le)(j)||j.classList.add(I)}removeProgressbar(S,I){(0,i.le)(S.querySelector("."+ln))||(this.progressAnimation=new i.fw({duration:1250}),this.progressAnimation.animate(S.querySelector("."+ln),{name:"FadeOut"}),this.progressAnimation.animate(S.querySelector("."+$n),{name:"FadeOut"}),setTimeout(()=>{this.animateProgressBar(S,I)},750))}animateProgressBar(S,I){"success"===I?(S.classList.add(tn),(0,i.le)(S.querySelector("."+Es))||(S.querySelector("."+Es).classList.remove(gr),this.progressAnimation.animate(S.querySelector("."+Es),{name:"FadeIn"}),S.querySelector("."+Es).classList.add(tn))):(0,i.le)(S.querySelector("."+Es))||(S.querySelector("."+Es).classList.remove(gr),this.progressAnimation.animate(S.querySelector("."+Es),{name:"FadeIn"}),S.querySelector("."+Es).classList.add(mr)),S.querySelector("."+ln)&&(0,i.og)(S.querySelector("."+ln))}setExtensions(S){""===S||(0,i.le)(S)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",S)}templateComplier(S){if(S)try{if((0,i.td)(S,document).length)return(0,i.MY)((0,i.Ys)(S,document).innerHTML.trim())}catch{return(0,i.MY)(S)}}setRTL(){this.enableRtl?(0,i.cn)([this.uploadWrapper],"e-rtl"):(0,i.IV)([this.uploadWrapper],"e-rtl")}localizedTexts(S){return this.l10n.setLocale(this.locale),this.l10n.getConstant(S)}setControlStatus(){this.enabled?(this.uploadWrapper.classList.contains(Br)&&this.uploadWrapper.classList.remove(Br),!(0,i.le)(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!(0,i.le)(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!(0,i.le)(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(Br),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),(0,i.le)(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),(0,i.le)(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))}checkHTMLAttributes(S){const I=S?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];for(const j of I)if(!(0,i.le)(this.element.getAttribute(j)))switch(j){case"accept":((0,i.le)(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||S)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!S),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if((0,i.le)(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||S){const oe="multiple"===this.element.getAttribute(j)||""===this.element.getAttribute(j)||"true"===this.element.getAttribute(j);this.setProperties({multiple:oe},!S),this.initialAttr.multiple=!0}break;case"disabled":if((0,i.le)(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||S){const oe=!("disabled"===this.element.getAttribute(j)||""===this.element.getAttribute(j)||"true"===this.element.getAttribute(j));this.setProperties({enabled:oe},!S),this.initialAttr.disabled=!0}}}chunkUpload(S,I,j){const Ee=Math.min(this.asyncSettings.chunkSize,S.size),Bt=S.rawFile.slice(0,Ee);this.sendRequest(S,{chunkIndex:0,blob:Bt,file:S,start:0,end:Ee,retryCount:0,request:null},I,j)}sendRequest(S,I,j,oe){const Ee=new FormData,dt=S.rawFile.slice(I.start,I.end);Ee.append("chunkFile",dt,S.name),Ee.append(this.uploaderName,dt,S.name),Ee.append("chunk-index",I.chunkIndex.toString()),Ee.append("chunkIndex",I.chunkIndex.toString());const Bt=Math.max(Math.ceil(S.size/this.asyncSettings.chunkSize),1);Ee.append("total-chunk",Bt.toString()),Ee.append("totalChunk",Bt.toString());const Ii=new i.tk({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});Ii.emitError=!1,Ii.onLoad=Ss=>(this.chunkUploadComplete(Ss,I,j),{}),Ii.onUploadProgress=Ss=>(this.chunkUploadInProgress(Ss,I,j),{});const Yi={fileData:S,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};Ii.beforeSend=Ss=>{Yi.currentRequest=Ii.httpRequest,Yi.currentChunkIndex=I.chunkIndex,this.trigger(0===Yi.currentChunkIndex?"uploading":"chunkUploading",Yi,Ps=>{this.uploadingEventCallback(Ee,Ps,Ss,S)})},Ii.onError=Ss=>(this.chunkUploadFailed(Ss,I,j),{}),Ii.send(Ee),I.request=Ii}uploadingEventCallback(S,I,j,oe){I.cancel?this.eventCancelByArgs(j,I,oe):this.updateFormData(S,I.customFormData)}eventCancelByArgs(S,I,j){if(S.cancel=!0,"5"===I.fileData.statusCode)return;I.fileData.statusCode="5",I.fileData.status=this.localizedTexts("fileUploadCancel");const oe=this.getLiElement(I.fileData);if(oe){(0,i.le)(oe.querySelector("."+Es))||(oe.querySelector("."+Es).innerHTML=this.localizedTexts("fileUploadCancel"),oe.querySelector("."+Es).classList.add(mr)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});const Ee=oe.querySelector("."+Yn);Ee&&Ee.parentElement.insertBefore(this.pauseButton,Ee),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",dt=>{this.reloadcanceledFile(dt,j,oe)},!1),this.checkActionButtonStatus()}}checkChunkUpload(){return!(this.asyncSettings.chunkSize<=0||(0,i.le)(this.asyncSettings.chunkSize))}chunkUploadComplete(S,I,j){const oe=S.target;let Ee;if(4===oe.readyState&&oe.status>=200&&oe.status<300){const dt=S&&S.currentTarget?this.getResponse(S):null,Bt=Math.max(Math.ceil(I.file.size/this.asyncSettings.chunkSize),1);if(this.trigger("chunkSuccess",{event:S,file:I.file,chunkIndex:I.chunkIndex,totalChunk:Bt,chunkSize:this.asyncSettings.chunkSize,response:dt}),((0,i.le)(j)||!j)&&(Ee=this.getLiElement(I.file)),this.updateMetaData(I),I.end===I.file.size&&(I.file.statusCode="3"),"5"===I.file.statusCode)this.trigger("canceling",{event:S,fileData:I.file,cancel:!1,customFormData:[]},Ss=>{if(Ss.cancel){I.file.statusCode="3";const Ps=Ee.querySelector("."+rs);!(0,i.le)(Ee)&&!(0,i.le)(Ps)&&((0,u.v3)(Ps),(0,i.og)(Ee.querySelector(".e-spinner-pane"))),this.sendNextRequest(I)}else{I.request.emitError=!1,oe.abort();const Ps=new FormData,un=this.element.getAttribute("name");Ps.append(un,I.file.name),Ps.append("cancel-uploading",I.file.name),Ps.append("cancelUploading",I.file.name),this.updateFormData(Ps,Ss.customFormData);const Xs=new i.tk(this.asyncSettings.removeUrl,"POST",!0,null);Xs.emitError=!1,Xs.onLoad=Jn=>(this.removeChunkFile(Jn,I,j),{}),Xs.send(Ps)}});else{if(Bt-1===I.chunkIndex&&Bt>I.chunkIndex){const Yi=this.pausedData.indexOf(I);return Yi>=0&&this.pausedData.splice(Yi,1),(0,i.le)(this.template)&&((0,i.le)(j)||!j)&&Ee&&(Ee&&!(0,i.le)(Ee.querySelector("."+Zn))&&(0,i.og)(Ee.querySelector("."+Zn)),this.removeChunkProgressBar(I)),void this.raiseSuccessEvent(S,I.file)}"4"!==I.file.statusCode&&this.sendNextRequest(I)}}else this.chunkUploadFailed(S,I)}sendNextRequest(S){S.start=S.end,S.end+=this.asyncSettings.chunkSize,S.end=Math.min(S.end,S.file.size),S.chunkIndex+=1,this.sendRequest(S.file,S)}removeChunkFile(S,I,j){if((0,i.le)(this.template)&&(0,i.le)(j)&&!j){const oe=this.getLiElement(I.file),Ee=oe.querySelector("."+rs),dt=Ee;this.updateStatus(I.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(oe,mr),this.removeProgressbar(oe,"failure"),Ee&&Ee.classList.remove(rs),Ee&&Ee.classList.add(Yn),Ee&&Ee.setAttribute("title",this.localizedTexts("remove"));const Bt=oe.querySelector("."+Zn);Bt&&Bt.classList.add(hn),Bt&&Bt.classList.remove(Zn),Bt&&Bt.setAttribute("title",this.localizedTexts("retry")),!(0,i.le)(oe)&&!(0,i.le)(Ee)&&!(0,i.le)(oe.querySelector(".e-spinner-pane"))&&((0,u.v3)(dt),(0,i.og)(oe.querySelector(".e-spinner-pane")))}}pauseUpload(S,I,j){S.file.statusCode="4",S.file.status=this.localizedTexts("pause"),this.updateMetaData(S);const oe={event:I||null,file:S.file,chunkIndex:S.chunkIndex,chunkCount:Math.round(S.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(S,j,oe)}abortUpload(S,I,j){"4"!==S.file.statusCode&&(S.request.emitError=!1,S.request.httpRequest.abort());const oe=this.getLiElement(S.file);if((0,i.le)(this.template)&&((0,i.le)(I)||!I)){const Ee=oe.querySelector("."+Zn);Ee.classList.remove(Zn),Ee.classList.add(_r),Ee.setAttribute("title",this.localizedTexts("resume")),Ee.nextElementSibling.classList.add(Yn),Ee.nextElementSibling.classList.remove(rs),Ee.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(let Ee=0;Ee<this.pausedData.length;Ee++)this.pausedData[Ee].file.name===S.file.name&&this.pausedData.splice(Ee,1);this.pausedData.push(S),this.trigger("pausing",j)}resumeUpload(S,I,j){const oe=this.getLiElement(S.file);let Ee;(0,i.le)(oe)||(Ee=oe.querySelector("."+_r)),!(0,i.le)(Ee)&&((0,i.le)(j)||!j)&&(Ee.classList.remove(_r),Ee.classList.add(Zn),Ee.setAttribute("title",this.localizedTexts("pause")),Ee.nextElementSibling.classList.remove(Yn),Ee.nextElementSibling.classList.add(rs),Ee.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),S.file.status=this.localizedTexts("inProgress"),S.file.statusCode="3",this.updateMetaData(S);const dt={event:I||null,file:S.file,chunkIndex:S.chunkIndex,chunkCount:Math.round(S.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",dt);for(let Bt=0;Bt<this.pausedData.length;Bt++)this.pausedData[Bt].end===this.pausedData[Bt].file.size?this.chunkUploadComplete(I,S,j):this.pausedData[Bt].file.name===S.file.name&&(this.pausedData[Bt].start=this.pausedData[Bt].end,this.pausedData[Bt].end=this.pausedData[Bt].end+this.asyncSettings.chunkSize,this.pausedData[Bt].end=Math.min(this.pausedData[Bt].end,this.pausedData[Bt].file.size),this.pausedData[Bt].chunkIndex=this.pausedData[Bt].chunkIndex+1,this.sendRequest(this.pausedData[Bt].file,this.pausedData[Bt],j))}updateMetaData(S){-1===this.uploadMetaData.indexOf(S)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(S),1),this.uploadMetaData.push(S)}removeChunkProgressBar(S){const I=this.getLiElement(S.file);if(!(0,i.le)(I)){this.updateProgressBarClasses(I,tn),this.removeProgressbar(I,"success");const j=I.querySelector("."+rs);(0,i.le)(j)||(j.classList.add(Ln),j.setAttribute("title",this.localizedTexts("delete")),j.classList.remove(rs,gr))}}chunkUploadFailed(S,I,j){const oe=Math.max(Math.ceil(I.file.size/this.asyncSettings.chunkSize),1);let Ee;(0,i.le)(this.template)&&((0,i.le)(j)||!j)&&(Ee=this.getLiElement(I.file));const dt=S&&S.currentTarget?this.getResponse(S):null;this.trigger("chunkFailure",{event:S,file:I.file,chunkIndex:I.chunkIndex,totalChunk:oe,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:dt},Ii=>{if(!Ii.cancel)if(I.retryCount<this.asyncSettings.retryCount)setTimeout(()=>{this.retryRequest(Ee,I,j)},this.asyncSettings.retryAfterDelay);else{if(!(0,i.le)(Ee)){const un=Ee.querySelector("."+Zn)?Ee.querySelector("."+Zn):Ee.querySelector("."+_r);(0,i.le)(un)||(un.classList.add(hn),un.classList.remove(Zn,_r)),this.updateProgressBarClasses(Ee,mr),this.removeProgressbar(Ee,"failure"),Ee.querySelector(".e-icons").classList.remove(gr);const Xs=Ee.querySelector("."+rs)?Ee.querySelector("."+rs):Ee.querySelector("."+Yn);Xs.classList.remove(rs),(0,i.le)(Ee.querySelector("."+Zn))||(0,i.og)(Ee.querySelector("."+Zn)),I.start>0?(Xs.classList.add(Ln),Xs.setAttribute("title",this.localizedTexts("delete"))):(Xs.classList.add(Yn),Xs.setAttribute("title",this.localizedTexts("remove")))}I.retryCount=0;const Yi=I.file,Ss=this.localizedTexts("uploadFailedMessage"),Ps={e:S,response:dt,operation:"upload",file:this.updateStatus(Yi,Ss,"0",!1),statusText:Ss};this.trigger("failure",Ps,un=>{this.updateStatus(Yi,un.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0)})}})}retryRequest(S,I,j){(0,i.le)(this.template)&&((0,i.le)(j)||!j)&&S&&this.updateProgressBarClasses(S,mr),I.retryCount+=1,this.sendRequest(I.file,I)}checkPausePlayAction(S){const I=S.target,oe=this.fileList.indexOf(S.target.parentElement),dt=this.getCurrentMetaData(this.filesData[oe]);I.classList.contains(Zn)?this.pauseUpload(dt,S):I.classList.contains(_r)?this.resumeUpload(dt,S):I.classList.contains(hn)&&(dt.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(dt,!1):this.retryUpload(dt,!0))}retryUpload(S,I){I?(S.end=S.end+this.asyncSettings.chunkSize,S.start=S.start+this.asyncSettings.chunkSize,this.sendRequest(S.file,S)):(S.file.statusCode="1",S.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(S.file)),this.getLiElement(S.file).classList.add(Ur)}chunkUploadInProgress(S,I,j){if("4"===I.file.statusCode)return;"4"!==I.file.statusCode&&"5"!==I.file.statusCode&&(I.file.statusCode="3",I.file.status=this.localizedTexts("inProgress")),this.updateMetaData(I);const oe=this.getLiElement(I.file);if((0,i.le)(oe))return;const Ee=oe.querySelector("."+hn);if((0,i.le)(Ee)||(Ee.classList.add(Zn),Ee.setAttribute("title",this.localizedTexts("pause")),Ee.classList.remove(hn)),!(0,i.le)(oe)){if(!(oe.querySelectorAll("."+ln).length>0)){const dt=oe.querySelector("."+Es);(0,i.le)(this.template)&&(dt.classList.add(gr),dt.classList.remove(mr),this.createProgressBar(oe),this.updateProgressBarClasses(oe,gr));const Bt=oe.querySelector("."+Yn)?oe.querySelector("."+Yn):oe.querySelector("."+Ln);(0,i.le)(Bt)||(Bt.classList.add(rs),Bt.setAttribute("title",this.localizedTexts("abort")),Bt.classList.remove(Yn))}if(!isNaN(Math.round(S.loaded/S.total*100))&&(0,i.le)(this.template)&&"4"!==I.file.statusCode){let dt,Bt=Math.ceil(I.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&Bt&&(dt=Math.round(I.chunkIndex/Bt*100),this.changeProgressValue(oe,dt.toString()+"%"))}0===I.chunkIndex&&this.checkActionButtonStatus()}if((0,i.le)(oe.querySelector("."+Zn))&&(0,i.le)(this.template)&&(0,i.le)(oe.querySelector("."+Ln))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");const dt=oe.querySelector("."+rs);dt.parentElement.insertBefore(this.pauseButton,dt),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",Bt=>{this.checkPausePlayAction(Bt)},!1)}}bytesToSize(S){let I=-1;if(!S)return"0.0 KB";do{S/=1024,I++}while(S>99);return I>=2&&(S*=1024,I=1),Math.max(S,0).toFixed(1)+" "+["KB","MB"][I]}sortFileList(S){const I=S=S||this.sortFilesList,j=[];for(let dt=0;dt<I.length;dt++)j.push(I[dt].name);const oe=j.sort(),Ee=[];for(const dt of oe)for(let Bt=0;Bt<I.length;Bt++)dt===I[Bt].name&&Ee.push(I[Bt]);return Ee}destroy(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();const S=["aria-label","directory","webkitdirectory","tabindex"];for(const I of S)this.element.removeAttribute(I);(0,i.le)(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),(0,i.og)(this.uploadWrapper)),this.uploadWrapper=null,super.destroy()}upload(S,I){if(S=S||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||I))this.sequenceUpload(S);else{const j=this.getFilesInArray(S);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},Ee=>{Ee.cancel||this.uploadFiles(j,I)})}}getFilesInArray(S){let I=[];return S instanceof Array?I=S:I.push(S),I}serverReadFileBase64(S,I,j){return new Promise((oe,Ee)=>{const dt=this.fileStreams[S].rawFile;try{const Bt=new FileReader;Bt.onload=(Ii=Bt,()=>{try{const Yi=Ii.result,Ss=Yi?Yi.split(";base64,")[1]:null;oe(Ss)}catch(Yi){Ee(Yi)}}),Bt.readAsDataURL(dt.slice(I,I+j))}catch(Bt){Ee(Bt)}var Ii})}uploadFileCount(S){const I=this.filesData;return I&&0!==I.length?I.length:-1}getFileRead(S,I){const j=this.filesData;if(!j||0===j.length)return-1;const oe=j[S],Ee=this.newFileRef++;return this.fileStreams[Ee]=oe,Ee}getFileInfo(S,I){const j=this.filesData;return j&&0!==j.length&&j[S]?this.filesData[S]:null}uploadFiles(S,I){let j=[];if(""!==this.asyncSettings.saveUrl&&!(0,i.le)(this.asyncSettings.saveUrl)){if(!I||(0,i.le)(I))if(this.multiple)j=this.filterfileList(S);else{const oe=[];oe.push(S[0]),j=this.filterfileList(oe)}else j=S;for(let oe=0;oe<j.length;oe++)this.uploadFilesRequest(j,oe,I)}}uploadFilesRequest(S,I,j){const oe=this.checkChunkUpload(),Ee=new i.tk(this.asyncSettings.saveUrl,"POST",!0,null);Ee.emitError=!1;const dt={fileData:S[I],customFormData:[],cancel:!1},Bt=new FormData;if(Ee.beforeSend=Ii=>{dt.currentRequest=Ee.httpRequest,this.trigger("uploading",dt,Yi=>{Yi.cancel&&this.eventCancelByArgs(Ii,Yi,S[I]),this.updateFormData(Bt,Yi.customFormData)})},"1"===S[I].statusCode){const Ii=this.element.getAttribute("name");Bt.append(Ii,S[I].rawFile,S[I].name),oe&&S[I].size>this.asyncSettings.chunkSize?this.chunkUpload(S[I],j,I):(Ee.onLoad=Yi=>(dt.cancel||this.uploadComplete(Yi,S[I],j),{}),Ee.onUploadProgress=Yi=>(dt.cancel||this.uploadInProgress(Yi,S[I],j,Ee),{}),Ee.onError=Yi=>(this.uploadFailed(Yi,S[I]),{}),Ee.send(Bt))}}spliceFiles(S){const I=this.fileList[S],j=this.getFilesData(),oe=+I.getAttribute("data-files-count");let Ee=0;for(let Bt=0;Bt<S;Bt++)Ee+=+this.fileList[Bt].getAttribute("data-files-count");for(let Bt=Ee+oe-1;Bt>=Ee;Bt--)j.splice(Bt,1)}remove(S,I,j,oe,Ee){(0,i.le)(oe)&&(oe=!0);const dt={event:Ee,cancel:!1,filesData:[],customFormData:[],postRawFile:oe,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},Ii=>{if(!Ii.cancel)if(this.isFormUpload())dt.filesData=S,this.trigger("removing",dt,Yi=>{if(!Yi.cancel){const Ss=this.getFilesInArray(S);let un,Ps=!1;for(const Xs of Ss)if(Ps||(un=this.fileList.indexOf(Xs.list)),un>-1){const Jn=(0,i.le)(Xs.input)?null:Xs.input;Jn&&(0,i.og)(Jn),this.spliceFiles(un),(0,i.og)(this.fileList[un]),this.fileList.splice(un,1),Ps=!0,un=-1}}});else if(this.isForm&&((0,i.le)(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))dt.filesData=this.getFilesData(),this.trigger("removing",dt,Yi=>{Yi.cancel||this.clearAll()});else{let Yi=[];(S=(0,i.le)(S)?this.filesData:S)instanceof Array?Yi=S:Yi.push(S),dt.filesData=Yi;const Ss=this.asyncSettings.removeUrl,Ps=!(""===Ss||(0,i.le)(Ss));for(const un of Yi){const Xs=this.uploadedFilesData.indexOf(un);("2"===un.statusCode||"4"===un.statusCode||"0"===un.statusCode&&-1!==Xs)&&Ps?this.removeUploadedFile(un,dt,j,I):j?this.removeFilesData(un,I):this.trigger("removing",dt,Jn=>{Jn.cancel||this.removeFilesData(un,I)}),Ee&&!Ee.target.classList.contains(Yn)&&this.checkActionComplete(!1)}}})}clearAll(){if((0,i.le)(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.trigger("clearing",{cancel:!1,filesData:this.filesData},I=>{I.cancel||(this.clearData(),this.actionCompleteCount=0,this.count=-1)})}getFilesData(S){return(0,i.le)(S)?this.filesData:this.getSelectedFiles(S)}pause(S,I){const j=this.getFilesInArray(S=S||this.filesData);this.pauseUploading(j,I)}pauseUploading(S,I){const j=this.getFiles(S);for(let oe=0;oe<j.length;oe++)"3"===j[oe].statusCode&&this.pauseUpload(this.getCurrentMetaData(j[oe],null),null,I)}getFiles(S){let I=[];return(0,i.le)(S)||S instanceof Array?I=S:I.push(S),I}resume(S,I){const j=this.getFilesInArray(S=S||this.filesData);this.resumeFiles(j,I)}resumeFiles(S,I){const j=this.getFiles(S);for(let oe=0;oe<j.length;oe++)"4"===j[oe].statusCode&&this.resumeUpload(this.getCurrentMetaData(j[oe],null),null,I)}retry(S,I,j){const oe=this.getFilesInArray(S=S||this.filesData);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(oe,I,j)}retryFailedFiles(S,I,j){const oe=this.getFiles(S);for(let Ee=0;Ee<oe.length;Ee++)if("5"===oe[Ee].statusCode||"0"===oe[Ee].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(oe[Ee],null),I);else{let dt;j||(dt=this.fileList[this.filesData.indexOf(oe[Ee])]),this.reloadcanceledFile(null,oe[Ee],dt,j)}}cancel(S){const I=this.getFilesInArray(S=S||this.filesData);this.cancelUpload(I)}cancelUpload(S){const I=this.getFiles(S);if(this.asyncSettings.chunkSize>0){for(let j=0;j<I.length;j++)if("3"===I[j].statusCode){const oe=this.getCurrentMetaData(I[j],null);oe.file.statusCode="5",oe.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(oe),this.showHideUploadSpinner(I[j])}}else for(let j=0;j<I.length;j++)"3"===I[j].statusCode&&(I[j].statusCode="5",I[j].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(I[j]))}showHideUploadSpinner(S){const I=this.getLiElement(S);if(!(0,i.le)(I)&&(0,i.le)(this.template)){const j=I.querySelector("."+rs);(0,u.rj)({target:j,width:"20px"}),(0,u.yh)(j)}}};Re([(0,i.Zz)({saveUrl:"",removeUrl:""},sr)],zn.prototype,"asyncSettings",void 0),Re([(0,i.Z9)(!1)],zn.prototype,"sequentialUpload",void 0),Re([(0,i.Z9)({})],zn.prototype,"htmlAttributes",void 0),Re([(0,i.Z9)("")],zn.prototype,"cssClass",void 0),Re([(0,i.Z9)(!0)],zn.prototype,"enabled",void 0),Re([(0,i.Z9)(null)],zn.prototype,"template",void 0),Re([(0,i.Z9)(!0)],zn.prototype,"multiple",void 0),Re([(0,i.Z9)(!0)],zn.prototype,"autoUpload",void 0),Re([(0,i.Zz)({},Xn)],zn.prototype,"buttons",void 0),Re([(0,i.Z9)("")],zn.prototype,"allowedExtensions",void 0),Re([(0,i.Z9)(0)],zn.prototype,"minFileSize",void 0),Re([(0,i.Z9)(3e7)],zn.prototype,"maxFileSize",void 0),Re([(0,i.Z9)(null)],zn.prototype,"dropArea",void 0),Re([(0,i.FE)([{}],Io)],zn.prototype,"files",void 0),Re([(0,i.Z9)(!0)],zn.prototype,"showFileList",void 0),Re([(0,i.Z9)(!1)],zn.prototype,"directoryUpload",void 0),Re([(0,i.Z9)("Default")],zn.prototype,"dropEffect",void 0),Re([(0,i.ju)()],zn.prototype,"created",void 0),Re([(0,i.ju)()],zn.prototype,"actionComplete",void 0),Re([(0,i.ju)()],zn.prototype,"rendering",void 0),Re([(0,i.ju)()],zn.prototype,"beforeUpload",void 0),Re([(0,i.ju)()],zn.prototype,"fileListRendering",void 0),Re([(0,i.ju)()],zn.prototype,"selected",void 0),Re([(0,i.ju)()],zn.prototype,"uploading",void 0),Re([(0,i.ju)()],zn.prototype,"success",void 0),Re([(0,i.ju)()],zn.prototype,"failure",void 0),Re([(0,i.ju)()],zn.prototype,"removing",void 0),Re([(0,i.ju)()],zn.prototype,"beforeRemove",void 0),Re([(0,i.ju)()],zn.prototype,"clearing",void 0),Re([(0,i.ju)()],zn.prototype,"progress",void 0),Re([(0,i.ju)()],zn.prototype,"change",void 0),Re([(0,i.ju)()],zn.prototype,"chunkSuccess",void 0),Re([(0,i.ju)()],zn.prototype,"chunkFailure",void 0),Re([(0,i.ju)()],zn.prototype,"chunkUploading",void 0),Re([(0,i.ju)()],zn.prototype,"canceling",void 0),Re([(0,i.ju)()],zn.prototype,"pausing",void 0),Re([(0,i.ju)()],zn.prototype,"resuming",void 0),zn=Re([i.Zl],zn);var Er=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};const to="e-apply",Eo="e-cancel",Vs="e-current",bo="e-ctrl-btn",yr="e-switch-ctrl-btn",Fo="e-disabled",oo="e-value-switch-btn",ol="e-handler",Bs="e-hide-hex-value",uo="e-hide-opacity",$s="e-hide-switchable-value",mn="e-hide-value",tr="e-hide-valueswitcher",vr="e-hsv-color",Qr="e-hsv-container",zs="e-selected-value",ur="e-mode-switch-btn",ir="e-nocolor-item",qs="e-opacity-value",$r="e-palette",Ir="e-color-palette",Pn="e-color-picker",ks="e-preview-container",xi="e-previous",M="e-show-value",$="e-selected",fe="e-split-preview",Ce="e-tile",pt_default=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"];let Mt=class extends i.wA{constructor(S,I){super(S,I)}preRender(){const S=this.element;this.formElement=(0,i.oq)(this.element,"form"),this.formElement&&i.bi.add(this.formElement,"reset",this.formResetHandler,this),this.l10n=new i.E7("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),S.getAttribute("ejs-for")&&!S.getAttribute("name")&&S.setAttribute("name",S.id)}render(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||(0,i.cn)([this.container.parentElement],uo),this.renderComplete()}initWrapper(){const S=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(S,this.element),S.appendChild(this.element),(0,i.Y4)(this.element,{tabindex:"-1",spellcheck:"false"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);let I=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(I="");const j=I.slice(0,7);(0,i.le)(this.initialInputValue)&&(this.initialInputValue=j),this.element.value=j,this.setProperties(this.enableOpacity?{value:I}:{value:j},!0),this.enableRtl&&S.classList.add("e-rtl"),this.cssClass&&(0,i.cn)([S],this.cssClass.split(" ")),this.tileRipple=(0,i.qx)(this.container,{selector:"."+Ce}),this.ctrlBtnRipple=(0,i.qx)(this.container,{selector:".e-btn"})}getWrapper(){return this.element.parentElement}createWidget(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),i.AR.isDevice&&this.refreshPopupPos()}createSplitBtn(){const S=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(S),this.splitBtn=new Ue.aW({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:()=>{this.trigger("change",{currentValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},previousValue:{hex:null,rgba:null},value:this.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(S);const I=this.createElement("span",{className:fe});(0,i.Ys)(".e-selected-color",S).appendChild(I),I.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));const j=this.getPopupEle();if((0,i.cn)([j],"e-colorpicker-popup"),this.cssClass&&(0,i.cn)([j],this.cssClass.split(" ")),i.AR.isDevice){const oe=this.getPopupInst();oe.relateTo=document.body,oe.position={X:"center",Y:"center"},oe.targetType="container",oe.collision={X:"fit",Y:"fit"},oe.offsetY=4,j.style.zIndex=(0,u.TE)(this.splitBtn.element).toString()}this.bindCallBackEvent()}onOpen(){this.trigger("open",{element:this.container})}getPopupInst(){return(0,i.s8)(this.getPopupEle(),u.GI)}bindCallBackEvent(){this.splitBtn.beforeOpen=S=>{const I=new Ue.BH;return this.trigger("beforeOpen",S,j=>{if(!j.cancel){const oe=this.getPopupEle();oe.style.top=(0,i.Ac)(0+pageYOffset),oe.style.left=(0,i.Ac)(0+pageXOffset),oe.style.display="block",this.createWidget(),oe.style.display="",i.AR.isDevice&&(this.modal=this.createElement("div"),this.modal.className="e-"+this.getModuleName()+" e-modal",this.modal.style.display="none",document.body.insertBefore(this.modal,oe),document.body.className+=" e-colorpicker-overflow",this.modal.style.display="block",this.modal.style.zIndex=(Number(oe.style.zIndex)-1).toString())}S.cancel=j.cancel,I.resolve(j)}),I},this.splitBtn.beforeClose=S=>{const I=new Ue.BH;return(0,i.le)(S.event)?I.resolve(S):this.trigger("beforeClose",{element:this.container,event:S.event,cancel:!1},oe=>{i.AR.isDevice&&S.event.target===this.modal&&(oe.cancel=!0),oe.cancel||this.onPopupClose(),S.cancel=oe.cancel,I.resolve(oe)}),I}}onPopupClose(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",(0,i.Ys)("."+fe,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",(0,i.IV)([this.container],[Pn,Ir]),i.AR.isDevice&&this.modal&&((0,i.IV)([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)}createPalette(){if((0,i.s1)(this.container,[Ir],[Pn]),this.presetColors){const I=this.createElement("div",{className:"e-custom-palette"});this.appendElement(I);const j=Object.keys(this.presetColors);if(1===j.length)this.appendPalette(this.presetColors[j[0]],j[0],I);else for(let oe=0,Ee=j.length;oe<Ee;oe++)this.appendPalette(this.presetColors[j[oe]],j[oe],I);(0,i.td)(".e-row",I).length>10&&(0,i.cn)([I],"e-palette-group")}else this.appendPalette(pt_default,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();const S=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=(0,i.Ac)(this.container.children[0].offsetWidth+S+S),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)}firstPaletteFocus(){(0,i.Ys)("."+$,this.container.children[0])||(0,i.td)("."+$r,this.container)[0].focus()}appendPalette(S,I,j){const oe=this.createElement("div",{className:$r,attrs:{tabindex:"0"}});let Ee,dt,Bt;j?j.appendChild(oe):this.appendElement(oe);for(let Ii=0,Yi=S.length;Ii<Yi;Ii++)(0===Ii||Ii%this.columns==0)&&(Ee=this.createElement("div",{className:"e-row",attrs:{role:"presentation"}}),oe.appendChild(Ee)),Bt=this.roundValue(S[Ii]).toLowerCase(),dt=this.createElement("span",{className:Ce,attrs:{role:"gridcell","aria-label":Bt,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:dt,presetName:I,value:S[Ii]}),Ee.appendChild(dt),this.value===Bt&&(this.addTileSelection(dt),oe.focus()),dt.style.backgroundColor=this.convertToRgbString(this.hexToRgb(Bt))}setNoColor(){const S=this.container.querySelector(".e-row").children[0];S.classList.add(ir),this.value||(S.classList.add($),(0,i.oq)(S,"."+$r).focus()),["aria-selected","aria-label"].forEach(I=>{S.removeAttribute(I)}),S.style.backgroundColor=""}appendElement(S,I=0){const j=this.container.children[I];j?this.container.insertBefore(S,j):this.container.appendChild(S)}addTileSelection(S){S.classList.add($),S.setAttribute("aria-selected","true")}createPicker(){(0,i.s1)(this.container,[Pn],[Ir]);const S=this.createElement("div",{className:Qr});this.appendElement(S),S.appendChild(this.createElement("div",{className:vr}));const I=this.createElement("span",{className:ol,attrs:{tabindex:"0"}});S.appendChild(I),null===this.value&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()}setHsvContainerBg(S=this.hsv[0]){this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(S,100,100,1))}getHsvContainer(){return(0,i.Ys)("."+Qr,this.container)}setHandlerPosition(){const S=this.getDragHandler(),I=(0,i.Ys)("."+vr,this.container);S.style.left=(0,i.Ac)(this.enableRtl?I.offsetWidth*Math.abs(100-this.hsv[1])/100:I.offsetWidth*this.hsv[1]/100),S.style.top=(0,i.Ac)(I.offsetHeight*(100-this.hsv[2])/100)}createSlider(){const S=this.createElement("div",{className:"e-slider-preview"});this.appendElement(S,1),this.createPreview(S);const I=this.createElement("div",{className:"e-colorpicker-slider"});S.insertBefore(I,S.children[0]);let j=this.createElement("div",{className:"e-hue-slider"});I.appendChild(j),this.hueSlider=new Xi({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(j),this.enableOpacity&&(j=this.createElement("div",{className:"e-opacity-slider"}),I.appendChild(j),this.createOpacitySlider(j))}createOpacitySlider(S){this.opacitySlider=new Xi({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(S);const I=this.createElement("div",{className:"e-opacity-empty-track"});S.appendChild(I),this.updateOpacitySliderBg()}updateOpacitySliderBg(){const S=this.enableRtl?"to left":"to right",I=(0,i.Ys)(".e-opacity-empty-track",this.opacitySlider.element);I&&(I.style.background="linear-gradient("+S+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")}hueChange(S){this.hsv[0]=S.value,this.setHsvContainerBg(),this.convertToOtherFormat()}opacityChange(S){const I=S.value,j=this.rgbToHex(this.rgb);this.hsv[3]=I/100,this.rgb[3]=I/100;const oe=this.rgbToHex(this.rgb);this.updateOpacityInput(I);const Ee=this.convertToRgbString(this.rgb);this.updatePreview(Ee),this.triggerEvent(oe,j,Ee)}updateOpacityInput(S){if(this.enableOpacity&&!this.getWrapper().classList.contains(mn)){const I=(0,i.s8)((0,i.Ys)("."+qs,this.container),z);I.value=S,I.dataBind()}}createPreview(S){const I=this.createElement("div",{className:ks});S.appendChild(I);let j=this.createElement("span",{className:"e-preview "+Vs});I.appendChild(j);const oe=this.convertToRgbString(this.rgb);j.style.backgroundColor=oe,j=this.createElement("span",{className:"e-preview "+xi}),I.appendChild(j),j.style.backgroundColor=oe}isPicker(){return!this.container.classList.contains(Ir)}getPopupEle(){return this.container.parentElement}createNumericInput(S,I,j,oe){const Ee=new z({value:I,placeholder:j,min:0,max:oe,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:dt=>{dt.event&&this.inputHandler(dt.event)}});Ee.createElement=this.createElement,Ee.appendTo(S)}createInput(){const S=this.isPicker(),I=this.getWrapper();if(S&&!I.classList.contains(mn)||!S&&I.classList.contains(M)){const j=this.createElement("div",{className:zs});this.appendElement(j,S?2:1);const oe=this.createElement("div",{className:"e-input-container"});if(j.appendChild(oe),I.classList.contains(tr)||this.appendValueSwitchBtn(j),!I.classList.contains(Bs)){const Ee=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false"}});oe.appendChild(Ee),$e.createInput({element:Ee,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),$e.setValue(this.value.slice(0,7),Ee),Ee.addEventListener("input",this.inputHandler.bind(this))}if(!I.classList.contains($s)){let Ee,dt;this.isRgb?(Ee="RGB",dt=this.rgb):(Ee="HSV",dt=this.hsv);const Bt=["rh","gs","bv"];for(let Ii=0;Ii<3;Ii++)this.createNumericInput(oe.appendChild(this.createElement("input",{className:"e-"+Bt[Ii]+"-value"})),dt[Ii],Ee[Ii],255);this.enableOpacity&&this.appendOpacityValue(oe)}}}appendOpacityValue(S){this.createNumericInput(S.appendChild(this.createElement("input",{className:qs})),100*this.rgb[3],"A",100)}appendValueSwitchBtn(S){const I=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+oo});S.appendChild(I),this.isPicker()&&!this.getWrapper().classList.contains($s)&&I.addEventListener("click",this.formatSwitchHandler.bind(this))}createCtrlBtn(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);const S=this.createElement("div",{className:yr});if(this.container.appendChild(S),this.showButtons){const I=this.createElement("div",{className:bo});S.appendChild(I);const j=this.l10n.getConstant("Apply");I.appendChild(this.createElement("button",{innerHTML:j,className:"e-btn e-css e-flat e-primary e-small "+to,attrs:{title:j}}));const oe=this.l10n.getConstant("Cancel");I.appendChild(this.createElement("button",{innerHTML:oe,className:"e-btn e-css e-flat e-small "+Eo,attrs:{title:oe}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}}appendModeSwitchBtn(){const S=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+ur,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});(0,i.Ys)("."+yr,this.container).insertBefore(S,(0,i.Ys)("."+bo,this.container))}createDragTooltip(){const S=new u.u({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:I=>{this.tooltipEle=I.element},animation:{open:{effect:"None"},close:{effect:"None"}}});S.createElement=this.createElement,S.appendTo(this.container),S.open(this.container),this.tooltipEle.style.zIndex=(0,u.TE)(this.tooltipEle).toString(),(0,i.Ys)(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))}getTooltipInst(){return(0,i.s8)(this.container,u.u)}setTooltipOffset(S){this.getTooltipInst().offsetY=S}toggleDisabled(S){S?this.getWrapper().classList.add(Fo):this.getWrapper().classList.remove(Fo),this.showButtons&&[].slice.call((0,i.td)(".e-btn",this.container)).forEach(I=>{S?(0,i.Y4)(I,{disabled:""}):I.removeAttribute("disabled")})}convertToRgbString(S){return S.length?4===S.length?"rgba("+S.join()+")":"rgb("+S.join()+")":""}convertToHsvString(S){return 4===S.length?"hsva("+S.join()+")":"hsv("+S.join()+")"}updateHsv(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()}convertToOtherFormat(S=!1){const I=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);const j=this.rgbToHex(this.rgb),oe=this.convertToRgbString(this.rgb);this.updatePreview(oe),this.updateInput(j),this.triggerEvent(j,I,oe,S)}updateInput(S){const I=this.getWrapper();I.classList.contains(mn)||(I.classList.contains(Bs)||$e.setValue(S.substr(0,7),(0,i.Ys)(".e-hex",this.container)),I.classList.contains($s)||this.updateValue(this.isRgb?this.rgb:this.hsv,!1))}updatePreview(S){this.enableOpacity&&this.updateOpacitySliderBg(),(0,i.Ys)(".e-tip-transparent",this.tooltipEle).style.backgroundColor=S,(0,i.Ys)("."+ks+" ."+Vs,this.container).style.backgroundColor=S,(0,i.Ys)("."+ks+" ."+xi,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))}getDragHandler(){return(0,i.Ys)("."+ol,this.container)}removeTileSelection(){[].slice.call((0,i.td)("."+$,this.container.children[0])).forEach(I=>{I.classList.remove($),I.setAttribute("aria-selected","false")})}convertRgbToNumberArray(S){return S.slice(S.indexOf("(")+1,S.indexOf(")")).split(",").map((I,j)=>3!==j?parseInt(I,10):parseFloat(I))}getValue(S,I){if(S||(S=this.value),I=I?I.toLowerCase():"hex","r"===S[0]){const j=this.convertRgbToNumberArray(S);if("hex"===I||"hexa"===I){const oe=this.rgbToHex(j);return"hex"===I?oe.slice(0,7):oe}return"hsv"===I?this.convertToHsvString(this.rgbToHsv.apply(this,j.slice(0,3))):"hsva"===I?this.convertToHsvString(this.rgbToHsv.apply(this,j)):"null"}if("h"===S[0]){const j=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(S));if("rgba"===I)return this.convertToRgbString(j);if("hex"===I||"hexa"===I){const oe=this.rgbToHex(j);return"hex"===I?oe.slice(0,7):oe}return"rgb"===I?this.convertToRgbString(j.slice(0,3)):"null"}{S=this.roundValue(S);let j=this.hexToRgb(S);return("rgb"===I||"hsv"===I)&&(j=j.slice(0,3)),"rgba"===I||"rgb"===I?this.convertToRgbString(j):"hsva"===I||"hsv"===I?this.convertToHsvString(this.rgbToHsv.apply(this,j)):"hex"===I?S.slice(0,7):"a"===I?j[3].toString():"null"}}toggle(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)}getModuleName(){return"colorpicker"}getPersistData(){return this.addOnPersist(["value"])}wireEvents(){if(this.isPicker()){const S=this.getDragHandler();i.bi.add(S,"keydown",this.pickerKeyDown,this),i.bi.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),i.bi.add((0,i.Ys)("."+xi,this.container),"click",this.previewHandler,this)}else i.bi.add(this.container,"click",this.paletteClickHandler,this),i.bi.add(this.container,"keydown",this.paletteKeyDown,this)}formResetHandler(){this.value=this.initialInputValue,(0,i.Y4)(this.element,{value:this.initialInputValue})}addCtrlSwitchEvent(){const S=(0,i.Ys)("."+yr,this.container);S&&i.bi.add(S,"click",this.btnClickHandler,this)}pickerKeyDown(S){switch(S.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,S);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,S);break;case 38:this.handlerDragPosition(2,1,S);break;case 40:this.handlerDragPosition(2,-1,S);break;case 13:{S.preventDefault();const I=this.rgbToHex(this.rgb);this.enterKeyHandler(I,S)}}}enterKeyHandler(S,I){this.triggerChangeEvent(S),this.inline||(this.closePopup(I),this.splitBtn.element.focus())}closePopup(S){this.trigger("beforeClose",{element:this.container,event:S,cancel:!1},j=>{j.cancel||(this.splitBtn.toggle(),this.onPopupClose())})}triggerChangeEvent(S){const I=S.slice(0,7);this.trigger("change",{currentValue:{hex:I,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?S:I}),this.setProperties(this.enableOpacity?{value:S}:{value:I},!0),this.element.value=I||"#000000"}handlerDragPosition(S,I,j){j.preventDefault(),this.hsv[S]+=I*(j.ctrlKey?1:3),this.hsv[S]<0&&(this.hsv[S]=0),this.updateHsv(),this.convertToOtherFormat(!0)}handlerDown(S){S.preventDefault(),"mousedown"===S.type?(this.clientX=Math.abs(S.pageX-pageXOffset),this.clientY=Math.abs(S.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(S.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(S.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),i.bi.add(document,"mousemove touchmove",this.handlerMove,this),i.bi.add(document,"mouseup touchend",this.handlerEnd,this)}handlerMove(S){let I,j;"touchmove"!==S.type&&S.preventDefault(),"mousemove"===S.type?(I=Math.abs(S.pageX-pageXOffset),j=Math.abs(S.pageY-pageYOffset)):(I=Math.abs(S.changedTouches[0].pageX-pageXOffset),j=Math.abs(S.changedTouches[0].pageY-pageYOffset)),this.setHsv(I,j);const oe=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(oe),this.tooltipEle.style.transform||(Math.abs(this.clientX-I)>8||Math.abs(this.clientY-j)>8)&&((0,i.Ys)("."+vr,this.container).style.cursor="pointer",oe.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",oe.classList.add("e-hide-handler"))}setHsv(S,I){const j=(0,i.Ys)("."+vr,this.container),oe=j.getBoundingClientRect();S=this.enableRtl?S>oe.right?0:Math.abs(S-oe.right):S>oe.left?Math.abs(S-oe.left):0,I=I>oe.top?Math.abs(I-oe.top):0,this.hsv[2]=Math.round(10*Number(100*(j.offsetHeight-Math.max(0,Math.min(j.offsetHeight,I-j.offsetTop)))/j.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(j.offsetWidth,S-j.offsetLeft))/j.offsetWidth))/10}handlerEnd(S){"touchend"!==S.type&&S.preventDefault(),i.bi.remove(document,"mousemove touchmove",this.handlerMove),i.bi.remove(document,"mouseup touchend",this.handlerEnd);const I=this.getDragHandler();(0,i.Ys)("."+vr,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",I.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(S)}btnClickHandler(S){const I=S.target;(0,i.oq)(I,"."+ur)?(S.stopPropagation(),this.switchToPalette()):(I.classList.contains(to)||I.classList.contains(Eo))&&this.ctrlBtnClick(I,S)}switchToPalette(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),(0,i.og)((0,i.Ys)(".e-slider-preview",this.container)),this.getWrapper().classList.contains(mn)||(0,i.Od)((0,i.Ys)("."+zs,this.container)),(0,i.og)(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})}refreshPopupPos(){if(!this.inline){const S=this.getPopupEle();S.style.left=(0,i.Ac)(0+pageXOffset),S.style.top=(0,i.Ac)(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}}formatSwitchHandler(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)}updateValue(S,I,j,oe){const Ee=["e-rh-value","e-gs-value","e-bv-value"];let dt;for(let Bt=0,Ii=Ee.length;Bt<Ii;Bt++)dt=(0,i.s8)((0,i.Ys)("."+Ee[Bt],this.container),z),dt.value=Math.round(S[Bt]),I&&(dt.placeholder=Ee[Bt].substr(j,1).toUpperCase(),dt.max=oe?oe[Bt]:255),dt.dataBind()}previewHandler(S){const I=S.target,j=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(I.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);const oe=this.rgbToHex(this.rgb),Ee=this.rgbToHsv.apply(this,this.rgb);Ee[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:Ee[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(Ee[0]),this.enableOpacity&&Ee[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*Ee[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=Ee,this.setHandlerPosition(),this.updateInput(oe),(0,i.Ys)("."+ks+" ."+Vs,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(oe,j,this.convertToRgbString(this.rgb))}paletteClickHandler(S){S.preventDefault();const I=S.target;if(I.classList.contains(Ce)){if(this.removeTileSelection(),this.addTileSelection(I),I.classList.contains(ir))this.noColorTile();else{const j=I.getAttribute("aria-label"),oe=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(j)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(M)&&this.updateInput(j),this.triggerEvent(j,oe,this.convertToRgbString(this.rgb))}!this.inline&&!this.showButtons&&this.closePopup(S)}else(0,i.oq)(I,"."+ur)?this.switchToPicker():I.classList.contains(to)||I.classList.contains(Eo)?this.ctrlBtnClick(I,S):this.getWrapper().classList.contains(M)&&(0,i.oq)(I,"."+oo)&&this.formatSwitchHandler()}noColorTile(S=!1){const I=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",I,"",S)}switchToPicker(){const S=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call((0,i.td)("."+$r,this.container)).forEach(j=>{(0,i.og)(j)}),S.classList.contains(M)&&(0,i.og)((0,i.Ys)("."+zs,this.container)),this.container.style.width="";const I=(0,i.Ys)(".e-custom-palette",this.container);this.presetColors&&(0,i.Od)(I),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})}ctrlBtnClick(S,I){if(S.classList.contains(to)){const j=this.rgbToHex(this.rgb);this.triggerChangeEvent(j)}this.inline||(this.closePopup(I),this.splitBtn.element.focus())}paletteKeyDown(S){const I=S.target;if(!I.classList.contains($r))return;let j,oe;const Ee=[].slice.call((0,i.td)("."+Ce,I)),dt=Ee.filter(Bt=>Bt.classList.contains("e-selected")).pop();switch(!S.altKey&&S.keyCode){case 39:S.preventDefault(),j=dt?Ee[this.tilePosition(Ee,dt,this.enableRtl?-1:1)]:Ee[this.enableRtl?Ee.length-1:0],this.keySelectionChanges(j);break;case 37:S.preventDefault(),j=dt?Ee[this.tilePosition(Ee,dt,this.enableRtl?1:-1)]:Ee[this.enableRtl?0:Ee.length-1],this.keySelectionChanges(j);break;case 38:S.preventDefault(),oe=dt?this.tilePosition(Ee,dt,-this.columns):0,j=Ee[oe]?Ee[oe]:Ee[oe-this.columns],this.keySelectionChanges(j);break;case 40:S.preventDefault(),oe=dt?this.tilePosition(Ee,dt,this.columns):Ee.length-1,Ee[oe]||(oe%=Ee.length,oe+=Ee[Ee.length-1].parentElement.childElementCount),j=Ee[oe],this.keySelectionChanges(j);break;case 13:if(S.preventDefault(),dt){const Bt=dt.getAttribute("aria-label");this.enterKeyHandler(Bt||"",S)}}}keySelectionChanges(S){if(this.removeTileSelection(),this.addTileSelection(S),S.classList.contains(ir))this.noColorTile(!0);else{const I=S.getAttribute("aria-label"),j=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(I),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(M)&&this.updateInput(I),this.triggerEvent(I,j,this.convertToRgbString(this.rgb),!0)}}tilePosition(S,I,j){const oe=(S=Array.prototype.slice.call(S)).length,Ee=this.columns-S[oe-1].parentElement.childElementCount;let dt=S.indexOf(I);return dt+=j,dt<0?dt+=oe+Ee:dt%=oe+Ee,dt}inputHandler(S){const I=S.target;if(!I.value.length)return;let j,oe;switch((0,i.Ys)(".e-float-text",I.parentElement).textContent){case"HEX":{let dt="";if(("#"===I.value[0]&&5!==I.value.length||"#"!==I.value[0]&&4!==I.value.length)&&(dt=this.roundValue(I.value)),9!==dt.length)return;oe=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(dt+dt.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),oe,I.value);break}case"R":this.rgb[0]!==Number(I.value)&&(oe=this.rgbToHex(this.rgb),this.rgb[0]=Number(I.value),j=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(j,oe));break;case"G":this.rgb[1]!==Number(I.value)&&(oe=this.rgbToHex(this.rgb),this.rgb[1]=Number(I.value),j=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(j,oe));break;case"B":this.rgb[2]!==Number(I.value)&&(oe=this.rgbToHex(this.rgb),this.rgb[2]=Number(I.value),j=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(j,oe));break;case"H":this.hueSlider.value=Number(I.value);break;case"S":this.hsv[1]!==Number(I.value)&&(this.hsv[1]=Number(I.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(I.value)&&(this.hsv[2]=Number(I.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(I.value)}}inputValueChange(S,I,j){S[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:S[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(S[0])),this.hsv=S;const oe=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(j||oe);const Ee=this.convertToRgbString(this.rgb);this.updatePreview(Ee),this.triggerEvent(oe,I,Ee)}triggerEvent(S,I,j,oe=!1){const Ee=S.slice(0,7);this.showButtons||oe?this.trigger("select",{currentValue:{hex:Ee,rgba:j},previousValue:{hex:I.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(I))}}):(this.trigger("change",{currentValue:{hex:Ee,rgba:j},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:S}),this.setProperties(this.enableOpacity?{value:S}:{value:Ee},!0),this.element.value=Ee||"#000000")}destroy(){const S=this.getWrapper();super.destroy(),["tabindex","spellcheck"].forEach(I=>{this.element.removeAttribute(I)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&(0,i.og)(this.element.nextElementSibling),S&&(S.parentElement.insertBefore(this.element,S),(0,i.og)(S)),this.container=null,this.formElement&&i.bi.remove(this.formElement,"reset",this.formResetHandler)}destroyOtherComp(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;const S=this.getTooltipInst();S.close(),S.destroy(),this.tooltipEle=null}}isPopupOpen(){return this.getPopupEle().classList.contains("e-popup-open")}unWireEvents(){if(this.isPicker()){const S=this.getDragHandler();i.bi.remove(S,"keydown",this.pickerKeyDown),i.bi.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&i.bi.remove((0,i.Ys)("."+yr,this.container),"click",this.btnClickHandler),i.bi.remove((0,i.Ys)("."+xi,this.container),"click",this.previewHandler)}else i.bi.remove(this.container,"click",this.paletteClickHandler),i.bi.remove(this.container,"keydown",this.paletteKeyDown)}roundValue(S){if(!S)return"";"#"!==S[0]&&(S="#"+S);let I=S.length;if(4===I&&(S+="f",I=5),5===I){let j="";for(let oe=1,Ee=S.length;oe<Ee;oe++)j+=S.charAt(oe)+S.charAt(oe);S="#"+j,I=9}return 7===I&&(S+="ff"),S}hexToRgb(S){if(!S)return[];9!==(S=S.trim()).length&&(S=this.roundValue(S));const I=Number((parseInt(S.slice(-2),16)/255).toFixed(2));S=S.slice(1,7);const j=parseInt(S,16),oe=[];return oe.push(j>>16&255),oe.push(j>>8&255),oe.push(255&j),oe.push(I),oe}rgbToHsv(S,I,j,oe){if(this.rgb&&!this.rgb.length)return[];S/=255,I/=255,j/=255;const Ee=Math.max(S,I,j),dt=Math.min(S,I,j);let Bt;const Ii=Ee,Yi=Ee-dt,Ss=0===Ee?0:Yi/Ee;if(Ee===dt)Bt=0;else{switch(Ee){case S:Bt=(I-j)/Yi+(I<j?6:0);break;case I:Bt=(j-S)/Yi+2;break;case j:Bt=(S-I)/Yi+4}Bt/=6}const Ps=[Math.round(360*Bt),Math.round(1e3*Ss)/10,Math.round(1e3*Ii)/10];return(0,i.le)(oe)||Ps.push(oe),Ps}hsvToRgb(S,I,j,oe){let Ee,dt,Bt;if(j/=100,0==(I/=100))return Ee=dt=Bt=j,[Math.round(255*Ee),Math.round(255*dt),Math.round(255*Bt),oe];S/=60;const Ii=Math.floor(S),Yi=S-Ii,Ss=j*(1-I),Ps=j*(1-I*Yi),un=j*(1-I*(1-Yi));switch(Ii){case 0:Ee=j,dt=un,Bt=Ss;break;case 1:Ee=Ps,dt=j,Bt=Ss;break;case 2:Ee=Ss,dt=j,Bt=un;break;case 3:Ee=Ss,dt=Ps,Bt=j;break;case 4:Ee=un,dt=Ss,Bt=j;break;default:Ee=j,dt=Ss,Bt=Ps}const Xs=[Math.round(255*Ee),Math.round(255*dt),Math.round(255*Bt)];return(0,i.le)(oe)||Xs.push(oe),Xs}rgbToHex(S){return S.length?"#"+this.hex(S[0])+this.hex(S[1])+this.hex(S[2])+((0,i.le)(S[3])?"":0!==S[3]?(Math.round(255*S[3])+65536).toString(16).substr(-2):"00"):""}hex(S){return("0"+S.toString(16)).slice(-2)}changeModeSwitcherProp(S){const I=(0,i.Ys)("."+yr,this.container);S?I?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):I&&(this.showButtons?(0,i.og)((0,i.Ys)("."+ur,I)):(0,i.Od)(I))}changeShowBtnProps(S){const I=(0,i.Ys)("."+yr,this.container);S?(I&&(0,i.Od)(I),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?(0,i.og)((0,i.Ys)("."+bo,I)):(0,i.Od)(I)}changeValueProp(S){if(this.isPicker())this.rgb=this.hexToRgb(S),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),(0,i.og)((0,i.oq)(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(S),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();const I=this.container.querySelector('span[aria-label="'+this.roundValue(S)+'"]');I&&this.addTileSelection(I)}}setInputEleProps(){(0,i.Od)((0,i.Ys)("."+zs,this.container)),this.createInput()}changeDisabledProp(S){this.isPicker()&&(this.hueSlider.enabled=!S,this.opacitySlider.enabled=!S,this.setInputEleProps()),S?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())}changeCssClassProps(S,I){const j=this.getWrapper(),oe=this.getPopupEle();I&&(0,i.IV)([j,oe],I.split(" ")),S&&(0,i.cn)([j,oe],S.split(" "))}changeRtlProps(S){S?(0,i.cn)([this.getWrapper()],"e-rtl"):(0,i.IV)([this.getWrapper()],"e-rtl")}changePaletteProps(){(0,i.og)(this.container.children[0]),this.container.style.width="",this.createPalette()}changeOpacityProps(S){const I=this.getWrapper();S?((0,i.IV)([this.container.parentElement],uo),this.createOpacitySlider((0,i.Ys)(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!I.classList.contains(mn)&&!I.classList.contains($s)&&this.appendOpacityValue((0,i.Ys)(".e-input-container",this.container))):((0,i.cn)([this.container.parentElement],uo),this.opacitySlider.destroy(),(0,i.Od)(this.opacitySlider.element),this.opacitySlider=null,!I.classList.contains(mn)&&!I.classList.contains($s)&&(0,i.Od)((0,i.Ys)("."+qs,this.container).parentElement))}onPropertyChanged(S,I){if(!(0,i.le)(S.value)){const j=this.roundValue(S.value);if(9===j.length){this.element.value=this.roundValue(j).slice(0,7);const oe=this.splitBtn&&(0,i.Ys)("."+fe,this.splitBtn.element);oe&&(oe.style.backgroundColor=this.convertToRgbString(this.hexToRgb(S.value)))}else this.value=I.value}if(!this.inline&&(0,i.le)(S.inline)&&(this.splitBtn.setProperties((0,Ue.PD)(S,["disabled","enableRtl"])),!this.isPopupOpen()))return this.changeCssClassProps(S.cssClass,I.cssClass),void this.changeRtlProps(S.enableRtl);for(const j of Object.keys(S))switch(j){case"inline":S.inline?(this.getWrapper().appendChild(this.container),this.splitBtn.destroy(),(0,i.og)(this.element.nextElementSibling),this.container.children.length||this.createWidget()):(this.destroyOtherComp(),this.unWireEvents(),this.container.innerHTML="",this.createSplitBtn());break;case"cssClass":{this.changeCssClassProps(S.cssClass,I.cssClass);let oe=S.cssClass.split(" ").concat(I.cssClass.split(" "));oe=oe.reduce((dt,Bt)=>(dt.indexOf(Bt)<0&&dt.push(Bt),dt),[]);let Ee=0;oe.forEach(dt=>{0===Ee&&(dt===mn||dt===tr||dt===M||dt===Bs||dt===$s)&&((0,i.Ys)("."+zs,this.container)&&(0,i.Od)((0,i.Ys)("."+zs,this.container)),this.createInput(),Ee++)});break}case"enableRtl":this.isPicker()&&(this.hueSlider.enableRtl=S.enableRtl,this.enableOpacity&&(this.opacitySlider.enableRtl=S.enableRtl),this.setInputEleProps()),this.changeRtlProps(S.enableRtl);break;case"disabled":this.changeDisabledProp(S.disabled);break;case"value":this.value!==I.value&&this.changeValueProp(S.value);break;case"showButtons":this.changeShowBtnProps(S.showButtons);break;case"mode":"Picker"===S.mode?this.switchToPicker():this.switchToPalette();break;case"modeSwitcher":this.changeModeSwitcherProp(S.modeSwitcher);break;case"columns":case"presetColors":this.isPicker()||this.changePaletteProps();break;case"noColor":S.noColor?"Palette"===this.mode&&!this.modeSwitcher&&this.setNoColor():this.changePaletteProps();break;case"enableOpacity":this.changeOpacityProps(S.enableOpacity)}}focusIn(){this.element.parentElement.focus()}};Er([(0,i.Z9)("#008000ff")],Mt.prototype,"value",void 0),Er([(0,i.Z9)("")],Mt.prototype,"cssClass",void 0),Er([(0,i.Z9)(!1)],Mt.prototype,"disabled",void 0),Er([(0,i.Z9)("Picker")],Mt.prototype,"mode",void 0),Er([(0,i.Z9)(!0)],Mt.prototype,"modeSwitcher",void 0),Er([(0,i.Z9)(null)],Mt.prototype,"presetColors",void 0),Er([(0,i.Z9)(!0)],Mt.prototype,"showButtons",void 0),Er([(0,i.Z9)(10)],Mt.prototype,"columns",void 0),Er([(0,i.Z9)(!1)],Mt.prototype,"inline",void 0),Er([(0,i.Z9)(!1)],Mt.prototype,"noColor",void 0),Er([(0,i.Z9)(!1)],Mt.prototype,"enablePersistence",void 0),Er([(0,i.Z9)(!0)],Mt.prototype,"enableOpacity",void 0),Er([(0,i.Z9)(!1)],Mt.prototype,"createPopupOnClick",void 0),Er([(0,i.ju)()],Mt.prototype,"select",void 0),Er([(0,i.ju)()],Mt.prototype,"change",void 0),Er([(0,i.ju)()],Mt.prototype,"beforeTileRender",void 0),Er([(0,i.ju)()],Mt.prototype,"beforeOpen",void 0),Er([(0,i.ju)()],Mt.prototype,"open",void 0),Er([(0,i.ju)()],Mt.prototype,"beforeClose",void 0),Er([(0,i.ju)()],Mt.prototype,"beforeModeSwitch",void 0),Er([(0,i.ju)()],Mt.prototype,"onModeSwitch",void 0),Er([(0,i.ju)()],Mt.prototype,"created",void 0),Mt=Er([i.Zl],Mt);var wi=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};const Vi="e-input-focus",sn=["title","style","class"];let ts=class extends i.wA{constructor(S,I){super(S,I),this.previousValue=null,this.isAngular=!1,this.isHiddenInput=!1,this.isForm=!1,this.inputPreviousValue=null,this.isVue=!1,this.textboxOptions=S}onPropertyChanged(S,I){for(const j of Object.keys(S))switch(j){case"floatLabelType":$e.removeFloating(this.textboxWrapper),$e.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":$e.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":$e.setWidth(S.width,this.textboxWrapper.container);break;case"value":{const oe=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=oe,$e.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):((0,i.le)(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&(0,i.le)(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),$e.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":$e.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),$e.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&($e.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":$e.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":$e.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(S.cssClass,I.cssClass);break;case"locale":this.globalize=new i.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),$e.setPlaceholder(this.placeholder,this.respectiveElement)}}getModuleName(){return"textbox"}isBlank(S){return!S||/^\s*$/.test(S)}preRender(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=(0,i.oq)(this.element,"form"),(0,i.le)(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){const I=(0,i.NA)("ej2_instances",this.element),j=this.createElement(this.multiline?"textarea":"input");let oe=0;for(;oe<this.element.attributes.length;oe++){const Ee=this.element.attributes[oe].nodeName;"id"!==Ee&&(j.setAttribute(Ee,this.element.attributes[oe].nodeValue),j.innerHTML=this.element.innerHTML,"name"===Ee&&this.element.removeAttribute("name"))}this.element.appendChild(j),this.element=j,(0,i.sO)("ej2_instances",I,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new i.eC(this.locale),this.l10n=new i.E7("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",(0,i.QI)("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",(0,i.QI)("textarea"));const I=["placeholder","disabled","value","readonly","type","autocomplete"];for(let j=0;j<this.element.attributes.length;j++){const oe=this.element.attributes[j].nodeName;this.element.hasAttribute(oe)&&sn.indexOf(oe)<0&&"id"!==oe&&"type"!==oe&&"e-mappinguid"!==oe&&(this.textarea.setAttribute(oe,this.element.attributes[j].nodeValue),I.indexOf(oe)<0&&(this.element.removeAttribute(oe),j--))}}}checkAttributes(S){const I=S?(0,i.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];for(const j of I)if(!(0,i.le)(this.element.getAttribute(j)))switch(j){case"disabled":if((0,i.le)(this.textboxOptions)||void 0===this.textboxOptions.enabled||S){const oe=!("disabled"===this.element.getAttribute(j)||""===this.element.getAttribute(j)||"true"===this.element.getAttribute(j));this.setProperties({enabled:oe},!S)}break;case"readonly":if((0,i.le)(this.textboxOptions)||void 0===this.textboxOptions.readonly||S){const oe="readonly"===this.element.getAttribute(j)||""===this.element.getAttribute(j)||"true"===this.element.getAttribute(j);this.setProperties({readonly:oe},!S)}break;case"placeholder":((0,i.le)(this.textboxOptions)||void 0===this.textboxOptions.placeholder||S)&&this.setProperties({placeholder:this.element.placeholder},!S);break;case"autocomplete":((0,i.le)(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||S)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!S);break;case"value":((0,i.le)(this.textboxOptions)||void 0===this.textboxOptions.value||S)&&this.setProperties({value:this.element.value},!S);break;case"type":((0,i.le)(this.textboxOptions)||void 0===this.textboxOptions.type||S)&&this.setProperties({type:this.element.type},!S)}}render(){let S=this.cssClass;!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(S=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=$e.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:S,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),(0,i.le)(this.value)||($e.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),(0,i.le)(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!(0,i.le)(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,$e.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()}updateHTMLAttrToWrapper(){if(!(0,i.le)(this.htmlAttributes))for(const S of Object.keys(this.htmlAttributes))if(sn.indexOf(S)>-1)if("class"===S){const I=this.getInputValidClassList(this.htmlAttributes[S]);""!==I&&(0,i.cn)([this.textboxWrapper.container],I.split(" "))}else if("style"===S){let I=this.textboxWrapper.container.getAttribute(S);I=(0,i.le)(I)?this.htmlAttributes[S]:I+this.htmlAttributes[S],this.textboxWrapper.container.setAttribute(S,I)}else this.textboxWrapper.container.setAttribute(S,this.htmlAttributes[S])}updateHTMLAttrToElement(){if(!(0,i.le)(this.htmlAttributes))for(const S of Object.keys(this.htmlAttributes))sn.indexOf(S)<0&&this.element.setAttribute(S,this.htmlAttributes[S])}updateCssClass(S,I){$e.setCssClass(this.getInputValidClassList(S),[this.textboxWrapper.container],this.getInputValidClassList(I))}getInputValidClassList(S){let I=S;return!(0,i.le)(S)&&""!==S&&(I=S.replace(/\s+/g," ").trim()),I}setInitialValue(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)}wireEvents(){i.bi.add(this.respectiveElement,"focus",this.focusHandler,this),i.bi.add(this.respectiveElement,"blur",this.focusOutHandler,this),i.bi.add(this.respectiveElement,"input",this.inputHandler,this),i.bi.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&i.bi.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!(0,i.le)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&i.bi.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)}animationHandler(){this.textboxWrapper.container.classList.add("e-valid-input");const S=this.textboxWrapper.container.querySelector(".e-float-text");(0,i.le)(S)||(S.classList.add("e-label-top"),S.classList.contains("e-label-bottom")&&S.classList.remove("e-label-bottom"))}resetValue(S){const I=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=S,this.isProtectedOnChange=I}resetForm(){if(this.resetValue(this.isAngular?"":this.initialValue),!(0,i.le)(this.textboxWrapper)){const S=this.textboxWrapper.container.querySelector(".e-float-text");(0,i.le)(S)||((0,i.le)(this.initialValue)||""===this.initialValue?(S.classList.add("e-label-bottom"),S.classList.remove("e-label-top")):""!==this.initialValue&&(S.classList.add("e-label-top"),S.classList.remove("e-label-bottom")))}}focusHandler(S){this.trigger("focus",{container:this.textboxWrapper.container,event:S,value:this.value})}focusOutHandler(S){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.respectiveElement.value&&this.raiseChangeEvent(S,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:S,value:this.value})}inputHandler(S){const j={event:S,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",j),S.stopPropagation()}changeHandler(S){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(S,!0),S.stopPropagation()}raiseChangeEvent(S,I){const j={event:S,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:I||!1,isInteracted:I||!1};this.preventChange=!1,this.trigger("change",j),this.previousValue=this.value}bindClearEvent(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?i.bi.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):i.bi.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))}resetInputHandler(S){S.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&($e.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:S,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(S,!0))}unWireEvents(){i.bi.remove(this.respectiveElement,"focus",this.focusHandler),i.bi.remove(this.respectiveElement,"blur",this.focusOutHandler),i.bi.remove(this.respectiveElement,"input",this.inputHandler),i.bi.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&i.bi.remove(this.formElement,"reset",this.resetForm),!(0,i.le)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&i.bi.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)}destroy(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&((0,i.og)(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),(0,i.le)(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),(0,i.og)(this.textboxWrapper.container)),this.textboxWrapper=null,super.destroy()}addIcon(S,I){$e.addIcon(S,I,this.textboxWrapper.container,this.respectiveElement,this.createElement)}getPersistData(){return this.addOnPersist(["value"])}addAttributes(S){for(const I of Object.keys(S))"disabled"===I?(this.setProperties({enabled:!1},!0),$e.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===I?(this.setProperties({readonly:!0},!0),$e.setReadonly(this.readonly,this.respectiveElement)):"class"===I?this.respectiveElement.classList.add(S[I]):"placeholder"===I?(this.setProperties({placeholder:S[I]},!0),$e.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(I,S[I])}removeAttributes(S){for(const I of S)"disabled"===I?(this.setProperties({enabled:!0},!0),$e.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===I?(this.setProperties({readonly:!1},!0),$e.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===I?(this.setProperties({placeholder:null},!0),$e.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(I)}focusIn(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&(0,i.cn)([this.textboxWrapper.container],[Vi]))}focusOut(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&(0,i.IV)([this.textboxWrapper.container],[Vi]))}};wi([(0,i.Z9)("text")],ts.prototype,"type",void 0),wi([(0,i.Z9)(!1)],ts.prototype,"readonly",void 0),wi([(0,i.Z9)(null)],ts.prototype,"value",void 0),wi([(0,i.Z9)("Never")],ts.prototype,"floatLabelType",void 0),wi([(0,i.Z9)("")],ts.prototype,"cssClass",void 0),wi([(0,i.Z9)(null)],ts.prototype,"placeholder",void 0),wi([(0,i.Z9)("on")],ts.prototype,"autocomplete",void 0),wi([(0,i.Z9)({})],ts.prototype,"htmlAttributes",void 0),wi([(0,i.Z9)(!1)],ts.prototype,"multiline",void 0),wi([(0,i.Z9)(!0)],ts.prototype,"enabled",void 0),wi([(0,i.Z9)(!1)],ts.prototype,"showClearButton",void 0),wi([(0,i.Z9)(!1)],ts.prototype,"enablePersistence",void 0),wi([(0,i.Z9)(null)],ts.prototype,"width",void 0),wi([(0,i.ju)()],ts.prototype,"created",void 0),wi([(0,i.ju)()],ts.prototype,"destroyed",void 0),wi([(0,i.ju)()],ts.prototype,"change",void 0),wi([(0,i.ju)()],ts.prototype,"blur",void 0),wi([(0,i.ju)()],ts.prototype,"focus",void 0),wi([(0,i.ju)()],ts.prototype,"input",void 0),ts=wi([i.Zl],ts);class wn extends i.wA{constructor(){super(...arguments),this.minDistance=5,this.previous=0,this.interval=30,this.timeout=null,this.isSignatureEmpty=!0,this.backgroundLoaded=null,this.clearArray=[],this.isBlazor=!1}initialize(S,I,j){this.element=S,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=0,I&&(this.setBlazorParameter(I),this.dotnetRef=j),this.setHTMLProperties(),(0,i.le)(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isSignatureEmpty=!0,this.isBlazor||this.trigger("created",null)}setBlazorParameter(S){this.isBlazor=!0,this.backgroundColor=S.backgroundColor,this.backgroundImage=S.backgroundImage,this.disabled=S.disabled,this.isReadOnly=S.isReadOnly,this.maxStrokeWidth=S.maxStrokeWidth||2,this.minStrokeWidth=S.minStrokeWidth||.5,this.velocity=S.velocity||.7,this.strokeColor=S.strokeColor||"#000000",this.saveWithBackground=S.saveWithBackground,this.interval=30,this.previous=0,this.minDistance=5,this.signatureValue=S.signatureValue,this.signatureValue&&this.loadPersistedSignature()}wireEvents(){!(0,i.le)(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(i.bi.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),i.bi.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),i.bi.add(document,"mouseup",this.mouseUpHandler,this)):(i.bi.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),i.bi.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))}unwireEvents(S){"mouseup"===S||"touchend"===S?(i.bi.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),i.bi.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),i.bi.remove(document,"mouseup",this.mouseUpHandler)):(i.bi.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),i.bi.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),i.bi.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),i.bi.remove(document,"mouseup",this.mouseUpHandler),i.bi.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))}setHTMLProperties(){150===this.element.height&&(this.element.height=this.element.offsetHeight),300===this.element.width&&(this.element.width=this.element.offsetWidth),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.backgroundImage?this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")":this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)}mouseDownHandler(S){(1===S.buttons||2===S.buttons||"touchstart"===S.type)&&("touchstart"===S.type&&(S.preventDefault(),S.stopPropagation()),this.beginStroke(S),this.wireEvents())}mouseMoveHandler(S){(1===S.buttons||2===S.buttons||"touchmove"===S.type)&&("touchmove"===S.type&&(S.preventDefault(),S.stopPropagation()),this.interval?this.updateStrokeWithThrottle(S):this.updateStroke(S))}mouseUpHandler(S){"touchstart"===S.type&&(S.preventDefault(),S.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(S.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep]}keyboardHandler(S){const I={fileName:"Signature",type:"Png",cancel:!1};switch(S.key){case"Delete":this.clear();break;case S.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",I,j=>{I.cancel||this.save(j.type,j.fileName)}),S.preventDefault(),S.stopImmediatePropagation();break;case S.ctrlKey&&"z":this.undo();break;case S.ctrlKey&&"y":this.redo()}}resizeHandler(){const S=this;this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1);const I=new Image;I.src=this.snapColl[this.incStep],I.onload=()=>{S.canvasContext.clearRect(0,0,S.element.width,S.element.height),S.canvasContext.drawImage(I,0,0,S.element.width,S.element.height)}}beginStroke(S){this.refresh(),this.updateStroke(S)}updateStroke(S){const I=this.createPoint(S);this.addPoint(I)}updateStrokeWithThrottle(S){const I=Date.now(),j=this.interval-(I-this.previous);this.storedArgs=S,j<=0||j>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=I,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),j))}delay(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)}createPoint(S){const I=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===S.type||"mousemove"===S.type?this.point(S.clientX-I.left,S.clientY-I.top,(new Date).getTime()):this.point(S.touches[0].clientX-I.left,S.touches[0].clientY-I.top,(new Date).getTime())}point(S,I,j){return this.pointX=S,this.pointY=I,this.time=j||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}}addPoint(S){const I=this.pointColl;let j,oe;const Ee=I.length>0&&I[I.length-1],dt=!!Ee&&this.distanceTo(Ee)<=this.minDistance;(!Ee||!Ee||!dt)&&(I.push(S),I.length>2&&(3===I.length&&I.unshift(I[0]),j=this.calculateCurveControlPoints(I[0],I[1],I[2]).controlPoint2,oe=this.calculateCurveControlPoints(I[1],I[2],I[3]).controlPoint1,this.startPoint=I[1],this.controlPoint1=j,this.controlPoint2=oe,this.endPoint=I[2],this.startDraw(),I.shift()))}startDraw(){let S;S=this.pointVelocityCalc(this.startPoint),S=this.velocity*S+(1-this.velocity)*this.lastVelocity;const I=Math.max(this.maxStrokeWidth/(S+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,I),this.lastVelocity=S,this.lastWidth=I}endDraw(){const I=this.pointColl[0];!(this.pointColl.length>2)&&I&&this.strokeDraw(I)}curveDraw(S,I){const j=this.canvasContext;let oe,Ee,dt,Bt,Ii,Yi,Ss,Ps,un,Xs;const Jn=I-S,Ar=this.bezierLengthCalc(),En=2*Math.ceil(Ar);for(j.beginPath(),Ee=0;Ee<En;Ee++)dt=Ee/En,Bt=dt*dt,Ii=Bt*dt,Yi=1-dt,Ss=Yi*Yi,Ps=Ss*Yi,un=Ps*this.startPoint.x,un+=3*Ss*dt*this.controlPoint1.x,un+=3*Yi*Bt*this.controlPoint2.x,un+=Ii*this.endPoint.x,Xs=Ps*this.startPoint.y,Xs+=3*Ss*dt*this.controlPoint1.y,Xs+=3*Yi*Bt*this.controlPoint2.y,Xs+=Ii*this.endPoint.y,oe=Math.min(S+Ii*Jn,this.maxStrokeWidth),this.arcDraw(un,Xs,oe);j.closePath(),j.fill(),this.isSignatureEmpty=!1}strokeDraw(S){const I=this.canvasContext,j=(this.minStrokeWidth+this.maxStrokeWidth)/2;I.beginPath(),this.arcDraw(S.x,S.y,j),I.closePath(),I.fill(),this.isSignatureEmpty=!1}arcDraw(S,I,j){const oe=this.canvasContext;oe.moveTo(S,I),oe.arc(S,I,j,0,2*Math.PI,!1)}calculateCurveControlPoints(S,I,j){const oe=S.x-I.x,Ee=S.y-I.y,dt=I.x-j.x,Bt=I.y-j.y,Ii_x=(S.x+I.x)/2,Ii_y=(S.y+I.y)/2,Yi_x=(I.x+j.x)/2,Yi_y=(I.y+j.y)/2,Ss=Math.sqrt(oe*oe+Ee*Ee),Ps=Math.sqrt(dt*dt+Bt*Bt),Jn=Ps/(Ss+Ps),En=I.x-(Yi_x+(Ii_x-Yi_x)*Jn),Ie=I.y-(Yi_y+(Ii_y-Yi_y)*Jn);return{controlPoint1:this.point(Ii_x+En,Ii_y+Ie,0),controlPoint2:this.point(Yi_x+En,Yi_y+Ie,0)}}bezierLengthCalc(){let j,oe,Ee,dt,Bt,Ii,Yi,Ss,I=0;for(j=0;j<=10;j++)oe=j/10,Ee=this.bezierPointCalc(oe,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),dt=this.bezierPointCalc(oe,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),j>0&&(Yi=Ee-Bt,Ss=dt-Ii,I+=Math.sqrt(Yi*Yi+Ss*Ss)),Bt=Ee,Ii=dt;return I}bezierPointCalc(S,I,j,oe,Ee){return I*(1-S)*(1-S)*(1-S)+3*j*(1-S)*(1-S)*S+3*oe*(1-S)*S*S+Ee*S*S*S}pointVelocityCalc(S){return this.time!==S.time?this.distanceTo(S)/(this.time-S.time):0}distanceTo(S){return Math.sqrt(Math.pow(this.pointX-S.x,2)+Math.pow(this.pointY-S.y,2))}isRead(S){S?i.bi.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||i.bi.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)}enableOrDisable(S){this.disabled=S,S?(this.reDraw("0.5"),this.isRead(!0)):(this.reDraw("1"),this.isRead(!1))}reDraw(S){const I=this.canvasContext.getImageData(0,0,this.element.width,this.element.height);this.canvasContext.clearRect(0,0,this.element.width,this.element.height),this.element.style.opacity=S,this.canvasContext.putImageData(I,0,0)}updateSnapCollection(S){if((0,i.le)(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){const I=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),j=I.getContext("2d");I.width=this.canvasContext.canvas.width,I.height=this.canvasContext.canvas.height,j.drawImage(this.canvasContext.canvas,0,0,I.width,I.height),this.snapColl.push(I.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());S&&this.clearArray.push(this.incStep)}setBackgroundImage(S){const I=this,j=new Image;j.crossOrigin="anonymous",j.src=S,j.onload=()=>{I.canvasContext.globalCompositeOperation="source-over",I.canvasContext.drawImage(j,0,0,I.element.width,I.element.height),I.updateSnapCollection(),I.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)}setBackgroundColor(S){const I=this.canvasContext;let j,oe;for(I.strokeStyle=S,j=1;j<=I.canvas.width;j++)for(oe=1;oe<=I.canvas.height;oe++)I.strokeRect(0,0,j,oe);this.updateSnapCollection()}loadPersistedSignature(){if((0,i.le)(this.signatureValue))return;const S=this,I=new Image;I.src=this.signatureValue,I.onload=()=>{S.canvasContext.clearRect(0,0,S.element.width,S.element.height),S.canvasContext.drawImage(I,0,0),S.updateSnapCollection()},this.isSignatureEmpty=!1}getBlob(S){const I=S.split(","),j=I[0].match(/:(.*?);/)[1],oe=atob(I[1]);let Ee=oe.length;const dt=new Uint8Array(Ee);for(;Ee--;)dt[Ee]=oe.charCodeAt(Ee);return new Blob([dt],{type:j})}download(S,I){const j=URL.createObjectURL(S),oe=document.createElement("a");oe.href=j,oe.target="_parent",oe.download=I,(document.body||document.documentElement).appendChild(oe),oe.click(),oe.parentNode.removeChild(oe)}refresh(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2}clear(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.refresh(),this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})}undo(){const I=this;if(this.incStep>0){this.incStep--;const j=new Image;j.src=this.snapColl[this.incStep],j.onload=()=>{I.canvasContext.clearRect(0,0,I.element.width,I.element.height),I.canvasContext.drawImage(j,0,0,I.element.width,I.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})}redo(){const I=this;if(this.incStep<this.snapColl.length-1){this.incStep++;const j=new Image;j.src=this.snapColl[this.incStep],j.onload=()=>{I.canvasContext.clearRect(0,0,I.element.width,I.element.height),I.canvasContext.drawImage(j,0,0,I.element.width,I.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})}isClear(){if(this.clearArray){let S=!1;for(let I=0;I<this.clearArray.length;I++)this.clearArray[I]===this.incStep&&(this.isSignatureEmpty=!0,S=!0);S||(this.isSignatureEmpty=!1)}}isEmpty(){return this.isSignatureEmpty}canUndo(){return this.incStep>0}canRedo(){return this.incStep<this.snapColl.length-1}draw(S,I,j){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.font=(j=j||30)+"px "+(I=I||"Arial"),this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle",this.canvasContext.fillText(S,this.element.width/2,this.element.height/2),this.updateSnapCollection(),this.isSignatureEmpty=!1}load(S,I,j){j=j||this.element.height,I=I||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);const oe=this,Ee=new Image;Ee.src=S,Ee.onload=()=>{Promise.all([createImageBitmap(Ee,0,0,I,j)]).then(dt=>{const Bt=document.createElement("canvas");Bt.width=I,Bt.height=j,Bt.getContext("2d").drawImage(dt[0],0,0),oe.canvasContext.drawImage(Bt,0,0,I,j,0,0,oe.element.width,oe.element.height),oe.updateSnapCollection()})},this.isSignatureEmpty=!1}saveBackground(S){let I;if(I=S&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],S||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),S=!0)),S){const j=this,oe=new Image;oe.crossOrigin="anonymous",oe.src=I,oe.onload=()=>{j.backgroundLoaded=!0,j.canvasContext.globalCompositeOperation="source-over",j.canvasContext.drawImage(oe,0,0,j.element.width,j.element.height),j.save(j.fileType,j.fileName)}}}save(S,I){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=S,this.fileName=I,this.saveBackground(!1);else if("Svg"===S)this.toSVG(I=I||"Signature");else if("Jpeg"===S)if(I=I||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(I);else{const j=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(j),I+".jpeg")}else{I=I||"Signature";const j=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(j),I+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()}resetSnap(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);const S=this,I=new Image;I.src=this.snapColl[this.incStep-1],I.onload=()=>{S.canvasContext.drawImage(I,0,0,S.element.width,S.element.height),S.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--}toJPEG(S){const I=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");const j=this,oe=new Image;oe.crossOrigin="anonymous",oe.src=I,oe.onload=()=>{j.canvasContext.globalCompositeOperation="source-over",j.canvasContext.drawImage(oe,0,0,j.element.width,j.element.height);const Ee=j.canvasContext.canvas.toDataURL("image/jpeg");j.download(j.getBlob(Ee),S+".jpeg"),j.canvasContext.clearRect(0,0,j.canvasContext.canvas.width,j.canvasContext.canvas.height),this.resizeHandler()},this.snapColl.pop(),this.incStep--}toSVG(S){const I=this.canvasContext.canvas.toDataURL(),j=document.createElementNS("http://www.w3.org/2000/svg","svg");j.setAttribute("width",this.canvasContext.canvas.width.toString()),j.setAttribute("height",this.canvasContext.canvas.height.toString());const Ee=document.createElementNS("http://www.w3.org/2000/svg","image");Ee.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),Ee.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),Ee.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",I),j.appendChild(Ee);const Ps="data:image/svg+xml;base64,"+btoa(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${this.canvasContext.canvas.width}" height="${this.canvasContext.canvas.height}">`+j.innerHTML+"</svg>");return null==S?Ps:(this.download(this.getBlob(Ps),S+".svg"),null)}saveAsBlob(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))}getSignature(S){if("Jpeg"===S){const I=this.canvasContext.getImageData(0,0,this.element.width,this.element.height),j=I.data;for(let Ee=0;Ee<j.length;Ee+=4)j[Ee+3]<255&&(j[Ee]=255-j[Ee],j[Ee+1]=255-j[Ee+1],j[Ee+2]=255-j[Ee+2],j[Ee+3]=255-j[Ee+3]);this.canvasContext.putImageData(I,0,0);const oe=this.canvasContext.canvas.toDataURL("image/jpeg");return this.resizeHandler(),oe}return"Svg"===S?this.toSVG(null):this.canvasContext.canvas.toDataURL("image/png")}getModuleName(){return"signature"}getPersistData(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])}destroy(){this.unwireEvents(null),(0,i.IV)([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null,super.destroy()}propertyChanged(S,I){const j=this.canvasContext;switch(S){case"backgroundColor":j.canvas.style.backgroundColor=I,this.backgroundColor=I;break;case"backgroundImage":j.canvas.style.backgroundImage="url("+I+")",this.backgroundImage=I;break;case"strokeColor":j.fillStyle=I,this.strokeColor=I;break;case"saveWithBackground":this.saveWithBackground=I;break;case"maxStrokeWidth":this.maxStrokeWidth=I;break;case"minStrokeWidth":this.minStrokeWidth=I;break;case"velocity":this.velocity=I;break;case"isReadOnly":this.isRead(I);break;case"disabled":this.enableOrDisable(I)}}}var Sn=function(ht,S,I,j){var dt,oe=arguments.length,Ee=oe<3?S:null===j?j=Object.getOwnPropertyDescriptor(S,I):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ee=Reflect.decorate(ht,S,I,j);else for(var Bt=ht.length-1;Bt>=0;Bt--)(dt=ht[Bt])&&(Ee=(oe<3?dt(Ee):oe>3?dt(S,I,Ee):dt(S,I))||Ee);return oe>3&&Ee&&Object.defineProperty(S,I,Ee),Ee};let Ws=class extends wn{constructor(S,I){super(S,I)}preRender(){}render(){this.initialize()}initialize(){(0,i.cn)([this.element],"e-"+this.getModuleName()),super.initialize(this.element),this.enablePersistence&&this.loadPersistedSignature()}getModuleName(){return"signature"}getPersistData(){return this.addOnPersist(["signatureValue"])}onPropertyChanged(S,I){for(const j of Object.keys(S))switch(j){case"backgroundColor":super.propertyChanged(j,S.backgroundColor);break;case"backgroundImage":super.propertyChanged(j,S.backgroundImage);break;case"strokeColor":S.strokeColor!==I.strokeColor&&super.propertyChanged(j,S.strokeColor);break;case"saveWithBackground":super.propertyChanged(j,S.saveWithBackground);break;case"isReadOnly":super.propertyChanged(j,S.isReadOnly);break;case"disabled":super.propertyChanged(j,S.disabled)}}};Sn([(0,i.Z9)("")],Ws.prototype,"backgroundColor",void 0),Sn([(0,i.Z9)("")],Ws.prototype,"backgroundImage",void 0),Sn([(0,i.Z9)(!1)],Ws.prototype,"disabled",void 0),Sn([(0,i.Z9)(!1)],Ws.prototype,"isReadOnly",void 0),Sn([(0,i.Z9)(!0)],Ws.prototype,"saveWithBackground",void 0),Sn([(0,i.Z9)("#000000")],Ws.prototype,"strokeColor",void 0),Sn([(0,i.Z9)(.5)],Ws.prototype,"minStrokeWidth",void 0),Sn([(0,i.Z9)(2)],Ws.prototype,"maxStrokeWidth",void 0),Sn([(0,i.Z9)(.7)],Ws.prototype,"velocity",void 0),Sn([(0,i.Z9)("en-US")],Ws.prototype,"locale",void 0),Sn([(0,i.Z9)(!1)],Ws.prototype,"enableRtl",void 0),Sn([(0,i.Z9)(!1)],Ws.prototype,"enablePersistence",void 0),Sn([(0,i.ju)()],Ws.prototype,"beforeSave",void 0),Sn([(0,i.ju)()],Ws.prototype,"change",void 0),Sn([(0,i.ju)()],Ws.prototype,"created",void 0),Ws=Sn([i.Zl],Ws)},7520:(An,hs,rt)=>{rt.d(hs,{Ao:()=>ve,Kh:()=>Zt,Nc:()=>Ue,bt:()=>J});var i=rt(7628),u=rt(4028);let Ue={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};var Zt;function $e(Ne,ce){const be={};if((0,i.le)(Ne)||"string"==typeof Ne||"number"==typeof Ne||!(0,i.le)(Ne.isHeader))return Ne;for(const Se of Object.keys(ce)){const ue=ce[Se],_e=(0,i.le)(ue)||"string"!=typeof ue?void 0:(0,i.NA)(ue,Ne);(0,i.le)(_e)||(be[ue]=_e)}return be}function Li(Ne){if(Ne)try{if(document.querySelector(Ne))return(0,i.MY)(document.querySelector(Ne).innerHTML.trim())}catch{return(0,i.MY)(Ne)}}!function(Ne){Ne.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};const ce={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},be={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:Ne.defaultMappedFields,ariaAttributes:ce,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function ue(ni,Tt,qt,Ci,gs){return Xt(ni,_e(ni,Tt,qt,Ci,gs),null,Ci)}function _e(ni,Tt,qt,Ci,gs){const Jt=[],Wt=(0,i.l7)({},be,Ci);Ue=$i(Wt.moduleName);const At=oi();for(let li=0;li<Tt.length;li++){if((0,i.le)(Tt[li]))continue;let Oi;Wt.itemCreating&&"function"==typeof Wt.itemCreating&&Wt.itemCreating({dataSource:Tt,curData:Tt[li],text:Tt[li],options:Wt}),Oi=qt?Us(ni,Tt[li],void 0,null,null,[],null,At,li,Ci):zt(ni,Tt[li],void 0,null,null,Ci,gs),Wt.itemCreated&&"function"==typeof Wt.itemCreated&&Wt.itemCreated({dataSource:Tt,curData:Tt[li],text:Tt[li],item:Oi,options:Wt}),Jt.push(Oi)}return Jt}function lt(ni,Tt,qt,Ci,gs,Jt){const Wt=(0,i.l7)({},be,qt);Ue=$i(Wt.moduleName);const At=!Jt||"listview"!=Jt.getModuleName()&&"multiselect"!=Jt.getModuleName()?(0,i.l7)({},Ne.defaultMappedFields,Wt.fields):Wt.fields,li=(0,i.l7)({},ce,Wt.ariaAttributes);let Oi,Gt=[];Ci&&(li.level=Ci);const Dt=[];let Pt,di;Tt&&Tt.length&&!(0,i.le)(ji(Tt).item)&&!ji(Tt).item.hasOwnProperty(At.id)&&(Oi=oi());for(let ot=0;ot<Tt.length;ot++){let hi=$e(Tt[ot],At);if((0,i.le)(Tt[ot]))continue;Wt.itemCreating&&"function"==typeof Wt.itemCreating&&Wt.itemCreating({dataSource:Tt,curData:Tt[ot],text:hi[At.text],options:Wt,fields:At});const Ei=Tt[ot];Wt.itemCreating&&"function"==typeof Wt.itemCreating&&(hi=$e(Tt[ot],At)),hi.hasOwnProperty(At.id)&&!(0,i.le)(hi[At.id])&&(Oi=hi[At.id]);const Ui=[];if(Wt.showCheckBox&&(Wt.itemNavigable&&(hi[At.url]||hi[At.urlAttributes])?Gt.push(ni("input",{className:Ue.check,attrs:{type:"checkbox"}})):Ui.push(ni("input",{className:Ue.check,attrs:{type:"checkbox"}}))),!0===gs)Wt.showIcon&&hi.hasOwnProperty(At.iconCss)&&!(0,i.le)(hi[At.iconCss])&&Ui.push(ni("span",{className:Ue.icon+" "+hi[At.iconCss]})),Pt=Us(ni,Ei,hi,At,Wt.itemClass,Ui,!(!Ei.hasOwnProperty("isHeader")||!Ei.isHeader),Oi,ot,qt),di=Pt.querySelector("."+Ue.anchorWrap),Wt.itemNavigable&&Gt.length&&(0,i.Ce)(Gt,Pt.firstElementChild);else{if(Pt=zt(ni,Ei,hi,At,Wt.itemClass,qt,Jt),Pt.classList.add(Ue.level+"-"+li.level),Pt.setAttribute("aria-level",li.level.toString()),di=Pt.querySelector("."+Ue.anchorWrap),hi.hasOwnProperty(At.tooltip)&&Pt.setAttribute("title",hi[At.tooltip]),hi.hasOwnProperty(At.htmlAttributes)&&hi[At.htmlAttributes]&&is(Pt,hi[At.htmlAttributes]),hi.hasOwnProperty(At.enabled)&&!1===hi[At.enabled]&&Pt.classList.add(Ue.disabled),hi.hasOwnProperty(At.isVisible)&&!1===hi[At.isVisible]&&(Pt.style.display="none"),hi.hasOwnProperty(At.imageUrl)&&!(0,i.le)(hi[At.imageUrl])&&!Wt.template){const As={src:hi[At.imageUrl]};(0,i.TS)(As,hi[At.imageAttributes]);const bs=ni("img",{className:Ue.image,attrs:As});di?di.insertAdjacentElement("afterbegin",bs):(0,i.Ce)([bs],Pt.firstElementChild)}if(Wt.showIcon&&hi.hasOwnProperty(At.iconCss)&&!(0,i.le)(hi[At.iconCss])&&!Wt.template){const As=ni("div",{className:Ue.icon+" "+hi[At.iconCss]});di?di.insertAdjacentElement("afterbegin",As):(0,i.Ce)([As],Pt.firstElementChild)}Ui.length&&(0,i.Ce)(Ui,Pt.firstElementChild),Wt.itemNavigable&&Gt.length&&(0,i.Ce)(Gt,Pt.firstElementChild),us(ni,hi,At,0,Wt,Pt,li.level)}di&&(0,i.cn)([Pt],[Ue.navigable]),Wt.itemCreated&&"function"==typeof Wt.itemCreated&&Wt.itemCreated({dataSource:Tt,curData:Tt[ot],text:hi[At.text],item:Pt,options:Wt,fields:At}),Gt=[],Dt.push(Pt)}return Dt}function Xe(ni,Tt,qt,Ci,gs,Jt){const Wt=(0,i.l7)({},be,qt);return Xt(ni,lt(ni,Tt,qt,Ci,gs,Jt),Wt.listClass,qt)}function de(ni,Tt){if(Tt&&ni){let qt=Tt;return qt=Array.prototype.slice.call(Tt),qt.indexOf(ni)}}function Fe(ni,Tt,qt=new u.AE){if("Ascending"===ni)qt.sortBy(Tt,"ascending",!0);else if("Descending"===ni)qt.sortBy(Tt,"descending",!0);else for(let Ci=0;Ci<qt.queries.length;Ci++)"onSortBy"===qt.queries[Ci].fn&&qt.queries.splice(Ci,1);return qt}function xt(ni,Tt){return new u.hm(ni).executeLocal(Tt)}function ji(ni){for(let qt=0;qt<ni.length;qt++)if(!(0,i.le)(ni[qt]))return{typeof:typeof ni[qt],item:ni[qt]};return{typeof:null,item:null}}function is(ni,Tt){const qt={};(0,i.TS)(qt,Tt),qt.class&&((0,i.cn)([ni],qt.class.split(" ")),delete qt.class),(0,i.Y4)(ni,qt)}function zi(ni){const Tt={},qt=ni.attributes;for(let Ci=0;Ci<qt.length;Ci++)Tt[qt[Ci].nodeName]=qt[Ci].nodeValue;return Tt}function oi(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function us(ni,Tt,qt,Ci,gs,Jt,Wt){const At=Tt[qt.child]||[];let li=Tt[qt.hasChildren];if(At.length&&(li=!0,Jt.classList.add(Ue.hasChild),gs.processSubChild)){const Oi=Xe(ni,At,gs,++Wt);Jt.appendChild(Oi)}gs.expandCollapse&&li&&!gs.template&&(Jt.firstElementChild.classList.add(Ue.iconWrapper),("Left"===gs.expandIconPosition?i.Ce:i.R3)([ni("div",{className:"e-icons "+gs.expandIconClass})],Jt.querySelector("."+Ue.textContent)))}function Us(ni,Tt,qt,Ci,gs,Jt,Wt,At,li,Oi){const Gt=(0,i.l7)({},be,Oi),Dt=(0,i.l7)({},ce,Gt.ariaAttributes);let ot,hi,Pt=Tt,di=Tt;"string"!=typeof Tt&&"number"!=typeof Tt&&"boolean"!=typeof Tt&&(ot=Tt,Pt="boolean"==typeof qt[Ci.text]||"number"==typeof qt[Ci.text]?qt[Ci.text]:qt[Ci.text]||"",di=qt[Ci.value]),hi=(0,i.le)(ot)||(0,i.le)(qt[Ci.id])||""===qt[Ci.id]?At+"-"+li:At;const Ei=ni("li",{className:(!0===Wt?Ue.group:Ue.li)+" "+((0,i.le)(gs)?"":gs),id:hi,attrs:""!==Dt.groupItemRole&&""!==Dt.itemRole?{role:!0===Wt?Dt.groupItemRole:Dt.itemRole}:{}});return ot&&qt.hasOwnProperty(Ci.enabled)&&"false"===qt[Ci.enabled].toString()&&Ei.classList.add(Ue.disabled),Wt?Ei.innerText=Pt:(Ei.setAttribute("data-value",(0,i.le)(di)?"null":di),Ei.setAttribute("role","option"),ot&&qt.hasOwnProperty(Ci.htmlAttributes)&&qt[Ci.htmlAttributes]&&is(Ei,qt[Ci.htmlAttributes]),Jt.length&&!Gt.itemNavigable&&(0,i.R3)(Jt,Ei),ot&&(qt[Ci.url]||qt[Ci.urlAttributes]&&qt[Ci.urlAttributes].href)?Ei.appendChild(et(ni,ot,Ci,Pt,Jt,Gt.itemNavigable)):(Jt.length&&Gt.itemNavigable&&(0,i.R3)(Jt,Ei),Ei.appendChild(document.createTextNode(Pt)))),Ei}function $i(ni){return{li:`e-${ni}-item`,ul:`e-${ni}-parent e-ul`,group:`e-${ni}-group-item`,icon:`e-${ni}-icon`,text:`e-${ni}-text`,check:`e-${ni}-check`,checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:`e-${ni}-url`,collapsible:"e-icon-collapsible",disabled:"e-disabled",image:`e-${ni}-img`,iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function et(ni,Tt,qt,Ci,gs,Jt){const Wt=$e(Tt,qt),At={href:Wt[qt.url]};let li;if(Wt.hasOwnProperty(qt.urlAttributes)&&Wt[qt.urlAttributes]&&((0,i.TS)(At,Wt[qt.urlAttributes]),At.href=Wt[qt.url]?Wt[qt.url]:Wt[qt.urlAttributes].href),Jt){li=ni("a",{className:Ue.text+" "+Ue.url});const Oi=ni("div",{className:Ue.anchorWrap});gs&&gs.length&&(0,i.R3)(gs,Oi),Oi.appendChild(document.createTextNode(Ci)),(0,i.R3)([Oi],li)}else li=ni("a",{className:Ue.text+" "+Ue.url,innerHTML:Ci});return is(li,At),li}function zt(ni,Tt,qt,Ci,gs,Jt,Wt){const At=(0,i.l7)({},be,Jt),li=(0,i.l7)({},ce,At.ariaAttributes);let Gt,Dt,Pt,Oi=Tt;"string"!=typeof Tt&&"number"!=typeof Tt&&(Pt=Tt,Oi=qt[Ci.text]||"",Gt=(0,i.le)(qt._id)?qt[Ci.id]:qt._id,Dt=!(!Tt.hasOwnProperty("isHeader")||!Tt.isHeader));const di=ni("li",{className:(!0===Dt?Ue.group:Ue.li)+" "+((0,i.le)(gs)?"":gs),attrs:""!==li.groupItemRole&&""!==li.itemRole?{role:!0===Dt?li.groupItemRole:li.itemRole}:{}});if((0,i.le)(Gt)?di.setAttribute("data-uid",oi()):di.setAttribute("data-uid",Gt),Dt&&Jt&&Jt.groupTemplate){const ot=Li(Jt.groupTemplate);if(Wt&&"listview"!=Wt.getModuleName()){const hi=ot(Tt,Wt,"groupTemplate",At.groupTemplateID,!!At.isStringTemplate,null,di);hi&&(0,i.R3)(hi,di)}else(0,i.R3)(ot(Tt,Wt,"groupTemplate",At.groupTemplateID,!!At.isStringTemplate),di)}else if(!Dt&&Jt&&Jt.template){const ot=Li(Jt.template);if(Wt&&"listview"!=Wt.getModuleName()){const hi=ot(Tt,Wt,"template",At.templateID,!!At.isStringTemplate,null,di);hi&&(0,i.R3)(hi,di)}else(0,i.R3)(ot(Tt,Wt,"template",At.templateID,!!At.isStringTemplate),di)}else{const ot=ni("div",{className:Ue.textContent,attrs:""!==li.wrapperRole?{role:li.wrapperRole}:{}});if(Pt&&(qt[Ci.url]||qt[Ci.urlAttributes]&&qt[Ci.urlAttributes].href))ot.appendChild(et(ni,Pt,Ci,Oi,null,At.itemNavigable));else{const hi=ni("span",{className:Ue.text,attrs:""!==li.itemText?{role:li.itemText}:{}});Jt&&Jt.enableHtmlSanitizer?hi.innerText=Oi:hi.innerHTML=Oi,ot.appendChild(hi)}di.appendChild(ot)}return di}function Xt(ni,Tt,qt,Ci){const gs=(0,i.l7)({},be,Ci),Jt=(0,i.l7)({},ce,gs.ariaAttributes);Ue=$i(gs.moduleName);const Wt=ni("ul",{className:Ue.ul+" "+((0,i.le)(qt)?"":qt),attrs:""!==Jt.listRole?{role:Jt.listRole}:{}});return(0,i.R3)(Tt,Wt),Wt}Ne.createList=function Se(ni,Tt,qt,Ci,gs){const Jt=(0,i.l7)({},be,qt),Wt=(0,i.l7)({},ce,Jt.ariaAttributes),At=ji(Tt).typeof;return"string"===At||"number"===At?ue(ni,Tt,Ci,qt,gs):Xe(ni,Tt,qt,Wt.level,Ci,gs)},Ne.createListFromArray=ue,Ne.createListItemFromArray=_e,Ne.createListItemFromJson=lt,Ne.createListFromJson=Xe,Ne.getSiblingLI=function B(ni,Tt,qt){if(Ue=$i(be.moduleName),!ni||!ni.length)return;let Ci,gs;const Jt=Array.prototype.slice.call(ni);for(gs=Tt?de(Tt,Jt):!0===qt?Jt.length:-1,Ci=Jt[gs+(!0===qt?-1:1)];Ci&&(!(0,i.pn)(Ci)||Ci.classList.contains(Ue.disabled));)gs+=!0===qt?-1:1,Ci=Jt[gs];return Ci},Ne.indexOf=de,Ne.groupDataSource=function Be(ni,Tt,qt="None"){const Ci=(0,i.l7)({},Ne.defaultMappedFields,Tt);let gs=(new u.AE).group(Ci.groupBy);gs=Fe(qt,"key",gs);const Jt=xt(ni,gs);ni=[];for(let Wt=0;Wt<Jt.length;Wt++){const At=Jt[Wt].items,li={},Oi="isHeader";li[Ci.text]=Jt[Wt].key,li[Oi]=!0;let Gt=Ci.text;"id"===Gt&&(Gt="text",li[Gt]=Jt[Wt].key),li._id="group-list-item-"+(Jt[Wt].key?Jt[Wt].key.toString().trim():"undefined"),li.items=At,ni.push(li);for(let Dt=0;Dt<At.length;Dt++)ni.push(At[Dt])}return ni},Ne.addSorting=Fe,Ne.getDataSource=xt,Ne.createJsonFromElement=function $t(ni,Tt){const qt=(0,i.l7)({},be,Tt),Ci=(0,i.l7)({},Ne.defaultMappedFields,qt.fields),gs=ni.cloneNode(!0),Jt=[];gs.classList.add("json-parent");const Wt=gs.querySelectorAll(".json-parent>li");gs.classList.remove("json-parent");for(let At=0;At<Wt.length;At++){const li=Wt[At],Oi=li.querySelector("a"),Gt=li.querySelector("ul"),Dt={},Pt=Oi?Oi.childNodes:li.childNodes,di=Object.keys(Pt);for(let hi=0;hi<Pt.length;hi++)Pt[Number(di[hi])].hasChildNodes()||(Dt[Ci.text]=Pt[Number(di[hi])].textContent);let ot=zi(li);ot.id?(Dt[Ci.id]=ot.id,delete ot.id):Dt[Ci.id]=oi(),Object.keys(ot).length&&(Dt[Ci.htmlAttributes]=ot),Oi&&(ot=zi(Oi),Object.keys(ot).length&&(Dt[Ci.urlAttributes]=ot)),Gt&&(Dt[Ci.child]=$t(Gt,Tt)),Jt.push(Dt)}return Jt},Ne.renderContentTemplate=function ui(ni,Tt,qt,Ci,gs,Jt){Ue=$i(be.moduleName);const Wt=ni("ul",{className:Ue.ul,attrs:{role:"presentation"}}),At=(0,i.l7)({},be,gs),li=(0,i.l7)({},Ne.defaultMappedFields,Ci),Oi=Li(Tt),Gt=[];let Dt;const Pt=oi();for(let di=0;di<qt.length;di++){let ot=$e(qt[di],li);const hi=qt[di],Ei=hi.isHeader;Dt="string"==typeof qt[di]||"number"==typeof qt[di]?hi:ot[li.value],At.itemCreating&&"function"==typeof At.itemCreating&&At.itemCreating({dataSource:qt,curData:hi,text:Dt,options:At,fields:li}),At.itemCreating&&"function"==typeof At.itemCreating&&(ot=$e(qt[di],li),Dt="string"==typeof qt[di]||"number"==typeof qt[di]?hi:ot[li.value]);const Ui=ni("li",{id:Pt+"-"+di,className:Ei?Ue.group:Ue.li,attrs:{role:"presentation"}});if(Ei)Ui.innerText="string"==typeof qt[di]||"number"==typeof qt[di]?hi:ot[li.text];else{const As=Ei?At.groupTemplateID:At.templateID;if(Ei)if(Jt&&"listview"!=Jt.getModuleName()){const bs=Oi(hi,Jt,"headerTemplate",As,!!At.isStringTemplate,null,Ui);bs&&(0,i.R3)(bs,Ui)}else(0,i.R3)(Oi(hi,Jt,"headerTemplate",As,!!At.isStringTemplate),Ui);else if(Jt&&"listview"!=Jt.getModuleName()){const bs=Oi(hi,Jt,"template",As,!!At.isStringTemplate,null,Ui);bs&&(0,i.R3)(bs,Ui)}else(0,i.R3)(Oi(hi,Jt,"template",As,!!At.isStringTemplate),Ui);Ui.setAttribute("data-value",(0,i.le)(Dt)?"null":Dt),Ui.setAttribute("role","option")}At.itemCreated&&"function"==typeof At.itemCreated&&At.itemCreated({dataSource:qt,curData:hi,text:Dt,item:Ui,options:At,fields:li}),Gt.push(Ui)}return(0,i.R3)(Gt,Wt),Wt},Ne.renderGroupTemplate=function Ut(ni,Tt,qt,Ci,gs,Jt){const Wt=Li(ni),At=(0,i.l7)({},Ne.defaultMappedFields,qt),li=(0,i.l7)({},be,gs),Oi=At.groupBy;for(const Gt of Ci){const Dt={};if(Dt[Oi]=Gt.textContent,Gt.innerHTML="",Jt&&"listview"!=Jt.getModuleName()){const Pt=Wt(Dt,Jt,"groupTemplate",li.groupTemplateID,!!li.isStringTemplate,null,Gt);Pt&&(0,i.R3)(Pt,Gt)}else(0,i.R3)(Wt(Dt,Jt,"groupTemplate",li.groupTemplateID,!!li.isStringTemplate),Gt)}return Ci},Ne.generateId=oi,Ne.generateUL=Xt,Ne.generateIcon=function Kt(ni,Tt,qt,Ci){const gs=(0,i.l7)({},be,Ci);return Ue=$i(gs.moduleName),("Left"===gs.expandIconPosition?i.Ce:i.R3)([ni("div",{className:"e-icons "+gs.expandIconClass+" "+((0,i.le)(qt)?"":qt)})],Tt.querySelector("."+Ue.textContent)),Tt}}(Zt||(Zt={}));var z,Rt=function(Ne,ce,be,Se){var lt,ue=arguments.length,_e=ue<3?ce:null===Se?Se=Object.getOwnPropertyDescriptor(ce,be):Se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_e=Reflect.decorate(Ne,ce,be,Se);else for(var Xe=Ne.length-1;Xe>=0;Xe--)(lt=Ne[Xe])&&(_e=(ue<3?lt(_e):ue>3?lt(ce,be,_e):lt(ce,be))||_e);return ue>3&&_e&&Object.defineProperty(ce,be,_e),_e};let J=z=class extends i.XY{constructor(ce,be){super(be,ce),this.getHelper=Se=>{let _e,ue=this.getSortableElement(Se.sender.target);return!!this.isValidTarget(ue,this)&&(this.helper?_e=this.helper({sender:ue,element:Se.element}):(_e=ue.cloneNode(!0),_e.style.width=`${ue.offsetWidth}px`,_e.style.height=`${ue.offsetHeight}px`),(0,i.cn)([_e],["e-sortableclone"]),document.body.appendChild(_e),_e)},this.onDrag=Se=>{this.trigger("drag",{event:Se.event,element:this.element,target:Se.target});let ue=this.getSortableInstance(Se.target),_e=this.getSortableElement(Se.target,ue);if((this.isValidTarget(_e,ue)||Se.target.className.indexOf("e-list-group-item")>-1)&&(this.curTarget!==_e||!(0,i.le)(ue.placeHolder))&&(!ue.placeHolderElement||ue.placeHolderElement!==Se.target)){if(Se.target.className.indexOf("e-list-group-item")>-1&&(_e=Se.target),this.curTarget=_e,this.target===_e)return;let lt=this.getIndex(ue.placeHolderElement,ue);const Xe=this.getPlaceHolder(_e,ue);let B;if(Xe){lt=(0,i.le)(lt)?this.getIndex(this.target):lt,B=this.getIndex(_e,ue,Se.event);const de=this.isPlaceHolderPresent(ue);if(de&&lt===B)return;de&&(0,i.Od)(ue.placeHolderElement),ue.placeHolderElement=Xe,Se.target.className.indexOf("e-list-group-item")>-1?ue.element.insertBefore(ue.placeHolderElement,ue.element.children[B]):ue.element!==this.element&&B===ue.element.childElementCount?ue.element.appendChild(ue.placeHolderElement):ue.element.insertBefore(ue.placeHolderElement,ue.element.children[B]),this.refreshDisabled(lt,B,ue)}else{lt=(0,i.le)(lt)?this.getIndex(this.target):this.getIndex(_e,ue)<lt||!lt?lt:lt-1,B=this.getIndex(_e,ue);const de=ue.element!==this.element?B:lt<B?B+1:B;this.updateItemClass(ue),ue.element.insertBefore(this.target,ue.element.children[de]),this.refreshDisabled(lt,B,ue),this.curTarget=this.target,this.trigger("drop",{droppedElement:this.target,element:ue.element,previousIndex:lt,currentIndex:B,target:Se.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:Se.event,scope:this.scope})}}if(ue=this.getSortableInstance(this.curTarget),(0,i.le)(_e)&&Se.target!==ue.placeHolderElement)this.isPlaceHolderPresent(ue)&&this.removePlaceHolder(ue);else{let Xe;[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(B=>{Xe=this.getSortableInstance(B),Xe.element&&Xe!==ue&&this.removePlaceHolder(Xe)})}},this.onDragStart=Se=>{this.target=this.getSortableElement(Se.target);let ue=!1;this.target.classList.add("e-grabbed"),this.curTarget=this.target,Se.helper=document.getElementsByClassName("e-sortableclone")[0],this.trigger("beforeDragStart",{cancel:!1,element:this.element,target:this.target},lt=>{lt.cancel&&(ue=lt.cancel,this.onDragStop(Se))}),!ue&&this.trigger("dragStart",i.xr?{event:Se.event,element:this.element,target:this.target,bindEvents:Se.bindEvents,dragElement:Se.dragElement}:{event:Se.event,element:this.element,target:this.target})},this.onDragStop=Se=>{let _e,lt,Xe,ue=this.getSortableInstance(this.curTarget);_e=this.getIndex(this.target);const B=this.isPlaceHolderPresent(ue);if(B){const de=this.getIndex(ue.placeHolderElement,ue);this.trigger("beforeDrop",{previousIndex:_e,currentIndex:de,target:Se.target,droppedElement:this.target,helper:Se.helper,cancel:!1,handled:!1},Fe=>{if(!Fe.cancel){if(Xe=Fe.handled,this.updateItemClass(ue),Fe.handled){const $t=this.target.cloneNode(!0);this.target.classList.remove("e-grabbed"),this.target=$t}ue.element.insertBefore(this.target,ue.placeHolderElement);const xt=this.getIndex(this.target,ue);_e=this===ue&&_e-xt>1?_e-1:_e,this.trigger("drop",{event:Se.event,element:ue.element,previousIndex:_e,currentIndex:xt,target:Se.target,helper:Se.helper,droppedElement:this.target,scopeName:this.scope,handled:Xe})}(0,i.Od)(ue.placeHolderElement)})}ue=this.getSortableInstance(Se.target),lt=ue.element.childElementCount,_e=this.getIndex(this.target),(ue.element===Se.target||!B&&this.curTarget===this.target)&&this.trigger("beforeDrop",{previousIndex:_e,currentIndex:this.curTarget===this.target?_e:lt,target:Se.target,droppedElement:this.target,helper:Se.helper,cancel:!1},Be=>{ue.element===Se.target&&!Be.cancel&&(this.updateItemClass(ue),ue.element.appendChild(this.target),this.trigger("drop",{event:Se.event,element:ue.element,previousIndex:_e,currentIndex:lt,target:Se.target,helper:Se.helper,droppedElement:this.target,scopeName:this.scope}))}),this.target.classList.remove("e-grabbed"),this.target=null,this.curTarget=null,(0,i.Od)(Se.helper),(0,i.Xr)(this.element,i._l).intDestroy(Se.event)},this.bind()}bind(){this.element.id||(this.element.id=(0,i.QI)("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()}initializeDraggable(){new i._l(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:`.${this.itemClass}`,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})}getPlaceHolder(ce,be){if(be.placeHolder){const Se=be.placeHolder({element:be.element,grabbedElement:this.target,target:ce});return Se.classList.add("e-sortable-placeholder"),Se}return null}isValidTarget(ce,be){return ce&&(0,i.wD)(ce,be.element)&&ce.classList.contains(be.itemClass)&&!ce.classList.contains("e-disabled")}removePlaceHolder(ce){(0,i.Od)(ce.placeHolderElement),ce.placeHolderElement=null}updateItemClass(ce){this!==ce&&(this.target.classList.remove(this.itemClass),this.target.classList.add(ce.itemClass))}getSortableInstance(ce){if(ce=(0,i.oq)(ce,`.e-${this.getModuleName()}`)){const be=(0,i.Xr)(ce,z);return be.scope&&this.scope&&be.scope===this.scope?be:this}return this}refreshDisabled(ce,be,Se){if(Se===this){let ue;const _e=ce<be;let lt,Xe=_e?ce:be;const B=_e?be:ce;for(;Xe<=B;)ue=this.element.children[Xe],ue.classList.contains("e-disabled")?(lt=this.getIndex(ue),this.element.insertBefore(ue,this.element.children[_e?lt+2:lt-1]),Xe=_e?lt+2:lt+1):Xe++}}getIndex(ce,be=this,Se){let ue,_e;return[].slice.call(be.element.children).forEach((lt,Xe)=>{if(lt.classList.contains("e-sortable-placeholder")&&(_e=!0),lt!==ce);else if(ue=Xe,!(0,i.le)(Se)){_e&&(ue-=1);const B=ce.getBoundingClientRect();ue=Se.clientY<=B.bottom-(B.bottom-B.top)/2?ue:ue+1}}),ue}getSortableElement(ce,be=this){return(0,i.oq)(ce,`.${be.itemClass}`)}queryPositionInfo(ce){return ce.left=pageXOffset?parseFloat(ce.left)-pageXOffset+"px":ce.left,ce.top=pageYOffset?parseFloat(ce.top)-pageYOffset+"px":ce.top,ce}isPlaceHolderPresent(ce){return ce.placeHolderElement&&!!(0,i.oq)(ce.placeHolderElement,`#${ce.element.id}`)}moveTo(ce,be,Se){ve(this.element,ce,be,Se)}destroy(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),(0,i.Xr)(this.element,i._l).destroy(),super.destroy()}getModuleName(){return"sortable"}onPropertyChanged(ce,be){for(const Se of Object.keys(ce))"itemClass"===Se&&[].slice.call(this.element.children).forEach(ue=>{ue.classList.contains(be.itemClass)&&ue.classList.remove(be.itemClass),ce.itemClass&&ue.classList.add(ce.itemClass)})}};function ve(Ne,ce,be,Se){let ue=[];if(ce||(ce=Ne),be&&be.length?be.forEach(_e=>{ue.push(Ne.children[_e])}):ue=[].slice.call(Ne.children),(0,i.le)(Se))ue.forEach(_e=>{ce.appendChild(_e)});else{const _e=ce.children[Se];ue.forEach(lt=>{ce.insertBefore(lt,_e)})}}Rt([(0,i.Z9)(!1)],J.prototype,"enableAnimation",void 0),Rt([(0,i.Z9)(null)],J.prototype,"itemClass",void 0),Rt([(0,i.Z9)(null)],J.prototype,"scope",void 0),Rt([(0,i.Z9)()],J.prototype,"helper",void 0),Rt([(0,i.Z9)()],J.prototype,"placeHolder",void 0),Rt([(0,i.ju)()],J.prototype,"drag",void 0),Rt([(0,i.ju)()],J.prototype,"beforeDragStart",void 0),Rt([(0,i.ju)()],J.prototype,"dragStart",void 0),Rt([(0,i.ju)()],J.prototype,"beforeDrop",void 0),Rt([(0,i.ju)()],J.prototype,"drop",void 0),J=z=Rt([i.Zl],J)},9528:(An,hs,rt)=>{rt.d(hs,{LQ:()=>Ht,o8:()=>cn,xV:()=>bo});var i=rt(7628),u=rt(7520),Ue=rt(5774),Zt=rt(2162),$e=rt(4028),Li=rt(3155),Lt=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const Si="e-rtl",We="e-overlay",at="e-nav-arrow",Oe="e-nav-right-arrow",ft="e-nav-left-arrow",jt="e-scroll-nav",Nt="e-scroll-right-nav",Di="e-scroll-left-nav",bt="e-scroll-device",Rt="e-scroll-overlay",z="e-scroll-right-overlay",J="e-scroll-left-overlay";let Ne=(()=>{let Is=class extends i.wA{constructor(D,O){super(D,O)}preRender(){this.browser=i.AR.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=i.AR.isDevice,this.customStep=!0;const D=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===D.id&&(D.id=(0,i.QI)("hscroll"),this.uniqueId=!0),D.style.display="block",this.enableRtl&&D.classList.add(Si)}render(){this.touchModule=new i.Xh(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),i.bi.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(bt),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}setScrollState(){(0,i.le)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}initialize(){const D=this.createElement("div",{className:"e-hscroll-content"}),O=this.createElement("div",{className:"e-hscroll-bar"});O.setAttribute("tabindex","-1");const _=this.element,Q=[].slice.call(_.children);for(const me of Q)D.appendChild(me);O.appendChild(D),_.appendChild(O),O.style.overflowX="hidden",this.scrollEle=O,this.scrollItems=D}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"hScroll"}destroy(){const D=this.element;D.style.display="",D.classList.remove("e-hscroll"),D.classList.remove(bt);const O=(0,i.td)(".e-"+D.id+"_nav."+jt,D),_=(0,i.td)("."+Rt,D);[].slice.call(_).forEach(Q=>{(0,i.og)(Q)});for(const Q of[].slice.call(this.scrollItems.children))D.appendChild(Q);this.uniqueId&&this.element.removeAttribute("id"),(0,i.og)(this.scrollEle),O.length>0&&((0,i.og)(O[0]),(0,i.le)(O[1])||(0,i.og)(O[1])),i.bi.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(D){const O=(0,i.td)(".e-scroll-nav:not(."+We+")",this.element);D?this.element.classList.add(We):this.element.classList.remove(We),[].slice.call(O).forEach(_=>{_.setAttribute("tabindex",D?"-1":"0")})}createOverlay(D){const O=D.id.concat("_nav"),_=this.createElement("div",{className:Rt+" "+z}),Q="e-"+D.id.concat("_nav "+jt+" "+Nt),me=this.createElement("div",{id:O.concat("_right"),className:Q}),Te=this.createElement("div",{className:Oe+" "+at+" e-icons"});me.appendChild(Te);const Je=this.createElement("div",{className:Rt+" "+J});this.ieCheck&&me.classList.add("e-ie-align"),D.appendChild(_),D.appendChild(me),D.insertBefore(Je,D.firstChild),this.eventBinding([me])}createNavIcon(D){const O=D.id.concat("_nav"),_="e-"+D.id.concat("_nav "+jt+" "+Nt),Q=this.createElement("div",{id:O.concat("_right"),className:_});Q.setAttribute("aria-disabled","false");const me=this.createElement("div",{className:Oe+" "+at+" e-icons"}),Te="e-"+D.id.concat("_nav "+jt+" "+Di),Je=this.createElement("div",{id:O.concat("_left"),className:Te+" "+We});Je.setAttribute("aria-disabled","true");const St=this.createElement("div",{className:ft+" "+at+" e-icons"});Je.appendChild(St),Q.appendChild(me),D.appendChild(Q),D.insertBefore(Je,D.firstChild),this.ieCheck&&(Q.classList.add("e-ie-align"),Je.classList.add("e-ie-align")),this.eventBinding([Q,Je])}onKeyPress(D){if("Enter"===D.key){const O=()=>{this.keyTimeout=!0,this.eleScrolling(10,D.target,!0)};this.keyTimer=window.setTimeout(()=>{O()},100)}}onKeyUp(D){"Enter"===D.key&&(this.keyTimeout?this.keyTimeout=!1:D.target.click(),clearTimeout(this.keyTimer))}eventBinding(D){[].slice.call(D).forEach(O=>{new i.Xh(O,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),O.addEventListener("keydown",this.onKeyPress.bind(this)),O.addEventListener("keyup",this.onKeyUp.bind(this)),O.addEventListener("mouseup",this.repeatScroll.bind(this)),O.addEventListener("touchend",this.repeatScroll.bind(this)),O.addEventListener("contextmenu",_=>{_.preventDefault()}),i.bi.add(O,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(D){let O=D.originalEvent.target;O=this.contains(O,jt)?O.firstElementChild:O;const Q=()=>{this.eleScrolling(10,O,!0)};this.timeout=window.setInterval(()=>{Q()},50)}contains(D,O){return D.classList.contains(O)}eleScrolling(D,O,_){const Q=this.element;let me=O.classList;me.contains(jt)&&(me=O.querySelector("."+at).classList),this.contains(Q,Si)&&this.browserCheck&&(D=-D),!this.contains(Q,Si)||this.browserCheck||this.ieCheck?me.contains(Oe)?this.frameScrollRequest(D,"add",_):this.frameScrollRequest(D,"",_):me.contains(ft)?this.frameScrollRequest(D,"add",_):this.frameScrollRequest(D,"",_)}clickEventHandler(D){this.eleScrolling(this.scrollStep,D.target,!1)}swipeHandler(D){const O=this.scrollEle;let _;_=D.velocity<=1?D.distanceX/(10*D.velocity):D.distanceX/D.velocity;let Q=.5;const me=()=>{const Te=Math.sin(Q);Te<=0?window.cancelAnimationFrame(Te):("Left"===D.swipeDirection?O.scrollLeft+=_*Te:"Right"===D.swipeDirection&&(O.scrollLeft-=_*Te),Q-=.5,window.requestAnimationFrame(me))};me()}scrollUpdating(D,O){"add"===O?this.scrollEle.scrollLeft+=D:this.scrollEle.scrollLeft-=D}frameScrollRequest(D,O,_){if(_)return void this.scrollUpdating(D,O);this.customStep||[].slice.call((0,i.td)("."+Rt,this.element)).forEach(Te=>{D-=Te.offsetWidth});const me=()=>{let Te,Je;this.contains(this.element,Si)&&this.browserCheck?(Te=-D,Je=-10):(Te=D,Je=10),Te<10?window.cancelAnimationFrame(Je):(this.scrollUpdating(Je,O),D-=Je,window.requestAnimationFrame(me))};me()}touchHandler(D){const O=this.scrollEle;let _=D.distanceX;this.ieCheck&&this.contains(this.element,Si)&&(_=-_),"Left"===D.scrollDirection?O.scrollLeft=O.scrollLeft+_:"Right"===D.scrollDirection&&(O.scrollLeft=O.scrollLeft-_)}arrowDisabling(D,O){if(this.isDevice){const Q=((0,i.le)(D)?O:D).querySelector("."+at);(0,i.le)(D)?(0,i.s1)(Q,[Oe],[ft]):(0,i.s1)(Q,[ft],[Oe])}else D.classList.add(We),D.setAttribute("aria-disabled","true"),D.removeAttribute("tabindex"),O.classList.remove(We),O.setAttribute("aria-disabled","false"),O.setAttribute("tabindex","0");this.repeatScroll()}scrollHandler(D){const O=D.target,_=O.offsetWidth,me=this.element.querySelector("."+Di),Te=this.element.querySelector("."+Nt);let Je=this.element.querySelector("."+J),St=this.element.querySelector("."+z),ri=O.scrollLeft;if(ri<=0&&(ri=-ri),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(Je=this.element.querySelector("."+z),St=this.element.querySelector("."+J)),Je.style.width=ri<40?ri+"px":"40px",St.style.width=O.scrollWidth-Math.ceil(_+ri)<40?O.scrollWidth-Math.ceil(_+ri)+"px":"40px"),0===ri)this.arrowDisabling(me,Te);else if(Math.ceil(_+ri+.1)>=O.scrollWidth)this.arrowDisabling(Te,me);else{const Pi=this.element.querySelector("."+jt+"."+We);Pi&&(Pi.classList.remove(We),Pi.setAttribute("aria-disabled","false"),Pi.setAttribute("tabindex","0"))}}onPropertyChanged(D,O){for(const _ of Object.keys(D))switch(_){case"scrollStep":this.setScrollState();break;case"enableRtl":D.enableRtl?this.element.classList.add(Si):this.element.classList.remove(Si)}}};return Lt([(0,i.Z9)(null)],Is.prototype,"scrollStep",void 0),Is=Lt([i.Zl],Is),Is})();var ce=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const Se="e-rtl",ue="e-overlay",Xe="e-nav-arrow",B="e-nav-up-arrow",de="e-nav-down-arrow",Be="e-scroll-nav",Fe="e-scroll-up-nav",xt="e-scroll-down-nav",$t="e-scroll-device",ji="e-scroll-overlay",is="e-scroll-up-overlay",zi="e-scroll-down-overlay";let Ut=class extends i.wA{constructor(g,D){super(g,D)}preRender(){this.browser=i.AR.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=i.AR.isDevice,this.customStep=!0;const g=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===g.id&&(g.id=(0,i.QI)("vscroll"),this.uniqueId=!0),g.style.display="block",this.enableRtl&&g.classList.add(Se)}render(){this.touchModule=new i.Xh(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),i.bi.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add($t),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),i.bi.add(this.element,"wheel",this.wheelEventHandler,this)}setScrollState(){(0,i.le)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}initialize(){const g=(0,i.az)("div",{className:"e-vscroll-content"}),D=(0,i.az)("div",{className:"e-vscroll-bar"});D.setAttribute("tabindex","-1");const O=this.element,_=[].slice.call(O.children);for(const Q of _)g.appendChild(Q);D.appendChild(g),O.appendChild(D),D.style.overflow="hidden",this.scrollEle=D,this.scrollItems=g}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"vScroll"}destroy(){const g=this.element;g.style.display="",(0,i.IV)([this.element],["e-vscroll",$t]);const D=(0,i.td)(".e-"+g.id+"_nav."+Be,g),O=(0,i.td)("."+ji,g);[].slice.call(O).forEach(_=>{(0,i.og)(_)});for(const _ of[].slice.call(this.scrollItems.children))g.appendChild(_);this.uniqueId&&this.element.removeAttribute("id"),(0,i.og)(this.scrollEle),D.length>0&&((0,i.og)(D[0]),(0,i.le)(D[1])||(0,i.og)(D[1])),i.bi.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(g){const D=(0,i.td)(".e-scroll-nav:not(."+ue+")",this.element);g?this.element.classList.add(ue):this.element.classList.remove(ue),[].slice.call(D).forEach(O=>{O.setAttribute("tabindex",g?"-1":"0")})}createOverlayElement(g){const D=g.id.concat("_nav"),O=(0,i.az)("div",{className:ji+" "+zi}),_="e-"+g.id.concat("_nav "+Be+" "+xt),Q=(0,i.az)("div",{id:D.concat("down"),className:_}),me=(0,i.az)("div",{className:de+" "+Xe+" e-icons"});Q.appendChild(me);const Te=(0,i.az)("div",{className:ji+" "+is});this.ieCheck&&Q.classList.add("e-ie-align"),g.appendChild(O),g.appendChild(Q),g.insertBefore(Te,g.firstChild),this.eventBinding([Q])}createNavIcon(g){const D=g.id.concat("_nav"),O="e-"+g.id.concat("_nav "+Be+" "+xt),_=(0,i.az)("div",{id:D.concat("_down"),className:O});_.setAttribute("aria-disabled","false");const Q=(0,i.az)("div",{className:de+" "+Xe+" e-icons"}),me="e-"+g.id.concat("_nav "+Be+" "+Fe),Te=(0,i.az)("div",{id:D.concat("_up"),className:me+" "+ue});Te.setAttribute("aria-disabled","true");const Je=(0,i.az)("div",{className:B+" "+Xe+" e-icons"});Te.appendChild(Je),_.appendChild(Q),_.setAttribute("tabindex","0"),g.appendChild(_),g.insertBefore(Te,g.firstChild),this.ieCheck&&(_.classList.add("e-ie-align"),Te.classList.add("e-ie-align")),this.eventBinding([_,Te])}onKeyPress(g){if("Enter"===g.key){const D=()=>{this.keyTimeout=!0,this.eleScrolling(10,g.target,!0)};this.keyTimer=window.setTimeout(()=>{D()},100)}}onKeyUp(g){"Enter"===g.key&&(this.keyTimeout?this.keyTimeout=!1:g.target.click(),clearTimeout(this.keyTimer))}eventBinding(g){[].slice.call(g).forEach(D=>{new i.Xh(D,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),D.addEventListener("keydown",this.onKeyPress.bind(this)),D.addEventListener("keyup",this.onKeyUp.bind(this)),D.addEventListener("mouseup",this.repeatScroll.bind(this)),D.addEventListener("touchend",this.repeatScroll.bind(this)),D.addEventListener("contextmenu",O=>{O.preventDefault()}),i.bi.add(D,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(g){let D=g.originalEvent.target;D=this.contains(D,Be)?D.firstElementChild:D;const _=()=>{this.eleScrolling(10,D,!0)};this.timeout=window.setInterval(()=>{_()},50)}contains(g,D){return g.classList.contains(D)}eleScrolling(g,D,O){let _=D.classList;_.contains(Be)&&(_=D.querySelector("."+Xe).classList),_.contains(de)?this.frameScrollRequest(g,"add",O):_.contains(B)&&this.frameScrollRequest(g,"",O)}clickEventHandler(g){this.eleScrolling(this.scrollStep,g.target,!1)}wheelEventHandler(g){g.preventDefault(),this.frameScrollRequest(this.scrollStep,g.deltaY>0?"add":"",!1)}swipeHandler(g){const D=this.scrollEle;let O;O=g.velocity<=1?g.distanceY/(10*g.velocity):g.distanceY/g.velocity;let _=.5;const Q=()=>{const me=Math.sin(_);me<=0?window.cancelAnimationFrame(me):("Up"===g.swipeDirection?D.scrollTop+=O*me:"Down"===g.swipeDirection&&(D.scrollTop-=O*me),_-=.02,window.requestAnimationFrame(Q))};Q()}scrollUpdating(g,D){"add"===D?this.scrollEle.scrollTop+=g:this.scrollEle.scrollTop-=g}frameScrollRequest(g,D,O){if(O)return void this.scrollUpdating(g,D);this.customStep||[].slice.call((0,i.td)("."+ji,this.element)).forEach(me=>{g-=me.offsetHeight});const Q=()=>{g<10?window.cancelAnimationFrame(10):(this.scrollUpdating(10,D),g-=10,window.requestAnimationFrame(Q))};Q()}touchHandler(g){const D=this.scrollEle,O=g.distanceY;"Up"===g.scrollDirection?D.scrollTop=D.scrollTop+O:"Down"===g.scrollDirection&&(D.scrollTop=D.scrollTop-O)}arrowDisabling(g,D){if(this.isDevice){const _=((0,i.le)(g)?D:g).querySelector("."+Xe);(0,i.le)(g)?(0,i.s1)(_,[de],[B]):(0,i.s1)(_,[B],[de])}else g.classList.add(ue),g.setAttribute("aria-disabled","true"),g.removeAttribute("tabindex"),D.classList.remove(ue),D.setAttribute("aria-disabled","false"),D.setAttribute("tabindex","0");this.repeatScroll()}scrollEventHandler(g){const D=g.target,O=D.offsetHeight,_=this.element.querySelector("."+Fe),Q=this.element.querySelector("."+xt),me=this.element.querySelector("."+is),Te=this.element.querySelector("."+zi);let Je=D.scrollTop;if(Je<=0&&(Je=-Je),this.isDevice&&(me.style.height=Je<40?Je+"px":"40px",Te.style.height=D.scrollHeight-Math.ceil(O+Je)<40?D.scrollHeight-Math.ceil(O+Je)+"px":"40px"),0===Je)this.arrowDisabling(_,Q);else if(Math.ceil(O+Je+.1)>=D.scrollHeight)this.arrowDisabling(Q,_);else{const St=this.element.querySelector("."+Be+"."+ue);St&&(St.classList.remove(ue),St.setAttribute("aria-disabled","false"),St.setAttribute("tabindex","0"))}}onPropertyChanged(g,D){for(const O of Object.keys(g))switch(O){case"scrollStep":this.setScrollState();break;case"enableRtl":g.enableRtl?this.element.classList.add(Se):this.element.classList.remove(Se)}}};function oi(Is,g,D,O,_,Q){let me,Te;const Je=g.parentElement;if("vscroll"===O?(me=Q||g.getBoundingClientRect().height,Te=D.getBoundingClientRect().height):(me=g.getBoundingClientRect().width,Te=D.getBoundingClientRect().width),me<Te)return us(Is,g,D,O,_,Q);if(Je){const St=Je.getBoundingClientRect().width;return St<me&&"hscroll"===O?(Te=St,g.style.maxWidth=St+"px",us(Is,g,D,O,_,Q)):D}return D}function us(Is,g,D,O,_,Q){const me=Is("div",{className:"e-menu-"+O});let Te;return g.appendChild(me),me.appendChild(D),Q?(me.style.overflow="hidden",me.style.height=Q+"px"):(me.style.maxHeight=g.style.maxHeight,g.style.overflow="hidden"),"vscroll"===O?(Te=new Ut({enableRtl:_},me),Te.scrollStep=(0,i.Ys)(".e-"+O+"-bar",g).offsetHeight/2):(Te=new Ne({enableRtl:_},me),Te.scrollStep=(0,i.Ys)(".e-"+O+"-bar",g).offsetWidth),me}function Us(Is,g,D){if(Is){const O=(0,i.Ys)(".e-menu-parent",g);O?(!D||D===O)&&(Is.destroy(),g.parentElement.appendChild(O),(0,i.og)(g)):(Is.destroy(),(0,i.og)(g))}}ce([(0,i.Z9)(null)],Ut.prototype,"scrollStep",void 0),Ut=ce([i.Zl],Ut);var $i=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const et="enter",zt="escape",Xt="e-focused",Kt="e-menu-header",ni="e-selected",Tt="e-separator",qt="uparrow",Ci="downarrow",gs="leftarrow",Jt="rightarrow",Wt="home",At="end",li="e-caret",Oi="e-menu-item",Gt="e-disabled",Dt="e-menu-hide",Pt="e-icons",ot="e-menu-popup";class Ei extends i.rt{}$i([(0,i.Z9)("id")],Ei.prototype,"itemId",void 0),$i([(0,i.Z9)("parentId")],Ei.prototype,"parentId",void 0),$i([(0,i.Z9)("text")],Ei.prototype,"text",void 0),$i([(0,i.Z9)("iconCss")],Ei.prototype,"iconCss",void 0),$i([(0,i.Z9)("url")],Ei.prototype,"url",void 0),$i([(0,i.Z9)("separator")],Ei.prototype,"separator",void 0),$i([(0,i.Z9)("items")],Ei.prototype,"children",void 0);class Ui extends i.rt{}$i([(0,i.Z9)(null)],Ui.prototype,"iconCss",void 0),$i([(0,i.Z9)("")],Ui.prototype,"id",void 0),$i([(0,i.Z9)(!1)],Ui.prototype,"separator",void 0),$i([(0,i.FE)([],Ui)],Ui.prototype,"items",void 0),$i([(0,i.Z9)("")],Ui.prototype,"text",void 0),$i([(0,i.Z9)("")],Ui.prototype,"url",void 0);class As extends i.rt{}$i([(0,i.Z9)("SlideDown")],As.prototype,"effect",void 0),$i([(0,i.Z9)(400)],As.prototype,"duration",void 0),$i([(0,i.Z9)("ease")],As.prototype,"easing",void 0);let bs=class extends i.wA{constructor(g,D){super(g,D),this.navIdx=[],this.animation=new i.fw({}),this.isTapHold=!1,this.tempItem=[],this.showSubMenuOn="Auto"}preRender(){if(!this.isMenu){let g;if("EJS-CONTEXTMENU"===this.element.tagName){g=this.createElement("ul",{id:(0,i.QI)(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});const D=(0,i.NA)("ej2_instances",this.element);(0,i.IV)([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=g,(0,i.sO)("ej2_instances",D,this.element)}else{g=this.createElement("ul",{id:(0,i.QI)(this.getModuleName())}),(0,i.R3)([].slice.call(this.element.cloneNode(!0).children),g);const D=this.element.nextElementSibling;D?this.element.parentElement.insertBefore(g,D):this.element.parentElement.appendChild(g),this.clonedElement=g}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){let g=this.element;const D=(0,i.NA)("ej2_instances",g),O=this.createElement("ul"),_=this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"});for(let Q=0,me=g.attributes.length;Q<me;Q++)O.setAttribute(g.attributes[Q].nodeName,g.attributes[Q].nodeValue);g.parentNode.insertBefore(_,g),(0,i.og)(g),g=O,_.appendChild(g),(0,i.sO)("ej2_instances",D,g),this.clonedElement=_,this.element=g,this.element.id||(this.element.id=(0,i.QI)(this.getModuleName()))}}render(){this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();const g=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(()=>{oi(this.createElement,g,this.element,"hscroll",this.enableRtl)})}initialize(){let g=this.getWrapper();g||(g=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(g,this.element):document.body.appendChild(g)),this.cssClass&&(0,i.cn)([g],this.cssClass.split(" ")),this.enableRtl&&g.classList.add("e-rtl"),g.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(g)),this.defaultOption=this.showItemOnClick}renderItems(){if(!this.items.length){const D=u.Kh.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:D},!0),(0,i.xr)()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}const g=this.createItems(this.items);if((0,i.R3)(Array.prototype.slice.call(g.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){const D=this.getWrapper();this.element.classList.contains("e-vertical")?oi(this.createElement,D,this.element,"vscroll",this.enableRtl):oi(this.createElement,D,this.element,"hscroll",this.enableRtl)}}wireEvents(){const g=this.getWrapper();if(this.target){let D;const O=(0,i.td)(this.target);for(let _=0,Q=O.length;_<Q;_++)D=O[_],this.isMenu?i.bi.add(D,"click",this.menuHeaderClickHandler,this):i.AR.isIos?new i.Xh(D,{tapHold:this.touchHandler.bind(this)}):i.bi.add(D,"contextmenu",this.cmenuHandler,this);if(this.targetElement=D,!this.isMenu){i.bi.add(this.targetElement,"scroll",this.scrollHandler,this);for(const _ of(0,Ue.Mm)(this.targetElement))i.bi.add(_,"scroll",this.scrollHandler,this)}}i.AR.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),i.bi.add(this.isMenu?document:g,"mouseover",this.delegateMoverHandler,this),i.bi.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),i.bi.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(g),this.rippleFn=(0,i.qx)(g,{selector:"."+Oi})}wireKeyboardEvent(g){const D={downarrow:Ci,uparrow:qt,enter:et,leftarrow:gs,rightarrow:Jt,escape:zt};this.isMenu&&(D.home=Wt,D.end=At),new i.nv(g,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:D})}mouseDownHandler(g){(0,i.oq)(g.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!(0,i.oq)(g.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,g)}keyBoardHandler(g){let D="";const O=g.target;let _=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(g.preventDefault(),this.enableScrolling&&13===g.keyCode&&O.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Xt,ni],[(0,i.oq)(O,".e-"+this.getModuleName()+"-wrapper")]),_)switch(g.action){case Jt:D=Jt,g.action=Ci;break;case gs:D=gs,g.action=qt;break;case Ci:D=Ci,g.action=Jt;break;case qt:D=qt,g.action=""}else if(this.enableRtl)switch(g.action){case gs:_=!0,D=gs,g.action=Jt;break;case Jt:_=!0,D=Jt,g.action=gs}switch(g.action){case Ci:case qt:case At:case Wt:this.upDownKeyHandler(g);break;case Jt:this.rightEnterKeyHandler(g);break;case gs:this.leftEscKeyHandler(g);break;case et:this.hamburgerMode&&"SPAN"===O.tagName&&O.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(g):this.rightEnterKeyHandler(g);break;case zt:this.leftEscKeyHandler(g)}_&&(g.action=D)}upDownKeyHandler(g){const D=this.getUlByNavIdx(),O=g.action===Ci||g.action===Wt?0:D.childElementCount-1;let _=O;const Q=this.getLIByClass(D,Xt);Q&&(g.action!==At&&g.action!==Wt&&(_=this.getIdx(D,Q)),Q.classList.remove(Xt),g.action!==At&&g.action!==Wt&&(g.action===Ci?_++:_--,_===(g.action===Ci?D.childElementCount:-1)&&(_=O))),_=this.isValidLI(D.children[_],_,g.action),D.children[_].classList.add(Xt),D.children[_].focus()}isValidLI(g,D,O){const _=this.getUlByNavIdx();return(g.classList.contains(Tt)||g.classList.contains(Gt)||g.classList.contains(Dt))&&(O===Ci||O===Jt?D++:D--),((g=_.children[D]).classList.contains(Tt)||g.classList.contains(Gt)||g.classList.contains(Dt))&&(D=this.isValidLI(g,D,O)),D}getUlByNavIdx(g=this.navIdx.length){if(this.isMenu){const D=[this.getWrapper()].concat([].slice.call((0,i.td)("."+ot)))[g];return(0,i.le)(D)?null:(0,i.Ys)(".e-menu-parent",D)}return this.getWrapper().children[g]}rightEnterKeyHandler(g){let D;const O=this.getUlByNavIdx(),_=this.getLIByClass(O,Xt);if(_){const Q=this.getIdx(O,_),me=this.navIdx.concat(Q),Te=this.getItem(me);Te.items.length?(this.navIdx.push(Q),this.keyType="right",this.action=g.action,this.openMenu(_,Te,-1,-1,g)):g.action===et&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([ni],[this.getWrapper()]):_.classList.remove(Xt),_.classList.add(ni),D={element:_,item:Te,event:g},this.trigger("select",D),this.closeMenu(null,g))}}leftEscKeyHandler(g){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,g)):g.action===zt&&this.closeMenu(null,g)}scrollHandler(g){this.closeMenu(null,g)}touchHandler(g){this.isTapHold=!0,this.cmenuHandler(g.originalEvent)}cmenuHandler(g){g.preventDefault(),this.isCMenu=!0,this.pageX=g.changedTouches?g.changedTouches[0].pageX+1:g.pageX+1,this.pageY=g.changedTouches?g.changedTouches[0].pageY+1:g.pageY+1,this.closeMenu(null,g),this.isCMenu&&(this.canOpen(g.target)&&this.openMenu(null,null,this.pageY,this.pageX,g),this.isCMenu=!1)}closeMenu(g=0,D=null,O){if(this.isMenuVisible()){let _,Q;const me=this.getWrapper();let Te,Je;const St=this.getPopups();let ri=!1;const Pi=this.isMenu?St.length+1:me.childElementCount,Hi=this.isMenu&&1!==Pi?(0,i.Ys)(".e-ul",St[Pi-2]):(0,i.td)(".e-menu-parent",me)[Pi-1];if(this.isMenu&&Hi.classList.contains("e-menu")&&(_=this.getLIByClass(Hi,ni),_&&_.classList.remove(ni),ri=!0),!ri){const Ms=D&&D.target&&this.getLI(D.target);Q=this.navIdx.length?this.getItem(this.navIdx):null,Je=Q?Q.items:this.items,Te={element:Hi,parentItem:Q,items:Je,event:D,cancel:!1,isFocused:!0},this.trigger("beforeClose",Te,xs=>{let Os,br,Ao,Wr="";const On=!xs.cancel;let mo,Zo,Wo;(On||this.isCMenu)&&(this.isMenu?(Os=(0,i.oq)(Hi,"."+ot),this.hamburgerMode&&(Os.parentElement.style.minHeight="",(0,i.oq)(Hi,".e-menu-item").setAttribute("aria-expanded","false")),this.unWireKeyboardEvent(Os),Us((0,i.s8)(Os.children[0],Ut),Os.children[0]),Ao=(0,i.s8)(Os,Ue.GI),Ao.hide(),Wr=Os.id,Ao.destroy(),(0,i.og)(Os)):this.toggleAnimation(Hi,!1),br={element:Hi,parentItem:Q,items:Je},this.trigger("onClose",br),this.navIdx.pop()),this.updateReactTemplate();const Vo=this.getWrapper()&&this.getUlByNavIdx();this.isCMenu&&(this.canOpen(D.target)&&this.openMenu(null,null,this.pageY,this.pageX,D),this.isCMenu=!1),this.isMenu&&Vo&&Wr.length&&(mo=new RegExp("(.*)-ej2menu-"+this.element.id+"-popup").exec(Wr)[1],Zo=Vo.querySelector('[id="'+mo+'"]'),Wo=Ms&&Vo.querySelector('[id="'+Ms.id+'"]'));const Ol=Ms&&Ms.querySelectorAll(".e-menu-item");if(On&&this.hamburgerMode&&g&&!Ol.length)this.afterCloseMenu(D);else if(On&&!this.hamburgerMode&&this.navIdx.length&&Zo&&!Wo&&"left"!==this.keyType){let Yl=D&&D.target.classList.contains("e-vscroll")?(0,i.oq)(D.target,".e-menu-wrapper"):null;Yl?(Yl=Yl.querySelector(".e-menu-item"),(this.showItemOnClick||Yl&&this.getIndex(Yl.id,!0).length<=this.navIdx.length)&&this.closeMenu(this.navIdx[this.navIdx.length-1],D,!0)):this.closeMenu(this.navIdx[this.navIdx.length-1],D)}else if(On&&!O&&!g&&(this.hamburgerMode&&this.navIdx.length||1===this.navIdx.length))this.closeMenu(null,D);else if(On&&(0,i.le)(g)&&this.navIdx.length)this.closeMenu(null,D);else if(!On||this.isMenu||g||0!==this.navIdx.length||this.isMenusClosed)if(On&&this.isMenu&&D&&D.target&&0!==this.navIdx.length&&(0,i.oq)(D.target,".e-menu-parent.e-control"))this.closeMenu(0,D);else{if(!On||"right"!==this.keyType&&"click"!==this.keyType){const Yl=this.getUlByNavIdx(),cl=this.getLIByClass(Yl,ni);if(cl&&(cl.setAttribute("aria-expanded","false"),cl.classList.remove(ni),(xs.isFocused&&Ms||"left"===this.keyType)&&(cl.classList.add(Xt),cl.focus())),!On&&this.hamburgerMode&&Ms&&"false"===Ms.getAttribute("aria-expanded")&&"true"===Ms.getAttribute("aria-haspopup")){(0,i.oq)(Ms,".e-menu-parent.e-control")?this.navIdx=[]:this.navIdx.pop(),this.navIdx.push(this.cliIdx);const va=this.getItem(this.navIdx);Ms.setAttribute("aria-expanded","true"),this.openMenu(Ms,va,-1,-1,D)}}else this.afterCloseMenu(D);this.navIdx.length<1&&("Hover"===this.showSubMenuOn||"Click"===this.showSubMenuOn)&&(this.showItemOnClick=this.defaultOption,this.showSubMenuOn="Auto")}else this.isMenusClosed=!0,this.closeMenu(0,D);this.removeStateWrapper()})}}}updateReactTemplate(){if(this.isReact&&this.template&&0===this.navIdx.length){const g=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=g,this.renderReactTemplates()}}getMenuItemModel(g,D){if((0,i.le)(g))return null;(0,i.le)(D)&&(D=0);const O=this.getFields(D);return{text:g[O.text],id:g[O.id],items:g[O.child],separator:g[O.separator],iconCss:g[O.iconCss],url:g[O.url]}}getPopups(){const g=[];return[].slice.call(document.querySelectorAll("."+ot)).forEach(D=>{!(0,i.le)(D.querySelector("."+Oi))&&this.getIndex(D.querySelector("."+Oi).id,!0).length&&g.push(D)}),g}isMenuVisible(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&(0,i.pn)(this.element).valueOf()}canOpen(g){let D=!0;if(this.filter){D=!1;const O=this.filter.split(" ");for(let _=0,Q=O.length;_<Q;_++)if((0,i.oq)(g,"."+O[_])){D=!0;break}}return D}openMenu(g,D,O=0,_=0,Q=null,me=this.targetElement){const Te=this.getWrapper();this.lItem=g;const Je=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,(0,i.le)(O)&&(O=-1),(0,i.le)(_)&&(_=-1),g){if(this.uList=this.createItems(D[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&i.AR.isDevice){Te.lastChild.style.display="none";const St={text:D[this.getField("text")].toString(),iconCss:Pt+" e-previous"},ri=new Ui(this.items[0],"items",St,!0),Pi=this.createItems([ri]).children[0];Pi.classList.add(Kt),this.uList.insertBefore(Pi,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+ot,id:g.id+"-ej2menu-"+Je+"-popup"}),this.hamburgerMode?(O=g.offsetHeight,g.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,g,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,g):(this.cssClass&&(0,i.cn)([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(g,this.uList,D,Q,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout(()=>{this.triggerBeforeOpen(g,this.uList,D,Q,0,0,"menu")},this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,Te.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(()=>{this.triggerBeforeOpen(g,this.uList,D,Q,O,_,"none")},this.hoverDelay)):this.triggerBeforeOpen(g,this.uList,D,Q,O,_,"none"))}else this.uList=this.element,this.uList.style.zIndex=(0,Ue.TE)(me||this.element).toString(),this.triggerBeforeOpen(g,this.uList,D,Q,O,_,"none")}calculateIndentSize(g,D){const O=getComputedStyle(D);let _=parseInt(O.textIndent,10);this.navIdx.length<2&&!D.classList.contains("e-blankicon")?_*=2:_+=_/4,g.style.textIndent=_+"px";const Q=g.querySelectorAll(".e-blankicon");if(Q&&Q.length){const me=g.querySelector(".e-menu-icon"),Te=getComputedStyle(me),Je=parseInt(Te.marginRight,10)+me.offsetWidth+_;for(let St=0;St<Q.length;St++)Q[St].style.textIndent=Je+"px"}}generatePopup(g,D,O,_){const Q=new Ue.GI(g,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:O,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:_||this.enableRtl?"none":"flip",Y:"fit"},position:_&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:D,open:()=>{const me=(0,i.Ys)(".e-menu-vscroll",Q.element);me&&(me.style.height="inherit",me.style.maxHeight="");const Te=(0,i.Ys)(".e-ul",Q.element);Q.element.style.maxHeight="",Te.focus(),this.triggerOpen(Te)}});return Q}createHeaderContainer(g){g=g||this.getWrapper();const D=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),O=this.enableHtmlSanitizer?i.pJ.sanitize(this.title):this.title,_=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:O}),Q=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});D.appendChild(_),D.appendChild(Q),g.insertBefore(D,this.element)}openHamburgerMenu(g){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,g,0,0,"hamburger")}closeHamburgerMenu(g){this.trigger("beforeClose",{element:this.element,parentItem:null,event:g,items:this.items,cancel:!1},O=>{O.cancel||(this.closeMenu(null,g),this.element.classList.add("e-hide-menu"),this.trigger("onClose",{element:this.element,parentItem:null,items:this.items}))})}callFit(g,D,O,_,Q){return(0,Ue.Tj)(g,null,{X:D,Y:O},{top:_,left:Q})}triggerBeforeOpen(g,D,O,_,Q,me,Te){const Je=g?O[this.getField("children",this.navIdx.length-1)]:this.items,ri=Te;this.trigger("beforeOpen",{element:D,items:Je,parentItem:O,event:_,cancel:!1,top:Q,left:me,showSubMenuOn:"Auto"},Pi=>{switch(ri){case"menu":this.hamburgerMode||("Auto"!==Pi.showSubMenuOn&&(this.showItemOnClick=!this.defaultOption,this.showSubMenuOn=Pi.showSubMenuOn),this.top=Pi.top,this.left=Pi.left),this.popupWrapper.style.display="block",this.hamburgerMode||(this.popupWrapper.style.maxHeight=this.popupWrapper.getBoundingClientRect().height+"px",this.enableScrolling&&oi(this.createElement,this.popupWrapper,this.uList,"vscroll",this.enableRtl),this.checkScrollOffset(_)),this.hamburgerMode||this.left||this.top?(this.popupObj.collision={X:"none",Y:"none"},this.popupWrapper.style.display=""):(this.popupObj.refreshPosition(this.lItem,!0),this.left=parseInt(this.popupWrapper.style.left,10),this.top=parseInt(this.popupWrapper.style.top,10),this.enableRtl&&(this.left=this.isNestedOrVertical?this.left-this.popupWrapper.offsetWidth-this.lItem.parentElement.offsetWidth+2:this.left-this.popupWrapper.offsetWidth+this.lItem.offsetWidth),this.template&&(this.isReact||this.isAngular)?requestAnimationFrame(()=>{this.collision(),this.popupWrapper.style.display=""}):(this.collision(),this.popupWrapper.style.display=""));break;case"none":this.top=Pi.top,this.left=Pi.left;break;case"hamburger":Pi.cancel||(this.element.classList.remove("e-hide-menu"),this.triggerOpen(this.element))}if("hamburger"!==ri&&(Pi.cancel?(this.isMenu?(this.popupObj.destroy(),(0,i.og)(this.popupWrapper)):D.className.indexOf("e-ul")>-1&&(0,i.og)(D),this.navIdx.pop()):this.isMenu?this.hamburgerMode?(this.popupWrapper.style.top=this.top+"px",this.popupWrapper.style.left="0px",this.toggleAnimation(this.popupWrapper)):(this.setBlankIconStyle(this.popupWrapper),this.wireKeyboardEvent(this.popupWrapper),(0,i.qx)(this.popupWrapper,{selector:"."+Oi}),"fixed"===this.popupWrapper.style.position&&this.top>0?(this.popupWrapper.style.left=this.left+"px",this.popupWrapper.style.top=this.top+scrollY+"px"):(this.popupWrapper.style.left=this.left+"px",this.popupWrapper.style.top=this.top+"px"),this.popupObj.show("None"!==this.animationSettings.effect?{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing}:null,this.lItem)):(this.setBlankIconStyle(this.uList),this.setPosition(this.lItem,this.uList,this.top,this.left),this.toggleAnimation(this.uList))),"right"===this.keyType){let Hi=this.getUlByNavIdx();g.classList.remove(Xt),this.isMenu&&1===this.navIdx.length&&this.removeLIStateByClass([ni],[this.getWrapper()]),g.classList.add(ni),this.action===et&&this.trigger("select",{element:g,item:O,event:_}),g.focus(),Hi=this.getUlByNavIdx();const Ms=this.isValidLI(Hi.children[0],0,this.action);Hi.children[Ms].classList.add(Xt),Hi.children[Ms].focus()}})}collision(){let g;if(g=(0,Ue.vF)(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(g.indexOf("right")>-1||g.indexOf("left")>-1)){this.popupObj.collision.X="none";const D=(0,i.oq)(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?(0,Ue.kl)(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-D+2}g=(0,Ue.vF)(this.popupWrapper,null,this.left,this.top),(g.indexOf("left")>-1||g.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"}setBlankIconStyle(g){const D=[].slice.call(g.getElementsByClassName("e-blankicon"));if(!D.length)return;const O=g.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),_=O.querySelector(".e-menu-icon");if(!_)return;const Q=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},me=getComputedStyle(_);let Te=parseInt(me.fontSize,10);parseInt(me.width,10)&&parseInt(me.width,10)>Te&&(Te=parseInt(me.width,10));const Je=`${Te+parseInt(me[Q.margin],10)+parseInt(getComputedStyle(O)[Q.padding],10)}px`;D.forEach(St=>{St.style[Q.padding]=Je})}checkScrollOffset(g){const D=this.getWrapper();if(D.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){const O=(0,i.le)(g)?this.element:(0,i.oq)(g.target,"."+Oi),_=(0,i.Ys)(".e-hscroll-bar",D);_.scrollLeft>O.offsetLeft&&(_.scrollLeft-=_.scrollLeft-O.offsetLeft);const Q=_.scrollLeft+_.offsetWidth,me=O.offsetLeft+O.offsetWidth;Q<me&&(_.scrollLeft+=me-Q)}}setPosition(g,D,O,_){const Q="px";if(this.toggleVisiblity(D),D===this.element||_>-1&&O>-1){let me=(0,Ue.vF)(D,null,_,O);if(me.indexOf("right")>-1&&(_-=D.offsetWidth),me.indexOf("bottom")>-1&&(O=this.callFit(D,!1,!0,O,_).top-20)<0){const Je=pageYOffset+document.documentElement.clientHeight-D.getBoundingClientRect().height;Je>-1&&(O=Je)}me=(0,Ue.vF)(D,null,_,O),me.indexOf("left")>-1&&(_=this.callFit(D,!0,!1,O,_).left)}else if(i.AR.isDevice)O=Number(this.element.style.top.replace(Q,"")),_=Number(this.element.style.left.replace(Q,""));else{let Te=(0,Ue.kl)(g,this.enableRtl?"left":"right","top");_=Te.left;const Je=(0,Ue.vF)(D,null,this.enableRtl?_-D.offsetWidth:_,O=Te.top),St=Je.indexOf("left")>-1||Je.indexOf("right")>-1;St&&(Te=(0,Ue.kl)(g,this.enableRtl?"right":"left","top"),_=Te.left),(this.enableRtl||St)&&(_=this.enableRtl&&St?_:_-D.offsetWidth),Je.indexOf("bottom")>-1&&(Te=this.callFit(D,!1,!0,O,_),O=Te.top)}this.toggleVisiblity(D,!1),D.style.top=O+Q,D.style.left=_+Q}toggleVisiblity(g,D=!0){g.style.visibility=D?"hidden":"",g.style.display=D?"block":"none"}createItems(g){const D=this.navIdx?this.navIdx.length:0,O=this.getFields(D),_=this.hasField(g,this.getField("iconCss",D)),Q={showIcon:_,moduleName:"menu",fields:O,template:this.template,itemNavigable:!0,itemCreating:Te=>{Te.curData[Te.fields[O.id]]||(Te.curData[Te.fields[O.id]]=(0,i.QI)("menuitem")),Te.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},this.isMenu&&!Te.curData[this.getField("separator",D)]&&(Te.curData.htmlAttributes["aria-label"]=Te.curData[Te.fields.text]),""===Te.curData[Te.fields[O.iconCss]]&&(Te.curData[Te.fields[O.iconCss]]=null)},itemCreated:Te=>{if(Te.curData[this.getField("separator",D)]&&(Te.item.classList.add(Tt),Te.item.removeAttribute("role")),_&&!Te.curData[Te.fields.iconCss]&&!Te.curData[this.getField("separator",D)]&&Te.item.classList.add("e-blankicon"),Te.curData[Te.fields.child]&&Te.curData[Te.fields.child].length){const St=this.createElement("span",{className:Pt+" "+li});Te.item.appendChild(St),Te.item.setAttribute("aria-haspopup","true"),Te.item.setAttribute("aria-expanded","false"),this.isMenu||Te.item.removeAttribute("role"),Te.item.classList.add("e-menu-caret-icon")}this.isMenu&&this.template&&(Te.item.setAttribute("id",Te.curData[Te.fields.id].toString()),Te.item.removeAttribute("data-uid"),Te.item.classList.contains("e-level-1")&&Te.item.classList.remove("e-level-1"),Te.item.classList.contains("e-has-child")&&Te.item.classList.remove("e-has-child")),this.trigger("beforeItemRender",{item:Te.curData,element:Te.item})}};this.setProperties({items:this.items},!0),this.isMenu&&(Q.templateID=this.element.id+"Template");const me=u.Kh.createList(this.createElement,g,Q,!this.template,this);return me.setAttribute("tabindex","0"),this.isMenu&&me.setAttribute("role","menu"),me}moverHandler(g){const D=g.target;this.liTrgt=D;const O=this.getLI(D),_=O?(0,i.oq)(O,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),Q=this.getWrapper(),me=new RegExp("-ej2menu-(.*)-popup");let Te,Je=!1;if(_){if(Te=""!==_.id?me.exec(_.id)[1]:_.querySelector("ul").id,Te!==this.element.id){if(this.removeLIStateByClass([Xt,ni],[this.getWrapper()]),!this.navIdx.length)return;Je=!0}O&&(0,i.oq)(O,".e-"+this.getModuleName()+"-wrapper")&&!Je?(this.removeLIStateByClass([Xt],this.isMenu?[_].concat(this.getPopups()):[_]),this.removeLIStateByClass([Xt],this.isMenu?[Q].concat(this.getPopups()):[Q]),O.classList.add(Xt),this.showItemOnClick||this.clickHandler(g)):this.isMenu&&this.showItemOnClick&&!Je&&this.removeLIStateByClass([Xt],[_].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||D.parentElement===_||(0,i.oq)(D,".e-"+this.getModuleName()+"-popup")||O&&(!O||this.getIndex(O.id,!0).length)||"Hover"===this.showSubMenuOn?Je&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,g)):(this.removeLIStateByClass([Xt],[_]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,g))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}}removeStateWrapper(){if(this.liTrgt){const g=(0,i.oq)(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&g&&this.removeLIStateByClass([Xt,ni],[g])}}removeLIStateByClass(g,D){let O;for(let _=0;_<D.length;_++)g.forEach(Q=>{O=(0,i.Ys)("."+Q,D[_]),O&&O.classList.remove(Q)})}getField(g,D=0){const O=this.fields[g];return"string"==typeof O?O:O[D]?O[D].toString():O[O.length-1].toString()}getFields(g=0){return{id:this.getField("itemId",g),iconCss:this.getField("iconCss",g),text:this.getField("text",g),url:this.getField("url",g),child:this.getField("children",g),separator:this.getField("separator",g)}}hasField(g,D){for(let O=0,_=g.length;O<_;O++)if(g[O][D])return!0;return!1}menuHeaderClickHandler(g){(0,i.oq)(g.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(g):this.closeHamburgerMenu(g))}clickHandler(g){if(this.isTapHold)this.isTapHold=!1;else{const D=this.getWrapper(),O=g.target,_=this.cli=this.getLI(O),Q=new RegExp("-ej2menu-(.*)-popup"),me=_?(0,i.oq)(_,".e-"+this.getModuleName()+"-wrapper"):null,Te=_&&me&&(this.isMenu?this.getIndex(_.id,!0).length>0:D.firstElementChild.id===me.firstElementChild.id);if(i.AR.isDevice&&this.isMenu&&(this.removeLIStateByClass([Xt],[D].concat(this.getPopups())),this.mouseDownHandler(g)),_&&me&&this.isMenu){const Je=me.id?Q.exec(me.id)[1]:me.querySelector(".e-menu-parent").id;if(this.element.id!==Je)return}if(Te&&"click"===g.type&&!_.classList.contains(Kt)){this.setLISelected(_);const Je=this.getIndex(_.id,!0),St=this.getItem(Je);this.trigger("select",{element:_,item:St,event:g})}if(Te&&("mouseover"===g.type||i.AR.isDevice||this.showItemOnClick)){let Je;if(_.classList.contains(Kt)){Je=D.children[this.navIdx.length-1],this.toggleAnimation(Je);const St=this.getLIByClass(Je,ni);St&&St.classList.remove(ni),(0,i.og)(_.parentNode),this.navIdx.pop()}else if(!_.classList.contains(Tt)){this.showSubMenu=!0;const St=_.parentNode;if(this.cliIdx=this.getIdx(St,_),this.isMenu||!i.AR.isDevice){const ri=this.isMenu?Array.prototype.indexOf.call([D].concat(this.getPopups()),(0,i.oq)(St,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(D,St);if(this.navIdx[ri]===this.cliIdx&&(this.showSubMenu=!1),ri!==this.navIdx.length&&("mouseover"!==g.type||this.showSubMenu)){const Pi=this.getLIByClass(St,ni);Pi&&Pi.classList.remove(ni),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(_),this.closeMenu(ri+1,g),this.showItemOnClick&&this.setLISelected(_)}}this.isClosed||this.afterCloseMenu(g),this.isClosed=!1}}else if(this.isMenu&&"DIV"===O.tagName&&this.navIdx.length&&(0,i.oq)(O,".e-menu-vscroll")){const Je=(0,i.oq)(O,"."+ot),St=Array.prototype.indexOf.call(this.getPopups(),Je)+1;St<this.navIdx.length&&(this.closeMenu(St+1,g),Je&&this.removeLIStateByClass([Xt,ni],[Je]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===O.tagName&&O.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(g):("UL"!==O.tagName||(this.isMenu?O.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(O.querySelector("."+Oi).id,!0).length:O.parentElement!==D))&&(_||this.removeLIStateByClass([ni],[D]),(!_||!_.querySelector("."+li))&&this.closeMenu(null,g))}}afterCloseMenu(g){let D;if(this.showSubMenu){D=(0,i.oq)(this.showItemOnClick&&0===this.navIdx.length?g.target:this.element,".e-menu-parent.e-control");const O=this.navIdx.concat(this.cliIdx),_=this.getItem(O);if(_&&_[this.getField("children",O.length-1)]&&_[this.getField("children",O.length-1)].length?(("mouseover"===g.type||i.AR.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&D||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,_,null,null,g))):"mouseover"!==g.type&&this.closeMenu(null,g),!D){const Q=this.getUlByNavIdx(),me=this.getLIByClass(Q,ni);me&&(me.setAttribute("aria-expanded","false"),me.classList.remove(ni))}}this.keyType=""}setLISelected(g){const D=this.getLIByClass(g.parentElement,ni);D&&D.classList.remove(ni),this.isMenu||g.classList.remove(Xt),g.classList.add(ni)}getLIByClass(g,D){for(let O=0,_=g.children.length;O<_;O++)if(g.children[O].classList.contains(D))return g.children[O];return null}getItemIndex(g,D){let O;return O="string"==typeof g?g:g.id,this.getIndex(O,!1!==D)}setItem(g,D,O){let _;_=O?D||g.id:D||g.text;const Q=this.getIndex(_,O),me=this.getItem(Q);me.iconCss=g.iconCss||me.iconCss,me.text=g.text||me.text,me.url=g.url||me.url,me.separator=g.separator||me.separator}getItem(g){const D=(g=g.slice()).pop();return this.getItems(g)[D]}getItems(g){let D=this.items;for(let O=0;O<g.length;O++)D=D[g[O]][this.getField("children",O)];return D}setItems(g,D){const O=this.getItems(D);O.splice(0,O.length);for(let _=0;_<g.length;_++)O.splice(_,0,g[_])}getIdx(g,D,O=!0){let _=Array.prototype.indexOf.call(g.children,D);return O&&g.children[0].classList.contains(Kt)&&_--,_}getLI(g){return"LI"===g.tagName&&g.classList.contains("e-menu-item")?g:(0,i.oq)(g,"li.e-menu-item")}updateItemsByNavIdx(){let g=this.items,D=0;for(let O=0;O<this.navIdx.length&&(g=g[O].items,g);O++){D++;const _=this.getUlByNavIdx(D);if(!_)break;this.updateItem(_,g)}}removeChildElement(g){for(;g.firstElementChild;)g.removeChild(g.firstElementChild);return g}onPropertyChanged(g,D){const O=this.getWrapper();for(const _ of Object.keys(g))switch(_){case"cssClass":D.cssClass&&(0,i.IV)([O],D.cssClass.split(" ")),g.cssClass&&(0,i.cn)([O],g.cssClass.split(" "));break;case"enableRtl":O.classList.toggle("e-rtl");break;case"showItemOnClick":this.unWireEvents(),this.showItemOnClick=g.showItemOnClick,this.wireEvents();break;case"enableScrolling":if(g.enableScrolling){let Q;this.element.classList.contains("e-vertical")?oi(this.createElement,O,this.element,"vscroll",this.enableRtl):oi(this.createElement,O,this.element,"hscroll",this.enableRtl),this.getPopups().forEach(me=>{Q=(0,i.Ys)(".e-ul",me),oi(this.createElement,me,Q,"vscroll",this.enableRtl)})}else{let Q=O.children[0];this.element.classList.contains("e-vertical")?Us((0,i.s8)(Q,Ut),Q):Us((0,i.s8)(Q,Ne),Q),O.style.overflow="",O.appendChild(this.element),this.getPopups().forEach(me=>{Q=me.children[0],Us((0,i.s8)(Q,Ut),Q),me.style.overflow=""})}break;case"items":{let Q,me,Te;if(Object.keys(D.items).length){const Je=Object.keys(g.items);for(let St=0;St<Je.length;St++)me=this.getChangedItemIndex(g,[],Number(Je[St])),me.length<=this.getWrapper().children.length&&(Q=me.pop(),Te=this.getItems(me),this.insertAfter([Te[Q]],Te[Q].text),this.removeItem(Te,me,Q),this.setItems(Te,me)),me.length=0}else{if(this.updateItem(this.element,this.items),!this.hamburgerMode)for(let Je=1,St=O.childElementCount;Je<St;Je++)(0,i.og)(O.lastElementChild);this.navIdx=[]}break}}}updateItem(g,D){(0,i.xr)()&&!this.isMenu?g=this.removeChildElement(g):g.innerHTML="",[].slice.call(this.createItems(D).children).forEach(_=>{g.appendChild(_)})}getChangedItemIndex(g,D,O){D.push(O);const _=Object.keys(g.items[O]).pop();if("items"===_){const Q=g.items[O],me=Object.keys(Q.items).pop();me&&this.getChangedItemIndex(Q,D,Number(me))}else"isParentArray"===_&&D.length>1&&D.pop();return D}removeItem(g,D,O){g.splice(O,1);const _=this.getWrapper().children;D.length<_.length&&(0,i.og)(_[D.length].children[O])}unWireEvents(g=this.target){const D=this.getWrapper();if(g){let O,_;const Q=(0,i.td)(g);for(let me=0,Te=Q.length;me<Te;me++)O=Q[me],this.isMenu?i.bi.remove(O,"click",this.menuHeaderClickHandler):i.AR.isIos?(_=(0,i.s8)(O,i.Xh),_&&_.destroy()):i.bi.remove(O,"contextmenu",this.cmenuHandler);if(!this.isMenu){i.bi.remove(this.targetElement,"scroll",this.scrollHandler);for(const me of(0,Ue.Mm)(this.targetElement))i.bi.remove(me,"scroll",this.scrollHandler)}}i.AR.isDevice||(i.bi.remove(this.isMenu?document:D,"mouseover",this.delegateMoverHandler),i.bi.remove(document,"mousedown",this.delegateMouseDownHandler)),i.bi.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(D),this.rippleFn()}unWireKeyboardEvent(g){const D=(0,i.s8)(g,i.nv);D&&D.destroy()}toggleAnimation(g,D=!0){let O,_;"None"!==this.animationSettings.effect&&D?this.animation.animate(g,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:Q=>{this.hamburgerMode?(_=Q.element.parentElement,Q.element.style.position="absolute",O=_.offsetHeight,Q.element.style.maxHeight=Q.element.offsetHeight+"px",_.style.maxHeight=""):(Q.element.style.display="block",Q.element.style.maxHeight=Q.element.getBoundingClientRect().height+"px")},progress:Q=>{this.hamburgerMode&&(_.style.minHeight=O+Q.element.offsetHeight+"px")},end:Q=>{this.hamburgerMode?(Q.element.style.position="",Q.element.style.maxHeight="",_.style.minHeight="",Q.element.style.top="0px",Q.element.children[0].focus(),this.triggerOpen(Q.element.children[0])):this.end(Q.element,D)}}):this.end(g,D)}triggerOpen(g){const D=this.navIdx.length?this.getItem(this.navIdx):null;this.trigger("onOpen",{element:g,parentItem:D,items:D?D.items:this.items})}end(g,D){if(D)if(g.style.display="block",g.style.maxHeight="",this.triggerOpen(g),g.querySelector("."+Xt))g.querySelector("."+Xt).focus();else{const O=this.getWrapper().children[this.getIdx(this.getWrapper(),g)-1];O?O.querySelector("."+ni).focus():this.element.focus()}else if(g===this.element){const O=this.getLIByClass(this.element,Xt);O&&O.classList.remove(Xt);const _=this.getLIByClass(this.element,ni);_&&_.classList.remove(ni),g.style.display="none"}else(0,i.og)(g)}getPersistData(){return""}getWrapper(){return(0,i.oq)(this.element,".e-"+this.getModuleName()+"-wrapper")}getIndex(g,D,O=this.items,_=[],Q=!1,me=0){let Te;me=Q?me+1:0;for(let Je=0,St=O.length;Je<St;Je++){if(Te=O[Je],(D?Te[this.getField("itemId",me)]:Te[this.getField("text",me)])===g){_.push(Je);break}if(Te[this.getField("children",me)]&&Te[this.getField("children",me)].length){if(-1!==(_=this.getIndex(g,D,Te[this.getField("children",me)],_,!0,me))[_.length-1]){_.unshift(Je);break}Je!==St-1&&_.pop()}else Je===St-1&&_.push(-1)}return Q||-1!==_[0]?_:[]}enableItems(g,D=!0,O){let _,Q,me;const Te=Gt;let Je;for(let St=0;St<g.length;St++){if(me=this.getIndex(g[St],O),this.navIdx.length){if(1!==me.length){Je=!1;for(let ri=0,Pi=me.length-1;ri<Pi;ri++)if(me[ri]!==this.navIdx[ri]){Je=!0;break}if(Je)continue}}else if(1!==me.length)continue;Q=me.pop(),_=this.getUlByNavIdx(me.length),_&&(D?this.isMenu?(_.children[Q].classList.remove(Te),_.children[Q].removeAttribute("aria-disabled")):i.AR.isDevice&&!_.classList.contains("e-contextmenu")?_.children[Q+1].classList.remove(Te):_.children[Q].classList.remove(Te):this.isMenu?(_.children[Q].classList.add(Te),_.children[Q].setAttribute("aria-disabled","true")):i.AR.isDevice&&!_.classList.contains("e-contextmenu")?_.children[Q+1].classList.add(Te):_.children[Q].classList.add(Te))}}showItems(g,D){this.showHideItems(g,!1,D)}hideItems(g,D){this.showHideItems(g,!0,D)}showHideItems(g,D,O){let _,Q,me;for(let Te=0;Te<g.length;Te++)me=this.getIndex(g[Te],O),Q=me.pop(),_=this.getUlByNavIdx(me.length),_&&(D?i.AR.isDevice&&!_.classList.contains("e-contextmenu")?_.children[Q+1].classList.add(Dt):_.children[Q].classList.add(Dt):i.AR.isDevice&&!_.classList.contains("e-contextmenu")?_.children[Q+1].classList.remove(Dt):_.children[Q].classList.remove(Dt))}removeItems(g,D){let O,_,Q;for(let me=0;me<g.length;me++)_=this.getIndex(g[me],D),O=_.pop(),Q=this.getItems(_),this.removeItem(Q,_,O)}insertAfter(g,D,O){this.insertItems(g,D,O)}insertBefore(g,D,O){this.insertItems(g,D,O,!1)}insertItems(g,D,O,_=!0){let Q,me,Te,Je,St;for(let ri=0;ri<g.length;ri++){Te=this.getIndex(D,O),me=Te.pop(),Je=this.getItems(Te),St=new Ui(Je[0],"items",g[ri],!0),Je.splice(_?me+1:me,0,St);const Pi=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(Te.length<Pi.length){me=_?me+1:me,Q=this.createItems(Je).children[me];const Hi=this.isMenu?(0,i.Ys)(".e-menu-parent",Pi[Te.length]):Pi[Te.length];Hi.insertBefore(Q,Hi.children[me])}}}removeAttributes(){["top","left","display","z-index"].forEach(g=>{this.element.style.removeProperty(g)}),["role","tabindex","class","style"].forEach(g=>{"class"===g&&this.element.classList.contains("e-menu-parent")&&this.element.classList.remove("e-menu-parent"),(-1===["class","style"].indexOf(g)||!this.element.getAttribute(g))&&this.element.removeAttribute(g),this.isMenu&&"class"===g&&this.element.classList.contains("e-vertical")&&this.element.classList.remove("e-vertical")})}destroy(){const g=this.getWrapper();if(g){if(this.unWireEvents(),this.isMenu)this.closeMenu(),(0,i.xr)()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),g.parentNode.insertBefore(this.element,g),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)(0,i.cn)([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){const D=this.clonedElement.nextElementSibling;D&&D!==g?this.clonedElement.parentElement.insertBefore(this.element,D):this.clonedElement.parentElement.appendChild(this.element),(0,i.xr)()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",(0,i.R3)([].slice.call(this.clonedElement.children),this.element),(0,i.og)(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?((0,i.og)(this.element),g.style.display="",g.classList.remove("e-"+this.getModuleName()+"-wrapper"),g.removeAttribute("data-ripple")):(0,i.og)(g),super.destroy(),this.template&&this.clearTemplate(["template"])}}};$i([(0,i.ju)()],bs.prototype,"beforeItemRender",void 0),$i([(0,i.ju)()],bs.prototype,"beforeOpen",void 0),$i([(0,i.ju)()],bs.prototype,"onOpen",void 0),$i([(0,i.ju)()],bs.prototype,"beforeClose",void 0),$i([(0,i.ju)()],bs.prototype,"onClose",void 0),$i([(0,i.ju)()],bs.prototype,"select",void 0),$i([(0,i.ju)()],bs.prototype,"created",void 0),$i([(0,i.Z9)("")],bs.prototype,"cssClass",void 0),$i([(0,i.Z9)(0)],bs.prototype,"hoverDelay",void 0),$i([(0,i.Z9)(!1)],bs.prototype,"showItemOnClick",void 0),$i([(0,i.Z9)("")],bs.prototype,"target",void 0),$i([(0,i.Z9)("")],bs.prototype,"filter",void 0),$i([(0,i.Z9)(null)],bs.prototype,"template",void 0),$i([(0,i.Z9)(!1)],bs.prototype,"enableScrolling",void 0),$i([(0,i.Z9)(!1)],bs.prototype,"enableHtmlSanitizer",void 0),$i([(0,i.Zz)({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Ei)],bs.prototype,"fields",void 0),$i([(0,i.FE)([],Ui)],bs.prototype,"items",void 0),$i([(0,i.Zz)({duration:400,easing:"ease",effect:"SlideDown"},As)],bs.prototype,"animationSettings",void 0),bs=$i([i.Zl],bs);var kt=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const wt="e-vertical",Ot="e-toolbar-items",Ai="e-toolbar-item",bi="e-rtl",Ti="e-separator",ns="e-popup-up-icon",ls="e-popup-down-icon",ws="e-popup-open",Ds="e-template",on="e-overlay",Bn="e-toolbar-text",Kn="e-popup-text",Dn="e-overflow-show",In="e-overflow-hide",Yt="e-hor-nav",Xi="e-scroll-nav",Rs="e-toolbar-center",gi="e-tbar-pos",tt="e-hscroll-bar",ci="e-toolbar-pop",pi="e-toolbar-popup",as="e-nav-active",Es="e-ignore",Ns="e-popup-alone",bn="e-hidden",pn="e-toolbar-multirow",ms="e-multirow-pos",dn="e-multirow-separator",Cs="e-extended-separator",Yn="e-extended-toolbar",Ln="e-toolbar-extended",rs="e-tbar-extended";class hn extends i.rt{}kt([(0,i.Z9)("")],hn.prototype,"id",void 0),kt([(0,i.Z9)("")],hn.prototype,"text",void 0),kt([(0,i.Z9)("auto")],hn.prototype,"width",void 0),kt([(0,i.Z9)("")],hn.prototype,"cssClass",void 0),kt([(0,i.Z9)(!1)],hn.prototype,"showAlwaysInPopup",void 0),kt([(0,i.Z9)(!1)],hn.prototype,"disabled",void 0),kt([(0,i.Z9)("")],hn.prototype,"prefixIcon",void 0),kt([(0,i.Z9)("")],hn.prototype,"suffixIcon",void 0),kt([(0,i.Z9)(!0)],hn.prototype,"visible",void 0),kt([(0,i.Z9)("None")],hn.prototype,"overflow",void 0),kt([(0,i.Z9)("")],hn.prototype,"template",void 0),kt([(0,i.Z9)("Button")],hn.prototype,"type",void 0),kt([(0,i.Z9)("Both")],hn.prototype,"showTextOn",void 0),kt([(0,i.Z9)(null)],hn.prototype,"htmlAttributes",void 0),kt([(0,i.Z9)("")],hn.prototype,"tooltipText",void 0),kt([(0,i.Z9)("Left")],hn.prototype,"align",void 0),kt([(0,i.ju)()],hn.prototype,"click",void 0);let cn=class extends i.wA{constructor(g,D){super(g,D),this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"}}destroy(){(this.isReact||this.isAngular)&&this.clearTemplate();const g=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(g).forEach(D=>{!(0,i.le)(D)&&!(0,i.le)(D.ej2_instances)&&!(0,i.le)(D.ej2_instances[0])&&!D.ej2_instances[0].isDestroyed&&D.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(D=>{(0,i.le)(this.element.querySelector(D))||(document.body.appendChild(this.element.querySelector(D)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),(0,i.og)(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&(0,i.IV)([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(D=>this.element.removeAttribute(D)),super.destroy()}preRender(){const g={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",g),this.enableCollision=g.enableCollision,this.scrollStep=g.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(wt),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,bi)}wireEvents(){i.bi.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}wireKeyboardEvent(){this.keyModule=new i.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),i.bi.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}unwireKeyboardEvent(){this.keyModule&&(i.bi.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}docKeyDown(g){if("INPUT"===g.target.tagName)return;const D=!(0,i.le)(this.popObj)&&(0,i.pn)(this.popObj.element)&&"Extended"!==this.overflowMode;9===g.keyCode&&!0===g.target.classList.contains("e-hor-nav")&&D&&this.popObj.hide({name:"FadeOut",duration:100}),(40===g.keyCode||38===g.keyCode||35===g.keyCode||36===g.keyCode)&&g.preventDefault()}unwireEvents(){i.bi.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),i.bi.remove(document,"scroll",this.docEvent),i.bi.remove(document,"click",this.docEvent)}clearProperty(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}docEvent(g){const D=(0,i.oq)(g.target,".e-popup");this.popObj&&(0,i.pn)(this.popObj.element)&&!D&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}destroyScroll(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,gi),this.scrollModule.destroy(),this.scrollModule=null)}destroyItems(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Ai)).forEach(g=>{(0,i.og)(g)}),this.tbarAlign){const g=this.element.querySelector("."+Ot);[].slice.call(g.children).forEach(D=>{(0,i.og)(D)}),this.tbarAlign=!1,this.remove(g,gi)}this.clearProperty()}destroyMode(){this.scrollModule&&(this.remove(this.scrollModule.element,bi),this.destroyScroll()),this.remove(this.element,rs),this.remove(this.element,Yn);const g=this.element.querySelector(".e-toolbar-multirow");g&&this.remove(g,pn),this.popObj&&this.popupRefresh(this.popObj.element,!0)}add(g,D){g.classList.add(D)}remove(g,D){g.classList.remove(D)}elementFocus(g){const D=g.firstElementChild;D?(D.focus(),this.activeEleSwitch(g)):g.focus()}clstElement(g,D){let O;return O=g&&this.popObj&&(0,i.pn)(this.popObj.element)?this.popObj.element.querySelector("."+Ai):this.element===D||g?this.element.querySelector("."+Ai+":not(."+on+" ):not(."+Ti+" ):not(."+bn+" )"):(0,i.oq)(D,"."+Ai),O}keyHandling(g,D,O,_,Q){const me=this.popObj,Te=this.element,Je={name:"FadeOut",duration:100},St="moveUp"===D.action?"previous":"next";let ri,Pi;switch(D.action){case"moveRight":if(this.isVertical)return;Te===O?this.elementFocus(g):_||this.eleFocus(g,"next");break;case"moveLeft":if(this.isVertical)return;_||this.eleFocus(g,"previous");break;case"home":case"end":if(g){let Hi=(0,i.oq)(g,".e-popup");const Ms=this.element.querySelector("."+Ln);"Extended"===this.overflowMode&&Ms&&Ms.classList.contains("e-popup-open")&&(Hi="end"===D.action?Ms:null),Hi?(0,i.pn)(this.popObj.element)&&(Pi=[].slice.call(Hi.children),ri="home"===D.action?Pi[0]:Pi[Pi.length-1]):(Pi=this.element.querySelectorAll("."+Ot+" ."+Ai+":not(."+Ti+")"),ri="home"===D.action?Pi[0]:Pi[Pi.length-1]),ri&&this.elementFocus(ri)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(g,"moveUp"===D.action?"previous":"next");else if(me&&(0,i.oq)(O,".e-popup")){const Hi=me.element,Ms=Hi.firstElementChild;if("previous"===St&&Ms===g||"next"===St&&Hi.lastElementChild===g)return;this.eleFocus(g,St)}else"moveDown"===D.action&&me&&(0,i.pn)(me.element)&&this.elementFocus(g);break;case"tab":if(!Q&&!_){const Hi=g.firstElementChild;Te===O&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(Hi),Hi.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":me&&"Extended"!==this.overflowMode&&me.hide(Je);break;case"popupOpen":if(!_)return;me&&!(0,i.pn)(me.element)?(me.element.style.top=Te.offsetHeight+"px",me.show({name:"FadeIn",duration:100})):me.hide(Je)}}keyActionHandler(g){const D=g.target;if("INPUT"===D.tagName||"TEXTAREA"===D.tagName||this.element.classList.contains(on))return;g.preventDefault();const O=D.classList.contains(Yt),_=D.classList.contains(Xi),Q=this.clstElement(O,D);(Q||_)&&this.keyHandling(Q,g,D,O,_)}disable(g){const D=this.element;g?D.classList.add(on):D.classList.remove(on),D.setAttribute("tabindex",g?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",g?"-1":"0"),this.scrollModule&&this.scrollModule.disable(g),this.popObj&&((0,i.pn)(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),D.querySelector("#"+D.id+"_nav").setAttribute("tabindex",g?"-1":"0"))}eleContains(g){return g.classList.contains(Ti)||g.classList.contains(on)||g.getAttribute("disabled")||g.classList.contains(bn)||!(0,i.pn)(g)}eleFocus(g,D){const O=Object(g)[D+"ElementSibling"];if(O){if(this.eleContains(O))return void this.eleFocus(O,D);this.elementFocus(O)}else if(this.tbarAlign){let _=Object(g.parentElement)[D+"ElementSibling"];if(!(0,i.le)(_)&&0===_.children.length&&(_=Object(_)[D+"ElementSibling"]),!(0,i.le)(_)&&_.children.length>0)if("next"===D){const Q=_.querySelector("."+Ai);this.eleContains(Q)?this.eleFocus(Q,D):(Q.firstElementChild.focus(),this.activeEleSwitch(Q))}else{const Q=_.lastElementChild;this.eleContains(Q)?this.eleFocus(Q,D):this.elementFocus(Q)}}}clickHandler(g){const D=g.target,O=this.element,_=!(0,i.le)((0,i.oq)(D,"."+ci));let Te,Q=D.classList,me=(0,i.oq)(D,"."+Yt);me||(me=D),!O.children[0].classList.contains("e-hscroll")&&!O.children[0].classList.contains("e-vscroll")&&Q.contains(Yt)&&(Q=D.querySelector(".e-icons").classList),(Q.contains(ns)||Q.contains(ls))&&this.popupClickHandler(O,me,bi);const Je=(0,i.oq)(g.target,"."+Ai);if(((0,i.le)(Je)||Je.classList.contains(on))&&!me.classList.contains(Yt))return;Je&&(Te=this.items[this.tbarEle.indexOf(Je)]);const St={originalEvent:g,item:Te};Te&&!(0,i.le)(Te.click)&&this.trigger("items["+this.tbarEle.indexOf(Je)+"].click",St),St.cancel||this.trigger("clicked",St,ri=>{!(0,i.le)(this.popObj)&&_&&!ri.cancel&&"Popup"===this.overflowMode&&ri.item&&"Input"!==ri.item.type&&this.popObj.hide({name:"FadeOut",duration:100})})}popupClickHandler(g,D,O){const _=this.popObj;(0,i.pn)(_.element)?(D.classList.remove(as),_.hide({name:"FadeOut",duration:100})):(g.classList.contains(O)&&(_.enableRtl=!0,_.position={X:"left",Y:"top"}),0===_.offsetX&&!g.classList.contains(O)&&(_.enableRtl=!1,_.position={X:"right",Y:"top"}),_.dataBind(),_.refreshPosition(),_.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(_.element.style.minHeight="0px"),D.classList.add(as),_.show({name:"FadeIn",duration:100}))}render(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const g=(0,i.Ac)(this.width),D=(0,i.Ac)(this.height);("msie"!==i.AR.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&(0,i.V7)(this.element,{height:D}),(0,i.V7)(this.element,{width:g}),(0,i.Y4)(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&(0,i.cn)([this.element],this.cssClass.split(" "))}renderControl(){const g=this.element;this.trgtEle=g.children.length>0?g.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}renderLayout(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}itemsAlign(g,D){let O,_;this.tbarEle||(this.tbarEle=[]);for(let Q=0;Q<g.length;Q++)O=this.renderSubComponent(g[Q],Q),-1===this.tbarEle.indexOf(O)&&this.tbarEle.push(O),this.tbarAlign||this.tbarItemAlign(g[Q],D,Q),_=D.querySelector(".e-toolbar-"+g[Q].align.toLowerCase()),_?(g[Q].showAlwaysInPopup&&"Show"!==g[Q].overflow||this.tbarAlgEle[(g[Q].align+"s").toLowerCase()].push(O),_.appendChild(O)):D.appendChild(O);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())}changeOrientation(){const g=this.element;this.isVertical?(g.classList.remove(wt),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(g.style.height=this.height),g.setAttribute("aria-orientation","horizontal")):(g.classList.add(wt),this.isVertical=!0,g.setAttribute("aria-orientation","vertical"),(0,i.V7)(this.element,{height:(0,i.Ac)(this.height),width:(0,i.Ac)(this.width)})),this.destroyMode(),this.refreshOverflow()}initScroll(g,D){!this.scrollModule&&this.checkOverflow(g,D[0])&&(this.tbarAlign&&this.element.querySelector("."+Ot+" ."+Rs).removeAttribute("style"),this.scrollModule=this.isVertical?new Ut({scrollStep:this.scrollStep,enableRtl:this.enableRtl},D[0]):new Ne({scrollStep:this.scrollStep,enableRtl:this.enableRtl},D[0]),this.remove(this.scrollModule.element,gi),(0,i.V7)(this.element,{overflow:"hidden"}))}itemWidthCal(g){let O,D=0;return[].slice.call((0,i.td)("."+Ai,g)).forEach(_=>{(0,i.pn)(_)&&(O=window.getComputedStyle(_),D+=this.isVertical?_.offsetHeight:_.offsetWidth,D+=parseFloat(this.isVertical?O.marginTop:O.marginRight),D+=parseFloat(this.isVertical?O.marginBottom:O.marginLeft))}),D}getScrollCntEle(g){return g.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}checkOverflow(g,D){if((0,i.le)(g)||(0,i.le)(D)||!(0,i.pn)(g))return!1;const O=this.isVertical?g.offsetHeight:g.offsetWidth;let _=this.isVertical?D.offsetHeight:D.offsetWidth;(this.tbarAlign||this.scrollModule||O===_)&&(_=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(D):D));const Q=g.querySelector("."+Yt),me=g.querySelector("."+Xi);let Te=0;return Q?Te=this.isVertical?Q.offsetHeight:Q.offsetWidth:me&&(Te=this.isVertical?2*me.offsetHeight:2*me.offsetWidth),_>O-Te}refreshOverflow(){this.resize()}toolbarAlign(g){this.tbarAlign&&(this.add(g,gi),this.itemPositioning())}renderOverflowMode(){const g=this.element,D=g.querySelector("."+Ot),O=this.popupPriCount>0;if(g&&g.children.length>0)switch(this.offsetWid=g.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===i.AR.info.name&&"auto"===this.height&&(g.style.height=""),this.overflowMode){case"Scrollable":(0,i.le)(this.scrollModule)&&this.initScroll(g,[].slice.call(g.getElementsByClassName(Ot)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(g,D)||O)&&this.setOverflowAttributes(g),this.toolbarAlign(D);break;case"MultiRow":this.add(D,pn),this.checkOverflow(g,D)&&this.tbarAlign&&(this.removePositioning(),this.add(D,ms)),"hidden"===g.style.overflow&&(g.style.overflow=""),("msie"===i.AR.info.name||"auto"!==g.style.height)&&(g.style.height="auto");break;case"Extended":this.add(this.element,Yn),(this.checkOverflow(g,D)||O)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(g)),this.toolbarAlign(D)}}setOverflowAttributes(g){this.createPopupEle(g,[].slice.call((0,i.td)("."+Ot+" ."+Ai,g))),this.element.querySelector("."+Yt).setAttribute("tabIndex","0"),this.element.querySelector("."+Yt).setAttribute("role","list")}separator(){const g=this.element,D=[].slice.call(g.querySelectorAll("."+Ti)),O=g.querySelector("."+dn),_=g.querySelector("."+Cs),Q="MultiRow"===this.overflowMode?O:_;null!==Q&&("MultiRow"===this.overflowMode?Q.classList.remove(dn):"Extended"===this.overflowMode&&Q.classList.remove(Cs));for(let me=0;me<=D.length-1;me++)D[me].offsetLeft<30&&0!==D[me].offsetLeft&&("MultiRow"===this.overflowMode?D[me].classList.add(dn):"Extended"===this.overflowMode&&D[me].classList.add(Cs))}createPopupEle(g,D){let O=g.querySelector("."+Yt);const _=this.isVertical;O||this.createPopupIcon(g),O=g.querySelector("."+Yt);const me=(_?g.offsetHeight:g.offsetWidth)-(_?O.offsetHeight:O.offsetWidth);this.element.classList.remove("e-rtl"),(0,i.V7)(this.element,{direction:"initial"}),this.checkPriority(g,D,me,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}pushingPoppedEle(g,D,O,_,Q){const me=g.element,Te=[].slice.call((0,i.td)("."+pi,me.querySelector("."+Ot)));let Je=(0,i.td)("."+Dn,O),St=0,ri=0;Te.forEach((Hi,Ms)=>{Je=(0,i.td)("."+Dn,O),Hi.classList.contains(Dn)&&Je.length>0?g.tbResize&&Je.length>Ms?(O.insertBefore(Hi,Je[Ms]),++ri):(O.insertBefore(Hi,O.children[Je.length]),++ri):Hi.classList.contains(Dn)||g.tbResize&&Hi.classList.contains(In)&&O.children.length>0&&0===Je.length?(O.insertBefore(Hi,O.firstChild),++ri):Hi.classList.contains(In)?D.push(Hi):g.tbResize?(O.insertBefore(Hi,O.childNodes[St+ri]),++St):O.appendChild(Hi),Hi.classList.contains(Ti)?(0,i.V7)(Hi,{display:"",height:Q+"px"}):(0,i.V7)(Hi,{display:"",height:_+"px"})}),D.forEach(Hi=>{O.appendChild(Hi)});const Pi=(0,i.td)("."+Ai,me.querySelector("."+Ot));for(let Hi=Pi.length-1;Hi>=0;Hi--){const Ms=Pi[Hi];if(!Ms.classList.contains(Ti)||"Extended"===this.overflowMode)break;(0,i.V7)(Ms,{display:"none"})}}createPopup(){const g=this.element;let D,O;"Extended"===this.overflowMode&&(O=g.querySelector("."+Ti+":not(."+pi+")"),D="auto"===g.style.height||""===g.style.height?null:O.offsetHeight);const _=g.querySelector("."+Ai+":not(."+Ti+"):not(."+pi+")"),Q="auto"===g.style.height||""===g.style.height?null:_&&_.offsetHeight;let me;if((0,i.Ys)("#"+g.id+"_popup."+ci,g))me=(0,i.Ys)("#"+g.id+"_popup."+ci,g);else{const Je=this.createElement("div",{id:g.id+"_popup",className:ci+" "+Ln}),St=this.createElement("div",{id:g.id+"_popup",className:ci});me="Extended"===this.overflowMode?Je:St}this.pushingPoppedEle(this,[],me,Q,D),this.popupInit(g,me)}getElementOffsetY(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}popupInit(g,D){if(this.popObj){const O=this.popObj.element;(0,i.V7)(O,{maxHeight:"",display:"block"}),(0,i.V7)(O,{maxHeight:O.offsetHeight+"px",display:""})}else{g.appendChild(D),(0,i.V7)(this.element,{overflow:""});const O=window.getComputedStyle(this.element),_=new Ue.GI(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(_.appendTo(D),"Extended"===this.overflowMode&&(_.width=parseFloat(O.width)+2*parseFloat(O.borderRightWidth),_.offsetX=0),i.bi.add(document,"scroll",this.docEvent.bind(this)),i.bi.add(document,"click ",this.docEvent.bind(this)),_.element.style.maxHeight=_.element.offsetHeight+"px",this.isVertical&&(_.element.style.visibility="hidden"),this.isExtendedOpen){const Q=this.element.querySelector("."+Yt);Q.classList.add(as),(0,i.s1)(Q.firstElementChild,[ns],[ls]),this.element.querySelector("."+Ln).classList.add(ws)}else _.hide();this.popObj=_,this.element.setAttribute("aria-haspopup","true")}}tbarPopupHandler(g){"Extended"===this.overflowMode&&(g?this.add(this.element,rs):this.remove(this.element,rs))}popupOpen(g){const D=this.popObj;this.isVertical||(D.offsetY=this.getElementOffsetY(),D.dataBind());const O=this.popObj.element,_=this.popObj.element.parentElement,Q=_.querySelector("."+Yt);(0,i.V7)(D.element,{height:"auto",maxHeight:""}),D.element.style.maxHeight=D.element.offsetHeight+"px","Extended"===this.overflowMode&&(D.element.style.minHeight="");const me=O.offsetTop+O.offsetHeight+(0,Ue.kl)(_).top,Te=Q.firstElementChild;Q.classList.add(as),(0,i.s1)(Te,[ns],[ls]),this.tbarPopupHandler(!0);const Je=(0,i.le)(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+Je<me&&this.element.offsetTop<O.offsetHeight){let St=O.offsetHeight-(me-window.innerHeight-Je+5);D.height=St+"px";for(let ri=0;ri<=O.childElementCount;ri++){const Pi=O.children[ri];if(Pi.offsetTop+Pi.offsetHeight>St){St=Pi.offsetTop;break}}(0,i.V7)(D.element,{maxHeight:St+"px"})}else if(this.isVertical){const St=this.element.getBoundingClientRect();(0,i.V7)(D.element,{maxHeight:St.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(D){const St=O.getBoundingClientRect();St.right>document.documentElement.clientWidth&&St.width>_.getBoundingClientRect().width&&(D.collision={Y:"none"},D.dataBind()),D.refreshPosition()}}popupClose(g){const O=this.element.querySelector("."+Yt),_=O.firstElementChild;O.classList.remove(as),(0,i.s1)(_,[ls],[ns]),this.tbarPopupHandler(!1)}checkPriority(g,D,O,_){const Q=this.popupPriCount>0,Te=O;let Je,St,ri=0,Pi=0,Hi=0;const Ms=(xs,Os)=>{let br=!1;return Os.forEach(Wr=>{xs.classList.contains(Wr)&&(br=!0)}),br};for(let xs=D.length-1;xs>=0;xs--){let Os;const br=window.getComputedStyle(D[xs]);this.isVertical?(Os=parseFloat(br.marginTop),Os+=parseFloat(br.marginBottom)):(Os=parseFloat(br.marginRight),Os+=parseFloat(br.marginLeft));const Wr=D[xs]===this.tbarEle[0];Wr&&(this.tbarEleMrgn=Os),Je=this.isVertical?D[xs].offsetHeight:D[xs].offsetWidth;const Ao=Wr?Je+Os:Je;if(Ms(D[xs],[Ns])&&Q&&(D[xs].classList.add(pi),(0,i.V7)(D[xs],this.isVertical?{display:"none",minHeight:Ao+"px"}:{display:"none",minWidth:Ao+"px"}),Hi++),St=this.isVertical?D[xs].offsetTop+D[xs].offsetHeight+Os>O:D[xs].offsetLeft+D[xs].offsetWidth+Os>O,St){if(D[xs].classList.contains(Ti)){if("Extended"===this.overflowMode)Pi===Hi&&Ms(D[xs],[Ti,Es])&&(D[xs].classList.add(pi),Hi++),Pi++;else if("Popup"===this.overflowMode){if(ri>0&&Pi===Hi){const On=D[xs+Pi+(ri-1)];Ms(On,[Ti,Es])&&(0,i.V7)(On,{display:"none"})}ri++,Pi=0,Hi=0}}else Pi++;D[xs].classList.contains(Dn)&&_||Ms(D[xs],[Ti,Es])?O-=(this.isVertical?D[xs].offsetHeight:D[xs].offsetWidth)+Os:(D[xs].classList.add(pi),(0,i.V7)(D[xs],this.isVertical?{display:"none",minHeight:Ao+"px"}:{display:"none",minWidth:Ao+"px"}),Hi++)}}if(_){const xs=(0,i.td)("."+Ai+":not(."+pi+")",this.element);this.checkPriority(g,xs,Te,!1)}}createPopupIcon(g){const D=g.id.concat("_nav");let O="e-"+g.id.concat("_nav e-hor-nav");O="Extended"===this.overflowMode?O+" e-expended-nav":O;const _=this.createElement("div",{id:D,className:O});("msie"===i.AR.info.name||"edge"===i.AR.info.name)&&_.classList.add("e-ie-align");const Q=this.createElement("div",{className:ls+" e-icons"});_.appendChild(Q),_.setAttribute("tabindex","0"),_.setAttribute("role","list"),g.appendChild(_)}tbarPriRef(g,D,O,_,Q,me,Te,Je){const St=Je,Hi=(0,i.td)("."+pi+":not(."+Dn+")",this.popObj.element).length,Ms=(xs,Os)=>xs.classList.contains(Os);if(0===(0,i.td)(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",g).length){const xs=g.children[D-(D-O)-1],Os=!(0,i.le)(xs)&&Ms(xs,Es);if(!(0,i.le)(xs)&&Ms(xs,Ti)&&!(0,i.pn)(xs)||Os){const br="none";xs.style.display="inherit";const Wr=xs.offsetWidth+2*parseFloat(window.getComputedStyle(xs).marginRight),Ao=xs.previousElementSibling;me+Wr<Te||Q?(g.insertBefore(_,g.children[D+St-(D-O)]),(0,i.le)(Ao)||(Ao.style.display="")):Ao.classList.contains(Ti)&&(Ao.style.display=br),xs.style.display=""}else g.insertBefore(_,g.children[D+St-(D-O)])}else g.insertBefore(_,g.children[D+St-Hi])}popupRefresh(g,D){const O=this.element,_=this.isVertical,Q=O.querySelector("."+Ot);let Te,me=O.querySelector("."+Yt);if((0,i.le)(me))return;Q.removeAttribute("style"),g.style.display="block",Te=_?O.offsetHeight-(me.offsetHeight+Q.offsetHeight):O.offsetWidth-(me.offsetWidth+Q.offsetWidth);let Je=0;[].slice.call(g.children).forEach(St=>{Je+=this.popupEleWidth(St),(0,i.V7)(St,{position:""})}),Te+(_?me.offsetHeight:me.offsetWidth)>Je&&0===this.popupPriCount&&(D=!0),this.popupEleRefresh(Te,g,D),g.style.display="",0===g.children.length&&me&&this.popObj&&((0,i.og)(me),me=null,this.popObj.destroy(),(0,i.og)(this.popObj.element),this.popObj=null,O.setAttribute("aria-haspopup","false"))}ignoreEleFetch(g,D){const O=[].slice.call(D.querySelectorAll("."+Es)),_=[];let Q=0;return O.length>0?(O.forEach(me=>{_.push([].slice.call(D.children).indexOf(me))}),_.forEach(me=>{me<=g&&Q++}),Q):0}checkPopupRefresh(g,D){D.style.display="block";const O=this.popupEleWidth(D.firstElementChild);D.firstElementChild.style.removeProperty("Position");const _=g.offsetWidth-g.querySelector("."+Yt).offsetWidth,Q=g.querySelector("."+Ot).offsetWidth;return D.style.removeProperty("display"),_>O+Q}popupEleWidth(g){g.style.position="absolute";let D=this.isVertical?g.offsetHeight:g.offsetWidth;const O=g.querySelector(".e-tbar-btn-text");if(g.classList.contains("e-tbtn-align")||g.classList.contains(Kn)){const _=g.children[0];!(0,i.le)(O)&&g.classList.contains(Kn)?O.style.display="none":!(0,i.le)(O)&&g.classList.contains(Bn)&&(O.style.display="block"),_.style.minWidth="0%",D=parseFloat(this.isVertical?g.style.minHeight:g.style.minWidth),_.style.minWidth="",_.style.minHeight="",(0,i.le)(O)||(O.style.display="")}return D}popupEleRefresh(g,D,O){const _=this.popupPriCount>0;let me,Te,Q=this.tbarEle,Je=this.element.querySelector("."+Ot),St=0;for(const Pi of[].slice.call(D.children)){if(Pi.classList.contains(Ns)&&_&&!O)continue;let Hi=this.popupEleWidth(Pi);if(Pi===this.tbarEle[0]&&(Hi+=this.tbarEleMrgn),Pi.style.position="",!(Hi<g||O))break;{if((0,i.V7)(Pi,{minWidth:"",height:"",minHeight:""}),Pi.classList.contains(In)||Pi.classList.remove(pi),Te=this.tbarEle.indexOf(Pi),this.tbarAlign){const xs=this.items[Te].align;Te=this.tbarAlgEle[(xs+"s").toLowerCase()].indexOf(Pi),Q=this.tbarAlgEle[(xs+"s").toLowerCase()],Je=this.element.querySelector("."+Ot+" .e-toolbar-"+xs.toLowerCase())}let Ms=0;"Extended"!==this.overflowMode&&Q.slice(0,Te).forEach(xs=>{(xs.classList.contains(Dn)||xs.classList.contains(Ti))&&(xs.classList.contains(Ti)&&(xs.style.display="",g-=xs.offsetWidth),Ms++)}),St=this.ignoreEleFetch(Te,Je),Pi.classList.contains(Dn)?(this.tbarPriRef(Je,Te,Ms,Pi,O,Hi,g,St),g-=Pi.offsetWidth):0===Te?(Je.insertBefore(Pi,Je.firstChild),g-=Pi.offsetWidth):(me=(0,i.td)("."+Dn,this.popObj.element).length,Je.insertBefore(Pi,Je.children[Te+St-me]),g-=Pi.offsetWidth),Pi.style.height=""}}this.checkOverflow(this.element,this.element.getElementsByClassName(Ot)[0])&&!O&&this.renderOverflowMode()}removePositioning(){const g=this.element.querySelector("."+Ot);if((0,i.le)(g)||!g.classList.contains(gi))return;this.remove(g,gi);const D=[].slice.call(g.childNodes);D[1].removeAttribute("style"),D[2].removeAttribute("style")}refreshPositioning(){const g=this.element.querySelector("."+Ot);this.add(g,gi),this.itemPositioning()}itemPositioning(){const g=this.element.querySelector("."+Ot);let D;if((0,i.le)(g)||!g.classList.contains(gi))return;const O=this.element.querySelector("."+Yt);let _;_=[].slice.call(this.scrollModule?g.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:g.childNodes),D=this.isVertical?_[0].offsetHeight+_[2].offsetHeight:_[0].offsetWidth+_[2].offsetWidth;let Q=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(O){Q-=this.isVertical?O.offsetHeight:O.offsetWidth;const Je=(this.isVertical?O.offsetHeight:O.offsetWidth)+"px";_[2].removeAttribute("style"),this.isVertical?this.enableRtl?_[2].style.top=Je:_[2].style.bottom=Je:this.enableRtl?_[2].style.left=Je:_[2].style.right=Je}if(Q<=D)return;const me=(Q-D-(this.isVertical?_[1].offsetHeight:_[1].offsetWidth))/2;_[1].removeAttribute("style");const Te=(this.isVertical?_[0].offsetHeight:_[0].offsetWidth)+me+"px";this.isVertical?this.enableRtl?_[1].style.marginBottom=Te:_[1].style.marginTop=Te:this.enableRtl?_[1].style.marginRight=Te:_[1].style.marginLeft=Te}tbarItemAlign(g,D,O){if(g.showAlwaysInPopup&&"Show"!==g.overflow)return;const _=[];if(_.push(this.createElement("div",{className:"e-toolbar-left"})),_.push(this.createElement("div",{className:Rs})),_.push(this.createElement("div",{className:"e-toolbar-right"})),0===O&&"Left"!==g.align)_.forEach(Q=>{D.appendChild(Q)}),this.tbarAlign=!0,this.add(D,gi);else if("Left"!==g.align){const me=_[0];[].slice.call(D.childNodes).forEach(Te=>{this.tbarAlgEle.lefts.push(Te),me.appendChild(Te)}),D.appendChild(me),D.appendChild(_[1]),D.appendChild(_[2]),this.tbarAlign=!0,this.add(D,gi)}}ctrlTemplate(){this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Ot),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(D=>{"DIV"===D.tagName&&(this.tbarEle.push(D),D.setAttribute("aria-disabled","false"),this.add(D,Ai))})}renderItems(){const g=this.element,D=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(g&&D.length>0){let O;g&&g.children.length>0&&(O=g.querySelector("."+Ot)),O||(O=this.createElement("div",{className:Ot})),this.itemsAlign(D,O),g.appendChild(O)}}setAttr(g,D){const O=Object.keys(g);let _;for(let Q=0;Q<O.length;Q++)_=O[Q],"class"===_?this.add(D,g[_]):D.setAttribute(_,g[_])}enableItems(g,D){const O=g,_=O.length;let Q;(0,i.le)(D)&&(D=!0);const me=(Te,Je)=>{Te?(Je.classList.remove(on),Je.setAttribute("aria-disabled","false")):(Je.classList.add(on),Je.setAttribute("aria-disabled","true"))};if(!(0,i.le)(_)&&_>=1){for(let Te=0,Je=[].slice.call(O);Te<_;Te++){const St=Je[Te];if("number"==typeof St){if(Q=this.getElementByIndex(St),(0,i.le)(Q))return;O[Te]=Q}else Q=St;me(D,Q)}D?(0,i.IV)(O,on):(0,i.cn)(O,on)}else{if("number"==typeof O){if(Q=this.getElementByIndex(O),(0,i.le)(Q))return}else Q=g;me(D,Q)}}getElementByIndex(g){return this.tbarEle[g]?this.tbarEle[g]:null}addItems(g,D){let O;this.extendedOpen();const _=this.element.querySelector("."+Ot);if((0,i.le)(_))return void this.itemsRerender(g);let Q,me="Left";(0,i.le)(D)&&(D=0),g.forEach(Te=>{!(0,i.le)(Te.align)&&"Left"!==Te.align&&"Left"===me&&(me=Te.align)});for(const Te of g)if((0,i.le)(Te.type)&&(Te.type="Button"),O=(0,i.td)("."+Ai,this.element),Te.align=me,Q=this.renderSubComponent(Te,D),this.tbarEle.length>=D&&O.length>=0){(0,i.le)(this.scrollModule)&&this.destroyMode();const Je="L"===Te.align[0]?0:"C"===Te.align[0]?1:2;let St;this.tbarAlign||"Left"===me?this.tbarAlign?(St=(0,i.oq)(O[0],"."+Ot).children[Je],St.insertBefore(Q,St.children[D]),this.tbarAlgEle[(Te.align+"s").toLowerCase()].splice(D,0,Q),this.refreshPositioning()):0===O.length?(O=(0,i.td)("."+Ot,this.element),O[0].appendChild(Q)):O[0].parentNode.insertBefore(Q,O[D]):(this.tbarItemAlign(Te,_,1),this.tbarAlign=!0,St=(0,i.oq)(O[0],"."+Ot).children[Je],St.appendChild(Q),this.tbarAlgEle[(Te.align+"s").toLowerCase()].push(Q),this.refreshPositioning()),this.items.splice(D,0,Te),this.tbarEle.splice(D,0,Q),D++,this.offsetWid=_.offsetWidth}_.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}removeItems(g){const D=g;let O,_=[].slice.call((0,i.td)("."+Ai,this.element));if("number"==typeof D)O=parseInt(g.toString(),10),this.removeItemByIndex(O,_);else if(D&&D.length>1)for(const Q of[].slice.call(D))O=this.tbarEle.indexOf(Q),this.removeItemByIndex(O,_),_=(0,i.td)("."+Ai,this.element);else O=_.indexOf(D&&D.length&&1===D.length?D[0]:g),this.removeItemByIndex(O,_);this.resize()}removeItemByIndex(g,D){if(this.tbarEle[g]&&D[g]){const O=this.tbarEle.indexOf(D[g]);if(this.tbarAlign){const Q=this.tbarAlgEle[(this.items[O].align+"s").toLowerCase()].indexOf(this.tbarEle[O]);this.tbarAlgEle[(this.items[O].align+"s").toLowerCase()].splice(Q,1)}this.isReact&&this.clearTemplate();const _=D[g].querySelector(".e-control.e-btn");!(0,i.le)(_)&&!(0,i.le)(_.ej2_instances[0])&&!_.ej2_instances[0].isDestroyed&&_.ej2_instances[0].destroy(),(0,i.og)(D[g]),this.items.splice(O,1),this.tbarEle.splice(O,1)}}templateRender(g,D,O,_){const me=g;let Te;if("object"==typeof g&&(Te="function"==typeof me.appendTo),"string"!=typeof g&&Te){if("Input"===O.type){const Je=this.createElement("input");Je.id=O.id?O.id:(0,i.QI)("tbr-ipt"),D.appendChild(Je),me.appendTo(Je)}}else{let Je,ri,St=g;St="string"==typeof g?g.trim():g;try{if("object"!=typeof g||(0,i.le)(g.tagName)){if(document.querySelectorAll(St).length){const Pi=document.querySelector(St),Hi=Pi.outerHTML.trim();D.appendChild(Pi),Pi.style.display="",(0,i.le)(Hi)||this.tempId.push(St)}}else D.appendChild(g)}catch{Je=(0,i.MY)(St)}(0,i.le)(Je)||(ri=Je({},this,"template",this.element.id+_+"_template",this.isStringTemplate)),!(0,i.le)(ri)&&ri.length>0&&[].slice.call(ri).forEach(Pi=>{(0,i.le)(Pi.tagName)||(Pi.style.display=""),D.appendChild(Pi)})}this.add(D,Ds),this.tbarEle.push(D)}buttonRendering(g,D){const O=this.createElement("button",{className:"e-tbar-btn"});O.setAttribute("type","button");const _=g.text;let Q,me;O.id=g.id?g.id:(0,i.QI)("e-tbr-btn");const Te=this.createElement("span",{className:"e-tbar-btn-text"});_?(Te.innerHTML=this.enableHtmlSanitizer?i.pJ.sanitize(_):_,O.appendChild(Te),O.classList.add("e-tbtn-txt")):this.add(D,"e-tbtn-align"),(g.prefixIcon||g.suffixIcon)&&(g.prefixIcon&&g.suffixIcon||g.prefixIcon?(Q=g.prefixIcon+" e-icons",me="Left"):(Q=g.suffixIcon+" e-icons",me="Right"));const Je=new Zt.zx({iconCss:Q,iconPosition:me});return Je.createElement=this.createElement,Je.appendTo(O),g.width&&(0,i.V7)(O,{width:(0,i.Ac)(g.width)}),O}renderSubComponent(g,D){let O;const _=this.createElement("div",{className:Ai});_.setAttribute("aria-disabled","false");const Q=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?i.pJ.sanitize(g.tooltipText):g.tooltipText});if(this.tbarEle||(this.tbarEle=[]),g.htmlAttributes&&this.setAttr(g.htmlAttributes,_),g.tooltipText&&_.setAttribute("title",Q.textContent),g.cssClass&&(_.className=_.className+" "+g.cssClass),g.template)this.templateRender(g.template,_,g,D);else switch(g.type){case"Button":O=this.buttonRendering(g,_),O.setAttribute("tabindex","-1"),O.setAttribute("aria-label",g.text||g.tooltipText),_.appendChild(O),_.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(_,Ti)}if(g.showTextOn){const me=g.showTextOn;"Toolbar"===me?(this.add(_,Bn),this.add(_,"e-tbtn-align")):"Overflow"===me&&this.add(_,Kn)}if(g.overflow){const me=g.overflow;"Show"===me?this.add(_,Dn):"Hide"===me&&(_.classList.contains(Ti)||this.add(_,In))}return"Show"!==g.overflow&&g.showAlwaysInPopup&&!_.classList.contains(Ti)&&(this.add(_,Ns),this.popupPriCount++),g.disabled&&this.add(_,on),!1===g.visible&&this.add(_,bn),_}itemClick(g){this.activeEleSwitch(g.currentTarget)}activeEleSwitch(g){this.activeEleRemove(g.firstElementChild),this.activeEle.focus()}activeEleRemove(g){(0,i.le)(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=g,(0,i.le)(this.trgtEle)&&!g.parentElement.classList.contains(Ds)?g.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}getPersistData(){return this.addOnPersist([])}getModuleName(){return"toolbar"}itemsRerender(g){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=g,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}resize(){const g=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();const D=this.checkOverflow(g,g.getElementsByClassName(Ot)[0]);if(!D){this.destroyScroll();const O=g.querySelector("."+Ot);(0,i.le)(O)||(this.remove(O,ms),this.tbarAlign&&this.add(O,gi))}if(!D||!this.scrollModule||this.offsetWid!==g.offsetWidth){if((this.offsetWid>g.offsetWidth||D)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){const O=window.getComputedStyle(this.element);this.popObj.width=parseFloat(O.width)+2*parseFloat(O.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+tt)&&(this.scrollStep=this.element.querySelector("."+tt).offsetWidth),this.offsetWid=g.offsetWidth,this.tbResize=!1,this.separator()}}extendedOpen(){const g=this.element.querySelector("."+Ln);"Extended"===this.overflowMode&&g&&(this.isExtendedOpen=g.classList.contains(ws))}onPropertyChanged(g,D){const O=this.element,_=O.offsetWidth;this.extendedOpen();for(const Q of Object.keys(g))switch(Q){case"items":if(g.items instanceof Array&&D.items instanceof Array)this.itemsRerender(g.items);else{const me=Object.keys(g.items);for(let Te=0;Te<me.length;Te++){const Je=parseInt(Object.keys(g.items)[Te],10),St=Object.keys(g.items[Je])[0],ri=Object(g.items[Je])[St];if("function"!=typeof ri){if(this.tbarAlign||"align"===St){this.refresh(),this.trigger("created");break}const Hi="overflow"===St&&0!==this.popupPriCount;("showAlwaysInPopup"===St&&!ri||this.items[Je].showAlwaysInPopup&&Hi)&&--this.popupPriCount,(0,i.le)(this.scrollModule)&&this.destroyMode();const Ms=[].slice.call((0,i.td)("."+Ot+" ."+Ai,O));this.isReact&&this.clearTemplate(),(0,i.og)(Ms[Je]),this.tbarEle.splice(Je,1),this.addItems([this.items[Je]],Je),this.items.splice(Je,1),this.items[Je].template&&this.tbarEle.splice(this.items.length,1)}}}break;case"width":(0,i.V7)(O,{width:(0,i.Ac)(g.width)}),this.renderOverflowMode(),this.popObj&&_<O.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":(0,i.V7)(this.element,{height:(0,i.Ac)(g.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(O,bi),this.refreshOverflow();break;case"enableRtl":g.enableRtl?this.add(O,bi):this.remove(O,bi),(0,i.le)(this.scrollModule)||(g.enableRtl?this.add(this.scrollModule.element,bi):this.remove(this.scrollModule.element,bi)),(0,i.le)(this.popObj)||(g.enableRtl?this.add(this.popObj.element,bi):this.remove(this.popObj.element,bi)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":D.cssClass&&(0,i.IV)([this.element],D.cssClass.split(" ")),g.cssClass&&(0,i.cn)([this.element],g.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),g.allowKeyboard&&this.wireKeyboardEvent()}}hideItem(g,D){const O="object"==typeof g;let Q,me,_=g;const Te=[].slice.call((0,i.td)("."+Ai,this.element));if(O?me=g:this.tbarEle[_]&&(me=[].slice.call((0,i.td)("."+Ai,this.element))[_]),me){if(D?me.classList.add(bn):me.classList.remove(bn),D&&(0,i.le)(this.element.getAttribute("tabindex"))&&!me.classList.contains(Ti)){if((0,i.le)(me.firstElementChild.getAttribute("tabindex"))){me.firstElementChild.setAttribute("tabindex","-1");const Je=[].slice.call((0,i.td)("."+Ai,this.element));O&&(_=Je.indexOf(me));let St=Je[++_];for(;St;){if(!this.eleContains(St)){St.firstElementChild.removeAttribute("tabindex");break}St=Je[++_]}}}else if((0,i.le)(this.element.getAttribute("tabindex"))&&!me.classList.contains(Ti)){Q=0;let Je=!1,St=!1,ri=Te[Q];for(;ri;)if(ri.classList.contains(Ti))ri=Te[++Q];else if((0,i.le)(ri.firstElementChild.getAttribute("tabindex")))ri.firstElementChild.setAttribute("tabindex","-1"),Je=!0;else{if(Je&&St)break;this.eleContains(ri)||(ri.firstElementChild.removeAttribute("tabindex"),St=!0),ri=Te[++Q]}}this.refreshOverflow()}}};kt([(0,i.FE)([],hn)],cn.prototype,"items",void 0),kt([(0,i.Z9)("auto")],cn.prototype,"width",void 0),kt([(0,i.Z9)("auto")],cn.prototype,"height",void 0),kt([(0,i.Z9)("")],cn.prototype,"cssClass",void 0),kt([(0,i.Z9)("Scrollable")],cn.prototype,"overflowMode",void 0),kt([(0,i.Z9)()],cn.prototype,"scrollStep",void 0),kt([(0,i.Z9)(!0)],cn.prototype,"enableCollision",void 0),kt([(0,i.Z9)(!0)],cn.prototype,"enableHtmlSanitizer",void 0),kt([(0,i.Z9)(!0)],cn.prototype,"allowKeyboard",void 0),kt([(0,i.ju)()],cn.prototype,"clicked",void 0),kt([(0,i.ju)()],cn.prototype,"created",void 0),kt([(0,i.ju)()],cn.prototype,"destroyed",void 0),kt([(0,i.ju)()],cn.prototype,"beforeCreate",void 0),cn=kt([i.Zl],cn);var ln=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const qn="e-acrdn-root",$n="e-accordion",gr="e-acrdn-item",tn="e-item-focus",mr="e-hide",Cn="e-acrdn-header",ro="e-acrdn-header-content",Br="e-acrdn-panel",Jr="e-acrdn-content",Nr="e-toggle-icon",Zn="e-expand-icon",_r="e-rtl",Ur="e-content-hide",Hr="e-select",Bi="e-selected",Vn="e-active",os="e-overlay",Io="e-toggle-animation",sr="e-expand-state",zn="e-accordion-container";class Er extends i.rt{}ln([(0,i.Z9)("SlideDown")],Er.prototype,"effect",void 0),ln([(0,i.Z9)(400)],Er.prototype,"duration",void 0),ln([(0,i.Z9)("linear")],Er.prototype,"easing",void 0);class to extends i.rt{}ln([(0,i.Zz)({effect:"SlideUp",duration:400,easing:"linear"},Er)],to.prototype,"collapse",void 0),ln([(0,i.Zz)({effect:"SlideDown",duration:400,easing:"linear"},Er)],to.prototype,"expand",void 0);class Eo extends i.rt{}ln([(0,i.Z9)(null)],Eo.prototype,"content",void 0),ln([(0,i.Z9)(null)],Eo.prototype,"header",void 0),ln([(0,i.Z9)(null)],Eo.prototype,"cssClass",void 0),ln([(0,i.Z9)(null)],Eo.prototype,"iconCss",void 0),ln([(0,i.Z9)(!1)],Eo.prototype,"expanded",void 0),ln([(0,i.Z9)(!0)],Eo.prototype,"visible",void 0),ln([(0,i.Z9)(!1)],Eo.prototype,"disabled",void 0),ln([(0,i.Z9)()],Eo.prototype,"id",void 0);let Vs=class extends i.wA{constructor(g,D){super(g,D),this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"}}destroy(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();const g=this.element;if(super.destroy(),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(g.children).forEach(D=>{g.removeChild(D)}),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)g.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}g.classList.remove(qn),g.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(D=>{this.element.removeAttribute(D)}),!this.isNested&&i.re&&this.removeRippleEffect()}preRender(){const g=(0,i.oq)(this.element,"."+Br);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),(0,i.le)(g)?this.element.classList.add(qn):(g.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,_r)}add(g,D){g.classList.add(D)}remove(g,D){g.classList.remove(D)}render(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const g=(0,i.Ac)(this.width),D=(0,i.Ac)(this.height);(0,i.V7)(this.element,{width:g,height:D}),(0,i.le)(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),(0,i.Y4)(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")}renderControl(){this.trgtEle=this.element.children.length>0?(0,i.Ys)("div",this.element):null,this.renderItems(),this.initItemExpand()}wireFocusEvents(){const g=[].slice.call(this.element.querySelectorAll("."+gr));for(const D of g){const O=D.querySelector("."+Cn);D.childElementCount>0&&O&&(i.bi.clearEvents(O),i.bi.add(O,"focus",this.focusIn,this),i.bi.add(O,"blur",this.focusOut,this))}}unwireEvents(){i.bi.remove(this.element,"click",this.clickHandler),(0,i.le)(this.keyModule)||this.keyModule.destroy()}wireEvents(){i.bi.add(this.element,"click",this.clickHandler,this),!this.isNested&&!this.isDestroy&&(this.removeRippleEffect=(0,i.qx)(this.element,{selector:"."+Cn})),this.isNested||(this.keyModule=new i.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))}templateParser(g){if(g)try{if(document.querySelectorAll(g).length)return(0,i.MY)(document.querySelector(g).innerHTML.trim())}catch{return(0,i.MY)(g)}}initializeHeaderTemplate(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))}initializeItemTemplate(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))}getHeaderTemplate(){return this.headerTemplateFn}getItemTemplate(){return this.itemTemplateFn}focusIn(g){g.target.parentElement.classList.add(tn)}focusOut(g){g.target.parentElement.classList.remove(tn)}ctrlTemplate(){let g;this.ctrlTem=this.element.cloneNode(!0);const D=(0,i.Ys)("."+zn,this.element);g=D?D.children:this.element.children;const O=[];[].slice.call(g).forEach(_=>{O.push({header:_.childElementCount>0&&_.children[0]?_.children[0]:"",content:_.childElementCount>1&&_.children[1]?_.children[1]:""}),_.parentNode.removeChild(_)}),D&&this.element.removeChild(D),this.setProperties({items:O},!0)}toggleIconGenerate(){const g=this.createElement("div",{className:Nr}),D=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return g.appendChild(D),g}initItemExpand(){const g=this.initExpand.length;if(0!==g){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[g-1]);else for(let D=0;D<g;D++)this.expandItem(!0,this.initExpand[D]);this.isReact&&this.renderReactTemplates()}}renderItems(){const g=this.element;let D,O;if((0,i.le)(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach((_,Q)=>{O=this.renderInnerItem(_,Q),g.appendChild(O),O.childElementCount>0&&(i.bi.add(O.querySelector("."+Cn),"focus",this.focusIn,this),i.bi.add(O.querySelector("."+Cn),"blur",this.focusOut,this))});else{const _=this.items;g&&_.length>0&&_.forEach((Q,me)=>{D=this.renderInnerItem(Q,me),g.appendChild(D),D.childElementCount>0&&(i.bi.add(D.querySelector("."+Cn),"focus",this.focusIn,this),i.bi.add(D.querySelector("."+Cn),"blur",this.focusOut,this))})}this.isReact&&this.renderReactTemplates()}clickHandler(g){const D=g.target,O=this.getItems(),_={};let Q;if((0,i.oq)(D,"."+$n)!==this.element)return;D.classList.add("e-target");const Te=(0,i.oq)(D,"."+gr);let ri,Je=(0,i.oq)(D,"."+Cn),St=(0,i.oq)(D,"."+Br);Te&&((0,i.le)(Je)||(0,i.le)(St))&&(Je=Te.children[0],St=Te.children[1]),Je&&(Q=(0,i.Ys)("."+Nr,Je)),Je?ri=(0,i.oq)(Je,"."+gr):St&&(ri=(0,i.oq)(St,"."+gr));const Pi=this.getIndexByItem(Te);ri&&(_.item=O[this.getIndexByItem(ri)]),_.originalEvent=g,!(0,i.le)(Q)&&Te.childElementCount<=1&&((0,i.le)(St)||!(0,i.le)((0,i.Ys)("."+Cn+" ."+Nr,ri)))?(Te.appendChild(this.contentRendering(Pi)),this.ariaAttrUpdate(Te),this.afterContentRender(D,_,Te,Je,St,ri)):this.afterContentRender(D,_,Te,Je,St,ri),this.isReact&&this.renderReactTemplates()}afterContentRender(g,D,O,_,Q,me){const Te=[];this.trigger("clicked",D);let Je=Q&&!(0,i.le)((0,i.Ys)(".e-target",Q));const ri=Q&&!(0,i.le)((0,i.Ys)("."+$n,Q))&&(0,i.le)((0,i.oq)(g,".e-acrdn-panel .e-accordion")),Pi=Q&&(0,i.le)((0,i.Ys)("."+$n,Q))||(0,i.oq)(g,"."+$n)!==this.element;if(Je=Je&&(ri||Pi),g.classList.remove("e-target"),g.classList.contains(Br)||g.classList.contains(Jr)||Je)return;const Hi=this.element.querySelector("."+zn);[].slice.call(Hi?Hi.children:this.element.children).forEach(Wr=>{Wr.classList.contains(Vn)&&Te.push(Wr)});const xs=[].slice.call(this.element.querySelectorAll("."+gr+" [e-animate]"));if(xs.length>0)for(const Wr of xs)Te.push(Wr.parentElement);const Os=-1!==Te.indexOf(me)&&"true"===Q.getAttribute("e-animate");let br=!1;if(!(0,i.le)(O)&&!(0,i.le)(_)){const Wr=(0,i.Ys)("."+Br,O),On=(0,i.oq)(O,"."+qn).querySelector("."+sr);if((0,i.le)(Wr))return;br=On===O,!(0,i.pn)(Wr)||Os&&!me.classList.contains(Bi)?(Te.length>0&&"Single"===this.expandMode&&!Os&&Te.forEach(mo=>{this.collapse((0,i.Ys)("."+Br,mo)),mo.classList.remove(sr)}),this.expand(Wr)):this.collapse(Wr),!(0,i.le)(On)&&!br&&On.classList.remove(sr)}}eleMoveFocus(g,D,O){let _,Q=(0,i.oq)(O,"."+gr);O===D?_=("moveUp"===g?O.lastElementChild:O).querySelector("."+Cn):O.classList.contains(Cn)&&(Q="moveUp"===g?Q.previousElementSibling:Q.nextElementSibling,Q&&(_=(0,i.Ys)("."+Cn,Q))),_&&_.focus()}keyActionHandler(g){const D=g.target,O=(0,i.oq)(g.target,Cn);if((0,i.le)(O)&&!D.classList.contains($n)&&!D.classList.contains(Cn))return;let _;const Q=this.element;let me;switch(g.action){case"moveUp":case"moveDown":this.eleMoveFocus(g.action,Q,D);break;case"space":case"enter":me=D.nextElementSibling,!(0,i.le)(me)&&me.classList.contains(Br)?"true"!==me.getAttribute("e-animate")&&D.click():D.click(),g.preventDefault();break;case"home":case"end":_="home"===g.action?Q.firstElementChild.children[0]:Q.lastElementChild.children[0],_.focus(),g.preventDefault()}}headerEleGenerate(){const g=this.createElement("div",{className:Cn,id:(0,i.QI)("acrdn_header")}),O={tabindex:"0",role:"heading","aria-label":"collapsed","aria-disabled":"false","aria-level":this.getItems().length.toString()};return(0,i.Y4)(g,O),g}renderInnerItem(g,D){const O=this.createElement("div",{className:gr,id:g.id||(0,i.QI)("acrdn_item"),attrs:{"aria-expanded":"false",role:"row"}});if(this.headerTemplate){const Q=this.headerEleGenerate(),me=this.createElement("div",{className:ro});return Q.appendChild(me),(0,i.R3)(this.getHeaderTemplate()(g,this,"headerTemplate",this.element.id+"_headerTemplate",!1),me),O.appendChild(Q),Q.appendChild(this.toggleIconGenerate()),this.add(O,Hr),O}if(g.header&&this.angularnativeCondiCheck(g,"header")){this.enableHtmlSanitizer&&"string"==typeof g.header&&(g.header=i.pJ.sanitize(g.header));const Q=this.headerEleGenerate(),me=this.createElement("div",{className:ro});Q.appendChild(me),Q.appendChild(this.fetchElement(me,g.header,D,!0)),O.appendChild(Q)}let _=(0,i.Ys)("."+Cn,O);if(g.expanded&&!(0,i.le)(D)&&!this.enablePersistence&&-1===this.initExpand.indexOf(D)&&this.initExpand.push(D),g.cssClass&&(0,i.cn)([O],g.cssClass.split(" ")),g.disabled&&(0,i.cn)([O],os),!1===g.visible&&(0,i.cn)([O],mr),g.iconCss){const Q=this.createElement("div",{className:"e-acrdn-header-icon"}),me=this.createElement("span",{className:g.iconCss+" e-icons"});Q.appendChild(me),(0,i.le)(_)?(_=this.headerEleGenerate(),_.appendChild(Q),O.appendChild(_)):_.insertBefore(Q,_.childNodes[0])}if(g.content&&this.angularnativeCondiCheck(g,"content")){const Q=this.toggleIconGenerate();(0,i.le)(_)&&(_=this.headerEleGenerate(),O.appendChild(_)),_.appendChild(Q),this.add(O,Hr)}return O}angularnativeCondiCheck(g,D){const _="content"===D?g.content:g.header;if(this.isAngular&&!(0,i.le)(_.elementRef)){const Q=_.elementRef.nativeElement.data;if((0,i.le)(Q)||""===Q||-1===Q.indexOf("bindings="))return!0;const me=JSON.parse(_.elementRef.nativeElement.data.replace("bindings=",""));return!(!(0,i.le)(me)&&"false"===me["ng-reflect-ng-if"])}return!0}fetchElement(g,D,O,_){let Q,me,Te;try{if(document.querySelectorAll(D).length&&"Button"!==D){const Je=document.querySelector(D);me=Je.outerHTML.trim(),g.appendChild(Je),Je.style.display=""}}catch{"string"==typeof D?g.innerHTML=i.pJ.sanitize(D):!(0,i.le)(this.trgtEle)&&D instanceof HTMLElement?(g.appendChild(D),g.firstElementChild.style.display=""):Q=(0,i.MY)(D)}if(!(0,i.le)(Q)){let Je,St;this.isReact&&this.renderReactTemplates(),g.classList.contains(ro)?(Je=this.element.id+O+"_header",St="header"):g.classList.contains(Jr)&&(Je=this.element.id+O+"_content",St="content"),Te=Q({},this,St,Je,this.isStringTemplate)}return(0,i.le)(Te)||!(Te.length>0)||(0,i.le)(Te[0].tagName)&&1===Te.length?0===g.childElementCount&&(g.innerHTML=i.pJ.sanitize(D)):[].slice.call(Te).forEach(Je=>{(0,i.le)(Je.tagName)||(Je.style.display=""),g.appendChild(Je)}),(0,i.le)(me)||-1===this.templateEle.indexOf(D)&&this.templateEle.push(D),g}ariaAttrUpdate(g){const D=(0,i.Ys)("."+Cn,g),O=(0,i.Ys)("."+Br,g);D.setAttribute("aria-controls",O.id),O.setAttribute("aria-labelledby",D.id),O.setAttribute("role","definition")}contentRendering(g){const D=this.createElement("div",{className:Br+" "+Ur,id:(0,i.QI)("acrdn_panel")});(0,i.Y4)(D,{"aria-hidden":"true"});const O=this.createElement("div",{className:Jr});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),(0,i.R3)(this.getItemTemplate()(this.dataSource[g],this,"itemTemplate",this.element.id+"_itemTemplate",!1),O),D.appendChild(O)):(this.enableHtmlSanitizer&&typeof this.items[g].content&&(this.items[g].content=i.pJ.sanitize(this.items[g].content)),D.appendChild(this.fetchElement(O,this.items[g].content,g,!1))),D}expand(g){const D=this.getItems(),O=(0,i.oq)(g,"."+gr);if((0,i.le)(g)||(0,i.pn)(g)&&"true"!==g.getAttribute("e-animate")||O.classList.contains(os))return;const Q=(0,i.oq)(O,"."+qn).querySelector("."+sr),me={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},Te=(0,i.Ys)("."+Nr,O).firstElementChild,Je={element:O,item:D[this.getIndexByItem(O)],index:this.getIndexByItem(O),content:O.querySelector("."+Br),isExpanded:!0};this.trigger("expanding",Je,St=>{St.cancel||(Te.classList.add(Io),this.expandedItemsPush(O),(0,i.le)(Q)||Q.classList.remove(sr),O.classList.add(sr),"None"===me.name?(this.expandProgress("begin",Te,g,O,St),this.expandProgress("end",Te,g,O,St)):this.expandAnimation(me.name,Te,g,O,me,St))})}expandAnimation(g,D,O,_,Q,me){let Te;this.lastActiveItemId=_.id,"SlideDown"===g?(Q.begin=()=>{this.expandProgress("begin",D,O,_,me),O.style.position="absolute",Te=_.offsetHeight,O.style.maxHeight=O.offsetHeight+"px",_.style.maxHeight=""},Q.progress=()=>{_.style.minHeight=Te+O.offsetHeight+"px"},Q.end=()=>{(0,i.V7)(O,{position:"",maxHeight:""}),_.style.minHeight="",this.expandProgress("end",D,O,_,me)}):(Q.begin=()=>{this.expandProgress("begin",D,O,_,me)},Q.end=()=>{this.expandProgress("end",D,O,_,me)}),new i.fw(Q).animate(O)}expandProgress(g,D,O,_,Q){this.remove(O,Ur),this.add(_,Bi),this.add(D,Zn),"end"===g&&(this.add(_,Vn),O.setAttribute("aria-hidden","false"),(0,i.Y4)(_,{"aria-expanded":"true"}),(0,i.Y4)(O.previousElementSibling,{"aria-label":"expanded"}),D.classList.remove(Io),this.trigger("expanded",Q))}expandedItemsPush(g){const D=this.getIndexByItem(g);if(-1===this.expandedIndices.indexOf(D)){const O=[].slice.call(this.expandedIndices);O.push(D),this.setProperties({expandedIndices:O},!0)}}getIndexByItem(g){const D=this.getItemElements();return[].slice.call(D).indexOf(g)}getItemElements(){const g=[];return[].slice.call(this.element.children).forEach(O=>{O.classList.contains(gr)&&g.push(O)}),g}expandedItemsPop(g){const D=this.getIndexByItem(g),O=[].slice.call(this.expandedIndices);O.splice(O.indexOf(D),1),this.setProperties({expandedIndices:O},!0)}collapse(g){const D=this.getItems(),O=(0,i.oq)(g,"."+gr);if((0,i.le)(g)||!(0,i.pn)(g)||O.classList.contains(os))return;const _={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},Q=(0,i.Ys)("."+Nr,O).firstElementChild,me={element:O,item:D[this.getIndexByItem(O)],index:this.getIndexByItem(O),content:O.querySelector("."+Br),isExpanded:!1};this.trigger("expanding",me,Te=>{Te.cancel||(this.expandedItemsPop(O),O.classList.remove(sr),Q.classList.add(Io),"None"===_.name?(this.collapseProgress("begin",Q,g,O,Te),this.collapseProgress("end",Q,g,O,Te)):this.collapseAnimation(_.name,g,O,Q,_,Te))})}collapseAnimation(g,D,O,_,Q,me){let Te,Je,St,ri;this.lastActiveItemId=O.id,"SlideUp"===g?(Q.begin=()=>{St=O.offsetHeight,O.style.minHeight=St+"px",D.style.position="absolute",Te=O.offsetHeight,Je=D.offsetHeight,D.style.maxHeight=Je+"px",this.collapseProgress("begin",_,D,O,me)},Q.progress=()=>{ri=Te-(Je-D.offsetHeight),ri<St&&(O.style.minHeight=ri+"px")},Q.end=()=>{D.style.display="none",this.collapseProgress("end",_,D,O,me),O.style.minHeight="",(0,i.V7)(D,{position:"",maxHeight:"",display:""})}):(Q.begin=()=>{this.collapseProgress("begin",_,D,O,me)},Q.end=()=>{this.collapseProgress("end",_,D,O,me)}),new i.fw(Q).animate(D)}collapseProgress(g,D,O,_,Q){this.remove(D,Zn),this.remove(_,Bi),"end"===g&&(this.add(O,Ur),D.classList.remove(Io),this.remove(_,Vn),O.setAttribute("aria-hidden","true"),(0,i.Y4)(_,{"aria-expanded":"false"}),(0,i.Y4)(O.previousElementSibling,{"aria-label":"collapsed"}),this.trigger("expanded",Q))}getModuleName(){return"accordion"}itemAttribUpdate(){const g=this.getItems(),D=this.getItemElements(),O=g.length;D.forEach(_=>{(0,i.Ys)("."+Cn,_).setAttribute("aria-level",""+O)})}getItems(){let g;return g=this.itemTemplate&&this.headerTemplate?this.dataSource:this.items,g}addItem(g,D){const O=this.element,_=this.getItemElements(),Q=this.getItems();(0,i.le)(D)&&(D=Q.length),O.childElementCount>=D&&(g instanceof Array?g:[g]).forEach((Te,Je)=>{const St=D+Je;Q.splice(St,0,Te);const ri=this.renderInnerItem(Te,St);O.childElementCount===St?O.appendChild(ri):O.insertBefore(ri,_[St]),i.bi.add(ri.querySelector("."+Cn),"focus",this.focusIn,this),i.bi.add(ri.querySelector("."+Cn),"blur",this.focusOut,this),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(O),Te&&Te.expanded&&this.expandItem(!0,St)}),this.isReact&&this.renderReactTemplates()}expandedItemRefresh(g){const D=this.getItemElements();[].slice.call(D).forEach(O=>{O.classList.contains(Bi)&&this.expandedItemsPush(O)})}removeItem(g){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],g);const O=this.getItemElements()[g],_=this.getItems();(0,i.le)(O)||(this.restoreContent(g),(0,i.og)(O),_.splice(g,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))}select(g){const O=this.getItemElements()[g];(0,i.le)(O)||(0,i.le)((0,i.Ys)("."+Cn,O))||O.children[0].focus()}hideItem(g,D){const _=this.getItemElements()[g];(0,i.le)(_)||((0,i.le)(D)&&(D=!0),D?this.add(_,mr):this.remove(_,mr))}enableItem(g,D){const _=this.getItemElements()[g];if((0,i.le)(_))return;const Q=_.firstElementChild;D?(this.remove(_,os),(0,i.Y4)(Q,{tabindex:"0","aria-disabled":"false"}),Q.focus()):(_.classList.contains(Vn)&&(this.expandItem(!1,g),this.eleMoveFocus("movedown",this.element,Q)),this.add(_,os),Q.setAttribute("aria-disabled","true"),Q.removeAttribute("tabindex"))}expandItem(g,D){const O=this.getItemElements();if((0,i.le)(D))if("Single"===this.expandMode&&g){const _=O[O.length-1];this.itemExpand(g,_,this.getIndexByItem(_))}else{const _=(0,i.Ys)("#"+this.lastActiveItemId,this.element);[].slice.call(O).forEach(me=>{this.itemExpand(g,me,this.getIndexByItem(me)),me.classList.remove(sr)});const Q=(0,i.Ys)("."+sr,this.element);Q&&Q.classList.remove(sr),_&&_.classList.add(sr)}else{const _=O[D];if((0,i.le)(_)||!_.classList.contains(Hr)||_.classList.contains(Vn)&&g)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(g,_,D)}}itemExpand(g,D,O){let _=D.children[1];D.classList.contains(os)||((0,i.le)(_)&&g?(_=this.contentRendering(O),D.appendChild(_),this.ariaAttrUpdate(D),this.expand(_)):(0,i.le)(_)||(g?this.expand(_):this.collapse(_)),this.isReact&&this.renderReactTemplates())}destroyItems(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+gr)).forEach(g=>{(0,i.og)(g)})}restoreContent(g){let D;D=(0,i.le)(g)?this.element:this.element.querySelectorAll("."+gr)[g],this.templateEle.forEach(O=>{(0,i.le)(D.querySelector(O))||(document.body.appendChild(D.querySelector(O)).style.display="none")})}updateItem(g,D){if(!(0,i.le)(g)){const O=this.getItems(),_=O[D];O.splice(D,1),this.restoreContent(D),(0,i.og)(g),this.addItem(_,D)}}setTemplate(g,D,O){D.innerHTML="",this.templateCompile(D,g,O),this.isReact&&this.renderReactTemplates()}templateCompile(g,D,O){const _=this.createElement("div");this.fetchElement(_,D,O,!1),0!==_.childNodes.length&&[].slice.call(_.childNodes).forEach(Q=>{g.appendChild(Q)})}getPersistData(){return this.addOnPersist(["expandedIndices"])}onPropertyChanged(g,D){const O=this.element;let _=!1;for(const Q of Object.keys(g))switch(Q){case"items":if(g.items instanceof Array&&D.items instanceof Array)_=!0;else{const me=Object.keys(g.items);for(let Te=0;Te<me.length;Te++){const Je=parseInt(Object.keys(g.items)[Te],10),St=Object.keys(g.items[Je])[0],ri=(0,i.td)("."+gr,this.element)[Je],Pi=Object(D.items[Je])[St],Hi=Object(g.items[Je])[St],Ms=St;if(("header"===Ms||"iconCss"===Ms||"expanded"===Ms||"content"===Ms&&""===Pi)&&this.updateItem(ri,Je),"cssClass"===St&&!(0,i.le)(ri)&&(ri.classList.remove(Pi),ri.classList.add(Hi)),"visible"===St&&!(0,i.le)(ri)&&(!1===Object(g.items[Je])[St]?ri.classList.add(mr):ri.classList.remove(mr)),"disabled"===St&&!(0,i.le)(ri)&&this.enableItem(Je,!Hi),"content"===St&&!(0,i.le)(ri)&&2===ri.children.length)if("function"==typeof Hi){const xs=ri.querySelector("."+Jr);xs.innerHTML="",this.setTemplate(Hi,xs,Je)}else ri.classList.contains(Bi)&&this.expandItem(!1,Je),(0,i.og)(ri.querySelector("."+Br))}}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),_=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),_=!0;break;case"itemTemplate":this.initializeItemTemplate(),_=!0;break;case"enableRtl":g.enableRtl?this.add(O,_r):this.remove(O,_r);break;case"height":(0,i.V7)(this.element,{height:(0,i.Ac)(g.height)});break;case"width":(0,i.V7)(this.element,{width:(0,i.Ac)(g.width)});break;case"expandMode":"Single"===g.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}_&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())}};ln([(0,i.FE)([],Eo)],Vs.prototype,"items",void 0),ln([(0,i.Z9)([])],Vs.prototype,"dataSource",void 0),ln([(0,i.Z9)()],Vs.prototype,"itemTemplate",void 0),ln([(0,i.Z9)()],Vs.prototype,"headerTemplate",void 0),ln([(0,i.Z9)("100%")],Vs.prototype,"width",void 0),ln([(0,i.Z9)("auto")],Vs.prototype,"height",void 0),ln([(0,i.Z9)([])],Vs.prototype,"expandedIndices",void 0),ln([(0,i.Z9)("Multiple")],Vs.prototype,"expandMode",void 0),ln([(0,i.Z9)(!1)],Vs.prototype,"enableHtmlSanitizer",void 0),ln([(0,i.Zz)({},to)],Vs.prototype,"animation",void 0),ln([(0,i.ju)()],Vs.prototype,"clicked",void 0),ln([(0,i.ju)()],Vs.prototype,"expanding",void 0),ln([(0,i.ju)()],Vs.prototype,"expanded",void 0),ln([(0,i.ju)()],Vs.prototype,"created",void 0),ln([(0,i.ju)()],Vs.prototype,"destroyed",void 0),Vs=ln([i.Zl],Vs);var Ro=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};let bo=class extends bs{constructor(g,D){super(g,D)}preRender(){this.isMenu=!1,this.element.id=this.element.id||(0,i.QI)("ej2-contextmenu"),super.preRender()}initialize(){super.initialize(),(0,i.Y4)(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=(0,Ue.TE)(this.element).toString()}open(g,D,O){super.openMenu(null,null,g,D,null,O)}close(){super.closeMenu()}onPropertyChanged(g,D){super.onPropertyChanged(g,D);for(const O of Object.keys(g))switch(O){case"filter":this.close(),this.filter=g.filter;break;case"target":this.unWireEvents(D.target),this.wireEvents()}}getModuleName(){return"contextmenu"}};Ro([(0,i.Z9)("")],bo.prototype,"target",void 0),Ro([(0,i.Z9)("")],bo.prototype,"filter",void 0),Ro([(0,i.FE)([],Ui)],bo.prototype,"items",void 0),bo=Ro([i.Zl],bo);var yr=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const Fo="e-vertical",ol="e-hamburger";let Yr=class extends bs{constructor(g,D){super(g,D),this.tempItems=[]}getModuleName(){return"menu"}preRender(){if(this.isMenu=!0,this.element.id=this.element.id||(0,i.QI)("ej2-menu"),this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch{}else this.updateMenuItems(this.items);super.preRender()}initialize(){super.initialize(),(0,i.Y4)(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(Fo),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(Fo),this.element.setAttribute("aria-orientation","vertical")):i.AR.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add(ol),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))}updateMenuItems(g){this.tempItems=g,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]}onPropertyChanged(g,D){for(const O of Object.keys(g))switch(O){case"orientation":"Vertical"===g.orientation?(this.element.classList.add(Fo),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(Fo),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(Fo),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(Fo),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(D.items).length||this.updateMenuItems(g.items);break;case"hamburgerMode":this.element.previousElementSibling||super.createHeaderContainer(),g.hamburgerMode?(this.element.parentElement.classList.add(ol),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(_=>{_.style[this.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove(ol),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(Fo),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(Fo):this.element.previousElementSibling.classList.remove(Fo),this.element.classList[g.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(g.title=this.enableHtmlSanitizer?i.pJ.sanitize(g.title):g.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=g.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(D.target),this.wireEvents(),"Horizontal"===this.orientation&&(g.target?this.element.previousElementSibling.classList.add(Fo):(this.element.previousElementSibling||super.createHeaderContainer(),this.element.previousElementSibling.classList.remove(Fo)),this.element.classList.add("e-hide-menu")))}super.onPropertyChanged(g,D)}createMenuItems(g){let D,O,_=this.items;const Q=this.getField("parentId");if(g[Q]){for(D=this.getIndex(g[Q].toString(),!0),O=0;O<D.length;O++)_[D[O]].items||(_[D[O]].items=[]),_=_[D[O]].items;_.push(g)}else this.items.push(g)}open(){super.openHamburgerMenu()}close(){super.closeHamburgerMenu()}};yr([(0,i.Z9)("Horizontal")],Yr.prototype,"orientation",void 0),yr([(0,i.Z9)("")],Yr.prototype,"target",void 0),yr([(0,i.Z9)(null)],Yr.prototype,"template",void 0),yr([(0,i.Z9)(!1)],Yr.prototype,"enableScrolling",void 0),yr([(0,i.Z9)(!1)],Yr.prototype,"hamburgerMode",void 0),yr([(0,i.Z9)("Menu")],Yr.prototype,"title",void 0),yr([(0,i.Z9)(!1)],Yr.prototype,"enableHtmlSanitizer",void 0),yr([(0,i.Zz)({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Ei)],Yr.prototype,"fields",void 0),Yr=yr([i.Zl],Yr);var Bs=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const uo="e-tab",$s="e-tab-header",tr="e-content",vr="e-nested",zs="e-item",ur="e-template",ir="e-rtl",qs="e-active",$r="e-disable",Ir="e-hidden",Pn="e-focused",ks="e-icons",xi="e-icon",v="e-icon-tab",M="e-close-icon",$="e-close-show",fe="e-tab-text",Ce="e-indicator",pt="e-tab-wrap",Mt="e-text-wrap",wi="e-tab-icon",Gi="e-toolbar-items",Vi="e-toolbar-item",sn="e-toolbar-pop",ts="e-toolbar-popup",ht="e-progress",S="e-ignore",I="e-overlay",Ee="e-vertical-tab",dt="e-vertical",Bt="e-vertical-left",Ii="e-vertical-right",Yi="e-horizontal-bottom",Ss="e-fill-mode",un="e-reorder-active-item";class Xs extends i.rt{}Bs([(0,i.Z9)("SlideLeftIn")],Xs.prototype,"effect",void 0),Bs([(0,i.Z9)(600)],Xs.prototype,"duration",void 0),Bs([(0,i.Z9)("ease")],Xs.prototype,"easing",void 0);class Jn extends i.rt{}Bs([(0,i.Zz)({effect:"SlideLeftIn",duration:600,easing:"ease"},Xs)],Jn.prototype,"previous",void 0),Bs([(0,i.Zz)({effect:"SlideRightIn",duration:600,easing:"ease"},Xs)],Jn.prototype,"next",void 0);class Ar extends i.rt{}Bs([(0,i.Z9)("")],Ar.prototype,"text",void 0),Bs([(0,i.Z9)("")],Ar.prototype,"iconCss",void 0),Bs([(0,i.Z9)("left")],Ar.prototype,"iconPosition",void 0);class En extends i.rt{}Bs([(0,i.Zz)({},Ar)],En.prototype,"header",void 0),Bs([(0,i.Z9)(null)],En.prototype,"headerTemplate",void 0),Bs([(0,i.Z9)("")],En.prototype,"content",void 0),Bs([(0,i.Z9)("")],En.prototype,"cssClass",void 0),Bs([(0,i.Z9)(!1)],En.prototype,"disabled",void 0),Bs([(0,i.Z9)(!0)],En.prototype,"visible",void 0),Bs([(0,i.Z9)()],En.prototype,"id",void 0);let Ie=class extends i.wA{constructor(g,D){super(g,D),this.show={},this.hide={},this.maxHeight=0,this.title="Close",this.isInteracted=!1,this.lastIndex=0,this.isAdd=!1,this.isIconAlone=!1,this.draggableItems=[],this.resizeContext=this.refreshActiveTabBorder.bind(this),this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"}}destroy(){if(this.isReact&&this.clearTemplate(),(0,i.le)(this.tbObj)||this.tbObj.destroy(),this.unWireEvents(),["role","aria-disabled","aria-activedescendant","tabindex","aria-orientation"].forEach(g=>{this.element.removeAttribute(g)}),this.expTemplateContent(),this.isTemplate){const g=(0,i.Ys)(".e-tab > ."+tr,this.element);this.element.classList.remove(ur),(0,i.le)(g)||(g.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)(0,i.Od)(this.element.firstElementChild);super.destroy(),this.trigger("destroyed")}refresh(){this.isReact&&this.clearTemplate(),super.refresh(),this.isReact&&this.renderReactTemplates()}preRender(){const g=(0,i.oq)(this.element,"."+tr);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],(0,i.le)(g)||(g.parentElement.classList.add(vr),this.isNested=!0);const D=i.AR.info.name,O="msie"===D?"e-ie":"edge"===D?"e-edge":"safari"===D?"e-safari":"";(0,i.V7)(this.element,{width:(0,i.Ac)(this.width),height:(0,i.Ac)(this.height)}),this.setCssClass(this.element,this.cssClass,!0),(0,i.Y4)(this.element,{role:"tablist","aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,O,!0),this.updatePopAnimationConfig()}render(){this.btnCls=this.createElement("span",{className:ks+" "+M,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:(0,i.wm)(),this.renderContainer(),this.wireEvents(),this.initRender=!1}renderContainer(){const g=this.element;if(this.items.forEach((D,O)=>{(0,i.le)(D.id)&&!(0,i.le)(D.setProperties)&&D.setProperties({id:"tabitem_"+O.toString()},!0)}),this.items.length>0&&0===g.children.length)g.appendChild(this.createElement("div",{className:tr})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:$s})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,g.classList.add(ur);const D=g.querySelector("."+$s);D&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,D)}if(!(0,i.le)((0,i.Ys)("."+$s,this.element))&&!(0,i.le)((0,i.Ys)("."+tr,this.element))){if(this.renderHeader(),this.tbItems=(0,i.Ys)("."+$s+" ."+Gi,this.element),(0,i.le)(this.tbItems)||(0,i.qx)(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),(0,i.td)("."+Vi,this.element).length>0){this.tbItems=(0,i.Ys)("."+$s+" ."+Gi,this.element),this.bdrLine=this.createElement("div",{className:Ce+" "+Ir+" "+S});const D=(0,i.Ys)("."+this.scrCntClass,this.tbItems);(0,i.le)(D)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):D.insertBefore(this.bdrLine,D.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}if(!(0,i.le)(this.tbItem))for(let D=0;D<this.items.length;D++)this.tbItem[D].setAttribute("data-id",this.items[D].id);this.setRTL(this.enableRtl)}}serverItemsChanged(){if(this.enableAnimation=!1,this.setActive(this.selectedItem,!0),"Dynamic"!==this.loadOn&&!(0,i.le)(this.cntEle)){const g=[].slice.call(this.cntEle.children),D=tr+this.tabId+"_"+this.selectedItem;g.forEach(O=>{O.classList.contains(qs)&&O.id!==D&&O.classList.remove(qs),O.id===D&&O.classList.add(qs)}),this.prevIndex=this.selectedItem,this.triggerAnimation(zs+this.tabId+"_"+this.selectedItem,!1)}this.enableAnimation=!0}headerReady(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.headerPlacement,this.hdrEle),(0,i.le)(this.hdrEle)||(this.tbObj=this.hdrEle&&this.hdrEle.ej2_instances[0]),this.tbObj.clicked=this.clickHandler.bind(this),this.tbObj.on("onItemsChanged",this.serverItemsChanged.bind(this)),this.tbItems=(0,i.Ys)("."+$s+" ."+Gi,this.element),(0,i.le)(this.tbItems)||(0,i.qx)(this.tbItems,{selector:".e-tab-wrap"}),(0,i.td)("."+Vi,this.element).length>0){this.bdrLine=(0,i.Ys)("."+Ce+"."+S,this.element);const g=(0,i.Ys)("."+this.scrCntClass,this.tbItems);(0,i.le)(g)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):g.insertBefore(this.bdrLine,g.firstElementChild),this.select(this.selectedItem)}if(this.cntEle=(0,i.Ys)(".e-tab > ."+tr,this.element),(0,i.le)(this.cntEle)||(this.touchModule=new i.Xh(this.cntEle,{swipe:this.swipeHandler.bind(this)})),"Demand"===this.loadOn){const g=this.setActiveContent();this.triggerAnimation(g,!1)}this.initRender=!1,this.renderComplete()}setActiveContent(){const g=zs+this.tabId+"_"+this.selectedItem,D=this.getTrgContent(this.cntEle,this.extIndex(g));return(0,i.le)(D)||D.classList.add(qs),g}renderHeader(){const g=this.headerPlacement;let D=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains($s)&&this.setProperties({headerPlacement:"Bottom"},!0);const O=this.hdrEle.children.length,_=[];for(let Q=0;Q<O;Q++)_.push(this.hdrEle.children.item(Q).innerHTML);if(O>0){for(;this.hdrEle.firstElementChild;)(0,i.og)(this.hdrEle.firstElementChild);const Q=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(Q),_.forEach((me,Te)=>{this.lastIndex=Te;const Je={className:zs,id:zs+this.tabId+"_"+Te,attrs:{role:"tab","aria-controls":tr+this.tabId+"_"+Te,"aria-selected":"false"}},St=this.createElement("span",{className:fe,innerHTML:me,attrs:{role:"presentation"}}).outerHTML,ri=this.createElement("div",{className:Mt,innerHTML:St+this.btnCls.outerHTML}).outerHTML,Pi=this.createElement("div",{className:pt,innerHTML:ri,attrs:{tabIndex:"-1"}});Q.appendChild(this.createElement("div",Je)),(0,i.td)("."+zs,Q)[Te].appendChild(Pi)})}}else D=this.parseObject(this.items,0);this.tbObj=new cn({width:"Left"===g||"Right"===g?"auto":"100%",height:"Left"===g||"Right"===g?"100%":"auto",overflowMode:this.overflowMode,items:0!==D.length?D:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),(0,i.Y4)(this.hdrEle,{"aria-label":"tab-header"}),this.updateOrientationAttribute(),this.setCloseButton(this.showCloseButton)}renderContent(){this.cntEle=(0,i.Ys)("."+tr,this.element);const g=(0,i.td)("."+Vi,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";const D=this.cntEle.children;for(let O=0;O<g.length;O++)D.length-1>=O&&((0,i.cn)([D.item(O)],zs),(0,i.Y4)(D.item(O),{role:"tabpanel","aria-labelledby":zs+this.tabId+"_"+O}),D.item(O).id=tr+this.tabId+"_"+O)}}reRenderItems(){this.renderContainer(),(0,i.le)(this.cntEle)||(this.touchModule=new i.Xh(this.cntEle,{swipe:this.swipeHandler.bind(this)}))}parseObject(g,D){const O=(0,i.td)(".e-tab-header ."+Vi,this.element).length,_=[];let Q;const me=[];return g.forEach((Te,Je)=>{const St=(0,i.le)(Te.header)||(0,i.le)(Te.header.iconPosition)?"":Te.header.iconPosition,ri=(0,i.le)(Te.header)||(0,i.le)(Te.header.iconCss)?"":Te.header.iconCss;if((0,i.le)(Te.headerTemplate)&&((0,i.le)(Te.header)||(0,i.le)(Te.header.text)||0===Te.header.text.length&&""===ri))return void me.push(Je);let Hi,Pi=Te.headerTemplate||Te.header.text;if("string"==typeof Pi&&this.enableHtmlSanitizer&&(Pi=i.pJ.sanitize(Pi)),this.isReplace&&!(0,i.le)(this.tbId)&&""!==this.tbId){const Yl=this.tbId.indexOf("_");Hi=parseInt(this.tbId.substring(Yl+1),10),this.tbId=""}else Hi=D+Je;this.lastIndex=0===O?Je:this.isReplace?Hi:this.isAdd?O+Je:this.lastIndex+1;const xs=Te.disabled?" "+$r+" "+I:"",Os=!1===Te.visible?" "+Ir:"";Q=this.createElement("div",{className:fe,attrs:{role:"presentation"}});const br=Pi instanceof Object?Pi.outerHTML:Pi,Wr=!(0,i.le)(br)&&""!==br;let Ao;(0,i.le)(Pi.tagName)?this.headerTextCompile(Q,Pi,Je):Q.appendChild(Pi);const On=this.createElement("span",{className:ks+" "+wi+" "+xi+"-"+St+" "+ri}),mo=this.createElement("div",{className:Mt});mo.appendChild(Q),""!==Pi&&void 0!==Pi&&""!==ri?("left"===St||"top"===St?mo.insertBefore(On,mo.firstElementChild):mo.appendChild(On),Ao=Q,this.isIconAlone=!1):(Ao=""===ri?Q:On,Ao===On&&((0,i.og)(Q),mo.appendChild(On),this.isIconAlone=!0));const Zo=Te.disabled?{}:{tabIndex:"-1"};mo.appendChild(this.btnCls.cloneNode(!0));const Wo=this.createElement("div",{className:pt,attrs:Zo});Wo.appendChild(mo),this.itemIndexArray===[]?this.itemIndexArray.push(zs+this.tabId+"_"+this.lastIndex):this.itemIndexArray.splice(D+Je,0,zs+this.tabId+"_"+this.lastIndex);const Ol={htmlAttributes:{id:zs+this.tabId+"_"+this.lastIndex,role:"tab","aria-selected":"false"},template:Wo};Ol.cssClass=(void 0!==Te.cssClass?Te.cssClass:" ")+" "+xs+" "+Os+" "+(""!==ri?"e-i"+St:"")+" "+(Wr?"":xi),("top"===St||"bottom"===St)&&this.element.classList.add("e-vertical-icon"),_.push(Ol),Je++}),this.isAdd||me.forEach(Te=>{this.items.splice(Te,1)}),this.isIconAlone?this.element.classList.add(v):this.element.classList.remove(v),_}removeActiveClass(){const g=this.getTabHeader();if(g){const D=(0,i.td)("."+Vi+"."+qs,g);[].slice.call(D).forEach(O=>O.classList.remove(qs))}}checkPopupOverflow(g){this.tbPop=(0,i.Ys)("."+sn,this.element);const D=(0,i.Ys)(".e-hor-nav",this.element),O=(0,i.Ys)("."+Gi,this.element),_=O.lastChild;let Q=!1;return(!this.isVertical()&&(this.enableRtl&&D.offsetLeft+D.offsetWidth>O.offsetLeft||!this.enableRtl&&D.offsetLeft<O.offsetWidth)||this.isVertical()&&D.offsetTop<_.offsetTop+_.offsetHeight)&&(Q=!0),Q&&(g.classList.add(ts),this.tbPop.insertBefore(g,(0,i.td)("."+ts,this.tbPop)[0])),!0}popupHandler(g){const D=g.querySelector(".e-ripple-element");(0,i.le)(D)||(D.outerHTML="",g.querySelector("."+pt).classList.remove("e-ripple")),this.tbItem=(0,i.td)("."+Gi+" ."+Vi,this.hdrEle);const O=this.tbItem[this.tbItem.length-1];return 0!==this.tbItem.length&&(g.classList.remove(ts),g.removeAttribute("style"),this.tbItems.appendChild(g),this.actEleId=g.id,this.checkPopupOverflow(O)&&this.checkPopupOverflow(this.tbItems.lastChild.previousElementSibling),this.isPopup=!0),(0,i.td)("."+Vi,this.tbItems).length-1}updateOrientationAttribute(){(0,i.Y4)(this.element,{"aria-orientation":this.isVertical()?"vertical":"horizontal"})}setCloseButton(g){const D=(0,i.Ys)("."+$s,this.element);!0===g?D.classList.add($):D.classList.remove($),this.tbObj.refreshOverflow(),this.refreshActiveTabBorder()}prevCtnAnimation(g,D){let O;return this.enableRtl||this.element.classList.contains(ir),O=this.isPopup||g<=D?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null,O}triggerPrevAnimation(g,D){const O=this.prevCtnAnimation(D,this.selectedItem);(0,i.le)(O)?g.classList.remove(qs):(O.begin=()=>{(0,i.V7)(g,{position:"absolute"}),g.classList.add(ht),g.classList.add("e-view")},O.end=()=>{g.style.display="none",g.classList.remove(qs),g.classList.remove(ht),g.classList.remove("e-view"),(0,i.V7)(g,{display:"",position:""}),0===g.childNodes.length&&!this.isTemplate&&(0,i.og)(g)},new i.fw(O).animate(g))}triggerAnimation(g,D){const O=this.prevIndex;let _;[].slice.call(this.element.querySelector("."+tr).children).forEach(ri=>{ri.id===this.prevActiveEle&&(_=ri)});const me=this.tbItem[O],Te=this.getTrgContent(this.cntEle,this.extIndex(g));if((0,i.le)(_)&&!(0,i.le)(me)){const ri=this.extIndex(me.id);_=this.getTrgContent(this.cntEle,ri)}if((0,i.le)(Te)||(this.prevActiveEle=Te.id),this.initRender||!1===D||this.animation==={}||(0,i.le)(this.animation))return void(_&&_!==Te&&_.classList.remove(qs));const Je=(0,i.Ys)("."+tr,this.element);let St;if(this.prevIndex>this.selectedItem&&!this.isPopup){const ri=this.animation.previous.effect;St={name:"None"===ri?"":"SlideLeftIn"!==ri?ri:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){const ri=this.animation.next.effect;St={name:"None"===ri?"":"SlideRightIn"!==ri?ri:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}St.progress=()=>{Je.classList.add(ht),this.setActiveBorder()},St.end=()=>{Je.classList.remove(ht),Te.classList.add(qs)},!this.initRender&&!(0,i.le)(_)&&this.triggerPrevAnimation(_,O),this.isPopup=!1,""===St.name?Te.classList.add(qs):new i.fw(St).animate(Te)}keyPressed(g){const D=(0,i.oq)(g,"."+$s+" ."+Vi),O=this.getEleIndex(D);!(0,i.le)(this.popEle)&&g.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):g.classList.contains("e-scroll-nav")?g.click():!(0,i.le)(D)&&!1===D.classList.contains(qs)&&(this.selectTab(O,null,!0),(0,i.le)(this.popEle)||this.popObj.hide(this.hide))}getTabHeader(){if((0,i.le)(this.element))return;const g=[].slice.call(this.element.children).filter(D=>D.classList.contains($s));if(g.length>0)return g[0];{const D=[].slice.call(this.element.children).filter(O=>!O.classList.contains("blazor-template"))[0];return D?[].slice.call(D.children).filter(O=>O.classList.contains($s))[0]:void 0}}getEleIndex(g){return Array.prototype.indexOf.call((0,i.td)("."+Vi,this.getTabHeader()),g)}extIndex(g){return g.replace(zs+this.tabId+"_","")}expTemplateContent(){this.templateEle.forEach(g=>{(0,i.le)(this.element.querySelector(g))||(document.body.appendChild(this.element.querySelector(g)).style.display="none")})}templateCompile(g,D,O){const _=this.createElement("div");this.compileElement(_,D,"content",O),0!==_.childNodes.length&&g.appendChild(_),this.isReact&&this.renderReactTemplates()}compileElement(g,D,O,_){let Q,me;"string"==typeof D?(D=D.trim(),g.innerHTML=i.pJ.sanitize(D)):Q=(0,i.MY)(D),(0,i.le)(Q)||(me=Q({},this,O)),!(0,i.le)(Q)&&me.length>0&&[].slice.call(me).forEach(Te=>{g.appendChild(Te)})}headerTextCompile(g,D,O){this.compileElement(g,D,"headerTemplate",O)}getContent(g,D,O,_){let Q;if("string"==typeof(D=(0,i.le)(D)?"":D)||(0,i.le)(D.innerHTML))if("string"==typeof D&&this.enableHtmlSanitizer&&(D=i.pJ.sanitize(D)),"."===D[0]||"#"===D[0])if(document.querySelectorAll(D).length){const me=document.querySelector(D);Q=me.outerHTML.trim(),"clone"===O?g.appendChild(me.cloneNode(!0)):(g.appendChild(me),me.style.display="")}else this.templateCompile(g,D,_);else this.templateCompile(g,D,_);else g.appendChild(D);(0,i.le)(Q)||-1===this.templateEle.indexOf(D.toString())&&this.templateEle.push(D.toString())}getTrgContent(g,D){let O;return O=this.element.classList.contains(vr)?(0,i.Ys)("."+vr+"> ."+tr+" > #"+tr+this.tabId+"_"+D,this.element):this.findEle(g.children,tr+this.tabId+"_"+D),O}findEle(g,D){let O;for(let _=0;_<g.length;_++)if(g[_].id===D){O=g[_];break}return O}isVertical(){const g="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=g?"e-vscroll-content":"e-hscroll-content",g}addVerticalClass(){if(this.isVertical()){const g="Left"===this.headerPlacement?Bt:Ii;(0,i.cn)([this.hdrEle],[dt,g]),this.element.classList.contains(vr)?(0,i.cn)([this.hdrEle],[Ee,g]):(0,i.cn)([this.element],[Ee,g])}"Bottom"===this.headerPlacement&&(0,i.cn)([this.hdrEle],[Yi])}updatePopAnimationConfig(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}}changeOrientation(g){this.setOrientation(g,this.hdrEle);const D=this.hdrEle.querySelector("."+qs),O=!!this.hdrEle.classList.contains(dt);(0,i.IV)([this.element],[Ee]),(0,i.IV)([this.hdrEle],[dt,Bt,Ii]),O!==this.isVertical()&&(this.changeToolbarOrientation(),!(0,i.le)(D)&&D.classList.contains(ts)&&this.popupHandler(D)),this.addVerticalClass(),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()}focusItem(){const g=(0,i.Ys)(" #"+zs+this.tabId+"_"+this.selectedItem,this.hdrEle);(0,i.le)(g)||g.firstElementChild.focus()}changeToolbarOrientation(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()}setOrientation(g,D){const O=Array.prototype.indexOf.call(this.element.children,D),_=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+tr));"Bottom"===g&&_>O?this.element.appendChild(D):((0,i.IV)([D],[Yi]),this.element.insertBefore(D,(0,i.Ys)("."+tr,this.element)))}setCssClass(g,D,O){if(""===D)return;const _=D.split(" ");for(let Q=0;Q<_.length;Q++)O?g.classList.add(_[Q]):g.classList.remove(_[Q])}setContentHeight(g){if(this.element.classList.contains(Ss)&&(0,i.IV)([this.element],[Ss]),(0,i.le)(this.cntEle))return;const D=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||(0,i.V7)(this.cntEle,{height:this.element.offsetHeight-D.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)(0,i.cn)([this.element],[Ss]),(0,i.V7)(this.element,{height:"100%"}),(0,i.V7)(this.cntEle,{height:this.element.offsetHeight-D.offsetHeight+"px"});else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate){const O=(0,i.td)("."+tr+" > ."+zs,this.element);for(let _=0;_<O.length;_++)O[_].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(O[_])),O[_].style.removeProperty("display"),O[_].style.removeProperty("visibility")}else{this.cntEle=(0,i.Ys)("."+tr,this.element),!0===g&&this.cntEle.appendChild(this.createElement("div",{id:tr+this.tabId+"_0",className:zs+" "+qs,attrs:{role:"tabpanel","aria-labelledby":zs+this.tabId+"_0"}}));const O=this.cntEle.children.item(0);for(let _=0;_<this.items.length;_++)for(this.getContent(O,this.items[_].content,"clone",_),this.maxHeight=Math.max(this.maxHeight,this.getHeight(O));O.firstChild;)O.removeChild(O.firstChild);this.isReact&&this.clearTemplate(["content"]),this.templateEle=[],this.getContent(O,this.items[0].content,"render",0),this.prevIndex!==this.selectedItem&&O.classList.remove(qs)}(0,i.V7)(this.cntEle,{height:this.maxHeight+"px"})}else(0,i.V7)(this.cntEle,{height:"auto"})}getHeight(g){const D=window.getComputedStyle(g);return g.offsetHeight+parseFloat(D.getPropertyValue("padding-top"))+parseFloat(D.getPropertyValue("padding-bottom"))+parseFloat(D.getPropertyValue("margin-top"))+parseFloat(D.getPropertyValue("margin-bottom"))}setActiveBorder(){const g=this.getTabHeader(),D=(0,i.Ys)("."+Vi+"."+qs,g);if((0,i.le)(D))return;this.reorderActiveTab?g&&g.classList.remove(un):(D.classList.contains(ts)&&!this.bdrLine.classList.contains(Ir)&&this.bdrLine.classList.add(Ir),g&&!g.classList.contains(un)&&g.classList.add(un));const O=(0,i.oq)(D,"."+uo);if(this.element!==O)return;this.tbItems=(0,i.Ys)("."+Gi,g);const _=(0,i.Ys)("."+Ce,g),Q=(0,i.Ys)("."+Gi+" ."+this.scrCntClass,g);if(this.isVertical())(0,i.V7)(_,{left:"",right:""}),0!==((0,i.le)(Q)?this.tbItems.offsetHeight:Q.offsetHeight)?(0,i.V7)(_,{top:D.offsetTop+"px",height:D.offsetHeight+"px"}):(0,i.V7)(_,{top:0,height:0});else{if("MultiRow"===this.overflowMode){let Te=(0,i.Ys)("."+Ce,this.element);(0,i.V7)(Te,{top:D.offsetHeight+D.offsetTop+"px",height:""})}else(0,i.V7)(_,{top:"",height:""});let me=(0,i.le)(Q)?this.tbItems.offsetWidth:Q.offsetWidth;(0,i.V7)(_,0!==me?{left:D.offsetLeft+"px",right:me-(D.offsetLeft+D.offsetWidth)+"px"}:{left:"auto",right:"auto"})}!(0,i.le)(this.bdrLine)&&!D.classList.contains(ts)&&this.bdrLine.classList.remove(Ir)}setActive(g,D=!1,O=!1){this.tbItem=(0,i.td)("."+Vi,this.getTabHeader());const _=this.tbItem[g];if(g<0||isNaN(g)||0===this.tbItem.length)return;if(g>=0&&!D&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:g},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),_.classList.contains(qs))return void this.setActiveBorder();if(!this.isTemplate){const Te=this.tbItem[this.prevIndex];(0,i.le)(Te)||Te.removeAttribute("aria-controls"),(0,i.Y4)(_,{"aria-controls":tr+this.tabId+"_"+g})}const Q=_.id;this.removeActiveClass(),_.classList.add(qs),this.tbItem[this.prevIndex].setAttribute("aria-selected","false"),_.setAttribute("aria-selected","true");const me=Number(this.extIndex(Q));if((0,i.le)(this.prevActiveEle)&&(this.prevActiveEle=tr+this.tabId+"_"+me),(0,i.Y4)(this.element,{"aria-activedescendant":Q}),this.isTemplate){if((0,i.Ys)("."+tr,this.element).children.length>0){const Te=this.findEle((0,i.Ys)("."+tr,this.element).children,tr+this.tabId+"_"+me);(0,i.le)(Te)||Te.classList.add(qs),this.triggerAnimation(Q,this.enableAnimation)}}else{this.cntEle=(0,i.Ys)(".e-tab > ."+tr,this.element);const Te=this.getTrgContent(this.cntEle,this.extIndex(Q));if((0,i.le)(Te)){this.cntEle.appendChild(this.createElement("div",{id:tr+this.tabId+"_"+this.extIndex(Q),className:zs+" "+qs,attrs:{role:"tabpanel","aria-labelledby":zs+this.tabId+"_"+this.extIndex(Q)}}));const Je=this.getTrgContent(this.cntEle,this.extIndex(Q)),St=Array.prototype.indexOf.call(this.itemIndexArray,Q);this.getContent(Je,this.items[St].content,"render",St)}else Te.classList.add(qs);this.triggerAnimation(Q,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(_),!this.initRender&&!D){_.firstElementChild.focus();const Te={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:_,selectedIndex:g,selectedContent:(0,i.Ys)("#"+tr+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:O};this.trigger("selected",Te)}}contentReady(){const g=this.setActiveContent();this.triggerAnimation(g,this.enableAnimation)}setItems(g){this.isReplace=!0,this.tbItems=(0,i.Ys)("."+Gi,this.getTabHeader()),this.tbObj.items=this.parseObject(g,0),this.tbObj.dataBind(),this.isReplace=!1}setRTL(g){this.tbObj.enableRtl=g,this.tbObj.dataBind(),this.setCssClass(this.element,ir,g),this.refreshActiveBorder()}refreshActiveBorder(){(0,i.le)(this.bdrLine)||this.bdrLine.classList.add(Ir),this.setActiveBorder()}showPopup(g){const D=(0,i.Ys)(".e-popup.e-toolbar-pop",this.hdrEle);if(D.classList.contains("e-popup-close")){const O=D&&D.ej2_instances[0];O.position.X="Left"===this.headerPlacement?"left":"right",O.dataBind(),O.show(g)}}bindDraggable(){this.allowDragAndDrop&&this.element.querySelector("."+$s).querySelectorAll("."+Vi).forEach(O=>{this.initializeDrag(O)})}wireEvents(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),i.bi.add(this.element,"mouseover",this.hoverHandler,this),i.bi.add(this.element,"keydown",this.spaceKeyDown,this),(0,i.le)(this.cntEle)||(this.touchModule=new i.Xh(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new i.nv(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new i.nv(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})}unWireEvents(){(0,i.le)(this.keyModule)||this.keyModule.destroy(),(0,i.le)(this.tabKeyModule)||this.tabKeyModule.destroy(),!(0,i.le)(this.cntEle)&&!(0,i.le)(this.touchModule)&&this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),i.bi.remove(this.element,"mouseover",this.hoverHandler),i.bi.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove(ir),this.element.classList.remove(Pn)}clickHandler(g){this.element.classList.remove(Pn);const D=g.originalEvent.target,O=(0,i.oq)(D,"."+Vi),_=this.getEleIndex(O);D.classList.contains(M)?this.removeTab(_):this.isVertical()&&(0,i.oq)(D,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,!(0,i.le)(O)&&(_!==this.selectedItem||_!==this.prevIndex)&&this.selectTab(_,g.originalEvent,!0))}swipeHandler(g){if(!(g.velocity<3&&(0,i.le)(g.originalEvent.changedTouches))){if(g.originalEvent&&this.isNested&&g.originalEvent.stopPropagation(),this.isSwipeed=!0,"Right"===g.swipeDirection&&0!==this.selectedItem){for(let D=this.selectedItem-1;D>=0;D--)if(!this.tbItem[D].classList.contains(Ir)){this.selectTab(D,null,!0);break}}else if("Left"===g.swipeDirection&&this.selectedItem!==(0,i.td)("."+Vi,this.element).length-1)for(let D=this.selectedItem+1;D<this.tbItem.length;D++)if(!this.tbItem[D].classList.contains(Ir)){this.selectTab(D,null,!0);break}this.isSwipeed=!1}}spaceKeyDown(g){if(32===g.keyCode&&32===g.which||35===g.keyCode&&35===g.which){const D=(0,i.oq)(g.target,"."+$s);(0,i.le)(D)||g.preventDefault()}}keyHandler(g){if(this.element.classList.contains($r))return;this.element.classList.add(Pn);const D=g.target,O=this.getTabHeader(),_=(0,i.Ys)("."+qs,O);this.popEle=(0,i.Ys)("."+sn,O),(0,i.le)(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);const Q=(0,i.oq)(document.activeElement,"."+Vi),me=(0,i.oq)(D,"."+Vi);switch(g.action){case"space":case"enter":if(D.parentElement.classList.contains($r))return;if("enter"===g.action&&D.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(D);break;case"tab":case"shiftTab":D.classList.contains(pt)&&!1===(0,i.oq)(D,"."+Vi).classList.contains(qs)&&D.setAttribute("tabindex","-1"),this.popObj&&(0,i.pn)(this.popObj.element)&&this.popObj.hide(this.hide),_.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":(0,i.le)(Q)||this.refreshItemVisibility(Q);break;case"openPopup":g.preventDefault(),!(0,i.le)(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!(0,i.le)(me)){const Te=me.nextSibling;!(0,i.le)(Te)&&Te.classList.contains(Vi)&&Te.firstElementChild.focus(),this.removeTab(this.getEleIndex(me))}this.setActiveBorder()}}refreshActiveTabBorder(){const g=(0,i.Ys)("."+Vi+"."+ts+"."+qs,this.element);!(0,i.le)(g)&&this.reorderActiveTab&&this.select(this.getEleIndex(g)),this.refreshActiveBorder()}refreshItemVisibility(g){const D=(0,i.Ys)("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!(0,i.le)(D)){const O=(0,i.Ys)(".e-hscroll-bar",this.tbItems),_=O.scrollLeft,Q=_+O.offsetWidth,me=g.offsetLeft,Te=g.offsetWidth,Je=g.offsetLeft+g.offsetWidth;_<me&&Q<Je?O.scrollLeft=_+(Te-(Q-me)):_>me&&Q>Je&&(O.scrollLeft=_-(Te-(Je-_)))}}hoverHandler(g){const D=g.target;!(0,i.le)(D.classList)&&D.classList.contains(M)&&D.setAttribute("title",new i.E7("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))}evalOnPropertyChangeItems(g,D){if(g.items instanceof Array&&D.items instanceof Array)if(this.lastIndex=0,(0,i.le)(this.tbObj))this.reRenderItems();else{this.isRect&&this.clearTemplate(),this.setItems(g.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];const O=(0,i.Ys)(".e-tab > ."+tr,this.element);for(;O.firstElementChild;)(0,i.og)(O.firstElementChild);this.select(this.selectedItem)}else{const O=Object.keys(g.items);for(let _=0;_<O.length;_++){const Q=parseInt(Object.keys(g.items)[_],10),me=Object.keys(g.items[Q]);for(let Te=0;Te<me.length;Te++){const Je=Object(D.items[Q])[me[Te]],St=Object(g.items[Q])[me[Te]],ri=this.element.querySelectorAll("."+Vi)[Q];let Pi;if(ri&&!(0,i.le)(ri.id)&&""!==ri.id){const xs=ri.id.lastIndexOf("_");Pi=parseInt(ri.id.substring(xs+1),10)}else Pi=Q;const Hi=(0,i.Ys)("."+Gi+" #"+zs+this.tabId+"_"+Pi,this.element),Ms=(0,i.Ys)("."+tr+" #"+tr+this.tabId+"_"+Pi,this.element);if("header"===me[Te]||"headerTemplate"===me[Te]){const xs=(0,i.le)(this.items[Q].header)||(0,i.le)(this.items[Q].header.iconCss)?"":this.items[Q].header.iconCss;if(""===(this.items[Q].headerTemplate||this.items[Q].header.text)&&""===xs)this.removeTab(Q);else{this.tbId=ri.id;const br=[];br.push(this.items[Q]),this.items.splice(Q,1),this.itemIndexArray.splice(Q,1),this.tbObj.items.splice(Q,1);const Wr=Hi.classList.contains(Ir);(0,i.og)(Hi),this.isReplace=!0,this.addTab(br,Q),Wr&&this.hideTab(Q),this.isReplace=!1}}if("content"===me[Te]&&!(0,i.le)(Ms))if("string"!=typeof St&&!(0,i.le)(St.innerHTML)||"."!==St[0]&&"#"!==St[0]||!St.length)""===St&&"#"===Je[0]?(document.body.appendChild(this.element.querySelector(Je)).style.display="none",Ms.innerHTML=St):this.isReact?(Ms.innerHTML="",this.templateCompile(Ms,St,Q)):"function"!=typeof St&&(Ms.innerHTML=St);else{const Os=document.querySelector(St);Ms.appendChild(Os),Os.style.display=""}"cssClass"===me[Te]&&((0,i.le)(Hi)||(Hi.classList.remove(Je),Hi.classList.add(St)),(0,i.le)(Ms)||(Ms.classList.remove(Je),Ms.classList.add(St))),"disabled"===me[Te]&&this.enableTab(Q,!0!==St),"visible"===me[Te]&&this.hideTab(Q,!0!==St)}}}}initializeDrag(g){this.dragArea=(0,i.le)(this.dragArea)?"#"+this.element.id+" ."+$s:this.dragArea;let D=new i._l(g,{dragArea:this.dragArea,dragTarget:"."+Vi,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:O=>{let Q,me,_=this.getEleIndex(this.dragItem),Te={draggedItem:this.dragItem,event:O.event,target:O.target,droppedItem:O.target.closest("."+Vi),clonedElement:this.cloneElement,index:_};if((0,i.le)(O.target.closest("."+uo))||O.target.closest("."+uo).isEqualNode(this.element)||this.dragArea==="."+$s){if(O.target.closest(this.dragArea)||"Popup"===this.overflowMode?(document.body.style.cursor="",this.dragItem.querySelector("."+pt).style.visibility="hidden",this.cloneElement.classList.contains(Ir)&&(0,i.IV)([this.cloneElement],Ir)):(document.body.style.cursor="not-allowed",(0,i.cn)([this.cloneElement],Ir),this.dragItem.classList.contains(Ir)&&(0,i.IV)([this.dragItem],Ir),this.dragItem.querySelector("."+pt).style.visibility="visible"),"Scrollable"===this.overflowMode&&!(0,i.le)(this.element.querySelector(".e-hscroll"))){let St=this.element.querySelector(".e-scroll-right-nav"),ri=this.element.querySelector(".e-scroll-left-nav"),Pi=this.element.querySelector(".e-hscroll-bar");!(0,i.le)(St)&&Math.abs(St.offsetWidth/2+St.offsetLeft)>this.cloneElement.offsetLeft+this.cloneElement.offsetWidth&&(Pi.scrollLeft-=10),!(0,i.le)(ri)&&Math.abs(ri.offsetLeft+ri.offsetWidth-this.cloneElement.offsetLeft)>ri.offsetWidth/2&&(Pi.scrollLeft+=10)}this.cloneElement.style.pointerEvents="none",me=(0,i.oq)(O.target,"."+Vi+".e-draggable");let Je=0;"Scrollable"===this.overflowMode&&!(0,i.le)(this.element.querySelector(".e-hscroll"))&&(Je=this.element.querySelector(".e-hscroll-content").offsetWidth),null!=me&&!me.isSameNode(this.dragItem)&&me.closest("."+uo).isSameNode(this.dragItem.closest("."+uo))&&(Q=this.getEleIndex(me),Q<_&&Math.abs(me.offsetLeft+me.offsetWidth-this.cloneElement.offsetLeft)>me.offsetWidth/2&&this.dragAction(me,_,Q),Q>_&&Math.abs(me.offsetWidth/2)+me.offsetLeft-Je<this.cloneElement.offsetLeft+this.cloneElement.offsetWidth&&this.dragAction(me,_,Q)),this.droppedIndex=this.getEleIndex(this.dragItem),this.trigger("dragging",Te)}else this.trigger("dragging",Te)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(D)}helper(g){return this.cloneElement=this.createElement("div"),g.element&&(this.cloneElement=g.element.cloneNode(!0),(0,i.cn)([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+$s).classList.contains($)&&(0,i.cn)([this.cloneElement],$),(0,i.IV)([this.cloneElement.querySelector("."+pt)],"e-ripple"),(0,i.le)(this.cloneElement.querySelector(".e-ripple-element"))||(0,i.Od)(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement}itemDragStart(g){this.draggingItems=this.items.map(O=>O),this.dragItem=g.element;let D={draggedItem:g.element,event:g.event,target:g.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",D,O=>{O.cancel?(0,i.og)(this.cloneElement):(this.removeActiveClass(),(0,i.cn)([this.tbItems.querySelector("."+Ce)],Ir),this.dragItem.querySelector("."+pt).style.visibility="hidden")})}dragAction(g,D,O){if(this.items.length>0){let _=this.draggingItems[D];this.draggingItems.splice(D,1),this.draggingItems.splice(O,0,_)}if("MultiRow"===this.overflowMode&&g.parentNode.insertBefore(this.dragItem,g.nextElementSibling),D>O)if(this.dragItem.parentElement.isSameNode(g.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,g);else if("Extended"===this.overflowMode)if(g.isSameNode(g.parentElement.lastChild)){let _=this.dragItem.parentNode;g.parentNode.insertBefore(this.dragItem,g),_.insertBefore(g.parentElement.lastChild,_.childNodes[0])}else this.dragItem.parentNode.insertBefore(g.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),g.parentNode.insertBefore(this.dragItem,g);else{let _=g.parentElement.lastChild;if(g.isSameNode(_)){let Q=this.dragItem.parentNode;g.parentNode.insertBefore(this.dragItem,g),Q.insertBefore(_,Q.childNodes[0])}else this.dragItem.parentNode.insertBefore(g.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),g.parentNode.insertBefore(this.dragItem,g)}D<O&&(this.dragItem.parentElement.isSameNode(g.parentElement)?this.dragItem.parentNode.insertBefore(g,this.dragItem):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(g.parentElement.firstElementChild),g.parentNode.insertBefore(this.dragItem,g.nextSibling)):(this.dragItem.parentNode.insertBefore(g.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),g.parentNode.insertBefore(this.dragItem,g)))}itemDragStop(g){(0,i.og)(this.cloneElement),this.dragItem.querySelector("."+pt).style.visibility="visible",document.body.style.cursor="",this.trigger("dragged",{draggedItem:this.dragItem,event:g.event,target:g.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1},O=>{O.cancel?this.refresh():this.items.length>0&&this.draggingItems.length>0?(this.items=this.draggingItems,this.selectedItem=this.droppedIndex,this.refresh()):(this.dragItem.querySelector("."+pt).style.visibility="",(0,i.IV)([this.tbItems.querySelector("."+Ce)],Ir),this.selectTab(this.droppedIndex,null,!0))})}enableTab(g,D){const O=(0,i.td)("."+Vi,this.element)[g];(0,i.le)(O)||(!0===D?(O.classList.remove($r,I),O.firstElementChild.setAttribute("tabindex","-1")):(O.classList.add($r,I),O.firstElementChild.removeAttribute("tabindex"),O.classList.contains(qs)&&this.select(g+1)),(0,i.le)(this.items[g])||(this.items[g].disabled=!D,this.dataBind()),O.setAttribute("aria-disabled",!0===D?"false":"true"))}addTab(g,D){const O={addedItems:g,cancel:!1};this.isReplace?this.addingTabContent(g,D):this.trigger("adding",O,_=>{_.cancel||this.addingTabContent(g,D)}),this.isReact&&this.renderReactTemplates()}addingTabContent(g,D){let O=0;if(this.hdrEle=(0,i.Ys)("."+$s,this.element),(0,i.le)(this.hdrEle))this.items=g,this.reRenderItems();else{const _=(0,i.td)(".e-tab-header ."+Vi,this.element).length;if(0!==_&&(O=this.lastIndex+1),(0,i.le)(D)&&(D=_-1),_<D||D<0||isNaN(D))return;0===_&&!(0,i.le)(this.hdrEle)&&(this.hdrEle.style.display=""),(0,i.le)(this.bdrLine)||this.bdrLine.classList.add(Ir),this.tbItems=(0,i.Ys)("."+Gi,this.getTabHeader()),this.isAdd=!0;const Q=this.parseObject(g,D);this.isAdd=!1;let Te,me=0;g.forEach((Je,St)=>{if(Te=Je.headerTemplate||Je.header.text,(0,i.le)(Je.headerTemplate||Je.header)||(0,i.le)(Te)||0===Te.length&&(0,i.le)(Je.header.iconCss)||(this.items.splice(D+me,0,Je),me++),this.isTemplate&&!(0,i.le)(Je.header)&&!(0,i.le)(Je.header.text)){const ri=O+St,Pi=this.createElement("div",{id:tr+this.tabId+"_"+ri,className:zs,attrs:{role:"tabpanel","aria-labelledby":zs+"_"+ri}});this.cntEle.insertBefore(Pi,this.cntEle.children[D+St]);const Hi=this.getTrgContent(this.cntEle,ri.toString());this.getContent(Hi,Je.content,"render",D)}}),this.tbObj.addItems(Q,D),this.isReplace||this.trigger("added",{addedItems:g}),this.selectedItem===D?this.select(D):this.setActiveBorder(),this.bindDraggable()}}removeTab(g){const D=(0,i.td)("."+Vi,this.element)[g];(0,i.le)(D)||this.trigger("removing",{removedItem:D,removedIndex:g,cancel:!1},_=>{if(!_.cancel){this.tbObj.removeItems(g),this.allowDragAndDrop&&g!==Array.prototype.indexOf.call(this.itemIndexArray,D.id)&&(g=Array.prototype.indexOf.call(this.itemIndexArray,D.id)),this.items.splice(g,1),this.itemIndexArray.splice(g,1),this.refreshActiveBorder();const Q=(0,i.Ys)("#"+tr+this.tabId+"_"+this.extIndex(D.id),(0,i.Ys)("."+tr,this.element));(0,i.le)(Q)||(0,i.og)(Q),this.trigger("removed",_),D.classList.contains(qs)&&(g=g>(0,i.td)("."+Vi+":not(."+ts+")",this.element).length-1?g-1:g,this.enableAnimation=!1,this.selectedItem=g,this.select(g)),0===(0,i.td)("."+Vi,this.element).length&&(this.hdrEle.style.display="none"),this.enableAnimation=!0}})}hideTab(g,D){let O;const _=(0,i.td)("."+Vi,this.element)[g];if(!(0,i.le)(_)){if((0,i.le)(D)&&(D=!0),this.bdrLine.classList.add(Ir),!0===D)if(_.classList.add(Ir),O=(0,i.td)("."+Vi+":not(."+Ir+")",this.tbItems),0!==O.length&&_.classList.contains(qs)){if(0!==g)for(let Q=g-1;Q>=0;Q--){if(!this.tbItem[Q].classList.contains(Ir)){this.select(Q);break}if(0===Q)for(let me=g+1;me<this.tbItem.length;me++)if(!this.tbItem[me].classList.contains(Ir)){this.select(me);break}}else for(let Q=g+1;Q<this.tbItem.length;Q++)if(!this.tbItem[Q].classList.contains(Ir)){this.select(Q);break}}else 0===O.length&&this.element.classList.add(Ir);else this.element.classList.remove(Ir),O=(0,i.td)("."+Vi+":not(."+Ir+")",this.tbItems),_.classList.remove(Ir),0===O.length&&this.select(g);this.setActiveBorder(),_.setAttribute("aria-hidden",""+D),"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}}selectTab(g,D=null,O=!1){this.isInteracted=O,this.select(g,D)}select(g,D){const O=this.getTabHeader();this.tbItems=(0,i.Ys)("."+Gi,O),this.tbItem=(0,i.td)("."+Vi,O),this.content=(0,i.Ys)("."+tr,this.element),this.prevItem=this.tbItem[this.prevIndex],(0,i.le)(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);const _=this.tbItem[g];(0,i.le)(_)?this.selectedID="0":this.selectingID=this.extIndex(_.id),!(0,i.le)(this.prevItem)&&!this.prevItem.classList.contains($r)&&this.prevItem.children.item(0).setAttribute("tabindex","-1");const Q={event:D,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:(0,i.le)(this.content)?null:(0,i.Ys)("#"+tr+this.tabId+"_"+this.selectedID,this.content),selectingItem:_,selectingIndex:g,selectingContent:(0,i.le)(this.content)?null:(0,i.Ys)("#"+tr+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(g,this.isInteracted):this.trigger("selecting",Q,me=>{me.cancel||this.selectingContent(g,this.isInteracted)}),this.isInteracted=!1}selectingContent(g,D){if("number"==typeof g){if(!(0,i.le)(this.tbItem[g])&&(this.tbItem[g].classList.contains($r)||this.tbItem[g].classList.contains(Ir)))for(let O=g+1;O<this.items.length;O++){if(!1===this.items[O].disabled&&!0===this.items[O].visible){g=O;break}g=0}if(this.tbItem.length>g&&g>=0&&!isNaN(g))if(this.prevIndex=this.selectedItem,this.tbItem[g].classList.contains(ts)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[g]),null,D),!(0,i.le)(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=(0,i.td)("."+Gi+" ."+Vi,this.hdrEle);let O=this.items[g];this.items.splice(g,1),this.items.splice(this.tbItem.length-1,0,O)}}else this.setActive(g,null,D);else this.setActive(0,null,D)}else g instanceof HTMLElement&&this.setActive(this.getEleIndex(g),null,D)}getItemIndex(g){let D;for(let O=0;O<this.tbItem.length;O++)if(g===this.tbItem[O].getAttribute("data-id")){D=O;break}return D}disable(g){this.setCssClass(this.element,$r,g),this.element.setAttribute("aria-disabled",""+g)}getPersistData(){return this.addOnPersist(["selectedItem","actEleId"])}getModuleName(){return"tab"}onPropertyChanged(g,D){for(const O of Object.keys(g))switch(O){case"width":(0,i.V7)(this.element,{width:(0,i.Ac)(g.width)});break;case"height":(0,i.V7)(this.element,{height:(0,i.Ac)(g.height)}),this.setContentHeight(!1);break;case"cssClass":""===D.cssClass||(0,i.le)(D.cssClass)||this.setCssClass(this.element,D.cssClass,!1),this.setCssClass(this.element,g.cssClass,!0);break;case"items":this.evalOnPropertyChangeItems(g,D);break;case"showCloseButton":this.setCloseButton(g.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=D.selectedItem,this.select(g.selectedItem);break;case"headerPlacement":this.changeOrientation(g.headerPlacement);break;case"enableRtl":this.setRTL(g.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=g.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach(_=>{_.dragArea=this.dragArea}),this.refresh())}}refreshActiveTab(){if(this.isReact&&this.clearTemplate(),this.isTemplate){const g=this.element.querySelector("."+Gi),D=this.element.querySelector("."+Vi+"."+qs),O=D.id,_=O.indexOf("_"),Q=parseInt(O.substring(_+1),10),me=D.innerText,Te=this.element.querySelector("."+tr).querySelector("."+qs).children[0],Je=Te.innerHTML;(0,i.og)(D),(0,i.og)(Te);const St={className:Vi+" "+ur+" "+qs,id:zs+this.tabId+"_"+Q,attrs:{role:"tab","aria-controls":tr+this.tabId+"_"+Q,"aria-disabled":"false","aria-selected":"true"}},ri=this.createElement("span",{className:fe,innerHTML:me,attrs:{role:"presentation"}}).outerHTML,Pi=this.createElement("div",{className:Mt,innerHTML:ri+this.btnCls.outerHTML}).outerHTML,Hi=this.createElement("div",{className:pt,innerHTML:Pi,attrs:{tabIndex:"-1"}});g.insertBefore(this.createElement("div",St),g.children[Q+1]),this.element.querySelector("."+Vi+"."+qs).appendChild(Hi);const Ms=this.createElement("div",{innerHTML:Je});this.element.querySelector("."+tr).querySelector("."+qs).appendChild(Ms)}else if(this.element.querySelector("."+Vi+"."+qs)){(0,i.og)(this.element.querySelector("."+Vi+"."+qs).children[0]),(0,i.og)(this.element.querySelector("."+tr).querySelector("."+qs).children[0]);const g=this.items[this.selectedItem],D=(0,i.le)(g.header)||(0,i.le)(g.header.iconPosition)?"":g.header.iconPosition,O=(0,i.le)(g.header)||(0,i.le)(g.header.iconCss)?"":g.header.iconCss,_=g.headerTemplate||g.header.text,Q=this.createElement("div",{className:fe,attrs:{role:"presentation"}});let me;(0,i.le)(_.tagName)?this.headerTextCompile(Q,_,this.selectedItem):Q.appendChild(_);const Te=this.createElement("span",{className:ks+" "+wi+" "+xi+"-"+D+" "+O}),Je=this.createElement("div",{className:Mt});Je.appendChild(Q),""!==_&&void 0!==_&&""!==O?("left"===D||"top"===D?Je.insertBefore(Te,Je.firstElementChild):Je.appendChild(Te),me=Q,this.isIconAlone=!1):(me=""===O?Q:Te,me===Te&&((0,i.og)(Q),Je.appendChild(Te),this.isIconAlone=!0));const St=g.disabled?{}:{tabIndex:"-1"};Je.appendChild(this.btnCls.cloneNode(!0));const ri=this.createElement("div",{className:pt,attrs:St});ri.appendChild(Je),("top"===D||"bottom"===D)&&this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+Vi+"."+qs).appendChild(ri);const Pi=this.createElement("div");let Ms,Hi=g.content;if("string"==typeof Hi||(0,i.le)(Hi.innerHTML))if("string"==typeof Hi&&this.enableHtmlSanitizer&&(Hi=i.pJ.sanitize(Hi)),"."===Hi[0]||"#"===Hi[0])if(document.querySelectorAll(Hi).length){const xs=document.querySelector(Hi);Ms=xs.outerHTML.trim(),Pi.appendChild(xs),xs.style.display=""}else this.compileElement(Pi,Hi,"content",this.selectedItem);else this.compileElement(Pi,Hi,"content",this.selectedItem);else Pi.appendChild(Hi);(0,i.le)(Ms)||-1===this.templateEle.indexOf(Hi.toString())&&this.templateEle.push(Hi.toString()),this.element.querySelector(".e-item."+qs).appendChild(Pi)}this.isReact&&this.renderReactTemplates()}};Bs([(0,i.FE)([],En)],Ie.prototype,"items",void 0),Bs([(0,i.Z9)("100%")],Ie.prototype,"width",void 0),Bs([(0,i.Z9)("auto")],Ie.prototype,"height",void 0),Bs([(0,i.Z9)("")],Ie.prototype,"cssClass",void 0),Bs([(0,i.Z9)(0)],Ie.prototype,"selectedItem",void 0),Bs([(0,i.Z9)("Top")],Ie.prototype,"headerPlacement",void 0),Bs([(0,i.Z9)("Content")],Ie.prototype,"heightAdjustMode",void 0),Bs([(0,i.Z9)("Scrollable")],Ie.prototype,"overflowMode",void 0),Bs([(0,i.Z9)("Dynamic")],Ie.prototype,"loadOn",void 0),Bs([(0,i.Z9)(!1)],Ie.prototype,"enablePersistence",void 0),Bs([(0,i.Z9)(!1)],Ie.prototype,"enableHtmlSanitizer",void 0),Bs([(0,i.Z9)(!1)],Ie.prototype,"showCloseButton",void 0),Bs([(0,i.Z9)(!0)],Ie.prototype,"reorderActiveTab",void 0),Bs([(0,i.Z9)()],Ie.prototype,"scrollStep",void 0),Bs([(0,i.Z9)()],Ie.prototype,"dragArea",void 0),Bs([(0,i.Z9)(!1)],Ie.prototype,"allowDragAndDrop",void 0),Bs([(0,i.Zz)({},Jn)],Ie.prototype,"animation",void 0),Bs([(0,i.ju)()],Ie.prototype,"created",void 0),Bs([(0,i.ju)()],Ie.prototype,"adding",void 0),Bs([(0,i.ju)()],Ie.prototype,"added",void 0),Bs([(0,i.ju)()],Ie.prototype,"selecting",void 0),Bs([(0,i.ju)()],Ie.prototype,"selected",void 0),Bs([(0,i.ju)()],Ie.prototype,"removing",void 0),Bs([(0,i.ju)()],Ie.prototype,"removed",void 0),Bs([(0,i.ju)()],Ie.prototype,"onDragStart",void 0),Bs([(0,i.ju)()],Ie.prototype,"dragging",void 0),Bs([(0,i.ju)()],Ie.prototype,"dragged",void 0),Bs([(0,i.ju)()],Ie.prototype,"destroyed",void 0),Ie=Bs([i.Zl],Ie);var Le,Ae=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const Et="e-treeview",Ji="e-control",_s="e-icon-collapsible",_n="e-icon-expandable",en="e-list-item",po="e-list-text",hr="e-list-parent",Yo="e-hover",Rn="e-active",Do="e-icons-spinner",qo="e-process",zr="e-icons",Mr="e-text-content",ko="e-input",ze="e-input-group",Go="e-tree-input",$o="e-editing",Ge="e-interaction",w="e-droppable",k="e-dragging",N="e-sibling",R="e-drop-in",K="e-drop-next",G="e-drop-out",ye="e-no-drop",te="e-fullrow",ie="e-selected",xe="e-expanded",Ke="e-node-collapsed",ct="e-disable",si="e-check",Ri="e-stop",qi="e-checkbox-wrapper",Mi="e-frame",Gs="e-ripple",dr="e-node-focus",jr="e-list-img",ne="e-animation-active",le="e-disabled",De={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""};class Ye extends i.rt{}Ae([(0,i.Z9)("child")],Ye.prototype,"child",void 0),Ae([(0,i.Z9)([])],Ye.prototype,"dataSource",void 0),Ae([(0,i.Z9)("expanded")],Ye.prototype,"expanded",void 0),Ae([(0,i.Z9)("hasChildren")],Ye.prototype,"hasChildren",void 0),Ae([(0,i.Z9)("htmlAttributes")],Ye.prototype,"htmlAttributes",void 0),Ae([(0,i.Z9)("iconCss")],Ye.prototype,"iconCss",void 0),Ae([(0,i.Z9)("id")],Ye.prototype,"id",void 0),Ae([(0,i.Z9)("imageUrl")],Ye.prototype,"imageUrl",void 0),Ae([(0,i.Z9)("isChecked")],Ye.prototype,"isChecked",void 0),Ae([(0,i.Z9)("parentID")],Ye.prototype,"parentID",void 0),Ae([(0,i.Z9)(null)],Ye.prototype,"query",void 0),Ae([(0,i.Z9)("selected")],Ye.prototype,"selected",void 0),Ae([(0,i.Z9)(null)],Ye.prototype,"tableName",void 0),Ae([(0,i.Z9)("text")],Ye.prototype,"text",void 0),Ae([(0,i.Z9)("tooltip")],Ye.prototype,"tooltip",void 0),Ae([(0,i.Z9)("navigateUrl")],Ye.prototype,"navigateUrl",void 0);class Ct extends i.rt{}Ae([(0,i.Z9)("SlideDown")],Ct.prototype,"effect",void 0),Ae([(0,i.Z9)(400)],Ct.prototype,"duration",void 0),Ae([(0,i.Z9)("linear")],Ct.prototype,"easing",void 0);class _t extends i.rt{}Ae([(0,i.Zz)({effect:"SlideUp",duration:400,easing:"linear"},Ct)],_t.prototype,"collapse",void 0),Ae([(0,i.Zz)({effect:"SlideDown",duration:400,easing:"linear"},Ct)],_t.prototype,"expand",void 0);let Ht=Le=class extends i.wA{constructor(g,D){super(g,D),this.isRefreshed=!1,this.preventExpand=!1,this.checkedElement=[],this.disableNode=[],this.validArr=[],this.validNodes=[],this.expandChildren=[],this.isFieldChange=!1,this.changeDataSource=!1,this.hasTemplate=!1,this.isFirstRender=!1,this.mouseDownStatus=!1}getModuleName(){return"treeview"}preRender(){this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:_n,ariaAttributes:De,expandIconPosition:"Left",itemCreated:g=>{this.beforeNodeCreate(g)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new i.fw({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),(0,i.le)(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),(0,i.le)(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),(0,i.le)(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0}getPersistData(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])}render(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()}initialize(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)}setDisabledMode(){this.disabled?this.element.classList.add(le):this.element.classList.remove(le)}setEnableRtl(){(this.enableRtl?i.cn:i.IV)([this.element],"e-rtl")}setRipple(){this.rippleFn=(0,i.qx)(this.element,{selector:"."+te+",."+Mr,ignore:"."+Mr+" > ."+zr+",."+ze+",."+ko+", ."+qi}),this.rippleIconFn=(0,i.qx)(this.element,{selector:"."+Mr+" > ."+zr,isCenterRipple:!0})}setFullRow(g){(g?i.cn:i.IV)([this.element],"e-fullrow-wrap")}setMultiSelect(g){const D=(0,i.Ys)("."+hr,this.element);g?D.setAttribute("aria-multiselectable","true"):D.removeAttribute("aria-multiselectable")}templateComplier(g){if(g){this.hasTemplate=!0,this.element.classList.add(Ge);try{if(document.querySelectorAll(g).length)return(0,i.MY)(document.querySelector(g).innerHTML.trim())}catch{return(0,i.MY)(g)}}this.element.classList.remove(Ge)}setDataBinding(g){this.treeList.push("false"),this.fields.dataSource instanceof $e.hm?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(D=>{this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource instanceof $e.hm&&this.isOffline&&(this.treeList.pop(),this.treeData=D.result,this.isNumberTypeId=this.getType(),this.setRootData(),this.renderItems(!0),0===this.treeList.length&&!this.isLoaded&&this.finalize())}).catch(D=>{this.trigger("actionFailure",{error:D})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(D=>{this.treeList.pop(),this.treeData=D.result,this.isNumberTypeId=this.getType(),this.setRootData(),g&&(this.changeDataSource=!0),this.renderItems(!0),this.changeDataSource=!1,0===this.treeList.length&&!this.isLoaded&&this.finalize()}).catch(D=>{this.trigger("actionFailure",{error:D})})):(this.treeList.pop(),(0,i.le)(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0===this.treeList.length&&!this.isLoaded&&this.finalize()}getQuery(g,D=null){let _,O=[];if(g.query)_=g.query.clone();else{_=new $e.AE;let Q=this.getActualProperties(g);for(let me of Object.keys(Q))"dataSource"!==me&&"tableName"!==me&&"child"!==me&&g[me]&&"url"!==me&&-1===O.indexOf(g[me])&&O.push(g[me]);_.select(O),Q.hasOwnProperty("tableName")&&_.from(g.tableName)}return u.Kh.addSorting(this.sortOrder,g.text,_),!(0,i.le)(D)&&!(0,i.le)(g.parentID)&&_.where(g.parentID,"equal",this.isNumberTypeId?parseFloat(D):D),_}getType(){return!!this.treeData[0]&&"number"==typeof(0,i.NA)(this.fields.id,this.treeData[0])}setRootData(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);let g=this.getChildNodes(this.treeData,void 0,!0);this.rootData=(0,i.le)(g)?[]:g}else this.rootData=this.treeData}renderItems(g){this.listBaseOption.ariaAttributes.level=1;let D=this.getSortedData(this.rootData);this.ulElement=u.Kh.createList(this.createElement,g?this.rootData:D,this.listBaseOption),this.element.appendChild(this.ulElement);let O=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand){let Q=0;for(;Q<O.length;)this.renderChildNodes(O[Q],!0,null,!0),Q++}(1===(0,i.td)("."+hr,this.element).length&&O&&0!==O.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()}updateCheckedStateFromDS(g){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){let D=this.fields,O=new $e.hm(this.treeData).executeLocal((new $e.AE).where(D.isChecked,"equal",!0,!1));for(let _=0;_<O.length;_++){let Q=O[_][this.fields.id]?O[_][this.fields.id].toString():null;if(O[_][this.fields.parentID]&&O[_][this.fields.parentID].toString(),-1===this.checkedNodes.indexOf(Q)&&!this.isLoaded&&this.checkedNodes.push(Q),O[_][this.fields.hasChildren]){let Te=O[_][this.fields.id],Je=new $e.hm(this.treeData).executeLocal((new $e.AE).where(D.parentID,"equal",Te,!1));for(let St=0;St<Je.length;St++){let ri=Je[St][this.fields.id]?Je[St][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(ri)&&this.autoCheck&&this.checkedNodes.push(ri)}}}for(let _=0;_<this.checkedNodes.length;_++){let Q=this.fields,me=new $e.hm(this.treeData).executeLocal((new $e.AE).where(Q.id,"equal",this.checkedNodes[_],!0));if(me[0]&&this.autoCheck&&(this.getCheckedNodeDetails(Q,me),this.checkIndeterminateState(me[0])),me.length>0){let Je=me[0][this.fields.id]?me[0][this.fields.id].toString():null;this.checkedNodes.indexOf(Je)>-1&&-1===this.validNodes.indexOf(Je)&&this.validNodes.push(Je)}let Te=new $e.hm(this.treeData).executeLocal((new $e.AE).where(Q.parentID,"equal",this.checkedNodes[_],!0));for(let Je=0;Je<Te.length;Je++){let St=Te[Je][this.fields.id]?Te[Je][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(St)&&this.autoCheck&&this.checkedNodes.push(St),this.checkedNodes.indexOf(St)>-1&&-1===this.validNodes.indexOf(St)&&this.validNodes.push(St)}}}else if(2===this.dataType||this.fields.dataSource instanceof $e.hm&&this.isOffline)for(let D=0;D<this.treeData.length;D++){let O=this.treeData[D][this.fields.id]?this.treeData[D][this.fields.id].toString():"";this.treeData[D][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(O)&&this.checkedNodes.push(O),this.checkedNodes.indexOf(O)>-1&&-1===this.validNodes.indexOf(O)&&this.validNodes.push(O);let _=(0,i.NA)(this.fields.child.toString(),this.treeData[D]);_&&this.updateChildCheckState(_,this.treeData[D])}this.setProperties({checkedNodes:this.validNodes},!0)}}getCheckedNodeDetails(g,D){let O=D[0][this.fields.parentID]?D[0][this.fields.parentID].toString():null,_=0,Q=this.element.querySelector('[data-uid="'+D[0][this.fields.id]+'"]'),me=this.element.querySelector('[data-uid="'+D[0][this.fields.parentID]+'"]');if(Q||me)me&&((0,i.Ys)("."+si,me)||this.changeState(me,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(O)&&this.parentNodeCheck.push(O);let Je=this.getChildNodes(this.treeData,O);for(let ri=0;ri<Je.length;ri++){let Pi=Je[ri][this.fields.id]?Je[ri][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(Pi)&&_++,_===Je.length&&-1===this.checkedNodes.indexOf(O)&&this.checkedNodes.push(O)}let St=new $e.hm(this.treeData).executeLocal((new $e.AE).where(g.id,"equal",O,!0));this.getCheckedNodeDetails(g,St)}}updateParentCheckState(){let D,g=(0,i.td)("."+Ri,this.element);for(let O=0;O<g.length;O++){let _=(0,i.oq)(g[O],"."+en),Q=_.getAttribute("data-uid").toString();D=1===this.dataType?new $e.hm(this.treeData).executeLocal((new $e.AE).where(this.fields.parentID,"equal",Q,!0)):this.getChildNodes(this.treeData,Q);let me=0;if(D){for(let Te=0;Te<D.length;Te++){let Je=D[Te][this.fields.id].toString();-1!==this.checkedNodes.indexOf(Je)&&me++}if(me===D.length){let Te=_.getAttribute("data-uid");-1===this.checkedNodes.indexOf(Te)&&this.checkedNodes.push(Te),this.changeState(_,"check",null,!0,!0)}else 0===me&&0===this.checkedNodes.length&&this.changeState(_,"uncheck",null,!0,!0)}}}checkIndeterminateState(g){let D;D=this.element.querySelector(1===this.dataType?'[data-uid="'+g[this.fields.parentID]+'"]':'[data-uid="'+g[this.fields.id]+'"]'),D?"true"!==D.querySelector("."+qi).getAttribute("aria-checked")&&this.changeState(D,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(g[this.fields.id].toString())&&this.parentNodeCheck.push(g[this.fields.id].toString())}updateChildCheckState(g,D){let O=0,_=D[this.fields.id]?D[this.fields.id].toString():"";for(let Q=0;Q<g.length;Q++){let me=g[Q][this.fields.id]?g[Q][this.fields.id].toString():"";g[Q][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(me)&&this.checkedNodes.push(me),-1!==this.checkedNodes.indexOf(_)&&-1===this.checkedNodes.indexOf(me)&&this.autoCheck&&this.checkedNodes.push(me),-1!==this.checkedNodes.indexOf(me)&&this.autoCheck&&O++,this.checkedNodes.indexOf(me)>-1&&-1===this.validNodes.indexOf(me)&&this.validNodes.push(me);let Te=(0,i.NA)(this.fields.child.toString(),g[Q]);Te&&(this.parentCheckData.push(D),this.updateChildCheckState(Te,g[Q])),O===g.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(_)&&this.checkedNodes.push(_)}if(0!==O&&this.autoCheck){this.checkIndeterminateState(D);for(let Q=0;Q<this.parentCheckData.length;Q++)D!==this.parentCheckData[Q]&&this.parentCheckData[Q]&&this.checkIndeterminateState(this.parentCheckData[Q])}this.parentCheckData=[]}beforeNodeCreate(g){if(this.showCheckBox){let _=(0,Zt.eE)(this.createElement,!0,{cssClass:this.touchClass});_.setAttribute("role","checkbox");let Q=(0,i.Ys)("div."+zr,g.item),me=g.item.getAttribute("data-uid");g.item.childNodes[0].insertBefore(_,g.item.childNodes[0].childNodes[(0,i.le)(Q)?0:1]);let Te=(0,i.NA)(g.fields.isChecked,g.curData);this.checkedNodes.indexOf(me)>-1?((0,i.Ys)("."+Mi,_).classList.add(si),_.setAttribute("aria-checked","true"),this.addCheck(g.item)):(0,i.le)(Te)||"true"!==Te.toString()?_.setAttribute("aria-checked","false"):((0,i.Ys)("."+Mi,_).classList.add(si),_.setAttribute("aria-checked","true"),this.addCheck(g.item));let Je=(0,i.Ys)("."+Mi,_);i.bi.add(Je,"mousedown",this.frameMouseHandler,this),i.bi.add(Je,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(g.item),this.allowMultiSelection&&!g.item.classList.contains(ie)&&g.item.setAttribute("aria-selected","false");let D=g.fields;if(this.addActionClass(g,D.selected,ie),this.addActionClass(g,D.expanded,xe),!(0,i.le)(this.nodeTemplateFn)){let _=g.item.querySelector("."+po),Q=g.item.getAttribute("data-uid");_.innerHTML="",this.renderNodeTemplate(g.curData,_,Q)}this.isRefreshed||this.trigger("drawNode",{node:g.item,nodeData:g.curData,text:g.text})}frameMouseHandler(g){let D=(0,i.Ys)(".e-ripple-container",g.target.parentElement);(0,Zt.sg)(g,D)}addActionClass(g,D,O){let Q=(0,i.NA)(D,g.curData);!(0,i.le)(Q)&&"false"!==Q.toString()&&g.item.classList.add(O)}getDataType(g,D){if(this.fields.dataSource instanceof $e.hm){for(let O=0;O<g.length;O++)if(this.isOffline){if("string"==typeof D.child&&(0,i.le)((0,i.NA)(D.child,g[O]))&&!(0,i.le)((0,i.NA)(D.parentID,g[O])))return 1}else if("string"==typeof D.child&&(0,i.le)((0,i.NA)(D.child,g[O])))return 1;return 2}for(let O=0,_=g.length;O<_;O++){if("string"==typeof D.child&&!(0,i.le)((0,i.NA)(D.child,g[O])))return 2;if(!(0,i.le)((0,i.NA)(D.parentID,g[O]))||!(0,i.le)((0,i.NA)(D.hasChildren,g[O])))return 1}return 1}getGroupedData(g,D){let O=(new $e.AE).group(D),_=u.Kh.getDataSource(g,O),Q=[];for(let me=0;me<_.length;me++)Q.push(_[me].items);return Q}getSortedData(g){return g&&"None"!==this.sortOrder&&(g=u.Kh.getDataSource(g,u.Kh.addSorting(this.sortOrder,this.fields.text))),g}finalizeNode(g){let D=(0,i.td)("."+jr,g);for(let Q=0;Q<D.length;Q++)D[Q].setAttribute("alt",jr);if(this.isLoaded){let Q=(0,i.td)("."+ie,g);for(let me=0;me<Q.length;me++){this.selectNode(Q[me],null);break}(0,i.IV)(Q,ie)}let O=(0,i.td)("."+en+":not(."+xe+")",g);for(let Q=0;Q<O.length;Q++){let me=(0,i.Ys)("div."+zr,O[Q]);me&&me.classList.contains(_n)&&this.disableExpandAttr(O[Q])}let _=(0,i.td)("."+xe,g);if(!this.isInitalExpand)for(let Q=0;Q<_.length;Q++)this.renderChildNodes(_[Q]);(0,i.IV)(_,xe),this.updateList(),this.isLoaded&&this.updateCheckedProp()}updateCheckedProp(){if(this.showCheckBox){let g=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:g},!0)}}ensureIndeterminate(){if(this.autoCheck){let D,g=(0,i.td)("li",this.element);for(let O=0;O<g.length;O++)g[O].classList.contains(en)&&(D=(0,i.Ys)("."+hr,g[O]),D?this.ensureParentCheckState(g[O]):this.ensureChildCheckState(g[O]))}else{let g=(0,i.td)("."+Ri,this.element);for(let D=0;D<g.length;D++)g[D].classList.remove(Ri)}}ensureParentCheckState(g){if(!(0,i.le)(g)){if(g.classList.contains(Et))return;let D=g;g.classList.contains(en)&&(D=(0,i.Ys)("."+hr,g));let O=(0,i.td)("."+si,D),_=(0,i.td)("."+Ri,D),Q=(0,i.td)("."+en,D),me=g.getElementsByClassName(qi)[0];Q.length===O.length?this.changeState(me,"check",null,!0,!0):O.length>0||_.length>0?this.changeState(me,"indeterminate",null,!0,!0):0===O.length&&this.changeState(me,"uncheck",null,!0,!0);let Te=(0,i.oq)(g,"."+hr);if(!(0,i.le)(Te)){let Je=(0,i.oq)(Te,"."+en);this.ensureParentCheckState(Je)}}}ensureChildCheckState(g,D){if(!(0,i.le)(g)){let _,O=(0,i.Ys)("."+hr,g);if(!(0,i.le)(O)){_=(0,i.td)("."+qi,O);let St,Q=g.getElementsByClassName(Mi)[0].classList.contains(si),me=g.getElementsByClassName(Mi)[0].classList.contains(Ri),Te=O.querySelectorAll("li");O.parentElement.getAttribute("aria-expanded");for(let ri=0;ri<_.length;ri++){let Pi=Te[ri].getAttribute("data-uid");if((0,i.le)(this.currentLoadData)||(0,i.le)((0,i.NA)(this.fields.isChecked,this.currentLoadData[ri]))){let Hi=_[ri].getElementsByClassName(Mi)[0].classList.contains(si);Q||Hi&&!this.isLoaded||-1!==this.checkedNodes.indexOf(Pi)&&this.isLoaded&&(me||Q)?St="check":Te[ri].classList.contains("e-has-child")&&!(0,i.o8)(this.parentNodeCheck)&&this.autoCheck&&(Q||me)&&-1!==this.parentNodeCheck.indexOf(Pi)||1===this.dataType&&!(0,i.o8)(this.parentNodeCheck)&&this.autoCheck&&(Q||me)&&-1!==this.parentNodeCheck.indexOf(Pi)?(St="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(Pi),1)):St="uncheck"}else St=(0,i.NA)(this.fields.isChecked,this.currentLoadData[ri])?"check":"uncheck",-1!==this.ele&&(St=Q?"check":"uncheck"),"uncheck"===St&&!(0,i.o8)(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(Pi)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(Pi),1),St="indeterminate");this.changeState(_[ri],St,D,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}}doCheckBoxAction(g,D){if((0,i.td)("."+en,this.element),(0,i.le)(g)){let _=(0,i.td)("."+qi,this.element);if(this.loadOnDemand)for(let Q=0;Q<_.length;Q++)this.updateFieldChecked(_[Q],D),this.changeState(_[Q],D?"check":"uncheck",null,null,null,D);else for(let Q=0;Q<_.length;Q++)this.updateFieldChecked(_[Q],D),this.changeState(_[Q],D?"check":"uncheck")}else for(let _=g.length;_>=0;_--){let Q;if(Q=this.getElement(1===g.length?g[_-1]:g[_]),(0,i.le)(Q)){let Te;if(Te=g[_-g.length]?g[_-g.length].toString():g[_]?g[_].toString():null,""!==Te&&D&&Te)this.setValidCheckedNode(Te),this.dynamicCheckState(Te,D);else if(-1!==this.checkedNodes.indexOf(Te)&&""!==Te&&!D){this.checkedNodes.splice(this.checkedNodes.indexOf(Te),1);let Je=this.getChildNodes(this.treeData,Te);if(Je){for(let St=0;St<Je.length;St++){let ri=Je[St][this.fields.id]?Je[St][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(ri)){this.checkedNodes.splice(this.checkedNodes.indexOf(ri),1);let Pi=this.element.querySelector('[data-uid="'+ri+'"]');Pi&&this.changeState(Pi,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(Te)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(Te),1)}Te&&this.dynamicCheckState(Te,D),this.updateField(this.treeData,this.fields,Te,"isChecked",null)}continue}let me=(0,i.Ys)("."+hr+" ."+qi,Q);this.validateCheckNode(me,!D,Q,null)}if(g)for(let _=0;_<g.length;_++){let Q=g[_]?g[_].toString():"";D||this.updateField(this.treeData,this.fields,Q,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()}updateFieldChecked(g,D){let O=(0,i.oq)(g,"."+en),_=O.getAttribute("data-uid");"true"===this.getNodeData(O).isChecked&&!D&&this.updateField(this.treeData,this.fields,_,"isChecked",null)}dynamicCheckState(g,D){if(1===this.dataType){let O=0,_=new $e.hm(this.treeData).executeLocal((new $e.AE).where(this.fields.id,"equal",g,!0));if(_[0]){let Q=_[0][this.fields.id]?_[0][this.fields.id].toString():null,me=_[0][this.fields.parentID]?_[0][this.fields.parentID].toString():null,Te=this.element.querySelector('[data-uid="'+me+'"]'),ri=(Te&&(0,i.Ys)("."+Ri,Te),Te&&(0,i.Ys)("."+si,Te),this.element.querySelector('[data-uid="'+Q+'"]')),Pi=this.getChildNodes(this.treeData,me);if(Pi)for(let Hi=0;Hi<Pi.length;Hi++){let Ms=Pi[Hi][this.fields.id]?Pi[Hi][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(Ms)&&O++}-1!==this.checkedNodes.indexOf(g)&&Te&&Q===g&&this.autoCheck?this.changeState(Te,"indeterminate",null):-1===this.checkedNodes.indexOf(g)&&ri&&Q===g&&!D?this.changeState(ri,"uncheck",null):-1!==this.checkedNodes.indexOf(g)&&ri&&Q===g&&D?this.changeState(ri,"check",null):-1===this.checkedNodes.indexOf(g)&&!ri&&Te&&Q===g&&this.autoCheck&&0!==O?this.changeState(Te,"indeterminate",null):-1===this.checkedNodes.indexOf(g)&&!ri&&Te&&Q===g&&this.autoCheck&&0===O?this.changeState(Te,"uncheck",null):!ri&&!Te&&Q===g&&this.autoCheck&&this.updateIndeterminate(g,D)}}else if(2===this.dataType||this.fields.dataSource instanceof $e.hm&&this.isOffline){let O,_,Q;for(let me=0;me<this.treeData.length;me++){O=this.treeData[me][this.fields.id]?this.treeData[me][this.fields.id].toString():"",_=this.element.querySelector('[data-uid="'+O+'"]'),Q=_?(0,i.Ys)("."+si,_):null,-1===this.checkedNodes.indexOf(O)&&_&&Q&&!D&&this.changeState(_,"uncheck",null);let Te=(0,i.NA)(this.fields.child.toString(),this.treeData[me]);Te&&this.updateChildIndeterminate(Te,O,g,D,O)}}}updateIndeterminate(g,D){let Q,O=this.getTreeData(g),_=0;1===this.dataType&&(Q=O[0][this.fields.parentID]?O[0][this.fields.parentID].toString():null);let me=this.getChildNodes(this.treeData,Q);if(me)for(let Je=0;Je<me.length;Je++){let St=me[Je][this.fields.id]?me[Je][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(St)&&_++}let Te=this.element.querySelector('[data-uid="'+Q+'"]');Te&&D||!D&&Te&&-1===this.parentNodeCheck.indexOf(Q)&&0!==_?this.changeState(Te,"indeterminate",null):!D&&Te&&-1===this.parentNodeCheck.indexOf(Q)&&0===_?this.changeState(Te,"uncheck",null):Te||(D||-1!==this.checkedNodes.indexOf(Q)||-1===this.parentNodeCheck.indexOf(Q)?(D&&-1===this.checkedNodes.indexOf(Q)&&-1===this.parentNodeCheck.indexOf(Q)||!D&&-1!==this.checkedNodes.indexOf(Q)&&-1===this.parentNodeCheck.indexOf(Q)&&0!==_)&&this.parentNodeCheck.push(Q):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(Q),1),this.updateIndeterminate(Q,D),-1!==this.checkedNodes.indexOf(Q)&&!D&&this.checkedNodes.splice(this.checkedNodes.indexOf(Q),1))}updateChildIndeterminate(g,D,O,_,Q){let me=0;for(let Te=0;Te<g.length;Te++){let Je=g[Te][this.fields.id]?g[Te][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(Je)&&me++;let St=this.element.querySelector('[data-uid="'+D+'"]'),ri=St?(0,i.Ys)("."+Ri,St):null,Pi=St?(0,i.Ys)("."+si,St):null,Hi=this.element.querySelector('[data-uid="'+Je+'"]'),Ms=Hi?(0,i.Ys)("."+si,Hi):null;if(-1!==this.checkedNodes.indexOf(O)&&St&&Je===O&&this.autoCheck)this.changeState(St,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(O)||!St||Hi||Je!==O||_){if(-1===this.checkedNodes.indexOf(O)&&Hi&&Je===O&&!_)this.changeState(Hi,"uncheck",null);else if(-1===this.checkedNodes.indexOf(O)&&ri&&Je===O&&this.autoCheck&&0===me&&!_)ri.classList.remove(Ri);else if(-1===this.checkedNodes.indexOf(O)&&!Hi&&Pi&&Je===O&&0===me)this.changeState(St,"uncheck",null);else if(-1===this.checkedNodes.indexOf(Je)&&Hi&&Ms&&0===me)this.changeState(Hi,"uncheck",null);else if(!Hi&&!St&&Je===O||-1!==this.parentNodeCheck.indexOf(D)&&this.autoCheck){let Os=this.element.querySelector('[data-uid="'+Q+'"]');_&&0!==me?this.changeState(Os,"indeterminate",null):_&&me===g.length&&-1===this.checkedNodes.indexOf(D)?this.checkedNodes.push(D):!_&&0===me&&-1!==this.parentNodeCheck.indexOf(D)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(D)),-1===this.parentNodeCheck.indexOf(D)&&this.parentNodeCheck.push(D)}}else this.changeState(St,this.autoCheck?"uncheck":0!==me?"indeterminate":"uncheck",null);let xs=(0,i.NA)(this.fields.child.toString(),g[Te]);xs&&this.updateChildIndeterminate(xs,Je,O,_,Q)}}changeState(g,D,O,_,Q,me){let Te,Je=(0,i.oq)(g,"."+en);g===Je&&(g=(0,i.Ys)("."+qi,Je)),_?this.nodeCheckAction(g,D,Je,Te,O,_,Q,me):(this.checkActionNodes=[],Te=this.getCheckEvent(Je,D,O),this.trigger("nodeChecking",Te,St=>{St.cancel||this.nodeCheckAction(g,D,Je,St,O,_,Q,me)}))}nodeCheckAction(g,D,O,_,Q,me,Te,Je){let St,ri=g.getElementsByClassName(Mi)[0];if("check"!==D||ri.classList.contains(si)?"uncheck"===D&&(ri.classList.contains(si)||ri.classList.contains(Ri))?((0,i.IV)([ri],[si,Ri]),this.removeCheck(O),St="false"):"indeterminate"===D&&this.autoCheck&&(ri.classList.remove(si),ri.classList.add(Ri),this.removeCheck(O),St="mixed"):(ri.classList.remove(Ri),ri.classList.add(si),this.addCheck(O),St="true"),St="check"===D?"true":"uncheck"===D?"false":St,(0,i.le)(St)||g.setAttribute("aria-checked",St),Te){let Pi=[].concat([],this.checkActionNodes);_=this.getCheckEvent(O,D,Q),(0,i.o8)(me)&&(_.data=Pi)}void 0!==Je&&this.ensureStateChange(O,Je),me||(0,i.le)(St)||(g.setAttribute("aria-checked",St),_.data[0].checked=St,this.trigger("nodeChecked",_),this.checkActionNodes=[])}addCheck(g){let D=g.getAttribute("data-uid");!(0,i.le)(D)&&-1===this.checkedNodes.indexOf(D)&&this.checkedNodes.push(D)}removeCheck(g){let D=this.checkedNodes.indexOf(g.getAttribute("data-uid"));D>-1&&this.checkedNodes.splice(D,1)}getCheckEvent(g,D,O){this.checkActionNodes.push(this.getNodeData(g));let _=this.checkActionNodes;return{action:D,cancel:!1,isInteracted:!(0,i.le)(O),node:g,data:_}}finalize(){let g=(0,i.Ys)("."+hr,this.element);if(!(0,i.le)(g)){g.setAttribute("role",De.treeRole),this.setMultiSelect(this.allowMultiSelection);let D=(0,i.Ys)("."+en,this.element);D&&((0,i.cn)([D],dr),this.updateIdAttr(null,D)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}}setTextWrap(){(this.allowTextWrap?i.cn:i.IV)([this.element],"e-text-wrap"),i.AR.isIE&&(this.allowTextWrap?i.cn:i.IV)([this.element],"e-ie-wrap")}updateWrap(g){if(!this.fullRowSelect)return;const D=g?(0,i.td)("."+en,g):this.liList,O=D.length;for(let _=0;_<O;_++)this.calculateWrap(D[_])}calculateWrap(g){const D=(0,i.Ys)("."+te,g);D&&D.nextElementSibling&&(D.style.height=this.allowTextWrap?D.nextElementSibling.offsetHeight+"px":"")}doExpandAction(){let g=this.expandedNodes;if(this.isInitalExpand&&g.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof $e.hm)this.expandGivenNodes(g);else{for(let D=0;D<g.length;D++){let O=(0,i.Ys)('[data-uid="'+g[D]+'"]',this.element);if((0,i.le)(O))g[D]&&-1===this.expandChildren.indexOf(g[D])&&this.expandChildren.push(g[D].toString());else{let _=(0,i.Ys)("."+_n,(0,i.Ys)("."+Mr,O));(0,i.le)(_)||this.expandAction(O,_,null)}}this.afterFinalized()}else this.afterFinalized()}expandGivenNodes(g){let D=this;this.expandCallback(g[this.index],()=>{D.index++,D.index<g.length?D.expandGivenNodes(g):D.afterFinalized()})}expandCallback(g,D){let O=(0,i.Ys)('[data-uid="'+g+'"]',this.element);if((0,i.le)(O))D();else{let _=(0,i.Ys)("."+_n,(0,i.Ys)("."+Mr,O));(0,i.le)(_)?D():this.expandAction(O,_,null,!1,D)}}afterFinalized(){this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0}doSelectionAction(){let g=(0,i.td)("."+ie,this.element),D=this.selectedNodes;if(D.length>0){this.setProperties({selectedNodes:[]},!0);for(let O=0;O<D.length;O++){let _=(0,i.Ys)('[data-uid="'+D[O]+'"]',this.element);if(_&&!_.classList.contains("e-active")?this.selectNode(_,null,!0):this.selectedNodes.push(D[O]),!this.allowMultiSelection)break}}else this.selectGivenNodes(g);(0,i.IV)(g,ie)}selectGivenNodes(g){for(let D=0;D<g.length&&(g[D].classList.contains("e-disable")||this.selectNode(g[D],null,!0),this.allowMultiSelection);D++);}clickHandler(g){let D=g.originalEvent.target;if(i.bi.remove(this.element,"contextmenu",this.preventContextMenu),D&&!this.dragStartAction){let O=D.classList,_=(0,i.oq)(D,"."+en);if(!_)return;if(3!==g.originalEvent.which){let Q=(0,i.Ys)(".e-ripple-element",_),me=(0,i.Ys)("."+zr,_);if(this.removeHover(),this.setFocusElement(_),this.showCheckBox&&!_.classList.contains("e-disable")){let Te=(0,i.oq)(D,"."+qi);if(!(0,i.le)(Te)){let Je=(0,i.Ys)("."+Mi,Te);return this.validateCheckNode(Te,Je.classList.contains(si),_,g.originalEvent),void this.triggerClickEvent(g.originalEvent,_)}}O.contains(_n)?this.expandAction(_,D,g):O.contains(_s)?this.collapseNode(_,D,g):Q&&me?me.classList.contains(Gs)&&me.classList.contains(_n)?this.expandAction(_,me,g):me.classList.contains(Gs)&&me.classList.contains(_s)?this.collapseNode(_,me,g):!O.contains(hr)&&!O.contains(en)&&this.toggleSelect(_,g.originalEvent,!1):!O.contains(hr)&&!O.contains(en)&&this.toggleSelect(_,g.originalEvent,!1)}this.triggerClickEvent(g.originalEvent,_)}}nodeCheckedEvent(g,D,O){(0,i.oq)(g,"."+en);let Q=this.getCheckEvent(g,D?"uncheck":"check",O);Q.data=Q.data.splice(0,Q.data.length-1),this.trigger("nodeChecked",Q)}triggerClickEvent(g,D){this.trigger("nodeClicked",{event:g,node:D})}expandNode(g,D,O){if(this.renderReactTemplates(),D.classList.contains(Do)&&this.hideSpinner(D),this.initialRender||D.classList.add("interaction"),!0!==O||!0===O&&g.classList.contains("e-expanded")){if(!0!==this.preventExpand){(0,i.IV)([D],_n),(0,i.cn)([D],_s);let _=0,Q=0,me=this,Te=(0,i.Ys)("."+hr,g),Je=g;this.setHeight(Je,Te);let St=(0,i.Ys)("."+en+"."+Rn,g);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(Te,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:ri=>{Je.style.overflow="hidden",!(0,i.le)(St)&&St instanceof HTMLElement&&St.classList.add(ne),_=Je.offsetHeight,Q=(0,i.Ys)("."+Mr,g).offsetHeight},progress:ri=>{ri.element.style.display="block",me.animateHeight(ri,_,Q)},end:ri=>{ri.element.style.display="block",!(0,i.le)(St)&&St instanceof HTMLElement&&St.classList.remove(ne),this.expandedNode(Je,Te,D)}}):this.expandedNode(Je,Te,D)}}else(0,i.Ys)("."+hr,g).style.display="none",this.fields.dataSource instanceof $e.hm&&(this.preventExpand=!1);this.initialRender&&D.classList.add("interaction")}expandedNode(g,D,O){D.style.display="block",g.style.display="block",g.style.overflow="",g.style.height="",(0,i.IV)([O],qo),this.addExpand(g),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(g),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(g,null),this.trigger("nodeExpanded",this.expandArgs))}addExpand(g){g.setAttribute("aria-expanded","true"),(0,i.IV)([g],Ke);let D=g.getAttribute("data-uid");!(0,i.le)(D)&&-1===this.expandedNodes.indexOf(D)&&this.expandedNodes.push(D)}collapseNode(g,D,O){if(D.classList.contains(qo))return;let _;(0,i.cn)([D],qo),this.isLoaded?(_=this.getExpandEvent(g,O),this.trigger("nodeCollapsing",_,Q=>{Q.cancel?(0,i.IV)([D],qo):this.nodeCollapseAction(g,D,Q)})):this.nodeCollapseAction(g,D,_)}nodeCollapseAction(g,D,O){(0,i.IV)([D],_s),(0,i.cn)([D],_n);let _=0,Q=0,me=this,Te=(0,i.Ys)("."+hr,g),Je=g,St=(0,i.Ys)("."+en+"."+Rn,g);this.isAnimate?this.aniObj.animate(Te,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:ri=>{Je.style.overflow="hidden",!(0,i.le)(St)&&St instanceof HTMLElement&&St.classList.add(ne),_=(0,i.Ys)("."+Mr,g).offsetHeight,Q=Je.offsetHeight},progress:ri=>{me.animateHeight(ri,_,Q)},end:ri=>{ri.element.style.display="none",!(0,i.le)(St)&&St instanceof HTMLElement&&St.classList.remove(ne),this.collapsedNode(Je,Te,D,O)}}):this.collapsedNode(Je,Te,D,O)}collapsedNode(g,D,O,_){D.style.display="none",g.style.overflow="",g.style.height="",(0,i.IV)([O],qo),this.removeExpand(g),this.isLoaded&&(_=this.getExpandEvent(g,null),this.trigger("nodeCollapsed",_))}removeExpand(g,D){D?g.removeAttribute("aria-expanded"):this.disableExpandAttr(g);let O=this.expandedNodes.indexOf(g.getAttribute("data-uid"));O>-1&&this.expandedNodes.splice(O,1)}disableExpandAttr(g){g.setAttribute("aria-expanded","false"),(0,i.cn)([g],Ke)}setHeight(g,D){D.style.display="block",D.style.visibility="hidden",g.style.height=g.offsetHeight+"px",D.style.display="none",D.style.visibility=""}animateHeight(g,D,O){g.element.parentElement.style.height=(g.duration-g.timeStamp)/g.duration*(O-D)+D+"px"}renderChildNodes(g,D,O,_){let me,Q=(0,i.Ys)("div."+zr,g);if(!(0,i.le)(Q))if(this.showSpinner(Q),this.fields.dataSource instanceof $e.hm){let Te=this.parents(g,"."+hr).length,Je=this.getChildFields(this.fields,Te,1);if((0,i.le)(Je)||(0,i.le)(Je.dataSource))return(0,i.og)(Q),void this.removeExpand(g,!0);this.treeList.push("false"),this.fields.dataSource instanceof $e.hm&&this.isOffline?(this.treeList.pop(),me=this.getChildNodes(this.treeData,g.getAttribute("data-uid")),this.loadChild(me,Je,Q,g,D,O,_)):Je.dataSource.executeQuery(this.getQuery(Je,g.getAttribute("data-uid"))).then(St=>{this.treeList.pop(),me=St.result,1===this.dataType&&(this.dataType=2),this.loadChild(me,Je,Q,g,D,O,_)}).catch(St=>{this.trigger("actionFailure",{error:St})})}else{if(me=this.getChildNodes(this.treeData,g.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(me),(0,i.le)(me)||0===me.length)return(0,i.og)(Q),void this.removeExpand(g,!0);this.listBaseOption.ariaAttributes.level=parseFloat(g.getAttribute("aria-level"))+1,g.appendChild(u.Kh.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(g,Q,_),this.setSelectionForChildNodes(me),this.ensureCheckNode(g),this.finalizeNode(g),this.disableTreeNodes(me),this.renderSubChild(g,D,_)}}loadChild(g,D,O,_,Q,me,Te){if(this.currentLoadData=g,(0,i.le)(g)||0===g.length)(0,i.og)(O),this.removeExpand(_,!0);else{if(this.updateListProp(D),this.fields.dataSource instanceof $e.hm&&!this.isOffline){let Je=_.getAttribute("data-uid"),St=this.getNodeObject(Je);(0,i.sO)("child",g,St)}this.listBaseOption.ariaAttributes.level=parseFloat(_.getAttribute("aria-level"))+1,_.appendChild(u.Kh.createList(this.createElement,g,this.listBaseOption)),this.expandNode(_,O,Te),this.setSelectionForChildNodes(g),this.ensureCheckNode(_),this.finalizeNode(_),this.disableTreeNodes(g),this.renderSubChild(_,Q,Te)}me&&me(),0===this.treeList.length&&!this.isLoaded&&this.finalize()}disableTreeNodes(g){let D=0;for(;D<g.length;){let O=g[D][this.fields.id]?g[D][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(O)&&this.doDisableAction([O]),D++}}setSelectionForChildNodes(g){let D;for(D=0;D<g.length;D++){let O=g[D][this.fields.id]?g[D][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(O)&&this.doSelectionAction()}}ensureCheckNode(g){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(g.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(g),this.ensureParentCheckState(g))),this.currentLoadData=null}getFields(g,D,O){return D===O?g:this.getFields(this.getChildMapper(g),D,O+1)}getChildFields(g,D,O){return D===O?this.getChildMapper(g):this.getChildFields(this.getChildMapper(g),D,O+1)}getChildMapper(g){return"string"==typeof g.child||(0,i.le)(g.child)?g:g.child}getChildNodes(g,D,O=!1){let _;if((0,i.le)(g))return _;if(1===this.dataType)return this.getChildGroup(this.groupedData,D,O);if("string"==typeof this.fields.child)for(let Q=0,me=g.length;Q<me;Q++){let Te=(0,i.NA)(this.fields.id,g[Q]);if(Te&&Te.toString()===D)return(0,i.NA)(this.fields.child,g[Q]);if(!(0,i.le)((0,i.NA)(this.fields.child,g[Q]))&&(_=this.getChildNodes((0,i.NA)(this.fields.child,g[Q]),D),void 0!==_))break}return _}getChildGroup(g,D,O){let _;if((0,i.le)(g))return _;for(let Q=0,me=g.length;Q<me;Q++){if((0,i.le)(g[Q][0])||(0,i.le)((0,i.NA)(this.fields.parentID,g[Q][0])))return O?g[Q]:[];if((0,i.NA)(this.fields.parentID,g[Q][0]).toString()===D)return g[Q]}return _}renderSubChild(g,D,O){if(D){let _=(0,i.td)("."+_n,g);for(let Q=0,me=_.length;Q<me;Q++){let Te=_[Q];if(g.querySelector(".e-icons")!==_[Q]){let Je=(0,i.oq)(Te,"."+en);this.expandArgs=this.getExpandEvent(Je,null),!0!==O&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(Je,D,null,O)}}}}toggleSelect(g,D,O){g.classList.contains("e-disable")||(this.allowMultiSelection&&(D&&D.ctrlKey||O)&&this.isActive(g)?this.unselectNode(g,D):this.selectNode(g,D,O))}isActive(g){return!!g.classList.contains(Rn)}selectNode(g,D,O){if((0,i.le)(g)||!this.allowMultiSelection&&this.isActive(g)&&!(0,i.le)(D))return void this.setFocusElement(g);let _;this.isLoaded?(_=this.getSelectEvent(g,"select",D),this.trigger("nodeSelecting",_,Q=>{Q.cancel||this.nodeSelectAction(g,D,Q,O)})):this.nodeSelectAction(g,D,_,O)}nodeSelectAction(g,D,O,_){if((!this.allowMultiSelection||!_&&(!D||D&&!D.ctrlKey))&&this.removeSelectAll(),this.allowMultiSelection&&D&&D.shiftKey){this.startNode||(this.startNode=g);let Q=this.liList.indexOf(this.startNode),me=this.liList.indexOf(g);if(Q>me){let Te=Q;Q=me,me=Te}for(let Te=Q;Te<=me;Te++){let Je=this.liList[Te];(0,i.pn)(Je)&&!Je.classList.contains("e-disable")&&this.addSelect(Je)}}else this.startNode=g,this.addSelect(g);this.setFocusElement(g),this.isLoaded&&(O.nodeData=this.getNodeData(g),this.trigger("nodeSelected",O))}unselectNode(g,D){let O;this.isLoaded?(O=this.getSelectEvent(g,"un-select",D),this.trigger("nodeSelecting",O,_=>{_.cancel||this.nodeUnselectAction(g,_)})):this.nodeUnselectAction(g,O)}nodeUnselectAction(g,D){this.removeSelect(g),this.setFocusElement(g),this.isLoaded&&(D.nodeData=this.getNodeData(g),this.trigger("nodeSelected",D))}setFocusElement(g){if(!(0,i.le)(g)){let D=this.getFocusedNode();D&&(0,i.IV)([D],dr),(0,i.cn)([g],dr),this.updateIdAttr(D,g)}}addSelect(g){g.setAttribute("aria-selected","true"),(0,i.cn)([g],Rn);let D=g.getAttribute("data-uid");!(0,i.le)(D)&&-1===this.selectedNodes.indexOf(D)&&this.selectedNodes.push(D)}removeSelect(g){this.allowMultiSelection?g.setAttribute("aria-selected","false"):g.removeAttribute("aria-selected"),(0,i.IV)([g],Rn);let D=this.selectedNodes.indexOf(g.getAttribute("data-uid"));D>-1&&this.selectedNodes.splice(D,1)}removeSelectAll(){let g=this.element.querySelectorAll("."+Rn);for(let D of g)this.allowMultiSelection?D.setAttribute("aria-selected","false"):D.removeAttribute("aria-selected");(0,i.IV)(g,Rn),this.setProperties({selectedNodes:[]},!0)}getSelectEvent(g,D,O){let _=this.getNodeData(g);return{action:D,cancel:!1,isInteracted:!(0,i.le)(O),node:g,nodeData:_}}setExpandOnType(){this.expandOnType="Auto"===this.expandOn?i.AR.isDevice?"Click":"DblClick":this.expandOn}expandHandler(g){let D=g.originalEvent.target;!D||D.classList.contains(ko)||D.classList.contains(Et)||D.classList.contains(hr)||D.classList.contains(en)||D.classList.contains(zr)||this.showCheckBox&&(0,i.oq)(D,"."+qi)||this.expandCollapseAction((0,i.oq)(D,"."+en),g)}expandCollapseAction(g,D){let O=(0,i.Ys)("div."+zr,g);if(O&&!O.classList.contains(qo)){let _=O.classList;_.contains(_n)?this.expandAction(g,O,D):_.contains(_s)&&this.collapseNode(g,O,D)}}expandAction(g,D,O,_,Q){D.classList.contains(qo)||((0,i.cn)([D],qo),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(g,O),this.trigger("nodeExpanding",this.expandArgs,me=>{me.cancel?(0,i.IV)([D],qo):this.nodeExpandAction(g,D,_,Q)})):this.nodeExpandAction(g,D,_,Q))}nodeExpandAction(g,D,O,_){let Q=(0,i.Ys)("."+hr,g);if(Q&&"UL"===Q.nodeName)this.expandNode(g,D);else{this.isFirstRender=!0,this.renderChildNodes(g,O,_);let me=(0,i.td)("."+en,g);for(let Te=0;Te<me.length;Te++){let Je=this.getId(me[Te]);if(-1!==this.expandChildren.indexOf(Je)&&void 0!==this.expandChildren){let St=(0,i.Ys)("."+_n,(0,i.Ys)("."+Mr,me[Te]));(0,i.le)(St)||this.expandAction(me[Te],St,null),this.expandChildren.splice(this.expandChildren.indexOf(Je),1)}}}}keyActionHandler(g){let D=g.target,O=this.getFocusedNode();if(D&&D.classList.contains(ko)){let Q=D;"enter"===g.action?(Q.blur(),this.element.focus(),(0,i.cn)([O],Yo)):"escape"===g.action&&(Q.value=this.oldText,Q.blur(),this.element.focus(),(0,i.cn)([O],Yo))}else g.preventDefault(),this.trigger("keyPress",{cancel:!1,event:g,node:O},Q=>{if(!Q.cancel)switch(g.action){case"space":this.showCheckBox&&this.checkNode(g);break;case"moveRight":this.openNode(!this.enableRtl,g);break;case"moveLeft":this.openNode(!!this.enableRtl,g);break;case"shiftDown":this.shiftKeySelect(!0,g);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,g);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(O,g);break;case"f2":this.allowEditing&&!O.classList.contains("e-disable")&&this.createTextbox(O,g);break;case"ctrlA":if(this.allowMultiSelection){let me=(0,i.td)("."+en+":not(."+Rn+")",this.element);this.selectGivenNodes(me)}}})}navigateToFocus(g){let D=this.getFocusedNode().querySelector("."+Mr),O=D.getBoundingClientRect(),_=this.getScrollParent(this.element);if(!(0,i.le)(_)){let me=_.getBoundingClientRect();O.bottom>me.bottom?_.scrollTop+=O.bottom-me.bottom:O.top<me.top&&(_.scrollTop-=me.top-O.top)}this.isVisibleInViewport(D)||D.scrollIntoView(g)}isVisibleInViewport(g){let D=g.getBoundingClientRect();return D.top>=0&&D.left>=0&&D.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&D.right<=(window.innerWidth||document.documentElement.clientWidth)}getScrollParent(g){return(0,i.le)(g)?null:g.scrollHeight>g.clientHeight?g:this.getScrollParent(g.parentElement)}shiftKeySelect(g,D){if(this.allowMultiSelection){let O=this.getFocusedNode(),_=g?this.getNextNode(O):this.getPrevNode(O);this.removeHover(),this.setFocusElement(_),this.toggleSelect(_,D,!1),this.navigateToFocus(!g)}else this.navigateNode(g)}checkNode(g){let D=this.getFocusedNode(),O=(0,i.Ys)("."+qi,D),_=(0,i.Ys)(" ."+Mi,O).classList.contains(si);D.classList.contains("e-disable")||0==D.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(O,_,D,g)}validateCheckNode(g,D,O,_){let Q=(0,i.oq)(g,"."+en);this.checkActionNodes=[];let me=D?"false":"true";(0,i.le)(me)||g.setAttribute("aria-checked",me);let Te=this.getCheckEvent(Q,D?"uncheck":"check",_);this.trigger("nodeChecking",Te,Je=>{Je.cancel||this.nodeCheckingAction(g,D,O,Je,_)})}nodeCheckingAction(g,D,O,_,Q){if(-1===this.checkedElement.indexOf(O.getAttribute("data-uid"))&&(this.checkedElement.push(O.getAttribute("data-uid")),this.autoCheck)){let me=this.getChildNodes(this.treeData,O.getAttribute("data-uid"));null!==me?this.allCheckNode(me,this.checkedElement,null,null,!1):me=null}if(this.changeState(g,D?"uncheck":"check",Q,!0),this.autoCheck){let me;this.ensureChildCheckState(O),this.ensureParentCheckState((0,i.oq)((0,i.oq)(O,"."+hr),"."+en)),"check"===_.action?me=!0:"uncheck"===_.action&&(me=!1),this.ensureStateChange(O,me)}this.nodeCheckedEvent(g,D,Q)}ensureStateChange(g,D){let O=(0,i.Ys)("."+hr,g),_=g.getAttribute("data-uid"),Q=this.fields;if(1===this.dataType&&this.autoCheck){let me=new $e.hm(this.treeData).executeLocal((new $e.AE).where(Q.parentID,"equal",_,!0));for(let Te=0;Te<me.length;Te++){let Je=me[Te][this.fields.id]?me[Te][this.fields.id].toString():null,St=me[Te][this.fields.isChecked]?me[Te][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(_)&&-1===this.checkedNodes.indexOf(Je)){this.checkedNodes.push(Je);let ri=this.getChildNodes(this.treeData,Je);this.getChildItems(ri,D),-1!==this.parentNodeCheck.indexOf(Je)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(Je),1)}else if(-1===this.checkedNodes.indexOf(_)&&null===O&&-1!==this.checkedNodes.indexOf(Je)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(Je),1),"true"===St&&this.updateField(this.treeData,this.fields,Je,"isChecked",null),-1===this.checkedNodes.indexOf(_)&&null===O||-1!==this.parentNodeCheck.indexOf(Je)){let ri=this.getChildNodes(this.treeData,Je);this.getChildItems(ri,D),-1!==this.parentNodeCheck.indexOf(Je)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(Je),1)}}else{let ri=this.getChildNodes(this.treeData,Je);this.getChildItems(ri,D)}}}else if(1!==this.dataType||this.autoCheck){let me=this.getChildNodes(this.treeData,_);me&&this.childStateChange(me,_,O,D)}else if(D)for(let me=0;me<this.treeData.length;me++){let Te=this.treeData[me][this.fields.id]?this.treeData[me][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(Te)&&this.checkedNodes.push(Te)}else{let me=new $e.hm(this.treeData).executeLocal((new $e.AE).where(Q.isChecked,"equal",!0,!1));for(let Te=0;Te<me.length;Te++){let Je=me[Te][this.fields.id]?me[Te][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(Je)&&this.checkedNodes.splice(this.checkedNodes.indexOf(Je),1),this.updateField(this.treeData,this.fields,Je,"isChecked",null)}this.checkedNodes=[]}}getChildItems(g,D){for(let O=0;O<g.length;O++){let _=g[O][this.fields.id]?g[O][this.fields.id].toString():null,Q=g[O][this.fields.isChecked]?g[O][this.fields.isChecked].toString():null;-1!==this.checkedNodes.indexOf(_)&&!D&&this.checkedNodes.splice(this.checkedNodes.indexOf(_),1),-1===this.checkedNodes.indexOf(_)&&D&&this.checkedNodes.push(_),"true"===Q&&!D&&this.updateField(this.treeData,this.fields,_,"isChecked",null);let me=this.getChildNodes(this.treeData,_);me.length>0&&this.getChildItems(me,D)}}childStateChange(g,D,O,_){for(let Q=0;Q<g.length;Q++){let me=g[Q][this.fields.id]?g[Q][this.fields.id].toString():"",Te=g[Q][this.fields.isChecked]?g[Q][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(D)&&-1===this.checkedNodes.indexOf(me)?(this.checkedNodes.push(me),-1!==this.parentNodeCheck.indexOf(me)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(me),1)):-1===this.checkedNodes.indexOf(D)&&-1!==this.checkedNodes.indexOf(me)&&!_&&(this.checkedNodes.splice(this.checkedNodes.indexOf(me),1),"true"===Te&&this.updateField(this.treeData,this.fields,me,"isChecked",null)):this.autoCheck||(_?-1===this.checkedNodes.indexOf(me)&&this.checkedNodes.push(me):(-1!==this.checkedNodes.indexOf(me)&&this.checkedNodes.splice(this.checkedNodes.indexOf(me),1),this.updateField(this.treeData,this.fields,me,"isChecked",null),this.checkedNodes=[]));let Je=this.getChildNodes([g[Q]],me);Je&&this.childStateChange(Je,D,O,_)}}allCheckNode(g,D,O,_,Q){if(g)for(let me=0;me<g.length;me++){let Te=(0,i.NA)(this.fields.id,g[me]),Je=this.element.querySelector('[data-uid="'+Te+'"]');!1!==Q&&-1===this.checkedElement.indexOf(Te.toString())&&(null===Je&&!(0,i.le)(g[me][this.fields.isChecked])&&-1===D.indexOf(Te.toString())||0===_||2===O)&&(!1!==g[me][this.fields.isChecked]||2===O?D.push(Te.toString()):_=null,_=!1!==g[me][this.fields.isChecked]||2===O?0:null),-1===D.indexOf(Te.toString())&&(0,i.le)(O)&&D.push(Te.toString());let St=(0,i.NA)(this.fields.child.toString(),g[me]);if(!0===(0,i.NA)(this.fields.hasChildren,g[me])||St){let Pi,ri=(0,i.NA)(this.fields.id,g[me]);Pi=1===this.dataType?this.getChildNodes(this.treeData,ri.toString()):St,Pi&&((0,i.le)(Q)?this.allCheckNode(Pi,D,O,_):this.allCheckNode(Pi,D,O,_,Q),_=null)}_=null}}openNode(g,D){let O=this.getFocusedNode(),_=(0,i.Ys)("div."+zr,O);if(g){if(!_)return;_.classList.contains(_n)?this.expandAction(O,_,D):this.focusNextNode(O,!0)}else if(_&&_.classList.contains(_s))this.collapseNode(O,_,D);else{let Q=(0,i.oq)((0,i.oq)(O,"."+hr),"."+en);if(!Q)return;Q.classList.contains("e-disable")||(this.setFocus(O,Q),this.navigateToFocus(!0))}}navigateNode(g){let D=this.getFocusedNode();this.focusNextNode(D,g)}navigateRootNode(g){let D=this.getFocusedNode(),O=g?this.getRootNode():this.getEndNode();O.classList.contains("e-disable")||(this.setFocus(D,O),this.navigateToFocus(g))}getFocusedNode(){let g,D=(0,i.Ys)("."+en+"."+dr,this.element);return(0,i.le)(D)&&(g=(0,i.Ys)("."+en,this.element)),(0,i.le)(D)?(0,i.le)(g)?this.element.firstElementChild:g:D}focusNextNode(g,D){let O=D?this.getNextNode(g):this.getPrevNode(g);if(this.setFocus(g,O),this.navigateToFocus(!D),O.classList.contains("e-disable")){let _=O.lastChild;null==O.previousSibling&&O.classList.contains("e-level-1")?this.focusNextNode(O,!0):null==O.nextSibling&&O.classList.contains("e-node-collapsed")||null==O.nextSibling&&_.classList.contains(Mr)?this.focusNextNode(O,!1):this.focusNextNode(O,D)}}getNextNode(g){let O,D=this.liList.indexOf(g);do{if(D++,O=this.liList[D],(0,i.le)(O))return g}while(!(0,i.pn)(O));return O}getPrevNode(g){let O,D=this.liList.indexOf(g);do{if(D--,O=this.liList[D],(0,i.le)(O))return g}while(!(0,i.pn)(O));return O}getRootNode(){let D,g=0;do{D=this.liList[g],g++}while(!(0,i.pn)(D));return D}getEndNode(){let D,g=this.liList.length-1;do{D=this.liList[g],g--}while(!(0,i.pn)(D));return D}setFocus(g,D){(0,i.IV)([g],[Yo,dr]),D.classList.contains("e-disable")||((0,i.cn)([D],[Yo,dr]),this.updateIdAttr(g,D))}updateIdAttr(g,D){this.element.removeAttribute("aria-activedescendant"),g&&g.removeAttribute("id"),D.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")}focusIn(){this.mouseDownStatus||(0,i.cn)([this.getFocusedNode()],Yo),this.mouseDownStatus=!1}focusOut(){(0,i.IV)([this.getFocusedNode()],Yo)}onMouseOver(g){let D=g.target,O=D.classList,_=(0,i.oq)(D,"."+en);!_||O.contains(hr)||O.contains(en)?this.removeHover():_&&!_.classList.contains("e-disable")&&this.setHover(_)}setHover(g){g.classList.contains(Yo)||(this.removeHover(),(0,i.cn)([g],Yo))}onMouseLeave(g){this.removeHover()}removeHover(){let g=(0,i.td)("."+Yo,this.element);g&&g.length&&(0,i.IV)(g,Yo)}getNodeData(g,D){if(!(0,i.le)(g)&&g.classList.contains(en)&&!(0,i.le)((0,i.oq)(g,"."+Ji))&&(0,i.oq)(g,"."+Ji).classList.contains(Et)){let O=g.getAttribute("data-uid"),_=this.getText(g,D),Q=(0,i.oq)(g.parentNode,"."+en),me=Q?Q.getAttribute("data-uid"):null,Te=g.classList.contains(Rn),Je="true"===g.getAttribute("aria-expanded"),St=null!==g.getAttribute("aria-expanded")||null!=((0,i.Ys)("."+_n,g)||(0,i.Ys)("."+_s,g)),ri=null;return this.showCheckBox&&(ri=(0,i.Ys)("."+qi,g).getAttribute("aria-checked")),{id:O,text:_,parentID:me,selected:Te,expanded:Je,isChecked:ri,hasChildren:St}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}}getText(g,D){if(D){let O=this.getNodeObject(g.getAttribute("data-uid")),_=parseFloat(g.getAttribute("aria-level")),Q=this.getFields(this.fields,_,1);return(0,i.NA)(Q.text,O)}return(0,i.Ys)("."+po,g).textContent}getExpandEvent(g,D){let O=this.getNodeData(g);return{cancel:!1,isInteracted:!(0,i.le)(D),node:g,nodeData:O,event:D}}renderNodeTemplate(g,D,O){let _=this.nodeTemplateFn(g,this,"nodeTemplate"+O,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,D);_&&(_=Array.prototype.slice.call(_),(0,i.R3)(_,D))}destroyTemplate(g){this.clearTemplate(["nodeTemplate"+g.getAttribute("data-uid")])}reRenderNodes(){this.updateListProp(this.fields),i.AR.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",(0,i.le)(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)}setCssClass(g,D){!(0,i.le)(g)&&""!==g&&(0,i.IV)([this.element],g.split(" ")),!(0,i.le)(D)&&""!==D&&(0,i.cn)([this.element],D.split(" "))}editingHandler(g){let D=g.target;if(!(!D||D.classList.contains(Et)||D.classList.contains(hr)||D.classList.contains(en)||D.classList.contains(zr)||D.classList.contains(ko)||D.classList.contains(ze))){let O=(0,i.oq)(D,"."+en);this.createTextbox(O,g)}}createTextbox(g,D){let O=(0,i.Ys)("."+Go,this.element);O&&O.blur();let _=(0,i.Ys)("."+po,g);this.updateOldText(g);let Q=this.createElement("input",{className:Go,attrs:{value:this.oldText}}),me=this.getEditEvent(g,null,Q.outerHTML);this.trigger("nodeEditing",me,Te=>{if(!Te.cancel){let St="width:"+(_.offsetWidth+5)+"px";(0,i.cn)([g],$o),(0,i.le)(this.nodeTemplateFn)||this.destroyTemplate(g),_.innerHTML=me.innerHtml;let ri=(0,i.Ys)("."+Go,_);this.inputObj=Li.II.createInput({element:ri,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",St),ri.focus(),ri.setSelectionRange(0,ri.value.length),this.wireInputEvents(ri)}})}updateOldText(g){let D=g.getAttribute("data-uid");this.editData=this.getNodeObject(D);let O=parseFloat(g.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,O,1),this.oldText=(0,i.NA)(this.editFields.text,this.editData)}inputFocusOut(g){if(!(0,i.Ys)("."+Go,this.element))return;let D=g.target,O=D.value,_=(0,i.oq)(D,"."+po),Q=(0,i.oq)(D,"."+en);(0,i.og)(this.inputObj.container),this.fields.dataSource instanceof $e.hm&&!this.isOffline?this.crudOperation("update",null,Q,O,null,null,!0):this.appendNewText(Q,_,O,!0)}appendNewText(g,D,O,_){let Q=this.getEditEvent(g,O,null);this.trigger("nodeEdited",Q,me=>{this.updateText(g,D,O=me.cancel?me.oldText:me.newText,_),me.oldText!==O&&this.triggerEvent()})}updateText(g,D,O,_){let Q=(0,i.sO)(this.editFields.text,O,this.editData);if((0,i.le)(this.nodeTemplateFn))D.innerText=O;else{D.innerText="";let me=g.getAttribute("data-uid");this.renderNodeTemplate(Q,D,me),this.renderReactTemplates()}_&&((0,i.IV)([g],$o),D.focus()),this.allowTextWrap&&this.calculateWrap(g)}getElement(g){return(0,i.le)(g)?null:"string"==typeof g?this.element.querySelector('[data-uid="'+g+'"]'):"object"==typeof g?(0,i.sb)(g):null}getId(g){return(0,i.le)(g)?null:"string"==typeof g?g:"object"==typeof g?(0,i.sb)(g).getAttribute("data-uid"):null}getEditEvent(g,D,O){return{cancel:!1,newText:D,node:g,nodeData:this.getNodeData(g),oldText:this.oldText,innerHtml:O}}getNodeObject(g){let D;if((0,i.le)(g))return D;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,g);for(let O=0,_=this.treeData.length;O<_;O++){let Q=(0,i.NA)(this.fields.id,this.treeData[O]);if(!(0,i.le)(this.treeData[O])&&!(0,i.le)(Q)&&Q.toString()===g)return this.treeData[O]}return D}getChildNodeObject(g,D,O){let _;if((0,i.le)(g))return _;for(let Q=0,me=g.length;Q<me;Q++){let Te=(0,i.NA)(D.id,g[Q]);if(g[Q]&&Te&&Te.toString()===O)return g[Q];if("string"!=typeof D.child||(0,i.le)((0,i.NA)(D.child,g[Q]))){if(this.fields.dataSource instanceof $e.hm&&!(0,i.le)((0,i.NA)("child",g[Q]))&&(_=this.getChildNodeObject((0,i.NA)("child",g[Q]),this.getChildMapper(D),O),void 0!==_))break}else{let Je=(0,i.NA)(D.child,g[Q]);if(_=this.getChildNodeObject(Je,this.getChildMapper(D),O),void 0!==_)break}}return _}setDragAndDrop(g){g&&!this.disabled?this.initializeDrag():this.destroyDrag()}initializeDrag(){let g,D=this;this.dragObj=new i._l(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+Mr,helper:O=>{this.dragTarget=O.sender.target;let _=(0,i.oq)(this.dragTarget,"."+Et),Q=(0,i.oq)(this.dragTarget,"."+Mr);if(this.dragLi=(0,i.oq)(this.dragTarget,"."+en),this.fullRowSelect&&!Q&&this.dragTarget.classList.contains(te)&&(Q=this.dragTarget.nextElementSibling),!this.dragTarget||!O.element.isSameNode(_)||!Q||this.dragTarget.classList.contains(Et)||this.dragTarget.classList.contains(hr)||this.dragTarget.classList.contains(en)||this.dragLi.classList.contains("e-disable"))return!1;let me=Q.cloneNode(!0);if((0,i.le)((0,i.Ys)("div."+zr,me))){let St=D.createElement("div",{className:zr+" "+_n});me.insertBefore(St,me.children[0])}g=D.createElement("div",{className:"e-drag-item "+Et+" "+this.cssClass+" "+(this.enableRtl?"e-rtl":"")}),g.appendChild(me);let Je=this.selectedNodes.length;if(Je>1&&this.allowMultiSelection&&this.dragLi.classList.contains(Rn)){let St=D.createElement("span",{className:"e-drop-count",innerHTML:""+Je});g.appendChild(St)}return document.body.appendChild(g),document.body.style.cursor="",this.dragData=this.getNodeData(this.dragLi),g},dragStart:O=>{(0,i.cn)([this.element],k);let Q,_=(0,i.oq)(O.target,".e-list-item");_&&(Q=parseInt(_.getAttribute("aria-level"),10));let me=this.getDragEvent(O.event,this,null,O.target,null,g,Q);me.draggedNode.classList.contains($o)?(this.dragObj.intDestroy(O.event),this.dragCancelAction(g)):this.trigger("nodeDragStart",me,Te=>{Te.cancel?(this.dragObj.intDestroy(O.event),this.dragCancelAction(g)):this.dragStartAction=!0})},drag:O=>{this.dragObj.setProperties({cursorAt:{top:!(0,i.le)(O.event.targetTouches)||i.AR.isDevice?60:-20}}),this.dragAction(O,g)},dragStop:O=>{(0,i.IV)([this.element],k),this.removeVirtualEle();let _=O.target,me=(0,i.oq)(_,"."+w);(!_||!me)&&((0,i.og)(O.helper),document.body.style.cursor="");let Je,Te=(0,i.oq)(_,".e-list-item");Te&&(Je=parseInt(Te.getAttribute("aria-level"),10));let St=this.getDragEvent(O.event,this,_,_,null,O.helper,Je);St.preventTargetExpand=!1,this.trigger("nodeDragStop",St,ri=>{this.dragParent=ri.draggedParentNode,this.preventExpand=ri.preventTargetExpand,ri.cancel&&(O.helper.parentNode&&(0,i.og)(O.helper),document.body.style.cursor=""),this.dragStartAction=!1})}}),this.dropObj=new i.bK(this.element,{out:O=>{!(0,i.le)(O)&&!O.target.classList.contains(N)&&(document.body.style.cursor="not-allowed")},over:O=>{document.body.style.cursor=""},drop:O=>{this.dropAction(O)}})}dragCancelAction(g){(0,i.og)(g),(0,i.IV)([this.element],k),this.dragStartAction=!1}dragAction(g,D){let O=(0,i.oq)(g.target,"."+w),_=(0,i.oq)(g.target,"."+Mr),Q=(0,i.Ys)("div."+zr,D);(0,i.IV)([Q],[R,K,G,ye]),this.removeVirtualEle(),document.body.style.cursor="";let me=g.target.classList;if(this.fullRowSelect&&!_&&!(0,i.le)(me)&&me.contains(te)&&(_=g.target.nextElementSibling),O){let ri=(0,i.oq)(g.target,"."+en),Pi=(0,i.oq)(g.target,"."+qi),Hi=(0,i.oq)(g.target,"."+_s),Ms=(0,i.oq)(g.target,"."+_n);if(!O.classList.contains(Et)||_&&!ri.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,ri))if(this.hasTemplate&&ri){let xs=(0,i.Ys)(this.fullRowSelect?"."+te:"."+Mr,ri);g&&!Ms&&!Hi&&g.event.offsetY<7&&!Pi||Ms&&g.event.offsetY<5||Hi&&g.event.offsetX<3?this.appendIndicator(ri,Q,this.fullRowSelect?1:0):g&&!Ms&&!Hi&&!Pi&&xs&&g.event.offsetY>xs.offsetHeight-10||Ms&&g.event.offsetY>19||Hi&&g.event.offsetX>19?this.appendIndicator(ri,Q,this.fullRowSelect?2:1):(0,i.cn)([Q],R)}else ri&&g&&!Ms&&!Hi&&g.event.offsetY<7&&!Pi||Ms&&g.event.offsetY<5||Hi&&g.event.offsetX<3?this.appendIndicator(ri,Q,this.fullRowSelect?1:0):ri&&g&&!Ms&&!Hi&&g.target.offsetHeight>0&&g.event.offsetY>g.target.offsetHeight-10&&!Pi||Ms&&g.event.offsetY>19||Hi&&g.event.offsetX>19?this.appendIndicator(ri,Q,this.fullRowSelect?2:1):(0,i.cn)([Q],R);else"LI"!==g.target.nodeName||ri.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,ri)?g.target.classList.contains(N)?(0,i.cn)([Q],K):(0,i.cn)([Q],G):((0,i.cn)([Q],K),this.renderVirtualEle(g))}else(0,i.cn)([Q],ye),document.body.style.cursor="not-allowed";let Je,Te=(0,i.oq)(g.target,".e-list-item");Te&&(Je=parseInt(Te.getAttribute("aria-level"),10));let St=this.getDragEvent(g.event,this,g.target,g.target,null,D,Je);St.dropIndicator&&(0,i.IV)([Q],St.dropIndicator),this.trigger("nodeDragging",St),St.dropIndicator&&(0,i.cn)([Q],St.dropIndicator)}appendIndicator(g,D,O){(0,i.cn)([D],K);let _=this.createElement("div",{className:N});g.insertBefore(_,g.children[O])}dropAction(g){let _,Q,Te,D=g.event.offsetY,O=g.target,me=!1;Te=g.dragData.draggable;for(let Je=0;Je<Te.ej2_instances.length;Je++)if(Te.ej2_instances[Je]instanceof Le){_=Te.ej2_instances[Je];break}if(_&&_.dragTarget){let St=(0,i.oq)(_.dragTarget,"."+en),ri=(0,i.oq)(O,"."+en);if(null==ri&&O.classList.contains(Et)&&(ri=O.firstElementChild),(0,i.og)(g.droppedElement),document.body.style.cursor="",!ri||ri.isSameNode(St)||this.isDescendant(St,ri))return void(this.fields.dataSource instanceof $e.hm||(this.preventExpand=!1));if(_.allowMultiSelection&&St.classList.contains(Rn)){let Pi=(0,i.td)("."+Rn,_.element);if(g.target.offsetHeight<=33&&D>g.target.offsetHeight-10&&D>6)for(let Hi=Pi.length-1;Hi>=0;Hi--)ri.isSameNode(Pi[Hi])||this.isDescendant(Pi[Hi],ri)||this.appendNode(O,Pi[Hi],ri,g,_,D);else for(let Hi=0;Hi<Pi.length;Hi++)ri.isSameNode(Pi[Hi])||this.isDescendant(Pi[Hi],ri)||this.appendNode(O,Pi[Hi],ri,g,_,D)}else this.appendNode(O,St,ri,g,_,D);Q=parseInt(St.getAttribute("aria-level"),10),me=!0}this.fields.dataSource instanceof $e.hm||(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(g.event,_,O,g.target,g.dragData.draggedElement,null,Q,me)),_.element.id!==this.element.id&&_.triggerEvent(),this.triggerEvent()}appendNode(g,D,O,_,Q,me){let Te=(0,i.oq)(g,"."+qi),Je=(0,i.oq)(_.target,"."+_s),St=(0,i.oq)(_.target,"."+_n);D.classList.contains("e-disable")||Te||!(St&&_.event.offsetY<5||Je&&_.event.offsetX<3||St&&_.event.offsetY>19||Je&&_.event.offsetX>19||!St&&!Je)?this.dropAsChildNode(D,O,Q,null,_,me,!0):"LI"===g.nodeName?this.dropAsSiblingNode(D,O,_,Q):g.firstElementChild&&g.classList.contains(Et)?"UL"===g.firstElementChild.nodeName&&this.dropAsSiblingNode(D,O,_,Q):g.classList.contains("e-icon-collapsible")||g.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(D,O,_,Q):this.dropAsChildNode(D,O,Q,null,_,me)}dropAsSiblingNode(g,D,O,_){let Je,Q=(0,i.oq)(D,"."+hr),me=(0,i.oq)(g,"."+hr),Te=(0,i.oq)(me,"."+en);if(O.target.offsetHeight>0&&O.event.offsetY>O.target.offsetHeight-2?Je=!1:O.event.offsetY<2?Je=!0:(O.target.classList.contains("e-icon-expandable")||O.target.classList.contains("e-icon-collapsible"))&&(O.event.offsetY<5||O.event.offsetX<3?Je=!0:(O.event.offsetY>15||O.event.offsetX>17)&&(Je=!1)),O.target.classList.contains("e-icon-expandable")||O.target.classList.contains("e-icon-collapsible")){let St=O.target.closest("li");Q.insertBefore(g,Je?St:St.nextElementSibling)}else Q.insertBefore(g,Je?O.target:O.target.nextElementSibling);this.moveData(g,D,Q,Je,_),this.updateElement(me,Te),this.updateAriaLevel(g),_.element.id===this.element.id?this.updateList():(_.updateInstance(),this.updateInstance())}dropAsChildNode(g,D,O,_,Q,me,Te){let Pi,Je=(0,i.oq)(g,"."+hr),St=(0,i.oq)(Je,"."+en),ri=(0,i.oq)(D,"."+hr);if(Q&&Q.target&&(Pi=(0,i.Ys)(this.fullRowSelect?"."+te:"."+Mr,D)),Q&&me<7&&!Te)ri.insertBefore(g,D),this.moveData(g,D,ri,!0,O);else if(Q&&Q.target.offsetHeight>0&&me>Q.target.offsetHeight-10&&!Te&&!this.hasTemplate)ri.insertBefore(g,D.nextElementSibling),this.moveData(g,D,ri,!1,O);else if(this.hasTemplate&&Pi&&me>Pi.offsetHeight-10&&!Te)ri.insertBefore(g,D.nextElementSibling),this.moveData(g,D,ri,!1,O);else{let Hi=this.expandParent(D),Ms=Hi.childNodes[_];Hi.insertBefore(g,Ms),this.moveData(g,Ms,Hi,!0,O)}this.updateElement(Je,St),this.updateAriaLevel(g),O.element.id===this.element.id?this.updateList():(O.updateInstance(),this.updateInstance())}moveData(g,D,O,_,Q){let me=(0,i.oq)(O,"."+en),Te=this.getId(g),Je=Q.updateChildField(Q.treeData,Q.fields,Te,null,null,!0),St=this.getId(D),ri=this.getDataPos(this.treeData,this.fields,St),Pi=this.getId(me);if(1===this.dataType){this.updateField(this.treeData,this.fields,Pi,"hasChildren",!0);let Hi=(0,i.le)(ri)?this.treeData.length:_?ri:ri+1;if((0,i.le)(Pi)&&!this.hasPid)delete Je[0][this.fields.parentID];else{let Ms=this.isNumberTypeId?parseFloat(Pi):Pi;(0,i.sO)(this.fields.parentID,Ms,Je[0])}if(this.treeData.splice(Hi,0,Je[0]),Q.element.id!==this.element.id){let Ms=Q.removeChildNodes(Te);Hi++;for(let xs=0,Os=Ms.length;xs<Os;xs++)this.treeData.splice(Hi,0,Ms[xs]),Hi++;Q.groupedData=Q.getGroupedData(Q.treeData,Q.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,Pi,Je,_?ri:ri+1)}expandParent(g){let D=(0,i.Ys)("div."+zr,g);D&&D.classList.contains(_n)&&!0!==this.preventExpand&&this.expandAction(g,D,null);let O=(0,i.Ys)("."+hr,g);if(!0===this.preventExpand&&!O&&D&&this.renderChildNodes(g),O=(0,i.Ys)("."+hr,g),!(0,i.le)(O)&&!0===this.preventExpand&&(O.style.display="none"),!(0,i.le)(O)&&!1===this.preventExpand&&(O.style.display="block"),(0,i.le)(O)&&!0===this.preventExpand){(0,i.le)(D)&&u.Kh.generateIcon(this.createElement,g,_n,this.listBaseOption);let _=(0,i.Ys)("div."+zr,g);_&&_.classList.add("e-icon-expandable"),O=u.Kh.generateUL(this.createElement,[],null,this.listBaseOption),g.appendChild(O),_?(0,i.IV)([_],_s):u.Kh.generateIcon(this.createElement,g,_n,this.listBaseOption),g.setAttribute("aria-expanded","false"),O.style.display="none"}if((0,i.le)(O)){this.trigger("nodeExpanding",this.getExpandEvent(g,null)),(0,i.le)(D)&&u.Kh.generateIcon(this.createElement,g,_s,this.listBaseOption);let _=(0,i.Ys)("div."+zr,g);_||(u.Kh.generateIcon(this.createElement,g,_s,this.listBaseOption),_=(0,i.Ys)("div."+zr,g)),(0,i.IV)([_],_n),O=u.Kh.generateUL(this.createElement,[],null,this.listBaseOption),g.appendChild(O),this.addExpand(g),this.trigger("nodeExpanded",this.getExpandEvent(g,null))}return O}updateElement(g,D){if(D&&0===g.childElementCount){let O=(0,i.Ys)("div."+zr,D);(0,i.og)(g),(0,i.og)(O);let _=this.getId(D);this.updateField(this.treeData,this.fields,_,"hasChildren",!1),this.removeExpand(D,!0)}}updateAriaLevel(g){let D=this.parents(g,"."+hr).length;g.setAttribute("aria-level",""+D),this.updateChildAriaLevel((0,i.Ys)("."+hr,g),D+1)}updateChildAriaLevel(g,D){if(!(0,i.le)(g)){let O=g.childNodes;for(let _=0,Q=O.length;_<Q;_++){let me=O[_];me.setAttribute("aria-level",""+D),this.updateChildAriaLevel((0,i.Ys)("."+hr,me),D+1)}}}renderVirtualEle(g){let D;g.event.offsetY>g.target.offsetHeight-2?D=!1:g.event.offsetY<2&&(D=!0);let O=this.createElement("div",{className:N});g.target.insertBefore(O,g.target.children[this.fullRowSelect?D?1:2:D?0:1])}removeVirtualEle(){let g=(0,i.Ys)("."+N);g&&(0,i.og)(g)}destroyDrag(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())}getDragEvent(g,D,O,_,Q,me,Te,Je){let St=O?(0,i.oq)(O,"."+en):null,ri=St?this.getNodeData(St):null,Pi=D?D.dragLi:Q,Hi=D?D.dragData:null,Ms=O?this.parents(O,"."+en):null,xs=D.dragLi.parentElement,Os=D.dragLi?(0,i.oq)(xs,"."+en):null,br=null,Wr=null,Ao=[K,R,G,ye],On=null,mo=!0===Je?Pi:St,Zo=mo?(0,i.oq)(mo,".e-list-parent"):null,Wo=0,Vo=null;if(Os=D.dragLi&&null===Os?(0,i.oq)(xs,"."+Et):Os,Os=!0===Je?this.dragParent:Os,me)for(;Wo<4;){if((0,i.Ys)("."+zr,me).classList.contains(Ao[Wo])){On=Ao[Wo];break}Wo++}if(Zo){let Ol=0;for(Wo=0;Wo<Zo.childElementCount;Wo++){if(Ol=!0!==Je&&Zo.children[Wo]===Pi&&St!==Pi?++Ol:Ol,!0!==Je&&Zo.children[Wo].classList.contains("e-hover")){Wr=g.offsetY>=23?Wo+1:Wo;break}if(Zo.children[Wo]===mo){Wr=Wo;break}}Wr=0!==Ol?--Wr:Wr,Vo="e-drop-in"==On?"Inside":g.offsetY<7?"Before":"After"}if(O&&(br=0===Ms.length?null:O.classList.contains(en)?Ms[0]:Ms[1]),St===Pi&&(br=St),O&&_.offsetHeight<=33&&g.offsetY<_.offsetHeight-10&&g.offsetY>6&&(br=St,!0!==Je)){Te=++Te;let Ol=br?(0,i.Ys)(".e-list-parent",br):null;if(Wr=Ol?Ol.children.length:0,!(this.fields.dataSource instanceof $e.hm)&&null===Ol&&br){let Yl=br.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,br.getAttribute("data-uid").toString()):null;Wr=Yl?Yl.length:0}}return{cancel:!1,clonedNode:me,event:g,draggedNode:Pi,draggedNodeData:Hi,droppedNode:St,droppedNodeData:ri,dropIndex:Wr,dropLevel:Te,draggedParentNode:Os,dropTarget:br,dropIndicator:On,target:_,position:Vo}}addFullRow(g){let D=this.liList.length;if(g)for(let O=0;O<D;O++)this.createFullRow(this.liList[O]);else for(let O=0;O<D;O++){let _=(0,i.Ys)("."+te,this.liList[O]);(0,i.og)(_)}}createFullRow(g){let D=this.createElement("div",{className:te});g.insertBefore(D,g.childNodes[0])}addMultiSelect(g){if(g){let D=(0,i.td)("."+en+':not([aria-selected="true"])',this.element);for(let O of D)O.setAttribute("aria-selected","false")}else{let D=(0,i.td)("."+en+'[aria-selected="false"]',this.element);for(let O of D)O.removeAttribute("aria-selected")}}collapseByLevel(g,D,O){if(D>0&&!(0,i.le)(g)){let _=this.getVisibleNodes(O,g.childNodes);for(let Q=0,me=_.length;Q<me;Q++){let Te=_[Q],Je=(0,i.Ys)("."+_s,(0,i.Ys)("."+Mr,Te));(0,i.le)(Je)||this.collapseNode(Te,Je,null),this.collapseByLevel((0,i.Ys)("."+hr,Te),D-1,O)}}}collapseAllNodes(g){let D=this.getVisibleNodes(g,(0,i.td)("."+_s,this.element));for(let O=0,_=D.length;O<_;O++){let Q=D[O],me=(0,i.oq)(Q,"."+en);this.collapseNode(me,Q,null)}}expandByLevel(g,D,O){if(D>0&&!(0,i.le)(g)){let _=this.getVisibleNodes(O,g.childNodes);for(let Q=0,me=_.length;Q<me;Q++){let Te=_[Q],Je=(0,i.Ys)("."+_n,(0,i.Ys)("."+Mr,Te));(0,i.le)(Je)||this.expandAction(Te,Je,null),this.expandByLevel((0,i.Ys)("."+hr,Te),D-1,O)}}}expandAllNodes(g){let D=this.getVisibleNodes(g,(0,i.td)("."+_n,this.element));for(let O=0,_=D.length;O<_;O++){let Q=D[O],me=(0,i.oq)(Q,"."+en);this.expandAction(me,Q,null,!0)}}getVisibleNodes(g,D){let O=Array.prototype.slice.call(D);if(g)for(let _=0;_<O.length;_++)(0,i.pn)(O[_])||(O.splice(_,1),_--);return O}removeNode(g){let D=(0,i.oq)(g,"."+hr),O=(0,i.oq)(D,"."+en);(0,i.le)(this.nodeTemplateFn)||this.destroyTemplate(g),(0,i.og)(g),this.updateElement(D,O),this.removeData(g)}updateInstance(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()}updateList(){this.liList=Array.prototype.slice.call((0,i.td)("."+en,this.element))}updateSelectedNodes(){this.setProperties({selectedNodes:[]},!0);let g=(0,i.td)("."+Rn,this.element);this.selectGivenNodes(g)}updateExpandedNodes(){this.setProperties({expandedNodes:[]},!0);let g=(0,i.td)('[aria-expanded="true"]',this.element);for(let D=0,O=g.length;D<O;D++)this.addExpand(g[D])}removeData(g){if(1===this.dataType){let D=new $e.hm(this.treeData),O=this.getId(g),_={},Q=this.isNumberTypeId?parseFloat(O):O;_[this.fields.id]=Q,D.remove(this.fields.id,_),this.removeChildNodes(O)}else{let D=this.getId(g);this.updateChildField(this.treeData,this.fields,D,null,null,!0)}}removeChildNodes(g){let D=this.getChildGroup(this.groupedData,g,!1),O=[];if(D)for(let _=0,Q=D.length;_<Q;_++){let me=new $e.hm(this.treeData),Te=(0,i.NA)(this.fields.id,D[_]).toString(),Je={},St=this.isNumberTypeId?parseFloat(Te):Te;Je[this.fields.id]=St;let ri=me.remove(this.fields.id,Je);O.push(ri[0]),this.removeChildNodes(Te)}return O}doGivenAction(g,D,O){for(let _=0,Q=g.length;_<Q;_++){let me=this.getElement(g[_]);if((0,i.le)(me))continue;let Te=(0,i.Ys)("."+D,(0,i.Ys)("."+Mr,me));(0,i.le)(Te)||(O?this.expandAction(me,Te,null):this.collapseNode(me,Te,null))}}addGivenNodes(g,D,O,_,Q){if(0===g.length)return;let me=this.getSortedData(g),Te=D?parseFloat(D.getAttribute("aria-level"))+1:1;_&&this.updateMapper(Te);let St,Je=u.Kh.createListItemFromJson(this.createElement,me,this.listBaseOption,Te);St=Q||(D?this.expandParent(D):(0,i.Ys)("."+hr,this.element));let ri=St.childNodes[O];for(let Hi=0;Hi<Je.length;Hi++)St.insertBefore(Je[Hi],ri);let Pi=this.getId(D);if(1===this.dataType){this.updateField(this.treeData,this.fields,Pi,"hasChildren",!0);let Hi=this.getId(ri),Ms=(0,i.le)(Hi)?this.treeData.length:this.getDataPos(this.treeData,this.fields,Hi);for(let xs=0;xs<g.length;xs++){if(!(0,i.le)(Pi)){let Os=this.isNumberTypeId?parseFloat(Pi):Pi;(0,i.sO)(this.fields.parentID,Os,g[xs])}this.treeData.splice(Ms,0,g[xs]),Ms++}}else this.addChildData(this.treeData,this.fields,Pi,g,O);this.finalizeNode(St)}updateMapper(g){let D=1===g?this.fields:this.getChildFields(this.fields,g-1,1);this.updateListProp(D)}updateListProp(g){let D=this.getActualProperties(g);this.listBaseOption.fields=D,this.listBaseOption.fields.url=D.hasOwnProperty("navigateUrl")?D.navigateUrl:"navigateUrl"}getDataPos(g,D,O){let _=null;for(let Q=0,me=g.length;Q<me;Q++){let Te=(0,i.NA)(D.id,g[Q]);if(g[Q]&&Te&&Te.toString()===O)return Q;if("string"!=typeof D.child||(0,i.le)((0,i.NA)(D.child,g[Q]))){if(this.fields.dataSource instanceof $e.hm&&!(0,i.le)((0,i.NA)("child",g[Q]))){let Je=(0,i.NA)("child",g[Q]);if(_=this.getDataPos(Je,this.getChildMapper(D),O),null!==_)break}}else{let Je=(0,i.NA)(D.child,g[Q]);if(_=this.getDataPos(Je,this.getChildMapper(D),O),null!==_)break}}return _}addChildData(g,D,O,_,Q){let me;if((0,i.le)(O)){Q=(0,i.le)(Q)?g.length:Q;for(let Te=0,Je=_.length;Te<Je;Te++)g.splice(Q,0,_[Te]),Q++;return me}for(let Te=0,Je=g.length;Te<Je;Te++){let St=(0,i.NA)(D.id,g[Te]);if(g[Te]&&St&&St.toString()===O){if("string"==typeof D.child&&g[Te].hasOwnProperty(D.child)&&null!==g[Te][D.child]||this.fields.dataSource instanceof $e.hm&&g[Te].hasOwnProperty("child")){let Pi=(0,i.NA)("string"==typeof D.child?D.child:"child",g[Te]);(0,i.le)(Pi)&&(Pi=[]),Q=(0,i.le)(Q)?Pi.length:Q;for(let Hi=0,Ms=_.length;Hi<Ms;Hi++)Pi.splice(Q,0,_[Hi]),Q++}else g[Te]["string"==typeof D.child?D.child:"child"]=_;return!0}if("string"!=typeof D.child||(0,i.le)((0,i.NA)(D.child,g[Te]))){if(this.fields.dataSource instanceof $e.hm&&!(0,i.le)((0,i.NA)("child",g[Te]))){let ri=(0,i.NA)("child",g[Te]);if(me=this.addChildData(ri,this.getChildMapper(D),O,_,Q),void 0!==me)break}}else{let ri=(0,i.NA)(D.child,g[Te]);if(me=this.addChildData(ri,this.getChildMapper(D),O,_,Q),void 0!==me)break}}return me}doDisableAction(g){let D=this.nodeType(g),O=this.checkValidId(D);this.validArr=[];for(let _=0,Q=O.length;_<Q;_++){let me=O[_][this.fields.id].toString();me&&-1===this.disableNode.indexOf(me)&&this.disableNode.push(me);let Te=this.getElement(me);Te&&(Te.setAttribute("aria-disabled","true"),(0,i.cn)([Te],ct))}}doEnableAction(g){let D=this.nodeType(g);for(let O=0,_=D.length;O<_;O++){let Q=this.getElement(D[O]),me=D[O];me&&-1!==this.disableNode.indexOf(me)&&this.disableNode.splice(this.disableNode.indexOf(me),1),Q&&(Q.removeAttribute("aria-disabled"),(0,i.IV)([Q],ct))}}nodeType(g){let D=[];for(let O=0,_=g.length;O<_;O++){let Q;"string"==typeof g[O]?Q=g[O]?g[O].toString():null:"object"==typeof g[O]&&(Q=g[O]?g[O].getAttribute("data-uid").toString():null),-1==D.indexOf(Q)&&D.push(Q)}return D}checkValidId(g){if(1===this.dataType)this.validArr=this.treeData.filter(D=>-1!==g.indexOf(D[this.fields.id]?D[this.fields.id].toString():null));else if(2===this.dataType)for(let D=0;D<this.treeData.length;D++){let O=this.treeData[D][this.fields.id]?this.treeData[D][this.fields.id].toString():null;-1!==g.indexOf(O)&&this.validArr.push(this.treeData[D]);let _=(0,i.NA)(this.fields.child.toString(),this.treeData[D]);_&&this.filterNestedChild(_,g)}return this.validArr}filterNestedChild(g,D){for(let O=0;O<g.length;O++){let _=g[O][this.fields.id]?g[O][this.fields.id].toString():null;-1!==D.indexOf(_)&&this.validArr.push(g[O]);let Q=(0,i.NA)(this.fields.child.toString(),g[O]);Q&&this.filterNestedChild(Q,D)}}setTouchClass(){let g=(0,i.oq)(this.element,".e-bigger");this.touchClass=(0,i.le)(g)?"":"e-small"}updatePersistProp(){this.removeField(this.treeData,this.fields,["selected","expanded"]);let g=this.selectedNodes;for(let O=0,_=g.length;O<_;O++)this.updateField(this.treeData,this.fields,g[O],"selected",!0);let D=this.expandedNodes;for(let O=0,_=D.length;O<_;O++)this.updateField(this.treeData,this.fields,D[O],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);let O=this.checkedNodes;for(let _=0,Q=O.length;_<Q;_++)this.updateField(this.treeData,this.fields,O[_],"isChecked",!0)}}removeField(g,D,O){if(!(0,i.le)(g)&&!(0,i.le)(D))for(let _=0,Q=g.length;_<Q;_++){for(let me=0;me<O.length;me++){let Te=this.getMapperProp(D,O[me]);(0,i.le)(g[_][Te])||delete g[_][Te]}"string"!=typeof D.child||(0,i.le)((0,i.NA)(D.child,g[_]))?this.fields.dataSource instanceof $e.hm&&!(0,i.le)((0,i.NA)("child",g[_]))&&this.removeField((0,i.NA)("child",g[_]),this.getChildMapper(D),O):this.removeField((0,i.NA)(D.child,g[_]),this.getChildMapper(D),O)}}getMapperProp(g,D){switch(D){case"selected":return(0,i.le)(g.selected)?"selected":g.selected;case"expanded":return(0,i.le)(g.expanded)?"expanded":g.expanded;case"isChecked":return(0,i.le)(g.isChecked)?"isChecked":g.isChecked;case"hasChildren":return(0,i.le)(g.hasChildren)?"hasChildren":g.hasChildren;default:return D}}updateField(g,D,O,_,Q){if(!(0,i.le)(O))if(1===this.dataType){let me=this.isNumberTypeId?parseFloat(O):O,Te=new $e.hm(this.treeData).executeLocal((new $e.AE).where(D.id,"equal",me,!1));(0,i.sO)(this.getMapperProp(D,_),Q,Te[0])}else this.updateChildField(g,D,O,_,Q)}updateChildField(g,D,O,_,Q,me){let Te;if((0,i.le)(g))return Te;for(let Je=0,St=g.length;Je<St;Je++){let ri=(0,i.NA)(D.id,g[Je]);if(g[Je]&&ri&&ri.toString()===O)return me?Te=g.splice(Je,1):((0,i.sO)(this.getMapperProp(D,_),Q,g[Je]),Te=[]),Te;if("string"!=typeof D.child||(0,i.le)((0,i.NA)(D.child,g[Je]))){if(this.fields.dataSource instanceof $e.hm&&!(0,i.le)((0,i.NA)("child",g[Je]))){let Pi=(0,i.NA)("child",g[Je]);if(Te=this.updateChildField(Pi,this.getChildMapper(D),O,_,Q,me),void 0!==Te)break}}else{let Pi=(0,i.NA)(D.child,g[Je]);if(Te=this.updateChildField(Pi,this.getChildMapper(D),O,_,Q,me),void 0!==Te)break}}return Te}triggerEvent(){this.renderReactTemplates(),this.trigger("dataSourceChanged",{data:this.treeData})}wireInputEvents(g){i.bi.add(g,"blur",this.inputFocusOut,this)}wireEditingEvents(g){if(g&&!this.disabled){let D=this;this.touchEditObj=new i.Xh(this.element,{tap:O=>{this.isDoubleTapped(O)&&2===O.tapCount&&(O.originalEvent.preventDefault(),D.editingHandler(O.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()}wireClickEvent(g){if(g){let D=this;this.touchClickObj=new i.Xh(this.element,{tap:O=>{D.clickHandler(O)}})}else this.touchClickObj&&this.touchClickObj.destroy()}wireExpandOnEvent(g){if(g){let D=this;this.touchExpandObj=new i.Xh(this.element,{tap:O=>{("Click"===this.expandOnType||"DblClick"===this.expandOnType&&this.isDoubleTapped(O)&&2===O.tapCount)&&3!==O.originalEvent.which&&D.expandHandler(O)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()}mouseDownHandler(g){this.mouseDownStatus=!0,(g.shiftKey||g.ctrlKey)&&g.preventDefault(),g.ctrlKey&&this.allowMultiSelection&&i.bi.add(this.element,"contextmenu",this.preventContextMenu,this)}preventContextMenu(g){g.preventDefault()}wireEvents(){i.bi.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),i.bi.add(this.element,"focus",this.focusIn,this),i.bi.add(this.element,"blur",this.focusOut,this),i.bi.add(this.element,"mouseover",this.onMouseOver,this),i.bi.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new i.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){i.bi.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),i.bi.remove(this.element,"focus",this.focusIn),i.bi.remove(this.element,"blur",this.focusOut),i.bi.remove(this.element,"mouseover",this.onMouseOver),i.bi.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()}parents(g,D){let O=[],_=g.parentNode;for(;!(0,i.le)(_);)(0,i.wB)(_,D)&&O.push(_),_=_.parentNode;return O}isDoubleTapped(g){let O,D=g.originalEvent.target;return D&&g.tapCount&&(1===g.tapCount?this.firstTap=(0,i.oq)(D,"."+en):2===g.tapCount&&(O=(0,i.oq)(D,"."+en))),this.firstTap===O}isDescendant(g,D){let O=D.parentNode;for(;!(0,i.le)(O);){if(O===g)return!0;O=O.parentNode}return!1}showSpinner(g){(0,i.cn)([g],Do),(0,Ue.rj)({target:g,width:i.AR.isDevice?16:14},this.createElement),(0,Ue.yh)(g)}hideSpinner(g){(0,Ue.v3)(g),g.innerHTML="",(0,i.IV)([g],Do)}setCheckedNodes(g){g=JSON.parse(JSON.stringify(g)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(g),g.length>0&&this.checkAll(g)}setValidCheckedNode(g){if(1===this.dataType){let D=this.fields,O=new $e.hm(this.treeData).executeLocal((new $e.AE).where(D.id,"equal",g,!0));if(O[0]&&(this.setChildCheckState(O,g,O[0]),this.autoCheck)){let _=O[0][this.fields.parentID]?O[0][this.fields.parentID].toString():null,Q=this.getChildNodes(this.treeData,_),me=0;for(let Te=0;Te<Q.length;Te++){let Je=Q[Te][this.fields.id].toString();-1!==this.checkedNodes.indexOf(Je)&&me++}me===Q.length&&-1===this.checkedNodes.indexOf(_)&&_&&this.checkedNodes.push(_)}}else if(2===this.dataType)for(let D=0;D<this.treeData.length;D++){if((this.treeData[D][this.fields.id]?this.treeData[D][this.fields.id].toString():"")===g&&-1===this.checkedNodes.indexOf(g)){this.checkedNodes.push(g);break}let _=(0,i.NA)(this.fields.child.toString(),this.treeData[D]);_&&this.setChildCheckState(_,g,this.treeData[D])}}setChildCheckState(g,D,O){let _,Q=0;if(1===this.dataType){O&&(_=O[this.fields.id]?O[this.fields.id].toString():null);for(let me=0;me<g.length;me++){let Te=g[me][this.fields.id]?g[me][this.fields.id].toString():null;O&&_&&this.autoCheck&&-1!==this.checkedNodes.indexOf(_)&&-1===this.checkedNodes.indexOf(Te)&&this.checkedNodes.push(Te),Te===D&&-1===this.checkedNodes.indexOf(D)&&this.checkedNodes.push(D);let Je=this.getChildNodes(this.treeData,Te);Je&&this.setChildCheckState(Je,D,O)}}else{O&&(_=O[this.fields.id]?O[this.fields.id].toString():"");for(let me=0;me<g.length;me++){let Te=g[me][this.fields.id]?g[me][this.fields.id].toString():"";O&&_&&this.autoCheck&&-1!==this.checkedNodes.indexOf(_)&&-1===this.checkedNodes.indexOf(Te)&&this.checkedNodes.push(Te),Te===D&&-1===this.checkedNodes.indexOf(D)&&this.checkedNodes.push(D);let Je=(0,i.NA)(this.fields.child.toString(),g[me]);Je&&this.setChildCheckState(Je,D,g[me]),-1!==this.checkedNodes.indexOf(Te)&&this.autoCheck&&Q++,Q===g.length&&-1===this.checkedNodes.indexOf(_)&&this.autoCheck&&this.checkedNodes.push(_)}}}setIndeterminate(g){for(let D=0;D<g.length;D++)this.setValidCheckedNode(g[D])}updatePosition(g,D,O,_){if(1===this.dataType){let Q=this.getDataPos(this.treeData,this.fields,g);if(this.treeData.splice(Q,1,D),O){this.removeChildNodes(g);for(let me=0;me<_.length;me++)this.treeData.splice(Q,0,_[me]),Q++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,g,[D],void 0)}updateChildPosition(g,D,O,_,Q){let me;for(let Te=0,Je=g.length;Te<Je;Te++){let St=(0,i.NA)(D.id,g[Te]);if(g[Te]&&St&&St.toString()===O)return g[Te]=_[0],!0;if("string"!=typeof D.child||(0,i.le)((0,i.NA)(D.child,g[Te]))){if(this.fields.dataSource instanceof $e.hm&&!(0,i.le)((0,i.NA)("child",g[Te]))){let ri=(0,i.NA)("child",g[Te]);if(me=this.updateChildPosition(ri,this.getChildMapper(D),O,_,Q),void 0!==me)break}}else{let ri=(0,i.NA)(D.child,g[Te]);if(me=this.updateChildPosition(ri,this.getChildMapper(D),O,_,Q),void 0!==me)break}}return me}dynamicState(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())}crudOperation(g,D,O,_,Q,me,Te){let Hi,Je=this.fields.dataSource,St=[],ri=this.getQuery(this.fields),Pi=this.fields.id,Ms={addedRecords:[],deletedRecords:[],changedRecords:[]},xs=[];D?xs=this.nodeType(D):O&&("string"==typeof O?xs[0]=O.toString():"object"==typeof O&&(xs[0]=O.getAttribute("data-uid").toString()));for(let Os=0,br=xs.length;Os<br;Os++){let Wr=this.getElement(xs[Os]);if((0,i.le)(Wr))continue;let Ao=this.getNodeObject(xs[Os]);St.push(Ao)}switch(g){case"delete":1==D.length?Hi=Je.remove(Pi,St[0],ri.fromTable,ri):(Ms.deletedRecords=St,Hi=Je.saveChanges(Ms,Pi,ri.fromTable,ri)),Hi.then(Os=>this.deleteSuccess(xs)).catch(Os=>this.dmFailure(Os));break;case"update":St[0][this.fields.text]=_,Hi=Je.update(Pi,St[0],ri.fromTable,ri),Hi.then(Os=>this.editSucess(O,_,Te)).catch(Os=>this.dmFailure(Os,O,Te));break;case"insert":if(1==Q.length)Hi=Je.insert(Q[0],ri.fromTable,ri);else{let Os=[];for(let br=0,Wr=Q.length;br<Wr;br++)Os.push(Q[br]);Ms.addedRecords=Os,Hi=Je.saveChanges(Ms,Pi,ri.fromTable,ri)}Hi.then(Os=>{let br=this.getElement(O);this.addSuccess(Q,br,me),this.preventExpand=!1}).catch(Os=>this.dmFailure(Os))}}deleteSuccess(g){for(let D=0,O=g.length;D<O;D++){let _=this.getElement(g[D]);(0,i.le)(_)||this.removeNode(_)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()}editSucess(g,D,O){let _=this.getElement(g),Q=(0,i.Ys)("."+po,_);this.appendNewText(_,Q,D,O)}addSuccess(g,D,O){let _,Q=D?D.querySelector("."+zr):null,me=this;D&&Q&&Q.classList.contains(_n)&&null===D.querySelector("."+hr)?me.renderChildNodes(D,null,()=>{_=D.querySelector("."+hr),me.addGivenNodes(g,D,O,!0,_),me.triggerEvent()}):(this.addGivenNodes(g,D,O,!0),this.triggerEvent())}dmFailure(g,D,O){D&&this.updatePreviousText(D,O),this.trigger("actionFailure",{error:g})}updatePreviousText(g,D){let O=this.getElement(g),_=(0,i.Ys)("."+po,O);this.updateText(O,_,this.oldText,D)}onPropertyChanged(g,D){for(let O of Object.keys(g))switch(O){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){let _=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(_,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=D.checkedNodes,this.setCheckedNodes(g.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=g.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(D.cssClass,g.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:(0,i.le)(g.expandedNodes)?[]:g.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){let _=this.element.querySelectorAll("li"),Q=0;for(;Q<_.length;)"true"!==_[Q].getAttribute("aria-expanded")&&this.renderChildNodes(_[Q],!0,null,!0),Q++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:g.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:g.fullRowNavigable},!0),this.listBaseOption.itemNavigable=g.fullRowNavigable,this.reRenderNodes()}}destroy(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),super.destroy()}addNodes(g,D,O,_){if((0,i.le)(g))return;g=JSON.parse(JSON.stringify(g));let Q=this.getElement(D);if(this.preventExpand=_,this.fields.dataSource instanceof $e.hm)this.isOffline?this.addSuccess(g,Q,O):this.crudOperation("insert",null,D,null,g,O,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(g,Q,O);else{if(Q)this.addGivenNodes(g,Q,O);else{g=this.getSortedData(g);for(let me=0;me<g.length;me++){let Te=(0,i.NA)(this.fields.parentID,g[me]);Q=Te&&this.getElement(Te.toString()),this.addGivenNodes([g[me]],Q,O)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&Q&&this.ensureParentCheckState(Q),this.fields.dataSource instanceof $e.hm||(this.preventExpand=!1,this.triggerEvent())}beginEdit(g){let D=this.getElement(g);(0,i.le)(D)||this.disabled||this.createTextbox(D,null)}checkAll(g){this.showCheckBox&&this.doCheckBoxAction(g,!0)}collapseAll(g,D,O){(0,i.le)(g)?D>0?this.collapseByLevel((0,i.Ys)("."+hr,this.element),D,O):this.collapseAllNodes(O):this.doGivenAction(g,_s,!1)}disableNodes(g){(0,i.le)(g)||this.doDisableAction(g)}enableNodes(g){(0,i.le)(g)||this.doEnableAction(g)}ensureVisible(g){let D=this.getElement(g);if((0,i.le)(D))return;let O=this.parents(D,"."+en);this.expandAll(O),setTimeout(()=>{D.scrollIntoView(!0)},450)}expandAll(g,D,O){(0,i.le)(g)?D>0?this.expandByLevel((0,i.Ys)("."+hr,this.element),D,O):this.expandAllNodes(O):this.doGivenAction(g,_n,!0)}getAllCheckedNodes(){return this.checkedNodes}getDisabledNodes(){return this.disableNode}getNode(g){let D=this.getElement(g);return this.getNodeData(D,!0)}getTreeData(g){let D=this.getId(g);if(this.updatePersistProp(),(0,i.le)(D))return this.treeData;{let O=this.getNodeObject(D);return(0,i.le)(O)?[]:[O]}}moveNodes(g,D,O,_){let Q=this.getElement(D);if(!(0,i.le)(Q)){for(let me=0;me<g.length;me++){let Te=this.getElement(g[me]);(0,i.le)(Te)||Q.isSameNode(Te)||this.isDescendant(Te,Q)||(this.preventExpand=_,this.dropAsChildNode(Te,Q,this,O))}this.fields.dataSource instanceof $e.hm||(this.preventExpand=!1),this.triggerEvent()}}refreshNode(g,D){if((0,i.le)(g)||(0,i.le)(D))return;let O,_=!1;if(1==this.dataType&&D.length>1)_=!0;else if(2==this.dataType&&1===D.length){let Hi=(0,i.NA)(this.fields.child.toString(),D[0]);(0,i.le)(Hi)||(_=!0)}let me,Te,Q=this.getElement(g);if(O=Q?Q.getAttribute("data-uid"):g?g.toString():null,this.refreshData=this.getNodeObject(O),D=JSON.parse(JSON.stringify(D)),1==this.dataType&&_){for(let Hi=0;Hi<D.length;Hi++)if((0,i.le)(D[Hi][this.fields.parentID])){Te=D[Hi],D.splice(Hi,1);break}me=(0,i.l7)({},this.refreshData,Te)}else me=(0,i.l7)({},this.refreshData,D[0]);if((0,i.le)(Q))return void this.updatePosition(O,me,_,D);this.isRefreshed=!0;let Je=parseFloat(Q.getAttribute("aria-level")),St=u.Kh.createListItemFromJson(this.createElement,[me],this.listBaseOption,Je),ri=(0,i.Ys)("."+hr,Q),Pi=(0,i.NA)(this.fields.child.toString(),me);if(_&&ri||_&&!(0,i.le)(Pi)){let Hi=Q.parentElement,Ms=Array.prototype.indexOf.call(Hi.childNodes,Q);(0,i.Od)(Q),Hi.insertBefore(St[0],Hi.childNodes[Ms]),this.updatePosition(O,me,_,D),_&&ri&&this.expandAll([O])}else{let Hi=(0,i.Ys)("."+Mr,Q),Ms=(0,i.Ys)("."+Mr,St[0]),xs=(0,i.Ys)("div."+zr,Hi),Os=(0,i.Ys)("div."+zr,Ms);xs&&Os&&(Os.classList.contains(_n)&&xs.classList.contains(_s)?((0,i.IV)([Os],_n),(0,i.cn)([Os],_s)):Os.classList.contains(_s)&&xs.classList.contains(_n)?((0,i.IV)([Os],_s),(0,i.cn)([Os],_n)):xs.classList.contains("interaction")&&(0,i.cn)([Os],"interaction")),(0,i.Od)(Hi);let br=(0,i.Ys)("."+te,Q);br.parentNode.insertBefore(Ms,br.nextSibling),this.updatePosition(O,me,_,D)}if(Q=this.getElement(g),me[this.fields.tooltip]&&Q.setAttribute("title",me[this.fields.tooltip]),me.hasOwnProperty(this.fields.htmlAttributes)&&me[this.fields.htmlAttributes]){let Hi={};(0,i.TS)(Hi,me[this.fields.htmlAttributes]),Hi.class?((0,i.cn)([Q],Hi.class.split(" ")),delete Hi.class):(0,i.Y4)(Q,Hi)}-1!==this.selectedNodes.indexOf(O)&&(Q.setAttribute("aria-selected","true"),(0,i.cn)([Q],Rn)),this.isRefreshed=!1,this.triggerEvent()}removeNodes(g){(0,i.le)(g)||(this.fields.dataSource instanceof $e.hm&&!this.isOffline?this.crudOperation("delete",g):this.deleteSuccess(g))}updateNode(g,D){if((0,i.le)(g)||(0,i.le)(D)||!this.allowEditing)return;let O=this.getElement(g);if((0,i.le)(O))return;let _=(0,i.Ys)("."+po,O);this.updateOldText(O);let Q=this.getEditEvent(O,null,null);this.trigger("nodeEditing",Q,me=>{me.cancel||(this.fields.dataSource instanceof $e.hm&&!this.isOffline?this.crudOperation("update",null,g,D,null,null,!1):this.appendNewText(O,_,D,!1))})}uncheckAll(g){this.showCheckBox&&this.doCheckBoxAction(g,!1)}};Ae([(0,i.Z9)(!1)],Ht.prototype,"allowDragAndDrop",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"allowEditing",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"allowMultiSelection",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"allowTextWrap",void 0),Ae([(0,i.Zz)({},_t)],Ht.prototype,"animation",void 0),Ae([(0,i.Z9)()],Ht.prototype,"checkedNodes",void 0),Ae([(0,i.Z9)("")],Ht.prototype,"cssClass",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"disabled",void 0),Ae([(0,i.Z9)(null)],Ht.prototype,"dragArea",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"enableHtmlSanitizer",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"enablePersistence",void 0),Ae([(0,i.Z9)()],Ht.prototype,"expandedNodes",void 0),Ae([(0,i.Z9)("Auto")],Ht.prototype,"expandOn",void 0),Ae([(0,i.Zz)({},Ye)],Ht.prototype,"fields",void 0),Ae([(0,i.Z9)(!0)],Ht.prototype,"fullRowSelect",void 0),Ae([(0,i.Z9)(!0)],Ht.prototype,"loadOnDemand",void 0),Ae([(0,i.Z9)()],Ht.prototype,"locale",void 0),Ae([(0,i.Z9)()],Ht.prototype,"nodeTemplate",void 0),Ae([(0,i.Z9)()],Ht.prototype,"selectedNodes",void 0),Ae([(0,i.Z9)("None")],Ht.prototype,"sortOrder",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"showCheckBox",void 0),Ae([(0,i.Z9)(!0)],Ht.prototype,"autoCheck",void 0),Ae([(0,i.Z9)(!1)],Ht.prototype,"fullRowNavigable",void 0),Ae([(0,i.ju)()],Ht.prototype,"actionFailure",void 0),Ae([(0,i.ju)()],Ht.prototype,"created",void 0),Ae([(0,i.ju)()],Ht.prototype,"dataBound",void 0),Ae([(0,i.ju)()],Ht.prototype,"dataSourceChanged",void 0),Ae([(0,i.ju)()],Ht.prototype,"drawNode",void 0),Ae([(0,i.ju)()],Ht.prototype,"destroyed",void 0),Ae([(0,i.ju)()],Ht.prototype,"keyPress",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeChecked",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeChecking",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeClicked",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeCollapsed",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeCollapsing",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeDragging",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeDragStart",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeDragStop",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeDropped",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeEdited",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeEditing",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeExpanded",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeExpanding",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeSelected",void 0),Ae([(0,i.ju)()],Ht.prototype,"nodeSelecting",void 0),Ht=Le=Ae([i.Zl],Ht);var vi=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const Ks="e-sidebar",Wn="e-close",or="e-open",gn="e-transition",Zr="e-backdrop",fo="e-right",hl="e-left",No="e-over",el="e-push",wo="e-slide",Sl="e-visibility",vl="e-disable-animation",Oo="e-sidebar-context",tl="e-sidebar-absolute";let qr=class extends i.wA{constructor(g,D){super(g,D)}preRender(){this.setWidth()}render(){this.initialize(),this.wireEvents(),this.renderComplete()}initialize(){this.setTarget(),this.addClass(),this.setZindex(),this.enableDock&&this.setDock(),this.isOpen?(this.show(),this.firstRender=!0):this.setMediaQuery(),this.checkType(!0),this.setType(this.type),this.setCloseOnDocumentClick(),this.setEnableRTL(),i.AR.isDevice&&(this.windowWidth=window.innerWidth)}setEnableRTL(){(this.enableRtl?i.cn:i.IV)([this.element],"e-rtl")}setTarget(){this.targetEle=this.element.nextElementSibling,this.sidebarEleCopy=this.element.cloneNode(!0),"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),(0,i.cn)([this.element],tl),(0,i.cn)([this.target],Oo),this.targetEle=this.getTargetElement())}getTargetElement(){let g=this.element.nextElementSibling;for(;!(0,i.le)(g)&&g.classList.contains(Ks);)g=g.nextElementSibling;return g}setCloseOnDocumentClick(){this.closeOnDocumentClick?i.bi.add(document,"mousedown touchstart",this.documentclickHandler,this):i.bi.remove(document,"mousedown touchstart",this.documentclickHandler)}setWidth(){this.enableDock&&"Left"===this.position||this.enableDock&&"Right"===this.position?(0,i.V7)(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock||(0,i.V7)(this.element,{width:this.setDimension(this.width)})}setDimension(g){return"number"==typeof g?(0,i.Ac)(g):"string"==typeof g?g.match(/px|%|em/)?g:(0,i.Ac)(g):"100%"}setZindex(){(0,i.V7)(this.element,{"z-index":""+this.zIndex})}addClass(){"EJS-SIDEBAR"===this.element.tagName&&(0,i.cn)([this.element],"e-sidebar-display");const g=document.querySelector(".e-main-content");(0,i.le)(g||this.targetEle)||(0,i.cn)([g||this.targetEle],["e-content-animation"]),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",!this.enableDock&&"Auto"!==this.type&&(0,i.cn)([this.element],[Sl]),(0,i.IV)([this.element],[or,Wn,fo,hl,wo,el,No]),this.element.classList.add(Ks),(0,i.cn)([this.element],"Right"===this.position?fo:hl),this.enableDock&&(0,i.cn)([this.element],"e-dock"),this.element.setAttribute("tabindex",this.tabIndex),"Auto"!==this.type||i.AR.isDevice?this.isOpen||(0,i.cn)([this.element],Wn):this.show()}checkType(g){"Push"===this.type||"Over"===this.type||"Slide"===this.type?!this.element.classList.contains(Wn)&&!g&&this.hide():this.type="Auto"}transitionEnd(g){this.setDock(),!(0,i.le)(g)&&!this.firstRender&&this.triggerChange(),this.firstRender=!1,i.bi.remove(this.element,"transitionend",this.transitionEnd)}destroyBackDrop(){const g=document.querySelector(".e-main-content")||this.targetEle;this.target&&this.showBackdrop&&g?(0,i.IV)([g],Zr):this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)}hide(g){const D={model:this,element:this.element,cancel:!1,isInteracted:!(0,i.le)(g),event:g||null};this.trigger("close",D,O=>{if(!O.cancel){if(this.element.classList.contains(Wn))return;this.element.classList.contains(or)&&!this.animate&&this.triggerChange(),(0,i.cn)([this.element],Wn),(0,i.IV)([this.element],or),(0,i.V7)(this.element,{width:(0,i.Ac)(this.enableDock?this.dockSize:this.width)}),this.setType(this.type);const _=document.querySelector(".e-main-content")||this.targetEle;!this.enableDock&&_&&(_.style.transform="translateX(0px)",_.style["Left"===this.position?"marginLeft":"marginRight"]="0px"),this.destroyBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.remove("e-sidebar-overflow"),this.setProperties({isOpen:!1},!0),this.enableDock&&setTimeout(()=>this.setTimeOut(),50),i.bi.add(this.element,"transitionend",this.transitionEnd,this)}})}setTimeOut(){const g=document.querySelector(".e-main-content")||this.targetEle,D=this.element.getBoundingClientRect().width;!this.element.classList.contains(or)||!g||"Over"===this.type&&this.enableDock?this.element.classList.contains(Wn)&&g&&("Left"===this.position?g.style.marginLeft=this.setDimension("auto"===this.dockSize?D:this.dockSize):g.style.marginRight=this.setDimension("auto"===this.dockSize?D:this.dockSize)):"Left"===this.position?g.style.marginLeft=this.setDimension("auto"===this.width?D:this.width):g.style.marginRight=this.setDimension("auto"===this.width?D:this.width)}show(g){const D={model:this,element:this.element,cancel:!1,isInteracted:!(0,i.le)(g),event:g||null};this.trigger("open",D,O=>{if(!O.cancel){if((0,i.IV)([this.element],Sl),this.element.classList.contains(or))return;this.element.classList.contains(Wn)&&!this.animate&&this.triggerChange(),(0,i.cn)([this.element],[or,gn]),(0,i.V7)(this.element,{transform:""}),(0,i.IV)([this.element],Wn),(0,i.V7)(this.element,{width:(0,i.Ac)(this.width)}),this.setType(this.type),this.createBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.add("e-sidebar-overflow"),this.setProperties({isOpen:!0},!0),i.bi.add(this.element,"transitionend",this.transitionEnd,this)}})}setAnimation(){this.animate?(0,i.IV)([this.element],vl):(0,i.cn)([this.element],vl)}triggerChange(){this.trigger("change",{name:"change",element:this.element})}setDock(){this.enableDock&&"Left"===this.position&&!this.getState()?(0,i.V7)(this.element,{transform:"translateX(-100%) translateX("+this.setDimension(this.dockSize)+")"}):this.enableDock&&"Right"===this.position&&!this.getState()&&(0,i.V7)(this.element,{transform:"translateX(100%) translateX(-"+this.setDimension(this.dockSize)+")"}),this.element.classList.contains(Wn)&&this.enableDock&&(0,i.V7)(this.element,{width:this.setDimension(this.dockSize)})}createBackDrop(){if(this.target&&this.showBackdrop&&this.getState()){const g=document.querySelector(".e-main-content")||this.targetEle;(0,i.cn)([g],Zr)}else this.showBackdrop&&!this.modal&&this.getState()&&(this.modal=this.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",document.body.appendChild(this.modal))}getPersistData(){return this.addOnPersist(["type","position","isOpen"])}getModuleName(){return"sidebar"}toggle(){this.element.classList.contains(or)?this.hide():this.show()}getState(){return!!this.element.classList.contains(or)}setMediaQuery(){if(this.mediaQuery){let g=!1;g="string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches,g&&this.windowWidth!==window.innerWidth?this.show():this.getState()&&this.windowWidth!==window.innerWidth&&this.hide()}}resize(){"Auto"===this.type&&(0,i.cn)([this.element],i.AR.isDevice?No:el),this.setMediaQuery(),i.AR.isDevice&&(this.windowWidth=window.innerWidth)}documentclickHandler(g){(0,i.oq)(g.target,".e-control."+Ks)||this.hide(g)}enableGestureHandler(g){!this.isOpen&&"Left"===this.position&&"Right"===g.swipeDirection&&g.startX<=20&&g.distanceX>=50&&g.velocity>=.5?this.show():this.isOpen&&"Left"===this.position&&"Left"===g.swipeDirection||this.isOpen&&"Right"===this.position&&"Right"===g.swipeDirection?this.hide():!this.isOpen&&"Right"===this.position&&"Left"===g.swipeDirection&&window.innerWidth-g.startX<=20&&g.distanceX>=50&&g.velocity>=.5&&this.show()}setEnableGestures(){this.enableGestures?(this.mainContentEle=new i.Xh(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarEle=new i.Xh(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentEle&&this.sidebarEle&&(this.mainContentEle.destroy(),this.sidebarEle.destroy())}wireEvents(){this.setEnableGestures(),i.bi.add(window,"resize",this.resize,this)}unWireEvents(){i.bi.remove(window,"resize",this.resize),i.bi.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentEle&&this.mainContentEle.destroy(),this.sidebarEle&&this.sidebarEle.destroy()}onPropertyChanged(g,D){const O=document.querySelector(".e-main-content")||this.targetEle,_=this.isServerRendered;for(const Q of Object.keys(g))switch(Q){case"isOpen":this.isOpen?this.show():this.hide();break;case"width":this.setWidth(),this.getState()||this.setDock();break;case"animate":this.setAnimation();break;case"type":this.checkType(!1),(0,i.IV)([this.element],[Sl]),this.addClass(),(0,i.cn)([this.element],"Auto"===this.type?i.AR.isDevice?["e-over"]:["e-push"]:["e-"+this.type.toLowerCase()]);break;case"position":this.element.style.transform="",this.setDock(),O&&(O.style["Left"===this.position?"marginRight":"marginLeft"]="0px"),"Right"===this.position?((0,i.IV)([this.element],hl),(0,i.cn)([this.element],fo)):((0,i.IV)([this.element],fo),(0,i.cn)([this.element],hl)),this.setType(this.type);break;case"showBackdrop":this.showBackdrop?this.createBackDrop():this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);break;case"target":"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),(0,i.le)(this.target)&&((0,i.IV)([this.element],tl),(0,i.IV)([D.target],Oo),(0,i.V7)(O,{"margin-left":0,"margin-right":0}),document.body.insertAdjacentElement("afterbegin",this.element)),this.isServerRendered=!1,super.refresh(),this.isServerRendered=_;break;case"closeOnDocumentClick":this.setCloseOnDocumentClick();break;case"enableDock":this.getState()||this.setDock();break;case"zIndex":this.setZindex();break;case"mediaQuery":this.setMediaQuery();break;case"enableGestures":this.setEnableGestures();break;case"enableRtl":this.setEnableRTL()}}setType(g){const D=this.element.getBoundingClientRect().width;this.setZindex();const O=document.querySelector(".e-main-content")||this.targetEle;O&&(O.style.transform="translateX(0px)",!i.AR.isDevice&&"Auto"!==this.type&&("Over"!==this.type||!this.enableDock)&&(O.style["Left"===this.position?"marginLeft":"marginRight"]="0px"));const _=D+"px",Q="Left"===this.position?D:-D;switch((0,i.IV)([this.element],[el,No,wo]),g){case"Push":(0,i.cn)([this.element],[el]),O&&(this.enableDock||this.element.classList.contains(or))&&(O.style["Left"===this.position?"marginLeft":"marginRight"]=_);break;case"Slide":(0,i.cn)([this.element],[wo]),O&&(this.enableDock||this.element.classList.contains(or))&&(O.style.transform="translateX("+Q+"px)");break;case"Over":(0,i.cn)([this.element],[No]),this.enableDock&&(this.element.classList.contains(Wn)||this.isOpen)&&O&&(O.style["Left"===this.position?"marginLeft":"marginRight"]=this.setDimension(this.dockSize));break;case"Auto":(0,i.cn)([this.element],[gn]),i.AR.isDevice?O&&this.enableDock&&!this.getState()?(O.style["Left"===this.position?"marginLeft":"marginRight"]=_,(0,i.cn)([this.element],el)):(0,i.cn)([this.element],No):((0,i.cn)([this.element],el),O&&(this.enableDock||this.element.classList.contains(or))&&(O.style["Left"===this.position?"marginLeft":"marginRight"]=_)),this.createBackDrop()}}destroy(){super.destroy(),this.target&&(0,i.IV)([this.target],Oo),this.destroyBackDrop(),this.element&&((0,i.IV)([this.element],[or,Wn,el,wo,No,hl,fo,gn]),(0,i.IV)([this.element],tl),this.element.style.width="",this.element.style.zIndex="",this.element.style.transform="",(0,i.le)(this.sidebarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.windowWidth=null;const g=document.querySelector(".e-main-content")||this.targetEle;(0,i.le)(g)||(g.style.margin="",g.style.transform=""),this.unWireEvents()}};vi([(0,i.Z9)("auto")],qr.prototype,"dockSize",void 0),vi([(0,i.Z9)(null)],qr.prototype,"mediaQuery",void 0),vi([(0,i.Z9)(!1)],qr.prototype,"enableDock",void 0),vi([(0,i.Z9)("en-US")],qr.prototype,"locale",void 0),vi([(0,i.Z9)(!1)],qr.prototype,"enablePersistence",void 0),vi([(0,i.Z9)(!0)],qr.prototype,"enableGestures",void 0),vi([(0,i.Z9)(!1)],qr.prototype,"isOpen",void 0),vi([(0,i.Z9)(!1)],qr.prototype,"enableRtl",void 0),vi([(0,i.Z9)(!0)],qr.prototype,"animate",void 0),vi([(0,i.Z9)("auto")],qr.prototype,"height",void 0),vi([(0,i.Z9)(!1)],qr.prototype,"closeOnDocumentClick",void 0),vi([(0,i.Z9)("Left")],qr.prototype,"position",void 0),vi([(0,i.Z9)(null)],qr.prototype,"target",void 0),vi([(0,i.Z9)(!1)],qr.prototype,"showBackdrop",void 0),vi([(0,i.Z9)("Auto")],qr.prototype,"type",void 0),vi([(0,i.Z9)("auto")],qr.prototype,"width",void 0),vi([(0,i.Z9)(1e3)],qr.prototype,"zIndex",void 0),vi([(0,i.ju)()],qr.prototype,"created",void 0),vi([(0,i.ju)()],qr.prototype,"close",void 0),vi([(0,i.ju)()],qr.prototype,"open",void 0),vi([(0,i.ju)()],qr.prototype,"change",void 0),vi([(0,i.ju)()],qr.prototype,"destroyed",void 0),qr=vi([i.Zl],qr);var Ho=function(Is,g,D,O){var me,_=arguments.length,Q=_<3?g:null===O?O=Object.getOwnPropertyDescriptor(g,D):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(Is,g,D,O);else for(var Te=Is.length-1;Te>=0;Te--)(me=Is[Te])&&(Q=(_<3?me(Q):_>3?me(g,D,Q):me(g,D))||Q);return _>3&&Q&&Object.defineProperty(g,D,Q),Q};const kl="e-icon-right",Tn="e-breadcrumb-text",er="e-breadcrumb-icon",pr="e-breadcrumb-menu",Kr="e-breadcrumb-item",il="e-breadcrumb-popup",Tl="e-breadcrumb-wrap-mode",sl="e-breadcrumb-scroll-mode",Bl="tabindex",Xr="e-disabled",nl="aria-disabled",To=".";class Bo extends i.rt{}Ho([(0,i.Z9)("")],Bo.prototype,"text",void 0),Ho([(0,i.Z9)("")],Bo.prototype,"url",void 0),Ho([(0,i.Z9)(null)],Bo.prototype,"iconCss",void 0),Ho([(0,i.Z9)(!1)],Bo.prototype,"disabled",void 0);let xo=class extends i.wA{constructor(g,D){super(g,D)}preRender(){}render(){this.initialize(),this.renderItems(this.items),this.wireEvents()}initialize(){this._maxItems=this.maxItems,this.element.setAttribute("aria-label","breadcrumb"),this.cssClass&&(0,i.cn)([this.element],this.cssClass.split(" ")),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled&&(this.element.classList.add(Xr),this.element.setAttribute(nl,"true")),"Wrap"===this.overflowMode?this.element.classList.add(Tl):"Scroll"===this.overflowMode&&this.element.classList.add(sl),this.initItems(),this.initPvtProps()}initPvtProps(){"Hidden"===this.overflowMode&&this._maxItems>0&&(this.endIndex=this.getEndIndex(),this.startIndex=this.endIndex+1-(this._maxItems-1)),"Menu"===this.overflowMode&&(this._maxItems>=0?(this.startIndex=this._maxItems>1?1:0,this.endIndex=this.getEndIndex(),this.popupUl=this.createElement("ul",{attrs:{TABINDEX:"0",role:"menu"}})):this.startIndex=this.endIndex=null)}getEndIndex(){let g;return this.activeItem?this.items.forEach((D,O)=>{(D.url===this.activeItem||D.text===this.activeItem)&&(g=O)}):g=this.items.length-1,g}initItems(){if(!this.items.length){let g,D;const O=[];if(this.url){const _=new URL(this.url,window.location.origin);g=_.origin+"/",D=_.href.split(g)[1].split("/")}else g=window.location.origin+"/",D=window.location.href.split(g)[1].split("/");O.push({iconCss:"e-icons e-home",url:g});for(let _=0;_<D.length;_++)D[_]&&(O.push({text:D[_],url:g+D[_]}),g+=D[_]+"/");this.setProperties({items:O},!0)}}renderItems(g){let D,O;const _=this.element.classList.contains(kl),Q=g.length;if(Q){let me,Te,Je,ri,St=0;const Pi=2*Q-1;let Hi=!1;const Ms=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-wrapped-ol":""}),xs=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-first-ol":""}),Os=this.hasField(g,"iconCss"),br="Collapsed"===this.overflowMode&&this._maxItems>0&&Q>this._maxItems&&!this.isExpanded,Wr="Hidden"===this.overflowMode&&this._maxItems>0;"Menu"===this.overflowMode&&this.popupUl&&(this.popupUl.innerHTML="");const Ao={moduleName:this.getModuleName(),showIcon:Os,itemNavigable:!0,itemCreated:On=>{const mo=On.curData.isLastItem;mo&&On.item.children.length&&!this.itemTemplate&&(delete On.curData.isLastItem,!Je&&!this.enableActiveItemNavigation&&(On.item.innerHTML=this.createElement("span",{className:Tn,innerHTML:On.item.children[0].innerHTML}).outerHTML)),On.curData.iconCss&&!On.curData.text&&!this.itemTemplate&&On.item.classList.add("e-icon-item"),Wr&&On.item.setAttribute("item-index",St.toString());const Zo={item:(0,i.l7)({},On.curData.properties?On.curData.properties:On.curData),element:On.item,cancel:!1};this.trigger("beforeItemRender",Zo),Hi=Zo.cancel;const Wo=_||Zo.element.classList.contains(kl);Wo&&On.curData.iconCss&&!this.itemTemplate&&On.item.querySelector(".e-anchor-wrap").appendChild(On.item.querySelector(To+er)),Zo.item.disabled&&(On.item.setAttribute(nl,"true"),On.item.classList.add(Xr)),(Zo.item.disabled||this.disabled)&&On.item.children.length&&!this.itemTemplate&&On.item.children[0].setAttribute(Bl,"-1"),On.curData.isEmptyUrl&&(On.item.children[0].removeAttribute("href"),(!mo||mo&&this.enableActiveItemNavigation)&&!(Zo.item.disabled||this.disabled)&&(On.item.children[0].setAttribute(Bl,"0"),i.bi.add(On.item.children[0],"keydown",this.keyDownHandler,this))),mo&&On.item.setAttribute("data-active-item",""),this.itemTemplate||this.beforeItemRenderChanges(On.curData,Zo.item,On.item,Wo)}};for(let On=0;On<Pi;On%2&&St++,On++){if(me=this.activeItem&&(this.activeItem===g[St].url||this.activeItem===g[St].text),br&&On>1&&On<Pi-2)continue;if(Wr&&(St<this.startIndex||St>this.endIndex)&&(!(On%2)||St!==this.startIndex-1)&&0!==St)continue;On%2?(ri=this.createElement("div",{className:"e-breadcrumb-item-wrapper"}),Ao.template=this.separatorTemplate?this.separatorTemplate:"/",Ao.itemClass="e-breadcrumb-separator",O=!1,D=[{previousItem:g[St],nextItem:g[St+1]}]):(Ao.itemClass="",this.itemTemplate?(Ao.template=this.itemTemplate,O=!1):O=!0,D=[(0,i.l7)({},g[St].properties?g[St].properties:g[St])],!D[0].url&&!this.itemTemplate&&(D=[(0,i.l7)({},D[0],{isEmptyUrl:!0,url:"#"})]),Te=(Wr||"Menu"===this.overflowMode)&&St===this.endIndex,((On===Pi-1||Te)&&!this.itemTemplate||me)&&(D[0].isLastItem=!0));let mo=Ms;const Zo=this.startIndex+this.endIndex-this._maxItems;if("Menu"===this.overflowMode&&(St>=this.startIndex&&St<=Zo&&(!(On%2)||St!==Zo)&&this.endIndex>=this._maxItems&&this._maxItems>0||0===this._maxItems)){if(On%2)continue;mo=this.popupUl,Te&&(Je=!0)}else"Wrap"===this.overflowMode&&(mo=0===On?xs:ri);const Wo=u.Kh.createList(this.createElement,D,Ao,O,this).childNodes;if(Hi){if(Wr||br||"Menu"===this.overflowMode||"Wrap"===this.overflowMode)return g.splice(St,1),this.initPvtProps(),this.reRenderItems();(On===Pi-1||Te)&&(0,i.Od)(mo.lastElementChild)}else(0,i.R3)(Wo,mo);if("Wrap"===this.overflowMode&&0!==On&&On%2==0&&Ms.appendChild(ri),br&&1===On){const Vo=this.createElement("li",{className:"e-icons e-breadcrumb-collapsed",attrs:{TABINDEX:"0"}});i.bi.add(Vo,"keyup",this.expandHandler,this),Ms.appendChild(Vo)}if("Menu"===this.overflowMode&&this.startIndex===On&&this.endIndex>=this._maxItems&&this._maxItems>=0){const Vo=this.getMenuElement();i.bi.add(Vo,"keyup",this.keyDownHandler,this),Ms.appendChild(Vo)}if(me||Te)break;Hi&&On++}this.isReact&&this.renderReactTemplates(),"Wrap"===this.overflowMode&&this.element.appendChild(xs),this.element.appendChild(Ms),this.calculateMaxItems()}}calculateMaxItems(){if("Hidden"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){let g;const D=this.element.offsetWidth,O=[].slice.call(this.element.children[0].children).reverse();let _="Menu"===this.overflowMode?0:O[O.length-1].offsetWidth+(O[O.length-2]?O[O.length-2].offsetWidth:0);if("Menu"===this.overflowMode){const Q=this.getMenuElement();this.element.appendChild(Q),_+=Q.offsetWidth,(0,i.Od)(Q)}for(let Q=0;Q<O.length-2;Q++){if(_>D){if(g=Math.ceil((Q-1)/2)+("Menu"===this.overflowMode&&Q<=2?0:1),(this.maxItems>g&&!(this.maxItems>-1&&-1==g)||-1==this.maxItems)&&this._maxItems!=g)return this._maxItems=g,this.initPvtProps(),this.reRenderItems();break}if("Menu"===this.overflowMode&&2===Q&&(_+=O[O.length-1].offsetWidth+O[O.length-2].offsetWidth,_>D))return this._maxItems=1,this.initPvtProps(),this.reRenderItems();"Menu"===this.overflowMode&&O[Q].classList.contains(pr)||(_+=O[Q].offsetWidth)}}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this._maxItems>0){let g=0;const D=this.element.querySelectorAll(To+Kr);if(D.length>this._maxItems+this._maxItems-1){for(let O="Wrap"===this.overflowMode?1:0;O<this._maxItems+this._maxItems-1;O++)g+=D[O].offsetWidth;g=g+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=g+"px":this.element.style.width=g+"px"}}}hasField(g,D){for(let O=0,_=g.length;O<_;O++)if(g[O][D])return!0;return!1}getMenuElement(){return this.createElement("li",{className:"e-icons e-breadcrumb-menu",attrs:{TABINDEX:"0"}})}beforeItemRenderChanges(g,D,O,_){const Q=O.querySelector(".e-anchor-wrap");if(D.text!==g.text&&Q.childNodes.forEach(me=>{me.nodeType===Node.TEXT_NODE&&(me.textContent=D.text)}),D.iconCss!==g.iconCss&&Q){const me=O.querySelector(To+er);if(me)D.iconCss?((0,i.IV)([me],g.iconCss.split(" ")),(0,i.cn)([me],D.iconCss.split(" "))):(0,i.Od)(me);else if(D.iconCss){const Te=this.createElement("span",{className:er+" "+D.iconCss});_?(0,i.R3)([Te],Q):Q.insertBefore(Te,Q.childNodes[0])}}if(D.url!==g.url&&this.enableNavigation){const me=O.querySelector("a."+Tn);me&&(D.url?me.setAttribute("href",D.url):me.removeAttribute("href"))}}reRenderItems(){this.element.innerHTML="",this.renderItems(this.items)}clickHandler(g){const D=(0,i.oq)(g.target,To+Kr+":not(.e-breadcrumb-separator)");if(this.enableNavigation||g.preventDefault(),D&&((0,i.oq)(g.target,To+Tn)||this.itemTemplate)){let O;O="Wrap"===this.overflowMode?[].slice.call(this.element.querySelectorAll(To+Kr)).indexOf(D):[].slice.call(D.parentElement.children).indexOf(D),"Menu"===this.overflowMode?(0,i.oq)(g.target,To+il)?(O+=this.startIndex,this.endIndex=O,"keydown"===g.type&&this.documentClickHandler(g)):this.element.querySelector(To+pr)?O>[].slice.call(this.element.children[0].children).indexOf(this.element.querySelector(To+pr))?(O+=2*this.popupUl.childElementCount-2,O=Math.floor(O/2),this.endIndex=O):this.startIndex=this.endIndex=O:(O=Math.floor(O/2),this.startIndex=this.endIndex=O):O=Math.floor(O/2),"Hidden"===this.overflowMode&&this._maxItems>0&&0!==this.endIndex&&(O=parseInt(D.getAttribute("item-index"),10),this.startIndex>1&&(this.startIndex-=this.endIndex-O),this.endIndex=O),this.trigger("itemClick",{element:D,item:this.items[O],event:g}),this.activeItem=this.items[O].url||this.items[O].text,this.dataBind()}g.target.classList.contains("e-breadcrumb-collapsed")&&(this.isExpanded=!0,this.reRenderItems()),g.target.classList.contains(pr)&&this.renderPopup()}renderPopup(){const g=this.createElement("div",{className:il+" "+this.cssClass+(this.enableRtl?" e-rtl":"")});document.body.appendChild(g),this.popupObj=new Ue.GI(g,{content:this.popupUl,relateTo:this.element.querySelector(To+pr),enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},collision:{X:"fit",Y:"flip"},open:()=>{this.popupUl.focus()}}),this.popupWireEvents(),this.popupObj.show()}documentClickHandler(g){"Menu"===this.overflowMode&&this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&!(0,i.oq)(g.target,To+pr)&&(this.popupObj.hide(),this.popupObj.destroy(),(0,i.og)(this.popupObj.element))}resize(){this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems()}expandHandler(g){"Enter"===g.key&&(this.isExpanded=!0,this.reRenderItems())}keyDownHandler(g){"Enter"===g.key&&this.clickHandler(g)}popupKeyDownHandler(g){"Escape"===g.key&&this.documentClickHandler(g)}onPropertyChanged(g,D){for(const O of Object.keys(g))switch(O){case"items":case"enableActiveItemNavigation":this.reRenderItems();break;case"activeItem":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems();break;case"overflowMode":case"maxItems":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems(),"Wrap"===D.overflowMode?this.element.classList.remove(Tl):"Wrap"===g.overflowMode&&this.element.classList.add(Tl),"Scroll"===D.overflowMode?this.element.classList.remove(sl):"Scroll"===g.overflowMode&&this.element.classList.add(sl);break;case"url":this.initItems(),this.reRenderItems();break;case"cssClass":D.cssClass&&(0,i.IV)([this.element],D.cssClass.split(" ")),g.cssClass&&(0,i.cn)([this.element],g.cssClass.split(" ")),(D.cssClass&&D.cssClass.indexOf(kl)>-1&&!(g.cssClass&&g.cssClass.indexOf(kl)>-1)||!(D.cssClass&&D.cssClass.indexOf(kl)>-1)&&g.cssClass&&g.cssClass.indexOf(kl)>-1)&&this.reRenderItems();break;case"enableRtl":this.element.classList.toggle("e-rtl");break;case"disabled":this.element.classList.toggle(Xr),this.element.setAttribute(nl,g.disabled+"")}}wireEvents(){this.delegateClickHanlder=this.documentClickHandler.bind(this),i.bi.add(document,"click",this.delegateClickHanlder,this),i.bi.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resize.bind(this))}popupWireEvents(){i.bi.add(this.popupObj.element,"click",this.clickHandler,this),i.bi.add(this.popupObj.element,"keydown",this.popupKeyDownHandler,this)}unWireEvents(){i.bi.remove(document,"click",this.delegateClickHanlder),i.bi.remove(this.element,"click",this.clickHandler),window.removeEventListener("resize",this.resize.bind(this)),this.popupObj&&(i.bi.remove(this.popupObj.element,"click",this.clickHandler),i.bi.remove(this.popupObj.element,"keydown",this.popupKeyDownHandler))}getPersistData(){return this.addOnPersist(["activeItem"])}getModuleName(){return"breadcrumb"}destroy(){let g=[],D=["aria-label"];this.cssClass&&g.concat(this.cssClass.split(" ")),this.enableRtl&&g.push("e-rtl"),this.disabled&&(g.push(Xr),D.push(nl)),"Wrap"===this.overflowMode?g.push(Tl):"Scroll"===this.overflowMode&&g.push(sl),this.unWireEvents(),this.element.innerHTML="",(0,i.IV)([this.element],g),D.forEach(O=>{this.element.removeAttribute(O)}),super.destroy()}};Ho([(0,i.Z9)("")],xo.prototype,"url",void 0),Ho([(0,i.FE)([],Bo)],xo.prototype,"items",void 0),Ho([(0,i.Z9)("")],xo.prototype,"activeItem",void 0),Ho([(0,i.Z9)(-1)],xo.prototype,"maxItems",void 0),Ho([(0,i.Z9)("Menu")],xo.prototype,"overflowMode",void 0),Ho([(0,i.Z9)("")],xo.prototype,"cssClass",void 0),Ho([(0,i.Z9)(null)],xo.prototype,"itemTemplate",void 0),Ho([(0,i.Z9)("/")],xo.prototype,"separatorTemplate",void 0),Ho([(0,i.Z9)(!0)],xo.prototype,"enableNavigation",void 0),Ho([(0,i.Z9)(!1)],xo.prototype,"enableActiveItemNavigation",void 0),Ho([(0,i.Z9)(!1)],xo.prototype,"disabled",void 0),Ho([(0,i.Z9)("")],xo.prototype,"locale",void 0),Ho([(0,i.ju)()],xo.prototype,"beforeItemRender",void 0),Ho([(0,i.ju)()],xo.prototype,"itemClick",void 0),Ho([(0,i.ju)()],xo.prototype,"created",void 0),xo=Ho([i.Zl],xo)},5774:(An,hs,rt)=>{rt.d(hs,{GI:()=>zt,Mm:()=>Xt,Or:()=>ut,TE:()=>Kt,Tj:()=>ve,Vq:()=>os,kl:()=>Si,rj:()=>Ii,u:()=>ks,v3:()=>R,vF:()=>Ne,yh:()=>k});var i=rt(7628),u=rt(2162);let Ue,Zt,$e,Li,z,J,Lt=!1;function ut(ee,te){let ie=!1;const xe={left:0,top:0},Ke=ee;if(!ee||!te)return xe;for((0,i.le)(te.offsetParent)&&"fixed"===te.style.position&&(ie=!0);(te.offsetParent||ie)&&ee&&te.offsetParent!==ee;)xe.left+=ee.offsetLeft,xe.top+=ee.offsetTop,ee=ee.offsetParent;for(ee=Ke;(te.offsetParent||ie)&&ee&&te.offsetParent!==ee;)xe.left-=ee.scrollLeft,xe.top-=ee.scrollTop,ee=ee.parentElement;return xe}function Si(ee,te,ie,xe,Ke){return Zt=void 0,Zt=Ke,Lt=!!xe,ee?(te||(te="left"),ie||(ie="top"),Li=ee.ownerDocument,$e=ee,function E(ee,te,ie){switch(Ue=$e.getBoundingClientRect(),te+ee){case"topcenter":We(Rt(),ie),gt(Nt(),ie);break;case"topright":We(bt(),ie),gt(Nt(),ie);break;case"centercenter":We(Rt(),ie),gt(jt(),ie);break;case"centerright":We(bt(),ie),gt(jt(),ie);break;case"centerleft":We(Di(),ie),gt(jt(),ie);break;case"bottomcenter":We(Rt(),ie),gt(ft(),ie);break;case"bottomright":We(bt(),ie),gt(ft(),ie);break;case"bottomleft":We(Di(),ie),gt(ft(),ie);break;default:We(Di(),ie),gt(Nt(),ie)}return ie}(te.toLowerCase(),ie.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function We(ee,te){te.left=ee}function gt(ee,te){te.top=ee}function at(){return Li.documentElement.scrollTop||Li.body.scrollTop}function Oe(){return Li.documentElement.scrollLeft||Li.body.scrollLeft}function ft(){return Lt?Ue.bottom:Ue.bottom+at()}function jt(){return Nt()+Ue.height/2}function Nt(){return Lt?Ue.top:Ue.top+at()}function Di(){return Ue.left+Oe()}function bt(){const ee=$e&&$e.classList.contains("e-date-range-wrapper")?Zt?Zt.width:0:Zt&&Ue.width>=Zt.width?Zt.width:0;return Ue.right+Oe()-ee}function Rt(){return Di()+Ue.width/2}function ve(ee,te=null,ie={X:!1,Y:!1},xe){if(!ie.Y&&!ie.X)return{left:0,top:0};const Ke=ee.getBoundingClientRect();if(J=te,z=ee.ownerDocument,xe||(xe=Si(ee,"left","top")),ie.X){const ct=J?de():us(),ii=ji(),si=is(),Ri=ii-xe.left,qi=xe.left+Ke.width-si;Ke.width>ct?xe.left=Ri>0&&qi<=0?si-Ke.width:qi>0&&Ri<=0?ii:Ri>qi?si-Ke.width:ii:Ri>0?xe.left+=Ri:qi>0&&(xe.left-=qi)}if(ie.Y){const ct=J?Be():oi(),ii=$t(),si=zi(),Ri=ii-xe.top,qi=xe.top+Ke.height-si;Ke.height>ct?xe.top=Ri>0&&qi<=0?si-Ke.height:qi>0&&Ri<=0?ii:Ri>qi?si-Ke.height:ii:Ri>0?xe.top+=Ri:qi>0&&(xe.top-=qi)}return xe}function Ne(ee,te=null,ie,xe){const Ke=Si(ee,"left","top");ie&&(Ke.left=ie),xe&&(Ke.top=xe);const ct=[];J=te,z=ee.ownerDocument;const ii=ee.getBoundingClientRect(),Ri=Ke.left,qi=Ke.left+ii.width,es=B(Ke.top,Ke.top+ii.height),Gs=_e(Ri,qi);return es.topSide&&ct.push("top"),Gs.rightSide&&ct.push("right"),Gs.leftSide&&ct.push("left"),es.bottomSide&&ct.push("bottom"),ct}function ce(ee,te,ie,xe,Ke,ct,ii=null,si={X:!0,Y:!0},Ri){if(!(te&&ee&&Ke&&ct&&(si.X||si.Y)))return;const qi={TL:null,TR:null,BL:null,BR:null},Mi={TL:null,TR:null,BL:null,BR:null};let es;if("none"===window.getComputedStyle(ee).display){const an=ee.style.visibility;ee.style.visibility="hidden",ee.style.display="block",es=ee.getBoundingClientRect(),ee.style.removeProperty("display"),ee.style.visibility=an}else es=ee.getBoundingClientRect();const Gs={posX:Ke,posY:ct,offsetX:ie,offsetY:xe,position:{left:0,top:0}};J=ii,z=te.ownerDocument,function Se(ee,te,ie,xe,Ke){ie.position=Si(ee,ie.posX,ie.posY,xe,Ke),te.TL=Si(ee,"left","top",xe,Ke),te.TR=Si(ee,"right","top",xe,Ke),te.BR=Si(ee,"left","bottom",xe,Ke),te.BL=Si(ee,"right","bottom",xe,Ke)}(te,qi,Gs,Ri,es),ue(Mi,Gs,es),si.X&&lt(te,Mi,qi,Gs,es,!0),si.Y&&qi.TL.top>-1&&Xe(te,Mi,qi,Gs,es,!0),function be(ee,te,ie){let xe=0,Ke=0;if(null!=ee.offsetParent&&("absolute"===getComputedStyle(ee.offsetParent).position||"relative"===getComputedStyle(ee.offsetParent).position)){const ct=Si(ee.offsetParent,"left","top",!1,ie);xe=ct.left,Ke=ct.top}ee.style.top=te.position.top+te.offsetY-Ke+"px",ee.style.left=te.position.left+te.offsetX-xe+"px"}(ee,Gs,es)}function ue(ee,te,ie){ee.TL={top:te.position.top+te.offsetY,left:te.position.left+te.offsetX},ee.TR={top:ee.TL.top,left:ee.TL.left+ie.width},ee.BL={top:ee.TL.top+ie.height,left:ee.TL.left},ee.BR={top:ee.TL.top+ie.height,left:ee.TL.left+ie.width}}function _e(ee,te){let ie=!1,xe=!1;return ee-Ut()<ji()&&(ie=!0),te>is()&&(xe=!0),{leftSide:ie,rightSide:xe}}function lt(ee,te,ie,xe,Ke,ct){const ii=_e(te.TL.left,te.TR.left);ie.TL.left-Ut()<=ji()&&(ii.leftSide=!1),ie.TR.left>is()&&(ii.rightSide=!1),(ii.leftSide&&!ii.rightSide||!ii.leftSide&&ii.rightSide)&&(xe.posX="right"===xe.posX?"left":"right",xe.offsetX=xe.offsetX+Ke.width,xe.offsetX=-1*xe.offsetX,xe.position=Si(ee,xe.posX,xe.posY,!1),ue(te,xe,Ke),ct&&lt(ee,te,ie,xe,Ke,!1))}function Xe(ee,te,ie,xe,Ke,ct){const ii=B(te.TL.top,te.BL.top);ie.TL.top-ui()<=$t()&&(ii.topSide=!1),ie.BL.top>=zi()&&ee.getBoundingClientRect().bottom<window.innerHeight&&(ii.bottomSide=!1),(ii.topSide&&!ii.bottomSide||!ii.topSide&&ii.bottomSide)&&(xe.posY="top"===xe.posY?"bottom":"top",xe.offsetY=xe.offsetY+Ke.height,xe.offsetY=-1*xe.offsetY,xe.position=Si(ee,xe.posX,xe.posY,!1,Ke),ue(te,xe,Ke),ct&&Xe(ee,te,ie,xe,Ke,!1))}function B(ee,te){let ie=!1,xe=!1;return ee-ui()<$t()&&(ie=!0),te>zi()&&(xe=!0),{topSide:ie,bottomSide:xe}}function de(){return J.getBoundingClientRect().width}function Be(){return J.getBoundingClientRect().height}function Fe(){return J.getBoundingClientRect().left}function xt(){return J.getBoundingClientRect().top}function $t(){return J?xt():0}function ji(){return J?Fe():0}function is(){return J?Ut()+Fe()+de():Ut()+us()}function zi(){return J?ui()+xt()+Be():ui()+oi()}function ui(){return z.documentElement.scrollTop||z.body.scrollTop}function Ut(){return z.documentElement.scrollLeft||z.body.scrollLeft}function oi(){return window.innerHeight}function us(){const ee=window.innerWidth;let te=document.documentElement.getBoundingClientRect();return ee-(ee-((0,i.le)(document.documentElement)?0:te.width))}var Us=function(ee,te,ie,xe){var ii,Ke=arguments.length,ct=Ke<3?te:null===xe?xe=Object.getOwnPropertyDescriptor(te,ie):xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ct=Reflect.decorate(ee,te,ie,xe);else for(var si=ee.length-1;si>=0;si--)(ii=ee[si])&&(ct=(Ke<3?ii(ct):Ke>3?ii(te,ie,ct):ii(te,ie))||ct);return Ke>3&&ct&&Object.defineProperty(te,ie,ct),ct};let $i=(()=>{class ee extends i.rt{}return Us([(0,i.Z9)("left")],ee.prototype,"X",void 0),Us([(0,i.Z9)("top")],ee.prototype,"Y",void 0),ee})();const et_OPEN="e-popup-open",et_CLOSE="e-popup-close";let zt=(()=>{let ee=class extends i.wA{constructor(ie,xe){super(xe,ie)}onPropertyChanged(ie,xe){for(const Ke of Object.keys(ie))switch(Ke){case"width":(0,i.V7)(this.element,{width:(0,i.Ac)(ie.width)});break;case"height":(0,i.V7)(this.element,{height:(0,i.Ac)(ie.height)});break;case"zIndex":(0,i.V7)(this.element,{zIndex:ie.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let ct=ie.offsetX-xe.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+ct).toString()+"px";break;case"offsetY":let ii=ie.offsetY-xe.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+ii).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==ie.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove("e-popup","e-rtl",et_OPEN,et_CLOSE),this.unwireEvents(),super.destroy()}render(){this.element.classList.add("e-popup");const ie={};1e3!==this.zIndex&&(ie.zIndex=this.zIndex),"auto"!==this.width&&(ie.width=(0,i.Ac)(this.width)),"auto"!==this.height&&(ie.height=(0,i.Ac)(this.height)),(0,i.V7)(this.element,ie),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){i.AR.isDevice&&i.bi.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(const ie of this.getScrollableParent(this.getRelateToElement()))i.bi.add(ie,"scroll",this.scrollRefresh,this)}unwireEvents(){i.AR.isDevice&&i.bi.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(const ie of this.getScrollableParent(this.getRelateToElement()))i.bi.remove(ie,"scroll",this.scrollRefresh)}getRelateToElement(){const ie=""===this.relateTo||(0,i.le)(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:ie},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(ie){if("reposition"===this.actionOnScroll?!(0,i.le)(this.element)&&!(this.element.offsetParent===ie.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==ie.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){const xe=this.isElementOnViewport(this.getRelateToElement(),ie.target);xe||this.targetInvisibleStatus?xe&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(ie,xe){const Ke=this.getScrollableParent(ie);for(let ct=0;ct<Ke.length;ct++)if(!this.isElementVisible(ie,Ke[ct]))return!1;return!0}isElementVisible(ie,xe){const Ke=this.checkGetBoundingClientRect(ie);if(!Ke.height||!Ke.width)return!1;if((0,i.le)(this.checkGetBoundingClientRect(xe))){const ct=window,ii={top:ct.scrollY,left:ct.scrollX,right:ct.scrollX+ct.outerWidth,bottom:ct.scrollY+ct.outerHeight},si=Si(ie),Ri={top:si.top,left:si.left,right:si.left+Ke.width,bottom:si.top+Ke.height},qi={top:ii.bottom-Ri.top,left:ii.right-Ri.left,bottom:Ri.bottom-ii.top,right:Ri.right-ii.left};return qi.top>0&&qi.left>0&&qi.right>0&&qi.bottom>0}{const ct=xe.getBoundingClientRect();return!(Ke.bottom<ct.top||Ke.bottom>ct.bottom||Ke.right>ct.right||Ke.left<ct.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}setContent(){if(!(0,i.le)(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{const ie=this.getRelateToElement(),xe=this.content.props;(!ie.classList.contains("e-dropdown-btn")||(0,i.le)(xe))&&this.element.appendChild(this.content)}}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(ie,xe){(0,i.le)(ie)||this.checkFixedParent(ie),this.reposition(),xe||this.checkCollision()}reposition(){let ie,xe;const Ke=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)ie={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let ct;const ii=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(ct=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),xe=this.getAnchorPosition(Ke,this.element,this.position,this.offsetX,this.offsetY),ie="string"==typeof this.position.X?{left:xe.left,top:this.position.Y}:{left:this.position.X,top:xe.top},this.element.style.display=ii,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=ct)}else if(Ke){const ct=this.element.style.display;this.element.style.display="block",ie=this.getAnchorPosition(Ke,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=ct}else ie={left:0,top:0};(0,i.le)(ie)||(this.element.style.left=ie.left+"px",this.element.style.top=ie.top+"px")}checkGetBoundingClientRect(ie){let xe;try{return xe=ie.getBoundingClientRect(),xe}catch{return null}}getAnchorPosition(ie,xe,Ke,ct,ii){const si=this.checkGetBoundingClientRect(xe),Ri=this.checkGetBoundingClientRect(ie);if((0,i.le)(si)||(0,i.le)(Ri))return null;const qi=ie;let Mi={left:0,top:0};switch(xe.offsetParent&&"BODY"===xe.offsetParent.tagName&&"BODY"===ie.tagName?Mi=Si(ie):(xe.classList.contains("e-dlg-modal")&&"BODY"!==qi.tagName&&(xe=xe.parentElement),Mi=ut(qi,xe)),Ke.X){default:case"left":break;case"center":xe.classList.contains("e-dlg-modal")&&"BODY"===qi.tagName&&"container"===this.targetType?Mi.left+=window.innerWidth/2-si.width/2:Mi.left+="container"===this.targetType?Ri.width/2-si.width/2:Ri.width/2;break;case"right":xe.classList.contains("e-dlg-modal")&&"BODY"===qi.tagName&&"container"===this.targetType?Mi.left+=window.innerWidth-si.width:Mi.left+="container"===this.targetType?Ri.width-si.width:Ri.width}switch(Ke.Y){default:case"top":break;case"center":xe.classList.contains("e-dlg-modal")&&"BODY"===qi.tagName&&"container"===this.targetType?Mi.top+=window.innerHeight/2-si.height/2:Mi.top+="container"===this.targetType?Ri.height/2-si.height/2:Ri.height/2;break;case"bottom":xe.classList.contains("e-dlg-modal")&&"BODY"===qi.tagName&&"container"===this.targetType?Mi.top+=window.innerHeight-si.height:Mi.top+="container"===this.targetType?Ri.height-si.height:Ri.height}return Mi.left+=ct,Mi.top+=ii,Mi}callFlip(ie){const xe=this.getRelateToElement();ce(this.element,xe,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,ie,this.fixedParent)}callFit(ie){if(0!==Ne(this.element,this.viewPortElement).length)if((0,i.le)(this.viewPortElement)){const xe=ve(this.element,this.viewPortElement,ie);ie.X&&(this.element.style.left=xe.left+"px"),ie.Y&&(this.element.style.top=xe.top+"px")}else{const xe=this.checkGetBoundingClientRect(this.element),Ke=this.checkGetBoundingClientRect(this.viewPortElement);if((0,i.le)(xe)||(0,i.le)(Ke))return null;ie&&!0===ie.Y&&(Ke.top>xe.top?this.element.style.top="0px":Ke.bottom<xe.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(xe.bottom-Ke.bottom)+"px")),ie&&!0===ie.X&&(Ke.right<xe.right?this.element.style.left=parseInt(this.element.style.left,10)-(xe.right-Ke.right)+"px":Ke.left>xe.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(Ke.left-xe.left)+"px"))}}checkCollision(){const ie=this.collision.X,xe=this.collision.Y;"none"===ie&&"none"===xe||("flip"===ie&&"flip"===xe?this.callFlip({X:!0,Y:!0}):"fit"===ie&&"fit"===xe?this.callFit({X:!0,Y:!0}):("flip"===ie?this.callFlip({X:!0,Y:!1}):"flip"===xe&&this.callFlip({Y:!0,X:!1}),"fit"===ie?this.callFit({X:!0,Y:!1}):"fit"===xe&&this.callFit({X:!1,Y:!0})))}show(ie,xe){if(this.wireEvents(),1e3===this.zIndex||!(0,i.le)(xe)){const Ke=(0,i.le)(xe)?this.element:xe;this.zIndex=Kt(Ke),(0,i.V7)(this.element,{zIndex:this.zIndex})}ie=(0,i.le)(ie)||"object"!=typeof ie?this.showAnimation:ie,("none"!==this.collision.X||"none"!==this.collision.Y)&&((0,i.IV)([this.element],et_CLOSE),(0,i.cn)([this.element],et_OPEN),this.checkCollision(),(0,i.IV)([this.element],et_OPEN),(0,i.cn)([this.element],et_CLOSE)),(0,i.le)(ie)?((0,i.IV)([this.element],et_CLOSE),(0,i.cn)([this.element],et_OPEN),this.trigger("open")):(ie.begin=()=>{this.isDestroyed||((0,i.IV)([this.element],et_CLOSE),(0,i.cn)([this.element],et_OPEN))},ie.end=()=>{this.isDestroyed||this.trigger("open")},new i.fw(ie).animate(this.element))}hide(ie){ie=(0,i.le)(ie)||"object"!=typeof ie?this.hideAnimation:ie,(0,i.le)(ie)?((0,i.IV)([this.element],et_OPEN),(0,i.cn)([this.element],et_CLOSE),this.trigger("close")):(ie.end=()=>{this.isDestroyed||((0,i.IV)([this.element],et_OPEN),(0,i.cn)([this.element],et_CLOSE),this.trigger("close"))},new i.fw(ie).animate(this.element)),this.unwireEvents()}getScrollableParent(ie){return this.checkFixedParent(ie),Xt(ie,this.fixedParent)}checkFixedParent(ie){let xe=ie.parentElement;for(;xe&&"HTML"!==xe.tagName;){const Ke=getComputedStyle(xe);"fixed"===Ke.position&&!(0,i.le)(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?(0,i.Ac)(window.scrollY-parseInt(this.element.style.top)):(0,i.Ac)(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),xe=xe.parentElement,!(0,i.le)(this.element)&&(0,i.le)(this.element.offsetParent)&&"fixed"===Ke.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return Us([(0,i.Z9)("auto")],ee.prototype,"height",void 0),Us([(0,i.Z9)("auto")],ee.prototype,"width",void 0),Us([(0,i.Z9)(null)],ee.prototype,"content",void 0),Us([(0,i.Z9)("container")],ee.prototype,"targetType",void 0),Us([(0,i.Z9)(null)],ee.prototype,"viewPortElement",void 0),Us([(0,i.Z9)({X:"none",Y:"none"})],ee.prototype,"collision",void 0),Us([(0,i.Z9)("")],ee.prototype,"relateTo",void 0),Us([(0,i.Zz)({},$i)],ee.prototype,"position",void 0),Us([(0,i.Z9)(0)],ee.prototype,"offsetX",void 0),Us([(0,i.Z9)(0)],ee.prototype,"offsetY",void 0),Us([(0,i.Z9)(1e3)],ee.prototype,"zIndex",void 0),Us([(0,i.Z9)(!1)],ee.prototype,"enableRtl",void 0),Us([(0,i.Z9)("reposition")],ee.prototype,"actionOnScroll",void 0),Us([(0,i.Z9)(null)],ee.prototype,"showAnimation",void 0),Us([(0,i.Z9)(null)],ee.prototype,"hideAnimation",void 0),Us([(0,i.ju)()],ee.prototype,"open",void 0),Us([(0,i.ju)()],ee.prototype,"close",void 0),Us([(0,i.ju)()],ee.prototype,"targetExitViewport",void 0),ee=Us([i.Zl],ee),ee})();function Xt(ee,te){const ie=getComputedStyle(ee),xe=[],Ke=/(auto|scroll)/;let ct=ee.parentElement;for(;ct&&"HTML"!==ct.tagName;){const ii=getComputedStyle(ct);!("absolute"===ie.position&&"static"===ii.position)&&Ke.test(ii.overflow+ii.overflowY+ii.overflowX)&&xe.push(ct),ct=ct.parentElement}return te||xe.push(document),xe}function Kt(ee){let te=ee.parentElement;const ie=[];for(;te&&"BODY"!==te.tagName;){const si=document.defaultView.getComputedStyle(te,null).getPropertyValue("z-index"),Ri=document.defaultView.getComputedStyle(te,null).getPropertyValue("position");"auto"!==si&&"static"!==Ri&&ie.push(si),te=te.parentElement}const xe=[];for(let si=0;si<document.body.children.length;si++)if(!ee.isEqualNode(document.body.children[si])){const Ri=document.defaultView.getComputedStyle(document.body.children[si],null).getPropertyValue("z-index"),qi=document.defaultView.getComputedStyle(document.body.children[si],null).getPropertyValue("position");"auto"!==Ri&&"static"!==qi&&xe.push(Ri)}xe.push("999");const Ke=[];if(!(0,i.le)(ee.parentElement)&&"BODY"!==ee.parentElement.tagName){const si=[].slice.call(ee.parentElement.children);for(let Ri=0;Ri<si.length;Ri++)if(!ee.isEqualNode(si[Ri])){const qi=document.defaultView.getComputedStyle(si[Ri],null).getPropertyValue("z-index"),Mi=document.defaultView.getComputedStyle(si[Ri],null).getPropertyValue("position");"auto"!==qi&&"static"!==Mi&&Ke.push(qi)}}const ct=ie.concat(xe,Ke),ii=Math.max.apply(Math,ct)+1;return ii>2147483647?2147483647:ii}const Tt=["north-west","north","north-east","west","east","south-west","south","south-east"],qt="e-resize-handle",Ci="e-focused-handle",Jt=["e-restrict-left"],Wt="e-resize-viewport",At=["north","west","east","south"];let li,Oi,Ei,Ui,As,bs,kt,bi,ws,Gt=0,Dt=0,Pt=0,di=0,ot=0,hi=0,wt=null,Ot=null,Ai=null,Ti=!0,ns=0,ls=!0;function on(ee){Yt();const te=(0,i.az)("span",{attrs:{unselectable:"on",contenteditable:"false"}});te.setAttribute("class","e-dialog-border-resize e-"+ee),"south"===ee&&(te.style.height="2px",te.style.width="100%",te.style.bottom="0px",te.style.left="0px"),"north"===ee&&(te.style.height="2px",te.style.width="100%",te.style.top="0px",te.style.left="0px"),"east"===ee&&(te.style.height="100%",te.style.width="2px",te.style.right="0px",te.style.top="0px"),"west"===ee&&(te.style.height="100%",te.style.width="2px",te.style.left="0px",te.style.top="0px"),li.appendChild(te)}function Bn(ee){let te;return(0,i.le)(ee)||(te="string"==typeof ee?document.querySelector(ee):ee),te}function Kn(ee){(0,i.le)(ee)&&(ee=this);const te=li.querySelectorAll("."+qt);for(let xe=0;xe<te.length;xe++)Oi=te[xe],i.bi.add(Oi,"mousedown",In,ee),i.bi.add(Oi,"msie"===i.AR.info.name?"pointerdown":"touchstart",Xi,ee);const ie=li.querySelectorAll(".e-dialog-border-resize");if(!(0,i.le)(ie))for(let xe=0;xe<ie.length;xe++)Oi=ie[xe],i.bi.add(Oi,"mousedown",In,ee),i.bi.add(Oi,"msie"===i.AR.info.name?"pointerdown":"touchstart",Xi,ee)}function Dn(ee){return ee.indexOf("mouse")>-1?"mouse":"touch"}function In(ee){if(ee.preventDefault(),li=ee.target.parentElement,Yt(),ot=ee.pageX,hi=ee.pageY,ee.target.classList.add(Ci),!(0,i.le)(wt)&&(ws=this,!0===wt(ee,ws)))return;this.targetEle&&li&&li.querySelector(".e-dlg-resizable")&&(kt=null,bs=this.targetEle.clientWidth,Ui=this.targetEle.clientHeight);const te=(0,i.le)(kt)?document:kt;i.bi.add(te,"mousemove",Ls,this),i.bi.add(document,"mouseup",js,this);for(let ie=0;ie<Jt.length;ie++)Ti=!li.classList.contains(Jt[ie])}function js(ee){const te="msie"===i.AR.info.name?"pointermove":"touchmove",ie="msie"===i.AR.info.name?"pointerup":"touchend",xe=(0,i.le)(kt)?document:kt,Ke="msie"===i.AR.info.name?"pointerdown":"touchstart";i.bi.remove(xe,"mousemove",Ls),i.bi.remove(xe,te,Ls),i.bi.remove(xe,Ke,Ls),(0,i.le)(document.body.querySelector("."+Ci))||document.body.querySelector("."+Ci).classList.remove(Ci),(0,i.le)(Ai)||(ws=this,Ai(ee,ws)),i.bi.remove(document,"mouseup",js),i.bi.remove(document,ie,js)}function Yt(){Gt=parseFloat(getComputedStyle(li,null).getPropertyValue("width").replace("px","")),Dt=parseFloat(getComputedStyle(li,null).getPropertyValue("height").replace("px","")),Pt=li.getBoundingClientRect().left,di=li.getBoundingClientRect().top}function Xi(ee){li=ee.target.parentElement,Yt();const te=ee.touches?ee.changedTouches[0]:ee;if(ot=te.pageX,hi=te.pageY,!(0,i.le)(wt)&&(ws=this,!0===wt(ee,ws)))return;const ie="msie"===i.AR.info.name?"pointermove":"touchmove",xe="msie"===i.AR.info.name?"pointerup":"touchend",Ke=(0,i.le)(kt)?document:kt;i.bi.add(Ke,ie,Ls,this),i.bi.add(document,xe,js)}function Ls(ee){if(ee.target.classList.contains(qt)&&ee.target.classList.contains(Ci)?Oi=ee.target:(0,i.le)(document.body.querySelector("."+Ci))||(Oi=document.body.querySelector("."+Ci)),!(0,i.le)(Oi)){let te="";for(let ie=0;ie<Tt.length;ie++)Oi.classList.contains("e-"+Tt[ie])&&(te=Tt[ie]);switch((0,i.le)(Ot)||(ws=this,Ot(ee,ws)),te){case"south":Rs(ee);break;case"north":gi(ee);break;case"west":je(ee);break;case"east":Re(ee);break;case"south-east":Rs(ee),Re(ee);break;case"south-west":Rs(ee),je(ee);break;case"north-east":gi(ee),Re(ee);break;case"north-west":gi(ee),je(ee)}}}function cr(ee){return ee.getBoundingClientRect()}function Rs(ee){const te=document.documentElement.clientHeight;let ie=!1;const Ke=(ee.touches?ee.changedTouches[0]:ee).pageY,ct=cr(li);let ii;(0,i.le)(kt)||(ii=cr(kt)),(0,i.le)(kt)?(0,i.le)(kt)&&(te-Ke>=0||ct.top<0)&&(ie=!0):ie=!0;let si=Dt+(Ke-hi);si=si>Ei?si:Ei;let Ri=0;(0,i.le)(kt)||(Ri=ii.top);const qi=(0,i.le)(kt)?0:kt.offsetHeight-kt.clientHeight;let Mi=ct.top-Ri-qi/2;if(Mi=Mi<0?0:Mi,ct.top>0&&Mi+si>Ui){if(ie=!1,li.classList.contains(Wt))return;return void(li.style.height=Ui-parseInt(Mi.toString(),10)+"px")}let es=0;if(ie){ct.top<0&&te+(ct.height+ct.top)>0&&(es=ct.top,si+es<=30&&(si=ct.height-(ct.height+ct.top)+30)),si+ct.top>=Ui&&(li.style.height=ct.height+(te-(ct.height+ct.top))+"px");const Gs=(0,i.le)(kt)?es:Mi;si>=Ei&&si+Gs<=Ui&&(li.style.height=si+"px")}}function gi(ee){let ie,te=!1;const xe="mouse"===Dn(ee.type)?ee.pageY:ee.touches[0].pageY,Ke=cr(li);(0,i.le)(kt)||(ie=cr(kt)),(!(0,i.le)(kt)&&Ke.top-ie.top>0||(0,i.le)(kt)&&xe>0)&&(te=!0);const ct=Dt-(xe-hi);if(te&&ct>=Ei&&ct<=Ui){let ii=0;(0,i.le)(kt)||(ii=ie.top);let si=di-ii+(xe-hi);si=si>0?si:1,li.style.height=ct+"px",li.style.top=si+"px"}}function je(ee){const te=document.documentElement.clientWidth;let xe,ie=!1;(0,i.le)(kt)||(xe=cr(kt));const Ke="mouse"===Dn(ee.type)?ee.pageX:ee.touches[0].pageX,ct=cr(li),ii=(0,i.le)(kt)?0:kt.offsetWidth-kt.clientWidth;let si=(0,i.le)(kt)?0:xe.left,Ri=(0,i.le)(kt)?0:xe.width;(0,i.le)(bi)&&((0,i.le)(kt)?bi=te:(bi=ct.left-si-ii/2+ct.width,bi+=Ri-ii-bi)),(!(0,i.le)(kt)&&Math.floor(ct.left-xe.left+ct.width+(xe.right-ct.right))-ii<=bs||(0,i.le)(kt)&&Ke>=0)&&(ie=!0);let qi=Gt-(Ke-ot);if(Ti&&(qi=qi>bi?bi:qi),ie&&qi>=As&&qi<=bs){let Mi=0;(0,i.le)(kt)||(Mi=xe.left);let es=Pt-Mi+(Ke-ot);es=es>0?es:1,qi!==ns&&ls&&(li.style.width=qi+"px"),Ti&&(li.style.left=es+"px",ls=1!==es)}ns=qi}function Re(ee){const te=document.documentElement.clientWidth;let xe,ie=!1;(0,i.le)(kt)||(xe=cr(kt));const ct=(ee.touches?ee.changedTouches[0]:ee).pageX,ii=cr(li);(!(0,i.le)(kt)&&(ii.left-xe.left+ii.width<=bs||ii.right-xe.left>=ii.width)||(0,i.le)(kt)&&te-ct>0)&&(ie=!0);const si=Gt+(ct-ot);let Ri=0;if((0,i.le)(kt)||(Ri=xe.left),ii.left-Ri+si>bs){if(ie=!1,li.classList.contains(Wt))return;li.style.width=bs-(ii.left-Ri)+"px"}ie&&si>=As&&si<=bs&&(li.style.width=si+"px")}function pi(){const ee=li.querySelectorAll("."+qt);for(let ie=0;ie<ee.length;ie++)(0,i.og)(ee[ie]);const te=li.querySelectorAll(".e-dialog-border-resize");if(!(0,i.le)(te))for(let ie=0;ie<te.length;ie++)(0,i.og)(te[ie])}var Fi=function(ee,te,ie,xe){var ii,Ke=arguments.length,ct=Ke<3?te:null===xe?xe=Object.getOwnPropertyDescriptor(te,ie):xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ct=Reflect.decorate(ee,te,ie,xe);else for(var si=ee.length-1;si>=0;si--)(ii=ee[si])&&(ct=(Ke<3?ii(ct):Ke>3?ii(te,ie,ct):ii(te,ie))||ct);return Ke>3&&ct&&Object.defineProperty(te,ie,ct),ct};class as extends i.rt{}Fi([(0,i.Z9)(!0)],as.prototype,"isFlat",void 0),Fi([(0,i.Z9)()],as.prototype,"buttonModel",void 0),Fi([(0,i.Z9)("Button")],as.prototype,"type",void 0),Fi([(0,i.ju)()],as.prototype,"click",void 0);class Es extends i.rt{}Fi([(0,i.Z9)("Fade")],Es.prototype,"effect",void 0),Fi([(0,i.Z9)(400)],Es.prototype,"duration",void 0),Fi([(0,i.Z9)(0)],Es.prototype,"delay",void 0);const Ns="e-dialog",bn="e-rtl",pn="e-dlg-header-content",ms="e-dlg-header",dn="e-footer-content",Cs="e-dlg-modal",Ln="e-icon-dlg-close",rs="e-dlg-target",cn="e-scroll-disabled",gr="e-device",tn="e-dlg-fullscreen",mr="e-dlg-closeicon-btn",wr="e-popup-open",ro="Information",Br="e-scroll-disabled",Jr="e-alert-dialog",Nr="e-confirm-dialog",Vr="e-dlg-resizable",Zn="e-restrict-left",_r="e-resize-viewport",Hr="user action";let os=class extends i.wA{constructor(te,ie){super(te,ie),this.dlgClosedBy=Hr}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=(0,i.Ac)(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=ie=>{this.dlgClosedBy="close icon",this.hide(ie)},this.dlgOverlayClickEventHandler=ie=>{this.dlgClosedBy="overlayClick",ie.preventFocus=!1,this.trigger("overlayClick",ie,xe=>{xe.preventFocus||this.focusContent(),this.dlgClosedBy=Hr})},this.l10n=new i.E7("dialog",{close:"Close"},this.locale),this.checkPositionData(),(0,i.le)(this.target)){const ie=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=ie}}isNumberValue(te){return/^[-+]?\d*\.?\d+$/.test(te)}checkPositionData(){if(!(0,i.le)(this.position)){if(!(0,i.le)(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){const ie=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=ie}if(!(0,i.le)(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){const ie=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=ie}}}getEle(te,ie){let xe;for(let Ke=0;Ke<te.length;Ke++)if(te[Ke].classList.contains(ie)){xe=te[Ke];break}return xe}getMinHeight(){let te="0px",ie="0px";(0,i.le)(this.element.querySelector("."+pn))||(te=getComputedStyle(this.headerContent).height);const xe=this.getEle(this.element.children,dn);(0,i.le)(xe)||(ie=getComputedStyle(xe).height);const Ke=parseInt(te.slice(0,te.indexOf("p")),10),ct=parseInt(ie.slice(0,ie.indexOf("p")),10);return function tt(ee){Ei=ee}(Ke+30+(isNaN(ct)?0:ct)),Ke+30+ct}onResizeStart(te,ie){return ie.trigger("resizeStart",te),te.cancel}onResizing(te,ie){ie.trigger("resizing",te)}onResizeComplete(te,ie){ie.trigger("resizeStop",te)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!(0,i.le)(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Vr);const te=getComputedStyle(this.element).minHeight,ie=getComputedStyle(this.element).minWidth;let xe="";for(let Ke=0;Ke<this.resizeHandles.length;Ke++){if("All"===this.resizeHandles[Ke]){xe="south north east west north-east north-west south-east south-west";break}{let ct="";switch(this.resizeHandles[Ke].toString()){case"SouthEast":ct="south-east";break;case"SouthWest":ct="south-west";break;case"NorthEast":ct="north-east";break;case"NorthWest":ct="north-west";break;default:ct=this.resizeHandles[Ke].toString()}xe+=ct.toLocaleLowerCase()+" "}}this.enableRtl&&"south-east"===xe.trim()?xe="south-west":this.enableRtl&&"south-west"===xe.trim()&&(xe="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Zn):this.isModal&&this.target===document.body&&this.element.classList.add(_r),function Ds(ee){wt=ee.resizeBegin,Ot=ee.resizing,Ai=ee.resizeComplete,li=Bn(ee.element),kt=Bn(ee.boundary);const te=ee.direction.split(" ");for(let ie=0;ie<te.length;ie++)if(At.indexOf(te[ie])>=0&&te[ie])on(te[ie]);else if(""!==te[ie].trim()){const xe=(0,i.az)("div",{className:"e-icons "+qt+" e-"+te[ie]});li.appendChild(xe)}Ei=ee.minHeight,As=ee.minWidth,bs=ee.maxWidth,Ui=ee.maxHeight,ee.proxy&&ee.proxy.element&&ee.proxy.element.classList.contains("e-dialog")?Kn(ee.proxy):Kn()}({element:this.element,direction:xe,minHeight:parseInt(te.slice(0,ie.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(ie.slice(0,ie.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else pi(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?Zn:_r),this.element.classList.remove(Vr)}getFocusElement(te){const xe=te.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:xe[xe.length-1]}}keyDown(te){if(9===te.keyCode&&this.isModal){let ct;(0,i.le)(this.btnObj)||(ct=this.btnObj[this.btnObj.length-1]),(0,i.le)(this.btnObj)&&!(0,i.le)(this.ftrTemplateContent)&&(ct=this.getFocusElement(this.ftrTemplateContent)),(0,i.le)(this.btnObj)&&(0,i.le)(this.ftrTemplateContent)&&!(0,i.le)(this.contentEle)&&(ct=this.getFocusElement(this.contentEle)),!(0,i.le)(ct)&&document.activeElement===ct.element&&!te.shiftKey&&(te.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&te.shiftKey&&(te.preventDefault(),(0,i.le)(ct)||ct.element.focus())}const ie=document.activeElement,xe=["input","textarea"].indexOf(ie.tagName.toLowerCase())>-1;let Ke=!1;if(xe||(Ke=ie.hasAttribute("contenteditable")&&"true"===ie.getAttribute("contenteditable")),27===te.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",document.querySelector(".e-popup-open:not(.e-dialog)")||this.hide(te)),13===te.keyCode&&!te.ctrlKey&&"textarea"!==ie.tagName.toLowerCase()&&xe&&!(0,i.le)(this.primaryButtonEle)||13===te.keyCode&&te.ctrlKey&&("textarea"===ie.tagName.toLowerCase()||Ke)&&!(0,i.le)(this.primaryButtonEle)){let ct;this.buttons.some((si,Ri)=>{ct=Ri;let qi=si.buttonModel;return!(0,i.le)(qi)&&!0===qi.isPrimary})&&"function"==typeof this.buttons[ct].click&&setTimeout(()=>{this.buttons[ct].click.call(this,te)})}}initialize(){(0,i.le)(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||(0,i.cn)([this.element],Ns),i.AR.isDevice&&(0,i.cn)([this.element],gr),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||(0,i.Y4)(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&(0,i.le)(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&(0,i.le)(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!(0,i.le)(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||(0,i.le)(this.footerTemplate)?(0,i.le)(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!(0,i.le)(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!(0,i.le)(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||((0,i.Y4)(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&(0,i.le)(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let te=0,ie=this.dlgContainer.children;te<ie.length;te++)ie[te].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=ie[te])}if(!0!==this.element.classList.contains(Jr)&&!0!==this.element.classList.contains(Nr)&&!(0,i.le)(this.element.parentElement)){const te=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),te.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}(0,i.le)(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new zt(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:te=>{const ie={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",ie,xe=>{xe.preventFocus||this.focusContent()})},close:te=>{this.isModal&&(0,i.cn)([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);const ie=document.activeElement;!(0,i.le)(ie)&&!(0,i.le)(ie.blur)&&ie.blur(),!(0,i.le)(this.storeActiveElement)&&!(0,i.le)(this.storeActiveElement.focus)&&this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||((0,i.cn)([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){const te=this.getMinHeight();if(this.targetEle.offsetHeight<te){const xe=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));(0,i.le)(xe)||(xe.style.bottom="-"+te.toString()+"px")}}setOverlayZindex(te){let ie;ie=(0,i.le)(te)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:te,this.dlgOverlay.style.zIndex=(ie-1).toString(),this.dlgContainer.style.zIndex=ie.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new i._l(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:ie=>{this.trigger("dragStart",ie,xe=>{(0,i.xr)()&&xe.bindEvents(ie.dragElement)})},dragStop:ie=>{this.isModal&&((0,i.le)(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",ie),this.element.classList.remove(Zn)},drag:ie=>{this.trigger("drag",ie)}}),(0,i.le)(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let ie=0;ie<this.buttons.length;ie++){const xe=(0,i.le)(this.buttons[ie].type)?"button":this.buttons[ie].type.toLowerCase(),Ke=this.createElement("button",{attrs:{type:xe}});this.buttonContent.push(Ke.outerHTML)}this.setFooterTemplate()}let te;for(let ie=0,xe=this.element.children;ie<xe.length;ie++)xe[ie].classList.contains(dn)&&(te=xe[ie].querySelectorAll("button"));for(let ie=0;ie<this.buttons.length;ie++)this.isBlazorServerRender()||(this.btnObj[ie]=new u.zx(this.buttons[ie].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+dn)),!(0,i.le)(this.ftrTemplateContent)&&te.length>0&&("function"==typeof this.buttons[ie].click&&i.bi.add(te[ie],"click",this.buttons[ie].click,this),"object"==typeof this.buttons[ie].click&&i.bi.add(te[ie],"click",this.buttonClickHandler.bind(this,ie),this)),!this.isBlazorServerRender()&&!(0,i.le)(this.ftrTemplateContent)&&(this.btnObj[ie].appendTo(this.ftrTemplateContent.children[ie]),this.buttons[ie].isFlat&&this.btnObj[ie].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}buttonClickHandler(te){this.trigger("buttons["+te+"].click",{})}setContent(){(0,i.Y4)(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!(0,i.le)(this.content)&&""!==this.content||!this.initialRender)&&("string"!=typeof this.content||(0,i.xr)()?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content"):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),(0,i.le)(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&i.AR.isIE&&""===this.element.style.width&&!(0,i.le)(this.width)&&(this.element.style.width=(0,i.Ac)(this.width)),this.setMaxHeight())}setTemplate(te,ie,xe){let Ke,ct,ii;ct=ie.classList.contains(ms)?this.element.id+"header":ie.classList.contains(dn)?this.element.id+"footerTemplate":this.element.id+"content",(0,i.le)(te.outerHTML)?"string"!=typeof te||(0,i.xr)()&&!this.isStringTemplate?(Ke=(0,i.MY)(te),ii=te):ie.innerHTML=this.sanitizeHelper(te):ie.appendChild(te);const si=[];if(!(0,i.le)(Ke)){const Ri=!((0,i.xr)()&&!this.isStringTemplate&&0===ii.indexOf("<div>Blazor"))||this.isStringTemplate;for(const qi of Ke({},this,xe,ct,Ri))si.push(qi);(0,i.R3)([].slice.call(si),ie)}}sanitizeHelper(te){if(this.enableHtmlSanitizer){const ie=i.pJ.beforeSanitize();(0,i.l7)(ie,ie,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",ie),ie.cancel&&!(0,i.le)(ie.helper)?te=ie.helper(te):ie.cancel||(te=i.pJ.serializeValue(ie,te))}return te}setMaxHeight(){if(!this.allowMaxHeight)return;const te=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!(0,i.le)(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=te,i.AR.isIE&&"auto"===this.height&&!(0,i.le)(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?(0,i.cn)([this.element],bn):(0,i.IV)([this.element],bn)),(0,i.le)(this.element.querySelector(".e-resize-handle"))||(pi(),this.setResize())}setTargetContent(){if((0,i.le)(this.content)||""===this.content){const te=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||te)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(ie=>{8!==ie.nodeType&&this.innerContentElement.appendChild(ie)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:ms}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),(0,i.Y4)(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:dn}),""===this.footerTemplate||(0,i.le)(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){(0,i.le)(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:pn}))}renderCloseIcon(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:mr,attrs:{type:"button"}}),this.closeIconBtnObj=new u.zx({cssClass:"e-flat",iconCss:Ln+" e-icons"}),this.closeIconTitle(),(0,i.le)(this.headerContent)?(this.createHeaderContent(),(0,i.Ce)([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):(0,i.Ce)([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))}closeIconTitle(){this.l10n.setLocale(this.locale);const te=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",te),this.closeIcon.setAttribute("aria-label",te)}setCSSClass(te){this.cssClass&&(0,i.cn)([this.element],this.cssClass.split(" ")),te&&(0,i.IV)([this.element],te.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove(wr),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),(0,i.cn)([this.element],Cs),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(te){let ie;for(let xe=0;xe<te.length;xe++){if(ie=te[xe],(ie.clientHeight>0||"a"===ie.tagName.toLowerCase()&&ie.hasAttribute("href"))&&ie.tabIndex>-1&&!ie.disabled&&!this.disableElement(ie,'[disabled],[aria-disabled="true"],[type="hidden"]'))return ie;ie=null}return ie}focusableElements(te){if(!(0,i.le)(te)){const xe=te.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(xe)}return null}getAutoFocusNode(te){let ie=te.querySelector("."+mr);const Ke=te.querySelectorAll("[autofocus]");let ct=this.getValidFocusNode(Ke);if((0,i.xr)()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),(0,i.le)(ct)){if(ct=this.focusableElements(this.contentEle),!(0,i.le)(ct))return ct;if(!(0,i.le)(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else ie=ct;return ie}disableElement(te,ie){const xe=te?te.matches||te.webkitMatchesSelector||te.msGetRegionContent:null;if(xe)for(;te;te=te.parentNode)if(te instanceof Element&&xe.call(te,ie))return te;return null}focusContent(){const te=this.getAutoFocusNode(this.element),ie=(0,i.le)(te)?this.element:te,xe=i.AR.userAgent;(xe.indexOf("MSIE ")>0||xe.indexOf("Trident/")>0)&&this.element.focus(),ie.focus(),this.bindEvent(this.element)}bindEvent(te){i.bi.add(te,"keydown",this.keyDown,this)}unBindEvent(te){i.bi.remove(te,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return(0,i.xr)()&&this.isServerRendered}getModuleName(){return"dialog"}onPropertyChanged(te,ie){if(this.element.classList.contains(Ns))for(const xe of Object.keys(te))switch(xe){case"content":(0,i.le)(this.content)||""===this.content?(0,i.le)(this.contentEle)||((0,i.og)(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),(0,i.le)(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||(0,i.le)(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),(0,i.og)(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||(0,i.le)(this.header)?this.headerEle&&((0,i.og)(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||(0,i.le)(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||(0,i.le)(this.footerTemplate)){if(!this.ftrTemplateContent)return;(0,i.og)(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||(0,i.le)(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Ln).length>0?this.showCloseIcon||""!==this.header&&!(0,i.le)(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():(0,i.og)(this.closeIcon):((0,i.og)(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":(0,i.V7)(this.element,{height:(0,i.Ac)(te.height)});break;case"width":(0,i.V7)(this.element,{width:(0,i.Ac)(te.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(ie.cssClass);break;case"buttons":{const Ke=this.buttons.length;!(0,i.le)(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&((0,i.og)(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let ct=0;ct<Ke;ct++)(0,i.le)(this.buttons[ct].buttonModel)||(this.footerTemplate="",this.setButton());break}case"allowDragging":this.allowDragging&&!(0,i.le)(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(te.target);break;case"position":if(this.checkPositionData(),this.isModal){const Ke=(0,i.le)(ie.position.X)?this.position.X:ie.position.X,ct=(0,i.le)(ie.position.Y)?this.position.Y:ie.position.Y;this.dlgContainer.classList.contains("e-dlg-"+Ke+"-"+ct)&&this.dlgContainer.classList.remove("e-dlg-"+Ke+"-"+ct)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(te){this.popupObj.relateTo=te,this.target=te,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)(0,i.le)(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",(0,i.le)(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for((0,i.IV)([this.element],Cs),(0,i.IV)([document.body],[rs,cn]),(0,i.og)(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&i.bi.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(te,ie){const xe=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=Kt(te),this.isProtectedOnChange=xe,ie&&(this.popupObj.zIndex=this.zIndex)}windowResizeHandler(){(function ti(ee){bs=ee})(this.targetEle.clientWidth),function ci(ee){Ui=ee}(this.targetEle.clientHeight),this.setMaxHeight()}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;const te=[bn,Cs,Vr,Zn,tn,gr],ie=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if((0,i.IV)([this.targetEle],[rs,cn]),!(0,i.le)(this.element)&&this.element.classList.contains(tn)&&(0,i.IV)([document.body],[rs,cn]),this.isModal&&(0,i.IV)([(0,i.le)(this.targetEle)?document.body:this.targetEle],cn),this.unWireEvents(),!(0,i.le)(this.btnObj))for(let xe=0;xe<this.btnObj.length;xe++)this.btnObj[xe].destroy();if((0,i.le)(this.dragObj)||this.dragObj.destroy(),!(0,i.le)(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),(0,i.IV)([this.element],te),!(0,i.le)(this.cssClass)&&""!==this.cssClass&&(0,i.IV)([this.element],this.cssClass.split(" ")),!(0,i.le)(this.refElement)&&!(0,i.le)(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),(0,i.og)(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&((0,i.og)(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),(0,i.og)(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!(0,i.le)(this.element.children))for(let xe=0;xe<=this.element.children.length;xe++)xe-=xe,(0,i.og)(this.element.children[xe]);for(let xe=0;xe<ie.length;xe++)this.element.removeAttribute(ie[xe]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy(),this.isReact&&this.clearTemplate()}wireWindowResizeEvent(){window.addEventListener("resize",this.windowResizeHandler.bind(this))}unWireWindowResizeEvent(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&i.bi.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&i.bi.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&i.bi.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&i.bi.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!(0,i.le)(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let te=0;te<this.buttons.length;te++)"function"==typeof this.buttons[te].click&&i.bi.remove(this.ftrTemplateContent.children[te],"click",this.buttons[te].click)}refreshPosition(){this.popupObj.refreshPosition()}getDimension(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}show(te){if(this.element.classList.contains(Ns)){if(!this.element.classList.contains(wr)||!(0,i.le)(te)){(0,i.le)(te)||this.fullScreen(te);const ie=(0,i.xr)()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",ie,xe=>{if(!xe.cancel){this.element.style.maxHeight!==ie.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=ie.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!(0,i.le)(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",(0,i.IV)([this.dlgOverlay],"e-fade"),(0,i.le)(this.targetEle)?(0,i.cn)([document.body],[rs,cn]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",(0,i.cn)([this.targetEle],[rs,cn])));const Ke={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},ct=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(ct,!0),(0,i.V7)(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(Ke),this.dialogOpen=!0;const ii=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=ii}})}this.isReact&&this.renderReactTemplates()}}hide(te){if(this.element.classList.contains(Ns)&&this.preventVisibility){const ie=(0,i.xr)()?{cancel:!1,isInteracted:!!te,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:te}:{cancel:!1,isInteracted:!!te,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:te,closedBy:this.dlgClosedBy};this.closeArgs=ie,this.trigger("beforeClose",ie,xe=>{if(!xe.cancel){this.isModal&&((0,i.le)(this.targetEle)||(0,i.IV)([this.targetEle],[rs,cn])),document.body.classList.contains(rs)&&document.body.classList.contains(cn)&&(0,i.IV)([document.body],[rs,cn]);const Ke={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(Ke),this.dialogOpen=!1;const ct=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=ct}this.dlgClosedBy=Hr})}}fullScreen(te){if(te){(0,i.cn)([this.element],tn);const Ke=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=(0,i.le)(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=Ke,(0,i.cn)([document.body],[rs,cn]),this.allowDragging&&!(0,i.le)(this.dragObj)&&this.dragObj.destroy()}else(0,i.IV)([this.element],tn),(0,i.IV)([document.body],[rs,cn]),this.allowDragging&&!(0,i.le)(this.headerContent)&&this.setAllowDragging();return te}getButtons(te){return(0,i.le)(te)?this.btnObj:this.btnObj[te]}};var Io;Fi([(0,i.Z9)("")],os.prototype,"content",void 0),Fi([(0,i.Z9)(!0)],os.prototype,"enableHtmlSanitizer",void 0),Fi([(0,i.Z9)(!1)],os.prototype,"showCloseIcon",void 0),Fi([(0,i.Z9)(!1)],os.prototype,"isModal",void 0),Fi([(0,i.Z9)("")],os.prototype,"header",void 0),Fi([(0,i.Z9)(!0)],os.prototype,"visible",void 0),Fi([(0,i.Z9)(!1)],os.prototype,"enableResize",void 0),Fi([(0,i.Z9)(["South-East"])],os.prototype,"resizeHandles",void 0),Fi([(0,i.Z9)("auto")],os.prototype,"height",void 0),Fi([(0,i.Z9)("")],os.prototype,"minHeight",void 0),Fi([(0,i.Z9)("100%")],os.prototype,"width",void 0),Fi([(0,i.Z9)("")],os.prototype,"cssClass",void 0),Fi([(0,i.Z9)(1e3)],os.prototype,"zIndex",void 0),Fi([(0,i.Z9)(null)],os.prototype,"target",void 0),Fi([(0,i.Z9)("")],os.prototype,"footerTemplate",void 0),Fi([(0,i.Z9)(!1)],os.prototype,"allowDragging",void 0),Fi([(0,i.FE)([{}],as)],os.prototype,"buttons",void 0),Fi([(0,i.Z9)(!0)],os.prototype,"closeOnEscape",void 0),Fi([(0,i.Zz)({},Es)],os.prototype,"animationSettings",void 0),Fi([(0,i.Zz)({X:"center",Y:"center"},$i)],os.prototype,"position",void 0),Fi([(0,i.ju)()],os.prototype,"created",void 0),Fi([(0,i.ju)()],os.prototype,"open",void 0),Fi([(0,i.ju)()],os.prototype,"beforeSanitizeHtml",void 0),Fi([(0,i.ju)()],os.prototype,"beforeOpen",void 0),Fi([(0,i.ju)()],os.prototype,"close",void 0),Fi([(0,i.ju)()],os.prototype,"beforeClose",void 0),Fi([(0,i.ju)()],os.prototype,"dragStart",void 0),Fi([(0,i.ju)()],os.prototype,"dragStop",void 0),Fi([(0,i.ju)()],os.prototype,"drag",void 0),Fi([(0,i.ju)()],os.prototype,"overlayClick",void 0),Fi([(0,i.ju)()],os.prototype,"resizeStart",void 0),Fi([(0,i.ju)()],os.prototype,"resizing",void 0),Fi([(0,i.ju)()],os.prototype,"resizeStop",void 0),Fi([(0,i.ju)()],os.prototype,"destroyed",void 0),os=Fi([i.Zl],os),function(ee){function xe(Mi,es){const Gs=new os(Mi);return Gs.appendTo(es),Gs}function ii(Mi,es){return Mi.header=(0,i.le)(es.title)?ro:es.title,Mi.content=(0,i.le)(es.content)?"":es.content,Mi.isModal=!!(0,i.le)(es.isModal)||es.isModal,Mi.showCloseIcon=!(0,i.le)(es.showCloseIcon)&&es.showCloseIcon,Mi.allowDragging=!(0,i.le)(es.isDraggable)&&es.isDraggable,Mi.closeOnEscape=!(0,i.le)(es.closeOnEscape)&&es.closeOnEscape,Mi.position=(0,i.le)(es.position)?{X:"center",Y:"top"}:es.position,Mi.animationSettings=(0,i.le)(es.animationSettings)?{effect:"Fade",duration:400,delay:0}:es.animationSettings,Mi.cssClass=(0,i.le)(es.cssClass)?"":es.cssClass,Mi.zIndex=(0,i.le)(es.zIndex)?1e3:es.zIndex,Mi.open=(0,i.le)(es.open)?null:es.open,Mi}function qi(Mi,es,Gs){const an=Gs;return(0,i.le)(es.text)||(an.buttonModel.content=es.text),(0,i.le)(es.icon)||(an.buttonModel.iconCss=es.icon),(0,i.le)(es.cssClass)||(an.buttonModel.cssClass=es.cssClass),(0,i.le)(es.click)||(an.click=es.click),an}ee.alert=function te(Mi){const es=(0,i.az)("div",{className:Jr});let Gs;return document.body.appendChild(es),Gs=xe("string"==typeof Mi?{content:Mi,position:{X:"center",Y:"top"},isModal:!0,header:ro,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function Ke(Mi){let es={buttons:[]};return es=ii(es,Mi),es=function si(Mi,es){const Gs=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return(0,i.le)(es.okButton)?Mi.buttons=Gs:Mi.buttons[0]=qi(0,es.okButton,Gs[0]),Mi}(es,Mi),es}(Mi),es),Gs.close=()=>{Mi&&Mi.close&&Mi.close.apply(Gs),Gs.destroy(),Gs.element.classList.contains("e-dlg-modal")?(Gs.element.parentElement.remove(),Gs.target.classList.remove(Br)):Gs.element.remove()},Gs},ee.confirm=function ie(Mi){const es=(0,i.az)("div",{className:Nr});let Gs;return document.body.appendChild(es),Gs=xe("string"==typeof Mi?{position:{X:"center",Y:"top"},content:Mi,isModal:!0,header:ro,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function ct(Mi){let es={buttons:[]};return es=ii(es,Mi),es=function Ri(Mi,es){const Gs={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},an={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return Mi.buttons[0]=(0,i.le)(es.okButton)?Gs:qi(0,es.okButton,Gs),Mi.buttons[1]=(0,i.le)(es.cancelButton)?an:qi(0,es.cancelButton,an),Mi}(es,Mi),es}(Mi),es),Gs.close=()=>{Mi&&Mi.close&&Mi.close.apply(Gs),Gs.destroy(),Gs.element.classList.contains("e-dlg-modal")?(Gs.element.parentElement.remove(),Gs.target.classList.remove(Br)):Gs.element.remove()},Gs}}(Io||(Io={}));var Xn=function(ee,te,ie,xe){var ii,Ke=arguments.length,ct=Ke<3?te:null===xe?xe=Object.getOwnPropertyDescriptor(te,ie):xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ct=Reflect.decorate(ee,te,ie,xe);else for(var si=ee.length-1;si>=0;si--)(ii=ee[si])&&(ct=(Ke<3?ii(ct):Ke>3?ii(te,ie,ct):ii(te,ie))||ct);return Ke>3&&ct&&Object.defineProperty(te,ie,ct),ct};const Ro="e-tooltip",ol="e-tooltip-wrap",Yr="e-tip-content",Bs="e-arrow-tip",uo="e-arrow-tip-outer",$s="e-arrow-tip-inner",mn="e-tip-bottom",tr="e-tip-top",vr="e-tip-left",Qr="e-tip-right",zs="e-popup",ur="e-popup-open",ir="e-popup-close",Ir="e-tooltip-popup-container";class Pn extends i.rt{}Xn([(0,i.Z9)({effect:"FadeIn",duration:150,delay:0})],Pn.prototype,"open",void 0),Xn([(0,i.Z9)({effect:"FadeOut",duration:150,delay:0})],Pn.prototype,"close",void 0);let ks=class extends i.wA{constructor(te,ie){super(te,ie),this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0}initialize(){this.formatPosition(),(0,i.cn)([this.element],Ro)}formatPosition(){0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?[this.tooltipPositionY,this.tooltipPositionX]=this.position.split(/(?=[A-Z])/):[this.tooltipPositionX,this.tooltipPositionY]=this.position.split(/(?=[A-Z])/)}renderArrow(){this.setTipClass(this.position);const te=this.createElement("div",{className:Bs+" "+this.tipClass});te.appendChild(this.createElement("div",{className:uo+" "+this.tipClass})),te.appendChild(this.createElement("div",{className:$s+" "+this.tipClass})),this.tooltipEle.appendChild(te)}setTipClass(te){this.tipClass=0===te.indexOf("Right")?vr:0===te.indexOf("Bottom")?tr:0===te.indexOf("Left")?Qr:mn}renderPopup(te){const ie=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(te);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new zt(this.tooltipEle,{height:this.height,width:this.width,position:{X:ie.left,Y:ie.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}getTooltipPosition(te){this.tooltipEle.style.display="block";const ie=Si(te,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),xe=this.calculateTooltipOffset(this.position),Ke=this.calculateElementPosition(ie,xe),si=this.collisionFlipFit(te,Ke[0],Ke[1]);return this.tooltipEle.style.display="",si}windowResize(){this.reposition(this.findTarget())}reposition(te){if(this.popupObj&&te){const ie=this.getTooltipPosition(te);this.popupObj.position={X:ie.left,Y:ie.top},this.popupObj.dataBind()}}openPopupHandler(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}closePopupHandler(){this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}calculateTooltipOffset(te){const ie={top:0,left:0},xe=this.tooltipEle.offsetWidth,Ke=this.tooltipEle.offsetHeight,ct=(0,i.Ys)("."+Bs,this.tooltipEle),ii=ct?ct.offsetWidth:0,si=ct?ct.offsetHeight:0;let Ri=this.showTipPointer?0:8;const qi=si/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),Mi=ii/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(Ri+=2),te){case"RightTop":ie.left+=ii+Ri,ie.top-=Ke-qi;break;case"RightCenter":ie.left+=ii+Ri,ie.top-=Ke/2;break;case"RightBottom":ie.left+=ii+Ri,ie.top-=qi;break;case"BottomRight":ie.top+=si+Ri,ie.left-=Mi;break;case"BottomCenter":ie.top+=si+Ri,ie.left-=xe/2;break;case"BottomLeft":ie.top+=si+Ri,ie.left-=xe-Mi;break;case"LeftBottom":ie.left-=ii+xe+Ri,ie.top-=qi;break;case"LeftCenter":ie.left-=ii+xe+Ri,ie.top-=Ke/2;break;case"LeftTop":ie.left-=ii+xe+Ri,ie.top-=Ke-qi;break;case"TopLeft":ie.top-=Ke+si+Ri,ie.left-=xe-Mi;break;case"TopRight":ie.top-=Ke+si+Ri,ie.left-=Mi;break;default:ie.top-=Ke+si+Ri,ie.left-=xe/2}return ie.left+=this.offsetX,ie.top+=this.offsetY,ie}updateTipPosition(te){const ie=(0,i.td)("."+Bs+",."+uo+",."+$s,this.tooltipEle);(0,i.IV)(ie,[mn,tr,vr,Qr]),this.setTipClass(te),(0,i.cn)(ie,this.tipClass)}adjustArrow(te,ie,xe,Ke){if(!1===this.showTipPointer)return;let ct,ii;this.updateTipPosition(ie),this.tooltipEle.style.display="block";const si=this.tooltipEle.clientWidth,Ri=this.tooltipEle.clientHeight,qi=(0,i.Ys)("."+Bs,this.tooltipEle),Mi=(0,i.Ys)("."+$s,this.tooltipEle),es=qi.offsetWidth,Gs=qi.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===mn||this.tipClass===tr){if(this.tipClass===mn?(ii="99.9%",Mi.style.top="-"+(Gs-2)+"px"):(ii=-(Gs-1)+"px",Mi.style.top="-"+(Gs-6)+"px"),te){const an="Center"!==xe||si>te.offsetWidth||this.mouseTrail;ct=an&&"Left"===xe||!an&&"End"===this.tipPointerPosition?si-es-2+"px":an&&"Right"===xe||!an&&"Start"===this.tipPointerPosition?"2px":si/2-es/2+"px"}}else{this.tipClass===Qr?(ct="99.9%",Mi.style.left="-"+(es-2)+"px"):(ct=-(es-1)+"px",Mi.style.left=es-2-es+"px");const an="Center"!==Ke||Ri>te.offsetHeight||this.mouseTrail;ii=an&&"Top"===Ke||!an&&"End"===this.tipPointerPosition?Ri-Gs-2+"px":an&&"Bottom"===Ke||!an&&"Start"===this.tipPointerPosition?"2px":Ri/2-Gs/2+"px"}qi.style.top=ii,qi.style.left=ct}renderContent(te){const ie=(0,i.Ys)("."+Yr,this.tooltipEle);if(this.cssClass&&(0,i.cn)([this.tooltipEle],this.cssClass.split(" ")),te&&!(0,i.le)(te.getAttribute("title"))&&(te.setAttribute("data-content",te.getAttribute("title")),te.removeAttribute("title")),(0,i.le)(this.content))te&&!(0,i.le)(te.getAttribute("data-content"))&&(ie.innerHTML=te.getAttribute("data-content"));else if(ie.innerHTML="",this.content instanceof HTMLElement)ie.appendChild(this.content);else if("string"==typeof this.content)this.enableHtmlSanitizer&&this.setProperties({content:i.pJ.sanitize(this.content)},!0),ie[this.enableHtmlParse?"innerHTML":"textContent"]=this.content;else{const Ke=(0,i.MY)(this.content)({},this,"content",this.element.id+"content",void 0,void 0,ie);Ke&&(0,i.R3)(Ke,ie),this.renderReactTemplates()}}renderCloseIcon(){if(!this.isSticky)return;const te=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(te),i.bi.add(te,i.AR.touchStartEvent,this.onStickyClose,this)}addDescribedBy(te,ie){const xe=(te.getAttribute("aria-describedby")||"").split(/\s+/);xe.indexOf(ie)<0&&xe.push(ie),(0,i.Y4)(te,{"aria-describedby":xe.join(" ").trim(),"data-tooltip-id":ie})}removeDescribedBy(te){const ie=te.getAttribute("data-tooltip-id"),xe=(te.getAttribute("aria-describedby")||"").split(/\s+/),Ke=xe.indexOf(ie);-1!==Ke&&xe.splice(Ke,1),te.removeAttribute("data-tooltip-id");const ct=xe.join(" ").trim();ct?te.setAttribute("aria-describedby",ct):te.removeAttribute("aria-describedby")}tapHoldHandler(te){clearTimeout(this.autoCloseTimer),this.targetHover(te.originalEvent)}touchEndHandler(te){this.isSticky||(this.autoCloseTimer=setTimeout(()=>{this.close()},1500))}targetClick(te){let ie;ie=this.target?(0,i.oq)(te.target,this.target):this.element,!(0,i.le)(ie)&&(null===ie.getAttribute("data-tooltip-id")?this.targetHover(te):this.isSticky||this.hideTooltip(this.animation.close,te,ie))}targetHover(te){let ie;if(ie=this.target?(0,i.oq)(te.target,this.target):this.element,(0,i.le)(ie)||null!==ie.getAttribute("data-tooltip-id")&&0===this.closeDelay)return;const xe=[].slice.call((0,i.td)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));for(const Ke of xe)this.restoreElement(Ke);this.showTooltip(ie,this.animation.open,te)}mouseMoveBeforeOpen(te){this.mouseMoveEvent=te}mouseMoveBeforeRemove(){this.mouseMoveTarget&&i.bi.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)}showTooltip(te,ie,xe){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=te,i.bi.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:xe?xe.type:null,cancel:!1,target:te,event:xe||null,element:this.tooltipEle,isInteracted:!(0,i.le)(xe)},this.trigger("beforeRender",this.tooltipEventArgs,(ct=>{this.beforeRenderCallback(ct,te,xe,ie)}).bind(this))}beforeRenderCallback(te,ie,xe,Ke){te.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,(0,i.le)(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?(0,i.QI)(this.element.getAttribute("id")):(0,i.QI)("tooltip"),this.tooltipEle=this.createElement("div",{className:ol+" "+zs+" e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+(0,i.Ac)(this.width)+";height:"+(0,i.Ac)(this.height)+";position:absolute;"}),this.tooltipBeforeRender(ie,this),this.tooltipAfterRender(ie,xe,Ke,this)):ie&&(this.adjustArrow(ie,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(ie,this.ctrlId+"_content"),this.renderContent(ie),i.fw.stop(this.tooltipEle),this.reposition(ie),this.tooltipAfterRender(ie,xe,Ke,this)))}appendContainer(te){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=(0,i.Ys)(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||(0,i.cn)([this.containerElement],Ir),this.containerElement.appendChild(te.tooltipEle)}tooltipBeforeRender(te,ie){te&&(i.AR.isDevice&&(0,i.cn)([ie.tooltipEle],"e-bigger"),"auto"!==ie.width&&(ie.tooltipEle.style.maxWidth=(0,i.Ac)(ie.width)),ie.tooltipEle.appendChild(ie.createElement("div",{className:Yr})),this.appendContainer(ie),(0,i.IV)([ie.tooltipEle],"e-hidden"),ie.addDescribedBy(te,ie.ctrlId+"_content"),ie.renderContent(te),(0,i.cn)([ie.tooltipEle],ur),ie.showTipPointer&&ie.renderArrow(),ie.renderCloseIcon(),ie.renderPopup(te),ie.adjustArrow(te,ie.position,ie.tooltipPositionX,ie.tooltipPositionY),i.fw.stop(ie.tooltipEle),ie.reposition(te))}tooltipAfterRender(te,ie,xe,Ke){if(te){(0,i.IV)([Ke.tooltipEle],ur),(0,i.cn)([Ke.tooltipEle],ir),Ke.tooltipEventArgs={type:ie?ie.type:null,cancel:!1,target:te,event:ie||null,element:Ke.tooltipEle,isInteracted:!(0,i.le)(ie)},Ke.needTemplateReposition()&&!Ke.mouseTrail&&(Ke.tooltipEle.style.display="none");const ct=ii=>{Ke.beforeOpenCallback(ii,te,xe,ie)};Ke.trigger("beforeOpen",Ke.tooltipEventArgs,ct.bind(Ke))}}beforeOpenCallback(te,ie,xe,Ke){if(te.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(ie);else{let ct={name:xe.effect,duration:xe.duration,delay:xe.delay,timingFunction:"easeOut"};"None"===xe.effect&&(ct=void 0),this.openDelay>0?this.showTimer=setTimeout(()=>{this.mouseTrail&&i.bi.add(ie,"mousemove touchstart mouseenter",this.onMouseMove,this),this.popupObj&&(this.popupObj.show(ct,ie),this.mouseMoveEvent&&this.mouseTrail&&this.onMouseMove(this.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(ct,ie)}Ke&&this.wireMouseEvents(Ke,ie)}needTemplateReposition(){return!(0,i.le)(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef}checkCollision(te,ie,xe){const Ke={left:ie,top:xe,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},ct=Ne(this.tooltipEle,this.checkCollideTarget(),ie,xe);return ct.length>0&&(Ke.horizontal=ct.indexOf("left")>=0?"Right":ct.indexOf("right")>=0?"Left":this.tooltipPositionX,Ke.vertical=ct.indexOf("top")>=0?"Bottom":ct.indexOf("bottom")>=0?"Top":this.tooltipPositionY),Ke}calculateElementPosition(te,ie){return[this.isBodyContainer?te.left+ie.left:te.left-this.containerElement.offsetLeft+ie.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?te.top+ie.top:te.top-this.containerElement.offsetTop+ie.top+window.pageYOffset+this.containerElement.scrollTop]}collisionFlipFit(te,ie,xe){const Ke=this.checkCollision(te,ie,xe);let ct=Ke.position;this.tooltipPositionY!==Ke.vertical&&(ct=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?Ke.vertical+this.tooltipPositionX:this.tooltipPositionX+Ke.vertical),this.tooltipPositionX!==Ke.horizontal&&(0===ct.indexOf("Left")&&(Ke.vertical="LeftTop"===ct||"LeftCenter"===ct?"Top":"Bottom",ct=Ke.vertical+"Left"),0===ct.indexOf("Right")&&(Ke.vertical="RightTop"===ct||"RightCenter"===ct?"Top":"Bottom",ct=Ke.vertical+"Right"),Ke.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:te,event:null,element:this.tooltipEle,collidedPosition:ct},this.trigger("beforeCollision",this.tooltipEventArgs);const ii=Ke.vertical,si=Ke.horizontal;if(Ke.position!==ct){const Mi=Si(te,si,ii,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(te,ct,si,ii);const es=this.calculateTooltipOffset(ct);es.top-=this.getOffSetPosition("TopBottom",ct,this.offsetY),es.left-=this.getOffSetPosition("RightLeft",ct,this.offsetX),Ke.position=ct;const Gs=this.calculateElementPosition(Mi,es);Ke.left=Gs[0],Ke.top=Gs[1]}else this.adjustArrow(te,ct,si,ii);const Ri={left:Ke.left,top:Ke.top},qi=this.isBodyContainer?ve(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},Ri).left:Ri.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===ct.indexOf("Bottom")||0===ct.indexOf("Top"))){const Mi=(0,i.Ys)("."+Bs,this.tooltipEle);let es=parseInt(Mi.style.left,10)-(qi-Ke.left);es<0?es=0:es+Mi.offsetWidth>this.tooltipEle.clientWidth&&(es=this.tooltipEle.clientWidth-Mi.offsetWidth),Mi.style.left=es.toString()+"px"}return this.tooltipEle.style.display="",Ri.left=qi,Ri}getOffSetPosition(te,ie,xe){return-1!==te.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==te.indexOf(ie.split(/(?=[A-Z])/)[0])?2*xe:0}checkCollideTarget(){return!this.windowCollision&&this.target?this.element:null}hideTooltip(te,ie,xe){this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.closeDelay&&this.tooltipEle&&this.isTooltipOpen||this.tooltipHide(te,ie,xe)},this.closeDelay)):this.tooltipHide(te,ie,xe)}tooltipHide(te,ie,xe){let Ke;Ke=ie?this.target?xe||ie.target:this.element:(0,i.Ys)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:ie?ie.type:null,cancel:!1,target:Ke,event:ie||null,element:this.tooltipEle,isInteracted:!(0,i.le)(ie)},this.trigger("beforeClose",this.tooltipEventArgs,ct=>{ct.cancel?this.isHidden=!1:(this.mouseMoveBeforeRemove(),this.popupHide(te,Ke))})}popupHide(te,ie){ie&&this.restoreElement(ie),this.isHidden=!0;let xe={name:te.effect,duration:te.duration,delay:te.delay,timingFunction:"easeIn"};"None"===te.effect&&(xe=void 0),this.popupObj&&this.popupObj.hide(xe)}restoreElement(te){this.unwireMouseEvents(te),(0,i.le)(te.getAttribute("data-content"))||(te.setAttribute("title",te.getAttribute("data-content")),te.removeAttribute("data-content")),this.removeDescribedBy(te)}clear(){this.tooltipEle&&((0,i.IV)([this.tooltipEle],ir),(0,i.cn)([this.tooltipEle],ur)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&(0,i.Od)(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}tooltipHover(te){this.tooltipEle&&(this.isTooltipOpen=!0)}tooltipMouseOut(te){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,te,this.findTarget())}onMouseOut(te){const ie=te.relatedTarget;if(ie&&!this.mouseTrail){const xe=(0,i.oq)(ie,`.${ol}.e-lib.${zs}`);xe?i.bi.add(xe,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,te,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,te,this.findTarget()),this.clear()}tooltipElementMouseOut(te){this.hideTooltip(this.animation.close,te,this.findTarget()),i.bi.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}onStickyClose(te){this.close()}onMouseMove(te){let ie=0,xe=0;te.type.indexOf("touch")>-1?(te.preventDefault(),ie=te.touches[0].pageX,xe=te.touches[0].pageY):(ie=te.pageX,xe=te.pageY),i.fw.stop(this.tooltipEle),(0,i.IV)([this.tooltipEle],ir),(0,i.cn)([this.tooltipEle],ur),this.adjustArrow(te.target,this.position,this.tooltipPositionX,this.tooltipPositionY);const Ke=this.calculateTooltipOffset(this.position),si=this.checkCollision(te.target,ie+Ke.left+this.offsetX,xe+Ke.top+this.offsetY);if(this.tooltipPositionX!==si.horizontal||this.tooltipPositionY!==si.vertical){const Ri=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?si.vertical+si.horizontal:si.horizontal+si.vertical;si.position=Ri,this.adjustArrow(te.target,si.position,si.horizontal,si.vertical);const qi=this.calculateTooltipOffset(si.position);si.left=ie+qi.left-this.offsetX,si.top=xe+qi.top-this.offsetY}this.tooltipEle.style.left=si.left+"px",this.tooltipEle.style.top=si.top+"px"}keyDown(te){this.tooltipEle&&27===te.keyCode&&this.close()}touchEnd(te){this.tooltipEle&&null===(0,i.oq)(te.target,"."+Ro)&&!this.isSticky&&this.close()}scrollHandler(te){this.tooltipEle&&((0,i.oq)(te.target,`.${ol}.e-lib.${zs}`)||this.close())}render(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}preRender(){this.tipClass=mn,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}wireEvents(te){const ie=this.getTriggerList(te);for(const xe of ie){if("Custom"===xe)return;"Focus"===xe&&this.wireFocusEvents(),"Click"===xe&&i.bi.add(this.element,i.AR.touchStartEvent,this.targetClick,this),"Hover"===xe&&(i.AR.isDevice?(this.touchModule=new i.Xh(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),i.bi.add(this.element,i.AR.touchEndEvent,this.touchEndHandler,this)):i.bi.add(this.element,"mouseover",this.targetHover,this))}i.bi.add(document,"touchend",this.touchEnd,this),i.bi.add(document,"scroll wheel",this.scrollHandler,this),i.bi.add(window,"resize",this.windowResize,this),i.bi.add(document,"keydown",this.keyDown,this)}getTriggerList(te){return"Auto"===te&&(te=i.AR.isDevice?"Hover":"Hover Focus"),te.split(" ")}wireFocusEvents(){if((0,i.le)(this.target))i.bi.add(this.element,"focus",this.targetHover,this);else{const te=[].slice.call((0,i.td)(this.target,this.element));for(const ie of te)i.bi.add(ie,"focus",this.targetHover,this)}}wireMouseEvents(te,ie){this.tooltipEle&&(this.isSticky||("focus"===te.type&&i.bi.add(ie,"blur",this.onMouseOut,this),"mouseover"===te.type&&i.bi.add(ie,"mouseleave",this.onMouseOut,this),this.closeDelay&&(i.bi.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),i.bi.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&i.bi.add(ie,"mousemove touchstart mouseenter",this.onMouseMove,this))}unwireEvents(te){const ie=this.getTriggerList(te);for(const xe of ie){if("Custom"===xe)return;"Focus"===xe&&this.unwireFocusEvents(),"Click"===xe&&i.bi.remove(this.element,i.AR.touchStartEvent,this.targetClick),"Hover"===xe&&(i.AR.isDevice?(this.touchModule&&this.touchModule.destroy(),i.bi.remove(this.element,i.AR.touchEndEvent,this.touchEndHandler)):i.bi.remove(this.element,"mouseover",this.targetHover))}i.bi.remove(document,"touchend",this.touchEnd),i.bi.remove(document,"scroll wheel",this.scrollHandler),i.bi.remove(window,"resize",this.windowResize),i.bi.remove(document,"keydown",this.keyDown)}unwireFocusEvents(){if((0,i.le)(this.target))i.bi.remove(this.element,"focus",this.targetHover);else{const te=[].slice.call((0,i.td)(this.target,this.element));for(const ie of te)i.bi.remove(ie,"focus",this.targetHover)}}unwireMouseEvents(te){if(!this.isSticky){const ie=this.getTriggerList(this.opensOn);for(const xe of ie)"Focus"===xe&&i.bi.remove(te,"blur",this.onMouseOut),"Hover"===xe&&!i.AR.isDevice&&i.bi.remove(te,"mouseleave",this.onMouseOut);this.closeDelay&&(i.bi.remove(te,"mouseenter",this.tooltipHover),i.bi.remove(te,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&i.bi.remove(te,"mousemove touchstart mouseenter",this.onMouseMove)}findTarget(){return(0,i.Ys)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)}getModuleName(){return"tooltip"}getPersistData(){return this.addOnPersist([])}onPropertyChanged(te,ie){const xe=this.findTarget();for(const Ke of Object.keys(te))switch(Ke){case"width":this.tooltipEle&&xe&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=(0,i.Ac)(te.width),this.reposition(xe));break;case"height":this.tooltipEle&&xe&&(this.tooltipEle.style.height=(0,i.Ac)(te.height),this.reposition(xe));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(ie.opensOn),this.wireEvents(te.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&xe){const ct=(0,i.Ys)("."+$s,this.tooltipEle);ct.style.top=ct.style.left=null,this.reposition(xe)}break;case"tipPointerPosition":this.tooltipEle&&xe&&this.reposition(xe);break;case"offsetX":if(this.tooltipEle){const ct=te.offsetX-ie.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+ct).toString()+"px"}break;case"offsetY":if(this.tooltipEle){const ct=te.offsetY-ie.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+ct).toString()+"px"}break;case"cssClass":this.tooltipEle&&(ie.cssClass&&(0,i.IV)([this.tooltipEle],ie.cssClass.split(" ")),te.cssClass&&(0,i.cn)([this.tooltipEle],te.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?(0,i.cn)([this.tooltipEle],"e-rtl"):(0,i.IV)([this.tooltipEle],"e-rtl"));break;case"container":(0,i.le)(this.containerElement)||(0,i.IV)([this.containerElement],Ir),this.container=te.container,this.tooltipEle&&xe&&(this.appendContainer(this),this.reposition(xe))}}open(te,ie){(0,i.le)(ie)&&(ie=this.animation.open),(0,i.le)(te)&&(te=this.element),"none"!==te.style.display&&this.showTooltip(te,ie)}close(te){te||(te=this.animation.close),this.hideTooltip(te)}refresh(te){this.tooltipEle&&this.renderContent(te),this.popupObj&&te&&this.reposition(te)}destroy(){super.destroy(),this.tooltipEle&&(0,i.Od)(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),(0,i.IV)([this.element],Ro),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}};Xn([(0,i.Z9)("auto")],ks.prototype,"width",void 0),Xn([(0,i.Z9)("auto")],ks.prototype,"height",void 0),Xn([(0,i.Z9)()],ks.prototype,"content",void 0),Xn([(0,i.Z9)("body")],ks.prototype,"container",void 0),Xn([(0,i.Z9)()],ks.prototype,"target",void 0),Xn([(0,i.Z9)("TopCenter")],ks.prototype,"position",void 0),Xn([(0,i.Z9)(0)],ks.prototype,"offsetX",void 0),Xn([(0,i.Z9)(0)],ks.prototype,"offsetY",void 0),Xn([(0,i.Z9)(!0)],ks.prototype,"showTipPointer",void 0),Xn([(0,i.Z9)(!0)],ks.prototype,"enableHtmlParse",void 0),Xn([(0,i.Z9)(!1)],ks.prototype,"windowCollision",void 0),Xn([(0,i.Z9)("Auto")],ks.prototype,"tipPointerPosition",void 0),Xn([(0,i.Z9)("Auto")],ks.prototype,"opensOn",void 0),Xn([(0,i.Z9)(!1)],ks.prototype,"mouseTrail",void 0),Xn([(0,i.Z9)(!1)],ks.prototype,"isSticky",void 0),Xn([(0,i.Zz)({},Pn)],ks.prototype,"animation",void 0),Xn([(0,i.Z9)(0)],ks.prototype,"openDelay",void 0),Xn([(0,i.Z9)(0)],ks.prototype,"closeDelay",void 0),Xn([(0,i.Z9)()],ks.prototype,"cssClass",void 0),Xn([(0,i.Z9)(!1)],ks.prototype,"enableHtmlSanitizer",void 0),Xn([(0,i.ju)()],ks.prototype,"beforeRender",void 0),Xn([(0,i.ju)()],ks.prototype,"beforeOpen",void 0),Xn([(0,i.ju)()],ks.prototype,"afterOpen",void 0),Xn([(0,i.ju)()],ks.prototype,"beforeClose",void 0),Xn([(0,i.ju)()],ks.prototype,"afterClose",void 0),Xn([(0,i.ju)()],ks.prototype,"beforeCollision",void 0),Xn([(0,i.ju)()],ks.prototype,"created",void 0),Xn([(0,i.ju)()],ks.prototype,"destroyed",void 0),ks=Xn([i.Zl],ks);const xi={},pt="e-spin-show",Mt="e-spin-hide",wi="e-spin-material",Gi="e-spin-fabric",Vi="e-spin-tailwind",sn="e-spin-bootstrap",ts="e-spin-bootstrap4",wn="e-spin-bootstrap5",Sn="e-spin-high-contrast",Ws="e-spinner-pane",ht="e-spinner-inner",S="e-path-circle",oe="e-spin-template";function Ii(ee,te){if(!ee.target)return;let ie;const xe=(0,i.le)(te)?i.az:te;let Ke=function Rn(ee,te){const ie=te("div",{}),xe=te("div",{});return ie.classList.add(Ws),xe.classList.add(ht),ee.appendChild(ie),ie.appendChild(xe),{wrap:ie,inner_wrap:xe}}(ee.target,xe);if((0,i.le)(ee.cssClass)||Ke.wrap.classList.add(ee.cssClass),(0,i.le)(ee.template)&&(0,i.le)(null)){const ct=(0,i.le)(ee.type)?function Ie(ee){return window.getComputedStyle(ee,":after").getPropertyValue("content").replace(/['"]+/g,"")}(Ke.wrap):ee.type;ie=function po(ee,te){let ie;switch(te){case"Material":case"Fabric":case"Tailwind":case"Tailwind-dark":default:ie=30;break;case"Bootstrap4":case"Bootstrap5":ie=36}return ee=ee?parseFloat(ee+""):ie,"Bootstrap"===te?ee:ee/2}((0,i.le)(ee.width)?void 0:ee.width,ct),function Ae(ee,te,ie,xe){const Ke=te.querySelector("."+ht),ct=Ke.querySelector("svg");switch((0,i.le)(ct)||Ke.removeChild(ct),ee){case"Material":!function Ss(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"Material",radius:te},Yo(ee,xe,0,wi),zr(te,ee,"Material",wi)}(Ke,ie);break;case"Fabric":!function Jn(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"Fabric",radius:te},hr(ee,xe,Gi),Mn(te,ee,Gi)}(Ke,ie);break;case"Bootstrap":!function Le(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"Bootstrap",radius:te},function Et(ee,te,ie){const xe=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ke=64,ct=32,ii=2;xe.setAttribute("id",te),xe.setAttribute("class",sn),xe.setAttribute("viewBox","0 0 "+Ke+" "+Ke),ee.insertBefore(xe,ee.firstChild);for(let si=0;si<=7;si++){const Ri=document.createElementNS("http://www.w3.org/2000/svg","circle");Ri.setAttribute("class",S+"_"+si),Ri.setAttribute("r",ii+""),Ri.setAttribute("transform","translate("+ct+","+ct+")"),xe.appendChild(Ri)}}(ee,xe),function Ji(ee,te){const ie=ee.querySelector("svg.e-spin-bootstrap"),xe=0,Ke=0,ct=24;ie.style.width=ie.style.height=te+"px";let ii=90;for(let si=0;si<=7;si++){const Ri=Ge(xe,Ke,ct,ii),qi=ie.querySelector("."+S+"_"+si);qi.setAttribute("cx",Ri.x+""),qi.setAttribute("cy",Ri.y+""),ii=ii>=360?0:ii,ii+=45}}(ee,te)}(Ke,ie);break;case"HighContrast":!function En(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"HighContrast",radius:te},hr(ee,xe,Sn),Mn(te,ee,Sn)}(Ke,ie);break;case"Bootstrap4":!function Ps(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"Bootstrap4",radius:te},Yo(ee,xe,0,ts),zr(te,ee,"Bootstrap4",ts)}(Ke,ie);break;case"Bootstrap5":!function un(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"Bootstrap5",radius:te},Yo(ee,xe,0,wn),zr(te,ee,"Bootstrap5",wn)}(Ke,ie);break;case"Tailwind":case"Tailwind-dark":!function Ar(ee,te,ie){const xe=nr();xi[xe]={timeOut:0,type:"Tailwind",radius:te},hr(ee,xe,Vi),Mn(te,ee,Vi)}(Ke,ie)}}(ct,Ke.wrap,ie),(0,i.le)(ee.label)||function Yi(ee,te,ie){const xe=ie("div",{});xe.classList.add("e-spin-label"),xe.innerHTML=te,ee.appendChild(xe)}(Ke.inner_wrap,ee.label,xe)}else{const ct=(0,i.le)(ee.template)?null:ee.template;Ke.wrap.classList.add(oe),function en(ee,te,ie){(0,i.le)(ie)||ee.classList.add(ie),ee.querySelector(".e-spinner-inner").innerHTML=te}(Ke.wrap,ct,null)}Ke.wrap.classList.add(Mt),Ke=null}function _s(ee,te){const ie=[],xe=ee,Ke=te;let ct=!1,ii=1;return function si(Ri){ie.push(Ri),(Ri!==Ke||1===ii)&&(Ri<=xe&&Ri>1&&!ct?Ri=parseFloat((Ri-.2).toFixed(2)):1===Ri?(Ri=7,Ri=parseFloat((Ri+.2).toFixed(2)),ct=!0):Ri<8&&ct?8===(Ri=parseFloat((Ri+.2).toFixed(2)))&&(ct=!1):Ri<=8&&!ct&&(Ri=parseFloat((Ri-.2).toFixed(2))),++ii,si(Ri))}(xe),ie}function nr(){let ee="";const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let ie=0;ie<5;ie++)ee+=te.charAt(Math.floor(Math.random()*te.length));return ee}function hr(ee,te,ie,xe){const Ke=document.createElementNS("http://www.w3.org/2000/svg","svg");Ke.setAttribute("id",te),Ke.setAttribute("class",ie);const ct=document.createElementNS("http://www.w3.org/2000/svg","path");ct.setAttribute("class",S);const ii=document.createElementNS("http://www.w3.org/2000/svg","path");ii.setAttribute("class","e-path-arc"),ee.insertBefore(Ke,ee.firstChild),Ke.appendChild(ct),Ke.appendChild(ii)}function Yo(ee,te,ie,xe){const Ke=document.createElementNS("http://www.w3.org/2000/svg","svg"),ct=document.createElementNS("http://www.w3.org/2000/svg","path");Ke.setAttribute("class",xe),Ke.setAttribute("id",te),ct.setAttribute("class",S),ee.insertBefore(Ke,ee.firstChild),Ke.appendChild(ct)}function Do(ee){(function qo(ee,te,ie,xe,Ke,ct,ii){const si=++ii.globalInfo[ii.uniqueID].previousId,Ri=(new Date).getTime(),qi=te-ee,Mi=function Mr(ee){return parseFloat(ee)}(2*ii.globalInfo[ii.uniqueID].radius+""),es=ze(Mi),Gs=-90*(ii.globalInfo[ii.uniqueID].count||0);!function an(jr){const Pr=Math.max(0,Math.min((new Date).getTime()-Ri,xe));(function dr(jr,Pr){if(!(0,i.le)(Pr.querySelector("svg.e-spin-material"))&&!(0,i.le)(Pr.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){const Ze=Pr.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");Ze.setAttribute("stroke-dashoffset",Go(Mi,es,jr,ct)+""),Ze.setAttribute("transform","rotate("+Gs+" "+Mi/2+" "+Mi/2+")")}})(ie(Pr,ee,qi,xe),jr.container),si===jr.globalInfo[jr.uniqueID].previousId&&Pr<xe?xi[jr.uniqueID].timeOut=setTimeout(an.bind(null,jr),1):Do(jr)}(ii)})(1,149,$o,1333,0,75,ee),ee.globalInfo[ee.uniqueID].count=++ee.globalInfo[ee.uniqueID].count%4}function zr(ee,te,ie,xe){const Ke=2*ee,ct=te.querySelector("svg."+xe),ii=ct.querySelector("path.e-path-circle"),si=ze(Ke),Ri=Ke/2+"px";ct.setAttribute("viewBox","0 0 "+Ke+" "+Ke),ct.style.width=ct.style.height=Ke+"px",ct.style.transformOrigin=Ri+" "+Ri+" "+Ri,ii.setAttribute("d",function ko(ee,te){const ie=ee/2,xe=te/2;return"M"+ie+","+xe+"A"+(ie-xe)+","+(ie-xe)+" 0 1 1 "+xe+","+ie}(Ke,si)),"Material"===ie&&(ii.setAttribute("stroke-width",si+""),ii.setAttribute("stroke-dasharray",(Ke-si)*Math.PI*.75+""),ii.setAttribute("stroke-dashoffset",Go(Ke,si,1,75)+""))}function ze(ee){return.1*ee}function Go(ee,te,ie,xe){return(ee-te)*Math.PI*(3*xe/100-ie/100)}function $o(ee,te,ie,xe){const Ke=(ee/=xe)*ee,ct=Ke*ee;return te+ie*(6*ct*Ke+-15*Ke*Ke+10*ct)}function Mn(ee,te,ie){const xe=ee,Ke=ee,ct=2*ee,Ri=te.querySelector("."+ie),qi=Ri.querySelector(".e-path-circle"),Mi=Ri.querySelector(".e-path-arc"),es=ct/2+"px";qi.setAttribute("d",function w(ee,te,ie){return["M",ee,te,"m",-ie,0,"a",ie,ie,0,1,0,2*ie,0,"a",ie,ie,0,1,0,2*-ie,0].join(" ")}(xe,Ke,ee)),Mi.setAttribute("d",function p(ee,te,ie,xe,Ke){const ct=Ge(ee,te,ie,Ke),ii=Ge(ee,te,ie,xe);return["M",ct.x,ct.y,"A",ie,ie,0,0,0,ii.x,ii.y].join(" ")}(xe,Ke,ee,315,45)),Ri.setAttribute("viewBox","0 0 "+ct+" "+ct),Ri.style.transformOrigin=es+" "+es+" "+es,Ri.style.width=Ri.style.height=ct+"px"}function Ge(ee,te,ie,xe){const Ke=(xe-90)*Math.PI/180;return{x:ee+ie*Math.cos(Ke),y:te+ie*Math.sin(Ke)}}function k(ee){N(ee,!1),ee=null}function N(ee,te){let ie;if(ee&&(ie=ee.classList.contains(Ws)?ee:ee.querySelector("."+Ws)),ee&&ie){const xe=ie.querySelector("."+ht);let Ke;if(Ke=te?!ie.classList.contains(oe)&&!ie.classList.contains(Mt):!ie.classList.contains(oe)&&!ie.classList.contains(pt),Ke){const ct=ie.querySelector("svg");if((0,i.le)(ct))return;const ii=ct.getAttribute("id");switch(xi[ii].isAnimate=!te,xi[ii].type){case"Material":te?clearTimeout(xi[ii].timeOut):function Xs(ee,te,ie){const xe={};xi[te].timeOut=0,xe[te]=function jo(ee,te,ie,xe){return{radius:te,count:ie,previousId:xe}}(0,ie,0,0),Do({uniqueID:te,container:ee,globalInfo:xe,timeOutVar:0})}(xe,ii,xi[ii].radius);break;case"Bootstrap":te?clearTimeout(xi[ii].timeOut):function _n(ee){const ie=ee.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let Ke=1;Ke<=8;Ke++)xe(ee.getElementsByClassName("e-path-circle_"+(8===Ke?0:Ke))[0],Ke,0,_s(Ke,Ke),ie);function xe(Ke,ct,ii,si,Ri){let qi=0;!function Mi(es){xi[Ri].isAnimate&&(++qi,Ke.setAttribute("r",es+""),qi>=si.length&&(qi=0),xi[Ri].timeOut=setTimeout(Mi.bind(null,si[qi]),18))}(ct)}}(xe)}}te?(0,i.s1)(ie,[Mt],[pt]):(0,i.s1)(ie,[pt],[Mt]),ee=null}}function R(ee){N(ee,!0),ee=null}},215:(An,hs,rt)=>{rt.d(hs,{BH:()=>Nt,HR:()=>be,PD:()=>$e,aW:()=>jt,uw:()=>E});var i=rt(7628),u=rt(2162),Ue=rt(5774),Zt=function(Se,ue,_e,lt){var de,Xe=arguments.length,B=Xe<3?ue:null===lt?lt=Object.getOwnPropertyDescriptor(ue,_e):lt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(Se,ue,_e,lt);else for(var Be=Se.length-1;Be>=0;Be--)(de=Se[Be])&&(B=(Xe<3?de(B):Xe>3?de(ue,_e,B):de(ue,_e))||B);return Xe>3&&B&&Object.defineProperty(ue,_e,B),B};function $e(Se,ue){const _e=(0,i.l7)({},Se);for(const lt of Object.keys(_e))ue.indexOf(lt)<0&&(0,i.ex)(_e,lt);return _e}function Li(Se,ue){const _e=40===ue?0:Se.childElementCount-1;let Xe,lt=_e;const B=Se.querySelector(".e-selected");B&&B.classList.remove("e-selected");for(let de=0,Be=Se.children.length;de<Be;de++)Se.children[de].classList.contains("e-focused")&&(Xe=Se.children[de],lt=de,Xe.classList.remove("e-focused"),40===ue?lt++:lt--,lt===(40===ue?Se.childElementCount:-1)&&(lt=_e));Xe=Se.children[lt],lt=Lt(Se,Xe,lt,ue),-1!==lt&&((0,i.cn)([Se.children[lt]],"e-focused"),Se.children[lt].focus())}function Lt(Se,ue,_e,lt,Xe=0){if((ue.classList.contains("e-separator")||ue.classList.contains("e-disabled"))&&(_e===(40===lt?Se.childElementCount-1:0)?_e=40===lt?0:Se.childElementCount-1:40===lt?_e++:_e--),(ue=Se.children[_e]).classList.contains("e-separator")||ue.classList.contains("e-disabled")){if(++Xe===Se.childElementCount)return-1;_e=Lt(Se,ue,_e,lt,Xe)}return _e}let Si=(()=>{class Se extends i.rt{}return Zt([(0,i.Z9)("")],Se.prototype,"iconCss",void 0),Zt([(0,i.Z9)("")],Se.prototype,"id",void 0),Zt([(0,i.Z9)(!1)],Se.prototype,"separator",void 0),Zt([(0,i.Z9)("")],Se.prototype,"text",void 0),Zt([(0,i.Z9)("")],Se.prototype,"url",void 0),Zt([(0,i.Z9)(!1)],Se.prototype,"disabled",void 0),Se})();var We=function(Se,ue,_e,lt){var de,Xe=arguments.length,B=Xe<3?ue:null===lt?lt=Object.getOwnPropertyDescriptor(ue,_e):lt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(Se,ue,_e,lt);else for(var Be=Se.length-1;Be>=0;Be--)(de=Se[Be])&&(B=(Xe<3?de(B):Xe>3?de(ue,_e,B):de(ue,_e))||B);return Xe>3&&B&&Object.defineProperty(ue,_e,B),B};let E=class extends i.wA{constructor(ue,_e){super(ue,_e),this.isPopupCreated=!0}preRender(){}getPersistData(){return this.addOnPersist([])}toggle(){this.canOpen()?this.openPopUp():this.closePopup()}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}addItems(ue,_e){let lt,Xe=this.items.length;for(let B=0,de=this.items.length;B<de;B++)if(_e===this.items[B].text){Xe=B;break}for(let B=ue.length-1;B>=0;B--)lt=new Si(this,"items",ue[B],!0),this.items.splice(Xe,0,lt);this.canOpen()||this.createItems()}removeItems(ue,_e){let lt=!1;for(let Xe=0,B=ue.length;Xe<B;Xe++)for(let de=0,Be=this.items.length;de<Be;de++)if(ue[Xe]===(_e?this.items[de].id:this.items[de].text)){this.items.splice(de,1),lt=!0;break}lt&&this.getULElement()&&this.createItems()}createPopup(){const ue=this.createElement("div",{className:"e-dropdown-popup",id:this.element.id+"-popup"});document.body.appendChild(ue),this.dropDown=new Ue.GI(ue,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),(0,i.Y4)(this.element,{"aria-haspopup":this.items.length||this.target?"true":"false","aria-expanded":"false","aria-owns":this.getPopUpElement().id,type:"button","aria-label":this.element.textContent+" dropdownbutton"}),this.cssClass&&(0,i.cn)([ue],this.cssClass.split(" ")),this.isPopupCreated=!0}getTargetElement(){return"string"==typeof this.target?(0,i.Ys)(this.target):this.target}createItems(ue){const _e=this.items,lt=this.hasIcon(this.items,"iconCss");let Xe,B,de,Be,Fe=this.getULElement();Fe?Fe.innerHTML="":Fe=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(let xt=0;xt<_e.length;xt++){B=_e[xt];const $t=this.enableHtmlSanitizer?i.pJ.sanitize(B.text):B.text;de=this.createElement("li",{innerHTML:B.url?"":$t,className:B.separator?"e-item e-separator":"e-item",attrs:{role:"menuItem",tabindex:"-1"},id:B.id?B.id:(0,i.QI)("e-"+this.getModuleName()+"-item")}),B.url&&(de.appendChild(this.createAnchor(B)),de.classList.add("e-url")),B.iconCss?(Xe=this.createElement("span",{className:"e-menu-icon "+B.iconCss}),B.url?de.childNodes[0].appendChild(Xe):de.insertBefore(Xe,de.childNodes[0])):lt&&!B.separator&&de.classList.add("e-blank-icon"),B.disabled&&de.classList.add("e-disabled"),Be={item:B,element:de},this.trigger("beforeItemRender",Be),Fe.appendChild(de)}ue&&this.getPopUpElement().appendChild(Fe),lt&&function ut(Se){const ue=[].slice.call(Se.getElementsByClassName("e-blank-icon"));if(!ue.length)return;let _e=Se.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if((0,i.le)(_e))return;_e.classList.contains("e-url")&&(_e=_e.querySelector(".e-menu-url"));const lt=_e.querySelector(".e-menu-icon");let Xe;const B=Se.classList.contains("e-rtl");Xe=B?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};let de=`${parseInt(getComputedStyle(lt).fontSize,10)+parseInt(getComputedStyle(lt)[Xe.margin],10)+parseInt(getComputedStyle(_e).paddingLeft,10)}px`;ue.forEach(Be=>{Be.classList.contains("e-url")?Be.querySelector(".e-menu-url").style[Xe.padding]=de:Be.style[Xe.padding]=de})}(this.getPopUpElement())}hasIcon(ue,_e){for(let lt=0,Xe=ue.length;lt<Xe;lt++)if(ue[lt][_e])return!0;return!1}createAnchor(ue){const _e=this.enableHtmlSanitizer?i.pJ.sanitize(ue.text):ue.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:_e,attrs:{href:ue.url}})}initialize(){this.button=new u.zx({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=(0,i.QI)("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1}isColorPicker(){if(!this.element)return!1;const ue=this.element.previousSibling;return!!(ue&&ue.classList&&ue.classList.contains("e-split-colorpicker"))}appendArrowSpan(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf("e-vertical")>-1?"bottom":"right")+" e-caret"}))}setActiveElem(ue){this.activeElem=ue}getModuleName(){return"dropdown-btn"}canOpen(){let ue=!1;return this.isPopupCreated&&(ue=this.getPopUpElement().classList.contains("e-popup-close")),ue}destroy(){if(super.destroy(),"dropdown-btn"===this.getModuleName()){let ue;this.element.querySelector("span.e-caret")&&(0,i.og)(this.element.querySelector("span.e-caret")),this.cssClass&&(ue=this.cssClass.split(" ")),this.button.destroy(),ue&&(0,i.IV)([this.element],ue),(0,i.IV)(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(lt=>{this.element.removeAttribute(lt)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}}destroyPopup(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){const ue=document.getElementById(this.getPopUpElement().id);ue&&((0,i.IV)([ue],["e-popup-open","e-popup-close"]),(0,i.og)(ue))}i.bi.remove(this.getPopUpElement(),"click",this.clickHandler),i.bi.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&(this.dropDown=void 0)}this.isPopupCreated=!1}getPopUpElement(){let ue=null;return this.dropDown&&(ue=this.dropDown.element),ue}getULElement(){let ue=null;return this.getPopUpElement()&&(ue=this.getPopUpElement().children[0]),ue}wireEvents(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||i.bi.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),i.bi.add(this.element,"click",this.clickHandler,this),i.bi.add(this.element,"keydown",this.keyBoardHandler,this)}popupWireEvents(){const ue=this.getPopUpElement();this.createPopupOnClick&&i.bi.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),ue&&(i.bi.add(ue,"click",this.clickHandler,this),i.bi.add(ue,"keydown",this.keyBoardHandler,this)),this.rippleFn=(0,i.qx)(ue,{selector:".e-item"})}popupUnWireEvents(){const ue=this.getPopUpElement();this.createPopupOnClick&&i.bi.remove(document,"mousedown touchstart",this.delegateMousedownHandler),ue&&ue.parentElement&&(i.bi.remove(ue,"click",this.clickHandler),i.bi.remove(ue,"keydown",this.keyBoardHandler))}keyBoardHandler(ue){if(ue.target!==this.element||9!==ue.keyCode&&(ue.altKey||40!==ue.keyCode)&&38!==ue.keyCode)switch(ue.keyCode){case 38:case 40:!ue.altKey||38!==ue.keyCode&&40!==ue.keyCode?this.upDownKeyHandler(ue):this.keyEventHandler(ue);break;case 9:case 13:case 27:case 32:this.keyEventHandler(ue)}}upDownKeyHandler(ue){this.target&&(38===ue.keyCode||40===ue.keyCode)||(ue.preventDefault(),Li(this.getULElement(),ue.keyCode))}keyEventHandler(ue){this.target&&(13===ue.keyCode||9===ue.keyCode)||ue.target&&ue.target.className.indexOf("e-edit-template")>-1&&32===ue.keyCode||(9!==ue.keyCode&&ue.preventDefault(),27===ue.keyCode||38===ue.keyCode||9===ue.keyCode?this.canOpen()||this.closePopup(ue,this.element):this.clickHandler(ue))}getLI(ue){return"LI"===ue.tagName?ue:(0,i.oq)(ue,"li")}mousedownHandler(ue){const _e=ue.target;this.dropDown&&!this.canOpen()&&!(0,i.oq)(_e,'[id="'+this.getPopUpElement().id+'"]')&&!(0,i.oq)(_e,'[id="'+this.element.id+'"]')&&this.closePopup(ue)}clickHandler(ue){const _e=ue.target;if((0,i.oq)(_e,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(ue):this.closePopup(ue):this.isPopupCreated?this.closePopup(ue,this.activeElem[0]):(this.createPopup(),this.openPopUp(ue));else if((0,i.oq)(_e,'[id="'+this.getPopUpElement().id+'"]')){let lt,Xe,B;const de=this.getLI(_e);de&&(Xe=Array.prototype.indexOf.call(this.getULElement().children,de),B=this.items[Xe],B&&(lt={element:de,item:B},this.trigger("select",lt)),this.closePopup(ue,this.activeElem[0]))}}openPopUp(ue=null){const _e=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){let B=(0,i.Xr)(this.activeElem[0],"split-btn");B.isReact&&_e.childNodes.length<1&&B.appendReactElement(this.getTargetElement(),this.getPopUpElement())}else this.isReact&&_e.childNodes.length<1&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement());else this.createItems(!0);const lt=this.getULElement();this.popupWireEvents(),this.trigger("beforeOpen",{element:lt,items:this.items,event:ue,cancel:!1},B=>{if(!B.cancel){const de=this.getULElement();this.dropDown.show(null,this.element),(0,i.cn)([this.element],"e-active"),this.element.setAttribute("aria-expanded","true"),de.focus(),this.trigger("open",{element:de,items:this.items})}})}closePopup(ue=null,_e){const Xe={element:this.getULElement(),items:this.items,event:ue,cancel:!1};let B=this.getPopUpElement();B&&i.bi.remove(B,"keydown",this.keyBoardHandler),this.trigger("beforeClose",Xe,de=>{if(!de.cancel){this.popupUnWireEvents();const Be=this.getULElement(),Fe=Be.querySelector(".e-selected");Fe&&Fe.classList.remove("e-selected"),this.dropDown.hide(),(0,i.IV)(this.activeElem,"e-active"),this.element.setAttribute("aria-expanded","false"),_e&&_e.focus(),this.trigger("close",{element:Be,items:this.items}),!this.target&&Be&&(0,i.og)(Be),(!this.target||this.isColorPicker())&&this.createPopupOnClick&&this.destroyPopup(),this.target&&(this.isPopupCreated=!this.createPopupOnClick)}})}unWireEvents(){this.createPopupOnClick||i.bi.remove(document,"mousedown touchstart",this.delegateMousedownHandler),i.bi.remove(this.element,"click",this.clickHandler),i.bi.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(i.bi.remove(this.getPopUpElement(),"click",this.clickHandler),i.bi.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))}onPropertyChanged(ue,_e){let Xe;this.button.setProperties($e(ue,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(Xe=this.getPopUpElement(),this.dropDown.setProperties($e(ue,["enableRtl"])));for(const B of Object.keys(ue))switch(B){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":ue.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(ue.cssClass.indexOf("e-vertical")>-1){const de=this.element.querySelector("span.e-caret");(0,i.s1)(de,["e-icon-bottom"],["e-icon-right"])}this.isPopupCreated&&(_e.cssClass&&(0,i.IV)([Xe],_e.cssClass.split(" ")),ue.cssClass&&(0,i.cn)([Xe],ue.cssClass.split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":ue.createPopupOnClick?this.destroyPopup():this.createPopup()}}focusIn(){this.element.focus()}};We([(0,i.Z9)("")],E.prototype,"content",void 0),We([(0,i.Z9)("")],E.prototype,"cssClass",void 0),We([(0,i.Z9)(!1)],E.prototype,"disabled",void 0),We([(0,i.Z9)("")],E.prototype,"iconCss",void 0),We([(0,i.Z9)("Left")],E.prototype,"iconPosition",void 0),We([(0,i.Z9)(!1)],E.prototype,"enableHtmlSanitizer",void 0),We([(0,i.FE)([],Si)],E.prototype,"items",void 0),We([(0,i.Z9)(!1)],E.prototype,"createPopupOnClick",void 0),We([(0,i.Z9)("")],E.prototype,"target",void 0),We([(0,i.ju)()],E.prototype,"beforeItemRender",void 0),We([(0,i.ju)()],E.prototype,"beforeOpen",void 0),We([(0,i.ju)()],E.prototype,"beforeClose",void 0),We([(0,i.ju)()],E.prototype,"close",void 0),We([(0,i.ju)()],E.prototype,"open",void 0),We([(0,i.ju)()],E.prototype,"select",void 0),We([(0,i.ju)()],E.prototype,"created",void 0),E=We([i.Zl],E);var at=function(Se,ue,_e,lt){var de,Xe=arguments.length,B=Xe<3?ue:null===lt?lt=Object.getOwnPropertyDescriptor(ue,_e):lt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(Se,ue,_e,lt);else for(var Be=Se.length-1;Be>=0;Be--)(de=Se[Be])&&(B=(Xe<3?de(B):Xe>3?de(ue,_e,B):de(ue,_e))||B);return Xe>3&&B&&Object.defineProperty(ue,_e,B),B};const Oe="e-rtl",ft="EJS-SPLITBUTTON";let jt=class extends E{constructor(ue,_e){super(ue,_e)}preRender(){let ue=this.element;if(ue.tagName===ft){const _e=(0,i.NA)("ej2_instances",ue),lt=this.createElement("button",{attrs:{type:"button"}}),Xe=this.createElement(ft,{className:"e-"+this.getModuleName()+"-wrapper"});for(let B=0,de=ue.attributes.length;B<de;B++)lt.setAttribute(ue.attributes[B].nodeName,ue.attributes[B].nodeValue);ue.parentNode.insertBefore(Xe,ue),(0,i.og)(ue),ue=lt,Xe.appendChild(ue),(0,i.sO)("ej2_instances",_e,ue),this.wrapper=Xe,this.element=ue}this.element.id||(this.element.id=(0,i.QI)("e-"+this.getModuleName()))}render(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()}renderControl(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()}addItems(ue,_e){super.addItems(ue,_e),this.secondaryBtnObj.items=this.items}removeItems(ue,_e){super.removeItems(ue,_e),this.secondaryBtnObj.items=this.items}initWrapper(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(Oe),this.cssClass&&(0,i.cn)([this.wrapper],this.cssClass.split(" "))}createPrimaryButton(){this.primaryBtnObj=new u.zx({cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled}),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)}createSecondaryButton(){const ue=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(ue);const _e={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick};_e.beforeItemRender=lt=>{this.createPopupOnClick&&(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.trigger("beforeItemRender",lt)},_e.open=lt=>{this.trigger("open",lt)},_e.close=lt=>{this.trigger("close",lt)},_e.select=lt=>{this.trigger("select",lt)},_e.beforeOpen=lt=>{const Xe=new Nt;return this.trigger("beforeOpen",lt,B=>{Xe.resolve(B)}),Xe},_e.beforeClose=lt=>{const Xe=new Nt;return this.trigger("beforeClose",lt,B=>{Xe.resolve(B)}),Xe},this.secondaryBtnObj=new E(_e),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(ue),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")}setAria(){(0,i.Y4)(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})}getModuleName(){return"split-btn"}toggle(){this.secondaryBtnObj.toggle()}destroy(){let ue=[Oe];if(this.cssClass&&(ue=ue.concat(this.cssClass.split(" "))),this.element){const _e=document.getElementById(this.element.id);_e&&_e.parentElement===this.wrapper&&(this.wrapper.tagName===ft?(this.wrapper.innerHTML="",(0,i.IV)([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),(0,i.IV)([this.wrapper],this.cssClass.split(" "))):((0,i.IV)([this.element],ue),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(lt=>{this.element.removeAttribute(lt)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),(0,i.Od)(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),super.destroy(),this.element.getAttribute("class")||this.element.removeAttribute("class")}wireEvents(){i.bi.add(this.element,"click",this.primaryBtnClickHandler,this),new i.nv(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})}unWireEvents(){i.bi.remove(this.element,"click",this.primaryBtnClickHandler),(0,i.s8)(this.element,i.nv).destroy()}primaryBtnClickHandler(){this.trigger("click",{element:this.element})}btnKeyBoardHandler(ue){"altdownarrow"===ue.action&&this.clickHandler(ue)}onPropertyChanged(ue,_e){let lt=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties($e(ue,lt)),lt=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(ue).indexOf("items")>-1&&(this.secondaryBtnObj.items=ue.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties($e(ue,lt));for(const Xe of Object.keys(ue))switch(Xe){case"cssClass":_e.cssClass&&(0,i.IV)([this.wrapper],_e.cssClass.split(" ")),(0,i.cn)([this.wrapper],ue.cssClass.split(" "));break;case"enableRtl":ue.enableRtl?(0,i.cn)([this.wrapper],Oe):(0,i.IV)([this.wrapper],Oe)}}focusIn(){this.element.focus()}};at([(0,i.Z9)("")],jt.prototype,"content",void 0),at([(0,i.Z9)("")],jt.prototype,"cssClass",void 0),at([(0,i.Z9)(!1)],jt.prototype,"disabled",void 0),at([(0,i.Z9)("")],jt.prototype,"iconCss",void 0),at([(0,i.Z9)("Left")],jt.prototype,"iconPosition",void 0),at([(0,i.Z9)(!1)],jt.prototype,"createPopupOnClick",void 0),at([(0,i.FE)([],Si)],jt.prototype,"items",void 0),at([(0,i.Z9)("")],jt.prototype,"target",void 0),at([(0,i.ju)()],jt.prototype,"beforeItemRender",void 0),at([(0,i.ju)()],jt.prototype,"beforeOpen",void 0),at([(0,i.ju)()],jt.prototype,"beforeClose",void 0),at([(0,i.ju)()],jt.prototype,"click",void 0),at([(0,i.ju)()],jt.prototype,"close",void 0),at([(0,i.ju)()],jt.prototype,"open",void 0),at([(0,i.ju)()],jt.prototype,"select",void 0),at([(0,i.ju)()],jt.prototype,"created",void 0),jt=at([i.Zl],jt);class Nt{constructor(){this.promise=new Promise((ue,_e)=>{this.resolve=ue,this.reject=_e}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}var bt=function(Se,ue,_e,lt){var de,Xe=arguments.length,B=Xe<3?ue:null===lt?lt=Object.getOwnPropertyDescriptor(ue,_e):lt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(Se,ue,_e,lt);else for(var Be=Se.length-1;Be>=0;Be--)(de=Se[Be])&&(B=(Xe<3?de(B):Xe>3?de(ue,_e,B):de(ue,_e))||B);return Xe>3&&B&&Object.defineProperty(ue,_e,B),B};const Rt="e-hide-spinner",z="e-progress",J="e-progress-active",ve="e-btn-content";class Ne extends i.rt{}bt([(0,i.Z9)(null)],Ne.prototype,"template",void 0),bt([(0,i.Z9)(16)],Ne.prototype,"width",void 0),bt([(0,i.Z9)("Left")],Ne.prototype,"position",void 0);class ce extends i.rt{}bt([(0,i.Z9)(400)],ce.prototype,"duration",void 0),bt([(0,i.Z9)("None")],ce.prototype,"effect",void 0),bt([(0,i.Z9)("ease")],ce.prototype,"easing",void 0);let be=class extends u.zx{constructor(ue,_e){super(ue,_e),this.step=1}preRender(){super.preRender()}render(){super.render(),this.init(),this.wireEvents(),this.setAria(),this.renderComplete()}start(ue){this.isPaused=!1,this.startProgress(ue||this.percent,this.progressTime)}stop(){this.isPaused=!0,cancelAnimationFrame(this.timerId)}progressComplete(){this.isPaused=!1,this.finishProgress()}getModuleName(){return"progress-btn"}destroy(){let ue=[Rt,J,"e-round-corner","e-"+super.getModuleName(),"e-spin-"+this.spinSettings.position.toLowerCase()];super.destroy(),this.unWireEvents(),this.element.innerHTML="",this.cssClass&&(ue=ue.concat(this.cssClass.split(" "))),(0,i.IV)([this.element],ue),(this.element.getAttribute("class")?["aria-label","aria-valuemin","aria-valuemax","aria-valuenow"]:["aria-label","aria-valuemin","aria-valuemax","aria-valuenow","class"]).forEach(lt=>{this.element.removeAttribute(lt)}),this.disabled&&this.element.removeAttribute("disabled")}init(){this.element.classList.add("e-"+super.getModuleName()),this.setContent(),this.createSpinner(),this.enableProgress&&this.createProgress()}createSpinner(){const ue=this.createElement("span",{className:"e-spinner"});this.setSpinPosition(ue),(0,Ue.rj)({target:ue,width:this.spinSettings.width||16,template:this.spinSettings.template},this.createElement)}getSpinner(){return this.element.getElementsByClassName("e-spinner")[0]}getProgress(){return this.element.getElementsByClassName(z)[0]}setSpinPosition(ue){const _e=this.spinSettings.position||"Left";"Left"===_e||"Top"===_e?this.element.insertBefore(ue,this.element.getElementsByClassName(ve)[0]):this.element.appendChild(ue),this.element.classList.add("e-spin-"+_e.toLowerCase())}createProgress(){this.element.appendChild(this.createElement("span",{className:z}))}setContent(){let ue;ue=this.element.innerHTML,this.enableHtmlSanitizer&&(ue=i.pJ.sanitize(this.element.innerHTML)),this.element.innerHTML="",this.element.appendChild(this.createElement("span",{className:ve,innerHTML:ue}))}setContentIcon(ue){const _e=this.createElement("span",{className:ve,innerHTML:ue});if(this.iconCss){const lt=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(lt.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");const Xe=_e.childNodes[0];!Xe||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?_e.appendChild(lt):_e.insertBefore(lt,Xe)}this.element.appendChild(_e)}clickHandler(){this.element.classList.contains(J)||this.startProgress()}startProgress(ue,_e){const lt=this.element.classList,Xe=lt.contains("e-vertical");lt.add(J),lt.contains(Rt)||(0,Ue.yh)(this.element),this.startAnimate(Date.now(),_e||0,_e?Date.now()-1*this.duration/100:Date.now(),ue||0,0,this.step,0,Xe),this.startContAnimate()}startAnimate(ue,_e,lt,Xe,B,de,Be,Fe){try{const xt=ue-lt,$t=this.duration*de/100,ji=xt?xt<$t?xt-$t:xt%$t:0;this.progressTime=_e=_e+xt-ji,lt=ue-ji,Xe+=(xt-ji)/this.duration*100;const is={percent:B=(_e-Be)%$t==0||100===Xe?Xe:B,currentDuration:_e,step:de};this.eIsVertical=Fe,this.trigger(0===Xe?"begin":100===Xe||_e===this.duration?"end":"progress",is,zi=>{this.successCallback(zi,Xe,B,_e,Be,ji,lt)})}catch(xt){cancelAnimationFrame(this.timerId),this.trigger("fail",xt)}}successCallback(ue,_e,lt,Xe,B,de,Be){let Fe=_e,xt=lt;const $t=de,ji=Xe;let is=B;const zi=Be,ui=this.eIsVertical;Fe!==ue.percent&&ue.percent!==xt&&(Fe=ue.percent),this.percent=Fe,this.step=ue.step,((ji-is)%(this.duration*ue.step/100)==0||100===Fe)&&(this.timerId=requestAnimationFrame(()=>{this.enableProgress&&(this.getProgress().style[ui?"height":"width"]=Fe+"%"),this.element.setAttribute("aria-valuenow",Fe.toString())}),xt=Fe,is=ji),this.isPaused||(this.interval=ji<this.duration&&Fe<100?window.setTimeout(()=>{this.startAnimate(Date.now(),ji,zi,Fe,xt,ue.step,is,ui)},this.duration/100-$t):window.setTimeout(()=>{this.progressTime=this.percent=0,this.enableProgress&&(this.getProgress().style[ui?"height":"width"]="0%"),this.element.setAttribute("aria-valuenow","0"),this.hideSpin()},100))}startContAnimate(){const ue=this.element.getElementsByClassName(ve)[0];"None"!==this.animationSettings.effect?new i.fw({}).animate(ue,{duration:this.animationSettings.duration,name:"Progress"+this.animationSettings.effect,timingFunction:this.animationSettings.easing,begin:()=>{"Center"===this.spinSettings.position&&this.setSpinnerSize()},end:()=>{ue.classList.add("e-animate-end")}}):"Center"===this.spinSettings.position&&this.setSpinnerSize()}finishProgress(){const ue=this.element.classList,_e=ue.contains("e-vertical");ue.add(J);for(let B=this.percent;B<100;B++)B+=10,B>100&&(B=100),this.enableProgress&&(this.getProgress().style[_e?"height":"width"]=this.percent<100?B+"%":"100%");this.element.setAttribute("aria-valuenow","0"),this.hideSpin();const Xe={step:this.step,currentDuration:this.progressTime,percent:100};clearTimeout(this.interval),this.trigger("end",Xe),this.progressTime=this.percent=0}setSpinnerSize(){const ue=this.element.getElementsByClassName(ve)[0],_e=this.getSpinner();_e.style.width=Math.max(_e.offsetWidth,ue.offsetWidth)+"px",_e.style.height=Math.max(_e.offsetHeight,ue.offsetHeight)+"px",ue.classList.add("e-cont-animate")}hideSpin(){const ue=this.element.getElementsByClassName(ve)[0];if(this.element.classList.contains(Rt)||(0,Ue.v3)(this.element),this.element.classList.remove(J),"None"!==this.animationSettings.effect&&ue.classList.remove("e-animate-end"),"Center"===this.spinSettings.position){const _e=this.getSpinner();ue.classList.remove("e-cont-animate"),_e.style.width="auto",_e.style.height="auto"}}setIconSpan(){const ue=this.element.getElementsByClassName(ve)[0],_e=this.element.getElementsByClassName("e-btn-icon")[0];!ue.childNodes[0]||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?ue.appendChild(_e):ue.insertBefore(_e,ue.childNodes[0])}setAria(){(0,i.Y4)(this.element,{"aria-label":this.element.textContent+" progress","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0"})}wireEvents(){i.bi.add(this.element,"click",this.clickHandler,this)}unWireEvents(){i.bi.remove(this.element,"click",this.clickHandler)}onPropertyChanged(ue,_e){const lt=this.element;let Xe=!1;this.element.querySelector(".e-spinner-pane").classList.contains("e-spin-show")&&(Xe=!0),super.onPropertyChanged(ue,_e);for(const de of Object.keys(ue))switch(de){case"content":this.setContent(),this.createSpinner(),Xe&&((0,Ue.yh)(this.element),Xe=!1),this.enableProgress&&this.createProgress(),lt.setAttribute("aria-label",lt.textContent+" progress");break;case"iconCss":_e.iconCss||this.setIconSpan();break;case"iconPosition":this.setIconSpan();break;case"enableProgress":ue.enableProgress?this.createProgress():(0,i.Od)(this.getProgress());break;case"spinSettings":ue.spinSettings.position&&(lt.classList.remove("e-spin-"+_e.spinSettings.position.toLowerCase()),this.setSpinPosition(this.getSpinner())),(ue.spinSettings.template||ue.spinSettings.width)&&(lt.removeChild(this.getSpinner()),this.createSpinner())}}focusIn(){this.element.focus()}};bt([(0,i.Z9)(!1)],be.prototype,"enableProgress",void 0),bt([(0,i.Z9)(2e3)],be.prototype,"duration",void 0),bt([(0,i.Z9)("Left")],be.prototype,"iconPosition",void 0),bt([(0,i.Z9)("")],be.prototype,"iconCss",void 0),bt([(0,i.Z9)(!1)],be.prototype,"disabled",void 0),bt([(0,i.Z9)(!1)],be.prototype,"isPrimary",void 0),bt([(0,i.Z9)("")],be.prototype,"cssClass",void 0),bt([(0,i.Z9)("")],be.prototype,"content",void 0),bt([(0,i.Z9)(!1)],be.prototype,"isToggle",void 0),bt([(0,i.Z9)(!1)],be.prototype,"enableHtmlSanitizer",void 0),bt([(0,i.Zz)({},Ne)],be.prototype,"spinSettings",void 0),bt([(0,i.Zz)({},ce)],be.prototype,"animationSettings",void 0),bt([(0,i.ju)()],be.prototype,"created",void 0),bt([(0,i.ju)()],be.prototype,"begin",void 0),bt([(0,i.ju)()],be.prototype,"progress",void 0),bt([(0,i.ju)()],be.prototype,"end",void 0),bt([(0,i.ju)()],be.prototype,"fail",void 0),be=bt([i.Zl],be)},4383:(An,hs,rt)=>{rt.d(hs,{Rh:()=>Fe,_W:()=>B});var i=rt(8274),u=rt(7340),Ue=rt(7579),Zt=rt(1481),$e=rt(6895);const Li=["toast-component",""];function Lt(zi,ui){if(1&zi){const Ut=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){i.CHM(Ut);const us=i.oxw();return i.KtG(us.remove())}),i.TgZ(1,"span",6),i._uU(2,"\xd7"),i.qZA()()}}function ut(zi,ui){if(1&zi&&(i.ynx(0),i._uU(1),i.BQk()),2&zi){const Ut=i.oxw(2);i.xp6(1),i.hij("[",Ut.duplicatesCount+1,"]")}}function Si(zi,ui){if(1&zi&&(i.TgZ(0,"div"),i._uU(1),i.YNc(2,ut,2,1,"ng-container",4),i.qZA()),2&zi){const Ut=i.oxw();i.Tol(Ut.options.titleClass),i.uIk("aria-label",Ut.title),i.xp6(1),i.hij(" ",Ut.title," "),i.xp6(1),i.Q6J("ngIf",Ut.duplicatesCount)}}function We(zi,ui){if(1&zi&&i._UZ(0,"div",7),2&zi){const Ut=i.oxw();i.Tol(Ut.options.messageClass),i.Q6J("innerHTML",Ut.message,i.oJD)}}function gt(zi,ui){if(1&zi&&(i.TgZ(0,"div",8),i._uU(1),i.qZA()),2&zi){const Ut=i.oxw();i.Tol(Ut.options.messageClass),i.uIk("aria-label",Ut.message),i.xp6(1),i.hij(" ",Ut.message," ")}}function E(zi,ui){if(1&zi&&(i.TgZ(0,"div"),i._UZ(1,"div",9),i.qZA()),2&zi){const Ut=i.oxw();i.xp6(1),i.Udp("width",Ut.width+"%")}}function at(zi,ui){if(1&zi){const Ut=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){i.CHM(Ut);const us=i.oxw();return i.KtG(us.remove())}),i.TgZ(1,"span",6),i._uU(2,"\xd7"),i.qZA()()}}function Oe(zi,ui){if(1&zi&&(i.ynx(0),i._uU(1),i.BQk()),2&zi){const Ut=i.oxw(2);i.xp6(1),i.hij("[",Ut.duplicatesCount+1,"]")}}function ft(zi,ui){if(1&zi&&(i.TgZ(0,"div"),i._uU(1),i.YNc(2,Oe,2,1,"ng-container",4),i.qZA()),2&zi){const Ut=i.oxw();i.Tol(Ut.options.titleClass),i.uIk("aria-label",Ut.title),i.xp6(1),i.hij(" ",Ut.title," "),i.xp6(1),i.Q6J("ngIf",Ut.duplicatesCount)}}function jt(zi,ui){if(1&zi&&i._UZ(0,"div",7),2&zi){const Ut=i.oxw();i.Tol(Ut.options.messageClass),i.Q6J("innerHTML",Ut.message,i.oJD)}}function Nt(zi,ui){if(1&zi&&(i.TgZ(0,"div",8),i._uU(1),i.qZA()),2&zi){const Ut=i.oxw();i.Tol(Ut.options.messageClass),i.uIk("aria-label",Ut.message),i.xp6(1),i.hij(" ",Ut.message," ")}}function Di(zi,ui){if(1&zi&&(i.TgZ(0,"div"),i._UZ(1,"div",9),i.qZA()),2&zi){const Ut=i.oxw();i.xp6(1),i.Udp("width",Ut.width+"%")}}class z{constructor(ui,Ut,oi,us,Us,$i){this.toastId=ui,this.config=Ut,this.message=oi,this.title=us,this.toastType=Us,this.toastRef=$i,this._onTap=new Ue.x,this._onAction=new Ue.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(ui){this._onAction.next(ui)}onAction(){return this._onAction.asObservable()}}const J={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},ve=new i.OlP("ToastConfig");class Ne{constructor(ui,Ut){this.component=ui,this.injector=Ut}attach(ui,Ut){return this._attachedHost=ui,ui.attach(this,Ut)}detach(){const ui=this._attachedHost;if(ui)return this._attachedHost=void 0,ui.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(ui){this._attachedHost=ui}}class be extends class ce{attach(ui,Ut){return this._attachedPortal=ui,this.attachComponentPortal(ui,Ut)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(ui){this._disposeFn=ui}}{constructor(ui,Ut,oi){super(),this._hostDomElement=ui,this._componentFactoryResolver=Ut,this._appRef=oi}attachComponentPortal(ui,Ut){const oi=this._componentFactoryResolver.resolveComponentFactory(ui.component);let us;return us=oi.create(ui.injector),this._appRef.attachView(us.hostView),this.setDisposeFn(()=>{this._appRef.detachView(us.hostView),us.destroy()}),Ut?this._hostDomElement.insertBefore(this._getComponentRootNode(us),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(us)),us}_getComponentRootNode(ui){return ui.hostView.rootNodes[0]}}let Se=(()=>{class zi{constructor(Ut){this._document=Ut}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ut=this._document.createElement("div");Ut.classList.add("overlay-container"),this._document.body.appendChild(Ut),this._containerElement=Ut}}return zi.\u0275fac=function(Ut){return new(Ut||zi)(i.LFG($e.K0))},zi.\u0275prov=(0,i.Yz7)({factory:function(){return new zi((0,i.LFG)($e.K0))},token:zi,providedIn:"root"}),zi})();class ue{constructor(ui){this._portalHost=ui}attach(ui,Ut=!0){return this._portalHost.attach(ui,Ut)}detach(){return this._portalHost.detach()}}let _e=(()=>{class zi{constructor(Ut,oi,us,Us){this._overlayContainer=Ut,this._componentFactoryResolver=oi,this._appRef=us,this._document=Us,this._paneElements=new Map}create(Ut,oi){return this._createOverlayRef(this.getPaneElement(Ut,oi))}getPaneElement(Ut="",oi){return this._paneElements.get(oi)||this._paneElements.set(oi,{}),this._paneElements.get(oi)[Ut]||(this._paneElements.get(oi)[Ut]=this._createPaneElement(Ut,oi)),this._paneElements.get(oi)[Ut]}_createPaneElement(Ut,oi){const us=this._document.createElement("div");return us.id="toast-container",us.classList.add(Ut),us.classList.add("toast-container"),oi?oi.getContainerElement().appendChild(us):this._overlayContainer.getContainerElement().appendChild(us),us}_createPortalHost(Ut){return new be(Ut,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Ut){return new ue(this._createPortalHost(Ut))}}return zi.\u0275fac=function(Ut){return new(Ut||zi)(i.LFG(Se),i.LFG(i._Vd),i.LFG(i.z2F),i.LFG($e.K0))},zi.\u0275prov=(0,i.Yz7)({factory:function(){return new zi((0,i.LFG)(Se),(0,i.LFG)(i._Vd),(0,i.LFG)(i.z2F),(0,i.LFG)($e.K0))},token:zi,providedIn:"root"}),zi})();class lt{constructor(ui){this._overlayRef=ui,this.duplicatesCount=0,this._afterClosed=new Ue.x,this._activate=new Ue.x,this._manualClose=new Ue.x,this._resetTimeout=new Ue.x,this._countDuplicate=new Ue.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(ui,Ut){ui&&this._resetTimeout.next(),Ut&&this._countDuplicate.next(++this.duplicatesCount)}}class Xe{constructor(ui,Ut){this._toastPackage=ui,this._parentInjector=Ut}get(ui,Ut,oi){return ui===z?this._toastPackage:this._parentInjector.get(ui,Ut,oi)}}let B=(()=>{class zi{constructor(Ut,oi,us,Us,$i){this.overlay=oi,this._injector=us,this.sanitizer=Us,this.ngZone=$i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Ut.default),Ut.config),Ut.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Ut.default.iconClasses),Ut.config.iconClasses))}show(Ut,oi,us={},Us=""){return this._preBuildNotification(Us,Ut,oi,this.applyConfig(us))}success(Ut,oi,us={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Ut,oi,this.applyConfig(us))}error(Ut,oi,us={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Ut,oi,this.applyConfig(us))}info(Ut,oi,us={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Ut,oi,this.applyConfig(us))}warning(Ut,oi,us={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Ut,oi,this.applyConfig(us))}clear(Ut){for(const oi of this.toasts)if(void 0!==Ut){if(oi.toastId===Ut)return void oi.toastRef.manualClose()}else oi.toastRef.manualClose()}remove(Ut){const oi=this._findToast(Ut);if(!oi||(oi.activeToast.toastRef.close(),this.toasts.splice(oi.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const us=this.toasts[this.currentlyActive].toastRef;us.isInactive()||(this.currentlyActive=this.currentlyActive+1,us.activate())}return!0}findDuplicate(Ut="",oi="",us,Us){const{includeTitleDuplicates:$i}=this.toastrConfig;for(const et of this.toasts){const zt=$i&&et.title===Ut;if((!$i||zt)&&et.message===oi)return et.toastRef.onDuplicate(us,Us),et}return null}applyConfig(Ut={}){return Object.assign(Object.assign({},this.toastrConfig),Ut)}_findToast(Ut){for(let oi=0;oi<this.toasts.length;oi++)if(this.toasts[oi].toastId===Ut)return{index:oi,activeToast:this.toasts[oi]};return null}_preBuildNotification(Ut,oi,us,Us){return Us.onActivateTick?this.ngZone.run(()=>this._buildNotification(Ut,oi,us,Us)):this._buildNotification(Ut,oi,us,Us)}_buildNotification(Ut,oi,us,Us){if(!Us.toastComponent)throw new Error("toastComponent required");const $i=this.findDuplicate(us,oi,this.toastrConfig.resetTimeoutOnDuplicate&&Us.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&us||oi)&&this.toastrConfig.preventDuplicates&&null!==$i)return $i;this.previousToastMessage=oi;let et=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(et=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const zt=this.overlay.create(Us.positionClass,this.overlayContainer);this.index=this.index+1;let Xt=oi;oi&&Us.enableHtml&&(Xt=this.sanitizer.sanitize(i.q3G.HTML,oi));const Kt=new lt(zt),ni=new z(this.index,Us,Xt,us,Ut,Kt),Tt=new Xe(ni,this._injector),qt=new Ne(Us.toastComponent,Tt),Ci=zt.attach(qt,this.toastrConfig.newestOnTop);Kt.componentInstance=Ci.instance;const gs={toastId:this.index,title:us||"",message:oi||"",toastRef:Kt,onShown:Kt.afterActivate(),onHidden:Kt.afterClosed(),onTap:ni.onTap(),onAction:ni.onAction(),portal:Ci};return et||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{gs.toastRef.activate()})),this.toasts.push(gs),gs}}return zi.\u0275fac=function(Ut){return new(Ut||zi)(i.LFG(ve),i.LFG(_e),i.LFG(i.zs3),i.LFG(Zt.H7),i.LFG(i.R0b))},zi.\u0275prov=(0,i.Yz7)({factory:function(){return new zi((0,i.LFG)(ve),(0,i.LFG)(_e),(0,i.LFG)(i.gxx),(0,i.LFG)(Zt.H7),(0,i.LFG)(i.R0b))},token:zi,providedIn:"root"}),zi})(),de=(()=>{class zi{constructor(Ut,oi,us){this.toastrService=Ut,this.toastPackage=oi,this.ngZone=us,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=oi.message,this.title=oi.title,this.options=oi.config,this.originalTimeout=oi.config.timeOut,this.toastClasses=`${oi.toastType} ${oi.config.toastClass}`,this.sub=oi.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=oi.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=oi.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=oi.toastRef.countDuplicate().subscribe(Us=>{this.duplicatesCount=Us})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ut=(new Date).getTime();this.width=(this.hideTime-Ut)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Ut,oi){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Ut),oi)):this.timeout=setTimeout(()=>Ut(),oi)}outsideInterval(Ut,oi){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Ut),oi)):this.intervalId=setInterval(()=>Ut(),oi)}runInsideAngular(Ut){this.ngZone?this.ngZone.run(()=>Ut()):Ut()}}return zi.\u0275fac=function(Ut){return new(Ut||zi)(i.Y36(B),i.Y36(z),i.Y36(i.R0b))},zi.\u0275cmp=i.Xpm({type:zi,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Ut,oi){1&Ut&&i.NdJ("click",function(){return oi.tapToast()})("mouseenter",function(){return oi.stickAround()})("mouseleave",function(){return oi.delayedHideToast()}),2&Ut&&(i.d8E("@flyInOut",oi.state),i.Tol(oi.toastClasses),i.Udp("display",oi.displayStyle))},attrs:Li,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(Ut,oi){1&Ut&&(i.YNc(0,Lt,3,0,"button",0),i.YNc(1,Si,3,5,"div",1),i.YNc(2,We,1,3,"div",2),i.YNc(3,gt,2,4,"div",3),i.YNc(4,E,2,2,"div",4)),2&Ut&&(i.Q6J("ngIf",oi.options.closeButton),i.xp6(1),i.Q6J("ngIf",oi.title),i.xp6(1),i.Q6J("ngIf",oi.message&&oi.options.enableHtml),i.xp6(1),i.Q6J("ngIf",oi.message&&!oi.options.enableHtml),i.xp6(1),i.Q6J("ngIf",oi.options.progressBar))},dependencies:[$e.O5],encapsulation:2,data:{animation:[(0,u.X$)("flyInOut",[(0,u.SB)("inactive",(0,u.oB)({opacity:0})),(0,u.SB)("active",(0,u.oB)({opacity:1})),(0,u.SB)("removed",(0,u.oB)({opacity:0})),(0,u.eR)("inactive => active",(0,u.jt)("{{ easeTime }}ms {{ easing }}")),(0,u.eR)("active => removed",(0,u.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),zi})();const Be=Object.assign(Object.assign({},J),{toastComponent:de});let Fe=(()=>{class zi{static forRoot(Ut={}){return{ngModule:zi,providers:[{provide:ve,useValue:{default:Be,config:Ut}}]}}}return zi.\u0275fac=function(Ut){return new(Ut||zi)},zi.\u0275mod=i.oAB({type:zi}),zi.\u0275inj=i.cJS({imports:[$e.ez]}),zi})(),$t=(()=>{class zi{constructor(Ut,oi,us){this.toastrService=Ut,this.toastPackage=oi,this.appRef=us,this.width=-1,this.toastClasses="",this.state="inactive",this.message=oi.message,this.title=oi.title,this.options=oi.config,this.originalTimeout=oi.config.timeOut,this.toastClasses=`${oi.toastType} ${oi.config.toastClass}`,this.sub=oi.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=oi.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=oi.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=oi.toastRef.countDuplicate().subscribe(Us=>{this.duplicatesCount=Us})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ut=(new Date).getTime();this.width=(this.hideTime-Ut)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return zi.\u0275fac=function(Ut){return new(Ut||zi)(i.Y36(B),i.Y36(z),i.Y36(i.z2F))},zi.\u0275cmp=i.Xpm({type:zi,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Ut,oi){1&Ut&&i.NdJ("click",function(){return oi.tapToast()})("mouseenter",function(){return oi.stickAround()})("mouseleave",function(){return oi.delayedHideToast()}),2&Ut&&(i.Tol(oi.toastClasses),i.Udp("display",oi.displayStyle))},attrs:Li,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(Ut,oi){1&Ut&&(i.YNc(0,at,3,0,"button",0),i.YNc(1,ft,3,5,"div",1),i.YNc(2,jt,1,3,"div",2),i.YNc(3,Nt,2,4,"div",3),i.YNc(4,Di,2,2,"div",4)),2&Ut&&(i.Q6J("ngIf",oi.options.closeButton),i.xp6(1),i.Q6J("ngIf",oi.title),i.xp6(1),i.Q6J("ngIf",oi.message&&oi.options.enableHtml),i.xp6(1),i.Q6J("ngIf",oi.message&&!oi.options.enableHtml),i.xp6(1),i.Q6J("ngIf",oi.options.progressBar))},dependencies:[$e.O5],encapsulation:2}),zi})();Object.assign(Object.assign({},J),{toastComponent:$t})},9751:(An,hs,rt)=>{rt.d(hs,{y:()=>ut});var i=rt(2961),u=rt(727),Ue=rt(8822),Zt=rt(9635),$e=rt(2416),Li=rt(576),Lt=rt(2806);let ut=(()=>{class E{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const ft=new E;return ft.source=this,ft.operator=Oe,ft}subscribe(Oe,ft,jt){const Nt=function gt(E){return E&&E instanceof i.Lv||function We(E){return E&&(0,Li.m)(E.next)&&(0,Li.m)(E.error)&&(0,Li.m)(E.complete)}(E)&&(0,u.Nn)(E)}(Oe)?Oe:new i.Hp(Oe,ft,jt);return(0,Lt.x)(()=>{const{operator:Di,source:bt}=this;Nt.add(Di?Di.call(Nt,bt):bt?this._subscribe(Nt):this._trySubscribe(Nt))}),Nt}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(ft){Oe.error(ft)}}forEach(Oe,ft){return new(ft=Si(ft))((jt,Nt)=>{const Di=new i.Hp({next:bt=>{try{Oe(bt)}catch(Rt){Nt(Rt),Di.unsubscribe()}},error:Nt,complete:jt});this.subscribe(Di)})}_subscribe(Oe){var ft;return null===(ft=this.source)||void 0===ft?void 0:ft.subscribe(Oe)}[Ue.L](){return this}pipe(...Oe){return(0,Zt.U)(Oe)(this)}toPromise(Oe){return new(Oe=Si(Oe))((ft,jt)=>{let Nt;this.subscribe(Di=>Nt=Di,Di=>jt(Di),()=>ft(Nt))})}}return E.create=at=>new E(at),E})();function Si(E){var at;return null!==(at=E??$e.v.Promise)&&void 0!==at?at:Promise}},7579:(An,hs,rt)=>{rt.d(hs,{x:()=>Lt});var i=rt(9751),u=rt(727);const Zt=(0,rt(3888).d)(Si=>function(){Si(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=rt(8737),Li=rt(2806);let Lt=(()=>{class Si extends i.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(gt){const E=new ut(this,this);return E.operator=gt,E}_throwIfClosed(){if(this.closed)throw new Zt}next(gt){(0,Li.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const E of this.currentObservers)E.next(gt)}})}error(gt){(0,Li.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=gt;const{observers:E}=this;for(;E.length;)E.shift().error(gt)}})}complete(){(0,Li.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:gt}=this;for(;gt.length;)gt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var gt;return(null===(gt=this.observers)||void 0===gt?void 0:gt.length)>0}_trySubscribe(gt){return this._throwIfClosed(),super._trySubscribe(gt)}_subscribe(gt){return this._throwIfClosed(),this._checkFinalizedStatuses(gt),this._innerSubscribe(gt)}_innerSubscribe(gt){const{hasError:E,isStopped:at,observers:Oe}=this;return E||at?u.Lc:(this.currentObservers=null,Oe.push(gt),new u.w0(()=>{this.currentObservers=null,(0,$e.P)(Oe,gt)}))}_checkFinalizedStatuses(gt){const{hasError:E,thrownError:at,isStopped:Oe}=this;E?gt.error(at):Oe&&gt.complete()}asObservable(){const gt=new i.y;return gt.source=this,gt}}return Si.create=(We,gt)=>new ut(We,gt),Si})();class ut extends Lt{constructor(We,gt){super(),this.destination=We,this.source=gt}next(We){var gt,E;null===(E=null===(gt=this.destination)||void 0===gt?void 0:gt.next)||void 0===E||E.call(gt,We)}error(We){var gt,E;null===(E=null===(gt=this.destination)||void 0===gt?void 0:gt.error)||void 0===E||E.call(gt,We)}complete(){var We,gt;null===(gt=null===(We=this.destination)||void 0===We?void 0:We.complete)||void 0===gt||gt.call(We)}_subscribe(We){var gt,E;return null!==(E=null===(gt=this.source)||void 0===gt?void 0:gt.subscribe(We))&&void 0!==E?E:u.Lc}}},2961:(An,hs,rt)=>{rt.d(hs,{Hp:()=>jt,Lv:()=>E});var i=rt(576),u=rt(727),Ue=rt(2416),Zt=rt(7849);function $e(){}const Li=Si("C",void 0,void 0);function Si(z,J,ve){return{kind:z,value:J,error:ve}}var We=rt(3410),gt=rt(2806);class E extends u.w0{constructor(J){super(),this.isStopped=!1,J?(this.destination=J,(0,u.Nn)(J)&&J.add(this)):this.destination=Rt}static create(J,ve,Ne){return new jt(J,ve,Ne)}next(J){this.isStopped?bt(function ut(z){return Si("N",z,void 0)}(J),this):this._next(J)}error(J){this.isStopped?bt(function Lt(z){return Si("E",void 0,z)}(J),this):(this.isStopped=!0,this._error(J))}complete(){this.isStopped?bt(Li,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(J){this.destination.next(J)}_error(J){try{this.destination.error(J)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Oe(z,J){return at.call(z,J)}class ft{constructor(J){this.partialObserver=J}next(J){const{partialObserver:ve}=this;if(ve.next)try{ve.next(J)}catch(Ne){Nt(Ne)}}error(J){const{partialObserver:ve}=this;if(ve.error)try{ve.error(J)}catch(Ne){Nt(Ne)}else Nt(J)}complete(){const{partialObserver:J}=this;if(J.complete)try{J.complete()}catch(ve){Nt(ve)}}}class jt extends E{constructor(J,ve,Ne){let ce;if(super(),(0,i.m)(J)||!J)ce={next:J??void 0,error:ve??void 0,complete:Ne??void 0};else{let be;this&&Ue.v.useDeprecatedNextContext?(be=Object.create(J),be.unsubscribe=()=>this.unsubscribe(),ce={next:J.next&&Oe(J.next,be),error:J.error&&Oe(J.error,be),complete:J.complete&&Oe(J.complete,be)}):ce=J}this.destination=new ft(ce)}}function Nt(z){Ue.v.useDeprecatedSynchronousErrorHandling?(0,gt.O)(z):(0,Zt.h)(z)}function bt(z,J){const{onStoppedNotification:ve}=Ue.v;ve&&We.z.setTimeout(()=>ve(z,J))}const Rt={closed:!0,next:$e,error:function Di(z){throw z},complete:$e}},727:(An,hs,rt)=>{rt.d(hs,{Lc:()=>Li,w0:()=>$e,Nn:()=>Lt});var i=rt(576);const Ue=(0,rt(3888).d)(Si=>function(gt){Si(this),this.message=gt?`${gt.length} errors occurred during unsubscription:\n${gt.map((E,at)=>`${at+1}) ${E.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=gt});var Zt=rt(8737);class $e{constructor(We){this.initialTeardown=We,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let We;if(!this.closed){this.closed=!0;const{_parentage:gt}=this;if(gt)if(this._parentage=null,Array.isArray(gt))for(const Oe of gt)Oe.remove(this);else gt.remove(this);const{initialTeardown:E}=this;if((0,i.m)(E))try{E()}catch(Oe){We=Oe instanceof Ue?Oe.errors:[Oe]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const Oe of at)try{ut(Oe)}catch(ft){We=We??[],ft instanceof Ue?We=[...We,...ft.errors]:We.push(ft)}}if(We)throw new Ue(We)}}add(We){var gt;if(We&&We!==this)if(this.closed)ut(We);else{if(We instanceof $e){if(We.closed||We._hasParent(this))return;We._addParent(this)}(this._finalizers=null!==(gt=this._finalizers)&&void 0!==gt?gt:[]).push(We)}}_hasParent(We){const{_parentage:gt}=this;return gt===We||Array.isArray(gt)&&gt.includes(We)}_addParent(We){const{_parentage:gt}=this;this._parentage=Array.isArray(gt)?(gt.push(We),gt):gt?[gt,We]:We}_removeParent(We){const{_parentage:gt}=this;gt===We?this._parentage=null:Array.isArray(gt)&&(0,Zt.P)(gt,We)}remove(We){const{_finalizers:gt}=this;gt&&(0,Zt.P)(gt,We),We instanceof $e&&We._removeParent(this)}}$e.EMPTY=(()=>{const Si=new $e;return Si.closed=!0,Si})();const Li=$e.EMPTY;function Lt(Si){return Si instanceof $e||Si&&"closed"in Si&&(0,i.m)(Si.remove)&&(0,i.m)(Si.add)&&(0,i.m)(Si.unsubscribe)}function ut(Si){(0,i.m)(Si)?Si():Si.unsubscribe()}},2416:(An,hs,rt)=>{rt.d(hs,{v:()=>i});const i={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(An,hs,rt)=>{rt.d(hs,{E:()=>u});const u=new(rt(9751).y)($e=>$e.complete())},4128:(An,hs,rt)=>{rt.d(hs,{D:()=>ut});var i=rt(9751),u=rt(4742),Ue=rt(8421),Zt=rt(7669),$e=rt(5403),Li=rt(3268),Lt=rt(1810);function ut(...Si){const We=(0,Zt.jO)(Si),{args:gt,keys:E}=(0,u.D)(Si),at=new i.y(Oe=>{const{length:ft}=gt;if(!ft)return void Oe.complete();const jt=new Array(ft);let Nt=ft,Di=ft;for(let bt=0;bt<ft;bt++){let Rt=!1;(0,Ue.Xf)(gt[bt]).subscribe((0,$e.x)(Oe,z=>{Rt||(Rt=!0,Di--),jt[bt]=z},()=>Nt--,void 0,()=>{(!Nt||!Rt)&&(Di||Oe.next(E?(0,Lt.n)(E,jt):jt),Oe.complete())}))}});return We?at.pipe((0,Li.Z)(We)):at}},2076:(An,hs,rt)=>{rt.d(hs,{D:()=>Ne});var i=rt(8421),u=rt(9672),Ue=rt(4482),Zt=rt(5403);function $e(ce,be=0){return(0,Ue.e)((Se,ue)=>{Se.subscribe((0,Zt.x)(ue,_e=>(0,u.f)(ue,ce,()=>ue.next(_e),be),()=>(0,u.f)(ue,ce,()=>ue.complete(),be),_e=>(0,u.f)(ue,ce,()=>ue.error(_e),be)))})}function Li(ce,be=0){return(0,Ue.e)((Se,ue)=>{ue.add(ce.schedule(()=>Se.subscribe(ue),be))})}var Si=rt(9751),gt=rt(2202),E=rt(576);function Oe(ce,be){if(!ce)throw new Error("Iterable cannot be null");return new Si.y(Se=>{(0,u.f)(Se,be,()=>{const ue=ce[Symbol.asyncIterator]();(0,u.f)(Se,be,()=>{ue.next().then(_e=>{_e.done?Se.complete():Se.next(_e.value)})},0,!0)})})}var ft=rt(3670),jt=rt(8239),Nt=rt(1144),Di=rt(6495),bt=rt(2206),Rt=rt(4532),z=rt(3260);function Ne(ce,be){return be?function ve(ce,be){if(null!=ce){if((0,ft.c)(ce))return function Lt(ce,be){return(0,i.Xf)(ce).pipe(Li(be),$e(be))}(ce,be);if((0,Nt.z)(ce))return function We(ce,be){return new Si.y(Se=>{let ue=0;return be.schedule(function(){ue===ce.length?Se.complete():(Se.next(ce[ue++]),Se.closed||this.schedule())})})}(ce,be);if((0,jt.t)(ce))return function ut(ce,be){return(0,i.Xf)(ce).pipe(Li(be),$e(be))}(ce,be);if((0,bt.D)(ce))return Oe(ce,be);if((0,Di.T)(ce))return function at(ce,be){return new Si.y(Se=>{let ue;return(0,u.f)(Se,be,()=>{ue=ce[gt.h](),(0,u.f)(Se,be,()=>{let _e,lt;try{({value:_e,done:lt}=ue.next())}catch(Xe){return void Se.error(Xe)}lt?Se.complete():Se.next(_e)},0,!0)}),()=>(0,E.m)(ue?.return)&&ue.return()})}(ce,be);if((0,z.L)(ce))return function J(ce,be){return Oe((0,z.Q)(ce),be)}(ce,be)}throw(0,Rt.z)(ce)}(ce,be):(0,i.Xf)(ce)}},8421:(An,hs,rt)=>{rt.d(hs,{Xf:()=>at});var i=rt(655),u=rt(1144),Ue=rt(8239),Zt=rt(9751),$e=rt(3670),Li=rt(2206),Lt=rt(4532),ut=rt(6495),Si=rt(3260),We=rt(576),gt=rt(7849),E=rt(8822);function at(z){if(z instanceof Zt.y)return z;if(null!=z){if((0,$e.c)(z))return function Oe(z){return new Zt.y(J=>{const ve=z[E.L]();if((0,We.m)(ve.subscribe))return ve.subscribe(J);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(z);if((0,u.z)(z))return function ft(z){return new Zt.y(J=>{for(let ve=0;ve<z.length&&!J.closed;ve++)J.next(z[ve]);J.complete()})}(z);if((0,Ue.t)(z))return function jt(z){return new Zt.y(J=>{z.then(ve=>{J.closed||(J.next(ve),J.complete())},ve=>J.error(ve)).then(null,gt.h)})}(z);if((0,Li.D)(z))return Di(z);if((0,ut.T)(z))return function Nt(z){return new Zt.y(J=>{for(const ve of z)if(J.next(ve),J.closed)return;J.complete()})}(z);if((0,Si.L)(z))return function bt(z){return Di((0,Si.Q)(z))}(z)}throw(0,Lt.z)(z)}function Di(z){return new Zt.y(J=>{(function Rt(z,J){var ve,Ne,ce,be;return(0,i.mG)(this,void 0,void 0,function*(){try{for(ve=(0,i.KL)(z);!(Ne=yield ve.next()).done;)if(J.next(Ne.value),J.closed)return}catch(Se){ce={error:Se}}finally{try{Ne&&!Ne.done&&(be=ve.return)&&(yield be.call(ve))}finally{if(ce)throw ce.error}}J.complete()})})(z,J).catch(ve=>J.error(ve))})}},9646:(An,hs,rt)=>{rt.d(hs,{of:()=>Ue});var i=rt(7669),u=rt(2076);function Ue(...Zt){const $e=(0,i.yG)(Zt);return(0,u.D)(Zt,$e)}},2843:(An,hs,rt)=>{rt.d(hs,{_:()=>Ue});var i=rt(9751),u=rt(576);function Ue(Zt,$e){const Li=(0,u.m)(Zt)?Zt:()=>Zt,Lt=ut=>ut.error(Li());return new i.y($e?ut=>$e.schedule(Lt,0,ut):Lt)}},5403:(An,hs,rt)=>{rt.d(hs,{x:()=>u});var i=rt(2961);function u(Zt,$e,Li,Lt,ut){return new Ue(Zt,$e,Li,Lt,ut)}class Ue extends i.Lv{constructor($e,Li,Lt,ut,Si,We){super($e),this.onFinalize=Si,this.shouldUnsubscribe=We,this._next=Li?function(gt){try{Li(gt)}catch(E){$e.error(E)}}:super._next,this._error=ut?function(gt){try{ut(gt)}catch(E){$e.error(E)}finally{this.unsubscribe()}}:super._error,this._complete=Lt?function(){try{Lt()}catch(gt){$e.error(gt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var $e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Li}=this;super.unsubscribe(),!Li&&(null===($e=this.onFinalize)||void 0===$e||$e.call(this))}}}},262:(An,hs,rt)=>{rt.d(hs,{K:()=>Zt});var i=rt(8421),u=rt(5403),Ue=rt(4482);function Zt($e){return(0,Ue.e)((Li,Lt)=>{let We,ut=null,Si=!1;ut=Li.subscribe((0,u.x)(Lt,void 0,void 0,gt=>{We=(0,i.Xf)($e(gt,Zt($e)(Li))),ut?(ut.unsubscribe(),ut=null,We.subscribe(Lt)):Si=!0})),Si&&(ut.unsubscribe(),ut=null,We.subscribe(Lt))})}},4351:(An,hs,rt)=>{rt.d(hs,{b:()=>Ue});var i=rt(5577),u=rt(576);function Ue(Zt,$e){return(0,u.m)($e)?(0,i.z)(Zt,$e,1):(0,i.z)(Zt,1)}},9300:(An,hs,rt)=>{rt.d(hs,{h:()=>Ue});var i=rt(4482),u=rt(5403);function Ue(Zt,$e){return(0,i.e)((Li,Lt)=>{let ut=0;Li.subscribe((0,u.x)(Lt,Si=>Zt.call($e,Si,ut++)&&Lt.next(Si)))})}},8746:(An,hs,rt)=>{rt.d(hs,{x:()=>u});var i=rt(4482);function u(Ue){return(0,i.e)((Zt,$e)=>{try{Zt.subscribe($e)}finally{$e.add(Ue)}})}},4004:(An,hs,rt)=>{rt.d(hs,{U:()=>Ue});var i=rt(4482),u=rt(5403);function Ue(Zt,$e){return(0,i.e)((Li,Lt)=>{let ut=0;Li.subscribe((0,u.x)(Lt,Si=>{Lt.next(Zt.call($e,Si,ut++))}))})}},8189:(An,hs,rt)=>{rt.d(hs,{J:()=>Ue});var i=rt(5577),u=rt(4671);function Ue(Zt=1/0){return(0,i.z)(u.y,Zt)}},5577:(An,hs,rt)=>{rt.d(hs,{z:()=>ut});var i=rt(4004),u=rt(8421),Ue=rt(4482),Zt=rt(9672),$e=rt(5403),Lt=rt(576);function ut(Si,We,gt=1/0){return(0,Lt.m)(We)?ut((E,at)=>(0,i.U)((Oe,ft)=>We(E,Oe,at,ft))((0,u.Xf)(Si(E,at))),gt):("number"==typeof We&&(gt=We),(0,Ue.e)((E,at)=>function Li(Si,We,gt,E,at,Oe,ft,jt){const Nt=[];let Di=0,bt=0,Rt=!1;const z=()=>{Rt&&!Nt.length&&!Di&&We.complete()},J=Ne=>Di<E?ve(Ne):Nt.push(Ne),ve=Ne=>{Oe&&We.next(Ne),Di++;let ce=!1;(0,u.Xf)(gt(Ne,bt++)).subscribe((0,$e.x)(We,be=>{at?.(be),Oe?J(be):We.next(be)},()=>{ce=!0},void 0,()=>{if(ce)try{for(Di--;Nt.length&&Di<E;){const be=Nt.shift();ft?(0,Zt.f)(We,ft,()=>ve(be)):ve(be)}z()}catch(be){We.error(be)}}))};return Si.subscribe((0,$e.x)(We,J,()=>{Rt=!0,z()})),()=>{jt?.()}}(E,at,Si,gt)))}},3099:(An,hs,rt)=>{rt.d(hs,{B:()=>$e});var i=rt(8421),u=rt(7579),Ue=rt(2961),Zt=rt(4482);function $e(Lt={}){const{connector:ut=(()=>new u.x),resetOnError:Si=!0,resetOnComplete:We=!0,resetOnRefCountZero:gt=!0}=Lt;return E=>{let at,Oe,ft,jt=0,Nt=!1,Di=!1;const bt=()=>{Oe?.unsubscribe(),Oe=void 0},Rt=()=>{bt(),at=ft=void 0,Nt=Di=!1},z=()=>{const J=at;Rt(),J?.unsubscribe()};return(0,Zt.e)((J,ve)=>{jt++,!Di&&!Nt&&bt();const Ne=ft=ft??ut();ve.add(()=>{jt--,0===jt&&!Di&&!Nt&&(Oe=Li(z,gt))}),Ne.subscribe(ve),!at&&jt>0&&(at=new Ue.Hp({next:ce=>Ne.next(ce),error:ce=>{Di=!0,bt(),Oe=Li(Rt,Si,ce),Ne.error(ce)},complete:()=>{Nt=!0,bt(),Oe=Li(Rt,We),Ne.complete()}}),(0,i.Xf)(J).subscribe(at))})(E)}}function Li(Lt,ut,...Si){if(!0===ut)return void Lt();if(!1===ut)return;const We=new Ue.Hp({next:()=>{We.unsubscribe(),Lt()}});return ut(...Si).subscribe(We)}},5698:(An,hs,rt)=>{rt.d(hs,{q:()=>Zt});var i=rt(515),u=rt(4482),Ue=rt(5403);function Zt($e){return $e<=0?()=>i.E:(0,u.e)((Li,Lt)=>{let ut=0;Li.subscribe((0,Ue.x)(Lt,Si=>{++ut<=$e&&(Lt.next(Si),$e<=ut&&Lt.complete())}))})}},8505:(An,hs,rt)=>{rt.d(hs,{b:()=>$e});var i=rt(576),u=rt(4482),Ue=rt(5403),Zt=rt(4671);function $e(Li,Lt,ut){const Si=(0,i.m)(Li)||Lt||ut?{next:Li,error:Lt,complete:ut}:Li;return Si?(0,u.e)((We,gt)=>{var E;null===(E=Si.subscribe)||void 0===E||E.call(Si);let at=!0;We.subscribe((0,Ue.x)(gt,Oe=>{var ft;null===(ft=Si.next)||void 0===ft||ft.call(Si,Oe),gt.next(Oe)},()=>{var Oe;at=!1,null===(Oe=Si.complete)||void 0===Oe||Oe.call(Si),gt.complete()},Oe=>{var ft;at=!1,null===(ft=Si.error)||void 0===ft||ft.call(Si,Oe),gt.error(Oe)},()=>{var Oe,ft;at&&(null===(Oe=Si.unsubscribe)||void 0===Oe||Oe.call(Si)),null===(ft=Si.finalize)||void 0===ft||ft.call(Si)}))}):Zt.y}},3410:(An,hs,rt)=>{rt.d(hs,{z:()=>i});const i={setTimeout(u,Ue,...Zt){const{delegate:$e}=i;return $e?.setTimeout?$e.setTimeout(u,Ue,...Zt):setTimeout(u,Ue,...Zt)},clearTimeout(u){const{delegate:Ue}=i;return(Ue?.clearTimeout||clearTimeout)(u)},delegate:void 0}},2202:(An,hs,rt)=>{rt.d(hs,{h:()=>u});const u=function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(An,hs,rt)=>{rt.d(hs,{L:()=>i});const i="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(An,hs,rt)=>{rt.d(hs,{_6:()=>Li,jO:()=>Zt,yG:()=>$e});var i=rt(576);function Ue(Lt){return Lt[Lt.length-1]}function Zt(Lt){return(0,i.m)(Ue(Lt))?Lt.pop():void 0}function $e(Lt){return function u(Lt){return Lt&&(0,i.m)(Lt.schedule)}(Ue(Lt))?Lt.pop():void 0}function Li(Lt,ut){return"number"==typeof Ue(Lt)?Lt.pop():ut}},4742:(An,hs,rt)=>{rt.d(hs,{D:()=>$e});const{isArray:i}=Array,{getPrototypeOf:u,prototype:Ue,keys:Zt}=Object;function $e(Lt){if(1===Lt.length){const ut=Lt[0];if(i(ut))return{args:ut,keys:null};if(function Li(Lt){return Lt&&"object"==typeof Lt&&u(Lt)===Ue}(ut)){const Si=Zt(ut);return{args:Si.map(We=>ut[We]),keys:Si}}}return{args:Lt,keys:null}}},8737:(An,hs,rt)=>{function i(u,Ue){if(u){const Zt=u.indexOf(Ue);0<=Zt&&u.splice(Zt,1)}}rt.d(hs,{P:()=>i})},3888:(An,hs,rt)=>{function i(u){const Zt=u($e=>{Error.call($e),$e.stack=(new Error).stack});return Zt.prototype=Object.create(Error.prototype),Zt.prototype.constructor=Zt,Zt}rt.d(hs,{d:()=>i})},1810:(An,hs,rt)=>{function i(u,Ue){return u.reduce((Zt,$e,Li)=>(Zt[$e]=Ue[Li],Zt),{})}rt.d(hs,{n:()=>i})},2806:(An,hs,rt)=>{rt.d(hs,{O:()=>Zt,x:()=>Ue});var i=rt(2416);let u=null;function Ue($e){if(i.v.useDeprecatedSynchronousErrorHandling){const Li=!u;if(Li&&(u={errorThrown:!1,error:null}),$e(),Li){const{errorThrown:Lt,error:ut}=u;if(u=null,Lt)throw ut}}else $e()}function Zt($e){i.v.useDeprecatedSynchronousErrorHandling&&u&&(u.errorThrown=!0,u.error=$e)}},9672:(An,hs,rt)=>{function i(u,Ue,Zt,$e=0,Li=!1){const Lt=Ue.schedule(function(){Zt(),Li?u.add(this.schedule(null,$e)):this.unsubscribe()},$e);if(u.add(Lt),!Li)return Lt}rt.d(hs,{f:()=>i})},4671:(An,hs,rt)=>{function i(u){return u}rt.d(hs,{y:()=>i})},1144:(An,hs,rt)=>{rt.d(hs,{z:()=>i});const i=u=>u&&"number"==typeof u.length&&"function"!=typeof u},2206:(An,hs,rt)=>{rt.d(hs,{D:()=>u});var i=rt(576);function u(Ue){return Symbol.asyncIterator&&(0,i.m)(Ue?.[Symbol.asyncIterator])}},576:(An,hs,rt)=>{function i(u){return"function"==typeof u}rt.d(hs,{m:()=>i})},3670:(An,hs,rt)=>{rt.d(hs,{c:()=>Ue});var i=rt(8822),u=rt(576);function Ue(Zt){return(0,u.m)(Zt[i.L])}},6495:(An,hs,rt)=>{rt.d(hs,{T:()=>Ue});var i=rt(2202),u=rt(576);function Ue(Zt){return(0,u.m)(Zt?.[i.h])}},8239:(An,hs,rt)=>{rt.d(hs,{t:()=>u});var i=rt(576);function u(Ue){return(0,i.m)(Ue?.then)}},3260:(An,hs,rt)=>{rt.d(hs,{L:()=>Zt,Q:()=>Ue});var i=rt(655),u=rt(576);function Ue($e){return(0,i.FC)(this,arguments,function*(){const Lt=$e.getReader();try{for(;;){const{value:ut,done:Si}=yield(0,i.qq)(Lt.read());if(Si)return yield(0,i.qq)(void 0);yield yield(0,i.qq)(ut)}}finally{Lt.releaseLock()}})}function Zt($e){return(0,u.m)($e?.getReader)}},4482:(An,hs,rt)=>{rt.d(hs,{A:()=>u,e:()=>Ue});var i=rt(576);function u(Zt){return(0,i.m)(Zt?.lift)}function Ue(Zt){return $e=>{if(u($e))return $e.lift(function(Li){try{return Zt(Li,this)}catch(Lt){this.error(Lt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(An,hs,rt)=>{rt.d(hs,{Z:()=>Zt});var i=rt(4004);const{isArray:u}=Array;function Zt($e){return(0,i.U)(Li=>function Ue($e,Li){return u(Li)?$e(...Li):$e(Li)}($e,Li))}},9635:(An,hs,rt)=>{rt.d(hs,{U:()=>Ue,z:()=>u});var i=rt(4671);function u(...Zt){return Ue(Zt)}function Ue(Zt){return 0===Zt.length?i.y:1===Zt.length?Zt[0]:function(Li){return Zt.reduce((Lt,ut)=>ut(Lt),Li)}}},7849:(An,hs,rt)=>{rt.d(hs,{h:()=>Ue});var i=rt(2416),u=rt(3410);function Ue(Zt){u.z.setTimeout(()=>{const{onUnhandledError:$e}=i.v;if(!$e)throw Zt;$e(Zt)})}},4532:(An,hs,rt)=>{function i(u){return new TypeError(`You provided ${null!==u&&"object"==typeof u?"an invalid object":`'${u}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}rt.d(hs,{z:()=>i})},655:(An,hs,rt)=>{function E(B,de,Be,Fe){return new(Be||(Be=Promise))(function($t,ji){function is(Ut){try{ui(Fe.next(Ut))}catch(oi){ji(oi)}}function zi(Ut){try{ui(Fe.throw(Ut))}catch(oi){ji(oi)}}function ui(Ut){Ut.done?$t(Ut.value):function xt($t){return $t instanceof Be?$t:new Be(function(ji){ji($t)})}(Ut.value).then(is,zi)}ui((Fe=Fe.apply(B,de||[])).next())})}function z(B){return this instanceof z?(this.v=B,this):new z(B)}function J(B,de,Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt,Fe=Be.apply(B,de||[]),$t=[];return xt={},ji("next"),ji("throw"),ji("return"),xt[Symbol.asyncIterator]=function(){return this},xt;function ji(us){Fe[us]&&(xt[us]=function(Us){return new Promise(function($i,et){$t.push([us,Us,$i,et])>1||is(us,Us)})})}function is(us,Us){try{!function zi(us){us.value instanceof z?Promise.resolve(us.value.v).then(ui,Ut):oi($t[0][2],us)}(Fe[us](Us))}catch($i){oi($t[0][3],$i)}}function ui(us){is("next",us)}function Ut(us){is("throw",us)}function oi(us,Us){us(Us),$t.shift(),$t.length&&is($t[0][0],$t[0][1])}}function Ne(B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,de=B[Symbol.asyncIterator];return de?de.call(B):(B=function jt(B){var de="function"==typeof Symbol&&Symbol.iterator,Be=de&&B[de],Fe=0;if(Be)return Be.call(B);if(B&&"number"==typeof B.length)return{next:function(){return B&&Fe>=B.length&&(B=void 0),{value:B&&B[Fe++],done:!B}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(B),Be={},Fe("next"),Fe("throw"),Fe("return"),Be[Symbol.asyncIterator]=function(){return this},Be);function Fe($t){Be[$t]=B[$t]&&function(ji){return new Promise(function(is,zi){!function xt($t,ji,is,zi){Promise.resolve(zi).then(function(ui){$t({value:ui,done:is})},ji)}(is,zi,(ji=B[$t](ji)).done,ji.value)})}}}rt.d(hs,{FC:()=>J,KL:()=>Ne,mG:()=>E,qq:()=>z})},7340:(An,hs,rt)=>{rt.d(hs,{LC:()=>u,SB:()=>Si,X$:()=>Zt,ZE:()=>bt,ZN:()=>Di,_j:()=>i,eR:()=>gt,jt:()=>$e,k1:()=>Rt,l3:()=>Ue,oB:()=>ut,vP:()=>Lt});class i{}class u{}const Ue="*";function Zt(z,J){return{type:7,name:z,definitions:J,options:{}}}function $e(z,J=null){return{type:4,styles:J,timings:z}}function Lt(z,J=null){return{type:2,steps:z,options:J}}function ut(z){return{type:6,styles:z,offset:null}}function Si(z,J,ve){return{type:0,name:z,styles:J,options:ve}}function gt(z,J,ve=null){return{type:1,expr:z,animation:J,options:ve}}function Nt(z){Promise.resolve().then(z)}class Di{constructor(J=0,ve=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=J+ve}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(J=>J()),this._onDoneFns=[])}onStart(J){this._originalOnStartFns.push(J),this._onStartFns.push(J)}onDone(J){this._originalOnDoneFns.push(J),this._onDoneFns.push(J)}onDestroy(J){this._onDestroyFns.push(J)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Nt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(J=>J()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(J=>J()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(J){this._position=this.totalTime?J*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(J){const ve="start"==J?this._onStartFns:this._onDoneFns;ve.forEach(Ne=>Ne()),ve.length=0}}class bt{constructor(J){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=J;let ve=0,Ne=0,ce=0;const be=this.players.length;0==be?Nt(()=>this._onFinish()):this.players.forEach(Se=>{Se.onDone(()=>{++ve==be&&this._onFinish()}),Se.onDestroy(()=>{++Ne==be&&this._onDestroy()}),Se.onStart(()=>{++ce==be&&this._onStart()})}),this.totalTime=this.players.reduce((Se,ue)=>Math.max(Se,ue.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(J=>J()),this._onDoneFns=[])}init(){this.players.forEach(J=>J.init())}onStart(J){this._onStartFns.push(J)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(J=>J()),this._onStartFns=[])}onDone(J){this._onDoneFns.push(J)}onDestroy(J){this._onDestroyFns.push(J)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(J=>J.play())}pause(){this.players.forEach(J=>J.pause())}restart(){this.players.forEach(J=>J.restart())}finish(){this._onFinish(),this.players.forEach(J=>J.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(J=>J.destroy()),this._onDestroyFns.forEach(J=>J()),this._onDestroyFns=[])}reset(){this.players.forEach(J=>J.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(J){const ve=J*this.totalTime;this.players.forEach(Ne=>{const ce=Ne.totalTime?Math.min(1,ve/Ne.totalTime):1;Ne.setPosition(ce)})}getPosition(){const J=this.players.reduce((ve,Ne)=>null===ve||Ne.totalTime>ve.totalTime?Ne:ve,null);return null!=J?J.getPosition():0}beforeDestroy(){this.players.forEach(J=>{J.beforeDestroy&&J.beforeDestroy()})}triggerCallback(J){const ve="start"==J?this._onStartFns:this._onDoneFns;ve.forEach(Ne=>Ne()),ve.length=0}}const Rt="!"},6895:(An,hs,rt)=>{rt.d(hs,{Do:()=>Rt,EM:()=>Ce,HT:()=>$e,JF:()=>Vi,K0:()=>Lt,Mx:()=>hn,NF:()=>xi,O5:()=>wr,S$:()=>Nt,V_:()=>We,Ye:()=>z,b0:()=>bt,bD:()=>$r,ez:()=>qs,mk:()=>cn,q:()=>Ue,sg:()=>tn,w_:()=>Li});var i=rt(8274);let u=null;function Ue(){return u}function $e(R){u||(u=R)}class Li{}const Lt=new i.OlP("DocumentToken");let ut=(()=>{class R{historyGo(G){throw new Error("Not implemented")}}return R.\u0275fac=function(G){return new(G||R)},R.\u0275prov=i.Yz7({token:R,factory:function(){return function Si(){return(0,i.LFG)(gt)}()},providedIn:"platform"}),R})();const We=new i.OlP("Location Initialized");let gt=(()=>{class R extends ut{constructor(G){super(),this._doc=G,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ue().getBaseHref(this._doc)}onPopState(G){const ye=Ue().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("popstate",G,!1),()=>ye.removeEventListener("popstate",G)}onHashChange(G){const ye=Ue().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("hashchange",G,!1),()=>ye.removeEventListener("hashchange",G)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(G){this.location.pathname=G}pushState(G,ye,ee){E()?this._history.pushState(G,ye,ee):this.location.hash=ee}replaceState(G,ye,ee){E()?this._history.replaceState(G,ye,ee):this.location.hash=ee}forward(){this._history.forward()}back(){this._history.back()}historyGo(G=0){this._history.go(G)}getState(){return this._history.state}}return R.\u0275fac=function(G){return new(G||R)(i.LFG(Lt))},R.\u0275prov=i.Yz7({token:R,factory:function(){return function at(){return new gt((0,i.LFG)(Lt))}()},providedIn:"platform"}),R})();function E(){return!!window.history.pushState}function Oe(R,K){if(0==R.length)return K;if(0==K.length)return R;let G=0;return R.endsWith("/")&&G++,K.startsWith("/")&&G++,2==G?R+K.substring(1):1==G?R+K:R+"/"+K}function ft(R){const K=R.match(/#|\?|$/),G=K&&K.index||R.length;return R.slice(0,G-("/"===R[G-1]?1:0))+R.slice(G)}function jt(R){return R&&"?"!==R[0]?"?"+R:R}let Nt=(()=>{class R{historyGo(G){throw new Error("Not implemented")}}return R.\u0275fac=function(G){return new(G||R)},R.\u0275prov=i.Yz7({token:R,factory:function(){return(0,i.f3M)(bt)},providedIn:"root"}),R})();const Di=new i.OlP("appBaseHref");let bt=(()=>{class R extends Nt{constructor(G,ye){super(),this._platformLocation=G,this._removeListenerFns=[],this._baseHref=ye??this._platformLocation.getBaseHrefFromDOM()??(0,i.f3M)(Lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}prepareExternalUrl(G){return Oe(this._baseHref,G)}path(G=!1){const ye=this._platformLocation.pathname+jt(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&G?`${ye}${ee}`:ye}pushState(G,ye,ee,te){const ie=this.prepareExternalUrl(ee+jt(te));this._platformLocation.pushState(G,ye,ie)}replaceState(G,ye,ee,te){const ie=this.prepareExternalUrl(ee+jt(te));this._platformLocation.replaceState(G,ye,ie)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return R.\u0275fac=function(G){return new(G||R)(i.LFG(ut),i.LFG(Di,8))},R.\u0275prov=i.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Rt=(()=>{class R extends Nt{constructor(G,ye){super(),this._platformLocation=G,this._baseHref="",this._removeListenerFns=[],null!=ye&&(this._baseHref=ye)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}path(G=!1){let ye=this._platformLocation.hash;return null==ye&&(ye="#"),ye.length>0?ye.substring(1):ye}prepareExternalUrl(G){const ye=Oe(this._baseHref,G);return ye.length>0?"#"+ye:ye}pushState(G,ye,ee,te){let ie=this.prepareExternalUrl(ee+jt(te));0==ie.length&&(ie=this._platformLocation.pathname),this._platformLocation.pushState(G,ye,ie)}replaceState(G,ye,ee,te){let ie=this.prepareExternalUrl(ee+jt(te));0==ie.length&&(ie=this._platformLocation.pathname),this._platformLocation.replaceState(G,ye,ie)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return R.\u0275fac=function(G){return new(G||R)(i.LFG(ut),i.LFG(Di,8))},R.\u0275prov=i.Yz7({token:R,factory:R.\u0275fac}),R})(),z=(()=>{class R{constructor(G){this._subject=new i.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=G;const ye=this._locationStrategy.getBaseHref();this._baseHref=ft(Ne(ye)),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(G=!1){return this.normalize(this._locationStrategy.path(G))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(G,ye=""){return this.path()==this.normalize(G+jt(ye))}normalize(G){return R.stripTrailingSlash(function ve(R,K){return R&&K.startsWith(R)?K.substring(R.length):K}(this._baseHref,Ne(G)))}prepareExternalUrl(G){return G&&"/"!==G[0]&&(G="/"+G),this._locationStrategy.prepareExternalUrl(G)}go(G,ye="",ee=null){this._locationStrategy.pushState(ee,"",G,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+jt(ye)),ee)}replaceState(G,ye="",ee=null){this._locationStrategy.replaceState(ee,"",G,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+jt(ye)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(G=0){this._locationStrategy.historyGo?.(G)}onUrlChange(G){return this._urlChangeListeners.push(G),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ye=>{this._notifyUrlChangeListeners(ye.url,ye.state)})),()=>{const ye=this._urlChangeListeners.indexOf(G);this._urlChangeListeners.splice(ye,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(G="",ye){this._urlChangeListeners.forEach(ee=>ee(G,ye))}subscribe(G,ye,ee){return this._subject.subscribe({next:G,error:ye,complete:ee})}}return R.normalizeQueryParams=jt,R.joinWithSlash=Oe,R.stripTrailingSlash=ft,R.\u0275fac=function(G){return new(G||R)(i.LFG(Nt))},R.\u0275prov=i.Yz7({token:R,factory:function(){return function J(){return new z((0,i.LFG)(Nt))}()},providedIn:"root"}),R})();function Ne(R){return R.replace(/\/index.html$/,"")}function hn(R,K){K=encodeURIComponent(K);for(const G of R.split(";")){const ye=G.indexOf("="),[ee,te]=-1==ye?[G,""]:[G.slice(0,ye),G.slice(ye+1)];if(ee.trim()===K)return decodeURIComponent(te)}return null}let cn=(()=>{class R{constructor(G,ye,ee,te){this._iterableDiffers=G,this._keyValueDiffers=ye,this._ngEl=ee,this._renderer=te,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(G){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof G?G.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(G){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof G?G.split(/\s+/):G,this._rawClass&&((0,i.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const G=this._iterableDiffer.diff(this._rawClass);G&&this._applyIterableChanges(G)}else if(this._keyValueDiffer){const G=this._keyValueDiffer.diff(this._rawClass);G&&this._applyKeyValueChanges(G)}}_applyKeyValueChanges(G){G.forEachAddedItem(ye=>this._toggleClass(ye.key,ye.currentValue)),G.forEachChangedItem(ye=>this._toggleClass(ye.key,ye.currentValue)),G.forEachRemovedItem(ye=>{ye.previousValue&&this._toggleClass(ye.key,!1)})}_applyIterableChanges(G){G.forEachAddedItem(ye=>{if("string"!=typeof ye.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,i.AaK)(ye.item)}`);this._toggleClass(ye.item,!0)}),G.forEachRemovedItem(ye=>this._toggleClass(ye.item,!1))}_applyClasses(G){G&&(Array.isArray(G)||G instanceof Set?G.forEach(ye=>this._toggleClass(ye,!0)):Object.keys(G).forEach(ye=>this._toggleClass(ye,!!G[ye])))}_removeClasses(G){G&&(Array.isArray(G)||G instanceof Set?G.forEach(ye=>this._toggleClass(ye,!1)):Object.keys(G).forEach(ye=>this._toggleClass(ye,!1)))}_toggleClass(G,ye){(G=G.trim())&&G.split(/\s+/g).forEach(ee=>{ye?this._renderer.addClass(this._ngEl.nativeElement,ee):this._renderer.removeClass(this._ngEl.nativeElement,ee)})}}return R.\u0275fac=function(G){return new(G||R)(i.Y36(i.ZZ4),i.Y36(i.aQg),i.Y36(i.SBq),i.Y36(i.Qsj))},R.\u0275dir=i.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),R})();class gr{constructor(K,G,ye,ee){this.$implicit=K,this.ngForOf=G,this.index=ye,this.count=ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tn=(()=>{class R{constructor(G,ye,ee){this._viewContainer=G,this._template=ye,this._differs=ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(G){this._ngForOf=G,this._ngForOfDirty=!0}set ngForTrackBy(G){this._trackByFn=G}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(G){G&&(this._template=G)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const G=this._ngForOf;!this._differ&&G&&(this._differ=this._differs.find(G).create(this.ngForTrackBy))}if(this._differ){const G=this._differ.diff(this._ngForOf);G&&this._applyChanges(G)}}_applyChanges(G){const ye=this._viewContainer;G.forEachOperation((ee,te,ie)=>{if(null==ee.previousIndex)ye.createEmbeddedView(this._template,new gr(ee.item,this._ngForOf,-1,-1),null===ie?void 0:ie);else if(null==ie)ye.remove(null===te?void 0:te);else if(null!==te){const xe=ye.get(te);ye.move(xe,ie),mr(xe,ee)}});for(let ee=0,te=ye.length;ee<te;ee++){const xe=ye.get(ee).context;xe.index=ee,xe.count=te,xe.ngForOf=this._ngForOf}G.forEachIdentityChange(ee=>{mr(ye.get(ee.currentIndex),ee)})}static ngTemplateContextGuard(G,ye){return!0}}return R.\u0275fac=function(G){return new(G||R)(i.Y36(i.s_b),i.Y36(i.Rgc),i.Y36(i.ZZ4))},R.\u0275dir=i.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function mr(R,K){R.context.$implicit=K.item}let wr=(()=>{class R{constructor(G,ye){this._viewContainer=G,this._context=new ro,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ye}set ngIf(G){this._context.$implicit=this._context.ngIf=G,this._updateView()}set ngIfThen(G){Br("ngIfThen",G),this._thenTemplateRef=G,this._thenViewRef=null,this._updateView()}set ngIfElse(G){Br("ngIfElse",G),this._elseTemplateRef=G,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(G,ye){return!0}}return R.\u0275fac=function(G){return new(G||R)(i.Y36(i.s_b),i.Y36(i.Rgc))},R.\u0275dir=i.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class ro{constructor(){this.$implicit=null,this.ngIf=null}}function Br(R,K){if(K&&!K.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,i.AaK)(K)}'.`)}let qs=(()=>{class R{}return R.\u0275fac=function(G){return new(G||R)},R.\u0275mod=i.oAB({type:R}),R.\u0275inj=i.cJS({}),R})();const $r="browser";function xi(R){return R===$r}let Ce=(()=>{class R{}return R.\u0275prov=(0,i.Yz7)({token:R,providedIn:"root",factory:()=>new pt((0,i.LFG)(Lt),window)}),R})();class pt{constructor(K,G){this.document=K,this.window=G,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const G=function wi(R,K){const G=R.getElementById(K)||R.getElementsByName(K)[0];if(G)return G;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const ye=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let ee=ye.currentNode;for(;ee;){const te=ee.shadowRoot;if(te){const ie=te.getElementById(K)||te.querySelector(`[name="${K}"]`);if(ie)return ie}ee=ye.nextNode()}}return null}(this.document,K);G&&(this.scrollToElement(G),G.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const G=this.window.history;G&&G.scrollRestoration&&(G.scrollRestoration=K)}}scrollToElement(K){const G=K.getBoundingClientRect(),ye=G.left+this.window.pageXOffset,ee=G.top+this.window.pageYOffset,te=this.offset();this.window.scrollTo(ye-te[0],ee-te[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Mt(this.window.history)||Mt(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Mt(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Vi{}},529:(An,hs,rt)=>{rt.d(hs,{JF:()=>At,WM:()=>We,eN:()=>de});var i=rt(6895),u=rt(8274),Ue=rt(9646),Zt=rt(9751),$e=rt(4351),Li=rt(9300),Lt=rt(4004);class ut{}class Si{}class We{constructor(Dt){this.normalizedNames=new Map,this.lazyUpdate=null,Dt?this.lazyInit="string"==typeof Dt?()=>{this.headers=new Map,Dt.split("\n").forEach(Pt=>{const di=Pt.indexOf(":");if(di>0){const ot=Pt.slice(0,di),hi=ot.toLowerCase(),Ei=Pt.slice(di+1).trim();this.maybeSetNormalizedName(ot,hi),this.headers.has(hi)?this.headers.get(hi).push(Ei):this.headers.set(hi,[Ei])}})}:()=>{this.headers=new Map,Object.keys(Dt).forEach(Pt=>{let di=Dt[Pt];const ot=Pt.toLowerCase();"string"==typeof di&&(di=[di]),di.length>0&&(this.headers.set(ot,di),this.maybeSetNormalizedName(Pt,ot))})}:this.headers=new Map}has(Dt){return this.init(),this.headers.has(Dt.toLowerCase())}get(Dt){this.init();const Pt=this.headers.get(Dt.toLowerCase());return Pt&&Pt.length>0?Pt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Dt){return this.init(),this.headers.get(Dt.toLowerCase())||null}append(Dt,Pt){return this.clone({name:Dt,value:Pt,op:"a"})}set(Dt,Pt){return this.clone({name:Dt,value:Pt,op:"s"})}delete(Dt,Pt){return this.clone({name:Dt,value:Pt,op:"d"})}maybeSetNormalizedName(Dt,Pt){this.normalizedNames.has(Pt)||this.normalizedNames.set(Pt,Dt)}init(){this.lazyInit&&(this.lazyInit instanceof We?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Dt=>this.applyUpdate(Dt)),this.lazyUpdate=null))}copyFrom(Dt){Dt.init(),Array.from(Dt.headers.keys()).forEach(Pt=>{this.headers.set(Pt,Dt.headers.get(Pt)),this.normalizedNames.set(Pt,Dt.normalizedNames.get(Pt))})}clone(Dt){const Pt=new We;return Pt.lazyInit=this.lazyInit&&this.lazyInit instanceof We?this.lazyInit:this,Pt.lazyUpdate=(this.lazyUpdate||[]).concat([Dt]),Pt}applyUpdate(Dt){const Pt=Dt.name.toLowerCase();switch(Dt.op){case"a":case"s":let di=Dt.value;if("string"==typeof di&&(di=[di]),0===di.length)return;this.maybeSetNormalizedName(Dt.name,Pt);const ot=("a"===Dt.op?this.headers.get(Pt):void 0)||[];ot.push(...di),this.headers.set(Pt,ot);break;case"d":const hi=Dt.value;if(hi){let Ei=this.headers.get(Pt);if(!Ei)return;Ei=Ei.filter(Ui=>-1===hi.indexOf(Ui)),0===Ei.length?(this.headers.delete(Pt),this.normalizedNames.delete(Pt)):this.headers.set(Pt,Ei)}else this.headers.delete(Pt),this.normalizedNames.delete(Pt)}}forEach(Dt){this.init(),Array.from(this.normalizedNames.keys()).forEach(Pt=>Dt(this.normalizedNames.get(Pt),this.headers.get(Pt)))}}class E{encodeKey(Dt){return jt(Dt)}encodeValue(Dt){return jt(Dt)}decodeKey(Dt){return decodeURIComponent(Dt)}decodeValue(Dt){return decodeURIComponent(Dt)}}const Oe=/%(\d[a-f0-9])/gi,ft={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function jt(Gt){return encodeURIComponent(Gt).replace(Oe,(Dt,Pt)=>ft[Pt]??Dt)}function Nt(Gt){return`${Gt}`}class Di{constructor(Dt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Dt.encoder||new E,Dt.fromString){if(Dt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function at(Gt,Dt){const Pt=new Map;return Gt.length>0&&Gt.replace(/^\?/,"").split("&").forEach(ot=>{const hi=ot.indexOf("="),[Ei,Ui]=-1==hi?[Dt.decodeKey(ot),""]:[Dt.decodeKey(ot.slice(0,hi)),Dt.decodeValue(ot.slice(hi+1))],As=Pt.get(Ei)||[];As.push(Ui),Pt.set(Ei,As)}),Pt}(Dt.fromString,this.encoder)}else Dt.fromObject?(this.map=new Map,Object.keys(Dt.fromObject).forEach(Pt=>{const di=Dt.fromObject[Pt],ot=Array.isArray(di)?di.map(Nt):[Nt(di)];this.map.set(Pt,ot)})):this.map=null}has(Dt){return this.init(),this.map.has(Dt)}get(Dt){this.init();const Pt=this.map.get(Dt);return Pt?Pt[0]:null}getAll(Dt){return this.init(),this.map.get(Dt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Dt,Pt){return this.clone({param:Dt,value:Pt,op:"a"})}appendAll(Dt){const Pt=[];return Object.keys(Dt).forEach(di=>{const ot=Dt[di];Array.isArray(ot)?ot.forEach(hi=>{Pt.push({param:di,value:hi,op:"a"})}):Pt.push({param:di,value:ot,op:"a"})}),this.clone(Pt)}set(Dt,Pt){return this.clone({param:Dt,value:Pt,op:"s"})}delete(Dt,Pt){return this.clone({param:Dt,value:Pt,op:"d"})}toString(){return this.init(),this.keys().map(Dt=>{const Pt=this.encoder.encodeKey(Dt);return this.map.get(Dt).map(di=>Pt+"="+this.encoder.encodeValue(di)).join("&")}).filter(Dt=>""!==Dt).join("&")}clone(Dt){const Pt=new Di({encoder:this.encoder});return Pt.cloneFrom=this.cloneFrom||this,Pt.updates=(this.updates||[]).concat(Dt),Pt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Dt=>this.map.set(Dt,this.cloneFrom.map.get(Dt))),this.updates.forEach(Dt=>{switch(Dt.op){case"a":case"s":const Pt=("a"===Dt.op?this.map.get(Dt.param):void 0)||[];Pt.push(Nt(Dt.value)),this.map.set(Dt.param,Pt);break;case"d":if(void 0===Dt.value){this.map.delete(Dt.param);break}{let di=this.map.get(Dt.param)||[];const ot=di.indexOf(Nt(Dt.value));-1!==ot&&di.splice(ot,1),di.length>0?this.map.set(Dt.param,di):this.map.delete(Dt.param)}}}),this.cloneFrom=this.updates=null)}}class Rt{constructor(){this.map=new Map}set(Dt,Pt){return this.map.set(Dt,Pt),this}get(Dt){return this.map.has(Dt)||this.map.set(Dt,Dt.defaultValue()),this.map.get(Dt)}delete(Dt){return this.map.delete(Dt),this}has(Dt){return this.map.has(Dt)}keys(){return this.map.keys()}}function J(Gt){return typeof ArrayBuffer<"u"&&Gt instanceof ArrayBuffer}function ve(Gt){return typeof Blob<"u"&&Gt instanceof Blob}function Ne(Gt){return typeof FormData<"u"&&Gt instanceof FormData}class be{constructor(Dt,Pt,di,ot){let hi;if(this.url=Pt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Dt.toUpperCase(),function z(Gt){switch(Gt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ot?(this.body=void 0!==di?di:null,hi=ot):hi=di,hi&&(this.reportProgress=!!hi.reportProgress,this.withCredentials=!!hi.withCredentials,hi.responseType&&(this.responseType=hi.responseType),hi.headers&&(this.headers=hi.headers),hi.context&&(this.context=hi.context),hi.params&&(this.params=hi.params)),this.headers||(this.headers=new We),this.context||(this.context=new Rt),this.params){const Ei=this.params.toString();if(0===Ei.length)this.urlWithParams=Pt;else{const Ui=Pt.indexOf("?");this.urlWithParams=Pt+(-1===Ui?"?":Ui<Pt.length-1?"&":"")+Ei}}else this.params=new Di,this.urlWithParams=Pt}serializeBody(){return null===this.body?null:J(this.body)||ve(this.body)||Ne(this.body)||function ce(Gt){return typeof URLSearchParams<"u"&&Gt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Di?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ne(this.body)?null:ve(this.body)?this.body.type||null:J(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Di?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Dt={}){const Pt=Dt.method||this.method,di=Dt.url||this.url,ot=Dt.responseType||this.responseType,hi=void 0!==Dt.body?Dt.body:this.body,Ei=void 0!==Dt.withCredentials?Dt.withCredentials:this.withCredentials,Ui=void 0!==Dt.reportProgress?Dt.reportProgress:this.reportProgress;let As=Dt.headers||this.headers,bs=Dt.params||this.params;const kt=Dt.context??this.context;return void 0!==Dt.setHeaders&&(As=Object.keys(Dt.setHeaders).reduce((wt,Ot)=>wt.set(Ot,Dt.setHeaders[Ot]),As)),Dt.setParams&&(bs=Object.keys(Dt.setParams).reduce((wt,Ot)=>wt.set(Ot,Dt.setParams[Ot]),bs)),new be(Pt,di,hi,{params:bs,headers:As,context:kt,reportProgress:Ui,responseType:ot,withCredentials:Ei})}}var Se=(()=>((Se=Se||{})[Se.Sent=0]="Sent",Se[Se.UploadProgress=1]="UploadProgress",Se[Se.ResponseHeader=2]="ResponseHeader",Se[Se.DownloadProgress=3]="DownloadProgress",Se[Se.Response=4]="Response",Se[Se.User=5]="User",Se))();class ue{constructor(Dt,Pt=200,di="OK"){this.headers=Dt.headers||new We,this.status=void 0!==Dt.status?Dt.status:Pt,this.statusText=Dt.statusText||di,this.url=Dt.url||null,this.ok=this.status>=200&&this.status<300}}class _e extends ue{constructor(Dt={}){super(Dt),this.type=Se.ResponseHeader}clone(Dt={}){return new _e({headers:Dt.headers||this.headers,status:void 0!==Dt.status?Dt.status:this.status,statusText:Dt.statusText||this.statusText,url:Dt.url||this.url||void 0})}}class lt extends ue{constructor(Dt={}){super(Dt),this.type=Se.Response,this.body=void 0!==Dt.body?Dt.body:null}clone(Dt={}){return new lt({body:void 0!==Dt.body?Dt.body:this.body,headers:Dt.headers||this.headers,status:void 0!==Dt.status?Dt.status:this.status,statusText:Dt.statusText||this.statusText,url:Dt.url||this.url||void 0})}}class Xe extends ue{constructor(Dt){super(Dt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Dt.url||"(unknown url)"}`:`Http failure response for ${Dt.url||"(unknown url)"}: ${Dt.status} ${Dt.statusText}`,this.error=Dt.error||null}}function B(Gt,Dt){return{body:Dt,headers:Gt.headers,context:Gt.context,observe:Gt.observe,params:Gt.params,reportProgress:Gt.reportProgress,responseType:Gt.responseType,withCredentials:Gt.withCredentials}}let de=(()=>{class Gt{constructor(Pt){this.handler=Pt}request(Pt,di,ot={}){let hi;if(Pt instanceof be)hi=Pt;else{let As,bs;As=ot.headers instanceof We?ot.headers:new We(ot.headers),ot.params&&(bs=ot.params instanceof Di?ot.params:new Di({fromObject:ot.params})),hi=new be(Pt,di,void 0!==ot.body?ot.body:null,{headers:As,context:ot.context,params:bs,reportProgress:ot.reportProgress,responseType:ot.responseType||"json",withCredentials:ot.withCredentials})}const Ei=(0,Ue.of)(hi).pipe((0,$e.b)(As=>this.handler.handle(As)));if(Pt instanceof be||"events"===ot.observe)return Ei;const Ui=Ei.pipe((0,Li.h)(As=>As instanceof lt));switch(ot.observe||"body"){case"body":switch(hi.responseType){case"arraybuffer":return Ui.pipe((0,Lt.U)(As=>{if(null!==As.body&&!(As.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return As.body}));case"blob":return Ui.pipe((0,Lt.U)(As=>{if(null!==As.body&&!(As.body instanceof Blob))throw new Error("Response is not a Blob.");return As.body}));case"text":return Ui.pipe((0,Lt.U)(As=>{if(null!==As.body&&"string"!=typeof As.body)throw new Error("Response is not a string.");return As.body}));default:return Ui.pipe((0,Lt.U)(As=>As.body))}case"response":return Ui;default:throw new Error(`Unreachable: unhandled observe type ${ot.observe}}`)}}delete(Pt,di={}){return this.request("DELETE",Pt,di)}get(Pt,di={}){return this.request("GET",Pt,di)}head(Pt,di={}){return this.request("HEAD",Pt,di)}jsonp(Pt,di){return this.request("JSONP",Pt,{params:(new Di).append(di,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Pt,di={}){return this.request("OPTIONS",Pt,di)}patch(Pt,di,ot={}){return this.request("PATCH",Pt,B(ot,di))}post(Pt,di,ot={}){return this.request("POST",Pt,B(ot,di))}put(Pt,di,ot={}){return this.request("PUT",Pt,B(ot,di))}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)(u.LFG(ut))},Gt.\u0275prov=u.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();class Be{constructor(Dt,Pt){this.next=Dt,this.interceptor=Pt}handle(Dt){return this.interceptor.intercept(Dt,this.next)}}const Fe=new u.OlP("HTTP_INTERCEPTORS");let xt=(()=>{class Gt{intercept(Pt,di){return di.handle(Pt)}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)},Gt.\u0275prov=u.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();const $i=/^\)\]\}',?\n/;let zt=(()=>{class Gt{constructor(Pt){this.xhrFactory=Pt}handle(Pt){if("JSONP"===Pt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Zt.y(di=>{const ot=this.xhrFactory.build();if(ot.open(Pt.method,Pt.urlWithParams),Pt.withCredentials&&(ot.withCredentials=!0),Pt.headers.forEach((Ai,bi)=>ot.setRequestHeader(Ai,bi.join(","))),Pt.headers.has("Accept")||ot.setRequestHeader("Accept","application/json, text/plain, */*"),!Pt.headers.has("Content-Type")){const Ai=Pt.detectContentTypeHeader();null!==Ai&&ot.setRequestHeader("Content-Type",Ai)}if(Pt.responseType){const Ai=Pt.responseType.toLowerCase();ot.responseType="json"!==Ai?Ai:"text"}const hi=Pt.serializeBody();let Ei=null;const Ui=()=>{if(null!==Ei)return Ei;const Ai=ot.statusText||"OK",bi=new We(ot.getAllResponseHeaders()),Ti=function et(Gt){return"responseURL"in Gt&&Gt.responseURL?Gt.responseURL:/^X-Request-URL:/m.test(Gt.getAllResponseHeaders())?Gt.getResponseHeader("X-Request-URL"):null}(ot)||Pt.url;return Ei=new _e({headers:bi,status:ot.status,statusText:Ai,url:Ti}),Ei},As=()=>{let{headers:Ai,status:bi,statusText:Ti,url:ns}=Ui(),ls=null;204!==bi&&(ls=typeof ot.response>"u"?ot.responseText:ot.response),0===bi&&(bi=ls?200:0);let ws=bi>=200&&bi<300;if("json"===Pt.responseType&&"string"==typeof ls){const Ds=ls;ls=ls.replace($i,"");try{ls=""!==ls?JSON.parse(ls):null}catch(on){ls=Ds,ws&&(ws=!1,ls={error:on,text:ls})}}ws?(di.next(new lt({body:ls,headers:Ai,status:bi,statusText:Ti,url:ns||void 0})),di.complete()):di.error(new Xe({error:ls,headers:Ai,status:bi,statusText:Ti,url:ns||void 0}))},bs=Ai=>{const{url:bi}=Ui(),Ti=new Xe({error:Ai,status:ot.status||0,statusText:ot.statusText||"Unknown Error",url:bi||void 0});di.error(Ti)};let kt=!1;const wt=Ai=>{kt||(di.next(Ui()),kt=!0);let bi={type:Se.DownloadProgress,loaded:Ai.loaded};Ai.lengthComputable&&(bi.total=Ai.total),"text"===Pt.responseType&&!!ot.responseText&&(bi.partialText=ot.responseText),di.next(bi)},Ot=Ai=>{let bi={type:Se.UploadProgress,loaded:Ai.loaded};Ai.lengthComputable&&(bi.total=Ai.total),di.next(bi)};return ot.addEventListener("load",As),ot.addEventListener("error",bs),ot.addEventListener("timeout",bs),ot.addEventListener("abort",bs),Pt.reportProgress&&(ot.addEventListener("progress",wt),null!==hi&&ot.upload&&ot.upload.addEventListener("progress",Ot)),ot.send(hi),di.next({type:Se.Sent}),()=>{ot.removeEventListener("error",bs),ot.removeEventListener("abort",bs),ot.removeEventListener("load",As),ot.removeEventListener("timeout",bs),Pt.reportProgress&&(ot.removeEventListener("progress",wt),null!==hi&&ot.upload&&ot.upload.removeEventListener("progress",Ot)),ot.readyState!==ot.DONE&&ot.abort()}})}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)(u.LFG(i.JF))},Gt.\u0275prov=u.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();const Xt=new u.OlP("XSRF_COOKIE_NAME"),Kt=new u.OlP("XSRF_HEADER_NAME");class ni{}let Tt=(()=>{class Gt{constructor(Pt,di,ot){this.doc=Pt,this.platform=di,this.cookieName=ot,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Pt=this.doc.cookie||"";return Pt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,i.Mx)(Pt,this.cookieName),this.lastCookieString=Pt),this.lastToken}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)(u.LFG(i.K0),u.LFG(u.Lbi),u.LFG(Xt))},Gt.\u0275prov=u.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})(),qt=(()=>{class Gt{constructor(Pt,di){this.tokenService=Pt,this.headerName=di}intercept(Pt,di){const ot=Pt.url.toLowerCase();if("GET"===Pt.method||"HEAD"===Pt.method||ot.startsWith("http://")||ot.startsWith("https://"))return di.handle(Pt);const hi=this.tokenService.getToken();return null!==hi&&!Pt.headers.has(this.headerName)&&(Pt=Pt.clone({headers:Pt.headers.set(this.headerName,hi)})),di.handle(Pt)}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)(u.LFG(ni),u.LFG(Kt))},Gt.\u0275prov=u.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})(),Ci=(()=>{class Gt{constructor(Pt,di){this.backend=Pt,this.injector=di,this.chain=null}handle(Pt){if(null===this.chain){const di=this.injector.get(Fe,[]);this.chain=di.reduceRight((ot,hi)=>new Be(ot,hi),this.backend)}return this.chain.handle(Pt)}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)(u.LFG(Si),u.LFG(u.zs3))},Gt.\u0275prov=u.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})(),Wt=(()=>{class Gt{static disable(){return{ngModule:Gt,providers:[{provide:qt,useClass:xt}]}}static withOptions(Pt={}){return{ngModule:Gt,providers:[Pt.cookieName?{provide:Xt,useValue:Pt.cookieName}:[],Pt.headerName?{provide:Kt,useValue:Pt.headerName}:[]]}}}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)},Gt.\u0275mod=u.oAB({type:Gt}),Gt.\u0275inj=u.cJS({providers:[qt,{provide:Fe,useExisting:qt,multi:!0},{provide:ni,useClass:Tt},{provide:Xt,useValue:"XSRF-TOKEN"},{provide:Kt,useValue:"X-XSRF-TOKEN"}]}),Gt})(),At=(()=>{class Gt{}return Gt.\u0275fac=function(Pt){return new(Pt||Gt)},Gt.\u0275mod=u.oAB({type:Gt}),Gt.\u0275inj=u.cJS({providers:[de,{provide:ut,useClass:Ci},zt,{provide:Si,useExisting:zt}],imports:[Wt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Gt})()},8274:(An,hs,rt)=>{rt.d(hs,{QbO:()=>US,tb:()=>nC,AFp:()=>tC,ip1:()=>eC,CZH:()=>O0,hGG:()=>OE,z2F:()=>F0,sBO:()=>mE,Sil:()=>KS,_Vd:()=>Cd,aQ5:()=>mo,EJc:()=>$S,Xts:()=>Ua,SBq:()=>wd,lqb:()=>xh,qLn:()=>dc,vpe:()=>Od,gxx:()=>ac,XFs:()=>li,OlP:()=>Os,zs3:()=>Ql,ZZ4:()=>rv,aQg:()=>ov,soG:()=>L0,YKP:()=>ab,h0i:()=>tg,PXZ:()=>hE,R0b:()=>wc,FiY:()=>th,Lbi:()=>WS,g9A:()=>sC,Qsj:()=>Iu,FYo:()=>Jd,JOm:()=>za,q3G:()=>ml,tp0:()=>Ko,Rgc:()=>Em,dDg:()=>rE,eoX:()=>dC,GfV:()=>Cp,s_b:()=>R0,ifc:()=>As,MMx:()=>Fy,Lck:()=>Bw,eFA:()=>fC,G48:()=>gE,Gpc:()=>jt,f3M:()=>Gu,X6Q:()=>fE,_c5:()=>kE,c2e:()=>GS,zSh:()=>Wh,wAp:()=>eo,vHH:()=>Rt,lri:()=>hC,rWj:()=>cC,EiD:()=>Cr,mCW:()=>Gd,qzn:()=>Da,JVY:()=>zc,pB0:()=>gf,eBb:()=>Du,L6k:()=>gd,LAX:()=>Tu,D6c:()=>LE,cg1:()=>xy,kL8:()=>Lv,dqk:()=>bs,Z0I:()=>Kt,sIi:()=>zp,CqO:()=>Qc,QGY:()=>sm,QP$:()=>Re,F4k:()=>a0,RDi:()=>Eu,AaK:()=>at,z3N:()=>Kl,qOj:()=>_p,TTD:()=>ir,_Bn:()=>lb,jDz:()=>cb,xp6:()=>If,uIk:()=>$g,Tol:()=>fm,Gre:()=>fr,ekj:()=>pm,Suo:()=>Mb,Xpm:()=>Bn,lG2:()=>Ls,Yz7:()=>$i,cJS:()=>zt,oAB:()=>js,Yjl:()=>cr,Y36:()=>l,_UZ:()=>im,GkF:()=>Id,BQk:()=>Yf,ynx:()=>Gf,qZA:()=>Jc,TgZ:()=>Kc,EpF:()=>ru,n5z:()=>D,Ikx:()=>Dy,LFG:()=>gl,$8M:()=>me,$Z:()=>d,NdJ:()=>$f,CRH:()=>kb,kcU:()=>Mi,O4$:()=>Ri,oxw:()=>rm,Hsn:()=>u0,F$t:()=>d0,Q6J:()=>em,s9C:()=>om,VKq:()=>yb,iGM:()=>Ib,KtG:()=>Et,Jf7:()=>Tf,CHM:()=>Le,oJD:()=>Lo,LSH:()=>io,B6R:()=>Kn,kYT:()=>Yt,Udp:()=>um,d8E:()=>Ty,YNc:()=>l0,W1O:()=>Pb,_uU:()=>ke,Oqu:()=>qe,hij:()=>mt,Gf:()=>Rb});var i=rt(7579),u=rt(727),Ue=rt(9751),Zt=rt(8189),$e=rt(8421),Li=rt(515),Lt=rt(7669),ut=rt(2076),We=rt(3099);function gt(a){for(let c in a)if(a[c]===gt)return c;throw Error("Could not find renamed property on target object.")}function E(a,c){for(const f in c)c.hasOwnProperty(f)&&!a.hasOwnProperty(f)&&(a[f]=c[f])}function at(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(at).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const c=a.toString();if(null==c)return""+c;const f=c.indexOf("\n");return-1===f?c:c.substring(0,f)}function Oe(a,c){return null==a||""===a?null===c?"":c:null==c||""===c?a:a+" "+c}const ft=gt({__forward_ref__:gt});function jt(a){return a.__forward_ref__=jt,a.toString=function(){return at(this())},a}function Nt(a){return Di(a)?a():a}function Di(a){return"function"==typeof a&&a.hasOwnProperty(ft)&&a.__forward_ref__===jt}class Rt extends Error{constructor(c,f){super(function z(a,c){return`NG0${Math.abs(a)}${c?": "+c.trim():""}`}(c,f)),this.code=c}}function J(a){return"string"==typeof a?a:null==a?"":String(a)}function Se(a,c){throw new Rt(-201,!1)}function ui(a,c){null==a&&function Ut(a,c,f,x){throw new Error(`ASSERTION ERROR: ${a}`+(null==x?"":` [Expected=> ${f} ${x} ${c} <=Actual]`))}(c,a,null,"!=")}function $i(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function zt(a){return{providers:a.providers||[],imports:a.imports||[]}}function Xt(a){return ni(a,gs)||ni(a,Wt)}function Kt(a){return null!==Xt(a)}function ni(a,c){return a.hasOwnProperty(c)?a[c]:null}function Ci(a){return a&&(a.hasOwnProperty(Jt)||a.hasOwnProperty(At))?a[Jt]:null}const gs=gt({\u0275prov:gt}),Jt=gt({\u0275inj:gt}),Wt=gt({ngInjectableDef:gt}),At=gt({ngInjectorDef:gt});var li=(()=>((li=li||{})[li.Default=0]="Default",li[li.Host=1]="Host",li[li.Self=2]="Self",li[li.SkipSelf=4]="SkipSelf",li[li.Optional=8]="Optional",li))();let Oi;function Dt(a){const c=Oi;return Oi=a,c}function Pt(a,c,f){const x=Xt(a);return x&&"root"==x.providedIn?void 0===x.value?x.value=x.factory():x.value:f&li.Optional?null:void 0!==c?c:void Se(at(a))}function ot(a){return{toString:a}.toString()}var hi=(()=>((hi=hi||{})[hi.OnPush=0]="OnPush",hi[hi.Default=1]="Default",hi))(),As=(()=>{return(a=As||(As={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",As;var a})();const bs=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ot={},Ai=[],bi=gt({\u0275cmp:gt}),Ti=gt({\u0275dir:gt}),ns=gt({\u0275pipe:gt}),ls=gt({\u0275mod:gt}),ws=gt({\u0275fac:gt}),Ds=gt({__NG_ELEMENT_ID__:gt});let on=0;function Bn(a){return ot(()=>{const f=!0===a.standalone,x={},P={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:x,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===hi.OnPush,directiveDefs:null,pipeDefs:null,standalone:f,dependencies:f&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Ai,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||As.Emulated,id:"c"+on++,styles:a.styles||Ai,_:null,setInput:null,schemas:a.schemas||null,tView:null},W=a.dependencies,re=a.features;return P.inputs=Xi(a.inputs,x),P.outputs=Xi(a.outputs),re&&re.forEach(we=>we(P)),P.directiveDefs=W?()=>("function"==typeof W?W():W).map(Dn).filter(In):null,P.pipeDefs=W?()=>("function"==typeof W?W():W).map(je).filter(In):null,P})}function Kn(a,c,f){const x=a.\u0275cmp;x.directiveDefs=()=>("function"==typeof c?c():c).map(Dn),x.pipeDefs=()=>("function"==typeof f?f():f).map(je)}function Dn(a){return Rs(a)||gi(a)}function In(a){return null!==a}function js(a){return ot(()=>({type:a.type,bootstrap:a.bootstrap||Ai,declarations:a.declarations||Ai,imports:a.imports||Ai,exports:a.exports||Ai,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Yt(a,c){return ot(()=>{const f=tt(a,!0);f.declarations=c.declarations||Ai,f.imports=c.imports||Ai,f.exports=c.exports||Ai})}function Xi(a,c){if(null==a)return Ot;const f={};for(const x in a)if(a.hasOwnProperty(x)){let P=a[x],W=P;Array.isArray(P)&&(W=P[1],P=P[0]),f[P]=x,c&&(c[P]=W)}return f}const Ls=Bn;function cr(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function Rs(a){return a[bi]||null}function gi(a){return a[Ti]||null}function je(a){return a[ns]||null}function Re(a){const c=Rs(a)||gi(a)||je(a);return null!==c&&c.standalone}function tt(a,c){const f=a[ls]||null;if(!f&&!0===c)throw new Error(`Type ${at(a)} does not have '\u0275mod' property.`);return f}function _r(a){return Array.isArray(a)&&"object"==typeof a[1]}function Ur(a){return Array.isArray(a)&&!0===a[1]}function Hr(a){return 0!=(8&a.flags)}function Bi(a){return 2==(2&a.flags)}function Vn(a){return 1==(1&a.flags)}function co(a){return null!==a.template}function os(a){return 0!=(256&a[2])}function zs(a,c){return a.hasOwnProperty(ws)?a[ws]:null}class ur{constructor(c,f,x){this.previousValue=c,this.currentValue=f,this.firstChange=x}isFirstChange(){return this.firstChange}}function ir(){return qs}function qs(a){return a.type.prototype.ngOnChanges&&(a.setInput=Ir),$r}function $r(){const a=ks(this),c=a?.current;if(c){const f=a.previous;if(f===Ot)a.previous=c;else for(let x in c)f[x]=c[x];a.current=null,this.ngOnChanges(c)}}function Ir(a,c,f,x){const P=ks(a)||function xi(a,c){return a[Pn]=c}(a,{previous:Ot,current:null}),W=P.current||(P.current={}),re=P.previous,we=this.declaredInputs[f],Pe=re[we];W[we]=new ur(Pe&&Pe.currentValue,c,re===Ot),a[x]=c}ir.ngInherit=!0;const Pn="__ngSimpleChanges__";function ks(a){return a[Pn]||null}function Gi(a){for(;Array.isArray(a);)a=a[0];return a}function ts(a,c){return Gi(c[a])}function wn(a,c){return Gi(c[a.index])}function Ws(a,c){return a.data[c]}function S(a,c){const f=c[a];return _r(f)?f:f[0]}function j(a){return 64==(64&a[2])}function Ee(a,c){return null==c?null:a[c]}function dt(a){a[18]=0}function Bt(a,c){a[5]+=c;let f=a,x=a[3];for(;null!==x&&(1===c&&1===f[5]||-1===c&&0===f[5]);)x[5]+=c,f=x,x=x[3]}const Ii={lFrame:ye(null),bindingsEnabled:!0};function Jn(){return Ii.bindingsEnabled}function Ie(){return Ii.lFrame.lView}function Ae(){return Ii.lFrame.tView}function Le(a){return Ii.lFrame.contextLView=a,a[8]}function Et(a){return Ii.lFrame.contextLView=null,a}function Ji(){let a=_s();for(;null!==a&&64===a.type;)a=a.parent;return a}function _s(){return Ii.lFrame.currentTNode}function en(a,c){const f=Ii.lFrame;f.currentTNode=a,f.isParent=c}function po(){return Ii.lFrame.isParent}function jo(){Ii.lFrame.isParent=!1}function Mr(){return Ii.lFrame.bindingIndex++}function ko(a){const c=Ii.lFrame,f=c.bindingIndex;return c.bindingIndex=c.bindingIndex+a,f}function $o(a,c){const f=Ii.lFrame;f.bindingIndex=f.bindingRootIndex=a,Ge(c)}function Ge(a){Ii.lFrame.currentDirectiveIndex=a}function p(a){const c=Ii.lFrame.currentDirectiveIndex;return-1===c?null:a[c]}function w(){return Ii.lFrame.currentQueryIndex}function k(a){Ii.lFrame.currentQueryIndex=a}function N(a){const c=a[1];return 2===c.type?c.declTNode:1===c.type?a[6]:null}function R(a,c,f){if(f&li.SkipSelf){let P=c,W=a;for(;!(P=P.parent,null!==P||f&li.Host||(P=N(W),null===P||(W=W[15],10&P.type))););if(null===P)return!1;c=P,a=W}const x=Ii.lFrame=G();return x.currentTNode=c,x.lView=a,!0}function K(a){const c=G(),f=a[1];Ii.lFrame=c,c.currentTNode=f.firstChild,c.lView=a,c.tView=f,c.contextLView=a,c.bindingIndex=f.bindingStartIndex,c.inI18n=!1}function G(){const a=Ii.lFrame,c=null===a?null:a.child;return null===c?ye(a):c}function ye(a){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=c),c}function ee(){const a=Ii.lFrame;return Ii.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const te=ee;function ie(){const a=ee();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function ct(){return Ii.lFrame.selectedIndex}function ii(a){Ii.lFrame.selectedIndex=a}function si(){const a=Ii.lFrame;return Ws(a.tView,a.selectedIndex)}function Ri(){Ii.lFrame.currentNamespace="svg"}function Mi(){!function es(){Ii.lFrame.currentNamespace=null}()}function dr(a,c){for(let f=c.directiveStart,x=c.directiveEnd;f<x;f++){const W=a.data[f].type.prototype,{ngAfterContentInit:re,ngAfterContentChecked:we,ngAfterViewInit:Pe,ngAfterViewChecked:st,ngOnDestroy:Ft}=W;re&&(a.contentHooks||(a.contentHooks=[])).push(-f,re),we&&((a.contentHooks||(a.contentHooks=[])).push(f,we),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(f,we)),Pe&&(a.viewHooks||(a.viewHooks=[])).push(-f,Pe),st&&((a.viewHooks||(a.viewHooks=[])).push(f,st),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(f,st)),null!=Ft&&(a.destroyHooks||(a.destroyHooks=[])).push(f,Ft)}}function jr(a,c,f){Ze(a,c,3,f)}function Pr(a,c,f,x){(3&a[2])===f&&Ze(a,c,f,x)}function Po(a,c){let f=a[2];(3&f)===c&&(f&=2047,f+=1,a[2]=f)}function Ze(a,c,f,x){const W=x??-1,re=c.length-1;let we=0;for(let Pe=void 0!==x?65535&a[18]:0;Pe<re;Pe++)if("number"==typeof c[Pe+1]){if(we=c[Pe],null!=x&&we>=x)break}else c[Pe]<0&&(a[18]+=65536),(we<W||-1==W)&&(ne(a,f,c,Pe),a[18]=(4294901760&a[18])+Pe+2),Pe++}function ne(a,c,f,x){const P=f[x]<0,W=f[x+1],we=a[P?-f[x]:f[x]];if(P){if(a[2]>>11<a[18]>>16&&(3&a[2])===c){a[2]+=2048;try{W.call(we)}finally{}}}else try{W.call(we)}finally{}}class De{constructor(c,f,x){this.factory=c,this.resolving=!1,this.canSeeViewProviders=f,this.injectImpl=x}}function Wn(a,c,f){let x=0;for(;x<f.length;){const P=f[x];if("number"==typeof P){if(0!==P)break;x++;const W=f[x++],re=f[x++],we=f[x++];a.setAttribute(c,re,we,W)}else{const W=P,re=f[++x];gn(W)?a.setProperty(c,W,re):a.setAttribute(c,W,re),x++}}return x}function or(a){return 3===a||4===a||6===a}function gn(a){return 64===a.charCodeAt(0)}function Un(a,c){if(null!==c&&0!==c.length)if(null===a||0===a.length)a=c.slice();else{let f=-1;for(let x=0;x<c.length;x++){const P=c[x];"number"==typeof P?f=P:0===f||Zr(a,f,P,null,-1===f||2===f?c[++x]:null)}}return a}function Zr(a,c,f,x,P){let W=0,re=a.length;if(-1===c)re=-1;else for(;W<a.length;){const we=a[W++];if("number"==typeof we){if(we===c){re=-1;break}if(we>c){re=W-1;break}}}for(;W<a.length;){const we=a[W];if("number"==typeof we)break;if(we===f){if(null===x)return void(null!==P&&(a[W+1]=P));if(x===a[W+1])return void(a[W+2]=P)}W++,null!==x&&W++,null!==P&&W++}-1!==re&&(a.splice(re,0,c),W=re+1),a.splice(W++,0,f),null!==x&&a.splice(W++,0,x),null!==P&&a.splice(W++,0,P)}function Co(a){return-1!==a}function fo(a){return 32767&a}function No(a,c){let f=function hl(a){return a>>16}(a),x=c;for(;f>0;)x=x[15],f--;return x}let el=!0;function wo(a){const c=el;return el=a,c}let vl=0;const Oo={};function qr(a,c){const f=kl(a,c);if(-1!==f)return f;const x=c[1];x.firstCreatePass&&(a.injectorIndex=c.length,Ho(x.data,a),Ho(c,null),Ho(x.blueprint,null));const P=Tn(a,c),W=a.injectorIndex;if(Co(P)){const re=fo(P),we=No(P,c),Pe=we[1].data;for(let st=0;st<8;st++)c[W+st]=we[re+st]|Pe[re+st]}return c[W+8]=P,W}function Ho(a,c){a.push(0,0,0,0,0,0,0,0,c)}function kl(a,c){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===c[a.injectorIndex+8]?-1:a.injectorIndex}function Tn(a,c){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let f=0,x=null,P=c;for(;null!==P;){if(x=Q(P),null===x)return-1;if(f++,P=P[15],-1!==x.injectorIndex)return x.injectorIndex|f<<16}return-1}function er(a,c,f){!function tl(a,c,f){let x;"string"==typeof f?x=f.charCodeAt(0)||0:f.hasOwnProperty(Ds)&&(x=f[Ds]),null==x&&(x=f[Ds]=vl++);const P=255&x;c.data[a+(P>>5)]|=1<<P}(a,c,f)}function Kr(a,c,f){if(f&li.Optional||void 0!==a)return a;Se()}function il(a,c,f,x){if(f&li.Optional&&void 0===x&&(x=null),0==(f&(li.Self|li.Host))){const P=a[9],W=Dt(void 0);try{return P?P.get(c,x,f&li.Optional):Pt(c,x,f&li.Optional)}finally{Dt(W)}}return Kr(x,0,f)}function Tl(a,c,f,x=li.Default,P){if(null!==a){if(1024&c[2]){const re=function _(a,c,f,x,P){let W=a,re=c;for(;null!==W&&null!==re&&1024&re[2]&&!(256&re[2]);){const we=sl(W,re,f,x|li.Self,Oo);if(we!==Oo)return we;let Pe=W.parent;if(!Pe){const st=re[21];if(st){const Ft=st.get(f,Oo,x);if(Ft!==Oo)return Ft}Pe=Q(re),re=re[15]}W=Pe}return P}(a,c,f,x,Oo);if(re!==Oo)return re}const W=sl(a,c,f,x,Oo);if(W!==Oo)return W}return il(c,f,x,P)}function sl(a,c,f,x,P){const W=function To(a){if("string"==typeof a)return a.charCodeAt(0)||0;const c=a.hasOwnProperty(Ds)?a[Ds]:void 0;return"number"==typeof c?c>=0?255&c:g:c}(f);if("function"==typeof W){if(!R(c,a,x))return x&li.Host?Kr(P,0,x):il(c,f,x,P);try{const re=W(x);if(null!=re||x&li.Optional)return re;Se()}finally{te()}}else if("number"==typeof W){let re=null,we=kl(a,c),Pe=-1,st=x&li.Host?c[16][6]:null;for((-1===we||x&li.SkipSelf)&&(Pe=-1===we?Tn(a,c):c[we+8],-1!==Pe&&xo(x,!1)?(re=c[1],we=fo(Pe),c=No(Pe,c)):we=-1);-1!==we;){const Ft=c[1];if(Bo(W,we,Ft.data)){const fi=Bl(we,c,f,re,x,st);if(fi!==Oo)return fi}Pe=c[we+8],-1!==Pe&&xo(x,c[1].data[we+8]===st)&&Bo(W,we,c)?(re=Ft,we=fo(Pe),c=No(Pe,c)):we=-1}}return P}function Bl(a,c,f,x,P,W){const re=c[1],we=re.data[a+8],Ft=Xr(we,re,f,null==x?Bi(we)&&el:x!=re&&0!=(3&we.type),P&li.Host&&W===we);return null!==Ft?nl(c,re,Ft,we):Oo}function Xr(a,c,f,x,P){const W=a.providerIndexes,re=c.data,we=1048575&W,Pe=a.directiveStart,Ft=W>>20,Wi=P?we+Ft:a.directiveEnd;for(let cs=x?we:we+Ft;cs<Wi;cs++){const Fs=re[cs];if(cs<Pe&&f===Fs||cs>=Pe&&Fs.type===f)return cs}if(P){const cs=re[Pe];if(cs&&co(cs)&&cs.type===f)return Pe}return null}function nl(a,c,f,x){let P=a[f];const W=c.data;if(function Ye(a){return a instanceof De}(P)){const re=P;re.resolving&&function Ne(a,c){const f=c?`. Dependency path: ${c.join(" > ")} > ${a}`:"";throw new Rt(-200,`Circular dependency in DI detected for ${a}${f}`)}(function ve(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():J(a)}(W[f]));const we=wo(re.canSeeViewProviders);re.resolving=!0;const Pe=re.injectImpl?Dt(re.injectImpl):null;R(a,x,li.Default);try{P=a[f]=re.factory(void 0,W,a,x),c.firstCreatePass&&f>=x.directiveStart&&function an(a,c,f){const{ngOnChanges:x,ngOnInit:P,ngDoCheck:W}=c.type.prototype;if(x){const re=qs(c);(f.preOrderHooks||(f.preOrderHooks=[])).push(a,re),(f.preOrderCheckHooks||(f.preOrderCheckHooks=[])).push(a,re)}P&&(f.preOrderHooks||(f.preOrderHooks=[])).push(0-a,P),W&&((f.preOrderHooks||(f.preOrderHooks=[])).push(a,W),(f.preOrderCheckHooks||(f.preOrderCheckHooks=[])).push(a,W))}(f,W[f],c)}finally{null!==Pe&&Dt(Pe),wo(we),re.resolving=!1,te()}}return P}function Bo(a,c,f){return!!(f[c+(a>>5)]&1<<a)}function xo(a,c){return!(a&li.Self||a&li.Host&&c)}class Is{constructor(c,f){this._tNode=c,this._lView=f}get(c,f,x){return Tl(this._tNode,this._lView,c,x,f)}}function g(){return new Is(Ji(),Ie())}function D(a){return ot(()=>{const c=a.prototype.constructor,f=c[ws]||O(c),x=Object.prototype;let P=Object.getPrototypeOf(a.prototype).constructor;for(;P&&P!==x;){const W=P[ws]||O(P);if(W&&W!==f)return W;P=Object.getPrototypeOf(P)}return W=>new W})}function O(a){return Di(a)?()=>{const c=O(Nt(a));return c&&c()}:zs(a)}function Q(a){const c=a[1],f=c.type;return 2===f?c.declTNode:1===f?a[6]:null}function me(a){return function pr(a,c){if("class"===c)return a.classes;if("style"===c)return a.styles;const f=a.attrs;if(f){const x=f.length;let P=0;for(;P<x;){const W=f[P];if(or(W))break;if(0===W)P+=2;else if("number"==typeof W)for(P++;P<x&&"string"==typeof f[P];)P++;else{if(W===c)return f[P+1];P+=2}}}return null}(Ji(),a)}const Je="__parameters__",St="__prop__metadata__";function Pi(a){return function(...f){if(a){const x=a(...f);for(const P in x)this[P]=x[P]}}}function Hi(a,c,f){return ot(()=>{const x=Pi(c);function P(...W){if(this instanceof P)return x.apply(this,W),this;const re=new P(...W);return we.annotation=re,we;function we(Pe,st,Ft){const fi=Pe.hasOwnProperty(Je)?Pe[Je]:Object.defineProperty(Pe,Je,{value:[]})[Je];for(;fi.length<=Ft;)fi.push(null);return(fi[Ft]=fi[Ft]||[]).push(re),Pe}}return f&&(P.prototype=Object.create(f.prototype)),P.prototype.ngMetadataName=a,P.annotationCls=P,P})}function Ms(a,c,f,x){return ot(()=>{const P=Pi(c);function W(...re){if(this instanceof W)return P.apply(this,re),this;const we=new W(...re);return function Pe(st,Ft){const fi=st.constructor,Wi=fi.hasOwnProperty(St)?fi[St]:Object.defineProperty(fi,St,{value:{}})[St];Wi[Ft]=Wi.hasOwnProperty(Ft)&&Wi[Ft]||[],Wi[Ft].unshift(we),x&&x(st,Ft,...re)}}return f&&(W.prototype=Object.create(f.prototype)),W.prototype.ngMetadataName=a,W.annotationCls=W,W})}class Os{constructor(c,f){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof f?this.__NG_ELEMENT_ID__=f:void 0!==f&&(this.\u0275prov=$i({token:this,providedIn:f.providedIn||"root",factory:f.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class Ao{}const mo=Ms("ContentChild",(a,c={})=>({selector:a,first:!0,isViewQuery:!1,descendants:!0,...c}),Ao);function $l(a,c){void 0===c&&(c=a);for(let f=0;f<a.length;f++){let x=a[f];Array.isArray(x)?(c===a&&(c=a.slice(0,f)),$l(x,c)):c!==a&&c.push(x)}return c}function ba(a,c){a.forEach(f=>Array.isArray(f)?ba(f,c):c(f))}function Sc(a,c,f){c>=a.length?a.push(f):a.splice(c,0,f)}function ta(a,c){return c>=a.length-1?a.pop():a.splice(c,1)[0]}function ca(a,c){const f=[];for(let x=0;x<a;x++)f.push(c);return f}function F(a,c,f){let x=U(a,c);return x>=0?a[1|x]=f:(x=~x,function Ld(a,c,f,x){let P=a.length;if(P==c)a.push(f,x);else if(1===P)a.push(x,a[0]),a[0]=f;else{for(P--,a.push(a[P-1],a[P]);P>c;)a[P]=a[P-2],P--;a[c]=f,a[c+1]=x}}(a,x,c,f)),x}function H(a,c){const f=U(a,c);if(f>=0)return a[1|f]}function U(a,c){return function Me(a,c,f){let x=0,P=a.length>>f;for(;P!==x;){const W=x+(P-x>>1),re=a[W<<f];if(c===re)return W<<f;re>c?P=W:x=W+1}return~(P<<f)}(a,c,1)}const sa={},fh="__NG_DI_FLAG__",ql="ngTempTokenPath",Kh=/\n/gm,Oh="__source";let eh;function Dc(a){const c=eh;return eh=a,c}function Lh(a,c=li.Default){if(void 0===eh)throw new Rt(-203,!1);return null===eh?Pt(a,void 0,c):eh.get(a,c&li.Optional?null:void 0,c)}function gl(a,c=li.Default){return(function Gt(){return Oi}()||Lh)(Nt(a),c)}function Gu(a,c=li.Default){return"number"!=typeof c&&(c=0|(c.optional&&8)|(c.host&&1)|(c.self&&2)|(c.skipSelf&&4)),gl(a,c)}function Yu(a){const c=[];for(let f=0;f<a.length;f++){const x=Nt(a[f]);if(Array.isArray(x)){if(0===x.length)throw new Rt(900,!1);let P,W=li.Default;for(let re=0;re<x.length;re++){const we=x[re],Pe=ng(we);"number"==typeof Pe?-1===Pe?P=we.token:W|=Pe:P=we}c.push(gl(P,W))}else c.push(gl(x))}return c}function Fh(a,c){return a[fh]=c,a.prototype[fh]=c,a}function ng(a){return a[fh]}const th=Fh(Hi("Optional"),8),Ko=Fh(Hi("SkipSelf"),4);var za=(()=>((za=za||{})[za.Important=1]="Important",za[za.DashCase=2]="DashCase",za))();const ep=new Map;let tp=0;const uu="__ngContext__";function da(a,c){_r(c)?(a[uu]=c[20],function Sa(a){ep.set(a[20],a)}(c)):a[uu]=c}function xl(a,c){return undefined(a,c)}function Ic(a){const c=a[3];return Ur(c)?c[3]:c}function rp(a){return hf(a[13])}function Rc(a){return hf(a[4])}function hf(a){for(;null!==a&&!Ur(a);)a=a[4];return a}function _h(a,c,f,x,P){if(null!=x){let W,re=!1;Ur(x)?W=x:_r(x)&&(re=!0,x=x[0]);const we=Gi(x);0===a&&null!==f?null==P?vh(c,f,we):Pl(c,f,we,P||null,!0):1===a&&null!==f?Pl(c,f,we,P||null,!0):2===a?function dd(a,c,f){const x=zh(a,c);x&&function zd(a,c,f,x){a.removeChild(c,f,x)}(a,x,c,f)}(c,we,re):3===a&&c.destroyNode(we),null!=W&&function Cu(a,c,f,x,P){const W=f[7];W!==Gi(f)&&_h(c,a,x,W,P);for(let we=10;we<f.length;we++){const Pe=f[we];nc(Pe[1],Pe,a,c,x,W)}}(c,a,W,f,P)}}function nh(a,c,f){return a.createElement(c,f)}function mg(a,c){const f=a[9],x=f.indexOf(c),P=c[3];512&c[2]&&(c[2]&=-513,Bt(P,-1)),f.splice(x,1)}function Hd(a,c){if(a.length<=10)return;const f=10+c,x=a[f];if(x){const P=x[17];null!==P&&P!==a&&mg(P,x),c>0&&(a[f-1][4]=x[4]);const W=ta(a,10+c);!function _d(a,c){nc(a,c,c[11],2,null,null),c[0]=null,c[6]=null}(x[1],x);const re=W[19];null!==re&&re.detachView(W[1]),x[3]=null,x[4]=null,x[2]&=-65}return x}function yh(a,c){if(!(128&c[2])){const f=c[11];f.destroyNode&&nc(a,c,f,3,null,null),function Hh(a){let c=a[13];if(!c)return Fc(a[1],a);for(;c;){let f=null;if(_r(c))f=c[13];else{const x=c[10];x&&(f=x)}if(!f){for(;c&&!c[4]&&c!==a;)_r(c)&&Fc(c[1],c),c=c[3];null===c&&(c=a),_r(c)&&Fc(c[1],c),f=c&&c[4]}c=f}}(c)}}function Fc(a,c){if(!(128&c[2])){c[2]&=-65,c[2]|=128,function df(a,c){let f;if(null!=a&&null!=(f=a.destroyHooks))for(let x=0;x<f.length;x+=2){const P=c[f[x]];if(!(P instanceof De)){const W=f[x+1];if(Array.isArray(W))for(let re=0;re<W.length;re+=2){const we=P[W[re]],Pe=W[re+1];try{Pe.call(we)}finally{}}else try{W.call(P)}finally{}}}}(a,c),function lp(a,c){const f=a.cleanup,x=c[7];let P=-1;if(null!==f)for(let W=0;W<f.length-1;W+=2)if("string"==typeof f[W]){const re=f[W+1],we="function"==typeof re?re(c):Gi(c[re]),Pe=x[P=f[W+2]],st=f[W+3];"boolean"==typeof st?we.removeEventListener(f[W],Pe,st):st>=0?x[P=st]():x[P=-st].unsubscribe(),W+=2}else{const re=x[P=f[W+1]];f[W].call(re)}if(null!==x){for(let W=P+1;W<x.length;W++)(0,x[W])();c[7]=null}}(a,c),1===c[1].type&&c[11].destroy();const f=c[17];if(null!==f&&Ur(c[3])){f!==c[3]&&mg(f,c);const x=c[19];null!==x&&x.detachView(a)}!function Ea(a){ep.delete(a[20])}(c)}}function hd(a,c,f){return function Pc(a,c,f){let x=c;for(;null!==x&&40&x.type;)x=(c=x).parent;if(null===x)return f[0];if(2&x.flags){const P=a.data[x.directiveStart].encapsulation;if(P===As.None||P===As.Emulated)return null}return wn(x,f)}(a,c.parent,f)}function Pl(a,c,f,x,P){a.insertBefore(c,f,x,P)}function vh(a,c,f){a.appendChild(c,f)}function qa(a,c,f,x,P){null!==x?Pl(a,c,f,x,P):vh(a,c,f)}function zh(a,c){return a.parentNode(c)}function Oa(a,c,f){return mu(a,c,f)}let qd,Vc,Wd,mu=function Nc(a,c,f){return 40&a.type?wn(a,f):null};function yu(a,c,f,x){const P=hd(a,x,c),W=c[11],we=Oa(x.parent||c[6],x,c);if(null!=P)if(Array.isArray(f))for(let Pe=0;Pe<f.length;Pe++)qa(W,P,f[Pe],we,!1);else qa(W,P,f,we,!1)}function ic(a,c){if(null!==c){const f=c.type;if(3&f)return wn(c,a);if(4&f)return vu(-1,a[c.index]);if(8&f){const x=c.child;if(null!==x)return ic(a,x);{const P=a[c.index];return Ur(P)?vu(-1,P):Gi(P)}}if(32&f)return xl(c,a)()||Gi(a[c.index]);{const x=uf(a,c);return null!==x?Array.isArray(x)?x[0]:ic(Ic(a[16]),x):ic(a,c.next)}}return null}function uf(a,c){return null!==c?a[16][6].projection[c.projection]:null}function vu(a,c){const f=10+a+1;if(f<c.length){const x=c[f],P=x[1].firstChild;if(null!==P)return ic(x,P)}return c[7]}function sc(a,c,f,x,P,W,re){for(;null!=f;){const we=x[f.index],Pe=f.type;if(re&&0===c&&(we&&da(Gi(we),x),f.flags|=4),64!=(64&f.flags))if(8&Pe)sc(a,c,f.child,x,P,W,!1),_h(c,a,P,we,W);else if(32&Pe){const st=xl(f,x);let Ft;for(;Ft=st();)_h(c,a,P,Ft,W);_h(c,a,P,we,W)}else 16&Pe?bu(a,c,x,f,P,W):_h(c,a,P,we,W);f=re?f.projectionNext:f.next}}function nc(a,c,f,x,P,W){sc(f,x,a.firstChild,c,P,W,!1)}function bu(a,c,f,x,P,W){const re=f[16],Pe=re[6].projection[x.projection];if(Array.isArray(Pe))for(let st=0;st<Pe.length;st++)_h(c,a,P,Pe[st],W);else sc(a,c,Pe,re[3],P,W,!0)}function rc(a,c,f){a.setAttribute(c,"style",f)}function wu(a,c,f){""===f?a.removeAttribute(c,"class"):a.setAttribute(c,"class",f)}function jh(a){return function hp(){if(void 0===qd&&(qd=null,bs.trustedTypes))try{qd=bs.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return qd}()?.createHTML(a)||a}function Eu(a){Vc=a}function cp(a){return function qh(){if(void 0===Wd&&(Wd=null,bs.trustedTypes))try{Wd=bs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Wd}()?.createHTML(a)||a}class bh{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class _c extends bh{getTypeName(){return"HTML"}}class ud extends bh{getTypeName(){return"Style"}}class Hc extends bh{getTypeName(){return"Script"}}class pd extends bh{getTypeName(){return"URL"}}class fd extends bh{getTypeName(){return"ResourceURL"}}function Kl(a){return a instanceof bh?a.changingThisBreaksApplicationSecurity:a}function Da(a,c){const f=function oc(a){return a instanceof bh&&a.getTypeName()||null}(a);if(null!=f&&f!==c){if("ResourceURL"===f&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${f} (see https://g.co/ng/security#xss)`)}return f===c}function zc(a){return new _c(a)}function gd(a){return new ud(a)}function Du(a){return new Hc(a)}function Tu(a){return new pd(a)}function gf(a){return new fd(a)}class mf{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const f=(new window.DOMParser).parseFromString(jh(c),"text/html").body;return null===f?this.inertDocumentHelper.getInertBodyElement(c):(f.removeChild(f.firstChild),f)}catch{return null}}}class yf{constructor(c){if(this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const f=this.inertDocument.createElement("html");this.inertDocument.appendChild(f);const x=this.inertDocument.createElement("body");f.appendChild(x)}}getInertBodyElement(c){const f=this.inertDocument.createElement("template");if("content"in f)return f.innerHTML=jh(c),f;const x=this.inertDocument.createElement("body");return x.innerHTML=jh(c),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(x),x}stripCustomNsAttrs(c){const f=c.attributes;for(let P=f.length-1;0<P;P--){const re=f.item(P).name;("xmlns:ns1"===re||0===re.indexOf("ns1:"))&&c.removeAttribute(re)}let x=c.firstChild;for(;x;)x.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(x),x=x.nextSibling}}const vg=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Gd(a){return(a=String(a)).match(vg)?a:"unsafe:"+a}function Ch(a){const c={};for(const f of a.split(","))c[f]=!0;return c}function Yd(...a){const c={};for(const f of a)for(const x in f)f.hasOwnProperty(x)&&(c[x]=!0);return c}const $d=Ch("area,br,col,hr,img,wbr"),xu=Ch("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Au=Ch("rp,rt"),md=Yd($d,Yd(xu,Ch("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yd(Au,Ch("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yd(Au,xu)),lc=Ch("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gp=Yd(lc,Ch("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ch("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ao=Ch("script,style,template");class wh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let f=c.firstChild,x=!0;for(;f;)if(f.nodeType===Node.ELEMENT_NODE?x=this.startElement(f):f.nodeType===Node.TEXT_NODE?this.chars(f.nodeValue):this.sanitizedSomething=!0,x&&f.firstChild)f=f.firstChild;else for(;f;){f.nodeType===Node.ELEMENT_NODE&&this.endElement(f);let P=this.checkClobberedElement(f,f.nextSibling);if(P){f=P;break}f=this.checkClobberedElement(f,f.parentNode)}return this.buf.join("")}startElement(c){const f=c.nodeName.toLowerCase();if(!md.hasOwnProperty(f))return this.sanitizedSomething=!0,!ao.hasOwnProperty(f);this.buf.push("<"),this.buf.push(f);const x=c.attributes;for(let P=0;P<x.length;P++){const W=x.item(P),re=W.name,we=re.toLowerCase();if(!gp.hasOwnProperty(we)){this.sanitizedSomething=!0;continue}let Pe=W.value;lc[we]&&(Pe=Gd(Pe)),this.buf.push(" ",re,'="',na(Pe),'"')}return this.buf.push(">"),!0}endElement(c){const f=c.nodeName.toLowerCase();md.hasOwnProperty(f)&&!$d.hasOwnProperty(f)&&(this.buf.push("</"),this.buf.push(f),this.buf.push(">"))}chars(c){this.buf.push(na(c))}checkClobberedElement(c,f){if(f&&(c.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return f}}const yd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ta=/([^\#-~ |!])/g;function na(a){return a.replace(/&/g,"&amp;").replace(yd,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(Ta,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vd;function Cr(a,c){let f=null;try{vd=vd||function up(a){const c=new yf(a);return function vf(){try{return!!(new window.DOMParser).parseFromString(jh(""),"text/html")}catch{return!1}}()?new mf(c):c}(a);let x=c?String(c):"";f=vd.getInertBodyElement(x);let P=5,W=x;do{if(0===P)throw new Error("Failed to sanitize html because the input is unstable");P--,x=W,W=f.innerHTML,f=vd.getInertBodyElement(x)}while(x!==W);return jh((new wh).sanitizeChildren(rl(f)||f))}finally{if(f){const x=rl(f)||f;for(;x.firstChild;)x.removeChild(x.firstChild)}}}function rl(a){return"content"in a&&function ll(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var ml=(()=>((ml=ml||{})[ml.NONE=0]="NONE",ml[ml.HTML=1]="HTML",ml[ml.STYLE=2]="STYLE",ml[ml.SCRIPT=3]="SCRIPT",ml[ml.URL=4]="URL",ml[ml.RESOURCE_URL=5]="RESOURCE_URL",ml))();function Lo(a){const c=Eh();return c?cp(c.sanitize(ml.HTML,a)||""):Da(a,"HTML")?cp(Kl(a)):Cr(function rh(){return void 0!==Vc?Vc:typeof document<"u"?document:void 0}(),J(a))}function io(a){const c=Eh();return c?c.sanitize(ml.URL,a)||"":Da(a,"URL")?Kl(a):Gd(J(a))}function Eh(){const a=Ie();return a&&a[12]}const Ua=new Os("ENVIRONMENT_INITIALIZER"),ac=new Os("INJECTOR",-1),fn=new Os("INJECTOR_DEF_TYPES");class vo{get(c,f=sa){if(f===sa){const x=new Error(`NullInjectorError: No provider for ${at(c)}!`);throw x.name="NullInjectorError",x}return f}}function Qo(...a){return{\u0275providers:go(0,a)}}function go(a,...c){const f=[],x=new Set;let P;return ba(c,W=>{const re=W;vs(re,f,[],x)&&(P||(P=[]),P.push(re))}),void 0!==P&&xn(P,f),f}function xn(a,c){for(let f=0;f<a.length;f++){const{providers:P}=a[f];ba(P,W=>{c.push(W)})}}function vs(a,c,f,x){if(!(a=Nt(a)))return!1;let P=null,W=Ci(a);const re=!W&&Rs(a);if(W||re){if(re&&!re.standalone)return!1;P=a}else{const Pe=a.ngModule;if(W=Ci(Pe),!W)return!1;P=Pe}const we=x.has(P);if(re){if(we)return!1;if(x.add(P),re.dependencies){const Pe="function"==typeof re.dependencies?re.dependencies():re.dependencies;for(const st of Pe)vs(st,c,f,x)}}else{if(!W)return!1;{if(null!=W.imports&&!we){let st;x.add(P);try{ba(W.imports,Ft=>{vs(Ft,c,f,x)&&(st||(st=[]),st.push(Ft))})}finally{}void 0!==st&&xn(st,c)}if(!we){const st=zs(P)||(()=>new P);c.push({provide:P,useFactory:st,deps:Ai},{provide:fn,useValue:P,multi:!0},{provide:Ua,useValue:()=>gl(P),multi:!0})}const Pe=W.providers;null==Pe||we||ba(Pe,Ft=>{c.push(Ft)})}}return P!==a&&void 0!==a.providers}const xa=gt({provide:String,useValue:gt});function hc(a){return null!==a&&"object"==typeof a&&xa in a}function cc(a){return"function"==typeof a}const Wh=new Os("Set Injector scope."),jc={},Zd={};let Dh;function Th(){return void 0===Dh&&(Dh=new vo),Dh}class xh{}class bf extends xh{constructor(c,f,x,P){super(),this.parent=f,this.source=x,this.scopes=P,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ya(c,re=>this.processProvider(re)),this.records.set(ac,Al(void 0,this)),P.has("environment")&&this.records.set(xh,Al(void 0,this));const W=this.records.get(Wh);null!=W&&"string"==typeof W.value&&this.scopes.add(W.value),this.injectorDefTypes=new Set(this.get(fn.multi,Ai,li.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const f=Dc(this),x=Dt(void 0);try{return c()}finally{Dc(f),Dt(x)}}get(c,f=sa,x=li.Default){this.assertNotDestroyed();const P=Dc(this),W=Dt(void 0);try{if(!(x&li.SkipSelf)){let we=this.records.get(c);if(void 0===we){const Pe=function Ul(a){return"function"==typeof a||"object"==typeof a&&a instanceof Os}(c)&&Xt(c);we=Pe&&this.injectableDefInScope(Pe)?Al(Wl(c),jc):null,this.records.set(c,we)}if(null!=we)return this.hydrate(c,we)}return(x&li.Self?Th():this.parent).get(c,f=x&li.Optional&&f===sa?null:f)}catch(re){if("NullInjectorError"===re.name){if((re[ql]=re[ql]||[]).unshift(at(c)),P)throw re;return function rg(a,c,f,x){const P=a[ql];throw c[Oh]&&P.unshift(c[Oh]),a.message=function og(a,c,f,x=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let P=at(c);if(Array.isArray(c))P=c.map(at).join(" -> ");else if("object"==typeof c){let W=[];for(let re in c)if(c.hasOwnProperty(re)){let we=c[re];W.push(re+":"+("string"==typeof we?JSON.stringify(we):at(we)))}P=`{${W.join(", ")}}`}return`${f}${x?"("+x+")":""}[${P}]: ${a.replace(Kh,"\n  ")}`}("\n"+a.message,P,f,x),a.ngTokenPath=P,a[ql]=null,a}(re,c,"R3InjectorError",this.source)}throw re}finally{Dt(W),Dc(P)}}resolveInjectorInitializers(){const c=Dc(this),f=Dt(void 0);try{const x=this.get(Ua.multi,Ai,li.Self);for(const P of x)P()}finally{Dc(c),Dt(f)}}toString(){const c=[],f=this.records;for(const x of f.keys())c.push(at(x));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Rt(205,!1)}processProvider(c){let f=cc(c=Nt(c))?c:Nt(c&&c.provide);const x=function Kd(a){return hc(a)?Al(void 0,a.useValue):Al(Ah(a),jc)}(c);if(cc(c)||!0!==c.multi)this.records.get(f);else{let P=this.records.get(f);P||(P=Al(void 0,jc,!0),P.factory=()=>Yu(P.multi),this.records.set(f,P)),f=c,P.multi.push(c)}this.records.set(f,x)}hydrate(c,f){return f.value===jc&&(f.value=Zd,f.value=f.factory()),"object"==typeof f.value&&f.value&&function Hl(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(f.value)&&this._ngOnDestroyHooks.add(f.value),f.value}injectableDefInScope(c){if(!c.providedIn)return!1;const f=Nt(c.providedIn);return"string"==typeof f?"any"===f||this.scopes.has(f):this.injectorDefTypes.has(f)}}function Wl(a){const c=Xt(a),f=null!==c?c.factory:zs(a);if(null!==f)return f;if(a instanceof Os)throw new Rt(204,!1);if(a instanceof Function)return function oh(a){const c=a.length;if(c>0)throw ca(c,"?"),new Rt(204,!1);const f=function Tt(a){const c=a&&(a[gs]||a[Wt]);if(c){const f=function qt(a){if(a.hasOwnProperty("name"))return a.name;const c=(""+a).match(/^function\s*([^\s(]+)/);return null===c?"":c[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${f}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${f}" class.`),c}return null}(a);return null!==f?()=>f.factory(a):()=>new a}(a);throw new Rt(204,!1)}function Ah(a,c,f){let x;if(cc(a)){const P=Nt(a);return zs(P)||Wl(P)}if(hc(a))x=()=>Nt(a.useValue);else if(function bd(a){return!(!a||!a.useFactory)}(a))x=()=>a.useFactory(...Yu(a.deps||[]));else if(function Ga(a){return!(!a||!a.useExisting)}(a))x=()=>gl(Nt(a.useExisting));else{const P=Nt(a&&(a.useClass||a.provide));if(!function Jl(a){return!!a.deps}(a))return zs(P)||Wl(P);x=()=>new P(...Yu(a.deps))}return x}function Al(a,c,f=!1){return{factory:a,value:c,multi:f?[]:void 0}}function Uo(a){return!!a.\u0275providers}function Ya(a,c){for(const f of a)Array.isArray(f)?Ya(f,c):Uo(f)?Ya(f.\u0275providers,c):c(f)}class Ml{}class vp{resolveComponentFactory(c){throw function oa(a){const c=Error(`No component factory found for ${at(a)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=a,c}(c)}}let Cd=(()=>{class a{}return a.NULL=new vp,a})();function Cg(){return Uh(Ji(),Ie())}function Uh(a,c){return new wd(wn(a,c))}let wd=(()=>{class a{constructor(f){this.nativeElement=f}}return a.__NG_ELEMENT_ID__=Cg,a})();function Cf(a){return a instanceof wd?a.nativeElement:a}class Jd{}let Iu=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function wf(){const a=Ie(),f=S(Ji().index,a);return(_r(f)?f:a)[11]}(),a})(),bp=(()=>{class a{}return a.\u0275prov=$i({token:a,providedIn:"root",factory:()=>null}),a})();class Cp{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const Ru=new Cp("14.2.12"),qc={};function Wc(a){return a.ngOriginalError}class dc{constructor(){this._console=console}handleError(c){const f=this._findOriginalError(c);this._console.error("ERROR",c),f&&this._console.error("ORIGINAL ERROR",f)}_findOriginalError(c){let f=c&&Wc(c);for(;f&&Wc(f);)f=Wc(f);return f||null}}function Tf(a){return a.ownerDocument.defaultView}function $a(a){return a instanceof Function?a():a}function ku(a,c,f){let x=a.length;for(;;){const P=a.indexOf(c,f);if(-1===P)return P;if(0===P||a.charCodeAt(P-1)<=32){const W=c.length;if(P+W===x||a.charCodeAt(P+W)<=32)return P}f=P+1}}const _i="ng-template";function Dp(a,c,f){let x=0;for(;x<a.length;){let P=a[x++];if(f&&"class"===P){if(P=a[x],-1!==ku(P.toLowerCase(),c,0))return!0}else if(1===P){for(;x<a.length&&"string"==typeof(P=a[x++]);)if(P.toLowerCase()===c)return!0;return!1}}return!1}function Xd(a){return 4===a.type&&a.value!==_i}function Tp(a,c,f){return c===(4!==a.type||f?a.value:_i)}function Fa(a,c,f){let x=4;const P=a.attrs||[],W=function Za(a){for(let c=0;c<a.length;c++)if(or(a[c]))return c;return a.length}(P);let re=!1;for(let we=0;we<c.length;we++){const Pe=c[we];if("number"!=typeof Pe){if(!re)if(4&x){if(x=2|1&x,""!==Pe&&!Tp(a,Pe,f)||""===Pe&&1===c.length){if(Aa(x))return!1;re=!0}}else{const st=8&x?Pe:c[++we];if(8&x&&null!==a.attrs){if(!Dp(a.attrs,st,f)){if(Aa(x))return!1;re=!0}continue}const fi=Ih(8&x?"class":Pe,P,Xd(a),f);if(-1===fi){if(Aa(x))return!1;re=!0;continue}if(""!==st){let Wi;Wi=fi>W?"":P[fi+1].toLowerCase();const cs=8&x?Wi:null;if(cs&&-1!==ku(cs,st,0)||2&x&&st!==Wi){if(Aa(x))return!1;re=!0}}}}else{if(!re&&!Aa(x)&&!Aa(Pe))return!1;if(re&&Aa(Pe))continue;re=!1,x=Pe|1&x}}return Aa(x)||re}function Aa(a){return 0==(1&a)}function Ih(a,c,f,x){if(null===c)return-1;let P=0;if(x||!f){let W=!1;for(;P<c.length;){const re=c[P];if(re===a)return P;if(3===re||6===re)W=!0;else{if(1===re||2===re){let we=c[++P];for(;"string"==typeof we;)we=c[++P];continue}if(4===re)break;if(0===re){P+=4;continue}}P+=W?1:2}return-1}return function xf(a,c){let f=a.indexOf(4);if(f>-1)for(f++;f<a.length;){const x=a[f];if("number"==typeof x)return-1;if(x===c)return f;f++}return-1}(c,a)}function ah(a,c,f=!1){for(let x=0;x<c.length;x++)if(Fa(a,c[x],f))return!0;return!1}function Af(a,c){e:for(let f=0;f<c.length;f++){const x=c[f];if(a.length===x.length){for(let P=0;P<a.length;P++)if(a[P]!==x[P])continue e;return!0}}return!1}function hh(a,c){return a?":not("+c.trim()+")":c}function Ia(a){let c=a[0],f=1,x=2,P="",W=!1;for(;f<a.length;){let re=a[f];if("string"==typeof re)if(2&x){const we=a[++f];P+="["+re+(we.length>0?'="'+we+'"':"")+"]"}else 8&x?P+="."+re:4&x&&(P+=" "+re);else""!==P&&!Aa(re)&&(c+=hh(W,P),P=""),x=re,W=W||!Aa(x);f++}return""!==P&&(c+=hh(W,P)),c}const so={};function If(a){xp(Ae(),Ie(),ct()+a,!1)}function xp(a,c,f,x){if(!x)if(3==(3&c[2])){const W=a.preOrderCheckHooks;null!==W&&jr(c,W,f)}else{const W=a.preOrderHooks;null!==W&&Pr(c,W,0,f)}ii(f)}function Ed(a,c=null,f=null,x){const P=_o(a,c,f,x);return P.resolveInjectorInitializers(),P}function _o(a,c=null,f=null,x,P=new Set){const W=[f||Ai,Qo(a)];return x=x||("object"==typeof a?void 0:at(a)),new bf(W,c||Th(),x||null,P)}let Ql=(()=>{class a{static create(f,x){if(Array.isArray(f))return Ed({name:""},x,f,"");{const P=f.name??"";return Ed({name:P},f.parent,f.providers,P)}}}return a.THROW_IF_NOT_FOUND=sa,a.NULL=new vo,a.\u0275prov=$i({token:a,providedIn:"any",factory:()=>gl(ac)}),a.__NG_ELEMENT_ID__=-1,a})();function l(a,c=li.Default){const f=Ie();return null===f?gl(a,c):Tl(Ji(),f,Nt(a),c)}function d(){throw new Error("invalid")}function C(a,c){return a<<17|c<<2}function L(a){return a>>17&32767}function he(a){return 2|a}function He(a){return(131068&a)>>2}function Ve(a,c){return-131069&a|c<<2}function It(a){return 1|a}function Ng(a,c){const f=a.contentQueries;if(null!==f)for(let x=0;x<f.length;x+=2){const P=f[x],W=f[x+1];if(-1!==W){const re=a.data[W];k(P),re.contentQueries(2,c[W],W)}}}function Va(a,c,f,x,P,W,re,we,Pe,st,Ft){const fi=c.blueprint.slice();return fi[0]=P,fi[2]=76|x,(null!==Ft||a&&1024&a[2])&&(fi[2]|=1024),dt(fi),fi[3]=fi[15]=a,fi[8]=f,fi[10]=re||a&&a[10],fi[11]=we||a&&a[11],fi[12]=Pe||a&&a[12]||null,fi[9]=st||a&&a[9]||null,fi[6]=W,fi[20]=function Xh(){return tp++}(),fi[21]=Ft,fi[16]=2==c.type?a[16]:fi,fi}function iu(a,c,f,x,P){let W=a.data[c];if(null===W)W=function Pf(a,c,f,x,P){const W=_s(),re=po(),Pe=a.data[c]=function z0(a,c,f,x,P,W){return{type:f,index:x,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:P,attrs:W,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,re?W:W&&W.parent,f,c,x,P);return null===a.firstChild&&(a.firstChild=Pe),null!==W&&(re?null==W.child&&null!==Pe.parent&&(W.child=Pe):null===W.next&&(W.next=Pe)),Pe}(a,c,f,x,P),function ze(){return Ii.lFrame.inI18n}()&&(W.flags|=64);else if(64&W.type){W.type=f,W.value=x,W.attrs=P;const re=function _n(){const a=Ii.lFrame,c=a.currentTNode;return a.isParent?c:c.parent}();W.injectorIndex=null===re?-1:re.injectorIndex}return en(W,!0),W}function yc(a,c,f,x){if(0===f)return-1;const P=c.length;for(let W=0;W<f;W++)c.push(x),a.blueprint.push(x),a.data.push(null);return P}function Gl(a,c,f){K(c);try{const x=a.viewQuery;null!==x&&zg(1,x,f);const P=a.template;null!==P&&su(a,c,P,1,f),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Ng(a,c),a.staticViewQueries&&zg(2,a.viewQuery,f);const W=a.components;null!==W&&function Pp(a,c){for(let f=0;f<c.length;f++)Q0(a,c[f])}(c,W)}catch(x){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),x}finally{c[2]&=-5,ie()}}function Nf(a,c,f,x){const P=c[2];if(128!=(128&P)){K(c);try{dt(c),function zr(a){return Ii.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==f&&su(a,c,f,2,x);const re=3==(3&P);if(re){const st=a.preOrderCheckHooks;null!==st&&jr(c,st,null)}else{const st=a.preOrderHooks;null!==st&&Pr(c,st,0,null),Po(c,0)}if(function J0(a){for(let c=rp(a);null!==c;c=Rc(c)){if(!c[2])continue;const f=c[9];for(let x=0;x<f.length;x++){const P=f[x],W=P[3];0==(512&P[2])&&Bt(W,1),P[2]|=512}}}(c),function K0(a){for(let c=rp(a);null!==c;c=Rc(c))for(let f=10;f<c.length;f++){const x=c[f],P=x[1];j(x)&&Nf(P,x,P.template,x[8])}}(c),null!==a.contentQueries&&Ng(a,c),re){const st=a.contentCheckHooks;null!==st&&jr(c,st)}else{const st=a.contentHooks;null!==st&&Pr(c,st,1),Po(c,1)}!function Fm(a,c){const f=a.hostBindingOpCodes;if(null!==f)try{for(let x=0;x<f.length;x++){const P=f[x];if(P<0)ii(~P);else{const W=P,re=f[++x],we=f[++x];$o(re,W),we(2,c[W])}}}finally{ii(-1)}}(a,c);const we=a.components;null!==we&&function Pm(a,c){for(let f=0;f<c.length;f++)Hf(a,c[f])}(c,we);const Pe=a.viewQuery;if(null!==Pe&&zg(2,Pe,x),re){const st=a.viewCheckHooks;null!==st&&jr(c,st)}else{const st=a.viewHooks;null!==st&&Pr(c,st,2),Po(c,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),c[2]&=-41,512&c[2]&&(c[2]&=-513,Bt(c[3],-1))}finally{ie()}}}function su(a,c,f,x,P){const W=ct(),re=2&x;try{ii(-1),re&&c.length>22&&xp(a,c,22,!1),f(x,P)}finally{ii(W)}}function Nm(a,c,f){if(Hr(c)){const P=c.directiveEnd;for(let W=c.directiveStart;W<P;W++){const re=a.data[W];re.contentQueries&&re.contentQueries(1,f[W],W)}}}function Bg(a,c,f){!Jn()||(function W0(a,c,f,x){const P=f.directiveStart,W=f.directiveEnd;a.firstCreatePass||qr(f,c),da(x,c);const re=f.initialInputs;for(let we=P;we<W;we++){const Pe=a.data[we],st=co(Pe);st&&Gm(c,f,Pe);const Ft=nl(c,a,we,f);da(Ft,c),null!==re&&Ym(0,we-P,Ft,Pe,0,re),st&&(S(f.index,c)[8]=Ft)}}(a,c,f,wn(f,c)),128==(128&f.flags)&&function xd(a,c,f){const x=f.directiveStart,P=f.directiveEnd,W=f.index,re=function Mn(){return Ii.lFrame.currentDirectiveIndex}();try{ii(W);for(let we=x;we<P;we++){const Pe=a.data[we],st=c[we];Ge(we),(null!==Pe.hostBindings||0!==Pe.hostVars||null!==Pe.hostAttrs)&&qm(Pe,st)}}finally{ii(-1),Ge(re)}}(a,c,f))}function ma(a,c,f=wn){const x=c.localNames;if(null!==x){let P=c.index+1;for(let W=0;W<x.length;W+=2){const re=x[W+1],we=-1===re?f(c,a):a[re];a[P++]=we}}}function Xl(a){const c=a.tView;return null===c||c.incompleteFirstPass?a.tView=Vg(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):c}function Vg(a,c,f,x,P,W,re,we,Pe,st){const Ft=22+x,fi=Ft+P,Wi=function H0(a,c){const f=[];for(let x=0;x<c;x++)f.push(x<a?null:so);return f}(Ft,fi),cs="function"==typeof st?st():st;return Wi[1]={type:a,blueprint:Wi,template:f,queries:null,viewQuery:we,declTNode:c,data:Wi.slice().fill(null,Ft),bindingStartIndex:Ft,expandoStartIndex:fi,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof W?W():W,pipeRegistry:"function"==typeof re?re():re,firstChild:null,schemas:Pe,consts:cs,incompleteFirstPass:!1}}function Vm(a,c,f,x){const P=jg(c);null===f?P.push(x):(P.push(f),a.firstCreatePass&&Zm(a).push(x,P.length-1))}function _m(a,c,f){for(let x in a)if(a.hasOwnProperty(x)){const P=a[x];(f=null===f?{}:f).hasOwnProperty(x)?f[x].push(c,P):f[x]=[c,P]}return f}function Hm(a,c){const x=c.directiveEnd,P=a.data,W=c.attrs,re=[];let we=null,Pe=null;for(let st=c.directiveStart;st<x;st++){const Ft=P[st],fi=Ft.inputs,Wi=null===W||Xd(c)?null:$0(fi,W);re.push(Wi),we=_m(fi,st,we),Pe=_m(Ft.outputs,st,Pe)}null!==we&&(we.hasOwnProperty("class")&&(c.flags|=16),we.hasOwnProperty("style")&&(c.flags|=32)),c.initialInputs=re,c.inputs=we,c.outputs=Pe}function Qa(a,c,f,x,P,W,re,we){const Pe=wn(c,f);let Ft,st=c.inputs;!we&&null!=st&&(Ft=st[x])?($c(a,f,Ft,x,P),Bi(c)&&zm(f,c.index)):3&c.type&&(x=function j0(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(x),P=null!=re?re(P,c.value||"",x):P,W.setProperty(Pe,x,P))}function zm(a,c){const f=S(c,a);16&f[2]||(f[2]|=32)}function _a(a,c,f,x){let P=!1;if(Jn()){const W=function U0(a,c,f){const x=a.directiveRegistry;let P=null;if(x)for(let W=0;W<x.length;W++){const re=x[W];ah(f,re.selectors,!1)&&(P||(P=[]),er(qr(f,c),a,re.type),co(re)?(Wm(a,f),P.unshift(re)):P.push(re))}return P}(a,c,f),re=null===x?null:{"":-1};if(null!==W){P=!0,Um(f,a.data.length,W.length);for(let Ft=0;Ft<W.length;Ft++){const fi=W[Ft];fi.providersResolver&&fi.providersResolver(fi)}let we=!1,Pe=!1,st=yc(a,c,W.length,null);for(let Ft=0;Ft<W.length;Ft++){const fi=W[Ft];f.mergedAttrs=Un(f.mergedAttrs,fi.hostAttrs),_g(a,f,c,st,fi),Y0(st,fi,re),null!==fi.contentQueries&&(f.flags|=8),(null!==fi.hostBindings||null!==fi.hostAttrs||0!==fi.hostVars)&&(f.flags|=128);const Wi=fi.type.prototype;!we&&(Wi.ngOnChanges||Wi.ngOnInit||Wi.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(f.index),we=!0),!Pe&&(Wi.ngOnChanges||Wi.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(f.index),Pe=!0),st++}Hm(a,f)}re&&function G0(a,c,f){if(c){const x=a.localNames=[];for(let P=0;P<c.length;P+=2){const W=f[c[P+1]];if(null==W)throw new Rt(-301,!1);x.push(c[P],W)}}}(f,x,re)}return f.mergedAttrs=Un(f.mergedAttrs,f.attrs),P}function Np(a,c,f,x,P,W){const re=W.hostBindings;if(re){let we=a.hostBindingOpCodes;null===we&&(we=a.hostBindingOpCodes=[]);const Pe=~c.index;(function q0(a){let c=a.length;for(;c>0;){const f=a[--c];if("number"==typeof f&&f<0)return f}return 0})(we)!=Pe&&we.push(Pe),we.push(x,P,re)}}function qm(a,c){null!==a.hostBindings&&a.hostBindings(1,c)}function Wm(a,c){c.flags|=2,(a.components||(a.components=[])).push(c.index)}function Y0(a,c,f){if(f){if(c.exportAs)for(let x=0;x<c.exportAs.length;x++)f[c.exportAs[x]]=a;co(c)&&(f[""]=a)}}function Um(a,c,f){a.flags|=1,a.directiveStart=c,a.directiveEnd=c+f,a.providerIndexes=c}function _g(a,c,f,x,P){a.data[x]=P;const W=P.factory||(P.factory=zs(P.type)),re=new De(W,co(P),l);a.blueprint[x]=re,f[x]=re,Np(a,c,0,x,yc(a,f,P.hostVars,so),P)}function Gm(a,c,f){const x=wn(c,a),P=Xl(f),W=a[10],re=zf(a,Va(a,P,null,f.onPush?32:16,x,c,W,W.createRenderer(x,f),null,null,null));a[c.index]=re}function Mh(a,c,f,x,P,W){const re=wn(a,c);!function _f(a,c,f,x,P,W,re){if(null==W)a.removeAttribute(c,P,f);else{const we=null==re?J(W):re(W,x||"",P);a.setAttribute(c,P,we,f)}}(c[11],re,W,a.value,f,x,P)}function Ym(a,c,f,x,P,W){const re=W[c];if(null!==re){const we=x.setInput;for(let Pe=0;Pe<re.length;){const st=re[Pe++],Ft=re[Pe++],fi=re[Pe++];null!==we?x.setInput(f,fi,st,Ft):f[Ft]=fi}}}function $0(a,c){let f=null,x=0;for(;x<c.length;){const P=c[x];if(0!==P)if(5!==P){if("number"==typeof P)break;a.hasOwnProperty(P)&&(null===f&&(f=[]),f.push(P,a[P],c[x+1])),x+=2}else x+=2;else x+=4}return f}function $m(a,c,f,x){return new Array(a,!0,!1,c,null,0,x,f,null,null)}function Hf(a,c){const f=S(c,a);if(j(f)){const x=f[1];48&f[2]?Nf(x,f,x.template,f[8]):f[5]>0&&Hg(f)}}function Hg(a){for(let x=rp(a);null!==x;x=Rc(x))for(let P=10;P<x.length;P++){const W=x[P];if(j(W))if(512&W[2]){const re=W[1];Nf(re,W,re.template,W[8])}else W[5]>0&&Hg(W)}const f=a[1].components;if(null!==f)for(let x=0;x<f.length;x++){const P=S(f[x],a);j(P)&&P[5]>0&&Hg(P)}}function Q0(a,c){const f=S(c,a),x=f[1];(function X0(a,c){for(let f=c.length;f<a.blueprint.length;f++)c.push(a.blueprint[f])})(x,f),Gl(x,f,f[8])}function zf(a,c){return a[13]?a[14][4]=c:a[13]=c,a[14]=c,c}function jf(a){for(;a;){a[2]|=32;const c=Ic(a);if(os(a)&&!c)return a;a=c}return null}function Bp(a,c,f,x=!0){const P=c[10];P.begin&&P.begin();try{Nf(a,c,a.template,f)}catch(re){throw x&&Jm(c,re),re}finally{P.end&&P.end()}}function zg(a,c,f){k(0),c(a,f)}function jg(a){return a[7]||(a[7]=[])}function Zm(a){return a.cleanup||(a.cleanup=[])}function Jm(a,c){const f=a[9],x=f?f.get(dc,null):null;x&&x.handleError(c)}function $c(a,c,f,x,P){for(let W=0;W<f.length;){const re=f[W++],we=f[W++],Pe=c[re],st=a.data[re];null!==st.setInput?st.setInput(Pe,P,x,we):Pe[we]=P}}function Nu(a,c,f){let x=f?a.styles:null,P=f?a.classes:null,W=0;if(null!==c)for(let re=0;re<c.length;re++){const we=c[re];"number"==typeof we?W=we:1==W?P=Oe(P,we):2==W&&(x=Oe(x,we+": "+c[++re]+";"))}f?a.styles=x:a.stylesWithoutHost=x,f?a.classes=P:a.classesWithoutHost=P}function Bu(a,c,f,x,P=!1){for(;null!==f;){const W=c[f.index];if(null!==W&&x.push(Gi(W)),Ur(W))for(let we=10;we<W.length;we++){const Pe=W[we],st=Pe[1].firstChild;null!==st&&Bu(Pe[1],Pe,st,x)}const re=f.type;if(8&re)Bu(a,c,f.child,x);else if(32&re){const we=xl(f,c);let Pe;for(;Pe=we();)x.push(Pe)}else if(16&re){const we=uf(c,f);if(Array.isArray(we))x.push(...we);else{const Pe=Ic(c[16]);Bu(Pe[1],Pe,we,x,!0)}}f=P?f.projectionNext:f.next}return x}class Vp{constructor(c,f){this._lView=c,this._cdRefInjectingView=f,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const c=this._lView,f=c[1];return Bu(f,c,f.firstChild,[])}get context(){return this._lView[8]}set context(c){this._lView[8]=c}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[3];if(Ur(c)){const f=c[8],x=f?f.indexOf(this):-1;x>-1&&(Hd(c,x),ta(f,x))}this._attachedToViewContainer=!1}yh(this._lView[1],this._lView)}onDestroy(c){Vm(this._lView[1],this._lView,null,c)}markForCheck(){jf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Bp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cf(a,c){nc(a,c,c[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new Rt(902,!1);this._appRef=c}}class ty extends Vp{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;Bp(c[1],c,c[8],!1)}checkNoChanges(){}get context(){return null}}class ho extends Cd{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const f=Rs(c);return new nu(f,this.ngModule)}}function Qm(a){const c=[];for(let f in a)a.hasOwnProperty(f)&&c.push({propName:a[f],templateName:f});return c}class qg{constructor(c,f){this.injector=c,this.parentInjector=f}get(c,f,x){const P=this.injector.get(c,qc,x);return P!==qc||f===qc?P:this.parentInjector.get(c,f,x)}}class nu extends Ml{constructor(c,f){super(),this.componentDef=c,this.ngModule=f,this.componentType=c.type,this.selector=function ys(a){return a.map(Ia).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!f}get inputs(){return Qm(this.componentDef.inputs)}get outputs(){return Qm(this.componentDef.outputs)}create(c,f,x,P){let W=(P=P||this.ngModule)instanceof xh?P:P?.injector;W&&null!==this.componentDef.getStandaloneInjector&&(W=this.componentDef.getStandaloneInjector(W)||W);const re=W?new qg(c,W):c,we=re.get(Jd,null);if(null===we)throw new Rt(407,!1);const Pe=re.get(bp,null),st=we.createRenderer(null,this.componentDef),Ft=this.componentDef.selectors[0][0]||"div",fi=x?function Bm(a,c,f){return a.selectRootElement(c,f===As.ShadowDom)}(st,x,this.componentDef.encapsulation):nh(st,Ft,function qf(a){const c=a.toLowerCase();return"svg"===c?"svg":"math"===c?"math":null}(Ft)),Wi=this.componentDef.onPush?288:272,cs=Vg(0,null,null,1,0,null,null,null,null,null),Fs=Va(null,cs,null,Wi,null,null,we,st,Pe,re,null);let yn,Gn;K(Fs);try{const Sr=function Wg(a,c,f,x,P,W){const re=f[1];f[22]=a;const Pe=iu(re,22,2,"#host",null),st=Pe.mergedAttrs=c.hostAttrs;null!==st&&(Nu(Pe,st,!0),null!==a&&(Wn(P,a,st),null!==Pe.classes&&wu(P,a,Pe.classes),null!==Pe.styles&&rc(P,a,Pe.styles)));const Ft=x.createRenderer(a,c),fi=Va(f,Xl(c),null,c.onPush?32:16,f[22],Pe,x,Ft,W||null,null,null);return re.firstCreatePass&&(er(qr(Pe,f),re,c.type),Wm(re,Pe),Um(Pe,f.length,1)),zf(f,fi),f[22]=fi}(fi,this.componentDef,Fs,we,st);if(fi)if(x)Wn(st,fi,["ng-version",Ru.full]);else{const{attrs:Gr,classes:Zs}=function Eg(a){const c=[],f=[];let x=1,P=2;for(;x<a.length;){let W=a[x];if("string"==typeof W)2===P?""!==W&&c.push(W,a[++x]):8===P&&f.push(W);else{if(!Aa(P))break;P=W}x++}return{attrs:c,classes:f}}(this.componentDef.selectors[0]);Gr&&Wn(st,fi,Gr),Zs&&Zs.length>0&&wu(st,fi,Zs.join(" "))}if(Gn=Ws(cs,22),void 0!==f){const Gr=Gn.projection=[];for(let Zs=0;Zs<this.ngContentSelectors.length;Zs++){const no=f[Zs];Gr.push(null!=no?Array.from(no):null)}}yn=function ry(a,c,f,x){const P=f[1],W=function Vf(a,c,f){const x=Ji();a.firstCreatePass&&(f.providersResolver&&f.providersResolver(f),_g(a,x,c,yc(a,c,1,null),f),Hm(a,x));const P=nl(c,a,x.directiveStart,x);da(P,c);const W=wn(x,c);return W&&da(W,c),P}(P,f,c);if(a[8]=f[8]=W,null!==x)for(const we of x)we(W,c);if(c.contentQueries){const we=Ji();c.contentQueries(1,W,we.directiveStart)}const re=Ji();return!P.firstCreatePass||null===c.hostBindings&&null===c.hostAttrs||(ii(re.index),Np(f[1],re,0,re.directiveStart,re.directiveEnd,c),qm(c,W)),W}(Sr,this.componentDef,Fs,[Xm]),Gl(cs,Fs,null)}finally{ie()}return new ny(this.componentType,yn,Uh(Gn,Fs),Fs,Gn)}}class ny extends class La{}{constructor(c,f,x,P,W){super(),this.location=x,this._rootLView=P,this._tNode=W,this.instance=f,this.hostView=this.changeDetectorRef=new ty(P),this.componentType=c}setInput(c,f){const x=this._tNode.inputs;let P;if(null!==x&&(P=x[c])){const W=this._rootLView;$c(W[1],W,P,c,f),zm(W,this._tNode.index)}}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function Xm(){const a=Ji();dr(Ie()[1],a)}function _p(a){let c=function Ug(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),f=!0;const x=[a];for(;c;){let P;if(co(a))P=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new Rt(903,!1);P=c.\u0275dir}if(P){if(f){x.push(P);const re=a;re.inputs=Wf(a.inputs),re.declaredInputs=Wf(a.declaredInputs),re.outputs=Wf(a.outputs);const we=P.hostBindings;we&&Vu(a,we);const Pe=P.viewQuery,st=P.contentQueries;if(Pe&&t0(a,Pe),st&&oy(a,st),E(a.inputs,P.inputs),E(a.declaredInputs,P.declaredInputs),E(a.outputs,P.outputs),co(P)&&P.data.animation){const Ft=a.data;Ft.animation=(Ft.animation||[]).concat(P.data.animation)}}const W=P.features;if(W)for(let re=0;re<W.length;re++){const we=W[re];we&&we.ngInherit&&we(a),we===_p&&(f=!1)}}c=Object.getPrototypeOf(c)}!function e0(a){let c=0,f=null;for(let x=a.length-1;x>=0;x--){const P=a[x];P.hostVars=c+=P.hostVars,P.hostAttrs=Un(P.hostAttrs,f=Un(f,P.hostAttrs))}}(x)}function Wf(a){return a===Ot?{}:a===Ai?[]:a}function t0(a,c){const f=a.viewQuery;a.viewQuery=f?(x,P)=>{c(x,P),f(x,P)}:c}function oy(a,c){const f=a.contentQueries;a.contentQueries=f?(x,P,W)=>{c(x,P,W),f(x,P,W)}:c}function Vu(a,c){const f=a.hostBindings;a.hostBindings=f?(x,P)=>{c(x,P),f(x,P)}:c}let Hp=null;function Ad(){if(!Hp){const a=bs.Symbol;if(a&&a.iterator)Hp=a.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let f=0;f<c.length;++f){const x=c[f];"entries"!==x&&"size"!==x&&Map.prototype[x]===Map.prototype.entries&&(Hp=x)}}}return Hp}function zp(a){return!!Gg(a)&&(Array.isArray(a)||!(a instanceof Map)&&Ad()in a)}function Gg(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function zl(a,c,f){return!Object.is(a[c],f)&&(a[c]=f,!0)}function $g(a,c,f,x){const P=Ie();return zl(P,Mr(),c)&&(Ae(),Mh(si(),P,a,c,f,x)),$g}function Hu(a,c,f,x){return zl(a,Mr(),f)?c+J(f)+x:so}function l0(a,c,f,x,P,W,re,we){const Pe=Ie(),st=Ae(),Ft=a+22,fi=st.firstCreatePass?function uy(a,c,f,x,P,W,re,we,Pe){const st=c.consts,Ft=iu(c,a,4,re||null,Ee(st,we));_a(c,f,Ft,Ee(st,Pe)),dr(c,Ft);const fi=Ft.tViews=Vg(2,Ft,x,P,W,c.directiveRegistry,c.pipeRegistry,null,c.schemas,st);return null!==c.queries&&(c.queries.template(c,Ft),fi.queries=c.queries.embeddedTView(Ft)),Ft}(Ft,st,Pe,c,f,x,P,W,re):st.data[Ft];en(fi,!1);const Wi=Pe[11].createComment("");yu(st,Pe,Wi,fi),da(Wi,Pe),zf(Pe,Pe[Ft]=$m(Wi,Pe,Wi,fi)),Vn(fi)&&Bg(st,Pe,fi),null!=re&&ma(Pe,fi,we)}function em(a,c,f){const x=Ie();return zl(x,Mr(),c)&&Qa(Ae(),si(),x,a,c,x[11],f,!1),em}function tm(a,c,f,x,P){const re=P?"class":"style";$c(a,f,c.inputs[re],re,x)}function Kc(a,c,f,x){const P=Ie(),W=Ae(),re=22+a,we=P[11],Pe=P[re]=nh(we,c,function Gs(){return Ii.lFrame.currentNamespace}()),st=W.firstCreatePass?function gy(a,c,f,x,P,W,re){const we=c.consts,st=iu(c,a,2,P,Ee(we,W));return _a(c,f,st,Ee(we,re)),null!==st.attrs&&Nu(st,st.attrs,!1),null!==st.mergedAttrs&&Nu(st,st.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,st),st}(re,W,P,0,c,f,x):W.data[re];en(st,!0);const Ft=st.mergedAttrs;null!==Ft&&Wn(we,Pe,Ft);const fi=st.classes;null!==fi&&wu(we,Pe,fi);const Wi=st.styles;return null!==Wi&&rc(we,Pe,Wi),64!=(64&st.flags)&&yu(W,P,Pe,st),0===function Ps(){return Ii.lFrame.elementDepthCount}()&&da(Pe,P),function un(){Ii.lFrame.elementDepthCount++}(),Vn(st)&&(Bg(W,P,st),Nm(W,st,P)),null!==x&&ma(P,st),Kc}function Jc(){let a=Ji();po()?jo():(a=a.parent,en(a,!1));const c=a;!function Xs(){Ii.lFrame.elementDepthCount--}();const f=Ae();return f.firstCreatePass&&(dr(f,a),Hr(a)&&f.queries.elementEnd(a)),null!=c.classesWithoutHost&&function vi(a){return 0!=(16&a.flags)}(c)&&tm(f,c,Ie(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function ds(a){return 0!=(32&a.flags)}(c)&&tm(f,c,Ie(),c.stylesWithoutHost,!1),Jc}function im(a,c,f,x){return Kc(a,c,f,x),Jc(),im}function Gf(a,c,f){const x=Ie(),P=Ae(),W=a+22,re=P.firstCreatePass?function my(a,c,f,x,P){const W=c.consts,re=Ee(W,x),we=iu(c,a,8,"ng-container",re);return null!==re&&Nu(we,re,!0),_a(c,f,we,Ee(W,P)),null!==c.queries&&c.queries.elementStart(c,we),we}(W,P,x,c,f):P.data[W];en(re,!0);const we=x[W]=x[11].createComment("");return yu(P,x,we,re),da(we,x),Vn(re)&&(Bg(P,x,re),Nm(P,re,x)),null!=f&&ma(x,re),Gf}function Yf(){let a=Ji();const c=Ae();return po()?jo():(a=a.parent,en(a,!1)),c.firstCreatePass&&(dr(c,a),Hr(a)&&c.queries.elementEnd(a)),Yf}function Id(a,c,f){return Gf(a,c,f),Yf(),Id}function ru(){return Ie()}function sm(a){return!!a&&"function"==typeof a.then}function a0(a){return!!a&&"function"==typeof a.subscribe}const Qc=a0;function $f(a,c,f,x){const P=Ie(),W=Ae(),re=Ji();return function h0(a,c,f,x,P,W,re,we){const Pe=Vn(x),Ft=a.firstCreatePass&&Zm(a),fi=c[8],Wi=jg(c);let cs=!0;if(3&x.type||we){const Gn=wn(x,c),Sr=we?we(Gn):Gn,Gr=Wi.length,Zs=we?wl=>we(Gi(wl[x.index])):x.index;let no=null;if(!we&&Pe&&(no=function nm(a,c,f,x){const P=a.cleanup;if(null!=P)for(let W=0;W<P.length-1;W+=2){const re=P[W];if(re===f&&P[W+1]===x){const we=c[7],Pe=P[W+2];return we.length>Pe?we[Pe]:null}"string"==typeof re&&(W+=2)}return null}(a,c,P,x.index)),null!==no)(no.__ngLastListenerFn__||no).__ngNextListenerFn__=W,no.__ngLastListenerFn__=W,cs=!1;else{W=qu(x,c,fi,W,!1);const wl=f.listen(Sr,P,W);Wi.push(W,wl),Ft&&Ft.push(P,Zs,Gr,Gr+1)}}else W=qu(x,c,fi,W,!1);const Fs=x.outputs;let yn;if(cs&&null!==Fs&&(yn=Fs[P])){const Gn=yn.length;if(Gn)for(let Sr=0;Sr<Gn;Sr+=2){const jl=c[yn[Sr]][yn[Sr+1]].subscribe(W),Kp=Wi.length;Wi.push(W,jl),Ft&&Ft.push(P,x.index,Kp,-(Kp+1))}}}(W,P,P[11],re,a,c,0,x),$f}function c0(a,c,f,x){try{return!1!==f(x)}catch(P){return Jm(a,P),!1}}function qu(a,c,f,x,P){return function W(re){if(re===Function)return x;jf(2&a.flags?S(a.index,c):c);let Pe=c0(c,0,x,re),st=W.__ngNextListenerFn__;for(;st;)Pe=c0(c,0,st,re)&&Pe,st=st.__ngNextListenerFn__;return P&&!1===Pe&&(re.preventDefault(),re.returnValue=!1),Pe}}function rm(a=1){return function xe(a){return(Ii.lFrame.contextLView=function Ke(a,c){for(;a>0;)c=c[15],a--;return c}(a,Ii.lFrame.contextLView))[8]}(a)}function yy(a,c){let f=null;const x=function ua(a){const c=a.attrs;if(null!=c){const f=c.indexOf(5);if(0==(1&f))return c[f+1]}return null}(a);for(let P=0;P<c.length;P++){const W=c[P];if("*"!==W){if(null===x?ah(a,W,!0):Af(x,W))return P}else f=P}return f}function d0(a){const c=Ie()[16][6];if(!c.projection){const x=c.projection=ca(a?a.length:1,null),P=x.slice();let W=c.child;for(;null!==W;){const re=a?yy(W,a):0;null!==re&&(P[re]?P[re].projectionNext=W:x[re]=W,P[re]=W),W=W.next}}}function u0(a,c=0,f){const x=Ie(),P=Ae(),W=iu(P,22+a,16,null,f||null);null===W.projection&&(W.projection=c),jo(),64!=(64&W.flags)&&function ap(a,c,f){bu(c[11],0,c,f,hd(a,f,c),Oa(f.parent||c[6],f,c))}(P,x,W)}function om(a,c,f){return Xc(a,"",c,"",f),om}function Xc(a,c,f,x,P){const W=Ie(),re=Hu(W,c,f,x);return re!==so&&Qa(Ae(),si(),W,a,re,W[11],P,!1),Xc}function y0(a,c,f,x,P){const W=a[f+1],re=null===c;let we=x?L(W):He(W),Pe=!1;for(;0!==we&&(!1===Pe||re);){const Ft=a[we+1];by(a[we],c)&&(Pe=!0,a[we+1]=x?It(Ft):he(Ft)),we=x?L(Ft):He(Ft)}Pe&&(a[f+1]=x?he(W):It(W))}function by(a,c){return null===a||null==c||(Array.isArray(a)?a[1]:a)===c||!(!Array.isArray(a)||"string"!=typeof c)&&U(a,c)>=0}const ha={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hm(a){return a.substring(ha.key,ha.keyEnd)}function v0(a,c){const f=ha.textEnd;return f===c?-1:(c=ha.keyEnd=function Sy(a,c,f){for(;c<f&&a.charCodeAt(c)>32;)c++;return c}(a,ha.key=c,f),ou(a,c,f))}function ou(a,c,f){for(;c<f&&a.charCodeAt(c)<=32;)c++;return c}function um(a,c,f){return $h(a,c,f,!1),um}function pm(a,c){return $h(a,c,null,!0),pm}function fm(a){Zh(F,td,a,!0)}function td(a,c){for(let f=function wy(a){return function dm(a){ha.key=0,ha.keyEnd=0,ha.value=0,ha.valueEnd=0,ha.textEnd=a.length}(a),v0(a,ou(a,0,ha.textEnd))}(c);f>=0;f=v0(c,f))F(a,hm(c),!0)}function $h(a,c,f,x){const P=Ie(),W=Ae(),re=ko(2);W.firstUpdatePass&&gm(W,a,re,x),c!==so&&zl(P,re,c)&&T(W,W.data[ct()],P,P[11],a,P[re+1]=function se(a,c){return null==a||("string"==typeof c?a+=c:"object"==typeof a&&(a=at(Kl(a)))),a}(c,f),x,re)}function Zh(a,c,f,x){const P=Ae(),W=ko(2);P.firstUpdatePass&&gm(P,null,W,x);const re=Ie();if(f!==so&&zl(re,W,f)){const we=P.data[ct()];if(ge(we,x)&&!Jf(P,W)){let Pe=x?we.classesWithoutHost:we.stylesWithoutHost;null!==Pe&&(f=Oe(Pe,f||"")),tm(P,we,re,f,x)}else!function m(a,c,f,x,P,W,re,we){P===so&&(P=Ai);let Pe=0,st=0,Ft=0<P.length?P[0]:null,fi=0<W.length?W[0]:null;for(;null!==Ft||null!==fi;){const Wi=Pe<P.length?P[Pe+1]:void 0,cs=st<W.length?W[st+1]:void 0;let yn,Fs=null;Ft===fi?(Pe+=2,st+=2,Wi!==cs&&(Fs=fi,yn=cs)):null===fi||null!==Ft&&Ft<fi?(Pe+=2,Fs=Ft):(st+=2,Fs=fi,yn=cs),null!==Fs&&T(a,c,f,x,Fs,yn,re,we),Ft=Pe<P.length?P[Pe]:null,fi=st<W.length?W[st]:null}}(P,we,re,re[11],re[W+1],re[W+1]=function r(a,c,f){if(null==f||""===f)return Ai;const x=[],P=Kl(f);if(Array.isArray(P))for(let W=0;W<P.length;W++)a(x,P[W],!0);else if("object"==typeof P)for(const W in P)P.hasOwnProperty(W)&&a(x,W,P[W]);else"string"==typeof P&&c(x,P);return x}(a,c,f),x,W)}}function Jf(a,c){return c>=a.expandoStartIndex}function gm(a,c,f,x){const P=a.data;if(null===P[f+1]){const W=P[ct()],re=Jf(a,f);ge(W,x)&&null===c&&!re&&(c=!1),c=function Ev(a,c,f,x){const P=p(a);let W=x?c.residualClasses:c.residualStyles;if(null===P)0===(x?c.classBindings:c.styleBindings)&&(f=n(f=s(null,a,c,f,x),c.attrs,x),W=null);else{const re=c.directiveStylingLast;if(-1===re||a[re]!==P)if(f=s(P,a,c,f,x),null===W){let Pe=function b(a,c,f){const x=f?c.classBindings:c.styleBindings;if(0!==He(x))return a[L(x)]}(a,c,x);void 0!==Pe&&Array.isArray(Pe)&&(Pe=s(null,a,c,Pe[1],x),Pe=n(Pe,c.attrs,x),function e(a,c,f,x){a[L(f?c.classBindings:c.styleBindings)]=x}(a,c,x,Pe))}else W=function t(a,c,f){let x;const P=c.directiveEnd;for(let W=1+c.directiveStylingLast;W<P;W++)x=n(x,a[W].hostAttrs,f);return n(x,c.attrs,f)}(a,c,x)}return void 0!==W&&(x?c.residualClasses=W:c.residualStyles=W),f}(P,W,c,x),function g0(a,c,f,x,P,W){let re=W?c.classBindings:c.styleBindings,we=L(re),Pe=He(re);a[x]=f;let Ft,st=!1;if(Array.isArray(f)){const fi=f;Ft=fi[1],(null===Ft||U(fi,Ft)>0)&&(st=!0)}else Ft=f;if(P)if(0!==Pe){const Wi=L(a[we+1]);a[x+1]=C(Wi,we),0!==Wi&&(a[Wi+1]=Ve(a[Wi+1],x)),a[we+1]=function X(a,c){return 131071&a|c<<17}(a[we+1],x)}else a[x+1]=C(we,0),0!==we&&(a[we+1]=Ve(a[we+1],x)),we=x;else a[x+1]=C(Pe,0),0===we?we=x:a[Pe+1]=Ve(a[Pe+1],x),Pe=x;st&&(a[x+1]=he(a[x+1])),y0(a,Ft,x,!0),y0(a,Ft,x,!1),function m0(a,c,f,x,P){const W=P?a.residualClasses:a.residualStyles;null!=W&&"string"==typeof c&&U(W,c)>=0&&(f[x+1]=It(f[x+1]))}(c,Ft,a,x,W),re=C(we,Pe),W?c.classBindings=re:c.styleBindings=re}(P,W,c,f,re,x)}}function s(a,c,f,x,P){let W=null;const re=f.directiveEnd;let we=f.directiveStylingLast;for(-1===we?we=f.directiveStart:we++;we<re&&(W=c[we],x=n(x,W.hostAttrs,P),W!==a);)we++;return null!==a&&(f.directiveStylingLast=we),x}function n(a,c,f){const x=f?1:2;let P=-1;if(null!==c)for(let W=0;W<c.length;W++){const re=c[W];"number"==typeof re?P=re:P===x&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),F(a,re,!!f||c[++W]))}return void 0===a?null:a}function T(a,c,f,x,P,W,re,we){if(!(3&c.type))return;const Pe=a.data,st=Pe[we+1];Y(function nt(a){return 1==(1&a)}(st)?V(Pe,c,f,P,He(st),re):void 0)||(Y(W)||function q(a){return 2==(2&a)}(st)&&(W=V(Pe,null,f,P,we,re)),function pf(a,c,f,x,P){if(c)P?a.addClass(f,x):a.removeClass(f,x);else{let W=-1===x.indexOf("-")?void 0:za.DashCase;null==P?a.removeStyle(f,x,W):("string"==typeof P&&P.endsWith("!important")&&(P=P.slice(0,-10),W|=za.Important),a.setStyle(f,x,P,W))}}(x,re,ts(ct(),f),P,W))}function V(a,c,f,x,P,W){const re=null===c;let we;for(;P>0;){const Pe=a[P],st=Array.isArray(Pe),Ft=st?Pe[1]:Pe,fi=null===Ft;let Wi=f[P+1];Wi===so&&(Wi=fi?Ai:void 0);let cs=fi?H(Wi,x):Ft===x?Wi:void 0;if(st&&!Y(cs)&&(cs=H(Pe,x)),Y(cs)&&(we=cs,re))return we;const Fs=a[P+1];P=re?L(Fs):He(Fs)}if(null!==c){let Pe=W?c.residualClasses:c.residualStyles;null!=Pe&&(we=H(Pe,x))}return we}function Y(a){return void 0!==a}function ge(a,c){return 0!=(a.flags&(c?16:32))}function ke(a,c=""){const f=Ie(),x=Ae(),P=a+22,W=x.firstCreatePass?iu(x,P,1,c,null):x.data[P],re=f[P]=function Mc(a,c){return a.createText(c)}(f[11],c);yu(x,f,re,W),en(W,!1)}function qe(a){return mt("",a,""),qe}function mt(a,c,f){const x=Ie(),P=Hu(x,a,c,f);return P!==so&&function vc(a,c,f){const x=ts(c,a);!function kc(a,c,f){a.setValue(c,f)}(a[11],x,f)}(x,ct(),P),mt}function fr(a,c,f){Zh(F,td,Hu(Ie(),a,c,f),!0)}function Dy(a,c,f){const x=Ie();return zl(x,Mr(),c)&&Qa(Ae(),si(),x,a,c,x[11],f,!0),Dy}function Ty(a,c,f){const x=Ie();if(zl(x,Mr(),c)){const W=Ae(),re=si();Qa(W,re,x,a,c,function Km(a,c,f){return(null===a||co(a))&&(f=function Vi(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(f[c.index])),f[11]}(p(W.data),re,x),f,!0)}return Ty}const $p=void 0;var VC=["en",[["a","p"],["AM","PM"],$p],[["AM","PM"],$p,$p],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$p,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$p,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$p,"{1} 'at' {0}",$p],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function BC(a){const f=Math.floor(Math.abs(a)),x=a.toString().replace(/^[^.]*\.?/,"").length;return 1===f&&0===x?1:5}];let Xf={};function xy(a){const c=function _C(a){return a.toLowerCase().replace(/_/g,"-")}(a);let f=Fv(c);if(f)return f;const x=c.split("-")[0];if(f=Fv(x),f)return f;if("en"===x)return VC;throw new Rt(701,!1)}function Lv(a){return xy(a)[eo.PluralCase]}function Fv(a){return a in Xf||(Xf[a]=bs.ng&&bs.ng.common&&bs.ng.common.locales&&bs.ng.common.locales[a]),Xf[a]}var eo=(()=>((eo=eo||{})[eo.LocaleId=0]="LocaleId",eo[eo.DayPeriodsFormat=1]="DayPeriodsFormat",eo[eo.DayPeriodsStandalone=2]="DayPeriodsStandalone",eo[eo.DaysFormat=3]="DaysFormat",eo[eo.DaysStandalone=4]="DaysStandalone",eo[eo.MonthsFormat=5]="MonthsFormat",eo[eo.MonthsStandalone=6]="MonthsStandalone",eo[eo.Eras=7]="Eras",eo[eo.FirstDayOfWeek=8]="FirstDayOfWeek",eo[eo.WeekendRange=9]="WeekendRange",eo[eo.DateFormat=10]="DateFormat",eo[eo.TimeFormat=11]="TimeFormat",eo[eo.DateTimeFormat=12]="DateTimeFormat",eo[eo.NumberSymbols=13]="NumberSymbols",eo[eo.NumberFormats=14]="NumberFormats",eo[eo.CurrencyCode=15]="CurrencyCode",eo[eo.CurrencySymbol=16]="CurrencySymbol",eo[eo.CurrencyName=17]="CurrencyName",eo[eo.Currencies=18]="Currencies",eo[eo.Directionality=19]="Directionality",eo[eo.PluralCase=20]="PluralCase",eo[eo.ExtraData=21]="ExtraData",eo))();const eg="en-US";let Pv=eg;function Ry(a,c,f,x,P){if(a=Nt(a),Array.isArray(a))for(let W=0;W<a.length;W++)Ry(a[W],c,f,x,P);else{const W=Ae(),re=Ie();let we=cc(a)?a:Nt(a.provide),Pe=Ah(a);const st=Ji(),Ft=1048575&st.providerIndexes,fi=st.directiveStart,Wi=st.providerIndexes>>20;if(cc(a)||!a.multi){const cs=new De(Pe,P,l),Fs=ky(we,c,P?Ft:Ft+Wi,fi);-1===Fs?(er(qr(st,re),W,we),My(W,a,c.length),c.push(we),st.directiveStart++,st.directiveEnd++,P&&(st.providerIndexes+=1048576),f.push(cs),re.push(cs)):(f[Fs]=cs,re[Fs]=cs)}else{const cs=ky(we,c,Ft+Wi,fi),Fs=ky(we,c,Ft,Ft+Wi),yn=cs>=0&&f[cs],Gn=Fs>=0&&f[Fs];if(P&&!Gn||!P&&!yn){er(qr(st,re),W,we);const Sr=function Nw(a,c,f,x,P){const W=new De(a,f,l);return W.multi=[],W.index=c,W.componentProviders=0,ob(W,P,x&&!f),W}(P?Pw:Fw,f.length,P,x,Pe);!P&&Gn&&(f[Fs].providerFactory=Sr),My(W,a,c.length,0),c.push(we),st.directiveStart++,st.directiveEnd++,P&&(st.providerIndexes+=1048576),f.push(Sr),re.push(Sr)}else My(W,a,cs>-1?cs:Fs,ob(f[P?Fs:cs],Pe,!P&&x));!P&&x&&Gn&&f[Fs].componentProviders++}}}function My(a,c,f,x){const P=cc(c),W=function mp(a){return!!a.useClass}(c);if(P||W){const Pe=(W?Nt(c.useClass):c).prototype.ngOnDestroy;if(Pe){const st=a.destroyHooks||(a.destroyHooks=[]);if(!P&&c.multi){const Ft=st.indexOf(f);-1===Ft?st.push(f,[x,Pe]):st[Ft+1].push(x,Pe)}else st.push(f,Pe)}}}function ob(a,c,f){return f&&a.componentProviders++,a.multi.push(c)-1}function ky(a,c,f,x){for(let P=f;P<x;P++)if(c[P]===a)return P;return-1}function Fw(a,c,f,x){return Oy(this.multi,[])}function Pw(a,c,f,x){const P=this.multi;let W;if(this.providerFactory){const re=this.providerFactory.componentProviders,we=nl(f,f[1],this.providerFactory.index,x);W=we.slice(0,re),Oy(P,W);for(let Pe=re;Pe<we.length;Pe++)W.push(we[Pe])}else W=[],Oy(P,W);return W}function Oy(a,c){for(let f=0;f<a.length;f++)c.push((0,a[f])());return c}function lb(a,c=[]){return f=>{f.providersResolver=(x,P)=>function Lw(a,c,f){const x=Ae();if(x.firstCreatePass){const P=co(a);Ry(f,x.data,x.blueprint,P,!0),Ry(c,x.data,x.blueprint,P,!1)}}(x,P?P(a):a,c)}}class tg{}class ab{}function Bw(a,c){return new hb(a,c??null)}class hb extends tg{constructor(c,f){super(),this._parent=f,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ho(this);const x=tt(c);this._bootstrapComponents=$a(x.bootstrap),this._r3Injector=_o(c,f,[{provide:tg,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],at(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(f=>f()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Ly extends ab{constructor(c){super(),this.moduleType=c}create(c){return new hb(this.moduleType,c)}}class Vw extends tg{constructor(c,f,x){super(),this.componentFactoryResolver=new ho(this),this.instance=null;const P=new bf([...c,{provide:tg,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],f||Th(),x,new Set(["environment"]));this.injector=P,P.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function Fy(a,c,f=null){return new Vw(a,c,f).injector}let _w=(()=>{class a{constructor(f){this._injector=f,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(f){if(!f.standalone)return null;if(!this.cachedInjectors.has(f.id)){const x=go(0,f.type),P=x.length>0?Fy([x],this._injector,`Standalone[${f.type.name}]`):null;this.cachedInjectors.set(f.id,P)}return this.cachedInjectors.get(f.id)}ngOnDestroy(){try{for(const f of this.cachedInjectors.values())null!==f&&f.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=$i({token:a,providedIn:"environment",factory:()=>new a(gl(xh))}),a})();function cb(a){a.getStandaloneInjector=c=>c.get(_w).getOrCreateStandaloneInjector(a)}function yb(a,c,f,x){return function vb(a,c,f,x,P,W){const re=c+f;return zl(a,re,P)?function dh(a,c,f){return a[c]=f}(a,re+1,W?x.call(W,P):x(P)):function wm(a,c){const f=a[c];return f===so?void 0:f}(a,re+1)}(Ie(),function Do(){const a=Ii.lFrame;let c=a.bindingRootIndex;return-1===c&&(c=a.bindingRootIndex=a.tView.bindingStartIndex),c}(),a,c,f,x)}function Ny(a){return c=>{setTimeout(a,void 0,c)}}const Od=class cS extends i.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,f,x){let P=c,W=f||(()=>null),re=x;if(c&&"object"==typeof c){const Pe=c;P=Pe.next?.bind(Pe),W=Pe.error?.bind(Pe),re=Pe.complete?.bind(Pe)}this.__isAsync&&(W=Ny(W),P&&(P=Ny(P)),re&&(re=Ny(re)));const we=super.subscribe({next:P,error:W,complete:re});return c instanceof u.w0&&c.add(we),we}};function dS(){return this._results[Ad()]()}class By{constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const f=Ad(),x=By.prototype;x[f]||(x[f]=dS)}get changes(){return this._changes||(this._changes=new Od)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,f){return this._results.reduce(c,f)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,f){const x=this;x.dirty=!1;const P=$l(c);(this._changesDetected=!function ka(a,c,f){if(a.length!==c.length)return!1;for(let x=0;x<a.length;x++){let P=a[x],W=c[x];if(f&&(P=f(P),W=f(W)),W!==P)return!1}return!0}(x._results,P,f))&&(x._results=P,x.length=P.length,x.last=P[this.length-1],x.first=P[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Em=(()=>{class a{}return a.__NG_ELEMENT_ID__=fS,a})();const uS=Em,pS=class extends uS{constructor(c,f,x){super(),this._declarationLView=c,this._declarationTContainer=f,this.elementRef=x}createEmbeddedView(c,f){const x=this._declarationTContainer.tViews,P=Va(this._declarationLView,x,c,16,null,x.declTNode,null,null,null,null,f||null);P[17]=this._declarationLView[this._declarationTContainer.index];const re=this._declarationLView[19];return null!==re&&(P[19]=re.createEmbeddedView(x)),Gl(x,P,c),new Vp(P)}};function fS(){return I0(Ji(),Ie())}function I0(a,c){return 4&a.type?new pS(c,a,Uh(a,c)):null}let R0=(()=>{class a{}return a.__NG_ELEMENT_ID__=gS,a})();function gS(){return Tb(Ji(),Ie())}const mS=R0,Eb=class extends mS{constructor(c,f,x){super(),this._lContainer=c,this._hostTNode=f,this._hostLView=x}get element(){return Uh(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){const c=Tn(this._hostTNode,this._hostLView);if(Co(c)){const f=No(c,this._hostLView),x=fo(c);return new Is(f[1].data[x+8],f)}return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const f=Db(this._lContainer);return null!==f&&f[c]||null}get length(){return this._lContainer.length-10}createEmbeddedView(c,f,x){let P,W;"number"==typeof x?P=x:null!=x&&(P=x.index,W=x.injector);const re=c.createEmbeddedView(f||{},W);return this.insert(re,P),re}createComponent(c,f,x,P,W){const re=c&&!function Ma(a){return"function"==typeof a}(c);let we;if(re)we=f;else{const fi=f||{};we=fi.index,x=fi.injector,P=fi.projectableNodes,W=fi.environmentInjector||fi.ngModuleRef}const Pe=re?c:new nu(Rs(c)),st=x||this.parentInjector;if(!W&&null==Pe.ngModule){const Wi=(re?st:this.parentInjector).get(xh,null);Wi&&(W=Wi)}const Ft=Pe.create(st,P,void 0,W);return this.insert(Ft.hostView,we),Ft}insert(c,f){const x=c._lView,P=x[1];if(function oe(a){return Ur(a[3])}(x)){const Ft=this.indexOf(c);if(-1!==Ft)this.detach(Ft);else{const fi=x[3],Wi=new Eb(fi,fi[6],fi[3]);Wi.detach(Wi.indexOf(c))}}const W=this._adjustIndex(f),re=this._lContainer;!function Oc(a,c,f,x){const P=10+x,W=f.length;x>0&&(f[P-1][4]=c),x<W-10?(c[4]=f[P],Sc(f,10+x,c)):(f.push(c),c[4]=null),c[3]=f;const re=c[17];null!==re&&f!==re&&function Lc(a,c){const f=a[9];c[16]!==c[3][3][16]&&(a[2]=!0),null===f?a[9]=[c]:f.push(c)}(re,c);const we=c[19];null!==we&&we.insertView(a),c[2]|=64}(P,x,re,W);const we=vu(W,re),Pe=x[11],st=zh(Pe,re[7]);return null!==st&&function op(a,c,f,x,P,W){x[0]=P,x[6]=c,nc(a,x,f,1,P,W)}(P,re[6],Pe,x,st,we),c.attachToViewContainerRef(),Sc(Vy(re),W,c),c}move(c,f){return this.insert(c,f)}indexOf(c){const f=Db(this._lContainer);return null!==f?f.indexOf(c):-1}remove(c){const f=this._adjustIndex(c,-1),x=Hd(this._lContainer,f);x&&(ta(Vy(this._lContainer),f),yh(x[1],x))}detach(c){const f=this._adjustIndex(c,-1),x=Hd(this._lContainer,f);return x&&null!=ta(Vy(this._lContainer),f)?new Vp(x):null}_adjustIndex(c,f=0){return c??this.length+f}};function Db(a){return a[8]}function Vy(a){return a[8]||(a[8]=[])}function Tb(a,c){let f;const x=c[a.index];if(Ur(x))f=x;else{let P;if(8&a.type)P=Gi(x);else{const W=c[11];P=W.createComment("");const re=wn(a,c);Pl(W,zh(W,re),P,function gu(a,c){return a.nextSibling(c)}(W,re),!1)}c[a.index]=f=$m(x,c,P,a),zf(c,f)}return new Eb(f,a,c)}class _y{constructor(c){this.queryList=c,this.matches=null}clone(){return new _y(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hy{constructor(c=[]){this.queries=c}createEmbeddedView(c){const f=c.queries;if(null!==f){const x=null!==c.contentQueries?c.contentQueries[0]:f.length,P=[];for(let W=0;W<x;W++){const re=f.getByIndex(W);P.push(this.queries[re.indexInDeclarationView].clone())}return new Hy(P)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let f=0;f<this.queries.length;f++)null!==Fb(c,f).matches&&this.queries[f].setDirty()}}class xb{constructor(c,f,x=null){this.predicate=c,this.flags=f,this.read=x}}class zy{constructor(c=[]){this.queries=c}elementStart(c,f){for(let x=0;x<this.queries.length;x++)this.queries[x].elementStart(c,f)}elementEnd(c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementEnd(c)}embeddedTView(c){let f=null;for(let x=0;x<this.length;x++){const P=null!==f?f.length:0,W=this.getByIndex(x).embeddedTView(c,P);W&&(W.indexInDeclarationView=x,null!==f?f.push(W):f=[W])}return null!==f?new zy(f):null}template(c,f){for(let x=0;x<this.queries.length;x++)this.queries[x].template(c,f)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class jy{constructor(c,f=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=f}elementStart(c,f){this.isApplyingToNode(f)&&this.matchTNode(c,f)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,f){this.elementStart(c,f)}embeddedTView(c,f){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,f),new jy(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const f=this._declarationNodeIndex;let x=c.parent;for(;null!==x&&8&x.type&&x.index!==f;)x=x.parent;return f===(null!==x?x.index:-1)}return this._appliesToNextNode}matchTNode(c,f){const x=this.metadata.predicate;if(Array.isArray(x))for(let P=0;P<x.length;P++){const W=x[P];this.matchTNodeWithReadOption(c,f,bS(f,W)),this.matchTNodeWithReadOption(c,f,Xr(f,c,W,!1,!1))}else x===Em?4&f.type&&this.matchTNodeWithReadOption(c,f,-1):this.matchTNodeWithReadOption(c,f,Xr(f,c,x,!1,!1))}matchTNodeWithReadOption(c,f,x){if(null!==x){const P=this.metadata.read;if(null!==P)if(P===wd||P===R0||P===Em&&4&f.type)this.addMatch(f.index,-2);else{const W=Xr(f,c,P,!1,!1);null!==W&&this.addMatch(f.index,W)}else this.addMatch(f.index,x)}}addMatch(c,f){null===this.matches?this.matches=[c,f]:this.matches.push(c,f)}}function bS(a,c){const f=a.localNames;if(null!==f)for(let x=0;x<f.length;x+=2)if(f[x]===c)return f[x+1];return null}function wS(a,c,f,x){return-1===f?function CS(a,c){return 11&a.type?Uh(a,c):4&a.type?I0(a,c):null}(c,a):-2===f?function SS(a,c,f){return f===wd?Uh(c,a):f===Em?I0(c,a):f===R0?Tb(c,a):void 0}(a,c,x):nl(a,a[1],f,c)}function Ab(a,c,f,x){const P=c[19].queries[x];if(null===P.matches){const W=a.data,re=f.matches,we=[];for(let Pe=0;Pe<re.length;Pe+=2){const st=re[Pe];we.push(st<0?null:wS(c,W[st],re[Pe+1],f.metadata.read))}P.matches=we}return P.matches}function qy(a,c,f,x){const P=a.queries.getByIndex(f),W=P.matches;if(null!==W){const re=Ab(a,c,P,f);for(let we=0;we<W.length;we+=2){const Pe=W[we];if(Pe>0)x.push(re[we/2]);else{const st=W[we+1],Ft=c[-Pe];for(let fi=10;fi<Ft.length;fi++){const Wi=Ft[fi];Wi[17]===Wi[3]&&qy(Wi[1],Wi,st,x)}if(null!==Ft[9]){const fi=Ft[9];for(let Wi=0;Wi<fi.length;Wi++){const cs=fi[Wi];qy(cs[1],cs,st,x)}}}}}return x}function Ib(a){const c=Ie(),f=Ae(),x=w();k(x+1);const P=Fb(f,x);if(a.dirty&&function I(a){return 4==(4&a[2])}(c)===(2==(2&P.metadata.flags))){if(null===P.matches)a.reset([]);else{const W=P.crossesNgTemplate?qy(f,c,x,[]):Ab(f,c,P,x);a.reset(W,Cf),a.notifyOnChanges()}return!0}return!1}function Rb(a,c,f){const x=Ae();x.firstCreatePass&&(Lb(x,new xb(a,c,f),-1),2==(2&c)&&(x.staticViewQueries=!0)),Ob(x,Ie(),c)}function Mb(a,c,f,x){const P=Ae();if(P.firstCreatePass){const W=Ji();Lb(P,new xb(c,f,x),W.index),function DS(a,c){const f=a.contentQueries||(a.contentQueries=[]);c!==(f.length?f[f.length-1]:-1)&&f.push(a.queries.length-1,c)}(P,a),2==(2&f)&&(P.staticContentQueries=!0)}Ob(P,Ie(),f)}function kb(){return function ES(a,c){return a[19].queries[c].queryList}(Ie(),w())}function Ob(a,c,f){const x=new By(4==(4&f));Vm(a,c,x,x.destroy),null===c[19]&&(c[19]=new Hy),c[19].queries.push(new _y(x))}function Lb(a,c,f){null===a.queries&&(a.queries=new zy),a.queries.track(new jy(c,f))}function Fb(a,c){return a.queries.getByIndex(c)}function Pb(a,c){return I0(a,c)}function k0(...a){}const eC=new Os("Application Initializer");let O0=(()=>{class a{constructor(f){this.appInits=f,this.resolve=k0,this.reject=k0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((x,P)=>{this.resolve=x,this.reject=P})}runInitializers(){if(this.initialized)return;const f=[],x=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let P=0;P<this.appInits.length;P++){const W=this.appInits[P]();if(sm(W))f.push(W);else if(Qc(W)){const re=new Promise((we,Pe)=>{W.subscribe({complete:we,error:Pe})});f.push(re)}}Promise.all(f).then(()=>{x()}).catch(P=>{this.reject(P)}),0===f.length&&x(),this.initialized=!0}}return a.\u0275fac=function(f){return new(f||a)(gl(eC,8))},a.\u0275prov=$i({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const tC=new Os("AppId",{providedIn:"root",factory:function iC(){return`${$y()}${$y()}${$y()}`}});function $y(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sC=new Os("Platform Initializer"),WS=new Os("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nC=new Os("appBootstrapListener"),US=new Os("AnimationModuleType");let GS=(()=>{class a{log(f){console.log(f)}warn(f){console.warn(f)}}return a.\u0275fac=function(f){return new(f||a)},a.\u0275prov=$i({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const L0=new Os("LocaleId",{providedIn:"root",factory:()=>Gu(L0,li.Optional|li.SkipSelf)||function YS(){return typeof $localize<"u"&&$localize.locale||eg}()}),$S=new Os("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZS{constructor(c,f){this.ngModuleFactory=c,this.componentFactories=f}}let KS=(()=>{class a{compileModuleSync(f){return new Ly(f)}compileModuleAsync(f){return Promise.resolve(this.compileModuleSync(f))}compileModuleAndAllComponentsSync(f){const x=this.compileModuleSync(f),W=$a(tt(f).declarations).reduce((re,we)=>{const Pe=Rs(we);return Pe&&re.push(new nu(Pe)),re},[]);return new ZS(x,W)}compileModuleAndAllComponentsAsync(f){return Promise.resolve(this.compileModuleAndAllComponentsSync(f))}clearCache(){}clearCacheFor(f){}getModuleId(f){}}return a.\u0275fac=function(f){return new(f||a)},a.\u0275prov=$i({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const XS=(()=>Promise.resolve(0))();function Zy(a){typeof Zone>"u"?XS.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class wc{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:f=!1,shouldCoalesceRunChangeDetection:x=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Od(!1),this.onMicrotaskEmpty=new Od(!1),this.onStable=new Od(!1),this.onError=new Od(!1),typeof Zone>"u")throw new Rt(908,!1);Zone.assertZonePatched();const P=this;if(P._nesting=0,P._outer=P._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const W=Zone.AsyncStackTaggingZoneSpec;P._inner=P._inner.fork(new W("Angular"))}Zone.TaskTrackingZoneSpec&&(P._inner=P._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(P._inner=P._inner.fork(Zone.longStackTraceZoneSpec)),P.shouldCoalesceEventChangeDetection=!x&&f,P.shouldCoalesceRunChangeDetection=x,P.lastRequestAnimationFrameId=-1,P.nativeRequestAnimationFrame=function eE(){let a=bs.requestAnimationFrame,c=bs.cancelAnimationFrame;if(typeof Zone<"u"&&a&&c){const f=a[Zone.__symbol__("OriginalDelegate")];f&&(a=f);const x=c[Zone.__symbol__("OriginalDelegate")];x&&(c=x)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function sE(a){const c=()=>{!function iE(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(bs,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Jy(a),a.isCheckStableRunning=!0,Ky(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Jy(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(f,x,P,W,re,we)=>{try{return lC(a),f.invokeTask(P,W,re,we)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===W.type||a.shouldCoalesceRunChangeDetection)&&c(),aC(a)}},onInvoke:(f,x,P,W,re,we,Pe)=>{try{return lC(a),f.invoke(P,W,re,we,Pe)}finally{a.shouldCoalesceRunChangeDetection&&c(),aC(a)}},onHasTask:(f,x,P,W)=>{f.hasTask(P,W),x===P&&("microTask"==W.change?(a._hasPendingMicrotasks=W.microTask,Jy(a),Ky(a)):"macroTask"==W.change&&(a.hasPendingMacrotasks=W.macroTask))},onHandleError:(f,x,P,W)=>(f.handleError(P,W),a.runOutsideAngular(()=>a.onError.emit(W)),!1)})}(P)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wc.isInAngularZone())throw new Rt(909,!1)}static assertNotInAngularZone(){if(wc.isInAngularZone())throw new Rt(909,!1)}run(c,f,x){return this._inner.run(c,f,x)}runTask(c,f,x,P){const W=this._inner,re=W.scheduleEventTask("NgZoneEvent: "+P,c,tE,k0,k0);try{return W.runTask(re,f,x)}finally{W.cancelTask(re)}}runGuarded(c,f,x){return this._inner.runGuarded(c,f,x)}runOutsideAngular(c){return this._outer.run(c)}}const tE={};function Ky(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Jy(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function lC(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function aC(a){a._nesting--,Ky(a)}class nE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Od,this.onMicrotaskEmpty=new Od,this.onStable=new Od,this.onError=new Od}run(c,f,x){return c.apply(f,x)}runGuarded(c,f,x){return c.apply(f,x)}runOutsideAngular(c){return c()}runTask(c,f,x,P){return c.apply(f,x)}}const hC=new Os(""),cC=new Os("");let Qy,rE=(()=>{class a{constructor(f,x,P){this._ngZone=f,this.registry=x,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qy||(function oE(a){Qy=a}(P),P.addToWindow(x)),this._watchAngularEvents(),f.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wc.assertNotInAngularZone(),Zy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zy(()=>{for(;0!==this._callbacks.length;){let f=this._callbacks.pop();clearTimeout(f.timeoutId),f.doneCb(this._didWork)}this._didWork=!1});else{let f=this.getPendingTasks();this._callbacks=this._callbacks.filter(x=>!x.updateCb||!x.updateCb(f)||(clearTimeout(x.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(f=>({source:f.source,creationLocation:f.creationLocation,data:f.data})):[]}addCallback(f,x,P){let W=-1;x&&x>0&&(W=setTimeout(()=>{this._callbacks=this._callbacks.filter(re=>re.timeoutId!==W),f(this._didWork,this.getPendingTasks())},x)),this._callbacks.push({doneCb:f,timeoutId:W,updateCb:P})}whenStable(f,x,P){if(P&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(f,x,P),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(f){this.registry.registerApplication(f,this)}unregisterApplication(f){this.registry.unregisterApplication(f)}findProviders(f,x,P){return[]}}return a.\u0275fac=function(f){return new(f||a)(gl(wc),gl(dC),gl(cC))},a.\u0275prov=$i({token:a,factory:a.\u0275fac}),a})(),dC=(()=>{class a{constructor(){this._applications=new Map}registerApplication(f,x){this._applications.set(f,x)}unregisterApplication(f){this._applications.delete(f)}unregisterAllApplications(){this._applications.clear()}getTestability(f){return this._applications.get(f)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(f,x=!0){return Qy?.findTestabilityInTree(this,f,x)??null}}return a.\u0275fac=function(f){return new(f||a)},a.\u0275prov=$i({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Wu=null;const uC=new Os("AllowMultipleToken"),Xy=new Os("PlatformDestroyListeners");class hE{constructor(c,f){this.name=c,this.token=f}}function fC(a,c,f=[]){const x=`Platform: ${c}`,P=new Os(x);return(W=[])=>{let re=ev();if(!re||re.injector.get(uC,!1)){const we=[...f,...W,{provide:P,useValue:!0}];a?a(we):function cE(a){if(Wu&&!Wu.get(uC,!1))throw new Rt(400,!1);Wu=a;const c=a.get(mC);(function pC(a){const c=a.get(sC,null);c&&c.forEach(f=>f())})(a)}(function gC(a=[],c){return Ql.create({name:c,providers:[{provide:Wh,useValue:"platform"},{provide:Xy,useValue:new Set([()=>Wu=null])},...a]})}(we,x))}return function uE(a){const c=ev();if(!c)throw new Rt(401,!1);return c}()}}function ev(){return Wu?.get(mC)??null}let mC=(()=>{class a{constructor(f){this._injector=f,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(f,x){const P=function vC(a,c){let f;return f="noop"===a?new nE:("zone.js"===a?void 0:a)||new wc(c),f}(x?.ngZone,function yC(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(x)),W=[{provide:wc,useValue:P}];return P.run(()=>{const re=Ql.create({providers:W,parent:this.injector,name:f.moduleType.name}),we=f.create(re),Pe=we.injector.get(dc,null);if(!Pe)throw new Rt(402,!1);return P.runOutsideAngular(()=>{const st=P.onError.subscribe({next:Ft=>{Pe.handleError(Ft)}});we.onDestroy(()=>{P0(this._modules,we),st.unsubscribe()})}),function bC(a,c,f){try{const x=f();return sm(x)?x.catch(P=>{throw c.runOutsideAngular(()=>a.handleError(P)),P}):x}catch(x){throw c.runOutsideAngular(()=>a.handleError(x)),x}}(Pe,P,()=>{const st=we.injector.get(O0);return st.runInitializers(),st.donePromise.then(()=>(function Nv(a){ui(a,"Expected localeId to be defined"),"string"==typeof a&&(Pv=a.toLowerCase().replace(/_/g,"-"))}(we.injector.get(L0,eg)||eg),this._moduleDoBootstrap(we),we))})})}bootstrapModule(f,x=[]){const P=CC({},x);return function lE(a,c,f){const x=new Ly(f);return Promise.resolve(x)}(0,0,f).then(W=>this.bootstrapModuleFactory(W,P))}_moduleDoBootstrap(f){const x=f.injector.get(F0);if(f._bootstrapComponents.length>0)f._bootstrapComponents.forEach(P=>x.bootstrap(P));else{if(!f.instance.ngDoBootstrap)throw new Rt(403,!1);f.instance.ngDoBootstrap(x)}this._modules.push(f)}onDestroy(f){this._destroyListeners.push(f)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Rt(404,!1);this._modules.slice().forEach(x=>x.destroy()),this._destroyListeners.forEach(x=>x());const f=this._injector.get(Xy,null);f&&(f.forEach(x=>x()),f.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(f){return new(f||a)(gl(Ql))},a.\u0275prov=$i({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function CC(a,c){return Array.isArray(c)?c.reduce(CC,a):{...a,...c}}let F0=(()=>{class a{constructor(f,x,P){this._zone=f,this._injector=x,this._exceptionHandler=P,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const W=new Ue.y(we=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{we.next(this._stable),we.complete()})}),re=new Ue.y(we=>{let Pe;this._zone.runOutsideAngular(()=>{Pe=this._zone.onStable.subscribe(()=>{wc.assertNotInAngularZone(),Zy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,we.next(!0))})})});const st=this._zone.onUnstable.subscribe(()=>{wc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{we.next(!1)}))});return()=>{Pe.unsubscribe(),st.unsubscribe()}});this.isStable=function Si(...a){const c=(0,Lt.yG)(a),f=(0,Lt._6)(a,1/0),x=a;return x.length?1===x.length?(0,$e.Xf)(x[0]):(0,Zt.J)(f)((0,ut.D)(x,c)):Li.E}(W,re.pipe((0,We.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(f,x){const P=f instanceof Ml;if(!this._injector.get(O0).done)throw!P&&Re(f),new Rt(405,false);let re;re=P?f:this._injector.get(Cd).resolveComponentFactory(f),this.componentTypes.push(re.componentType);const we=function aE(a){return a.isBoundToModule}(re)?void 0:this._injector.get(tg),st=re.create(Ql.NULL,[],x||re.selector,we),Ft=st.location.nativeElement,fi=st.injector.get(hC,null);return fi?.registerApplication(Ft),st.onDestroy(()=>{this.detachView(st.hostView),P0(this.components,st),fi?.unregisterApplication(Ft)}),this._loadComponent(st),st}tick(){if(this._runningTick)throw new Rt(101,!1);try{this._runningTick=!0;for(let f of this._views)f.detectChanges()}catch(f){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(f))}finally{this._runningTick=!1}}attachView(f){const x=f;this._views.push(x),x.attachToAppRef(this)}detachView(f){const x=f;P0(this._views,x),x.detachFromAppRef()}_loadComponent(f){this.attachView(f.hostView),this.tick(),this.components.push(f),this._injector.get(nC,[]).concat(this._bootstrapListeners).forEach(P=>P(f))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(f=>f()),this._views.slice().forEach(f=>f.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(f){return this._destroyListeners.push(f),()=>P0(this._destroyListeners,f)}destroy(){if(this._destroyed)throw new Rt(406,!1);const f=this._injector;f.destroy&&!f.destroyed&&f.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(f){return new(f||a)(gl(wc),gl(xh),gl(dc))},a.\u0275prov=$i({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function P0(a,c){const f=a.indexOf(c);f>-1&&a.splice(f,1)}let SC=!0,EC=!1;function fE(){return EC=!0,SC}function gE(){if(EC)throw new Error("Cannot enable prod mode after platform setup.");SC=!1}let mE=(()=>{class a{}return a.__NG_ELEMENT_ID__=yE,a})();function yE(a){return function vE(a,c,f){if(Bi(a)&&!f){const x=S(a.index,c);return new Vp(x,x)}return 47&a.type?new Vp(c[16],c):null}(Ji(),Ie(),16==(16&a))}class AC{constructor(){}supports(c){return zp(c)}create(c){return new DE(c)}}const EE=(a,c)=>c;class DE{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||EE}forEachItem(c){let f;for(f=this._itHead;null!==f;f=f._next)c(f)}forEachOperation(c){let f=this._itHead,x=this._removalsHead,P=0,W=null;for(;f||x;){const re=!x||f&&f.currentIndex<RC(x,P,W)?f:x,we=RC(re,P,W),Pe=re.currentIndex;if(re===x)P--,x=x._nextRemoved;else if(f=f._next,null==re.previousIndex)P++;else{W||(W=[]);const st=we-P,Ft=Pe-P;if(st!=Ft){for(let Wi=0;Wi<st;Wi++){const cs=Wi<W.length?W[Wi]:W[Wi]=0,Fs=cs+Wi;Ft<=Fs&&Fs<st&&(W[Wi]=cs+1)}W[re.previousIndex]=Ft-st}}we!==Pe&&c(re,we,Pe)}}forEachPreviousItem(c){let f;for(f=this._previousItHead;null!==f;f=f._nextPrevious)c(f)}forEachAddedItem(c){let f;for(f=this._additionsHead;null!==f;f=f._nextAdded)c(f)}forEachMovedItem(c){let f;for(f=this._movesHead;null!==f;f=f._nextMoved)c(f)}forEachRemovedItem(c){let f;for(f=this._removalsHead;null!==f;f=f._nextRemoved)c(f)}forEachIdentityChange(c){let f;for(f=this._identityChangesHead;null!==f;f=f._nextIdentityChange)c(f)}diff(c){if(null==c&&(c=[]),!zp(c))throw new Rt(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let P,W,re,f=this._itHead,x=!1;if(Array.isArray(c)){this.length=c.length;for(let we=0;we<this.length;we++)W=c[we],re=this._trackByFn(we,W),null!==f&&Object.is(f.trackById,re)?(x&&(f=this._verifyReinsertion(f,W,re,we)),Object.is(f.item,W)||this._addIdentityChange(f,W)):(f=this._mismatch(f,W,re,we),x=!0),f=f._next}else P=0,function hy(a,c){if(Array.isArray(a))for(let f=0;f<a.length;f++)c(a[f]);else{const f=a[Ad()]();let x;for(;!(x=f.next()).done;)c(x.value)}}(c,we=>{re=this._trackByFn(P,we),null!==f&&Object.is(f.trackById,re)?(x&&(f=this._verifyReinsertion(f,we,re,P)),Object.is(f.item,we)||this._addIdentityChange(f,we)):(f=this._mismatch(f,we,re,P),x=!0),f=f._next,P++}),this.length=P;return this._truncate(f),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,f,x,P){let W;return null===c?W=this._itTail:(W=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(x,null))?(Object.is(c.item,f)||this._addIdentityChange(c,f),this._reinsertAfter(c,W,P)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(x,P))?(Object.is(c.item,f)||this._addIdentityChange(c,f),this._moveAfter(c,W,P)):c=this._addAfter(new TE(f,x),W,P),c}_verifyReinsertion(c,f,x,P){let W=null===this._unlinkedRecords?null:this._unlinkedRecords.get(x,null);return null!==W?c=this._reinsertAfter(W,c._prev,P):c.currentIndex!=P&&(c.currentIndex=P,this._addToMoves(c,P)),c}_truncate(c){for(;null!==c;){const f=c._next;this._addToRemovals(this._unlink(c)),c=f}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,f,x){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const P=c._prevRemoved,W=c._nextRemoved;return null===P?this._removalsHead=W:P._nextRemoved=W,null===W?this._removalsTail=P:W._prevRemoved=P,this._insertAfter(c,f,x),this._addToMoves(c,x),c}_moveAfter(c,f,x){return this._unlink(c),this._insertAfter(c,f,x),this._addToMoves(c,x),c}_addAfter(c,f,x){return this._insertAfter(c,f,x),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,f,x){const P=null===f?this._itHead:f._next;return c._next=P,c._prev=f,null===P?this._itTail=c:P._prev=c,null===f?this._itHead=c:f._next=c,null===this._linkedRecords&&(this._linkedRecords=new IC),this._linkedRecords.put(c),c.currentIndex=x,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const f=c._prev,x=c._next;return null===f?this._itHead=x:f._next=x,null===x?this._itTail=f:x._prev=f,c}_addToMoves(c,f){return c.previousIndex===f||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new IC),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,f){return c.item=f,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class TE{constructor(c,f){this.item=c,this.trackById=f,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xE{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,f){let x;for(x=this._head;null!==x;x=x._nextDup)if((null===f||f<=x.currentIndex)&&Object.is(x.trackById,c))return x;return null}remove(c){const f=c._prevDup,x=c._nextDup;return null===f?this._head=x:f._nextDup=x,null===x?this._tail=f:x._prevDup=f,null===this._head}}class IC{constructor(){this.map=new Map}put(c){const f=c.trackById;let x=this.map.get(f);x||(x=new xE,this.map.set(f,x)),x.add(c)}get(c,f){const P=this.map.get(c);return P?P.get(c,f):null}remove(c){const f=c.trackById;return this.map.get(f).remove(c)&&this.map.delete(f),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RC(a,c,f){const x=a.previousIndex;if(null===x)return x;let P=0;return f&&x<f.length&&(P=f[x]),x+c+P}class MC{constructor(){}supports(c){return c instanceof Map||Gg(c)}create(){return new AE}}class AE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let f;for(f=this._mapHead;null!==f;f=f._next)c(f)}forEachPreviousItem(c){let f;for(f=this._previousMapHead;null!==f;f=f._nextPrevious)c(f)}forEachChangedItem(c){let f;for(f=this._changesHead;null!==f;f=f._nextChanged)c(f)}forEachAddedItem(c){let f;for(f=this._additionsHead;null!==f;f=f._nextAdded)c(f)}forEachRemovedItem(c){let f;for(f=this._removalsHead;null!==f;f=f._nextRemoved)c(f)}diff(c){if(c){if(!(c instanceof Map||Gg(c)))throw new Rt(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let f=this._mapHead;if(this._appendAfter=null,this._forEach(c,(x,P)=>{if(f&&f.key===P)this._maybeAddToChanges(f,x),this._appendAfter=f,f=f._next;else{const W=this._getOrCreateRecordForKey(P,x);f=this._insertBeforeOrAppend(f,W)}}),f){f._prev&&(f._prev._next=null),this._removalsHead=f;for(let x=f;null!==x;x=x._nextRemoved)x===this._mapHead&&(this._mapHead=null),this._records.delete(x.key),x._nextRemoved=x._next,x.previousValue=x.currentValue,x.currentValue=null,x._prev=null,x._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,f){if(c){const x=c._prev;return f._next=c,f._prev=x,c._prev=f,x&&(x._next=f),c===this._mapHead&&(this._mapHead=f),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=f,f._prev=this._appendAfter):this._mapHead=f,this._appendAfter=f,null}_getOrCreateRecordForKey(c,f){if(this._records.has(c)){const P=this._records.get(c);this._maybeAddToChanges(P,f);const W=P._prev,re=P._next;return W&&(W._next=re),re&&(re._prev=W),P._next=null,P._prev=null,P}const x=new IE(c);return this._records.set(c,x),x.currentValue=f,this._addToAdditions(x),x}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,f){Object.is(f,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=f,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,f){c instanceof Map?c.forEach(f):Object.keys(c).forEach(x=>f(c[x],x))}}class IE{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kC(){return new rv([new AC])}let rv=(()=>{class a{constructor(f){this.factories=f}static create(f,x){if(null!=x){const P=x.factories.slice();f=f.concat(P)}return new a(f)}static extend(f){return{provide:a,useFactory:x=>a.create(f,x||kC()),deps:[[a,new Ko,new th]]}}find(f){const x=this.factories.find(P=>P.supports(f));if(null!=x)return x;throw new Rt(901,!1)}}return a.\u0275prov=$i({token:a,providedIn:"root",factory:kC}),a})();function OC(){return new ov([new MC])}let ov=(()=>{class a{constructor(f){this.factories=f}static create(f,x){if(x){const P=x.factories.slice();f=f.concat(P)}return new a(f)}static extend(f){return{provide:a,useFactory:x=>a.create(f,x||OC()),deps:[[a,new Ko,new th]]}}find(f){const x=this.factories.find(P=>P.supports(f));if(x)return x;throw new Rt(901,!1)}}return a.\u0275prov=$i({token:a,providedIn:"root",factory:OC}),a})();const kE=fC(null,"core",[]);let OE=(()=>{class a{constructor(f){}}return a.\u0275fac=function(f){return new(f||a)(gl(F0))},a.\u0275mod=js({type:a}),a.\u0275inj=zt({}),a})();function LE(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},4006:(An,hs,rt)=>{rt.d(hs,{F:()=>$n,Fj:()=>Oe,JJ:()=>Ci,JL:()=>gs,JU:()=>ut,Kr:()=>ks,On:()=>Bi,Q7:()=>Gi,UX:()=>Ii,YN:()=>ur,_Y:()=>Vn,cw:()=>js,qu:()=>Xs,sg:()=>Fo,u:()=>mn,u5:()=>Bt});var i=rt(8274),u=rt(6895),Ue=rt(2076),Zt=rt(4128),$e=rt(4004);let Li=(()=>{class Ie{constructor(Le,Et){this._renderer=Le,this._elementRef=Et,this.onChange=Ji=>{},this.onTouched=()=>{}}setProperty(Le,Et){this._renderer.setProperty(this._elementRef.nativeElement,Le,Et)}registerOnTouched(Le){this.onTouched=Le}registerOnChange(Le){this.onChange=Le}setDisabledState(Le){this.setProperty("disabled",Le)}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(i.Qsj),i.Y36(i.SBq))},Ie.\u0275dir=i.lG2({type:Ie}),Ie})(),Lt=(()=>{class Ie extends Li{}return Ie.\u0275fac=function(){let Ae;return function(Et){return(Ae||(Ae=i.n5z(Ie)))(Et||Ie)}}(),Ie.\u0275dir=i.lG2({type:Ie,features:[i.qOj]}),Ie})();const ut=new i.OlP("NgValueAccessor"),gt={provide:ut,useExisting:(0,i.Gpc)(()=>Oe),multi:!0},at=new i.OlP("CompositionEventMode");let Oe=(()=>{class Ie extends Li{constructor(Le,Et,Ji){super(Le,Et),this._compositionMode=Ji,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function E(){const Ie=(0,u.q)()?(0,u.q)().getUserAgent():"";return/android (\d+)/.test(Ie.toLowerCase())}())}writeValue(Le){this.setProperty("value",Le??"")}_handleInput(Le){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Le)}_compositionStart(){this._composing=!0}_compositionEnd(Le){this._composing=!1,this._compositionMode&&this.onChange(Le)}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(at,8))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Le,Et){1&Le&&i.NdJ("input",function(_s){return Et._handleInput(_s.target.value)})("blur",function(){return Et.onTouched()})("compositionstart",function(){return Et._compositionStart()})("compositionend",function(_s){return Et._compositionEnd(_s.target.value)})},features:[i._Bn([gt]),i.qOj]}),Ie})();const Di=new i.OlP("NgValidators"),bt=new i.OlP("NgAsyncValidators");function Ne(Ie){return function jt(Ie){return null==Ie||("string"==typeof Ie||Array.isArray(Ie))&&0===Ie.length}(Ie.value)?{required:!0}:null}function lt(Ie){return null}function Xe(Ie){return null!=Ie}function B(Ie){return(0,i.QGY)(Ie)?(0,Ue.D)(Ie):Ie}function de(Ie){let Ae={};return Ie.forEach(Le=>{Ae=null!=Le?{...Ae,...Le}:Ae}),0===Object.keys(Ae).length?null:Ae}function Be(Ie,Ae){return Ae.map(Le=>Le(Ie))}function xt(Ie){return Ie.map(Ae=>function Fe(Ie){return!Ie.validate}(Ae)?Ae:Le=>Ae.validate(Le))}function ji(Ie){return null!=Ie?function $t(Ie){if(!Ie)return null;const Ae=Ie.filter(Xe);return 0==Ae.length?null:function(Le){return de(Be(Le,Ae))}}(xt(Ie)):null}function zi(Ie){return null!=Ie?function is(Ie){if(!Ie)return null;const Ae=Ie.filter(Xe);return 0==Ae.length?null:function(Le){const Et=Be(Le,Ae).map(B);return(0,Zt.D)(Et).pipe((0,$e.U)(de))}}(xt(Ie)):null}function ui(Ie,Ae){return null===Ie?[Ae]:Array.isArray(Ie)?[...Ie,Ae]:[Ie,Ae]}function Ut(Ie){return Ie._rawValidators}function oi(Ie){return Ie._rawAsyncValidators}function us(Ie){return Ie?Array.isArray(Ie)?Ie:[Ie]:[]}function Us(Ie,Ae){return Array.isArray(Ie)?Ie.includes(Ae):Ie===Ae}function $i(Ie,Ae){const Le=us(Ae);return us(Ie).forEach(Ji=>{Us(Le,Ji)||Le.push(Ji)}),Le}function et(Ie,Ae){return us(Ae).filter(Le=>!Us(Ie,Le))}class zt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Ae){this._rawValidators=Ae||[],this._composedValidatorFn=ji(this._rawValidators)}_setAsyncValidators(Ae){this._rawAsyncValidators=Ae||[],this._composedAsyncValidatorFn=zi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Ae){this._onDestroyCallbacks.push(Ae)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Ae=>Ae()),this._onDestroyCallbacks=[]}reset(Ae){this.control&&this.control.reset(Ae)}hasError(Ae,Le){return!!this.control&&this.control.hasError(Ae,Le)}getError(Ae,Le){return this.control?this.control.getError(Ae,Le):null}}class Xt extends zt{get formDirective(){return null}get path(){return null}}class Kt extends zt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ni{constructor(Ae){this._cd=Ae}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ci=(()=>{class Ie extends ni{constructor(Le){super(Le)}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(Kt,2))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Le,Et){2&Le&&i.ekj("ng-untouched",Et.isUntouched)("ng-touched",Et.isTouched)("ng-pristine",Et.isPristine)("ng-dirty",Et.isDirty)("ng-valid",Et.isValid)("ng-invalid",Et.isInvalid)("ng-pending",Et.isPending)},features:[i.qOj]}),Ie})(),gs=(()=>{class Ie extends ni{constructor(Le){super(Le)}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(Xt,10))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Le,Et){2&Le&&i.ekj("ng-untouched",Et.isUntouched)("ng-touched",Et.isTouched)("ng-pristine",Et.isPristine)("ng-dirty",Et.isDirty)("ng-valid",Et.isValid)("ng-invalid",Et.isInvalid)("ng-pending",Et.isPending)("ng-submitted",Et.isSubmitted)},features:[i.qOj]}),Ie})();const Ai="VALID",bi="INVALID",Ti="PENDING",ns="DISABLED";function ls(Ie){return(Bn(Ie)?Ie.validators:Ie)||null}function ws(Ie){return Array.isArray(Ie)?ji(Ie):Ie||null}function Ds(Ie,Ae){return(Bn(Ae)?Ae.asyncValidators:Ie)||null}function on(Ie){return Array.isArray(Ie)?zi(Ie):Ie||null}function Bn(Ie){return null!=Ie&&!Array.isArray(Ie)&&"object"==typeof Ie}function Kn(Ie,Ae,Le){const Et=Ie.controls;if(!(Ae?Object.keys(Et):Et).length)throw new i.vHH(1e3,"");if(!Et[Le])throw new i.vHH(1001,"")}function Dn(Ie,Ae,Le){Ie._forEachChild((Et,Ji)=>{if(void 0===Le[Ji])throw new i.vHH(1002,"")})}class In{constructor(Ae,Le){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Ae,this._rawAsyncValidators=Le,this._composedValidatorFn=ws(this._rawValidators),this._composedAsyncValidatorFn=on(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Ae){this._rawValidators=this._composedValidatorFn=Ae}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Ae){this._rawAsyncValidators=this._composedAsyncValidatorFn=Ae}get parent(){return this._parent}get valid(){return this.status===Ai}get invalid(){return this.status===bi}get pending(){return this.status==Ti}get disabled(){return this.status===ns}get enabled(){return this.status!==ns}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Ae){this._rawValidators=Ae,this._composedValidatorFn=ws(Ae)}setAsyncValidators(Ae){this._rawAsyncValidators=Ae,this._composedAsyncValidatorFn=on(Ae)}addValidators(Ae){this.setValidators($i(Ae,this._rawValidators))}addAsyncValidators(Ae){this.setAsyncValidators($i(Ae,this._rawAsyncValidators))}removeValidators(Ae){this.setValidators(et(Ae,this._rawValidators))}removeAsyncValidators(Ae){this.setAsyncValidators(et(Ae,this._rawAsyncValidators))}hasValidator(Ae){return Us(this._rawValidators,Ae)}hasAsyncValidator(Ae){return Us(this._rawAsyncValidators,Ae)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Ae={}){this.touched=!0,this._parent&&!Ae.onlySelf&&this._parent.markAsTouched(Ae)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Ae=>Ae.markAllAsTouched())}markAsUntouched(Ae={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(Le=>{Le.markAsUntouched({onlySelf:!0})}),this._parent&&!Ae.onlySelf&&this._parent._updateTouched(Ae)}markAsDirty(Ae={}){this.pristine=!1,this._parent&&!Ae.onlySelf&&this._parent.markAsDirty(Ae)}markAsPristine(Ae={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(Le=>{Le.markAsPristine({onlySelf:!0})}),this._parent&&!Ae.onlySelf&&this._parent._updatePristine(Ae)}markAsPending(Ae={}){this.status=Ti,!1!==Ae.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Ae.onlySelf&&this._parent.markAsPending(Ae)}disable(Ae={}){const Le=this._parentMarkedDirty(Ae.onlySelf);this.status=ns,this.errors=null,this._forEachChild(Et=>{Et.disable({...Ae,onlySelf:!0})}),this._updateValue(),!1!==Ae.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Ae,skipPristineCheck:Le}),this._onDisabledChange.forEach(Et=>Et(!0))}enable(Ae={}){const Le=this._parentMarkedDirty(Ae.onlySelf);this.status=Ai,this._forEachChild(Et=>{Et.enable({...Ae,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ae.emitEvent}),this._updateAncestors({...Ae,skipPristineCheck:Le}),this._onDisabledChange.forEach(Et=>Et(!1))}_updateAncestors(Ae){this._parent&&!Ae.onlySelf&&(this._parent.updateValueAndValidity(Ae),Ae.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Ae){this._parent=Ae}getRawValue(){return this.value}updateValueAndValidity(Ae={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ai||this.status===Ti)&&this._runAsyncValidator(Ae.emitEvent)),!1!==Ae.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Ae.onlySelf&&this._parent.updateValueAndValidity(Ae)}_updateTreeValidity(Ae={emitEvent:!0}){this._forEachChild(Le=>Le._updateTreeValidity(Ae)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ae.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ns:Ai}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Ae){if(this.asyncValidator){this.status=Ti,this._hasOwnPendingAsyncValidator=!0;const Le=B(this.asyncValidator(this));this._asyncValidationSubscription=Le.subscribe(Et=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Et,{emitEvent:Ae})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Ae,Le={}){this.errors=Ae,this._updateControlsErrors(!1!==Le.emitEvent)}get(Ae){let Le=Ae;return null==Le||(Array.isArray(Le)||(Le=Le.split(".")),0===Le.length)?null:Le.reduce((Et,Ji)=>Et&&Et._find(Ji),this)}getError(Ae,Le){const Et=Le?this.get(Le):this;return Et&&Et.errors?Et.errors[Ae]:null}hasError(Ae,Le){return!!this.getError(Ae,Le)}get root(){let Ae=this;for(;Ae._parent;)Ae=Ae._parent;return Ae}_updateControlsErrors(Ae){this.status=this._calculateStatus(),Ae&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Ae)}_initObservables(){this.valueChanges=new i.vpe,this.statusChanges=new i.vpe}_calculateStatus(){return this._allControlsDisabled()?ns:this.errors?bi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ti)?Ti:this._anyControlsHaveStatus(bi)?bi:Ai}_anyControlsHaveStatus(Ae){return this._anyControls(Le=>Le.status===Ae)}_anyControlsDirty(){return this._anyControls(Ae=>Ae.dirty)}_anyControlsTouched(){return this._anyControls(Ae=>Ae.touched)}_updatePristine(Ae={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Ae.onlySelf&&this._parent._updatePristine(Ae)}_updateTouched(Ae={}){this.touched=this._anyControlsTouched(),this._parent&&!Ae.onlySelf&&this._parent._updateTouched(Ae)}_registerOnCollectionChange(Ae){this._onCollectionChange=Ae}_setUpdateStrategy(Ae){Bn(Ae)&&null!=Ae.updateOn&&(this._updateOn=Ae.updateOn)}_parentMarkedDirty(Ae){return!Ae&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Ae){return null}}class js extends In{constructor(Ae,Le,Et){super(ls(Le),Ds(Et,Le)),this.controls=Ae,this._initObservables(),this._setUpdateStrategy(Le),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Ae,Le){return this.controls[Ae]?this.controls[Ae]:(this.controls[Ae]=Le,Le.setParent(this),Le._registerOnCollectionChange(this._onCollectionChange),Le)}addControl(Ae,Le,Et={}){this.registerControl(Ae,Le),this.updateValueAndValidity({emitEvent:Et.emitEvent}),this._onCollectionChange()}removeControl(Ae,Le={}){this.controls[Ae]&&this.controls[Ae]._registerOnCollectionChange(()=>{}),delete this.controls[Ae],this.updateValueAndValidity({emitEvent:Le.emitEvent}),this._onCollectionChange()}setControl(Ae,Le,Et={}){this.controls[Ae]&&this.controls[Ae]._registerOnCollectionChange(()=>{}),delete this.controls[Ae],Le&&this.registerControl(Ae,Le),this.updateValueAndValidity({emitEvent:Et.emitEvent}),this._onCollectionChange()}contains(Ae){return this.controls.hasOwnProperty(Ae)&&this.controls[Ae].enabled}setValue(Ae,Le={}){Dn(this,0,Ae),Object.keys(Ae).forEach(Et=>{Kn(this,!0,Et),this.controls[Et].setValue(Ae[Et],{onlySelf:!0,emitEvent:Le.emitEvent})}),this.updateValueAndValidity(Le)}patchValue(Ae,Le={}){null!=Ae&&(Object.keys(Ae).forEach(Et=>{const Ji=this.controls[Et];Ji&&Ji.patchValue(Ae[Et],{onlySelf:!0,emitEvent:Le.emitEvent})}),this.updateValueAndValidity(Le))}reset(Ae={},Le={}){this._forEachChild((Et,Ji)=>{Et.reset(Ae[Ji],{onlySelf:!0,emitEvent:Le.emitEvent})}),this._updatePristine(Le),this._updateTouched(Le),this.updateValueAndValidity(Le)}getRawValue(){return this._reduceChildren({},(Ae,Le,Et)=>(Ae[Et]=Le.getRawValue(),Ae))}_syncPendingControls(){let Ae=this._reduceChildren(!1,(Le,Et)=>!!Et._syncPendingControls()||Le);return Ae&&this.updateValueAndValidity({onlySelf:!0}),Ae}_forEachChild(Ae){Object.keys(this.controls).forEach(Le=>{const Et=this.controls[Le];Et&&Ae(Et,Le)})}_setUpControls(){this._forEachChild(Ae=>{Ae.setParent(this),Ae._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Ae){for(const[Le,Et]of Object.entries(this.controls))if(this.contains(Le)&&Ae(Et))return!0;return!1}_reduceValue(){return this._reduceChildren({},(Le,Et,Ji)=>((Et.enabled||this.disabled)&&(Le[Ji]=Et.value),Le))}_reduceChildren(Ae,Le){let Et=Ae;return this._forEachChild((Ji,_s)=>{Et=Le(Et,Ji,_s)}),Et}_allControlsDisabled(){for(const Ae of Object.keys(this.controls))if(this.controls[Ae].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Ae){return this.controls.hasOwnProperty(Ae)?this.controls[Ae]:null}}class Ls extends js{}function Rs(Ie,Ae){return[...Ae.path,Ie]}function gi(Ie,Ae){ti(Ie,Ae),Ae.valueAccessor.writeValue(Ie.value),Ie.disabled&&Ae.valueAccessor.setDisabledState?.(!0),function pi(Ie,Ae){Ae.valueAccessor.registerOnChange(Le=>{Ie._pendingValue=Le,Ie._pendingChange=!0,Ie._pendingDirty=!0,"change"===Ie.updateOn&&as(Ie,Ae)})}(Ie,Ae),function Es(Ie,Ae){const Le=(Et,Ji)=>{Ae.valueAccessor.writeValue(Et),Ji&&Ae.viewToModelUpdate(Et)};Ie.registerOnChange(Le),Ae._registerOnDestroy(()=>{Ie._unregisterOnChange(Le)})}(Ie,Ae),function Fi(Ie,Ae){Ae.valueAccessor.registerOnTouched(()=>{Ie._pendingTouched=!0,"blur"===Ie.updateOn&&Ie._pendingChange&&as(Ie,Ae),"submit"!==Ie.updateOn&&Ie.markAsTouched()})}(Ie,Ae),function tt(Ie,Ae){if(Ae.valueAccessor.setDisabledState){const Le=Et=>{Ae.valueAccessor.setDisabledState(Et)};Ie.registerOnDisabledChange(Le),Ae._registerOnDestroy(()=>{Ie._unregisterOnDisabledChange(Le)})}}(Ie,Ae)}function je(Ie,Ae,Le=!0){const Et=()=>{};Ae.valueAccessor&&(Ae.valueAccessor.registerOnChange(Et),Ae.valueAccessor.registerOnTouched(Et)),ci(Ie,Ae),Ie&&(Ae._invokeOnDestroyCallbacks(),Ie._registerOnCollectionChange(()=>{}))}function Re(Ie,Ae){Ie.forEach(Le=>{Le.registerOnValidatorChange&&Le.registerOnValidatorChange(Ae)})}function ti(Ie,Ae){const Le=Ut(Ie);null!==Ae.validator?Ie.setValidators(ui(Le,Ae.validator)):"function"==typeof Le&&Ie.setValidators([Le]);const Et=oi(Ie);null!==Ae.asyncValidator?Ie.setAsyncValidators(ui(Et,Ae.asyncValidator)):"function"==typeof Et&&Ie.setAsyncValidators([Et]);const Ji=()=>Ie.updateValueAndValidity();Re(Ae._rawValidators,Ji),Re(Ae._rawAsyncValidators,Ji)}function ci(Ie,Ae){let Le=!1;if(null!==Ie){if(null!==Ae.validator){const Ji=Ut(Ie);if(Array.isArray(Ji)&&Ji.length>0){const _s=Ji.filter(_n=>_n!==Ae.validator);_s.length!==Ji.length&&(Le=!0,Ie.setValidators(_s))}}if(null!==Ae.asyncValidator){const Ji=oi(Ie);if(Array.isArray(Ji)&&Ji.length>0){const _s=Ji.filter(_n=>_n!==Ae.asyncValidator);_s.length!==Ji.length&&(Le=!0,Ie.setAsyncValidators(_s))}}}const Et=()=>{};return Re(Ae._rawValidators,Et),Re(Ae._rawAsyncValidators,Et),Le}function as(Ie,Ae){Ie._pendingDirty&&Ie.markAsDirty(),Ie.setValue(Ie._pendingValue,{emitModelToViewChange:!1}),Ae.viewToModelUpdate(Ie._pendingValue),Ie._pendingChange=!1}function Ns(Ie,Ae){ti(Ie,Ae)}function Yn(Ie,Ae){if(!Ie.hasOwnProperty("model"))return!1;const Le=Ie.model;return!!Le.isFirstChange()||!Object.is(Ae,Le.currentValue)}function Rr(Ie,Ae){Ie._syncPendingControls(),Ae.forEach(Le=>{const Et=Le.control;"submit"===Et.updateOn&&Et._pendingChange&&(Le.viewToModelUpdate(Et._pendingValue),Et._pendingChange=!1)})}function rs(Ie,Ae){if(!Ae)return null;let Le,Et,Ji;return Array.isArray(Ae),Ae.forEach(_s=>{_s.constructor===Oe?Le=_s:function Ln(Ie){return Object.getPrototypeOf(Ie.constructor)===Lt}(_s)?Et=_s:Ji=_s}),Ji||Et||Le||null}const ln={provide:Xt,useExisting:(0,i.Gpc)(()=>$n)},qn=(()=>Promise.resolve())();let $n=(()=>{class Ie extends Xt{constructor(Le,Et){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new i.vpe,this.form=new js({},ji(Le),zi(Et))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(Le){qn.then(()=>{const Et=this._findContainer(Le.path);Le.control=Et.registerControl(Le.name,Le.control),gi(Le.control,Le),Le.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(Le)})}getControl(Le){return this.form.get(Le.path)}removeControl(Le){qn.then(()=>{const Et=this._findContainer(Le.path);Et&&Et.removeControl(Le.name),this._directives.delete(Le)})}addFormGroup(Le){qn.then(()=>{const Et=this._findContainer(Le.path),Ji=new js({});Ns(Ji,Le),Et.registerControl(Le.name,Ji),Ji.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(Le){qn.then(()=>{const Et=this._findContainer(Le.path);Et&&Et.removeControl(Le.name)})}getFormGroup(Le){return this.form.get(Le.path)}updateModel(Le,Et){qn.then(()=>{this.form.get(Le.path).setValue(Et)})}setValue(Le){this.control.setValue(Le)}onSubmit(Le){return this.submitted=!0,Rr(this.form,this._directives),this.ngSubmit.emit(Le),"dialog"===Le?.target?.method}onReset(){this.resetForm()}resetForm(Le){this.form.reset(Le),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(Le){return Le.pop(),Le.length?this.form.get(Le):this.form}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(Di,10),i.Y36(bt,10))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(Le,Et){1&Le&&i.NdJ("submit",function(_s){return Et.onSubmit(_s)})("reset",function(){return Et.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([ln]),i.qOj]}),Ie})();function gr(Ie,Ae){const Le=Ie.indexOf(Ae);Le>-1&&Ie.splice(Le,1)}function tn(Ie){return"object"==typeof Ie&&null!==Ie&&2===Object.keys(Ie).length&&"value"in Ie&&"disabled"in Ie}const mr=class extends In{constructor(Ae=null,Le,Et){super(ls(Le),Ds(Et,Le)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Ae),this._setUpdateStrategy(Le),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bn(Le)&&(Le.nonNullable||Le.initialValueIsDefault)&&(this.defaultValue=tn(Ae)?Ae.value:Ae)}setValue(Ae,Le={}){this.value=this._pendingValue=Ae,this._onChange.length&&!1!==Le.emitModelToViewChange&&this._onChange.forEach(Et=>Et(this.value,!1!==Le.emitViewToModelChange)),this.updateValueAndValidity(Le)}patchValue(Ae,Le={}){this.setValue(Ae,Le)}reset(Ae=this.defaultValue,Le={}){this._applyFormState(Ae),this.markAsPristine(Le),this.markAsUntouched(Le),this.setValue(this.value,Le),this._pendingChange=!1}_updateValue(){}_anyControls(Ae){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Ae){this._onChange.push(Ae)}_unregisterOnChange(Ae){gr(this._onChange,Ae)}registerOnDisabledChange(Ae){this._onDisabledChange.push(Ae)}_unregisterOnDisabledChange(Ae){gr(this._onDisabledChange,Ae)}_forEachChild(Ae){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Ae){tn(Ae)?(this.value=this._pendingValue=Ae.value,Ae.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Ae}},Ur={provide:Kt,useExisting:(0,i.Gpc)(()=>Bi)},Hr=(()=>Promise.resolve())();let Bi=(()=>{class Ie extends Kt{constructor(Le,Et,Ji,_s,_n){super(),this._changeDetectorRef=_n,this.control=new mr,this._registered=!1,this.update=new i.vpe,this._parent=Le,this._setValidators(Et),this._setAsyncValidators(Ji),this.valueAccessor=rs(0,_s)}ngOnChanges(Le){if(this._checkForErrors(),!this._registered||"name"in Le){if(this._registered&&(this._checkName(),this.formDirective)){const Et=Le.name.previousValue;this.formDirective.removeControl({name:Et,path:this._getPath(Et)})}this._setUpControl()}"isDisabled"in Le&&this._updateDisabled(Le),Yn(Le,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(Le){this.viewModel=Le,this.update.emit(Le)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(Le){Hr.then(()=>{this.control.setValue(Le,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(Le){const Et=Le.isDisabled.currentValue,Ji=0!==Et&&(0,i.D6c)(Et);Hr.then(()=>{Ji&&!this.control.disabled?this.control.disable():!Ji&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(Le){return this._parent?Rs(Le,this._parent):[Le]}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(Xt,9),i.Y36(Di,10),i.Y36(bt,10),i.Y36(ut,10),i.Y36(i.sBO,8))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[i._Bn([Ur]),i.qOj,i.TTD]}),Ie})(),Vn=(()=>{class Ie{}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Ie})(),sr=(()=>{class Ie{}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275mod=i.oAB({type:Ie}),Ie.\u0275inj=i.cJS({}),Ie})();const Vs=new i.OlP("NgModelWithFormControlWarning"),yr={provide:Xt,useExisting:(0,i.Gpc)(()=>Fo)};let Fo=(()=>{class Ie extends Xt{constructor(Le,Et){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new i.vpe,this._setValidators(Le),this._setAsyncValidators(Et)}ngOnChanges(Le){this._checkFormPresent(),Le.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ci(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(Le){const Et=this.form.get(Le.path);return gi(Et,Le),Et.updateValueAndValidity({emitEvent:!1}),this.directives.push(Le),Et}getControl(Le){return this.form.get(Le.path)}removeControl(Le){je(Le.control||null,Le,!1),function hn(Ie,Ae){const Le=Ie.indexOf(Ae);Le>-1&&Ie.splice(Le,1)}(this.directives,Le)}addFormGroup(Le){this._setUpFormContainer(Le)}removeFormGroup(Le){this._cleanUpFormContainer(Le)}getFormGroup(Le){return this.form.get(Le.path)}addFormArray(Le){this._setUpFormContainer(Le)}removeFormArray(Le){this._cleanUpFormContainer(Le)}getFormArray(Le){return this.form.get(Le.path)}updateModel(Le,Et){this.form.get(Le.path).setValue(Et)}onSubmit(Le){return this.submitted=!0,Rr(this.form,this.directives),this.ngSubmit.emit(Le),"dialog"===Le?.target?.method}onReset(){this.resetForm()}resetForm(Le){this.form.reset(Le),this.submitted=!1}_updateDomValue(){this.directives.forEach(Le=>{const Et=Le.control,Ji=this.form.get(Le.path);Et!==Ji&&(je(Et||null,Le),(Ie=>Ie instanceof mr)(Ji)&&(gi(Ji,Le),Le.control=Ji))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(Le){const Et=this.form.get(Le.path);Ns(Et,Le),Et.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(Le){if(this.form){const Et=this.form.get(Le.path);Et&&function bn(Ie,Ae){return ci(Ie,Ae)}(Et,Le)&&Et.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ti(this.form,this),this._oldForm&&ci(this._oldForm,this)}_checkFormPresent(){}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(Di,10),i.Y36(bt,10))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["","formGroup",""]],hostBindings:function(Le,Et){1&Le&&i.NdJ("submit",function(_s){return Et.onSubmit(_s)})("reset",function(){return Et.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([yr]),i.qOj,i.TTD]}),Ie})();const $s={provide:Kt,useExisting:(0,i.Gpc)(()=>mn)};let mn=(()=>{class Ie extends Kt{constructor(Le,Et,Ji,_s,_n){super(),this._ngModelWarningConfig=_n,this._added=!1,this.update=new i.vpe,this._ngModelWarningSent=!1,this._parent=Le,this._setValidators(Et),this._setAsyncValidators(Ji),this.valueAccessor=rs(0,_s)}set isDisabled(Le){}ngOnChanges(Le){this._added||this._setUpControl(),Yn(Le,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(Le){this.viewModel=Le,this.update.emit(Le)}get path(){return Rs(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return Ie._ngModelWarningSentOnce=!1,Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(Xt,13),i.Y36(Di,10),i.Y36(bt,10),i.Y36(ut,10),i.Y36(Vs,8))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[i._Bn([$s]),i.qOj,i.TTD]}),Ie})();const tr={provide:ut,useExisting:(0,i.Gpc)(()=>zs),multi:!0};function vr(Ie,Ae){return null==Ie?`${Ae}`:(Ae&&"object"==typeof Ae&&(Ae="Object"),`${Ie}: ${Ae}`.slice(0,50))}let zs=(()=>{class Ie extends Lt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(Le){this._compareWith=Le}writeValue(Le){this.value=Le;const Ji=vr(this._getOptionId(Le),Le);this.setProperty("value",Ji)}registerOnChange(Le){this.onChange=Et=>{this.value=this._getOptionValue(Et),Le(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(Le){for(const Et of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Et),Le))return Et;return null}_getOptionValue(Le){const Et=function Qr(Ie){return Ie.split(":")[0]}(Le);return this._optionMap.has(Et)?this._optionMap.get(Et):Le}}return Ie.\u0275fac=function(){let Ae;return function(Et){return(Ae||(Ae=i.n5z(Ie)))(Et||Ie)}}(),Ie.\u0275dir=i.lG2({type:Ie,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Le,Et){1&Le&&i.NdJ("change",function(_s){return Et.onChange(_s.target.value)})("blur",function(){return Et.onTouched()})},inputs:{compareWith:"compareWith"},features:[i._Bn([tr]),i.qOj]}),Ie})(),ur=(()=>{class Ie{constructor(Le,Et,Ji){this._element=Le,this._renderer=Et,this._select=Ji,this._select&&(this.id=this._select._registerOption())}set ngValue(Le){null!=this._select&&(this._select._optionMap.set(this.id,Le),this._setElementValue(vr(this.id,Le)),this._select.writeValue(this._select.value))}set value(Le){this._setElementValue(Le),this._select&&this._select.writeValue(this._select.value)}_setElementValue(Le){this._renderer.setProperty(this._element.nativeElement,"value",Le)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(zs,9))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Ie})();const ir={provide:ut,useExisting:(0,i.Gpc)(()=>Pn),multi:!0};function qs(Ie,Ae){return null==Ie?`${Ae}`:("string"==typeof Ae&&(Ae=`'${Ae}'`),Ae&&"object"==typeof Ae&&(Ae="Object"),`${Ie}: ${Ae}`.slice(0,50))}let Pn=(()=>{class Ie extends Lt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(Le){this._compareWith=Le}writeValue(Le){let Et;if(this.value=Le,Array.isArray(Le)){const Ji=Le.map(_s=>this._getOptionId(_s));Et=(_s,_n)=>{_s._setSelected(Ji.indexOf(_n.toString())>-1)}}else Et=(Ji,_s)=>{Ji._setSelected(!1)};this._optionMap.forEach(Et)}registerOnChange(Le){this.onChange=Et=>{const Ji=[],_s=Et.selectedOptions;if(void 0!==_s){const _n=_s;for(let en=0;en<_n.length;en++){const jo=this._getOptionValue(_n[en].value);Ji.push(jo)}}else{const _n=Et.options;for(let en=0;en<_n.length;en++){const po=_n[en];if(po.selected){const jo=this._getOptionValue(po.value);Ji.push(jo)}}}this.value=Ji,Le(Ji)}}_registerOption(Le){const Et=(this._idCounter++).toString();return this._optionMap.set(Et,Le),Et}_getOptionId(Le){for(const Et of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Et)._value,Le))return Et;return null}_getOptionValue(Le){const Et=function $r(Ie){return Ie.split(":")[0]}(Le);return this._optionMap.has(Et)?this._optionMap.get(Et)._value:Le}}return Ie.\u0275fac=function(){let Ae;return function(Et){return(Ae||(Ae=i.n5z(Ie)))(Et||Ie)}}(),Ie.\u0275dir=i.lG2({type:Ie,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Le,Et){1&Le&&i.NdJ("change",function(_s){return Et.onChange(_s.target)})("blur",function(){return Et.onTouched()})},inputs:{compareWith:"compareWith"},features:[i._Bn([ir]),i.qOj]}),Ie})(),ks=(()=>{class Ie{constructor(Le,Et,Ji){this._element=Le,this._renderer=Et,this._select=Ji,this._select&&(this.id=this._select._registerOption(this))}set ngValue(Le){null!=this._select&&(this._value=Le,this._setElementValue(qs(this.id,Le)),this._select.writeValue(this._select.value))}set value(Le){this._select?(this._value=Le,this._setElementValue(qs(this.id,Le)),this._select.writeValue(this._select.value)):this._setElementValue(Le)}_setElementValue(Le){this._renderer.setProperty(this._element.nativeElement,"value",Le)}_setSelected(Le){this._renderer.setProperty(this._element.nativeElement,"selected",Le)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Ie.\u0275fac=function(Le){return new(Le||Ie)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(Pn,9))},Ie.\u0275dir=i.lG2({type:Ie,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Ie})(),M=(()=>{class Ie{constructor(){this._validator=lt}ngOnChanges(Le){if(this.inputName in Le){const Et=this.normalizeInput(Le[this.inputName].currentValue);this._enabled=this.enabled(Et),this._validator=this._enabled?this.createValidator(Et):lt,this._onChange&&this._onChange()}}validate(Le){return this._validator(Le)}registerOnValidatorChange(Le){this._onChange=Le}enabled(Le){return null!=Le}}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275dir=i.lG2({type:Ie,features:[i.TTD]}),Ie})();const Mt={provide:Di,useExisting:(0,i.Gpc)(()=>Gi),multi:!0};let Gi=(()=>{class Ie extends M{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=i.D6c,this.createValidator=Le=>Ne}enabled(Le){return Le}}return Ie.\u0275fac=function(){let Ae;return function(Et){return(Ae||(Ae=i.n5z(Ie)))(Et||Ie)}}(),Ie.\u0275dir=i.lG2({type:Ie,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(Le,Et){2&Le&&i.uIk("required",Et._enabled?"":null)},inputs:{required:"required"},features:[i._Bn([Mt]),i.qOj]}),Ie})(),dt=(()=>{class Ie{}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275mod=i.oAB({type:Ie}),Ie.\u0275inj=i.cJS({imports:[sr]}),Ie})(),Bt=(()=>{class Ie{}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275mod=i.oAB({type:Ie}),Ie.\u0275inj=i.cJS({imports:[dt]}),Ie})(),Ii=(()=>{class Ie{static withConfig(Le){return{ngModule:Ie,providers:[{provide:Vs,useValue:Le.warnOnNgModelWithFormControl}]}}}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275mod=i.oAB({type:Ie}),Ie.\u0275inj=i.cJS({imports:[dt]}),Ie})();class Yi extends In{constructor(Ae,Le,Et){super(ls(Le),Ds(Et,Le)),this.controls=Ae,this._initObservables(),this._setUpdateStrategy(Le),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Ae){return this.controls[this._adjustIndex(Ae)]}push(Ae,Le={}){this.controls.push(Ae),this._registerControl(Ae),this.updateValueAndValidity({emitEvent:Le.emitEvent}),this._onCollectionChange()}insert(Ae,Le,Et={}){this.controls.splice(Ae,0,Le),this._registerControl(Le),this.updateValueAndValidity({emitEvent:Et.emitEvent})}removeAt(Ae,Le={}){let Et=this._adjustIndex(Ae);Et<0&&(Et=0),this.controls[Et]&&this.controls[Et]._registerOnCollectionChange(()=>{}),this.controls.splice(Et,1),this.updateValueAndValidity({emitEvent:Le.emitEvent})}setControl(Ae,Le,Et={}){let Ji=this._adjustIndex(Ae);Ji<0&&(Ji=0),this.controls[Ji]&&this.controls[Ji]._registerOnCollectionChange(()=>{}),this.controls.splice(Ji,1),Le&&(this.controls.splice(Ji,0,Le),this._registerControl(Le)),this.updateValueAndValidity({emitEvent:Et.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Ae,Le={}){Dn(this,0,Ae),Ae.forEach((Et,Ji)=>{Kn(this,!1,Ji),this.at(Ji).setValue(Et,{onlySelf:!0,emitEvent:Le.emitEvent})}),this.updateValueAndValidity(Le)}patchValue(Ae,Le={}){null!=Ae&&(Ae.forEach((Et,Ji)=>{this.at(Ji)&&this.at(Ji).patchValue(Et,{onlySelf:!0,emitEvent:Le.emitEvent})}),this.updateValueAndValidity(Le))}reset(Ae=[],Le={}){this._forEachChild((Et,Ji)=>{Et.reset(Ae[Ji],{onlySelf:!0,emitEvent:Le.emitEvent})}),this._updatePristine(Le),this._updateTouched(Le),this.updateValueAndValidity(Le)}getRawValue(){return this.controls.map(Ae=>Ae.getRawValue())}clear(Ae={}){this.controls.length<1||(this._forEachChild(Le=>Le._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Ae.emitEvent}))}_adjustIndex(Ae){return Ae<0?Ae+this.length:Ae}_syncPendingControls(){let Ae=this.controls.reduce((Le,Et)=>!!Et._syncPendingControls()||Le,!1);return Ae&&this.updateValueAndValidity({onlySelf:!0}),Ae}_forEachChild(Ae){this.controls.forEach((Le,Et)=>{Ae(Le,Et)})}_updateValue(){this.value=this.controls.filter(Ae=>Ae.enabled||this.disabled).map(Ae=>Ae.value)}_anyControls(Ae){return this.controls.some(Le=>Le.enabled&&Ae(Le))}_setUpControls(){this._forEachChild(Ae=>this._registerControl(Ae))}_allControlsDisabled(){for(const Ae of this.controls)if(Ae.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Ae){Ae.setParent(this),Ae._registerOnCollectionChange(this._onCollectionChange)}_find(Ae){return this.at(Ae)??null}}function un(Ie){return!!Ie&&(void 0!==Ie.asyncValidators||void 0!==Ie.validators||void 0!==Ie.updateOn)}let Xs=(()=>{class Ie{constructor(){this.useNonNullable=!1}get nonNullable(){const Le=new Ie;return Le.useNonNullable=!0,Le}group(Le,Et=null){const Ji=this._reduceControls(Le);let _s={};return un(Et)?_s=Et:null!==Et&&(_s.validators=Et.validator,_s.asyncValidators=Et.asyncValidator),new js(Ji,_s)}record(Le,Et=null){const Ji=this._reduceControls(Le);return new Ls(Ji,Et)}control(Le,Et,Ji){let _s={};return this.useNonNullable?(un(Et)?_s=Et:(_s.validators=Et,_s.asyncValidators=Ji),new mr(Le,{..._s,nonNullable:!0})):new mr(Le,Et,Ji)}array(Le,Et,Ji){const _s=Le.map(_n=>this._createControl(_n));return new Yi(_s,Et,Ji)}_reduceControls(Le){const Et={};return Object.keys(Le).forEach(Ji=>{Et[Ji]=this._createControl(Le[Ji])}),Et}_createControl(Le){return Le instanceof mr||Le instanceof In?Le:Array.isArray(Le)?this.control(Le[0],Le.length>1?Le[1]:null,Le.length>2?Le[2]:null):this.control(Le)}}return Ie.\u0275fac=function(Le){return new(Le||Ie)},Ie.\u0275prov=i.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:Ii}),Ie})()},1481:(An,hs,rt)=>{rt.d(hs,{Dx:()=>Gt,H7:()=>Xi,b2:()=>Jt,q6:()=>Tt,se:()=>Xe});var i=rt(6895),u=rt(8274);class Ue extends i.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zt extends Ue{static makeCurrent(){(0,i.HT)(new Zt)}onAndCancel(je,Re,tt){return je.addEventListener(Re,tt,!1),()=>{je.removeEventListener(Re,tt,!1)}}dispatchEvent(je,Re){je.dispatchEvent(Re)}remove(je){je.parentNode&&je.parentNode.removeChild(je)}createElement(je,Re){return(Re=Re||this.getDefaultDocument()).createElement(je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(je){return je.nodeType===Node.ELEMENT_NODE}isShadowRoot(je){return je instanceof DocumentFragment}getGlobalEventTarget(je,Re){return"window"===Re?window:"document"===Re?je:"body"===Re?je.body:null}getBaseHref(je){const Re=function Li(){return $e=$e||document.querySelector("base"),$e?$e.getAttribute("href"):null}();return null==Re?null:function ut(gi){Lt=Lt||document.createElement("a"),Lt.setAttribute("href",gi);const je=Lt.pathname;return"/"===je.charAt(0)?je:`/${je}`}(Re)}resetBaseElement(){$e=null}getUserAgent(){return window.navigator.userAgent}getCookie(je){return(0,i.Mx)(document.cookie,je)}}let Lt,$e=null;const Si=new u.OlP("TRANSITION_ID"),gt=[{provide:u.ip1,useFactory:function We(gi,je,Re){return()=>{Re.get(u.CZH).donePromise.then(()=>{const tt=(0,i.q)(),ti=je.querySelectorAll(`style[ng-transition="${gi}"]`);for(let ci=0;ci<ti.length;ci++)tt.remove(ti[ci])})}},deps:[Si,i.K0,u.zs3],multi:!0}];let at=(()=>{class gi{build(){return new XMLHttpRequest}}return gi.\u0275fac=function(Re){return new(Re||gi)},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})();const Oe=new u.OlP("EventManagerPlugins");let ft=(()=>{class gi{constructor(Re,tt){this._zone=tt,this._eventNameToPlugin=new Map,Re.forEach(ti=>ti.manager=this),this._plugins=Re.slice().reverse()}addEventListener(Re,tt,ti){return this._findPluginFor(tt).addEventListener(Re,tt,ti)}addGlobalEventListener(Re,tt,ti){return this._findPluginFor(tt).addGlobalEventListener(Re,tt,ti)}getZone(){return this._zone}_findPluginFor(Re){const tt=this._eventNameToPlugin.get(Re);if(tt)return tt;const ti=this._plugins;for(let ci=0;ci<ti.length;ci++){const pi=ti[ci];if(pi.supports(Re))return this._eventNameToPlugin.set(Re,pi),pi}throw new Error(`No event manager plugin found for event ${Re}`)}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(Oe),u.LFG(u.R0b))},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})();class jt{constructor(je){this._doc=je}addGlobalEventListener(je,Re,tt){const ti=(0,i.q)().getGlobalEventTarget(this._doc,je);if(!ti)throw new Error(`Unsupported event target ${ti} for event ${Re}`);return this.addEventListener(ti,Re,tt)}}let Nt=(()=>{class gi{constructor(){this._stylesSet=new Set}addStyles(Re){const tt=new Set;Re.forEach(ti=>{this._stylesSet.has(ti)||(this._stylesSet.add(ti),tt.add(ti))}),this.onStylesAdded(tt)}onStylesAdded(Re){}getAllStyles(){return Array.from(this._stylesSet)}}return gi.\u0275fac=function(Re){return new(Re||gi)},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})(),Di=(()=>{class gi extends Nt{constructor(Re){super(),this._doc=Re,this._hostNodes=new Map,this._hostNodes.set(Re.head,[])}_addStylesToHost(Re,tt,ti){Re.forEach(ci=>{const pi=this._doc.createElement("style");pi.textContent=ci,ti.push(tt.appendChild(pi))})}addHost(Re){const tt=[];this._addStylesToHost(this._stylesSet,Re,tt),this._hostNodes.set(Re,tt)}removeHost(Re){const tt=this._hostNodes.get(Re);tt&&tt.forEach(bt),this._hostNodes.delete(Re)}onStylesAdded(Re){this._hostNodes.forEach((tt,ti)=>{this._addStylesToHost(Re,ti,tt)})}ngOnDestroy(){this._hostNodes.forEach(Re=>Re.forEach(bt))}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(i.K0))},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})();function bt(gi){(0,i.q)().remove(gi)}const Rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},z=/%COMP%/g;function ue(gi,je,Re){for(let tt=0;tt<je.length;tt++){let ti=je[tt];Array.isArray(ti)?ue(gi,ti,Re):(ti=ti.replace(z,gi),Re.push(ti))}return Re}function _e(gi){return je=>{if("__ngUnwrap__"===je)return gi;!1===gi(je)&&(je.preventDefault(),je.returnValue=!1)}}let Xe=(()=>{class gi{constructor(Re,tt,ti){this.eventManager=Re,this.sharedStylesHost=tt,this.appId=ti,this.rendererByCompId=new Map,this.defaultRenderer=new B(Re)}createRenderer(Re,tt){if(!Re||!tt)return this.defaultRenderer;switch(tt.encapsulation){case u.ifc.Emulated:{let ti=this.rendererByCompId.get(tt.id);return ti||(ti=new xt(this.eventManager,this.sharedStylesHost,tt,this.appId),this.rendererByCompId.set(tt.id,ti)),ti.applyToHost(Re),ti}case 1:case u.ifc.ShadowDom:return new $t(this.eventManager,this.sharedStylesHost,Re,tt);default:if(!this.rendererByCompId.has(tt.id)){const ti=ue(tt.id,tt.styles,[]);this.sharedStylesHost.addStyles(ti),this.rendererByCompId.set(tt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(ft),u.LFG(Di),u.LFG(u.AFp))},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})();class B{constructor(je){this.eventManager=je,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(je,Re){return Re?document.createElementNS(Rt[Re]||Re,je):document.createElement(je)}createComment(je){return document.createComment(je)}createText(je){return document.createTextNode(je)}appendChild(je,Re){(Fe(je)?je.content:je).appendChild(Re)}insertBefore(je,Re,tt){je&&(Fe(je)?je.content:je).insertBefore(Re,tt)}removeChild(je,Re){je&&je.removeChild(Re)}selectRootElement(je,Re){let tt="string"==typeof je?document.querySelector(je):je;if(!tt)throw new Error(`The selector "${je}" did not match any elements`);return Re||(tt.textContent=""),tt}parentNode(je){return je.parentNode}nextSibling(je){return je.nextSibling}setAttribute(je,Re,tt,ti){if(ti){Re=ti+":"+Re;const ci=Rt[ti];ci?je.setAttributeNS(ci,Re,tt):je.setAttribute(Re,tt)}else je.setAttribute(Re,tt)}removeAttribute(je,Re,tt){if(tt){const ti=Rt[tt];ti?je.removeAttributeNS(ti,Re):je.removeAttribute(`${tt}:${Re}`)}else je.removeAttribute(Re)}addClass(je,Re){je.classList.add(Re)}removeClass(je,Re){je.classList.remove(Re)}setStyle(je,Re,tt,ti){ti&(u.JOm.DashCase|u.JOm.Important)?je.style.setProperty(Re,tt,ti&u.JOm.Important?"important":""):je.style[Re]=tt}removeStyle(je,Re,tt){tt&u.JOm.DashCase?je.style.removeProperty(Re):je.style[Re]=""}setProperty(je,Re,tt){je[Re]=tt}setValue(je,Re){je.nodeValue=Re}listen(je,Re,tt){return"string"==typeof je?this.eventManager.addGlobalEventListener(je,Re,_e(tt)):this.eventManager.addEventListener(je,Re,_e(tt))}}function Fe(gi){return"TEMPLATE"===gi.tagName&&void 0!==gi.content}class xt extends B{constructor(je,Re,tt,ti){super(je),this.component=tt;const ci=ue(ti+"-"+tt.id,tt.styles,[]);Re.addStyles(ci),this.contentAttr=function be(gi){return"_ngcontent-%COMP%".replace(z,gi)}(ti+"-"+tt.id),this.hostAttr=function Se(gi){return"_nghost-%COMP%".replace(z,gi)}(ti+"-"+tt.id)}applyToHost(je){super.setAttribute(je,this.hostAttr,"")}createElement(je,Re){const tt=super.createElement(je,Re);return super.setAttribute(tt,this.contentAttr,""),tt}}class $t extends B{constructor(je,Re,tt,ti){super(je),this.sharedStylesHost=Re,this.hostEl=tt,this.shadowRoot=tt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ci=ue(ti.id,ti.styles,[]);for(let pi=0;pi<ci.length;pi++){const Fi=document.createElement("style");Fi.textContent=ci[pi],this.shadowRoot.appendChild(Fi)}}nodeOrShadowRoot(je){return je===this.hostEl?this.shadowRoot:je}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(je,Re){return super.appendChild(this.nodeOrShadowRoot(je),Re)}insertBefore(je,Re,tt){return super.insertBefore(this.nodeOrShadowRoot(je),Re,tt)}removeChild(je,Re){return super.removeChild(this.nodeOrShadowRoot(je),Re)}parentNode(je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(je)))}}let ji=(()=>{class gi extends jt{constructor(Re){super(Re)}supports(Re){return!0}addEventListener(Re,tt,ti){return Re.addEventListener(tt,ti,!1),()=>this.removeEventListener(Re,tt,ti)}removeEventListener(Re,tt,ti){return Re.removeEventListener(tt,ti)}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(i.K0))},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})();const is=["alt","control","meta","shift"],zi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ui={alt:gi=>gi.altKey,control:gi=>gi.ctrlKey,meta:gi=>gi.metaKey,shift:gi=>gi.shiftKey};let Ut=(()=>{class gi extends jt{constructor(Re){super(Re)}supports(Re){return null!=gi.parseEventName(Re)}addEventListener(Re,tt,ti){const ci=gi.parseEventName(tt),pi=gi.eventCallback(ci.fullKey,ti,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,i.q)().onAndCancel(Re,ci.domEventName,pi))}static parseEventName(Re){const tt=Re.toLowerCase().split("."),ti=tt.shift();if(0===tt.length||"keydown"!==ti&&"keyup"!==ti)return null;const ci=gi._normalizeKey(tt.pop());let pi="",Fi=tt.indexOf("code");if(Fi>-1&&(tt.splice(Fi,1),pi="code."),is.forEach(Es=>{const Ns=tt.indexOf(Es);Ns>-1&&(tt.splice(Ns,1),pi+=Es+".")}),pi+=ci,0!=tt.length||0===ci.length)return null;const as={};return as.domEventName=ti,as.fullKey=pi,as}static matchEventFullKeyCode(Re,tt){let ti=zi[Re.key]||Re.key,ci="";return tt.indexOf("code.")>-1&&(ti=Re.code,ci="code."),!(null==ti||!ti)&&(ti=ti.toLowerCase()," "===ti?ti="space":"."===ti&&(ti="dot"),is.forEach(pi=>{pi!==ti&&(0,ui[pi])(Re)&&(ci+=pi+".")}),ci+=ti,ci===tt)}static eventCallback(Re,tt,ti){return ci=>{gi.matchEventFullKeyCode(ci,Re)&&ti.runGuarded(()=>tt(ci))}}static _normalizeKey(Re){return"esc"===Re?"escape":Re}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(i.K0))},gi.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac}),gi})();const Tt=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:i.bD},{provide:u.g9A,useValue:function zt(){Zt.makeCurrent()},multi:!0},{provide:i.K0,useFactory:function Kt(){return(0,u.RDi)(document),document},deps:[]}]),qt=new u.OlP(""),Ci=[{provide:u.rWj,useClass:class E{addToWindow(je){u.dqk.getAngularTestability=(tt,ti=!0)=>{const ci=je.findTestabilityInTree(tt,ti);if(null==ci)throw new Error("Could not find testability for element.");return ci},u.dqk.getAllAngularTestabilities=()=>je.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>je.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(tt=>{const ti=u.dqk.getAllAngularTestabilities();let ci=ti.length,pi=!1;const Fi=function(as){pi=pi||as,ci--,0==ci&&tt(pi)};ti.forEach(function(as){as.whenStable(Fi)})})}findTestabilityInTree(je,Re,tt){return null==Re?null:je.getTestability(Re)??(tt?(0,i.q)().isShadowRoot(Re)?this.findTestabilityInTree(je,Re.host,!0):this.findTestabilityInTree(je,Re.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],gs=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Xt(){return new u.qLn},deps:[]},{provide:Oe,useClass:ji,multi:!0,deps:[i.K0,u.R0b,u.Lbi]},{provide:Oe,useClass:Ut,multi:!0,deps:[i.K0]},{provide:Xe,useClass:Xe,deps:[ft,Di,u.AFp]},{provide:u.FYo,useExisting:Xe},{provide:Nt,useExisting:Di},{provide:Di,useClass:Di,deps:[i.K0]},{provide:ft,useClass:ft,deps:[Oe,u.R0b]},{provide:i.JF,useClass:at,deps:[]},[]];let Jt=(()=>{class gi{constructor(Re){}static withServerTransition(Re){return{ngModule:gi,providers:[{provide:u.AFp,useValue:Re.appId},{provide:Si,useExisting:u.AFp},gt]}}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(qt,12))},gi.\u0275mod=u.oAB({type:gi}),gi.\u0275inj=u.cJS({providers:[...gs,...Ci],imports:[i.ez,u.hGG]}),gi})(),Gt=(()=>{class gi{constructor(Re){this._doc=Re}getTitle(){return this._doc.title}setTitle(Re){this._doc.title=Re||""}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(i.K0))},gi.\u0275prov=u.Yz7({token:gi,factory:function(Re){let tt=null;return tt=Re?new Re:function Oi(){return new Gt((0,u.LFG)(i.K0))}(),tt},providedIn:"root"}),gi})();typeof window<"u"&&window;let Xi=(()=>{class gi{}return gi.\u0275fac=function(Re){return new(Re||gi)},gi.\u0275prov=u.Yz7({token:gi,factory:function(Re){let tt=null;return tt=Re?new(Re||gi):u.LFG(cr),tt},providedIn:"root"}),gi})(),cr=(()=>{class gi extends Xi{constructor(Re){super(),this._doc=Re}sanitize(Re,tt){if(null==tt)return null;switch(Re){case u.q3G.NONE:return tt;case u.q3G.HTML:return(0,u.qzn)(tt,"HTML")?(0,u.z3N)(tt):(0,u.EiD)(this._doc,String(tt)).toString();case u.q3G.STYLE:return(0,u.qzn)(tt,"Style")?(0,u.z3N)(tt):tt;case u.q3G.SCRIPT:if((0,u.qzn)(tt,"Script"))return(0,u.z3N)(tt);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(tt,"URL")?(0,u.z3N)(tt):(0,u.mCW)(String(tt));case u.q3G.RESOURCE_URL:if((0,u.qzn)(tt,"ResourceURL"))return(0,u.z3N)(tt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Re} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Re){return(0,u.JVY)(Re)}bypassSecurityTrustStyle(Re){return(0,u.L6k)(Re)}bypassSecurityTrustScript(Re){return(0,u.eBb)(Re)}bypassSecurityTrustUrl(Re){return(0,u.LAX)(Re)}bypassSecurityTrustResourceUrl(Re){return(0,u.pB0)(Re)}}return gi.\u0275fac=function(Re){return new(Re||gi)(u.LFG(i.K0))},gi.\u0275prov=u.Yz7({token:gi,factory:function(Re){let tt=null;return tt=Re?new Re:function Ls(gi){return new cr(gi.get(i.K0))}(u.LFG(u.zs3)),tt},providedIn:"root"}),gi})()},7685:(An,hs,rt)=>{rt.d(hs,{gz:()=>zs,F0:()=>Is,yS:()=>_,Bz:()=>Sc,lC:()=>wn});var i=rt(8274),u=rt(2076),Ue=rt(9646),Zt=rt(7579);class $e extends Zt.x{constructor(H){super(),this._value=H}get value(){return this.getValue()}_subscribe(H){const U=super._subscribe(H);return!U.closed&&H.next(this._value),U}getValue(){const{hasError:H,thrownError:U,_value:pe}=this;if(H)throw U;return this._throwIfClosed(),pe}next(H){super.next(this._value=H)}}const Lt=(0,rt(3888).d)(F=>function(){F(this),this.name="EmptyError",this.message="no elements in sequence"});var ut=rt(9751),Si=rt(4742),We=rt(4671),gt=rt(3268),E=rt(7669),at=rt(1810),Oe=rt(5403),ft=rt(9672);function jt(...F){const H=(0,E.yG)(F),U=(0,E.jO)(F),{args:pe,keys:Me}=(0,Si.D)(F);if(0===pe.length)return(0,u.D)([],H);const yt=new ut.y(function Nt(F,H,U=We.y){return pe=>{Di(H,()=>{const{length:Me}=F,yt=new Array(Me);let ei=Me,yi=Me;for(let ss=0;ss<Me;ss++)Di(H,()=>{const rn=(0,u.D)(F[ss],H);let Dr=!1;rn.subscribe((0,Oe.x)(pe,jn=>{yt[ss]=jn,Dr||(Dr=!0,yi--),yi||pe.next(U(yt.slice()))},()=>{--ei||pe.complete()}))},pe)},pe)}}(pe,H,Me?ei=>(0,at.n)(Me,ei):We.y));return U?yt.pipe((0,gt.Z)(U)):yt}function Di(F,H,U){F?(0,ft.f)(U,F,H):H()}var bt=rt(8189);function z(...F){return function Rt(){return(0,bt.J)(1)}()((0,u.D)(F,(0,E.yG)(F)))}var J=rt(8421);function ve(F){return new ut.y(H=>{(0,J.Xf)(F()).subscribe(H)})}var Ne=rt(9635),ce=rt(2843),be=rt(515),Se=rt(727),ue=rt(4482);function _e(){return(0,ue.e)((F,H)=>{let U=null;F._refCount++;const pe=(0,Oe.x)(H,void 0,void 0,void 0,()=>{if(!F||F._refCount<=0||0<--F._refCount)return void(U=null);const Me=F._connection,yt=U;U=null,Me&&(!yt||Me===yt)&&Me.unsubscribe(),H.unsubscribe()});F.subscribe(pe),pe.closed||(U=F.connect())})}class lt extends ut.y{constructor(H,U){super(),this.source=H,this.subjectFactory=U,this._subject=null,this._refCount=0,this._connection=null,(0,ue.A)(H)&&(this.lift=H.lift)}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:H}=this;this._subject=this._connection=null,H?.unsubscribe()}connect(){let H=this._connection;if(!H){H=this._connection=new Se.w0;const U=this.getSubject();H.add(this.source.subscribe((0,Oe.x)(U,void 0,()=>{this._teardown(),U.complete()},pe=>{this._teardown(),U.error(pe)},()=>this._teardown()))),H.closed&&(this._connection=null,H=Se.w0.EMPTY)}return H}refCount(){return _e()(this)}}var Xe=rt(6895),B=rt(4004);function de(F,H){return(0,ue.e)((U,pe)=>{let Me=null,yt=0,ei=!1;const yi=()=>ei&&!Me&&pe.complete();U.subscribe((0,Oe.x)(pe,ss=>{Me?.unsubscribe();let rn=0;const Dr=yt++;(0,J.Xf)(F(ss,Dr)).subscribe(Me=(0,Oe.x)(pe,jn=>pe.next(H?H(ss,jn,Dr,rn++):jn),()=>{Me=null,yi()}))},()=>{ei=!0,yi()}))})}var Be=rt(5698),xt=rt(9300),$t=rt(5577);function ji(F){return(0,ue.e)((H,U)=>{let pe=!1;H.subscribe((0,Oe.x)(U,Me=>{pe=!0,U.next(Me)},()=>{pe||U.next(F),U.complete()}))})}function is(F=zi){return(0,ue.e)((H,U)=>{let pe=!1;H.subscribe((0,Oe.x)(U,Me=>{pe=!0,U.next(Me)},()=>pe?U.complete():U.error(F())))})}function zi(){return new Lt}function ui(F,H){const U=arguments.length>=2;return pe=>pe.pipe(F?(0,xt.h)((Me,yt)=>F(Me,yt,pe)):We.y,(0,Be.q)(1),U?ji(H):is(()=>new Lt))}var Ut=rt(4351),oi=rt(8505),us=rt(262);function Us(F,H,U,pe,Me){return(yt,ei)=>{let yi=U,ss=H,rn=0;yt.subscribe((0,Oe.x)(ei,Dr=>{const jn=rn++;ss=yi?F(ss,Dr,jn):(yi=!0,Dr),pe&&ei.next(ss)},Me&&(()=>{yi&&ei.next(ss),ei.complete()})))}}function $i(F,H){return(0,ue.e)(Us(F,H,arguments.length>=2,!0))}function et(F){return F<=0?()=>be.E:(0,ue.e)((H,U)=>{let pe=[];H.subscribe((0,Oe.x)(U,Me=>{pe.push(Me),F<pe.length&&pe.shift()},()=>{for(const Me of pe)U.next(Me);U.complete()},void 0,()=>{pe=null}))})}function zt(F,H){const U=arguments.length>=2;return pe=>pe.pipe(F?(0,xt.h)((Me,yt)=>F(Me,yt,pe)):We.y,et(1),U?ji(H):is(()=>new Lt))}var ni=rt(8746),Tt=rt(1481);const qt="primary",Ci=Symbol("RouteTitle");class gs{constructor(H){this.params=H||{}}has(H){return Object.prototype.hasOwnProperty.call(this.params,H)}get(H){if(this.has(H)){const U=this.params[H];return Array.isArray(U)?U[0]:U}return null}getAll(H){if(this.has(H)){const U=this.params[H];return Array.isArray(U)?U:[U]}return[]}get keys(){return Object.keys(this.params)}}function Jt(F){return new gs(F)}function Wt(F,H,U){const pe=U.path.split("/");if(pe.length>F.length||"full"===U.pathMatch&&(H.hasChildren()||pe.length<F.length))return null;const Me={};for(let yt=0;yt<pe.length;yt++){const ei=pe[yt],yi=F[yt];if(ei.startsWith(":"))Me[ei.substring(1)]=yi;else if(ei!==yi.path)return null}return{consumed:F.slice(0,pe.length),posParams:Me}}function li(F,H){const U=F?Object.keys(F):void 0,pe=H?Object.keys(H):void 0;if(!U||!pe||U.length!=pe.length)return!1;let Me;for(let yt=0;yt<U.length;yt++)if(Me=U[yt],!Oi(F[Me],H[Me]))return!1;return!0}function Oi(F,H){if(Array.isArray(F)&&Array.isArray(H)){if(F.length!==H.length)return!1;const U=[...F].sort(),pe=[...H].sort();return U.every((Me,yt)=>pe[yt]===Me)}return F===H}function Gt(F){return Array.prototype.concat.apply([],F)}function Dt(F){return F.length>0?F[F.length-1]:null}function di(F,H){for(const U in F)F.hasOwnProperty(U)&&H(F[U],U)}function ot(F){return(0,i.CqO)(F)?F:(0,i.QGY)(F)?(0,u.D)(Promise.resolve(F)):(0,Ue.of)(F)}const Ui={exact:function wt(F,H,U){if(!on(F.segments,H.segments)||!Ti(F.segments,H.segments,U)||F.numberOfChildren!==H.numberOfChildren)return!1;for(const pe in H.children)if(!F.children[pe]||!wt(F.children[pe],H.children[pe],U))return!1;return!0},subset:Ai},As={exact:function kt(F,H){return li(F,H)},subset:function Ot(F,H){return Object.keys(H).length<=Object.keys(F).length&&Object.keys(H).every(U=>Oi(F[U],H[U]))},ignored:()=>!0};function bs(F,H,U){return Ui[U.paths](F.root,H.root,U.matrixParams)&&As[U.queryParams](F.queryParams,H.queryParams)&&!("exact"===U.fragment&&F.fragment!==H.fragment)}function Ai(F,H,U){return bi(F,H,H.segments,U)}function bi(F,H,U,pe){if(F.segments.length>U.length){const Me=F.segments.slice(0,U.length);return!(!on(Me,U)||H.hasChildren()||!Ti(Me,U,pe))}if(F.segments.length===U.length){if(!on(F.segments,U)||!Ti(F.segments,U,pe))return!1;for(const Me in H.children)if(!F.children[Me]||!Ai(F.children[Me],H.children[Me],pe))return!1;return!0}{const Me=U.slice(0,F.segments.length),yt=U.slice(F.segments.length);return!!(on(F.segments,Me)&&Ti(F.segments,Me,pe)&&F.children[qt])&&bi(F.children[qt],H,yt,pe)}}function Ti(F,H,U){return H.every((pe,Me)=>As[U](F[Me].parameters,pe.parameters))}class ns{constructor(H,U,pe){this.root=H,this.queryParams=U,this.fragment=pe}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jt(this.queryParams)),this._queryParamMap}toString(){return In.serialize(this)}}class ls{constructor(H,U){this.segments=H,this.children=U,this.parent=null,di(U,(pe,Me)=>pe.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return js(this)}}class ws{constructor(H,U){this.path=H,this.parameters=U}get parameterMap(){return this._parameterMap||(this._parameterMap=Jt(this.parameters)),this._parameterMap}toString(){return Re(this)}}function on(F,H){return F.length===H.length&&F.every((U,pe)=>U.path===H[pe].path)}let Kn=(()=>{class F{}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=i.Yz7({token:F,factory:function(){return new Dn},providedIn:"root"}),F})();class Dn{parse(H){const U=new bn(H);return new ns(U.parseRootSegment(),U.parseQueryParams(),U.parseFragment())}serialize(H){const U=`/${Yt(H.root,!0)}`,pe=function ti(F){const H=Object.keys(F).map(U=>{const pe=F[U];return Array.isArray(pe)?pe.map(Me=>`${Ls(U)}=${Ls(Me)}`).join("&"):`${Ls(U)}=${Ls(pe)}`}).filter(U=>!!U);return H.length?`?${H.join("&")}`:""}(H.queryParams);return`${U}${pe}${"string"==typeof H.fragment?`#${function cr(F){return encodeURI(F)}(H.fragment)}`:""}`}}const In=new Dn;function js(F){return F.segments.map(H=>Re(H)).join("/")}function Yt(F,H){if(!F.hasChildren())return js(F);if(H){const U=F.children[qt]?Yt(F.children[qt],!1):"",pe=[];return di(F.children,(Me,yt)=>{yt!==qt&&pe.push(`${yt}:${Yt(Me,!1)}`)}),pe.length>0?`${U}(${pe.join("//")})`:U}{const U=function Bn(F,H){let U=[];return di(F.children,(pe,Me)=>{Me===qt&&(U=U.concat(H(pe,Me)))}),di(F.children,(pe,Me)=>{Me!==qt&&(U=U.concat(H(pe,Me)))}),U}(F,(pe,Me)=>Me===qt?[Yt(F.children[qt],!1)]:[`${Me}:${Yt(pe,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[qt]?`${js(F)}/${U[0]}`:`${js(F)}/(${U.join("//")})`}}function Xi(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ls(F){return Xi(F).replace(/%3B/gi,";")}function Rs(F){return Xi(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gi(F){return decodeURIComponent(F)}function je(F){return gi(F.replace(/\+/g,"%20"))}function Re(F){return`${Rs(F.path)}${function tt(F){return Object.keys(F).map(H=>`;${Rs(H)}=${Rs(F[H])}`).join("")}(F.parameters)}`}const ci=/^[^\/()?;=#]+/;function pi(F){const H=F.match(ci);return H?H[0]:""}const Fi=/^[^=?&#]+/,Es=/^[^&#]+/;class bn{constructor(H){this.url=H,this.remaining=H}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ls([],{}):new ls([],this.parseChildren())}parseQueryParams(){const H={};if(this.consumeOptional("?"))do{this.parseQueryParam(H)}while(this.consumeOptional("&"));return H}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const H=[];for(this.peekStartsWith("(")||H.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),H.push(this.parseSegment());let U={};this.peekStartsWith("/(")&&(this.capture("/"),U=this.parseParens(!0));let pe={};return this.peekStartsWith("(")&&(pe=this.parseParens(!1)),(H.length>0||Object.keys(U).length>0)&&(pe[qt]=new ls(H,U)),pe}parseSegment(){const H=pi(this.remaining);if(""===H&&this.peekStartsWith(";"))throw new i.vHH(4009,!1);return this.capture(H),new ws(gi(H),this.parseMatrixParams())}parseMatrixParams(){const H={};for(;this.consumeOptional(";");)this.parseParam(H);return H}parseParam(H){const U=pi(this.remaining);if(!U)return;this.capture(U);let pe="";if(this.consumeOptional("=")){const Me=pi(this.remaining);Me&&(pe=Me,this.capture(pe))}H[gi(U)]=gi(pe)}parseQueryParam(H){const U=function as(F){const H=F.match(Fi);return H?H[0]:""}(this.remaining);if(!U)return;this.capture(U);let pe="";if(this.consumeOptional("=")){const ei=function Ns(F){const H=F.match(Es);return H?H[0]:""}(this.remaining);ei&&(pe=ei,this.capture(pe))}const Me=je(U),yt=je(pe);if(H.hasOwnProperty(Me)){let ei=H[Me];Array.isArray(ei)||(ei=[ei],H[Me]=ei),ei.push(yt)}else H[Me]=yt}parseParens(H){const U={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const pe=pi(this.remaining),Me=this.remaining[pe.length];if("/"!==Me&&")"!==Me&&";"!==Me)throw new i.vHH(4010,!1);let yt;pe.indexOf(":")>-1?(yt=pe.slice(0,pe.indexOf(":")),this.capture(yt),this.capture(":")):H&&(yt=qt);const ei=this.parseChildren();U[yt]=1===Object.keys(ei).length?ei[qt]:new ls([],ei),this.consumeOptional("//")}return U}peekStartsWith(H){return this.remaining.startsWith(H)}consumeOptional(H){return!!this.peekStartsWith(H)&&(this.remaining=this.remaining.substring(H.length),!0)}capture(H){if(!this.consumeOptional(H))throw new i.vHH(4011,!1)}}function pn(F){return F.segments.length>0?new ls([],{[qt]:F}):F}function ms(F){const H={};for(const pe of Object.keys(F.children)){const yt=ms(F.children[pe]);(yt.segments.length>0||yt.hasChildren())&&(H[pe]=yt)}return function dn(F){if(1===F.numberOfChildren&&F.children[qt]){const H=F.children[qt];return new ls(F.segments.concat(H.segments),H.children)}return F}(new ls(F.segments,H))}function Cs(F){return F instanceof ns}function hn(F,H,U,pe,Me){if(0===U.length)return qn(H.root,H.root,H.root,pe,Me);const yt=function tn(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new gr(!0,0,F);let H=0,U=!1;const pe=F.reduce((Me,yt,ei)=>{if("object"==typeof yt&&null!=yt){if(yt.outlets){const yi={};return di(yt.outlets,(ss,rn)=>{yi[rn]="string"==typeof ss?ss.split("/"):ss}),[...Me,{outlets:yi}]}if(yt.segmentPath)return[...Me,yt.segmentPath]}return"string"!=typeof yt?[...Me,yt]:0===ei?(yt.split("/").forEach((yi,ss)=>{0==ss&&"."===yi||(0==ss&&""===yi?U=!0:".."===yi?H++:""!=yi&&Me.push(yi))}),Me):[...Me,yt]},[]);return new gr(U,H,pe)}(U);return yt.toRoot()?qn(H.root,H.root,new ls([],{}),pe,Me):function ei(ss){const rn=function wr(F,H,U,pe){if(F.isAbsolute)return new mr(H.root,!0,0);if(-1===pe)return new mr(U,U===H.root,0);return function ro(F,H,U){let pe=F,Me=H,yt=U;for(;yt>Me;){if(yt-=Me,pe=pe.parent,!pe)throw new i.vHH(4005,!1);Me=pe.segments.length}return new mr(pe,!1,Me-yt)}(U,pe+(cn(F.commands[0])?0:1),F.numberOfDoubleDots)}(yt,H,F.snapshot?._urlSegment,ss),Dr=rn.processChildren?Nr(rn.segmentGroup,rn.index,yt.commands):Jr(rn.segmentGroup,rn.index,yt.commands);return qn(H.root,rn.segmentGroup,Dr,pe,Me)}(F.snapshot?._lastPathIndex)}function cn(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function ln(F){return"object"==typeof F&&null!=F&&F.outlets}function qn(F,H,U,pe,Me){let ei,yt={};pe&&di(pe,(ss,rn)=>{yt[rn]=Array.isArray(ss)?ss.map(Dr=>`${Dr}`):`${ss}`}),ei=F===H?U:$n(F,H,U);const yi=pn(ms(ei));return new ns(yi,yt,Me)}function $n(F,H,U){const pe={};return di(F.children,(Me,yt)=>{pe[yt]=Me===H?U:$n(Me,H,U)}),new ls(F.segments,pe)}class gr{constructor(H,U,pe){if(this.isAbsolute=H,this.numberOfDoubleDots=U,this.commands=pe,H&&pe.length>0&&cn(pe[0]))throw new i.vHH(4003,!1);const Me=pe.find(ln);if(Me&&Me!==Dt(pe))throw new i.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mr{constructor(H,U,pe){this.segmentGroup=H,this.processChildren=U,this.index=pe}}function Jr(F,H,U){if(F||(F=new ls([],{})),0===F.segments.length&&F.hasChildren())return Nr(F,H,U);const pe=function Vr(F,H,U){let pe=0,Me=H;const yt={match:!1,pathIndex:0,commandIndex:0};for(;Me<F.segments.length;){if(pe>=U.length)return yt;const ei=F.segments[Me],yi=U[pe];if(ln(yi))break;const ss=`${yi}`,rn=pe<U.length-1?U[pe+1]:null;if(Me>0&&void 0===ss)break;if(ss&&rn&&"object"==typeof rn&&void 0===rn.outlets){if(!Hr(ss,rn,ei))return yt;pe+=2}else{if(!Hr(ss,{},ei))return yt;pe++}Me++}return{match:!0,pathIndex:Me,commandIndex:pe}}(F,H,U),Me=U.slice(pe.commandIndex);if(pe.match&&pe.pathIndex<F.segments.length){const yt=new ls(F.segments.slice(0,pe.pathIndex),{});return yt.children[qt]=new ls(F.segments.slice(pe.pathIndex),F.children),Nr(yt,0,Me)}return pe.match&&0===Me.length?new ls(F.segments,{}):pe.match&&!F.hasChildren()?Zn(F,H,U):pe.match?Nr(F,0,Me):Zn(F,H,U)}function Nr(F,H,U){if(0===U.length)return new ls(F.segments,{});{const pe=function Br(F){return ln(F[0])?F[0].outlets:{[qt]:F}}(U),Me={};return di(pe,(yt,ei)=>{"string"==typeof yt&&(yt=[yt]),null!==yt&&(Me[ei]=Jr(F.children[ei],H,yt))}),di(F.children,(yt,ei)=>{void 0===pe[ei]&&(Me[ei]=yt)}),new ls(F.segments,Me)}}function Zn(F,H,U){const pe=F.segments.slice(0,H);let Me=0;for(;Me<U.length;){const yt=U[Me];if(ln(yt)){const ss=_r(yt.outlets);return new ls(pe,ss)}if(0===Me&&cn(U[0])){pe.push(new ws(F.segments[H].path,Ur(U[0]))),Me++;continue}const ei=ln(yt)?yt.outlets[qt]:`${yt}`,yi=Me<U.length-1?U[Me+1]:null;ei&&yi&&cn(yi)?(pe.push(new ws(ei,Ur(yi))),Me+=2):(pe.push(new ws(ei,{})),Me++)}return new ls(pe,{})}function _r(F){const H={};return di(F,(U,pe)=>{"string"==typeof U&&(U=[U]),null!==U&&(H[pe]=Zn(new ls([],{}),0,U))}),H}function Ur(F){const H={};return di(F,(U,pe)=>H[pe]=`${U}`),H}function Hr(F,H,U){return F==U.path&&li(H,U.parameters)}class Bi{constructor(H,U){this.id=H,this.url=U}}class Vn extends Bi{constructor(H,U,pe="imperative",Me=null){super(H,U),this.type=0,this.navigationTrigger=pe,this.restoredState=Me}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class co extends Bi{constructor(H,U,pe){super(H,U),this.urlAfterRedirects=pe,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class os extends Bi{constructor(H,U,pe,Me){super(H,U),this.reason=pe,this.code=Me,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Io extends Bi{constructor(H,U,pe,Me){super(H,U),this.error=pe,this.target=Me,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xn extends Bi{constructor(H,U,pe,Me){super(H,U),this.urlAfterRedirects=pe,this.state=Me,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends Bi{constructor(H,U,pe,Me){super(H,U),this.urlAfterRedirects=pe,this.state=Me,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends Bi{constructor(H,U,pe,Me,yt){super(H,U),this.urlAfterRedirects=pe,this.state=Me,this.shouldActivate=yt,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Er extends Bi{constructor(H,U,pe,Me){super(H,U),this.urlAfterRedirects=pe,this.state=Me,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class to extends Bi{constructor(H,U,pe,Me){super(H,U),this.urlAfterRedirects=pe,this.state=Me,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eo{constructor(H){this.route=H,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vs{constructor(H){this.route=H,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ro{constructor(H){this.snapshot=H,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bo{constructor(H){this.snapshot=H,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yr{constructor(H){this.snapshot=H,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fo{constructor(H){this.snapshot=H,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oo{constructor(H,U,pe){this.routerEvent=H,this.position=U,this.anchor=pe,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Yr{constructor(H){this._root=H}get root(){return this._root.value}parent(H){const U=this.pathFromRoot(H);return U.length>1?U[U.length-2]:null}children(H){const U=Bs(H,this._root);return U?U.children.map(pe=>pe.value):[]}firstChild(H){const U=Bs(H,this._root);return U&&U.children.length>0?U.children[0].value:null}siblings(H){const U=uo(H,this._root);return U.length<2?[]:U[U.length-2].children.map(Me=>Me.value).filter(Me=>Me!==H)}pathFromRoot(H){return uo(H,this._root).map(U=>U.value)}}function Bs(F,H){if(F===H.value)return H;for(const U of H.children){const pe=Bs(F,U);if(pe)return pe}return null}function uo(F,H){if(F===H.value)return[H];for(const U of H.children){const pe=uo(F,U);if(pe.length)return pe.unshift(H),pe}return[]}class $s{constructor(H,U){this.value=H,this.children=U}toString(){return`TreeNode(${this.value})`}}function mn(F){const H={};return F&&F.children.forEach(U=>H[U.value.outlet]=U),H}class tr extends Yr{constructor(H,U){super(H),this.snapshot=U,Ir(this,H)}toString(){return this.snapshot.toString()}}function vr(F,H){const U=function Qr(F,H){const ei=new qs([],{},{},"",{},qt,H,null,F.root,-1,{});return new $r("",new $s(ei,[]))}(F,H),pe=new $e([new ws("",{})]),Me=new $e({}),yt=new $e({}),ei=new $e({}),yi=new $e(""),ss=new zs(pe,Me,ei,yi,yt,qt,H,U.root);return ss.snapshot=U.root,new tr(new $s(ss,[]),U)}class zs{constructor(H,U,pe,Me,yt,ei,yi,ss){this.url=H,this.params=U,this.queryParams=pe,this.fragment=Me,this.data=yt,this.outlet=ei,this.component=yi,this.title=this.data?.pipe((0,B.U)(rn=>rn[Ci]))??(0,Ue.of)(void 0),this._futureSnapshot=ss}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,B.U)(H=>Jt(H)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,B.U)(H=>Jt(H)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ur(F,H="emptyOnly"){const U=F.pathFromRoot;let pe=0;if("always"!==H)for(pe=U.length-1;pe>=1;){const Me=U[pe],yt=U[pe-1];if(Me.routeConfig&&""===Me.routeConfig.path)pe--;else{if(yt.component)break;pe--}}return function ir(F){return F.reduce((H,U)=>({params:{...H.params,...U.params},data:{...H.data,...U.data},resolve:{...U.data,...H.resolve,...U.routeConfig?.data,...U._resolvedData}}),{params:{},data:{},resolve:{}})}(U.slice(pe))}class qs{constructor(H,U,pe,Me,yt,ei,yi,ss,rn,Dr,jn,So){this.url=H,this.params=U,this.queryParams=pe,this.fragment=Me,this.data=yt,this.outlet=ei,this.component=yi,this.title=this.data?.[Ci],this.routeConfig=ss,this._urlSegment=rn,this._lastPathIndex=Dr,this._correctedLastPathIndex=So??Dr,this._resolve=jn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(pe=>pe.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $r extends Yr{constructor(H,U){super(U),this.url=H,Ir(this,U)}toString(){return Pn(this._root)}}function Ir(F,H){H.value._routerState=F,H.children.forEach(U=>Ir(F,U))}function Pn(F){const H=F.children.length>0?` { ${F.children.map(Pn).join(", ")} } `:"";return`${F.value}${H}`}function ks(F){if(F.snapshot){const H=F.snapshot,U=F._futureSnapshot;F.snapshot=U,li(H.queryParams,U.queryParams)||F.queryParams.next(U.queryParams),H.fragment!==U.fragment&&F.fragment.next(U.fragment),li(H.params,U.params)||F.params.next(U.params),function At(F,H){if(F.length!==H.length)return!1;for(let U=0;U<F.length;++U)if(!li(F[U],H[U]))return!1;return!0}(H.url,U.url)||F.url.next(U.url),li(H.data,U.data)||F.data.next(U.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function xi(F,H){const U=li(F.params,H.params)&&function Ds(F,H){return on(F,H)&&F.every((U,pe)=>li(U.parameters,H[pe].parameters))}(F.url,H.url);return U&&!(!F.parent!=!H.parent)&&(!F.parent||xi(F.parent,H.parent))}function M(F,H,U){if(U&&F.shouldReuseRoute(H.value,U.value.snapshot)){const pe=U.value;pe._futureSnapshot=H.value;const Me=function $(F,H,U){return H.children.map(pe=>{for(const Me of U.children)if(F.shouldReuseRoute(pe.value,Me.value.snapshot))return M(F,pe,Me);return M(F,pe)})}(F,H,U);return new $s(pe,Me)}{if(F.shouldAttach(H.value)){const yt=F.retrieve(H.value);if(null!==yt){const ei=yt.route;return ei.value._futureSnapshot=H.value,ei.children=H.children.map(yi=>M(F,yi)),ei}}const pe=function fe(F){return new zs(new $e(F.url),new $e(F.params),new $e(F.queryParams),new $e(F.fragment),new $e(F.data),F.outlet,F.component,F)}(H.value),Me=H.children.map(yt=>M(F,yt));return new $s(pe,Me)}}const Ce="ngNavigationCancelingError";function pt(F,H){const{redirectTo:U,navigationBehaviorOptions:pe}=Cs(H)?{redirectTo:H,navigationBehaviorOptions:void 0}:H,Me=Mt(!1,0,H);return Me.url=U,Me.navigationBehaviorOptions=pe,Me}function Mt(F,H,U){const pe=new Error("NavigationCancelingError: "+(F||""));return pe[Ce]=!0,pe.cancellationCode=H,U&&(pe.url=U),pe}function wi(F){return Gi(F)&&Cs(F.url)}function Gi(F){return F&&F[Ce]}class Vi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new sn,this.attachRef=null}}let sn=(()=>{class F{constructor(){this.contexts=new Map}onChildOutletCreated(U,pe){const Me=this.getOrCreateContext(U);Me.outlet=pe,this.contexts.set(U,Me)}onChildOutletDestroyed(U){const pe=this.getContext(U);pe&&(pe.outlet=null,pe.attachRef=null)}onOutletDeactivated(){const U=this.contexts;return this.contexts=new Map,U}onOutletReAttached(U){this.contexts=U}getOrCreateContext(U){let pe=this.getContext(U);return pe||(pe=new Vi,this.contexts.set(U,pe)),pe}getContext(U){return this.contexts.get(U)||null}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=i.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();const ts=!1;let wn=(()=>{class F{constructor(U,pe,Me,yt,ei){this.parentContexts=U,this.location=pe,this.changeDetector=yt,this.environmentInjector=ei,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.attachEvents=new i.vpe,this.detachEvents=new i.vpe,this.name=Me||qt,U.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const U=this.parentContexts.getContext(this.name);U&&U.route&&(U.attachRef?this.attach(U.attachRef,U.route):this.activateWith(U.route,U.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new i.vHH(4012,ts);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new i.vHH(4012,ts);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new i.vHH(4012,ts);this.location.detach();const U=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(U.instance),U}attach(U,pe){this.activated=U,this._activatedRoute=pe,this.location.insert(U.hostView),this.attachEvents.emit(U.instance)}deactivate(){if(this.activated){const U=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(U)}}activateWith(U,pe){if(this.isActivated)throw new i.vHH(4013,ts);this._activatedRoute=U;const Me=this.location,ei=U._futureSnapshot.component,yi=this.parentContexts.getOrCreateContext(this.name).children,ss=new Sn(U,yi,Me.injector);if(pe&&function Ws(F){return!!F.resolveComponentFactory}(pe)){const rn=pe.resolveComponentFactory(ei);this.activated=Me.createComponent(rn,Me.length,ss)}else this.activated=Me.createComponent(ei,{index:Me.length,injector:ss,environmentInjector:pe??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(U){return new(U||F)(i.Y36(sn),i.Y36(i.s_b),i.$8M("name"),i.Y36(i.sBO),i.Y36(i.lqb))},F.\u0275dir=i.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),F})();class Sn{constructor(H,U,pe){this.route=H,this.childContexts=U,this.parent=pe}get(H,U){return H===zs?this.route:H===sn?this.childContexts:this.parent.get(H,U)}}let ht=(()=>{class F{}return F.\u0275fac=function(U){return new(U||F)},F.\u0275cmp=i.Xpm({type:F,selectors:[["ng-component"]],standalone:!0,features:[i.jDz],decls:1,vars:0,template:function(U,pe){1&U&&i._UZ(0,"router-outlet")},dependencies:[wn],encapsulation:2}),F})();function S(F,H){return F.providers&&!F._injector&&(F._injector=(0,i.MMx)(F.providers,H,`Route: ${F.path}`)),F._injector??H}function Ss(F){const H=F.children&&F.children.map(Ss),U=H?{...F,children:H}:{...F};return!U.component&&!U.loadComponent&&(H||U.loadChildren)&&U.outlet&&U.outlet!==qt&&(U.component=ht),U}function Ps(F){return F.outlet||qt}function un(F,H){const U=F.filter(pe=>Ps(pe)===H);return U.push(...F.filter(pe=>Ps(pe)!==H)),U}function Xs(F){if(!F)return null;if(F.routeConfig?._injector)return F.routeConfig._injector;for(let H=F.parent;H;H=H.parent){const U=H.routeConfig;if(U?._loadedInjector)return U._loadedInjector;if(U?._injector)return U._injector}return null}class Ar{constructor(H,U,pe,Me){this.routeReuseStrategy=H,this.futureState=U,this.currState=pe,this.forwardEvent=Me}activate(H){const U=this.futureState._root,pe=this.currState?this.currState._root:null;this.deactivateChildRoutes(U,pe,H),ks(this.futureState.root),this.activateChildRoutes(U,pe,H)}deactivateChildRoutes(H,U,pe){const Me=mn(U);H.children.forEach(yt=>{const ei=yt.value.outlet;this.deactivateRoutes(yt,Me[ei],pe),delete Me[ei]}),di(Me,(yt,ei)=>{this.deactivateRouteAndItsChildren(yt,pe)})}deactivateRoutes(H,U,pe){const Me=H.value,yt=U?U.value:null;if(Me===yt)if(Me.component){const ei=pe.getContext(Me.outlet);ei&&this.deactivateChildRoutes(H,U,ei.children)}else this.deactivateChildRoutes(H,U,pe);else yt&&this.deactivateRouteAndItsChildren(U,pe)}deactivateRouteAndItsChildren(H,U){H.value.component&&this.routeReuseStrategy.shouldDetach(H.value.snapshot)?this.detachAndStoreRouteSubtree(H,U):this.deactivateRouteAndOutlet(H,U)}detachAndStoreRouteSubtree(H,U){const pe=U.getContext(H.value.outlet),Me=pe&&H.value.component?pe.children:U,yt=mn(H);for(const ei of Object.keys(yt))this.deactivateRouteAndItsChildren(yt[ei],Me);if(pe&&pe.outlet){const ei=pe.outlet.detach(),yi=pe.children.onOutletDeactivated();this.routeReuseStrategy.store(H.value.snapshot,{componentRef:ei,route:H,contexts:yi})}}deactivateRouteAndOutlet(H,U){const pe=U.getContext(H.value.outlet),Me=pe&&H.value.component?pe.children:U,yt=mn(H);for(const ei of Object.keys(yt))this.deactivateRouteAndItsChildren(yt[ei],Me);pe&&pe.outlet&&(pe.outlet.deactivate(),pe.children.onOutletDeactivated(),pe.attachRef=null,pe.resolver=null,pe.route=null)}activateChildRoutes(H,U,pe){const Me=mn(U);H.children.forEach(yt=>{this.activateRoutes(yt,Me[yt.value.outlet],pe),this.forwardEvent(new Fo(yt.value.snapshot))}),H.children.length&&this.forwardEvent(new bo(H.value.snapshot))}activateRoutes(H,U,pe){const Me=H.value,yt=U?U.value:null;if(ks(Me),Me===yt)if(Me.component){const ei=pe.getOrCreateContext(Me.outlet);this.activateChildRoutes(H,U,ei.children)}else this.activateChildRoutes(H,U,pe);else if(Me.component){const ei=pe.getOrCreateContext(Me.outlet);if(this.routeReuseStrategy.shouldAttach(Me.snapshot)){const yi=this.routeReuseStrategy.retrieve(Me.snapshot);this.routeReuseStrategy.store(Me.snapshot,null),ei.children.onOutletReAttached(yi.contexts),ei.attachRef=yi.componentRef,ei.route=yi.route.value,ei.outlet&&ei.outlet.attach(yi.componentRef,yi.route.value),ks(yi.route.value),this.activateChildRoutes(H,null,ei.children)}else{const yi=Xs(Me.snapshot),ss=yi?.get(i._Vd)??null;ei.attachRef=null,ei.route=Me,ei.resolver=ss,ei.injector=yi,ei.outlet&&ei.outlet.activateWith(Me,ei.injector),this.activateChildRoutes(H,null,ei.children)}}else this.activateChildRoutes(H,null,pe)}}class En{constructor(H){this.path=H,this.route=this.path[this.path.length-1]}}class Ie{constructor(H,U){this.component=H,this.route=U}}function Ae(F,H,U){const pe=F._root;return Ji(pe,H?H._root:null,U,[pe.value])}function Et(F,H){const U=Symbol(),pe=H.get(F,U);return pe===U?"function"!=typeof F||(0,i.Z0I)(F)?H.get(F):F:pe}function Ji(F,H,U,pe,Me={canDeactivateChecks:[],canActivateChecks:[]}){const yt=mn(H);return F.children.forEach(ei=>{(function _s(F,H,U,pe,Me={canDeactivateChecks:[],canActivateChecks:[]}){const yt=F.value,ei=H?H.value:null,yi=U?U.getContext(F.value.outlet):null;if(ei&&yt.routeConfig===ei.routeConfig){const ss=function _n(F,H,U){if("function"==typeof U)return U(F,H);switch(U){case"pathParamsChange":return!on(F.url,H.url);case"pathParamsOrQueryParamsChange":return!on(F.url,H.url)||!li(F.queryParams,H.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xi(F,H)||!li(F.queryParams,H.queryParams);default:return!xi(F,H)}}(ei,yt,yt.routeConfig.runGuardsAndResolvers);ss?Me.canActivateChecks.push(new En(pe)):(yt.data=ei.data,yt._resolvedData=ei._resolvedData),Ji(F,H,yt.component?yi?yi.children:null:U,pe,Me),ss&&yi&&yi.outlet&&yi.outlet.isActivated&&Me.canDeactivateChecks.push(new Ie(yi.outlet.component,ei))}else ei&&en(H,yi,Me),Me.canActivateChecks.push(new En(pe)),Ji(F,null,yt.component?yi?yi.children:null:U,pe,Me)})(ei,yt[ei.value.outlet],U,pe.concat([ei.value]),Me),delete yt[ei.value.outlet]}),di(yt,(ei,yi)=>en(ei,U.getContext(yi),Me)),Me}function en(F,H,U){const pe=mn(F),Me=F.value;di(pe,(yt,ei)=>{en(yt,Me.component?H?H.children.getContext(ei):null:H,U)}),U.canDeactivateChecks.push(new Ie(Me.component&&H&&H.outlet&&H.outlet.isActivated?H.outlet.component:null,Me))}function po(F){return"function"==typeof F}function Mr(F){return F instanceof Lt||"EmptyError"===F?.name}const ko=Symbol("INITIAL_VALUE");function ze(){return de(F=>jt(F.map(H=>H.pipe((0,Be.q)(1),function Fe(...F){const H=(0,E.yG)(F);return(0,ue.e)((U,pe)=>{(H?z(F,U,H):z(F,U)).subscribe(pe)})}(ko)))).pipe((0,B.U)(H=>{for(const U of H)if(!0!==U){if(U===ko)return ko;if(!1===U||U instanceof ns)return U}return!0}),(0,xt.h)(H=>H!==ko),(0,Be.q)(1)))}function K(F){return(0,Ne.z)((0,oi.b)(H=>{if(Cs(H))throw pt(0,H)}),(0,B.U)(H=>!0===H))}const ye={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ee(F,H,U,pe,Me){const yt=te(F,H,U);return yt.matched?function G(F,H,U,pe){const Me=H.canMatch;if(!Me||0===Me.length)return(0,Ue.of)(!0);const yt=Me.map(ei=>{const yi=Et(ei,F);return ot(function Do(F){return F&&po(F.canMatch)}(yi)?yi.canMatch(H,U):F.runInContext(()=>yi(H,U)))});return(0,Ue.of)(yt).pipe(ze(),K())}(pe=S(H,pe),H,U).pipe((0,B.U)(ei=>!0===ei?yt:{...ye})):(0,Ue.of)(yt)}function te(F,H,U){if(""===H.path)return"full"===H.pathMatch&&(F.hasChildren()||U.length>0)?{...ye}:{matched:!0,consumedSegments:[],remainingSegments:U,parameters:{},positionalParamSegments:{}};const Me=(H.matcher||Wt)(U,F,H);if(!Me)return{...ye};const yt={};di(Me.posParams,(yi,ss)=>{yt[ss]=yi.path});const ei=Me.consumed.length>0?{...yt,...Me.consumed[Me.consumed.length-1].parameters}:yt;return{matched:!0,consumedSegments:Me.consumed,remainingSegments:U.slice(Me.consumed.length),parameters:ei,positionalParamSegments:Me.posParams??{}}}function ie(F,H,U,pe,Me="corrected"){if(U.length>0&&function ct(F,H,U){return U.some(pe=>si(F,H,pe)&&Ps(pe)!==qt)}(F,U,pe)){const ei=new ls(H,function Ke(F,H,U,pe){const Me={};Me[qt]=pe,pe._sourceSegment=F,pe._segmentIndexShift=H.length;for(const yt of U)if(""===yt.path&&Ps(yt)!==qt){const ei=new ls([],{});ei._sourceSegment=F,ei._segmentIndexShift=H.length,Me[Ps(yt)]=ei}return Me}(F,H,pe,new ls(U,F.children)));return ei._sourceSegment=F,ei._segmentIndexShift=H.length,{segmentGroup:ei,slicedSegments:[]}}if(0===U.length&&function ii(F,H,U){return U.some(pe=>si(F,H,pe))}(F,U,pe)){const ei=new ls(F.segments,function xe(F,H,U,pe,Me,yt){const ei={};for(const yi of pe)if(si(F,U,yi)&&!Me[Ps(yi)]){const ss=new ls([],{});ss._sourceSegment=F,ss._segmentIndexShift="legacy"===yt?F.segments.length:H.length,ei[Ps(yi)]=ss}return{...Me,...ei}}(F,H,U,pe,F.children,Me));return ei._sourceSegment=F,ei._segmentIndexShift=H.length,{segmentGroup:ei,slicedSegments:U}}const yt=new ls(F.segments,F.children);return yt._sourceSegment=F,yt._segmentIndexShift=H.length,{segmentGroup:yt,slicedSegments:U}}function si(F,H,U){return(!(F.hasChildren()||H.length>0)||"full"!==U.pathMatch)&&""===U.path}function Ri(F,H,U,pe){return!!(Ps(F)===pe||pe!==qt&&si(H,U,F))&&("**"===F.path||te(H,F,U).matched)}function qi(F,H,U){return 0===H.length&&!F.children[U]}const Mi=!1;class es{constructor(H){this.segmentGroup=H||null}}class Gs{constructor(H){this.urlTree=H}}function an(F){return(0,ce._)(new es(F))}function dr(F){return(0,ce._)(new Gs(F))}class Ze{constructor(H,U,pe,Me,yt){this.injector=H,this.configLoader=U,this.urlSerializer=pe,this.urlTree=Me,this.config=yt,this.allowRedirects=!0}apply(){const H=ie(this.urlTree.root,[],[],this.config).segmentGroup,U=new ls(H.segments,H.children);return this.expandSegmentGroup(this.injector,this.config,U,qt).pipe((0,B.U)(yt=>this.createUrlTree(ms(yt),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,us.K)(yt=>{if(yt instanceof Gs)return this.allowRedirects=!1,this.match(yt.urlTree);throw yt instanceof es?this.noMatchError(yt):yt}))}match(H){return this.expandSegmentGroup(this.injector,this.config,H.root,qt).pipe((0,B.U)(Me=>this.createUrlTree(ms(Me),H.queryParams,H.fragment))).pipe((0,us.K)(Me=>{throw Me instanceof es?this.noMatchError(Me):Me}))}noMatchError(H){return new i.vHH(4002,Mi)}createUrlTree(H,U,pe){const Me=pn(H);return new ns(Me,U,pe)}expandSegmentGroup(H,U,pe,Me){return 0===pe.segments.length&&pe.hasChildren()?this.expandChildren(H,U,pe).pipe((0,B.U)(yt=>new ls([],yt))):this.expandSegment(H,pe,U,pe.segments,Me,!0)}expandChildren(H,U,pe){const Me=[];for(const yt of Object.keys(pe.children))"primary"===yt?Me.unshift(yt):Me.push(yt);return(0,u.D)(Me).pipe((0,Ut.b)(yt=>{const ei=pe.children[yt],yi=un(U,yt);return this.expandSegmentGroup(H,yi,ei,yt).pipe((0,B.U)(ss=>({segment:ss,outlet:yt})))}),$i((yt,ei)=>(yt[ei.outlet]=ei.segment,yt),{}),zt())}expandSegment(H,U,pe,Me,yt,ei){return(0,u.D)(pe).pipe((0,Ut.b)(yi=>this.expandSegmentAgainstRoute(H,U,pe,yi,Me,yt,ei).pipe((0,us.K)(rn=>{if(rn instanceof es)return(0,Ue.of)(null);throw rn}))),ui(yi=>!!yi),(0,us.K)((yi,ss)=>{if(Mr(yi))return qi(U,Me,yt)?(0,Ue.of)(new ls([],{})):an(U);throw yi}))}expandSegmentAgainstRoute(H,U,pe,Me,yt,ei,yi){return Ri(Me,U,yt,ei)?void 0===Me.redirectTo?this.matchSegmentAgainstRoute(H,U,Me,yt,ei):yi&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(H,U,pe,Me,yt,ei):an(U):an(U)}expandSegmentAgainstRouteUsingRedirect(H,U,pe,Me,yt,ei){return"**"===Me.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(H,pe,Me,ei):this.expandRegularSegmentAgainstRouteUsingRedirect(H,U,pe,Me,yt,ei)}expandWildCardWithParamsAgainstRouteUsingRedirect(H,U,pe,Me){const yt=this.applyRedirectCommands([],pe.redirectTo,{});return pe.redirectTo.startsWith("/")?dr(yt):this.lineralizeSegments(pe,yt).pipe((0,$t.z)(ei=>{const yi=new ls(ei,{});return this.expandSegment(H,yi,U,ei,Me,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(H,U,pe,Me,yt,ei){const{matched:yi,consumedSegments:ss,remainingSegments:rn,positionalParamSegments:Dr}=te(U,Me,yt);if(!yi)return an(U);const jn=this.applyRedirectCommands(ss,Me.redirectTo,Dr);return Me.redirectTo.startsWith("/")?dr(jn):this.lineralizeSegments(Me,jn).pipe((0,$t.z)(So=>this.expandSegment(H,U,pe,So.concat(rn),ei,!1)))}matchSegmentAgainstRoute(H,U,pe,Me,yt){return"**"===pe.path?(H=S(pe,H),pe.loadChildren?(pe._loadedRoutes?(0,Ue.of)({routes:pe._loadedRoutes,injector:pe._loadedInjector}):this.configLoader.loadChildren(H,pe)).pipe((0,B.U)(yi=>(pe._loadedRoutes=yi.routes,pe._loadedInjector=yi.injector,new ls(Me,{})))):(0,Ue.of)(new ls(Me,{}))):ee(U,pe,Me,H).pipe(de(({matched:ei,consumedSegments:yi,remainingSegments:ss})=>ei?this.getChildConfig(H=pe._injector??H,pe,Me).pipe((0,$t.z)(Dr=>{const jn=Dr.injector??H,So=Dr.routes,{segmentGroup:ia,slicedSegments:sa}=ie(U,yi,ss,So),fh=new ls(ia.segments,ia.children);if(0===sa.length&&fh.hasChildren())return this.expandChildren(jn,So,fh).pipe((0,B.U)(Zl=>new ls(yi,Zl)));if(0===So.length&&0===sa.length)return(0,Ue.of)(new ls(yi,{}));const ql=Ps(pe)===yt;return this.expandSegment(jn,fh,So,sa,ql?qt:yt,!0).pipe((0,B.U)(Kh=>new ls(yi.concat(Kh.segments),Kh.children)))})):an(U)))}getChildConfig(H,U,pe){return U.children?(0,Ue.of)({routes:U.children,injector:H}):U.loadChildren?void 0!==U._loadedRoutes?(0,Ue.of)({routes:U._loadedRoutes,injector:U._loadedInjector}):function R(F,H,U,pe){const Me=H.canLoad;if(void 0===Me||0===Me.length)return(0,Ue.of)(!0);const yt=Me.map(ei=>{const yi=Et(ei,F);return ot(function nr(F){return F&&po(F.canLoad)}(yi)?yi.canLoad(H,U):F.runInContext(()=>yi(H,U)))});return(0,Ue.of)(yt).pipe(ze(),K())}(H,U,pe).pipe((0,$t.z)(Me=>Me?this.configLoader.loadChildren(H,U).pipe((0,oi.b)(yt=>{U._loadedRoutes=yt.routes,U._loadedInjector=yt.injector})):function Pr(F){return(0,ce._)(Mt(Mi,3))}())):(0,Ue.of)({routes:[],injector:H})}lineralizeSegments(H,U){let pe=[],Me=U.root;for(;;){if(pe=pe.concat(Me.segments),0===Me.numberOfChildren)return(0,Ue.of)(pe);if(Me.numberOfChildren>1||!Me.children[qt])return(0,ce._)(new i.vHH(4e3,Mi));Me=Me.children[qt]}}applyRedirectCommands(H,U,pe){return this.applyRedirectCreateUrlTree(U,this.urlSerializer.parse(U),H,pe)}applyRedirectCreateUrlTree(H,U,pe,Me){const yt=this.createSegmentGroup(H,U.root,pe,Me);return new ns(yt,this.createQueryParams(U.queryParams,this.urlTree.queryParams),U.fragment)}createQueryParams(H,U){const pe={};return di(H,(Me,yt)=>{if("string"==typeof Me&&Me.startsWith(":")){const yi=Me.substring(1);pe[yt]=U[yi]}else pe[yt]=Me}),pe}createSegmentGroup(H,U,pe,Me){const yt=this.createSegments(H,U.segments,pe,Me);let ei={};return di(U.children,(yi,ss)=>{ei[ss]=this.createSegmentGroup(H,yi,pe,Me)}),new ls(yt,ei)}createSegments(H,U,pe,Me){return U.map(yt=>yt.path.startsWith(":")?this.findPosParam(H,yt,Me):this.findOrReturn(yt,pe))}findPosParam(H,U,pe){const Me=pe[U.path.substring(1)];if(!Me)throw new i.vHH(4001,Mi);return Me}findOrReturn(H,U){let pe=0;for(const Me of U){if(Me.path===H.path)return U.splice(pe),Me;pe++}return H}}class De{}class _t{constructor(H,U,pe,Me,yt,ei,yi,ss){this.injector=H,this.rootComponentType=U,this.config=pe,this.urlTree=Me,this.url=yt,this.paramsInheritanceStrategy=ei,this.relativeLinkResolution=yi,this.urlSerializer=ss}recognize(){const H=ie(this.urlTree.root,[],[],this.config.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,H,qt).pipe((0,B.U)(U=>{if(null===U)return null;const pe=new qs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),Me=new $s(pe,U),yt=new $r(this.url,Me);return this.inheritParamsAndData(yt._root),yt}))}inheritParamsAndData(H){const U=H.value,pe=ur(U,this.paramsInheritanceStrategy);U.params=Object.freeze(pe.params),U.data=Object.freeze(pe.data),H.children.forEach(Me=>this.inheritParamsAndData(Me))}processSegmentGroup(H,U,pe,Me){return 0===pe.segments.length&&pe.hasChildren()?this.processChildren(H,U,pe):this.processSegment(H,U,pe,pe.segments,Me)}processChildren(H,U,pe){return(0,u.D)(Object.keys(pe.children)).pipe((0,Ut.b)(Me=>{const yt=pe.children[Me],ei=un(U,Me);return this.processSegmentGroup(H,ei,yt,Me)}),$i((Me,yt)=>Me&&yt?(Me.push(...yt),Me):null),function Xt(F,H=!1){return(0,ue.e)((U,pe)=>{let Me=0;U.subscribe((0,Oe.x)(pe,yt=>{const ei=F(yt,Me++);(ei||H)&&pe.next(yt),!ei&&pe.complete()}))})}(Me=>null!==Me),ji(null),zt(),(0,B.U)(Me=>{if(null===Me)return null;const yt=Ks(Me);return function Ht(F){F.sort((H,U)=>H.value.outlet===qt?-1:U.value.outlet===qt?1:H.value.outlet.localeCompare(U.value.outlet))}(yt),yt}))}processSegment(H,U,pe,Me,yt){return(0,u.D)(U).pipe((0,Ut.b)(ei=>this.processSegmentAgainstRoute(ei._injector??H,ei,pe,Me,yt)),ui(ei=>!!ei),(0,us.K)(ei=>{if(Mr(ei))return qi(pe,Me,yt)?(0,Ue.of)([]):(0,Ue.of)(null);throw ei}))}processSegmentAgainstRoute(H,U,pe,Me,yt){if(U.redirectTo||!Ri(U,pe,Me,yt))return(0,Ue.of)(null);let ei;if("**"===U.path){const yi=Me.length>0?Dt(Me).parameters:{},ss=or(pe)+Me.length,rn=new qs(Me,yi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Un(U),Ps(U),U.component??U._loadedComponent??null,U,Wn(pe),ss,Zr(U),ss);ei=(0,Ue.of)({snapshot:rn,consumedSegments:[],remainingSegments:[]})}else ei=ee(pe,U,Me,H).pipe((0,B.U)(({matched:yi,consumedSegments:ss,remainingSegments:rn,parameters:Dr})=>{if(!yi)return null;const jn=or(pe)+ss.length;return{snapshot:new qs(ss,Dr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Un(U),Ps(U),U.component??U._loadedComponent??null,U,Wn(pe),jn,Zr(U),jn),consumedSegments:ss,remainingSegments:rn}}));return ei.pipe(de(yi=>{if(null===yi)return(0,Ue.of)(null);const{snapshot:ss,consumedSegments:rn,remainingSegments:Dr}=yi;H=U._injector??H;const jn=U._loadedInjector??H,So=function vi(F){return F.children?F.children:F.loadChildren?F._loadedRoutes:[]}(U),{segmentGroup:ia,slicedSegments:sa}=ie(pe,rn,Dr,So.filter(ql=>void 0===ql.redirectTo),this.relativeLinkResolution);if(0===sa.length&&ia.hasChildren())return this.processChildren(jn,So,ia).pipe((0,B.U)(ql=>null===ql?null:[new $s(ss,ql)]));if(0===So.length&&0===sa.length)return(0,Ue.of)([new $s(ss,[])]);const fh=Ps(U)===yt;return this.processSegment(jn,So,ia,sa,fh?qt:yt).pipe((0,B.U)(ql=>null===ql?null:[new $s(ss,ql)]))}))}}function ds(F){const H=F.value.routeConfig;return H&&""===H.path&&void 0===H.redirectTo}function Ks(F){const H=[],U=new Set;for(const pe of F){if(!ds(pe)){H.push(pe);continue}const Me=H.find(yt=>pe.value.routeConfig===yt.value.routeConfig);void 0!==Me?(Me.children.push(...pe.children),U.add(Me)):H.push(pe)}for(const pe of U){const Me=Ks(pe.children);H.push(new $s(pe.value,Me))}return H.filter(pe=>!U.has(pe))}function Wn(F){let H=F;for(;H._sourceSegment;)H=H._sourceSegment;return H}function or(F){let H=F,U=H._segmentIndexShift??0;for(;H._sourceSegment;)H=H._sourceSegment,U+=H._segmentIndexShift??0;return U-1}function Un(F){return F.data||{}}function Zr(F){return F.resolve||{}}function Sl(F){return"string"==typeof F.title||null===F.title}function lr(F){return de(H=>{const U=F(H);return U?(0,u.D)(U).pipe((0,B.U)(()=>H)):(0,Ue.of)(H)})}let vn=(()=>{class F{buildTitle(U){let pe,Me=U.root;for(;void 0!==Me;)pe=this.getResolvedTitleForRoute(Me)??pe,Me=Me.children.find(yt=>yt.outlet===qt);return pe}getResolvedTitleForRoute(U){return U.data[Ci]}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=i.Yz7({token:F,factory:function(){return(0,i.f3M)(vl)},providedIn:"root"}),F})(),vl=(()=>{class F extends vn{constructor(U){super(),this.title=U}updateTitle(U){const pe=this.buildTitle(U);void 0!==pe&&this.title.setTitle(pe)}}return F.\u0275fac=function(U){return new(U||F)(i.LFG(Tt.Dx))},F.\u0275prov=i.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();class tl{}class Ho extends class qr{shouldDetach(H){return!1}store(H,U){}shouldAttach(H){return!1}retrieve(H){return null}shouldReuseRoute(H,U){return H.routeConfig===U.routeConfig}}{}const Tn=new i.OlP("",{providedIn:"root",factory:()=>({})}),pr=new i.OlP("ROUTES");let Kr=(()=>{class F{constructor(U,pe){this.injector=U,this.compiler=pe,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(U){if(this.componentLoaders.get(U))return this.componentLoaders.get(U);if(U._loadedComponent)return(0,Ue.of)(U._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(U);const pe=ot(U.loadComponent()).pipe((0,oi.b)(yt=>{this.onLoadEndListener&&this.onLoadEndListener(U),U._loadedComponent=yt}),(0,ni.x)(()=>{this.componentLoaders.delete(U)})),Me=new lt(pe,()=>new Zt.x).pipe(_e());return this.componentLoaders.set(U,Me),Me}loadChildren(U,pe){if(this.childrenLoaders.get(pe))return this.childrenLoaders.get(pe);if(pe._loadedRoutes)return(0,Ue.of)({routes:pe._loadedRoutes,injector:pe._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(pe);const yt=this.loadModuleFactoryOrRoutes(pe.loadChildren).pipe((0,B.U)(yi=>{this.onLoadEndListener&&this.onLoadEndListener(pe);let ss,rn,Dr=!1;Array.isArray(yi)?rn=yi:(ss=yi.create(U).injector,rn=Gt(ss.get(pr,[],i.XFs.Self|i.XFs.Optional)));return{routes:rn.map(Ss),injector:ss}}),(0,ni.x)(()=>{this.childrenLoaders.delete(pe)})),ei=new lt(yt,()=>new Zt.x).pipe(_e());return this.childrenLoaders.set(pe,ei),ei}loadModuleFactoryOrRoutes(U){return ot(U()).pipe((0,$t.z)(pe=>pe instanceof i.YKP||Array.isArray(pe)?(0,Ue.of)(pe):(0,u.D)(this.compiler.compileModuleAsync(pe))))}}return F.\u0275fac=function(U){return new(U||F)(i.LFG(i.zs3),i.LFG(i.Sil))},F.\u0275prov=i.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();class il{}class Tl{shouldProcessUrl(H){return!0}extract(H){return H}merge(H,U){return H}}function Bl(F){throw F}function Xr(F,H,U){return H.parse("/")}const nl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},To={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function xo(){const F=(0,i.f3M)(Kn),H=(0,i.f3M)(sn),U=(0,i.f3M)(Xe.Ye),pe=(0,i.f3M)(i.zs3),Me=(0,i.f3M)(i.Sil),yt=(0,i.f3M)(pr,{optional:!0})??[],ei=(0,i.f3M)(Tn,{optional:!0})??{},yi=(0,i.f3M)(vl),ss=(0,i.f3M)(vn,{optional:!0}),rn=(0,i.f3M)(il,{optional:!0}),Dr=(0,i.f3M)(tl,{optional:!0}),jn=new Is(null,F,H,U,pe,Me,Gt(yt));return rn&&(jn.urlHandlingStrategy=rn),Dr&&(jn.routeReuseStrategy=Dr),jn.titleStrategy=ss??yi,function Bo(F,H){F.errorHandler&&(H.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(H.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(H.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(H.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(H.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(H.urlUpdateStrategy=F.urlUpdateStrategy),F.canceledNavigationResolution&&(H.canceledNavigationResolution=F.canceledNavigationResolution)}(ei,jn),jn}let Is=(()=>{class F{constructor(U,pe,Me,yt,ei,yi,ss){this.rootComponentType=U,this.urlSerializer=pe,this.rootContexts=Me,this.location=yt,this.config=ss,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Zt.x,this.errorHandler=Bl,this.malformedUriErrorHandler=Xr,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Ue.of)(void 0),this.urlHandlingStrategy=new Tl,this.routeReuseStrategy=new Ho,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ei.get(Kr),this.configLoader.onLoadEndListener=So=>this.triggerEvent(new Vs(So)),this.configLoader.onLoadStartListener=So=>this.triggerEvent(new Eo(So)),this.ngModule=ei.get(i.h0i),this.console=ei.get(i.c2e);const jn=ei.get(i.R0b);this.isNgZoneEnabled=jn instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(ss),this.currentUrlTree=function Ei(){return new ns(new ls([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vr(this.currentUrlTree,this.rootComponentType),this.transitions=new $e({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(U){const pe=this.events;return U.pipe((0,xt.h)(Me=>0!==Me.id),(0,B.U)(Me=>({...Me,extractedUrl:this.urlHandlingStrategy.extract(Me.rawUrl)})),de(Me=>{let yt=!1,ei=!1;return(0,Ue.of)(Me).pipe((0,oi.b)(yi=>{this.currentNavigation={id:yi.id,initialUrl:yi.rawUrl,extractedUrl:yi.extractedUrl,trigger:yi.source,extras:yi.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),de(yi=>{const ss=this.browserUrlTree.toString(),rn=!this.navigated||yi.extractedUrl.toString()!==ss||ss!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||rn)&&this.urlHandlingStrategy.shouldProcessUrl(yi.rawUrl))return D(yi.source)&&(this.browserUrlTree=yi.extractedUrl),(0,Ue.of)(yi).pipe(de(jn=>{const So=this.transitions.getValue();return pe.next(new Vn(jn.id,this.serializeUrl(jn.extractedUrl),jn.source,jn.restoredState)),So!==this.transitions.getValue()?be.E:Promise.resolve(jn)}),function ne(F,H,U,pe){return de(Me=>function Po(F,H,U,pe,Me){return new Ze(F,H,U,pe,Me).apply()}(F,H,U,Me.extractedUrl,pe).pipe((0,B.U)(yt=>({...Me,urlAfterRedirects:yt}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,oi.b)(jn=>{this.currentNavigation={...this.currentNavigation,finalUrl:jn.urlAfterRedirects},Me.urlAfterRedirects=jn.urlAfterRedirects}),function Co(F,H,U,pe,Me,yt){return(0,$t.z)(ei=>function Ct(F,H,U,pe,Me,yt,ei="emptyOnly",yi="legacy"){return new _t(F,H,U,pe,Me,ei,yi,yt).recognize().pipe(de(ss=>null===ss?function Ye(F){return new ut.y(H=>H.error(F))}(new De):(0,Ue.of)(ss)))}(F,H,U,ei.urlAfterRedirects,pe.serialize(ei.urlAfterRedirects),pe,Me,yt).pipe((0,B.U)(yi=>({...ei,targetSnapshot:yi}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,oi.b)(jn=>{if(Me.targetSnapshot=jn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!jn.extras.skipLocationChange){const ia=this.urlHandlingStrategy.merge(jn.urlAfterRedirects,jn.rawUrl);this.setBrowserUrl(ia,jn)}this.browserUrlTree=jn.urlAfterRedirects}const So=new Xn(jn.id,this.serializeUrl(jn.extractedUrl),this.serializeUrl(jn.urlAfterRedirects),jn.targetSnapshot);pe.next(So)}));if(rn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:So,extractedUrl:ia,source:sa,restoredState:fh,extras:ql}=yi,Uu=new Vn(So,this.serializeUrl(ia),sa,fh);pe.next(Uu);const Kh=vr(ia,this.rootComponentType).snapshot;return Me={...yi,targetSnapshot:Kh,urlAfterRedirects:ia,extras:{...ql,skipLocationChange:!1,replaceUrl:!1}},(0,Ue.of)(Me)}return this.rawUrlTree=yi.rawUrl,yi.resolve(null),be.E}),(0,oi.b)(yi=>{const ss=new sr(yi.id,this.serializeUrl(yi.extractedUrl),this.serializeUrl(yi.urlAfterRedirects),yi.targetSnapshot);this.triggerEvent(ss)}),(0,B.U)(yi=>Me={...yi,guards:Ae(yi.targetSnapshot,yi.currentSnapshot,this.rootContexts)}),function Go(F,H){return(0,$t.z)(U=>{const{targetSnapshot:pe,currentSnapshot:Me,guards:{canActivateChecks:yt,canDeactivateChecks:ei}}=U;return 0===ei.length&&0===yt.length?(0,Ue.of)({...U,guardsResult:!0}):function $o(F,H,U,pe){return(0,u.D)(F).pipe((0,$t.z)(Me=>function N(F,H,U,pe,Me){const yt=H&&H.routeConfig?H.routeConfig.canDeactivate:null;if(!yt||0===yt.length)return(0,Ue.of)(!0);const ei=yt.map(yi=>{const ss=Xs(H)??Me,rn=Et(yi,ss);return ot(function Rn(F){return F&&po(F.canDeactivate)}(rn)?rn.canDeactivate(F,H,U,pe):ss.runInContext(()=>rn(F,H,U,pe))).pipe(ui())});return(0,Ue.of)(ei).pipe(ze())}(Me.component,Me.route,U,H,pe)),ui(Me=>!0!==Me,!0))}(ei,pe,Me,F).pipe((0,$t.z)(yi=>yi&&function jo(F){return"boolean"==typeof F}(yi)?function Mn(F,H,U,pe){return(0,u.D)(H).pipe((0,Ut.b)(Me=>z(function p(F,H){return null!==F&&H&&H(new Ro(F)),(0,Ue.of)(!0)}(Me.route.parent,pe),function Ge(F,H){return null!==F&&H&&H(new yr(F)),(0,Ue.of)(!0)}(Me.route,pe),function k(F,H,U){const pe=H[H.length-1],yt=H.slice(0,H.length-1).reverse().map(ei=>function Le(F){const H=F.routeConfig?F.routeConfig.canActivateChild:null;return H&&0!==H.length?{node:F,guards:H}:null}(ei)).filter(ei=>null!==ei).map(ei=>ve(()=>{const yi=ei.guards.map(ss=>{const rn=Xs(ei.node)??U,Dr=Et(ss,rn);return ot(function Yo(F){return F&&po(F.canActivateChild)}(Dr)?Dr.canActivateChild(pe,F):rn.runInContext(()=>Dr(pe,F))).pipe(ui())});return(0,Ue.of)(yi).pipe(ze())}));return(0,Ue.of)(yt).pipe(ze())}(F,Me.path,U),function w(F,H,U){const pe=H.routeConfig?H.routeConfig.canActivate:null;if(!pe||0===pe.length)return(0,Ue.of)(!0);const Me=pe.map(yt=>ve(()=>{const ei=Xs(H)??U,yi=Et(yt,ei);return ot(function hr(F){return F&&po(F.canActivate)}(yi)?yi.canActivate(H,F):ei.runInContext(()=>yi(H,F))).pipe(ui())}));return(0,Ue.of)(Me).pipe(ze())}(F,Me.route,U))),ui(Me=>!0!==Me,!0))}(pe,yt,F,H):(0,Ue.of)(yi)),(0,B.U)(yi=>({...U,guardsResult:yi})))})}(this.ngModule.injector,yi=>this.triggerEvent(yi)),(0,oi.b)(yi=>{if(Me.guardsResult=yi.guardsResult,Cs(yi.guardsResult))throw pt(0,yi.guardsResult);const ss=new zn(yi.id,this.serializeUrl(yi.extractedUrl),this.serializeUrl(yi.urlAfterRedirects),yi.targetSnapshot,!!yi.guardsResult);this.triggerEvent(ss)}),(0,xt.h)(yi=>!!yi.guardsResult||(this.restoreHistory(yi),this.cancelNavigationTransition(yi,"",3),!1)),lr(yi=>{if(yi.guards.canActivateChecks.length)return(0,Ue.of)(yi).pipe((0,oi.b)(ss=>{const rn=new Er(ss.id,this.serializeUrl(ss.extractedUrl),this.serializeUrl(ss.urlAfterRedirects),ss.targetSnapshot);this.triggerEvent(rn)}),de(ss=>{let rn=!1;return(0,Ue.of)(ss).pipe(function fo(F,H){return(0,$t.z)(U=>{const{targetSnapshot:pe,guards:{canActivateChecks:Me}}=U;if(!Me.length)return(0,Ue.of)(U);let yt=0;return(0,u.D)(Me).pipe((0,Ut.b)(ei=>function hl(F,H,U,pe){const Me=F.routeConfig,yt=F._resolve;return void 0!==Me?.title&&!Sl(Me)&&(yt[Ci]=Me.title),function No(F,H,U,pe){const Me=function el(F){return[...Object.keys(F),...Object.getOwnPropertySymbols(F)]}(F);if(0===Me.length)return(0,Ue.of)({});const yt={};return(0,u.D)(Me).pipe((0,$t.z)(ei=>function wo(F,H,U,pe){const Me=Xs(H)??pe,yt=Et(F,Me);return ot(yt.resolve?yt.resolve(H,U):Me.runInContext(()=>yt(H,U)))}(F[ei],H,U,pe).pipe(ui(),(0,oi.b)(yi=>{yt[ei]=yi}))),et(1),function Kt(F){return(0,B.U)(()=>F)}(yt),(0,us.K)(ei=>Mr(ei)?be.E:(0,ce._)(ei)))}(yt,F,H,pe).pipe((0,B.U)(ei=>(F._resolvedData=ei,F.data=ur(F,U).resolve,Me&&Sl(Me)&&(F.data[Ci]=Me.title),null)))}(ei.route,pe,F,H)),(0,oi.b)(()=>yt++),et(1),(0,$t.z)(ei=>yt===Me.length?(0,Ue.of)(U):be.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,oi.b)({next:()=>rn=!0,complete:()=>{rn||(this.restoreHistory(ss),this.cancelNavigationTransition(ss,"",2))}}))}),(0,oi.b)(ss=>{const rn=new to(ss.id,this.serializeUrl(ss.extractedUrl),this.serializeUrl(ss.urlAfterRedirects),ss.targetSnapshot);this.triggerEvent(rn)}))}),lr(yi=>{const ss=rn=>{const Dr=[];rn.routeConfig?.loadComponent&&!rn.routeConfig._loadedComponent&&Dr.push(this.configLoader.loadComponent(rn.routeConfig).pipe((0,oi.b)(jn=>{rn.component=jn}),(0,B.U)(()=>{})));for(const jn of rn.children)Dr.push(...ss(jn));return Dr};return jt(ss(yi.targetSnapshot.root)).pipe(ji(),(0,Be.q)(1))}),lr(()=>this.afterPreactivation()),(0,B.U)(yi=>{const ss=function v(F,H,U){const pe=M(F,H._root,U?U._root:void 0);return new tr(pe,H)}(this.routeReuseStrategy,yi.targetSnapshot,yi.currentRouterState);return Me={...yi,targetRouterState:ss}}),(0,oi.b)(yi=>{this.currentUrlTree=yi.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(yi.urlAfterRedirects,yi.rawUrl),this.routerState=yi.targetRouterState,"deferred"===this.urlUpdateStrategy&&(yi.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,yi),this.browserUrlTree=yi.urlAfterRedirects)}),((F,H,U)=>(0,B.U)(pe=>(new Ar(H,pe.targetRouterState,pe.currentRouterState,U).activate(F),pe)))(this.rootContexts,this.routeReuseStrategy,yi=>this.triggerEvent(yi)),(0,oi.b)({next(){yt=!0},complete(){yt=!0}}),(0,ni.x)(()=>{yt||ei||this.cancelNavigationTransition(Me,"",1),this.currentNavigation?.id===Me.id&&(this.currentNavigation=null)}),(0,us.K)(yi=>{if(ei=!0,Gi(yi)){wi(yi)||(this.navigated=!0,this.restoreHistory(Me,!0));const ss=new os(Me.id,this.serializeUrl(Me.extractedUrl),yi.message,yi.cancellationCode);if(pe.next(ss),wi(yi)){const rn=this.urlHandlingStrategy.merge(yi.url,this.rawUrlTree),Dr={skipLocationChange:Me.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||D(Me.source)};this.scheduleNavigation(rn,"imperative",null,Dr,{resolve:Me.resolve,reject:Me.reject,promise:Me.promise})}else Me.resolve(!1)}else{this.restoreHistory(Me,!0);const ss=new Io(Me.id,this.serializeUrl(Me.extractedUrl),yi,Me.targetSnapshot??void 0);pe.next(ss);try{Me.resolve(this.errorHandler(yi))}catch(rn){Me.reject(rn)}}return be.E}))}))}resetRootComponentType(U){this.rootComponentType=U,this.routerState.root.component=this.rootComponentType}setTransition(U){this.transitions.next({...this.transitions.value,...U})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(U=>{const pe="popstate"===U.type?"popstate":"hashchange";"popstate"===pe&&setTimeout(()=>{const Me={replaceUrl:!0},yt=U.state?.navigationId?U.state:null;if(yt){const yi={...yt};delete yi.navigationId,delete yi.\u0275routerPageId,0!==Object.keys(yi).length&&(Me.state=yi)}const ei=this.parseUrl(U.url);this.scheduleNavigation(ei,pe,yt,Me)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(U){this.events.next(U)}resetConfig(U){this.config=U.map(Ss),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(U,pe={}){const{relativeTo:Me,queryParams:yt,fragment:ei,queryParamsHandling:yi,preserveFragment:ss}=pe,rn=Me||this.routerState.root,Dr=ss?this.currentUrlTree.fragment:ei;let jn=null;switch(yi){case"merge":jn={...this.currentUrlTree.queryParams,...yt};break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=yt||null}return null!==jn&&(jn=this.removeEmptyProps(jn)),hn(rn,this.currentUrlTree,U,jn,Dr??null)}navigateByUrl(U,pe={skipLocationChange:!1}){const Me=Cs(U)?U:this.parseUrl(U),yt=this.urlHandlingStrategy.merge(Me,this.rawUrlTree);return this.scheduleNavigation(yt,"imperative",null,pe)}navigate(U,pe={skipLocationChange:!1}){return function g(F){for(let H=0;H<F.length;H++){if(null==F[H])throw new i.vHH(4008,false)}}(U),this.navigateByUrl(this.createUrlTree(U,pe),pe)}serializeUrl(U){return this.urlSerializer.serialize(U)}parseUrl(U){let pe;try{pe=this.urlSerializer.parse(U)}catch(Me){pe=this.malformedUriErrorHandler(Me,this.urlSerializer,U)}return pe}isActive(U,pe){let Me;if(Me=!0===pe?{...nl}:!1===pe?{...To}:pe,Cs(U))return bs(this.currentUrlTree,U,Me);const yt=this.parseUrl(U);return bs(this.currentUrlTree,yt,Me)}removeEmptyProps(U){return Object.keys(U).reduce((pe,Me)=>{const yt=U[Me];return null!=yt&&(pe[Me]=yt),pe},{})}processNavigations(){this.navigations.subscribe(U=>{this.navigated=!0,this.lastSuccessfulId=U.id,this.currentPageId=U.targetPageId,this.events.next(new co(U.id,this.serializeUrl(U.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),U.resolve(!0)},U=>{this.console.warn(`Unhandled Navigation Error: ${U}`)})}scheduleNavigation(U,pe,Me,yt,ei){if(this.disposed)return Promise.resolve(!1);let yi,ss,rn;ei?(yi=ei.resolve,ss=ei.reject,rn=ei.promise):rn=new Promise((So,ia)=>{yi=So,ss=ia});const Dr=++this.navigationId;let jn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Me=this.location.getState()),jn=Me&&Me.\u0275routerPageId?Me.\u0275routerPageId:yt.replaceUrl||yt.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):jn=0,this.setTransition({id:Dr,targetPageId:jn,source:pe,restoredState:Me,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:U,extras:yt,resolve:yi,reject:ss,promise:rn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),rn.catch(So=>Promise.reject(So))}setBrowserUrl(U,pe){const Me=this.urlSerializer.serialize(U),yt={...pe.extras.state,...this.generateNgRouterState(pe.id,pe.targetPageId)};this.location.isCurrentPathEqualTo(Me)||pe.extras.replaceUrl?this.location.replaceState(Me,"",yt):this.location.go(Me,"",yt)}restoreHistory(U,pe=!1){if("computed"===this.canceledNavigationResolution){const Me=this.currentPageId-U.targetPageId;"popstate"!==U.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===Me?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===Me&&(this.resetState(U),this.browserUrlTree=U.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Me)}else"replace"===this.canceledNavigationResolution&&(pe&&this.resetState(U),this.resetUrlToCurrentUrlTree())}resetState(U){this.routerState=U.currentRouterState,this.currentUrlTree=U.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,U.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(U,pe,Me){const yt=new os(U.id,this.serializeUrl(U.extractedUrl),pe,Me);this.triggerEvent(yt),U.resolve(!1)}generateNgRouterState(U,pe){return"computed"===this.canceledNavigationResolution?{navigationId:U,\u0275routerPageId:pe}:{navigationId:U}}}return F.\u0275fac=function(U){i.$Z()},F.\u0275prov=i.Yz7({token:F,factory:function(){return xo()},providedIn:"root"}),F})();function D(F){return"imperative"!==F}let _=(()=>{class F{constructor(U,pe,Me){this.router=U,this.route=pe,this.locationStrategy=Me,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Zt.x,this.subscription=U.events.subscribe(yt=>{yt instanceof co&&this.updateTargetUrlAndHref()})}set preserveFragment(U){this._preserveFragment=(0,i.D6c)(U)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(U){this._skipLocationChange=(0,i.D6c)(U)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(U){this._replaceUrl=(0,i.D6c)(U)}get replaceUrl(){return this._replaceUrl}set routerLink(U){this.commands=null!=U?Array.isArray(U)?U:[U]:null}ngOnChanges(U){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(U,pe,Me,yt,ei){return!!(0!==U||pe||Me||yt||ei||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return F.\u0275fac=function(U){return new(U||F)(i.Y36(Is),i.Y36(zs),i.Y36(Xe.S$))},F.\u0275dir=i.lG2({type:F,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(U,pe){1&U&&i.NdJ("click",function(yt){return pe.onClick(yt.button,yt.ctrlKey,yt.shiftKey,yt.altKey,yt.metaKey)}),2&U&&i.uIk("target",pe.target)("href",pe.href,i.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[i.TTD]}),F})();class Te{}let ri=(()=>{class F{constructor(U,pe,Me,yt,ei){this.router=U,this.injector=Me,this.preloadingStrategy=yt,this.loader=ei}setUpPreloading(){this.subscription=this.router.events.pipe((0,xt.h)(U=>U instanceof co),(0,Ut.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(U,pe){const Me=[];for(const yt of pe){yt.providers&&!yt._injector&&(yt._injector=(0,i.MMx)(yt.providers,U,`Route: ${yt.path}`));const ei=yt._injector??U,yi=yt._loadedInjector??ei;yt.loadChildren&&!yt._loadedRoutes&&void 0===yt.canLoad||yt.loadComponent&&!yt._loadedComponent?Me.push(this.preloadConfig(ei,yt)):(yt.children||yt._loadedRoutes)&&Me.push(this.processRoutes(yi,yt.children??yt._loadedRoutes))}return(0,u.D)(Me).pipe((0,bt.J)())}preloadConfig(U,pe){return this.preloadingStrategy.preload(pe,()=>{let Me;Me=pe.loadChildren&&void 0===pe.canLoad?this.loader.loadChildren(U,pe):(0,Ue.of)(null);const yt=Me.pipe((0,$t.z)(ei=>null===ei?(0,Ue.of)(void 0):(pe._loadedRoutes=ei.routes,pe._loadedInjector=ei.injector,this.processRoutes(ei.injector??U,ei.routes))));if(pe.loadComponent&&!pe._loadedComponent){const ei=this.loader.loadComponent(pe);return(0,u.D)([yt,ei]).pipe((0,bt.J)())}return yt})}}return F.\u0275fac=function(U){return new(U||F)(i.LFG(Is),i.LFG(i.Sil),i.LFG(i.lqb),i.LFG(Te),i.LFG(Kr))},F.\u0275prov=i.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();const Pi=new i.OlP("");let Hi=(()=>{class F{constructor(U,pe,Me={}){this.router=U,this.viewportScroller=pe,this.options=Me,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Me.scrollPositionRestoration=Me.scrollPositionRestoration||"disabled",Me.anchorScrolling=Me.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(U=>{U instanceof Vn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=U.navigationTrigger,this.restoredId=U.restoredState?U.restoredState.navigationId:0):U instanceof co&&(this.lastId=U.id,this.scheduleScrollEvent(U,this.router.parseUrl(U.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(U=>{U instanceof oo&&(U.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(U.position):U.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(U.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(U,pe){this.router.triggerEvent(new oo(U,"popstate"===this.lastSource?this.store[this.restoredId]:null,pe))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(U){i.$Z()},F.\u0275prov=i.Yz7({token:F,factory:F.\u0275fac}),F})();function br(F,H){return{\u0275kind:F,\u0275providers:H}}function Wr(F){return[{provide:pr,multi:!0,useValue:F}]}function On(){const F=(0,i.f3M)(i.zs3);return H=>{const U=F.get(i.z2F);if(H!==U.components[0])return;const pe=F.get(Is),Me=F.get(mo);1===F.get(Zo)&&pe.initialNavigation(),F.get(Yl,null,i.XFs.Optional)?.setUpPreloading(),F.get(Pi,null,i.XFs.Optional)?.init(),pe.resetRootComponentType(U.componentTypes[0]),Me.closed||(Me.next(),Me.unsubscribe())}}const mo=new i.OlP("",{factory:()=>new Zt.x}),Zo=new i.OlP("",{providedIn:"root",factory:()=>1});const Yl=new i.OlP("");function cl(F){return br(0,[{provide:Yl,useExisting:ri},{provide:Te,useExisting:F}])}const ka=new i.OlP("ROUTER_FORROOT_GUARD"),$l=[Xe.Ye,{provide:Kn,useClass:Dn},{provide:Is,useFactory:xo},sn,{provide:zs,useFactory:function Os(F){return F.routerState.root},deps:[Is]},Kr];function ba(){return new i.PXZ("Router",Is)}let Sc=(()=>{class F{constructor(U){}static forRoot(U,pe){return{ngModule:F,providers:[$l,[],Wr(U),{provide:ka,useFactory:Xa,deps:[[Is,new i.FiY,new i.tp0]]},{provide:Tn,useValue:pe||{}},pe?.useHash?{provide:Xe.S$,useClass:Xe.Do}:{provide:Xe.S$,useClass:Xe.b0},{provide:Pi,useFactory:()=>{const F=(0,i.f3M)(Is),H=(0,i.f3M)(Xe.EM),U=(0,i.f3M)(Tn);return U.scrollOffset&&H.setOffset(U.scrollOffset),new Hi(F,H,U)}},pe?.preloadingStrategy?cl(pe.preloadingStrategy).\u0275providers:[],{provide:i.PXZ,multi:!0,useFactory:ba},pe?.initialNavigation?Ld(pe):[],[{provide:fa,useFactory:On},{provide:i.tb,multi:!0,useExisting:fa}]]}}static forChild(U){return{ngModule:F,providers:[Wr(U)]}}}return F.\u0275fac=function(U){return new(U||F)(i.LFG(ka,8))},F.\u0275mod=i.oAB({type:F}),F.\u0275inj=i.cJS({imports:[ht]}),F})();function Xa(F){return"guarded"}function Ld(F){return["disabled"===F.initialNavigation?br(3,[{provide:i.ip1,multi:!0,useFactory:()=>{const H=(0,i.f3M)(Is);return()=>{H.setUpLocationChangeListener()}}},{provide:Zo,useValue:2}]).\u0275providers:[],"enabledBlocking"===F.initialNavigation?br(2,[{provide:Zo,useValue:0},{provide:i.ip1,multi:!0,deps:[i.zs3],useFactory:H=>{const U=H.get(Xe.V_,Promise.resolve());let pe=!1;return()=>U.then(()=>new Promise(yt=>{const ei=H.get(Is),yi=H.get(mo);(function Me(yt){H.get(Is).events.pipe((0,xt.h)(yi=>yi instanceof co||yi instanceof os||yi instanceof Io),(0,B.U)(yi=>yi instanceof co||yi instanceof os&&(0===yi.code||1===yi.code)&&null),(0,xt.h)(yi=>null!==yi),(0,Be.q)(1)).subscribe(()=>{yt()})})(()=>{yt(!0),pe=!0}),ei.afterPreactivation=()=>(yt(!0),pe||yi.closed?(0,Ue.of)(void 0):yi),ei.initialNavigation()}))}}]).\u0275providers:[]]}const fa=new i.OlP("")}},An=>{An(An.s=3970)}]);
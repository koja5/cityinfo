(self.webpackChunkCityInfo=self.webpackChunkCityInfo||[]).push([[426],{7426:(E,C,_)=>{"use strict";_.r(C),_.d(C,{SuperadminModule:()=>lt});var x=_(6895),w=_(4523),f=_(7685),t=_(8274),S=_(7579),g=_(9039),d=_(4327),D=_(4937),y=_(6209),c=_(5452),l=_(7725),m=_(2684),r=_(4006),p=_(3544),j=_(9952),u=_(4954),b=_(6256);const G=["grid"],T=["orderForm"],h=["editSettingsTemplate"],R=["container"];function Z(i,a){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"app-loader"),t.qZA())}function J(i,a){if(1&i&&(t.TgZ(0,"mat-icon",14),t._uU(1),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.Oqu(e.template.classIcon)}}function M(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.Oqu(e.template.label)}}function F(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2).$implicit,v=t.oxw(3);return t.KtG(v.openPage(s.template.link,s.template.parameters,o))}),t.YNc(1,J,2,1,"mat-icon",13),t.YNc(2,M,2,1,"span",1),t.qZA()}if(2&i){const e=t.oxw(4).$implicit;t.Tol(e.template.class),t.xp6(1),t.Q6J("ngIf",e.template.classIcon),t.xp6(1),t.Q6J("ngIf",e.template.label)}}function O(i,a){if(1&i&&(t.TgZ(0,"mat-icon",14),t._uU(1),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.Oqu(e.template.classIcon)}}function N(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.Oqu(e.template.label)}}function Q(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(5);return t.KtG(s.previewDocument(o))}),t.YNc(1,O,2,1,"mat-icon",13),t.YNc(2,N,2,1,"span",1),t.qZA()}if(2&i){const e=t.oxw(4).$implicit;t.Tol(e.template.class),t.xp6(1),t.Q6J("ngIf",e.template.classIcon),t.xp6(1),t.Q6J("ngIf",e.template.label)}}function Y(i,a){if(1&i&&(t.TgZ(0,"mat-icon",14),t._uU(1),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.Oqu(e.template.classIcon)}}function U(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.Oqu(e.template.label)}}function $(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(5);return t.KtG(s.downloadDocument(o))}),t.YNc(1,Y,2,1,"mat-icon",13),t.YNc(2,U,2,1,"span",1),t.qZA()}if(2&i){const e=t.oxw(4).$implicit;t.Tol(e.template.class),t.xp6(1),t.Q6J("ngIf",e.template.classIcon),t.xp6(1),t.Q6J("ngIf",e.template.label)}}function H(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,F,3,4,"button",11),t.YNc(2,Q,3,4,"button",11),t.YNc(3,$,3,4,"button",11),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","open"===n.template.action),t.xp6(1),t.Q6J("ngIf","previewDocument"===n.template.action&&"application/pdf"===e.type),t.xp6(1),t.Q6J("ngIf","downloadDocument"===n.template.action)}}function q(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("select",function(o){t.CHM(e);const s=t.oxw(2).$implicit,v=t.oxw(2).$implicit,I=t.oxw(3);return t.KtG(I.clickDropDownButton(o,s,v.template))}),t.qZA()}if(2&i){const e=t.oxw(4).$implicit,n=t.oxw(3);t.s9C("content",n.language[e.template.content]?n.language[e.template.content]:e.template.content),t.Q6J("items",e.template.items)}}function P(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,q,1,2,"button",15),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",e.template.items)}}function L(i,a){if(1&i&&(t.TgZ(0,"div")(1,"mat-icon",14),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(o.getFileTypeIcon(e,n.template.field))}}function B(i,a){if(1&i&&t._UZ(0,"div",19),2&i){const e=t.oxw().$implicit;t.Q6J("innerHtml",e.html,t.oJD)}}function K(i,a){if(1&i&&t._UZ(0,"div",19),2&i){const e=t.oxw().$implicit;t.Q6J("innerHtml",e.html,t.oJD)}}function k(i,a){if(1&i&&t._UZ(0,"div",19),2&i){const e=t.oxw().$implicit;t.Q6J("innerHtml",e.html,t.oJD)}}function z(i,a){if(1&i&&t._UZ(0,"div",19),2&i){const e=t.oxw().$implicit;t.Q6J("innerHtml",e.html,t.oJD)}}function W(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,B,1,1,"div",18),t.YNc(2,K,1,1,"div",18),t.YNc(3,k,1,1,"div",18),t.YNc(4,z,1,1,"div",18),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","=="===e.operator&&n[e.field]===e.value),t.xp6(1),t.Q6J("ngIf","!="===e.operator&&n[e.field]!==e.value),t.xp6(1),t.Q6J("ngIf",">"===e.operator&&n[e.field]>e.value),t.xp6(1),t.Q6J("ngIf",">"===e.operator&&n[e.field]<e.value)}}function X(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,W,5,4,"div",17),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngForOf",e.template.choices)}}function V(i,a){if(1&i&&(t.YNc(0,H,4,3,"div",1),t.YNc(1,P,2,1,"div",1),t.YNc(2,L,3,1,"div",1),t.YNc(3,X,2,1,"div",1)),2&i){const e=t.oxw(2).$implicit;t.Q6J("ngIf","button"===e.template.type),t.xp6(1),t.Q6J("ngIf","dropdownbutton"===e.template.type),t.xp6(1),t.Q6J("ngIf","fileType"===e.template.type),t.xp6(1),t.Q6J("ngIf",e.template.choices)}}function tt(i,a){1&i&&t.YNc(0,V,4,4,"ng-template",null,10,t.W1O)}function et(i,a){if(1&i&&(t.TgZ(0,"e-column",9),t.YNc(1,tt,2,0,null,1),t.qZA()),2&i){const e=a.$implicit;t.Tol(e.class),t.Q6J("type",e.type)("field",e.field)("headerText",e.title)("width",e.width)("textAlign",e.position?e.position:"center")("isPrimaryKey",e.isPrimaryKey)("editType",e.editType?e.editType:null)("allowEditing",e.allowEditing)("format",e.format)("validationRules",e.validation)("allowFiltering",!1!==e.allowFiltering),t.xp6(1),t.Q6J("ngIf",e.template)}}function it(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"app-dynamic-forms",23,24),t.NdJ("submit",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.submitEmitter(o))}),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("config",e.config)("partOfGrid",!0)}}function nt(i,a){if(1&i&&(t.TgZ(0,"div",20)(1,"div",21),t.YNc(2,it,2,2,"app-dynamic-forms",22),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(2),t.Q6J("ngIf",e.config.config&&e.config.config.length>0)}}function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ejs-grid",5,6),t.NdJ("actionComplete",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.actionComplete(o))})("toolbarClick",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.toolbarClick(o))}),t.TgZ(2,"e-columns"),t.YNc(3,et,2,14,"e-column",7),t.qZA(),t.YNc(4,nt,3,1,"ng-template",null,8,t.W1O),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("height",e.height)("dataSource",e.data)("editSettings",e.config.editSettings)("toolbar",e.config.toolbar)("allowSorting",e.config.sorting.enable)("sortSettings",e.config.sorting.initialSorting)("allowGrouping",e.config.grouping.enable)("allowResizing",e.config.allowResizing)("allowPaging",e.config.paging.enable)("allowExcelExport",!0)("allowPdfExport",!0)("pageSettings",e.config.paging.settings)("allowFiltering",e.config.filtering.enable)("filterSettings",e.config.filtering.settings)("allowExcelExport",!0)("contextMenuItems",e.config.contextMenuItems),t.xp6(3),t.Q6J("ngForOf",e.config.columns)}}function at(i,a){if(1&i&&(t.TgZ(0,"div",null,3),t.YNc(2,ot,6,17,"ejs-grid",4),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.config)}}let A=(()=>{class i{constructor(e,n,o,s,v,I,rt){this.configurationService=e,this.apiService=n,this.helpService=o,this.toastr=s,this.routerNavigate=v,this.router=I,this.messageService=rt,this.typeOfModification="add",this.loader=!1,this.unsubscribe=new S.x,this.invoice={},this.generateInvoice=!1}ngOnInit(){this.loader=!0,this.initializeConfig(),this.subscribeMessageServices(),this.filterOptions={type:"Menu"}}onResize(){this.height=this.helpService.getHeightForGridWithoutPx(this.partOfTab)}initializeConfig(){this.language=this.helpService.getLanguage(),this.configurationService.getConfiguration(this.path,this.file).subscribe(e=>{this.config=e,this.height=this.helpService.getHeightForGridWithoutPx(this.partOfTab),this.loader=!1,this.enableGridSpinner(),this.apiService.callApi(this.config,this.router).subscribe(n=>{this.setResponseData(n)})})}subscribeMessageServices(){this.subscription=this.messageService.getRefreshGrid().subscribe(()=>{this.enableGridSpinner(),this.apiService.callApi(this.config,this.router).subscribe(e=>{this.setResponseData(e)}),setTimeout(()=>{this.operations.dialog.close()},50)})}actionComplete(e){("beginEdit"===e.requestType||"add"===e.requestType)&&(e.dialog.buttons=[],this.config.width&&(e.dialog.width=this.config.width),"add"===e.requestType?e.dialog.header=this.language.gridPopupAddTitle:"beginEdit"===e.requestType&&(e.dialog.header=this.language.gridPopupEditTitle),this.config.config&&setTimeout(()=>{this.setValue(this.config.config,e.rowData)},50)),"delete"===e.requestType&&(this.config.uploadConfig?this.deleteDocument(e):this.deleteData(e)),this.typeOfModification=e.requestType,this.operations=e,e.cancel=!0}submitEmitter(e){this.enableGridSpinner(),"add"===this.typeOfModification?this.callServerMethod(this.config.editSettingsRequest.add,e):"beginEdit"===this.typeOfModification&&this.callServerMethod(this.config.editSettingsRequest.edit,e),this.operations.dialog.close()}callServerMethod(e,n){this.apiService.callServerMethod(e,n,this.router).subscribe(o=>{o?(this.toastr.showSuccess(),this.apiService.callApi(this.config,this.router).subscribe(s=>{this.setResponseData(s)})):(this.toastr.showError(),this.grid.hideSpinner())})}setResponseData(e){"GET"===this.config.request.type&&(this.data=e,this.grid.hideSpinner())}enableGridSpinner(){setTimeout(()=>{this.grid.showSpinner()},50)}disabledGridSpinner(){setTimeout(()=>{this.grid.hideSpinner()},150)}deleteData(e){for(let n=0;n<e.data.length;n++)this.callServerMethod(this.config.editSettingsRequest.delete,e.data[n])}deleteDocument(e){for(let n=0;n<e.data.length;n++)this.callServerMethod(this.config.uploadConfig.delete,e.data[n])}setValue(e,n){for(let o=0;o<e.length;o++)this.form.setValue(e[o].name,n[e[o].name],e[o].type)}openPage(e,n,o){const s=this.helpService.concatenatePageLink(e,n,o);this.routerNavigate.navigate([s])}unsuscribeME(){this.unsubscribe.next(null),this.unsubscribe.complete(),this.subscription&&this.subscription.unsubscribe()}ngOnDestroy(){this.unsuscribeME()}downloadDocument(e){this.apiService.getDocument(e).subscribe(n=>(0,d.saveAs)(n,e.name),n=>console.error(n))}previewDocument(e){this.apiService.getDocument(e).subscribe(n=>{let o=new Blob([n],{type:"application/pdf"});var s=URL.createObjectURL(o);window.open(s)})}getFileTypeIcon(e,n){return this.helpService.getFileTypeIcon(e[n])}clickDropDownButton(e,n,o){if(e.item.properties.id)if(o.itemsRequest&&o.itemsRequest[e.item.properties.id])this.apiService.callApi({request:o.itemsRequest[e.item.properties.id],body:n},this.router).subscribe(v=>{v?this.toastr.showSuccess():this.toastr.showError(),this.grid.hideSpinner()});else{if(o.fields&&o.fields[e.item.properties.id])for(let s=0;s<o.fields[e.item.properties.id].length;s++)this.invoice[o.fields[e.item.properties.id][s].key]=n[o.fields[e.item.properties.id][s].value];this.invoice.products=[],this.invoiceAction=e.item.properties.id,this.generateInvoice=!0,setTimeout(()=>{this.generateInvoice=!1},100)}}toolbarClick(e){"e-excelexport"===e.item.prefixIcon?this.grid.excelExport({exportType:"CurrentPage"}):"e-pdfexport"===e.item.prefixIcon&&this.grid.pdfExport({exportType:"CurrentPage"})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.e),t.Y36(y.f),t.Y36(c.s),t.Y36(l.l),t.Y36(f.F0),t.Y36(f.gz),t.Y36(m.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dynamic-grid"]],viewQuery:function(e,n){if(1&e&&(t.Gf(g.b,5),t.Gf(G,5),t.Gf(T,5),t.Gf(h,5),t.Gf(R,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.form=o.first),t.iGM(o=t.CRH())&&(n.grid=o.first),t.iGM(o=t.CRH())&&(n.orderForm=o.first),t.iGM(o=t.CRH())&&(n.editSettingsTemplate=o.first),t.iGM(o=t.CRH())&&(n.container=o.first)}},hostBindings:function(e,n){1&e&&t.NdJ("resize",function(s){return n.onResize(s)},!1,t.Jf7)},inputs:{path:"path",file:"file",partOfTab:"partOfTab"},decls:2,vars:2,consts:[["style","height: 70vh",4,"ngIf"],[4,"ngIf"],[2,"height","70vh"],["container",""],["width","100%","allowTextWrap","true",3,"height","dataSource","editSettings","toolbar","allowSorting","sortSettings","allowGrouping","allowResizing","allowPaging","allowExcelExport","allowPdfExport","pageSettings","allowFiltering","filterSettings","contextMenuItems","actionComplete","toolbarClick",4,"ngIf"],["width","100%","allowTextWrap","true",3,"height","dataSource","editSettings","toolbar","allowSorting","sortSettings","allowGrouping","allowResizing","allowPaging","allowExcelExport","allowPdfExport","pageSettings","allowFiltering","filterSettings","contextMenuItems","actionComplete","toolbarClick"],["grid",""],[3,"type","field","headerText","width","class","textAlign","isPrimaryKey","editType","allowEditing","format","validationRules","allowFiltering",4,"ngFor","ngForOf"],["editSettingsTemplate",""],[3,"type","field","headerText","width","textAlign","isPrimaryKey","editType","allowEditing","format","validationRules","allowFiltering"],["template",""],[3,"class","click",4,"ngIf"],[3,"click"],["class","mat-icon notranslate material-icons mat-icon-no-color","aria-hidden","false",4,"ngIf"],["aria-hidden","false",1,"mat-icon","notranslate","material-icons","mat-icon-no-color"],["ejs-dropdownbutton","","class","background-none",3,"items","content","select",4,"ngIf"],["ejs-dropdownbutton","",1,"background-none",3,"items","content","select"],[4,"ngFor","ngForOf"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"],["ngForm",""],[1,"form-row"],[3,"config","partOfGrid","submit",4,"ngIf"],[3,"config","partOfGrid","submit"],["form","dynamicForm"]],template:function(e,n){1&e&&(t.YNc(0,Z,2,0,"div",0),t.YNc(1,at,3,1,"div",1)),2&e&&(t.Q6J("ngIf",n.loader),t.xp6(1),t.Q6J("ngIf",!n.loader))},dependencies:[x.sg,x.O5,r.JL,p.R,j._z,u.MwP,u.iKq,u.SRY,u.fMR,u.NQQ,b.Hw,g.b]}),i})();const ct=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"cities",component:(()=>{class i{constructor(){this.path="/grids/superadmin",this.file="cities.json"}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-cities"]],decls:1,vars:2,consts:[[3,"path","file"]],template:function(e,n){1&e&&t._UZ(0,"app-dynamic-grid",0),2&e&&t.Q6J("path",n.path)("file",n.file)},dependencies:[A]}),i})()},{path:"users",component:(()=>{class i{constructor(){this.path="/grids/superadmin",this.file="users.json"}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-users"]],decls:1,vars:2,consts:[[3,"path","file"]],template:function(e,n){1&e&&t._UZ(0,"app-dynamic-grid",0),2&e&&t.Q6J("path",n.path)("file",n.file)},dependencies:[A]}),i})()}];let st=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(ct),f.Bz]}),i})(),lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,st,w.w]}),i})()},4327:function(E,C){var w;void 0!==(w=function(){"use strict";function t(c,l,m){var r=new XMLHttpRequest;r.open("GET",c),r.responseType="blob",r.onload=function(){y(r.response,l,m)},r.onerror=function(){console.error("could not download file")},r.send()}function S(c){var l=new XMLHttpRequest;l.open("HEAD",c,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function g(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(l)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,D=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!D?function(c,l,m){var r=d.URL||d.webkitURL,p=document.createElement("a");p.download=l=l||c.name||"download",p.rel="noopener","string"==typeof c?(p.href=c,p.origin===location.origin?g(p):S(p.href)?t(c,l,m):g(p,p.target="_blank")):(p.href=r.createObjectURL(c),setTimeout(function(){r.revokeObjectURL(p.href)},4e4),setTimeout(function(){g(p)},0))}:"msSaveOrOpenBlob"in navigator?function(c,l,m){if(l=l||c.name||"download","string"!=typeof c)navigator.msSaveOrOpenBlob(function f(c,l){return typeof l>"u"?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\ufeff",c],{type:c.type}):c}(c,m),l);else if(S(c))t(c,l,m);else{var r=document.createElement("a");r.href=c,r.target="_blank",setTimeout(function(){g(r)})}}:function(c,l,m,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof c)return t(c,l,m);var p="application/octet-stream"===c.type,j=/constructor/i.test(d.HTMLElement)||d.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||p&&j||D)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var h=b.result;h=u?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},b.readAsDataURL(c)}else{var G=d.URL||d.webkitURL,T=G.createObjectURL(c);r?r.location=T:location.href=T,r=null,setTimeout(function(){G.revokeObjectURL(T)},4e4)}});d.saveAs=y.saveAs=y,E.exports=y}.apply(C,[]))&&(E.exports=w)}}]);
"use strict";(self.webpackChunkCityInfo=self.webpackChunkCityInfo||[]).push([[426],{7426:(st,m,a)=>{a.r(m),a.d(m,{SuperadminModule:()=>nt});var p=a(6895),u=a(4523),_=a(7685),t=a(8274),h=a(7579),g=a(9039),v=a(4937),x=a(6209),y=a(5452),T=a(7725),w=a(2684),C=a(4006),b=a(3544),S=a(9952),r=a(4954),G=a(6256);const D=["grid"],I=["orderForm"],J=["editSettingsTemplate"],Z=["container"];function j(e,s){1&e&&(t.TgZ(0,"div",2),t._UZ(1,"app-loader"),t.qZA())}function M(e,s){if(1&e&&(t.TgZ(0,"mat-icon",14),t._uU(1),t.qZA()),2&e){const i=t.oxw(5).$implicit;t.xp6(1),t.Oqu(i.template.classIcon)}}function Q(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const i=t.oxw(5).$implicit;t.xp6(1),t.Oqu(i.template.label)}}function E(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2).$implicit,c=t.oxw(2).$implicit,l=t.oxw(3);return t.KtG(l.openPage(c.template.link,c.template.parameters,o))}),t.YNc(1,M,2,1,"mat-icon",13),t.YNc(2,Q,2,1,"span",1),t.qZA()}if(2&e){const i=t.oxw(4).$implicit;t.Tol(i.template.class),t.xp6(1),t.Q6J("ngIf",i.template.classIcon),t.xp6(1),t.Q6J("ngIf",i.template.label)}}function R(e,s){if(1&e&&(t.TgZ(0,"mat-icon",14),t._uU(1),t.qZA()),2&e){const i=t.oxw(5).$implicit;t.xp6(1),t.Oqu(i.template.classIcon)}}function F(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const i=t.oxw(5).$implicit;t.xp6(1),t.Oqu(i.template.label)}}function N(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2).$implicit,c=t.oxw(5);return t.KtG(c.previewDocument(o))}),t.YNc(1,R,2,1,"mat-icon",13),t.YNc(2,F,2,1,"span",1),t.qZA()}if(2&e){const i=t.oxw(4).$implicit;t.Tol(i.template.class),t.xp6(1),t.Q6J("ngIf",i.template.classIcon),t.xp6(1),t.Q6J("ngIf",i.template.label)}}function Y(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,E,3,4,"button",11),t.YNc(2,N,3,4,"button",11),t.qZA()),2&e){const i=t.oxw().$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","open"===n.template.action),t.xp6(1),t.Q6J("ngIf","previewDocument"===n.template.action&&"application/pdf"===i.type)}}function A(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("select",function(o){t.CHM(i);const c=t.oxw(2).$implicit,l=t.oxw(2).$implicit,d=t.oxw(3);return t.KtG(d.clickDropDownButton(o,c,l.template))}),t.qZA()}if(2&e){const i=t.oxw(4).$implicit,n=t.oxw(3);t.s9C("content",n.language[i.template.content]?n.language[i.template.content]:i.template.content),t.Q6J("items",i.template.items)}}function O(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,A,1,2,"button",15),t.qZA()),2&e){const i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",i.template.items)}}function $(e,s){if(1&e&&(t.TgZ(0,"div")(1,"mat-icon",14),t._uU(2),t.qZA()()),2&e){const i=t.oxw().$implicit,n=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(o.getFileTypeIcon(i,n.template.field))}}function H(e,s){if(1&e&&t._UZ(0,"div",19),2&e){const i=t.oxw().$implicit;t.Q6J("innerHtml",i.html,t.oJD)}}function P(e,s){if(1&e&&t._UZ(0,"div",19),2&e){const i=t.oxw().$implicit;t.Q6J("innerHtml",i.html,t.oJD)}}function q(e,s){if(1&e&&t._UZ(0,"div",19),2&e){const i=t.oxw().$implicit;t.Q6J("innerHtml",i.html,t.oJD)}}function U(e,s){if(1&e&&t._UZ(0,"div",19),2&e){const i=t.oxw().$implicit;t.Q6J("innerHtml",i.html,t.oJD)}}function z(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,H,1,1,"div",18),t.YNc(2,P,1,1,"div",18),t.YNc(3,q,1,1,"div",18),t.YNc(4,U,1,1,"div",18),t.qZA()),2&e){const i=s.$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","=="===i.operator&&n[i.field]===i.value),t.xp6(1),t.Q6J("ngIf","!="===i.operator&&n[i.field]!==i.value),t.xp6(1),t.Q6J("ngIf",">"===i.operator&&n[i.field]>i.value),t.xp6(1),t.Q6J("ngIf",">"===i.operator&&n[i.field]<i.value)}}function K(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,z,5,4,"div",17),t.qZA()),2&e){const i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngForOf",i.template.choices)}}function B(e,s){if(1&e&&(t.YNc(0,Y,3,2,"div",1),t.YNc(1,O,2,1,"div",1),t.YNc(2,$,3,1,"div",1),t.YNc(3,K,2,1,"div",1)),2&e){const i=t.oxw(2).$implicit;t.Q6J("ngIf","button"===i.template.type),t.xp6(1),t.Q6J("ngIf","dropdownbutton"===i.template.type),t.xp6(1),t.Q6J("ngIf","fileType"===i.template.type),t.xp6(1),t.Q6J("ngIf",i.template.choices)}}function k(e,s){1&e&&t.YNc(0,B,4,4,"ng-template",null,10,t.W1O)}function W(e,s){if(1&e&&(t.TgZ(0,"e-column",9),t.YNc(1,k,2,0,null,1),t.qZA()),2&e){const i=s.$implicit;t.Tol(i.class),t.Q6J("type",i.type)("field",i.field)("headerText",i.title)("width",i.width)("textAlign",i.position?i.position:"center")("isPrimaryKey",i.isPrimaryKey)("editType",i.editType?i.editType:null)("allowEditing",i.allowEditing)("format",i.format)("validationRules",i.validation)("allowFiltering",!1!==i.allowFiltering),t.xp6(1),t.Q6J("ngIf",i.template)}}function L(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"app-dynamic-forms",23,24),t.NdJ("submit",function(o){t.CHM(i);const c=t.oxw(4);return t.KtG(c.submitEmitter(o))}),t.qZA()}if(2&e){const i=t.oxw(4);t.Q6J("config",i.config)("partOfGrid",!0)}}function V(e,s){if(1&e&&(t.TgZ(0,"div",20)(1,"div",21),t.YNc(2,L,2,2,"app-dynamic-forms",22),t.qZA()()),2&e){const i=t.oxw(3);t.xp6(2),t.Q6J("ngIf",i.config.config&&i.config.config.length>0)}}function X(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"ejs-grid",5,6),t.NdJ("actionComplete",function(o){t.CHM(i);const c=t.oxw(2);return t.KtG(c.actionComplete(o))})("toolbarClick",function(o){t.CHM(i);const c=t.oxw(2);return t.KtG(c.toolbarClick(o))}),t.TgZ(2,"e-columns"),t.YNc(3,W,2,14,"e-column",7),t.qZA(),t.YNc(4,V,3,1,"ng-template",null,8,t.W1O),t.qZA()}if(2&e){const i=t.oxw(2);t.Q6J("height",i.height)("dataSource",i.data)("editSettings",i.config.editSettings)("toolbar",i.config.toolbar)("allowSorting",i.config.sorting.enable)("sortSettings",i.config.sorting.initialSorting)("allowGrouping",i.config.grouping.enable)("allowResizing",i.config.allowResizing)("allowPaging",i.config.paging.enable)("allowExcelExport",!0)("allowPdfExport",!0)("pageSettings",i.config.paging.settings)("allowFiltering",i.config.filtering.enable)("filterSettings",i.config.filtering.settings)("allowExcelExport",!0)("contextMenuItems",i.config.contextMenuItems),t.xp6(3),t.Q6J("ngForOf",i.config.columns)}}function tt(e,s){if(1&e&&(t.TgZ(0,"div",null,3),t.YNc(2,X,6,17,"ejs-grid",4),t.qZA()),2&e){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.config)}}let f=(()=>{class e{constructor(i,n,o,c,l,d,ot){this.configurationService=i,this.apiService=n,this.helpService=o,this.toastr=c,this.routerNavigate=l,this.router=d,this.messageService=ot,this.typeOfModification="add",this.loader=!1,this.unsubscribe=new h.x,this.invoice={},this.generateInvoice=!1}ngOnInit(){this.loader=!0,this.initializeConfig(),this.subscribeMessageServices(),this.filterOptions={type:"Menu"}}onResize(){this.height=this.helpService.getHeightForGridWithoutPx(this.partOfTab)}initializeConfig(){this.language=this.helpService.getLanguage(),this.configurationService.getConfiguration(this.path,this.file).subscribe(i=>{this.config=i,this.height=this.helpService.getHeightForGridWithoutPx(this.partOfTab),this.loader=!1,this.enableGridSpinner(),this.apiService.callApi(this.config,this.router).subscribe(n=>{this.setResponseData(n)})})}subscribeMessageServices(){this.subscription=this.messageService.getRefreshGrid().subscribe(()=>{this.enableGridSpinner(),this.apiService.callApi(this.config,this.router).subscribe(i=>{this.setResponseData(i)}),setTimeout(()=>{this.operations.dialog.close()},50)})}actionComplete(i){("beginEdit"===i.requestType||"add"===i.requestType)&&(i.dialog.buttons=[],this.config.width&&(i.dialog.width=this.config.width),"add"===i.requestType?i.dialog.header=this.language.gridPopupAddTitle:"beginEdit"===i.requestType&&(i.dialog.header=this.language.gridPopupEditTitle),this.config.config&&setTimeout(()=>{this.setValue(this.config.config,i.rowData)},50)),"delete"===i.requestType&&(this.config.uploadConfig?this.deleteDocument(i):this.deleteData(i)),this.typeOfModification=i.requestType,this.operations=i,i.cancel=!0}submitEmitter(i){this.enableGridSpinner(),"add"===this.typeOfModification?this.callServerMethod(this.config.editSettingsRequest.add,i):"beginEdit"===this.typeOfModification&&this.callServerMethod(this.config.editSettingsRequest.edit,i),this.operations.dialog.close()}callServerMethod(i,n){this.apiService.callServerMethod(i,n,this.router).subscribe(o=>{o?(this.toastr.showSuccess(),this.apiService.callApi(this.config,this.router).subscribe(c=>{this.setResponseData(c)})):(this.toastr.showError(),this.grid.hideSpinner())})}setResponseData(i){"GET"===this.config.request.type&&(this.data=i,this.grid.hideSpinner())}enableGridSpinner(){setTimeout(()=>{this.grid.showSpinner()},50)}disabledGridSpinner(){setTimeout(()=>{this.grid.hideSpinner()},150)}deleteData(i){for(let n=0;n<i.data.length;n++)this.callServerMethod(this.config.editSettingsRequest.delete,i.data[n])}deleteDocument(i){for(let n=0;n<i.data.length;n++)this.callServerMethod(this.config.uploadConfig.delete,i.data[n])}setValue(i,n){for(let o=0;o<i.length;o++)this.form.setValue(i[o].name,n[i[o].name],i[o].type)}openPage(i,n,o){const c=this.helpService.concatenatePageLink(i,n,o);this.routerNavigate.navigate([c])}unsuscribeME(){this.unsubscribe.next(null),this.unsubscribe.complete(),this.subscription&&this.subscription.unsubscribe()}ngOnDestroy(){this.unsuscribeME()}previewDocument(i){this.apiService.getDocument(i).subscribe(n=>{let o=new Blob([n],{type:"application/pdf"});var c=URL.createObjectURL(o);window.open(c)})}getFileTypeIcon(i,n){return this.helpService.getFileTypeIcon(i[n])}clickDropDownButton(i,n,o){if(i.item.properties.id)if(o.itemsRequest&&o.itemsRequest[i.item.properties.id])this.apiService.callApi({request:o.itemsRequest[i.item.properties.id],body:n},this.router).subscribe(l=>{l?this.toastr.showSuccess():this.toastr.showError(),this.grid.hideSpinner()});else{if(o.fields&&o.fields[i.item.properties.id])for(let c=0;c<o.fields[i.item.properties.id].length;c++)this.invoice[o.fields[i.item.properties.id][c].key]=n[o.fields[i.item.properties.id][c].value];this.invoice.products=[],this.invoiceAction=i.item.properties.id,this.generateInvoice=!0,setTimeout(()=>{this.generateInvoice=!1},100)}}toolbarClick(i){"e-excelexport"===i.item.prefixIcon?this.grid.excelExport({exportType:"CurrentPage"}):"e-pdfexport"===i.item.prefixIcon&&this.grid.pdfExport({exportType:"CurrentPage"})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(v.e),t.Y36(x.f),t.Y36(y.s),t.Y36(T.l),t.Y36(_.F0),t.Y36(_.gz),t.Y36(w.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dynamic-grid"]],viewQuery:function(i,n){if(1&i&&(t.Gf(g.b,5),t.Gf(D,5),t.Gf(I,5),t.Gf(J,5),t.Gf(Z,5)),2&i){let o;t.iGM(o=t.CRH())&&(n.form=o.first),t.iGM(o=t.CRH())&&(n.grid=o.first),t.iGM(o=t.CRH())&&(n.orderForm=o.first),t.iGM(o=t.CRH())&&(n.editSettingsTemplate=o.first),t.iGM(o=t.CRH())&&(n.container=o.first)}},hostBindings:function(i,n){1&i&&t.NdJ("resize",function(c){return n.onResize(c)},!1,t.Jf7)},inputs:{path:"path",file:"file",partOfTab:"partOfTab"},decls:2,vars:2,consts:[["style","height: 70vh",4,"ngIf"],[4,"ngIf"],[2,"height","70vh"],["container",""],["width","100%","allowTextWrap","true",3,"height","dataSource","editSettings","toolbar","allowSorting","sortSettings","allowGrouping","allowResizing","allowPaging","allowExcelExport","allowPdfExport","pageSettings","allowFiltering","filterSettings","contextMenuItems","actionComplete","toolbarClick",4,"ngIf"],["width","100%","allowTextWrap","true",3,"height","dataSource","editSettings","toolbar","allowSorting","sortSettings","allowGrouping","allowResizing","allowPaging","allowExcelExport","allowPdfExport","pageSettings","allowFiltering","filterSettings","contextMenuItems","actionComplete","toolbarClick"],["grid",""],[3,"type","field","headerText","width","class","textAlign","isPrimaryKey","editType","allowEditing","format","validationRules","allowFiltering",4,"ngFor","ngForOf"],["editSettingsTemplate",""],[3,"type","field","headerText","width","textAlign","isPrimaryKey","editType","allowEditing","format","validationRules","allowFiltering"],["template",""],[3,"class","click",4,"ngIf"],[3,"click"],["class","mat-icon notranslate material-icons mat-icon-no-color","aria-hidden","false",4,"ngIf"],["aria-hidden","false",1,"mat-icon","notranslate","material-icons","mat-icon-no-color"],["ejs-dropdownbutton","","class","background-none",3,"items","content","select",4,"ngIf"],["ejs-dropdownbutton","",1,"background-none",3,"items","content","select"],[4,"ngFor","ngForOf"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"],["ngForm",""],[1,"form-row"],[3,"config","partOfGrid","submit",4,"ngIf"],[3,"config","partOfGrid","submit"],["form","dynamicForm"]],template:function(i,n){1&i&&(t.YNc(0,j,2,0,"div",0),t.YNc(1,tt,3,1,"div",1)),2&i&&(t.Q6J("ngIf",n.loader),t.xp6(1),t.Q6J("ngIf",!n.loader))},dependencies:[p.sg,p.O5,C.JL,b.R,S._z,r.MwP,r.iKq,r.SRY,r.fMR,r.NQQ,G.Hw,g.b]}),e})();const it=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"cities",component:(()=>{class e{constructor(){this.path="/grids/superadmin",this.file="cities.json"}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cities"]],decls:1,vars:2,consts:[[3,"path","file"]],template:function(i,n){1&i&&t._UZ(0,"app-dynamic-grid",0),2&i&&t.Q6J("path",n.path)("file",n.file)},dependencies:[f]}),e})()},{path:"users",component:(()=>{class e{constructor(){this.path="/grids/superadmin",this.file="users.json"}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],decls:1,vars:2,consts:[[3,"path","file"]],template:function(i,n){1&i&&t._UZ(0,"app-dynamic-grid",0),2&i&&t.Q6J("path",n.path)("file",n.file)},dependencies:[f]}),e})()}];let et=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(it),_.Bz]}),e})(),nt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,et,u.w]}),e})()}}]);